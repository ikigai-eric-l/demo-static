var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => __defNormalProp(obj, key + "", value);
var e, t, i = { 57455: (e2, t2, i2) => {
  i2.d(t2, { C: () => d2 });
  var r2 = i2(42096), a2 = i2.n(r2), s2 = i2(63939), n = i2(31865), o = (i2(37837), i2(71517)), c = i2(60264);
  function d2(e3, t3) {
    function i3(e4) {
      let t4 = 0, i4 = e4.readUint8();
      for (; 255 === i4; ) t4 += 255, i4 = e4.readUint8();
      return t4 += i4, t4;
    }
    function r3(e4) {
      const t4 = a2()(e4).filter((e5) => 0 !== e5).map((e5) => String.fromCharCode(e5)).join("").trim();
      if (!t4) return "";
      const i4 = t4.match(/ts["']?\s*[:=]\s*(\d{13})/);
      if (i4) return i4[1];
      const r4 = t4.match(/\d{13}/);
      return r4 ? r4[0] : "";
    }
    s2.f[15](e3 + 36);
    const d3 = 27 === t3.codecpar.codecId || 173 === t3.codecpar.codecId;
    if (d3) {
      if (d3) {
        const d4 = 64 & s2.f[15](e3 + 36) ? c.py((0, o.iI)(e3)) : c.wN((0, o.iI)(e3), t3.metadata.naluLengthSizeMinusOne || 3);
        if (27 === t3.codecpar.codecId) {
          for (const e4 of d4) if (6 == (31 & e4[0])) {
            const t4 = new n.A(e4.subarray(1));
            for (; t4.remainingSize() > 1; ) {
              const e5 = i3(t4), s3 = i3(t4);
              if (0 === s3 || s3 > t4.remainingSize()) {
                console.log("[debug:SEI] payload size 異常，提前中止解析", { payloadType: e5, payloadSize: s3, remaining: t4.remainingSize() });
                break;
              }
              let n2 = t4.readBuffer(s3);
              if (5 === e5 || 100 === e5) if (5 === e5 && n2.length >= 16 && (n2 = n2.subarray(16)), n2.length >= 3) {
                const t5 = r3(n2);
                if (t5) return t5;
                console.log("[debug:SEI] 無法從 H264 payload 解析 timecode", { payloadType: e5, payloadSize: s3, text: a2()(n2).filter((e6) => 0 !== e6).slice(0, 32) });
              } else console.log("[debug:SEI] H264 payload 長度不足不能分析 timecode", { payloadType: e5, payloadSize: s3 });
              else console.log("[debug:SEI] 跳過非 timecode SEI type:", e5);
            }
          }
        } else if (173 === t3.codecpar.codecId) for (const e4 of d4) {
          const t4 = e4[0] >>> 1 & 63;
          if (39 === t4 || 40 === t4) {
            const t5 = new n.A(e4.subarray(2));
            for (; t5.remainingSize() > 1; ) {
              const e5 = i3(t5), s3 = i3(t5);
              if (0 === s3 || s3 > t5.remainingSize()) {
                console.log("[debug:SEI] HEVC payload size 異常，中止分析", { payloadType: e5, payloadSize: s3, remaining: t5.remainingSize() });
                break;
              }
              let n2 = t5.readBuffer(s3);
              const o2 = 5 === e5 || 100 === e5;
              console.log("[debug:SEI] 偵測到 HEVC SEI payload", { payloadType: e5, payloadSize: s3, preview: a2()(n2.slice(0, 16)) }), o2 && n2.length >= 16 && (n2 = n2.subarray(16));
              const c2 = r3(n2);
              if (c2) return console.log("[debug:SEI] 成功分析 HEVC timecode", { timecode: c2, payloadSize: s3, payloadType: e5 }), console.log("[debug:timecode - sei] HEVC timecode:", { timecode: c2, payloadSize: s3, payloadType: e5 }), c2;
              console.log("[debug:SEI] 不能從 HEVC payload 分析 timecode", { payloadType: e5, payloadSize: s3, text: a2()(n2).filter((e6) => 0 !== e6).slice(0, 32) });
            }
          }
        }
      }
    } else console.log("[debug:SEI] 不支援的 codec, 跳過 SEI 解析", { codecId: t3.codecpar.codecId });
  }
}, 92246: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(134), a2 = i2(16030), s2 = i2(4624), n = i2(9705);
  class o {
    constructor(e3) {
      (0, r2.A)(this, "resampler", void 0), (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "inputParameters", void 0), (0, r2.A)(this, "outputParameters", void 0), this.options = e3, this.resampler = new a2.A(this.options.resource);
    }
    async open(e3, t3) {
      this.inputParameters = e3, this.outputParameters = t3, await this.resampler.run(), this.resampler.invoke("resample_set_input_parameters", e3.sampleRate, e3.channels, e3.format, e3.layout || 0), this.resampler.invoke("resample_set_output_parameters", t3.sampleRate, t3.channels, t3.format, t3.layout || 0);
      let i3 = this.resampler.invoke("resample_init");
      return i3 < 0 ? (s2.z3("open resampler failed, ret: ".concat(i3), "src/audioresample/Resampler.ts", 85), n.nr) : 0;
    }
    resample(e3, t3, i3) {
      return this.resampler.invoke("resample_process", e3, t3, i3);
    }
    getOutputSampleCount(e3) {
      return this.resampler.invoke("resample_nb_sample", e3);
    }
    close() {
      this.resampler.invoke("resample_destroy"), this.resampler.destroy();
    }
    getInputPCMParameters() {
      return this.inputParameters;
    }
    getOutputPCMParameters() {
      return this.outputParameters;
    }
  }
}, 70089: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134), a2 = i2(16030);
  class s2 {
    constructor(e3) {
      (0, r2.A)(this, "processor", void 0), (0, r2.A)(this, "options", void 0), this.options = e3, this.processor = new a2.A(this.options.resource);
    }
    async open(e3) {
      await this.processor.run(), this.processor.invoke("stretchpitch_init"), this.processor.invoke("stretchpitch_set_channels", e3.channels), this.processor.invoke("stretchpitch_set_samplerate", e3.sampleRate);
    }
    setRate(e3) {
      this.processor.invoke("stretchpitch_set_rate", e3);
    }
    setRateChange(e3) {
      this.processor.invoke("stretchpitch_set_rate_change", e3);
    }
    setTempo(e3) {
      this.processor.invoke("stretchpitch_set_tempo", e3);
    }
    setTempoChange(e3) {
      this.processor.invoke("stretchpitch_set_tempo_change", e3);
    }
    setPitch(e3) {
      this.processor.invoke("stretchpitch_set_pitch", e3);
    }
    setPitchOctaves(e3) {
      this.processor.invoke("stretchpitch_set_pitch_octaves", e3);
    }
    setPitchSemiTones(e3) {
      this.processor.invoke("stretchpitch_set_pitch_semi_tones", e3);
    }
    sendSamples(e3, t3) {
      this.processor.invoke("stretchpitch_send_samples", e3, t3);
    }
    receiveSamples(e3, t3) {
      return this.processor.invoke("stretchpitch_receive_samples", e3, t3);
    }
    flush() {
      this.processor.invoke("stretchpitch_flush");
    }
    clear() {
      this.processor.invoke("stretchpitch_clear");
    }
    getUnprocessedSamplesCount() {
      return this.processor.invoke("stretchpitch_get_unprocessed_samples_num");
    }
    getInputOutputSamplesRatio() {
      return this.processor.invoke("stretchpitch_get_input_output_sample_ratio");
    }
    getLatency() {
      return this.processor.invoke("get_latency");
    }
    close() {
      this.processor.invoke("stretchpitch_destroy"), this.processor.destroy();
    }
  }
}, 53616: (e2, t2, i2) => {
  i2.d(t2, { A: () => l });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(9705), n = i2(26235), o = i2(59996), c = i2(62624), d2 = i2(9787), h = i2(43950);
  class l {
    constructor(e3) {
      (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "frame", void 0), (0, r2.A)(this, "decoder", void 0), this.options = e3;
    }
    getAVFrame() {
      return this.frame ? this.frame : this.frame = { pts: BigInt(0), duration: BigInt(0), rects: [], timeBase: { den: 1, num: 1 } };
    }
    outputAVFrame() {
      this.frame && (this.options.onReceiveSubtitle && this.options.onReceiveSubtitle(this.frame), this.frame = void 0);
    }
    receiveAVFrame() {
      return this.decoder.receiveAVFrame(this.getAVFrame());
    }
    async open(e3) {
      switch (a2.f[15](e3 + 4)) {
        case 94226:
          this.decoder = new n.A();
          break;
        case 94232:
          this.decoder = new c.A();
          break;
        case 94210:
        case 94225:
          this.decoder = new h.A();
          break;
        case 94213:
          this.decoder = new d2.A();
          break;
        case 94212:
        case 94230:
          this.decoder = new o.A();
          break;
        default:
          return s2.r8;
      }
      return 0;
    }
    decode(e3) {
      let t3 = this.decoder.sendAVPacket(e3);
      if (t3) return t3;
      for (; ; ) {
        if (t3 = this.receiveAVFrame(), 1 !== t3) {
          if (t3 < 0) return t3;
          break;
        }
        this.outputAVFrame();
      }
      return 0;
    }
    async flush() {
      for (this.decoder.flush(); ; ) {
        if (this.receiveAVFrame() < 1) return;
        this.outputAVFrame();
      }
    }
    close() {
      this.frame && (this.frame = void 0);
    }
  }
}, 59996: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(81023), n = i2(71517), o = i2(50011);
  class c extends s2.A {
    constructor() {
      super(), (0, r2.A)(this, "queue", void 0), this.queue = [];
    }
    sendAVPacket(e3) {
      return this.queue.push({ data: (0, n.iI)(e3).slice(), pts: a2.f[17](e3 + 8), duration: a2.f[17](e3 + 48), timeBase: { den: a2.f[15](e3 + 76), num: a2.f[15](e3 + 72) } }), 0;
    }
    receiveAVFrame(e3) {
      if (this.queue.length) {
        const t3 = this.queue.shift();
        e3.pts = t3.pts, e3.duration = t3.duration, e3.timeBase.den = t3.timeBase.den, e3.timeBase.num = t3.timeBase.num;
        let i3 = o.decode(t3.data);
        return /^\w+?\s*:/.test(i3) || (i3 = "Dialogue: " + i3), e3.rects.push({ type: 3, text: i3, flags: 0 }), 1;
      }
      return 0;
    }
    flush() {
      return 0;
    }
  }
}, 81023: (e2, t2, i2) => {
  i2.d(t2, { A: () => r2 });
  class r2 {
  }
}, 43950: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(81023), n = i2(71517), o = i2(50011);
  class c extends s2.A {
    constructor() {
      super(), (0, r2.A)(this, "queue", void 0), this.queue = [];
    }
    sendAVPacket(e3) {
      return this.queue.push({ data: (0, n.iI)(e3).slice(), pts: a2.f[17](e3 + 8), duration: a2.f[17](e3 + 48), timeBase: { den: a2.f[15](e3 + 76), num: a2.f[15](e3 + 72) } }), 0;
    }
    receiveAVFrame(e3) {
      if (this.queue.length) {
        const t3 = this.queue.shift();
        return e3.pts = t3.pts, e3.duration = t3.duration, e3.timeBase.den = t3.timeBase.den, e3.timeBase.num = t3.timeBase.num, e3.rects.push({ type: 1, text: o.decode(t3.data), flags: 0 }), 1;
      }
      return 0;
    }
    flush() {
      return 0;
    }
  }
}, 9787: (e2, t2, i2) => {
  i2.d(t2, { A: () => d2 });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(81023), n = i2(71517), o = i2(50011), c = i2(4624);
  class d2 extends s2.A {
    constructor() {
      super(), (0, r2.A)(this, "queue", void 0), this.queue = [];
    }
    sendAVPacket(e3) {
      const t3 = (0, n.iI)(e3).slice();
      if (t3.length < 2) return 0;
      const i3 = t3[0] << 8 | t3[1];
      if (i3 + 2 > t3.length) return c.R8("invalid timed text data, need ".concat(i3 + 2, " but got ").concat(t3.length, ", ignore it"), "src/avcodec/subtitle/decoder/TimedTextDecoder.ts", 59), 0;
      const r3 = o.decode(t3.subarray(2, 2 + i3));
      return this.queue.push({ text: r3, pts: a2.f[17](e3 + 8), duration: a2.f[17](e3 + 48), timeBase: { den: a2.f[15](e3 + 76), num: a2.f[15](e3 + 72) } }), 0;
    }
    receiveAVFrame(e3) {
      if (this.queue.length) {
        const t3 = this.queue.shift();
        return e3.pts = t3.pts, e3.duration = t3.duration, e3.timeBase.den = t3.timeBase.den, e3.timeBase.num = t3.timeBase.num, e3.rects.push({ type: 1, text: t3.text, flags: 0 }), 1;
      }
      return 0;
    }
    flush() {
      return 0;
    }
  }
}, 62624: (e2, t2, i2) => {
  i2.d(t2, { A: () => h });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(81023), n = i2(50011), o = i2(71517), c = i2(77231), d2 = i2(74762);
  class h extends s2.A {
    constructor() {
      super(), (0, r2.A)(this, "queue", void 0), this.queue = [];
    }
    sendAVPacket(e3) {
      let t3 = n.decode((0, o.iI)(e3));
      return t3 ? (/<tt/.test(t3.trim()) ? this.queue = this.queue.concat(d2.q(t3).queue) : this.queue.push({ pts: a2.f[17](e3 + 8), duration: a2.f[17](e3 + 48), context: t3, region: "Default" }), 0) : 0;
    }
    receiveAVFrame(e3) {
      if (this.queue.length) {
        const t3 = this.queue.shift();
        return e3.pts = t3.pts, e3.duration = t3.duration, e3.timeBase.den = c.qs, e3.timeBase.num = 1, e3.rects.push({ type: 2, text: t3.context, flags: 0 }), 1;
      }
      return 0;
    }
    flush() {
      return 0;
    }
  }
}, 26235: (e2, t2, i2) => {
  i2.d(t2, { A: () => h });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(81023), n = i2(50011), o = i2(71517), c = i2(54825), d2 = i2(77231);
  class h extends s2.A {
    constructor() {
      super(), (0, r2.A)(this, "queue", void 0), this.queue = [];
    }
    findTimelineTag(e3) {
      const t3 = e3.indexOf("<");
      if (t3 >= 0) {
        const i3 = e3.indexOf(">", t3);
        if (i3 > t3 && /^(\d{2,}:)?\d{2}:\d{2}\.\d{1,3}$/.test(e3.substring(t3 + 1, i3))) return { start: t3, end: i3 };
      }
      return { start: -1, end: -1 };
    }
    sendAVPacket(e3) {
      let t3 = n.decode((0, o.iI)(e3)), i3 = a2.f[17](e3 + 8);
      const r3 = i3 + a2.f[17](e3 + 48), s3 = [];
      for (; ; ) {
        const { start: r4, end: n2 } = this.findTimelineTag(t3);
        if (r4 < 0) break;
        const o2 = (0, c.j)(t3.substring(r4 + 1, n2));
        s3.push(t3.substring(0, r4)), this.queue.push({ context: s3.join(""), pts: i3, duration: o2 - i3, timeBase: { den: a2.f[15](e3 + 76), num: a2.f[15](e3 + 72) } }), i3 = o2, t3 = t3.substring(n2 + 1);
      }
      return s3.push(t3), this.queue.push({ context: s3.join(""), pts: i3, duration: r3 - i3, timeBase: { den: a2.f[15](e3 + 76), num: a2.f[15](e3 + 72) } }), 0;
    }
    receiveAVFrame(e3) {
      if (this.queue.length) {
        const t3 = this.queue.shift();
        return e3.pts = t3.pts, e3.duration = t3.duration, e3.timeBase.den = d2.qs, e3.timeBase.num = 1, e3.rects.push({ type: 2, text: t3.context, flags: 0 }), 1;
      }
      return 0;
    }
    flush() {
      return 0;
    }
  }
}, 75742: (e2, t2, i2) => {
  i2.d(t2, { A: () => g });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(11473), o = i2(16030), c = i2(56024), d2 = i2(4624), h = i2(95797), l = (i2(56490), i2(95335)), u = i2(73749), f = i2(67672), p = i2(37837), m = i2(9705);
  class g {
    constructor(e3) {
      (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "decoder", void 0), (0, r2.A)(this, "frame", 0), (0, r2.A)(this, "decoderOptions", 0), (0, r2.A)(this, "timeBase", void 0), this.options = e3, this.decoder = new o.A(e3.resource);
    }
    getAVFrame() {
      return this.frame ? this.frame : this.frame = this.options.avframePool ? this.options.avframePool.alloc() : (0, c.FP)();
    }
    outputAVFrame() {
      this.frame && (this.options.onReceiveAVFrame ? (s2.M[15](this.frame + 124, this.timeBase.den), s2.M[15](this.frame + 120, this.timeBase.num), this.options.onReceiveAVFrame(this.frame)) : this.options.avframePool ? this.options.avframePool.release(this.frame) : (0, c.xj)(this.frame), this.frame = 0);
    }
    receiveAVFrame() {
      return this.decoder.invoke("decoder_receive", this.getAVFrame());
    }
    async open(e3, t3 = {}) {
      await this.decoder.run();
      const i3 = n.s_.malloc(4);
      s2.M[20](i3, 0), l.HP(t3).length && (this.decoderOptions && (u.AO(this.decoderOptions), n.s_.free(this.decoderOptions), this.decoderOptions = 0), this.decoderOptions = (0, p.Gy)(8), l.__(t3, (e4, t4) => {
        (f.Yj(e4) || f.Yj(t4)) && u.a5(this.decoderOptions, t4, e4);
      }), s2.M[20](i3, this.decoderOptions));
      let r3 = 0;
      return h.A.jspi ? r3 = await this.decoder.invokeAsync("decoder_open", e3, 0, 1, i3) : (r3 = this.decoder.invoke("decoder_open", e3, 0, 1, i3), await this.decoder.childThreadsReady()), this.decoderOptions = a2.f[20](i3), n.s_.free(i3), r3 < 0 ? (d2.z3("open audio decoder failed, ret: ".concat(r3), "src/avcodec/wasmcodec/AudioDecoder.ts", 128), m.r8) : (this.timeBase = void 0, 0);
    }
    decode(e3) {
      this.timeBase || (this.timeBase = { den: a2.f[15](e3 + 76), num: a2.f[15](e3 + 72) });
      let t3 = this.decoder.invoke("decoder_decode", e3);
      if (t3) return t3;
      for (; ; ) {
        if (t3 = this.receiveAVFrame(), 1 !== t3) {
          if (t3 < 0) return t3;
          break;
        }
        this.outputAVFrame();
      }
      return 0;
    }
    async flush() {
      for (this.decoder.invoke("decoder_flush"); ; ) {
        const e3 = this.receiveAVFrame();
        if (e3 < 1) return e3;
        this.outputAVFrame();
      }
      return 0;
    }
    close() {
      this.decoder.invoke("decoder_close"), this.decoder.destroy(), this.frame && (this.options.avframePool ? this.options.avframePool.release(this.frame) : (0, c.xj)(this.frame), this.frame = 0), this.decoderOptions && (u.AO(this.decoderOptions), n.s_.free(this.decoderOptions), this.decoderOptions = 0);
    }
  }
}, 40417: (e2, t2, i2) => {
  i2.d(t2, { A: () => g });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(11473), o = i2(16030), c = i2(56024), d2 = i2(4624), h = i2(95797), l = (i2(56490), i2(95335)), u = i2(73749), f = i2(67672), p = i2(37837), m = i2(9705);
  class g {
    constructor(e3) {
      (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "decoder", void 0), (0, r2.A)(this, "frame", 0), (0, r2.A)(this, "parameters", 0), (0, r2.A)(this, "decoderOptions", 0), (0, r2.A)(this, "timeBase", void 0), (0, r2.A)(this, "dtsQueue", []), this.options = e3, this.decoder = new o.A(this.options.resource);
    }
    getAVFrame() {
      return this.frame ? this.frame : this.frame = this.options.avframePool ? this.options.avframePool.alloc() : (0, c.FP)();
    }
    outputAVFrame() {
      this.frame && (2 & a2.f[15](this.parameters + 160) && this.dtsQueue.length && s2.M[17](this.frame + 104, this.dtsQueue.shift()), this.options.onReceiveAVFrame ? (s2.M[15](this.frame + 124, this.timeBase.den), s2.M[15](this.frame + 120, this.timeBase.num), this.options.onReceiveAVFrame(this.frame)) : this.options.avframePool ? this.options.avframePool.release(this.frame) : (0, c.xj)(this.frame), this.frame = 0);
    }
    receiveAVFrame() {
      return this.decoder.invoke("decoder_receive", this.getAVFrame());
    }
    async open(e3, t3 = 1, i3 = {}) {
      await this.decoder.run(void 0, t3);
      let r3 = 0;
      const o2 = n.s_.malloc(4);
      return s2.M[20](o2, 0), l.HP(i3).length && (this.decoderOptions && (u.AO(this.decoderOptions), n.s_.free(this.decoderOptions), this.decoderOptions = 0), this.decoderOptions = (0, p.Gy)(8), l.__(i3, (e4, t4) => {
        (f.Yj(e4) || f.Yj(t4)) && u.a5(this.decoderOptions, t4, e4);
      }), s2.M[20](o2, this.decoderOptions)), h.A.jspi ? r3 = await this.decoder.invokeAsync("decoder_open", e3, 0, t3, o2) : (r3 = this.decoder.invoke("decoder_open", e3, 0, t3, o2), await this.decoder.childThreadsReady()), this.decoderOptions = a2.f[20](o2), n.s_.free(o2), r3 < 0 ? (d2.z3("open video decoder failed, ret: ".concat(r3), "src/avcodec/wasmcodec/VideoDecoder.ts", 171), m.r8) : (this.parameters = e3, this.timeBase = void 0, this.dtsQueue.length = 0, 0);
    }
    decode(e3) {
      this.timeBase || (this.timeBase = { den: a2.f[15](e3 + 76), num: a2.f[15](e3 + 72) });
      let t3 = this.decoder.invoke("decoder_decode", e3);
      if (t3) return t3;
      for (2 & a2.f[15](this.parameters + 160) && this.dtsQueue.push(a2.f[17](e3 + 16)); ; ) {
        if (t3 = this.receiveAVFrame(), 1 !== t3) {
          if (t3 < 0) return t3;
          break;
        }
        this.outputAVFrame();
      }
      return 0;
    }
    async flush() {
      for (this.decoder.invoke("decoder_flush"); ; ) {
        const e3 = this.receiveAVFrame();
        if (e3 < 1) return e3;
        this.outputAVFrame();
      }
      return 0;
    }
    close() {
      this.decoder.invoke("decoder_close"), this.decoder.destroy(), this.frame && (this.options.avframePool ? this.options.avframePool.release(this.frame) : (0, c.xj)(this.frame), this.frame = 0), this.parameters = 0, this.decoderOptions && (u.AO(this.decoderOptions), n.s_.free(this.decoderOptions), this.decoderOptions = 0);
    }
    setSkipFrameDiscard(e3) {
      this.decoder.invoke("decoder_discard", e3);
    }
    getChildThreadCount() {
      return this.decoder ? this.decoder.getChildThreadCount() : 0;
    }
  }
}, 77104: (e2, t2, i2) => {
  i2.d(t2, { A: () => f });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(79756), n = i2(14686), o = i2(71517), c = i2(22898), d2 = i2(4624), h = i2(9705), l = i2(72739);
  const u = "src/avcodec/webcodec/AudioDecoder.ts";
  class f {
    constructor(e3) {
      (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "decoder", void 0), (0, r2.A)(this, "parameters", 0), (0, r2.A)(this, "extradata", void 0), (0, r2.A)(this, "currentError", null), this.options = e3;
    }
    output(e3) {
      this.options.onReceiveAudioData ? this.options.onReceiveAudioData(e3) : e3.close();
    }
    error(e3) {
      this.currentError = e3, this.options.onError(e3);
    }
    async open(e3) {
      var t3;
      this.currentError = null, this.parameters = e3, this.extradata = void 0, 0 !== a2.f[20](e3 + 12) && (this.extradata = (0, n.s3)(a2.f[20](e3 + 12), a2.f[15](e3 + 16)).slice());
      const i3 = { codec: null !== (t3 = this.options.codec) && void 0 !== t3 ? t3 : (0, s2.A)(this.parameters), sampleRate: a2.f[15](e3 + 136), numberOfChannels: a2.f[15](e3 + 116), description: this.extradata };
      i3.description || delete i3.description;
      try {
        if (!(await AudioDecoder.isConfigSupported(i3)).supported) return d2.z3("not support", u, 95), h.nr;
      } catch (e4) {
        return d2.z3("".concat(e4), u, 100), h.r8;
      }
      return this.decoder && "closed" !== this.decoder.state && this.decoder.close(), this.decoder = new AudioDecoder({ output: this.output.bind(this), error: this.error.bind(this) }), this.decoder.reset(), this.decoder.configure(i3), this.currentError ? (d2.z3("open audio decoder error, ".concat(this.currentError), u, 117), h.r8) : 0;
    }
    changeExtraData(e3) {
      var t3;
      return l.FB(e3, this.extradata) ? 0 : (this.currentError = null, this.extradata = e3.slice(), this.decoder.reset(), this.decoder.configure({ codec: null !== (t3 = this.options.codec) && void 0 !== t3 ? t3 : (0, s2.A)(this.parameters), sampleRate: a2.f[15](this.parameters + 136), numberOfChannels: a2.f[15](this.parameters + 116), description: this.extradata }), this.currentError ? (d2.z3("change extra data error, ".concat(this.currentError), u, 141), h.r8) : 0);
    }
    decode(e3) {
      if (this.currentError) return d2.z3("decode error, ".concat(this.currentError), u, 150), h.LR;
      const t3 = (0, o.rU)(e3, 1);
      if (0 !== t3) {
        let e4 = this.changeExtraData((0, n.s3)(a2.f[20](t3), a2.f[25](t3 + 4)));
        if (e4) return e4;
      }
      const i3 = (0, c.A)(e3);
      try {
        this.decoder.decode(i3);
      } catch (e4) {
        return d2.z3("decode error, ".concat(e4), u, 169), h.LR;
      }
      return 0;
    }
    async flush() {
      if (this.currentError) return d2.z3("flush error, ".concat(this.currentError), u, 178), h.LR;
      try {
        return await this.decoder.flush(), 0;
      } catch (e3) {
        return d2.z3("flush error, ".concat(e3), u, 186), h.LR;
      }
    }
    close() {
      "closed" !== this.decoder.state && this.decoder.close(), this.decoder = void 0;
    }
    getQueueLength() {
      var e3, t3;
      return null !== (e3 = null === (t3 = this.decoder) || void 0 === t3 ? void 0 : t3.decodeQueueSize) && void 0 !== e3 ? e3 : 0;
    }
    static async isSupported(e3) {
      let t3;
      0 !== a2.f[20](e3 + 12) && (t3 = (0, n.s3)(a2.f[20](e3 + 12), a2.f[15](e3 + 16)).slice());
      const i3 = { codec: (0, s2.A)(e3), sampleRate: a2.f[15](e3 + 136), numberOfChannels: a2.f[15](e3 + 116), description: t3 };
      i3.description || delete i3.description;
      try {
        return (await AudioDecoder.isConfigSupported(i3)).supported;
      } catch (e4) {
        return false;
      }
    }
  }
}, 71039: (e2, t2, i2) => {
  i2.d(t2, { A: () => x });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(77162), n = i2(29170), o = (i2(9599), i2(86834)), c = i2(28875), d2 = i2(14686), h = i2(71517), l = i2(39365), u = i2(28917), f = i2(4624), p = i2(44690), m = i2(62815), g = i2(67659), v = i2(59166), A = i2(9705), y = i2(72739), w = i2(77231), b = i2(44328);
  const k = "src/avcodec/webcodec/VideoDecoder.ts";
  class x {
    constructor(e3) {
      (0, r2.A)(this, "decoder", void 0), (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "parameters", 0), (0, r2.A)(this, "extradata", void 0), (0, r2.A)(this, "currentError", null), (0, r2.A)(this, "inputQueue", void 0), (0, r2.A)(this, "outputQueue", void 0), (0, r2.A)(this, "dtsQueue", void 0), (0, r2.A)(this, "sort", void 0), (0, r2.A)(this, "keyframeRequire", false), (0, r2.A)(this, "extradataRequire", false), this.options = e3, this.inputQueue = [], this.outputQueue = [], this.dtsQueue = [], this.sort = !(!o.A.safari && !p.A.ios);
    }
    async output(e3) {
      if (2 & a2.f[15](this.parameters + 160) && this.dtsQueue.length) {
        const t3 = e3;
        e3 = new VideoFrame(t3, { timestamp: this.dtsQueue.shift() }), t3.close();
      }
      if (this.sort) {
        let t3 = 0;
        for (; t3 < this.outputQueue.length; t3++) if (this.outputQueue[t3].timestamp > e3.timestamp) {
          this.outputQueue.splice(t3, 0, e3);
          break;
        }
        for (t3 === this.outputQueue.length && this.outputQueue.push(e3); this.outputQueue.length > 2 && this.outputQueue[0].timestamp === this.inputQueue[0]; ) {
          const e4 = this.outputQueue.shift();
          this.options.onReceiveVideoFrame ? this.options.onReceiveVideoFrame(e4) : e4.close(), this.inputQueue.shift();
        }
      } else this.options.onReceiveVideoFrame ? this.options.onReceiveVideoFrame(e3) : e3.close();
    }
    error(e3) {
      this.currentError = e3, this.options.onError(e3);
    }
    changeExtraData(e3) {
      var t3, i3;
      if (y.FB(e3, this.extradata)) return 0;
      this.currentError = null, this.extradata = e3.slice(), 27 === a2.f[15](this.parameters + 4) ? m.XC({ codecpar: (0, n.A)(this.parameters, s2.A), sideData: {}, metadata: {} }, this.extradata) : 173 === a2.f[15](this.parameters + 4) && g.XC({ codecpar: (0, n.A)(this.parameters, s2.A), sideData: {}, metadata: {} }, this.extradata), this.decoder.reset();
      const r3 = { codec: null !== (t3 = this.options.codec) && void 0 !== t3 ? t3 : (0, c.A)(this.parameters, e3), codedWidth: a2.f[15](this.parameters + 56), codedHeight: a2.f[15](this.parameters + 60), description: this.extradata, hardwareAcceleration: (0, l.C)(null === (i3 = this.options.enableHardwareAcceleration) || void 0 === i3 || i3) };
      return r3.codedWidth || delete r3.codedWidth, r3.codedHeight || delete r3.codedHeight, this.options.optimizeForLatency && (r3.optimizeForLatency = this.options.optimizeForLatency), this.decoder.configure(r3), this.currentError ? (f.z3("change extra data error, ".concat(this.currentError), k, 182), A.r8) : (this.keyframeRequire = true, 0);
    }
    async open(e3) {
      var t3, i3;
      this.currentError = null, this.extradata = void 0, 0 !== a2.f[20](e3 + 12) && (this.extradata = (0, d2.s3)(a2.f[20](e3 + 12), a2.f[15](e3 + 16)).slice()), this.parameters = e3;
      const r3 = { codec: null !== (t3 = this.options.codec) && void 0 !== t3 ? t3 : (0, c.A)(e3), codedWidth: a2.f[15](e3 + 56), codedHeight: a2.f[15](e3 + 60), description: 1 & a2.f[15](e3 + 160) ? void 0 : this.extradata, hardwareAcceleration: (0, l.C)(null === (i3 = this.options.enableHardwareAcceleration) || void 0 === i3 || i3) };
      this.options.optimizeForLatency && (r3.optimizeForLatency = this.options.optimizeForLatency), r3.description || delete r3.description, r3.codedWidth || delete r3.codedWidth, r3.codedHeight || delete r3.codedHeight;
      try {
        if (!(await VideoDecoder.isConfigSupported(r3)).supported) return f.z3("not support", k, 224), A.nr;
      } catch (e4) {
        return f.z3("".concat(e4), k, 229), A.r8;
      }
      return this.decoder && "closed" !== this.decoder.state && this.decoder.close(), this.decoder = new VideoDecoder({ output: this.output.bind(this), error: this.error.bind(this) }), this.decoder.reset(), this.decoder.configure(r3), this.currentError ? (f.z3("open video decoder error, ".concat(this.currentError), k, 246), A.r8) : (this.keyframeRequire = true, 1 & a2.f[15](e3 + 160) && (this.extradataRequire = true), 2 & a2.f[15](this.parameters + 160) && (this.sort = false), this.outputQueue.length && this.outputQueue.forEach((e4) => {
        e4.close();
      }), this.inputQueue.length = 0, this.outputQueue.length = 0, this.dtsQueue.length = 0, 0);
    }
    decode(e3) {
      if (this.currentError) return f.z3("decode error, ".concat(this.currentError), k, 274), A.LR;
      const t3 = (0, h.rU)(e3, 1);
      if (0 !== t3) {
        let e4 = this.changeExtraData((0, d2.s3)(a2.f[20](t3), a2.f[25](t3 + 4)));
        if (e4) return e4;
      }
      const i3 = 1 & a2.f[15](e3 + 36);
      if (this.keyframeRequire) {
        if (!i3) return 0;
        if (1 & a2.f[15](this.parameters + 160) && this.extradata && this.extradataRequire) {
          if (27 === a2.f[15](this.parameters + 4)) {
            if (!m.sL((0, h.iI)(e3))) {
              const t4 = m.kM((0, h.iI)(e3), this.extradata);
              t4 && (0, h.NX)(e3, t4.bufferPointer, t4.length);
            }
          } else if (173 === a2.f[15](this.parameters + 4)) {
            if (!g.sL((0, h.iI)(e3))) {
              const t4 = g.kM((0, h.iI)(e3), this.extradata);
              t4 && (0, h.NX)(e3, t4.bufferPointer, t4.length);
            }
          } else if (196 === a2.f[15](this.parameters + 4) && !v.sL((0, h.iI)(e3))) {
            const t4 = v.kM((0, h.iI)(e3), this.extradata);
            t4 && (0, h.NX)(e3, t4.bufferPointer, t4.length);
          }
          this.extradataRequire = false;
        }
      }
      const r3 = (0, u.A)(e3), s3 = r3.timestamp;
      if (this.sort) {
        let e4 = 0;
        for (; e4 < this.inputQueue.length; e4++) if (this.inputQueue[e4] > s3) {
          this.inputQueue.splice(e4, 0, s3);
          break;
        }
        e4 === this.inputQueue.length && this.inputQueue.push(s3);
      }
      try {
        this.decoder.decode(r3), 2 & a2.f[15](this.parameters + 160) && this.dtsQueue.push(Number((0, b.Mr)(a2.f[17](e3 + 16), e3 + 72, w.KR)));
      } catch (e4) {
        return f.z3("decode error, ".concat(e4), k, 349), A.LR;
      }
      return i3 && (this.keyframeRequire = false), 0;
    }
    async flush() {
      if (this.currentError) return f.z3("flush error, ".concat(this.currentError), k, 362), A.LR;
      try {
        await this.decoder.flush();
      } catch (e3) {
        return f.z3("flush error, ".concat(e3), k, 369), A.LR;
      }
      if (this.sort) for (; this.outputQueue.length; ) {
        const e3 = this.outputQueue.shift();
        this.options.onReceiveVideoFrame ? this.options.onReceiveVideoFrame(e3) : e3.close();
      }
      return this.keyframeRequire = true, 0;
    }
    close() {
      this.decoder && "closed" !== this.decoder.state && this.decoder.close(), this.decoder = void 0, this.currentError = null, this.outputQueue.length && this.outputQueue.forEach((e3) => {
        e3.close();
      }), this.inputQueue.length = 0, this.outputQueue.length = 0;
    }
    getQueueLength() {
      var e3, t3;
      return null !== (e3 = null === (t3 = this.decoder) || void 0 === t3 ? void 0 : t3.decodeQueueSize) && void 0 !== e3 ? e3 : 0;
    }
    setSkipFrameDiscard(e3) {
    }
    static async isSupported(e3, t3) {
      let i3;
      0 !== a2.f[20](e3 + 12) && (i3 = (0, d2.s3)(a2.f[20](e3 + 12), a2.f[15](e3 + 16)).slice());
      const r3 = { codec: (0, c.A)(e3), codedWidth: a2.f[15](e3 + 56), codedHeight: a2.f[15](e3 + 60), description: 1 & a2.f[15](e3 + 160) ? void 0 : i3, hardwareAcceleration: (0, l.C)(null == t3 || t3) };
      r3.description || delete r3.description;
      try {
        return (await VideoDecoder.isConfigSupported(r3)).supported;
      } catch (e4) {
        return false;
      }
    }
  }
}, 44315: (e2, t2, i2) => {
  i2.d(t2, { Xv: () => p, fG: () => m, oD: () => f });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(68960), o = i2(71517), c = i2(7417), d2 = i2(73783);
  const h = c.z1(4, 4), l = c.z1(4, 4);
  class u {
    constructor() {
      (0, r2.A)(this, "packetBuffer", void 0), this.packetBuffer = [];
    }
  }
  class f {
    constructor() {
      (0, r2.A)(this, "metadataHeaderPadding", -1), (0, r2.A)(this, "metadata", void 0), (0, r2.A)(this, "streams", void 0), (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "chapters", void 0), (0, r2.A)(this, "privateData", void 0), (0, r2.A)(this, "privateData2", void 0), (0, r2.A)(this, "iformat", void 0), (0, r2.A)(this, "oformat", void 0), (0, r2.A)(this, "ioReader", void 0), (0, r2.A)(this, "ioWriter", void 0), (0, r2.A)(this, "errorFlag", void 0), (0, r2.A)(this, "interval", void 0), (0, r2.A)(this, "streamIndex", void 0), (0, r2.A)(this, "getDecoderResource", null), this.streams = [], this.errorFlag = 0, this.streamIndex = 0, this.interval = new u(), this.options = {}, this.privateData = {}, this.metadata = {}, this.chapters = [];
    }
    get format() {
      return this.iformat ? this.iformat.type : this.oformat ? this.oformat.type : -1;
    }
    getStreamById(e3) {
      return this.streams.find((t3) => t3.id === e3);
    }
    getStreamByIndex(e3) {
      return this.streams.find((t3) => t3.index === e3);
    }
    getStreamByMediaType(e3) {
      return this.streams.find((t3) => {
        var i3;
        return (null === (i3 = t3.codecpar) || void 0 === i3 ? void 0 : i3.codecType) === e3;
      });
    }
    createStream() {
      const e3 = new n.A();
      return e3.index = this.streamIndex++, (0, d2.s2)(l), e3.id = a2.f[15](h), s2.M[15](h, e3.id + 1), (0, d2.Tl)(l), this.removeStreamByIndex(e3.index), this.streams.push(e3), e3;
    }
    addStream(e3) {
      this.removeStreamByIndex(e3.index), this.streams.push(e3);
    }
    removeStream(e3) {
      this.removeStreamByIndex(e3.index);
    }
    removeStreamById(e3) {
      const t3 = this.streams.findIndex((t4) => t4.id === e3);
      if (t3 > -1) {
        const e4 = this.streams.splice(t3, 1);
        e4[0] && e4[0].destroy();
      }
    }
    removeStreamByIndex(e3) {
      const t3 = this.streams.findIndex((t4) => t4.index === e3);
      if (t3 > -1) {
        const e4 = this.streams.splice(t3, 1);
        e4[0] && e4[0].destroy();
      }
    }
    async destroy() {
      this.oformat && this.oformat.destroy(this), this.iformat && await this.iformat.destroy(this), this.interval.packetBuffer.length && this.interval.packetBuffer.forEach((e3) => {
        (0, o.Qe)(e3);
      }), this.streams.forEach((e3) => {
        e3.destroy();
      }), this.streams = [], this.interval = null, this.ioReader = this.ioWriter = null, this.oformat = this.iformat = null;
    }
  }
  function p() {
    return new f();
  }
  function m() {
    return new f();
  }
}, 64436: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(134), a2 = i2(63939), s2 = (i2(77162), i2(37837)), n = i2(71766);
  class o {
    constructor() {
      (0, r2.A)(this, "inCodecpar", void 0), (0, r2.A)(this, "inTimeBase", void 0), (0, r2.A)(this, "outCodecpar", void 0);
    }
    init(e3, t3) {
      return this.inCodecpar = (0, s2.Gy)(168), (0, n.Yi)(this.inCodecpar, e3), this.inTimeBase = { den: a2.f[15](t3 + 4), num: a2.f[15](t3) }, 0;
    }
    destroy() {
      this.inCodecpar && ((0, n.dn)(this.inCodecpar), this.inCodecpar = 0);
    }
  }
}, 50848: (e2, t2, i2) => {
  i2.d(t2, { A: () => y });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(77162), o = i2(29170), c = i2(64436), d2 = i2(14686), h = i2(4624), l = i2(9705), u = i2(77231), f = i2(95832), p = i2(44328), m = i2(37837), g = i2(71517), v = i2(67672), A = i2(92647);
  class y extends c.A {
    constructor(...e3) {
      super(...e3), (0, r2.A)(this, "streamMuxConfig", void 0), (0, r2.A)(this, "caches", void 0), (0, r2.A)(this, "pendingItem", void 0);
    }
    init(e3, t3) {
      return super.init(e3, t3), this.caches = [], this.streamMuxConfig = { profile: u.N_, sampleRate: u.N_, channels: u.N_ }, 0;
    }
    sendAVPacket(e3) {
      let t3 = 0, i3 = a2.f[17](e3 + 16) !== u.Dh ? a2.f[17](e3 + 16) : a2.f[17](e3 + 8), r3 = (0, d2.s3)(a2.f[20](e3 + 24), a2.f[15](e3 + 28)).slice();
      for (this.pendingItem && (this.pendingItem.buffer = (0, A.A)(Uint8Array, [this.pendingItem.buffer, r3.subarray(0, this.pendingItem.miss)]), r3 = r3.subarray(this.pendingItem.miss), this.caches.push(this.pendingItem), this.pendingItem = null); t3 < r3.length; ) {
        const c2 = f.Bq(r3.subarray(t3));
        if (v.ai(c2)) {
          let e4 = t3 + 1;
          for (; e4 < r3.length - 1; e4++) if (4095 == (r3[e4] << 4 | r3[e4 + 1] >> 4)) {
            t3 = e4;
            break;
          }
          if (e4 < r3.length - 1) continue;
          return h.z3("AACADTSParser parse failed", "src/avformat/bsf/aac/ADTS2RawFilter.ts", 108), l.LR;
        }
        const g2 = { dts: i3, buffer: null, extradata: null, duration: u.N_, pos: a2.f[17](e3 + 56) };
        g2.buffer = r3.subarray(t3 + c2.headerLength, t3 + c2.headerLength + c2.framePayloadLength), this.streamMuxConfig.profile = c2.profile, this.streamMuxConfig.sampleRate = c2.sampleRate, this.streamMuxConfig.channels = c2.channels;
        const A2 = a2.f[15](this.inCodecpar + 48) !== this.streamMuxConfig.profile || a2.f[15](this.inCodecpar + 136) !== this.streamMuxConfig.sampleRate || a2.f[15](this.inCodecpar + 116) !== this.streamMuxConfig.channels, y2 = (0, p.k)(BigInt(Math.floor(1024 * (c2.numberOfRawDataBlocksInFrame + 1) / this.streamMuxConfig.sampleRate * u.SF)), u.KR, this.inTimeBase);
        if (g2.duration = Number(y2), A2) {
          s2.M[15](this.inCodecpar + 48, this.streamMuxConfig.profile), s2.M[15](this.inCodecpar + 136, this.streamMuxConfig.sampleRate), s2.M[15](this.inCodecpar + 116, this.streamMuxConfig.channels);
          const e4 = (0, f.Ij)((0, o.A)(this.inCodecpar, n.A));
          a2.f[20](this.inCodecpar + 12) && (0, m.Eb)(a2.f[20](this.inCodecpar + 12)), s2.M[20](this.inCodecpar + 12, (0, m.sY)(e4.length)), (0, d2.lW)(a2.f[20](this.inCodecpar + 12), e4.length, e4), s2.M[15](this.inCodecpar + 16, e4.length), g2.extradata = e4;
        }
        g2.buffer.length < c2.framePayloadLength ? this.pendingItem = { ...g2, miss: c2.framePayloadLength - g2.buffer.length } : this.caches.push(g2), t3 += c2.aacFrameLength, i3 += y2;
      }
      return 0;
    }
    receiveAVPacket(e3) {
      if (this.caches.length) {
        (0, g.Up)(e3);
        const t3 = this.caches.shift(), i3 = (0, m.sY)(t3.buffer.length);
        if ((0, d2.lW)(i3, t3.buffer.length, t3.buffer), (0, g.NX)(e3, i3, t3.buffer.length), s2.M[17](e3 + 16, t3.dts), s2.M[17](e3 + 8, t3.dts), s2.M[17](e3 + 56, t3.pos), s2.M[17](e3 + 48, BigInt(Math.floor(t3.duration))), s2.M[15](e3 + 36, 1 | a2.f[15](e3 + 36)), t3.extradata) {
          const i4 = (0, m.sY)(t3.extradata.length);
          (0, d2.lW)(i4, t3.extradata.length, t3.extradata), (0, g.Ow)(e3, 1, i4, t3.extradata.length);
        }
        return 0;
      }
      return l.LT;
    }
    reset() {
      return this.pendingItem = null, this.caches.length = 0, 0;
    }
  }
}, 36488: (e2, t2, i2) => {
  i2.d(t2, { A: () => y });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(77162), o = i2(29170), c = i2(64436), d2 = i2(14686), h = i2(4624), l = i2(9705), u = i2(77231), f = i2(95832), p = i2(44328), m = i2(37837), g = i2(71517), v = i2(37246), A = i2(67672);
  class y extends c.A {
    constructor(...e3) {
      super(...e3), (0, r2.A)(this, "bitReader", void 0), (0, r2.A)(this, "streamMuxConfig", void 0), (0, r2.A)(this, "caches", void 0), (0, r2.A)(this, "refSampleDuration", void 0);
    }
    init(e3, t3) {
      return super.init(e3, t3), this.caches = [], this.refSampleDuration = BigInt(0), this.bitReader = new v.A(), this.streamMuxConfig = { profile: u.N_, sampleRate: u.N_, channels: u.N_ }, 0;
    }
    sendAVPacket(e3) {
      const t3 = (0, d2.s3)(a2.f[20](e3 + 24), a2.f[15](e3 + 28));
      this.bitReader.appendBuffer(t3);
      let i3 = a2.f[17](e3 + 16) !== u.Dh ? a2.f[17](e3 + 16) : a2.f[17](e3 + 8);
      for (; this.bitReader.remainingLength() >= 20; ) {
        const t4 = this.bitReader.getPointer(), r3 = f.f7(null, this.bitReader);
        if (A.ai(r3)) {
          let e4 = false;
          for (; this.bitReader.remainingLength() >= 20; ) {
            if (695 === this.bitReader.peekU(11)) {
              e4 = true;
              break;
            }
            this.bitReader.readU1();
          }
          if (e4) continue;
          return h.z3("AACLATMParser parse failed", "src/avformat/bsf/aac/LATM2RawFilter.ts", 107), this.bitReader.reset(), l.LR;
        }
        if (r3.framePayloadLength >= this.bitReader.remainingLength()) {
          this.bitReader.skipPadding(), this.bitReader.setPointer(t4);
          break;
        }
        r3.useSameStreamMux || (this.streamMuxConfig.profile = r3.profile, this.streamMuxConfig.sampleRate = r3.sampleRate, this.streamMuxConfig.channels = r3.channels);
        const c2 = r3.framePayloadLength, g2 = new Uint8Array(c2);
        for (let e4 = 0; e4 < c2; e4++) g2[e4] = this.bitReader.readU(8);
        const v2 = { dts: i3, buffer: g2, extradata: null, pos: a2.f[17](e3 + 56) };
        if (a2.f[15](this.inCodecpar + 48) !== this.streamMuxConfig.profile || a2.f[15](this.inCodecpar + 136) !== this.streamMuxConfig.sampleRate || a2.f[15](this.inCodecpar + 116) !== this.streamMuxConfig.channels) {
          this.refSampleDuration = (0, p.k)(BigInt(Math.floor(1024 / this.streamMuxConfig.sampleRate * u.SF)), u.KR, this.inTimeBase), s2.M[15](this.inCodecpar + 48, this.streamMuxConfig.profile), s2.M[15](this.inCodecpar + 136, this.streamMuxConfig.sampleRate), s2.M[15](this.inCodecpar + 116, this.streamMuxConfig.channels);
          const e4 = (0, f.Ij)((0, o.A)(this.inCodecpar, n.A));
          a2.f[20](this.inCodecpar + 12) && (0, m.Eb)(a2.f[20](this.inCodecpar + 12)), s2.M[20](this.inCodecpar + 12, (0, m.sY)(e4.length)), (0, d2.lW)(a2.f[20](this.inCodecpar + 12), e4.length, e4), s2.M[15](this.inCodecpar + 16, e4.length), v2.extradata = e4;
        }
        this.caches.push(v2), i3 += this.refSampleDuration, this.bitReader.skipPadding();
      }
      return 0;
    }
    receiveAVPacket(e3) {
      if (this.caches.length) {
        (0, g.Up)(e3);
        const t3 = this.caches.shift(), i3 = (0, m.sY)(t3.buffer.length);
        if ((0, d2.lW)(i3, t3.buffer.length, t3.buffer), (0, g.NX)(e3, i3, t3.buffer.length), s2.M[17](e3 + 16, t3.dts), s2.M[17](e3 + 8, t3.dts), s2.M[17](e3 + 56, t3.pos), s2.M[15](e3 + 36, 1 | a2.f[15](e3 + 36)), s2.M[17](e3 + 48, this.refSampleDuration), t3.extradata) {
          const i4 = (0, m.sY)(t3.extradata.length);
          (0, d2.lW)(i4, t3.extradata.length, t3.extradata), (0, g.Ow)(e3, 1, i4, t3.extradata.length);
        }
        return 0;
      }
      return l.LT;
    }
    reset() {
      return this.bitReader.reset(), this.caches.length = 0, 0;
    }
  }
}, 51113: (e2, t2, i2) => {
  i2.d(t2, { A: () => v });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(64436), o = i2(14686), c = i2(4624), d2 = i2(9705), h = i2(77231), l = i2(44328), u = i2(37837), f = i2(71517), p = i2(87518), m = i2(92647), g = i2(67672);
  class v extends n.A {
    constructor(...e3) {
      super(...e3), (0, r2.A)(this, "caches", void 0), (0, r2.A)(this, "cache", void 0), (0, r2.A)(this, "lastDts", void 0);
    }
    init(e3, t3) {
      return super.init(e3, t3), this.caches = [], 0;
    }
    sendAVPacket(e3) {
      let t3 = 0, i3 = this.lastDts || (a2.f[17](e3 + 16) !== h.Dh ? a2.f[17](e3 + 16) : a2.f[17](e3 + 8)), r3 = (0, o.s3)(a2.f[20](e3 + 24), a2.f[15](e3 + 28)).slice(), s3 = false, n2 = !!this.cache;
      for (n2 && (r3 = (0, m.A)(Uint8Array, [this.cache, r3]), this.cache = null); t3 < r3.length; ) {
        if (t3 > r3.length - 10) return this.cache = r3.subarray(t3), this.lastDts = i3, 0;
        const o2 = p.R(r3.subarray(t3));
        if (g.ai(o2)) {
          let e4 = t3 + 1;
          for (; e4 < r3.length - 1; e4++) if (2935 == (r3[e4] << 8 | r3[e4 + 1])) {
            t3 = e4;
            break;
          }
          if (e4 < r3.length - 1) continue;
          return c.z3("parse ac3 header failed", "src/avformat/bsf/ac3/Ac32RawFilter.ts", 97), d2.LR;
        }
        const u2 = { dts: i3, buffer: null, duration: h.N_, pos: a2.f[17](e3 + 56) };
        let f2 = o2.frameSize;
        if (u2.buffer = r3.subarray(t3, t3 + f2), t3 + f2 > r3.length) return this.cache = r3.subarray(t3), this.lastDts = i3, 0;
        const m2 = (0, l.k)(BigInt(1536 / o2.sampleRate * h.SF), h.KR, this.inTimeBase);
        u2.duration = Number(m2), this.caches.push(u2), t3 += f2, i3 += m2, !s3 && n2 && (s3 = true, i3 = a2.f[17](e3 + 16) || a2.f[17](e3 + 8));
      }
      return this.lastDts = BigInt(0), 0;
    }
    receiveAVPacket(e3) {
      if (this.caches.length) {
        (0, f.Up)(e3);
        const t3 = this.caches.shift(), i3 = (0, u.sY)(t3.buffer.length);
        return (0, o.lW)(i3, t3.buffer.length, t3.buffer), (0, f.NX)(e3, i3, t3.buffer.length), s2.M[17](e3 + 16, t3.dts), s2.M[17](e3 + 8, t3.dts), s2.M[17](e3 + 56, t3.pos), s2.M[17](e3 + 48, BigInt(Math.floor(t3.duration))), s2.M[15](e3 + 36, 1 | a2.f[15](e3 + 36)), 0;
      }
      return d2.LT;
    }
    reset() {
      return this.cache = null, this.lastDts = BigInt(0), this.caches.length = 0, 0;
    }
  }
}, 7309: (e2, t2, i2) => {
  i2.d(t2, { A: () => v });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(64436), o = i2(14686), c = i2(4624), d2 = i2(9705), h = i2(77231), l = i2(44328), u = i2(37837), f = i2(71517), p = i2(43290), m = i2(92647), g = i2(67672);
  class v extends n.A {
    constructor(...e3) {
      super(...e3), (0, r2.A)(this, "caches", void 0), (0, r2.A)(this, "cache", void 0), (0, r2.A)(this, "lastDts", void 0);
    }
    init(e3, t3) {
      return super.init(e3, t3), this.caches = [], 0;
    }
    sendAVPacket(e3) {
      let t3 = 0, i3 = this.lastDts || (a2.f[17](e3 + 16) !== h.Dh ? a2.f[17](e3 + 16) : a2.f[17](e3 + 8)), r3 = (0, o.s3)(a2.f[20](e3 + 24), a2.f[15](e3 + 28)).slice(), s3 = false, n2 = !!this.cache;
      for (n2 && (r3 = (0, m.A)(Uint8Array, [this.cache, r3]), this.cache = null); t3 < r3.length; ) {
        if (t3 > r3.length - 6) return this.cache = r3.subarray(t3), this.lastDts = i3, 0;
        const o2 = p.R(r3.subarray(t3));
        if (g.ai(o2)) {
          let e4 = t3 + 1;
          for (; e4 < r3.length - 3; e4++) {
            const i4 = r3[e4] << 24 | r3[e4 + 1] << 16 | r3[e4 + 2] << 8 | r3[e4 + 3];
            if (2147385345 === i4 || 4269736320 === i4) {
              t3 = e4;
              break;
            }
          }
          if (e4 < r3.length - 3) continue;
          return c.z3("parse dts header failed", "src/avformat/bsf/dts/Dts2RawFilter.ts", 97), d2.LR;
        }
        const u2 = { dts: i3, buffer: null, duration: h.N_, pos: a2.f[17](e3 + 56) };
        let f2 = o2.frameSize;
        if (u2.buffer = r3.subarray(t3, t3 + f2), t3 + f2 > r3.length) return this.cache = r3.subarray(t3), this.lastDts = i3, 0;
        const m2 = (0, l.k)(BigInt(Math.floor(o2.sampleBlock * p.u / o2.sampleRate * h.SF)), h.KR, this.inTimeBase);
        u2.duration = Number(m2), this.caches.push(u2), t3 += f2, i3 += m2, !s3 && n2 && (s3 = true, i3 = a2.f[17](e3 + 16) || a2.f[17](e3 + 8));
      }
      return this.lastDts = BigInt(0), 0;
    }
    receiveAVPacket(e3) {
      if (this.caches.length) {
        (0, f.Up)(e3);
        const t3 = this.caches.shift(), i3 = (0, u.sY)(t3.buffer.length);
        return (0, o.lW)(i3, t3.buffer.length, t3.buffer), (0, f.NX)(e3, i3, t3.buffer.length), s2.M[17](e3 + 16, t3.dts), s2.M[17](e3 + 8, t3.dts), s2.M[17](e3 + 56, t3.pos), s2.M[17](e3 + 48, BigInt(Math.floor(t3.duration))), s2.M[15](e3 + 36, 1 | a2.f[15](e3 + 36)), 0;
      }
      return d2.LT;
    }
    reset() {
      return this.cache = null, this.lastDts = BigInt(0), this.caches.length = 0, 0;
    }
  }
}, 26173: (e2, t2, i2) => {
  i2.d(t2, { A: () => m });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(64436), o = i2(71517), c = i2(62815), d2 = i2(67659), h = i2(59166), l = i2(14686), u = i2(9705), f = i2(37837), p = i2(4624);
  class m extends n.A {
    constructor(e3 = false) {
      super(), (0, r2.A)(this, "cache", void 0), (0, r2.A)(this, "cached", void 0), (0, r2.A)(this, "reverseSps", void 0), this.reverseSps = e3;
    }
    init(e3, t3) {
      return super.init(e3, t3), this.cache = (0, o._5)(), this.cached = false, 0;
    }
    destroy() {
      super.destroy(), (0, o.Qe)(this.cache), this.cache = 0;
    }
    sendAVPacket(e3) {
      if (64 & a2.f[15](e3 + 36)) {
        let t3;
        (0, o.zu)(this.cache, e3);
        const i3 = (0, l.JW)(a2.f[20](e3 + 24), a2.f[15](e3 + 28));
        if (27 === a2.f[15](this.inCodecpar + 4) ? t3 = c.oT(i3, this.reverseSps) : 173 === a2.f[15](this.inCodecpar + 4) ? t3 = d2.oT(i3, this.reverseSps) : 196 === a2.f[15](this.inCodecpar + 4) ? t3 = h.oT(i3, this.reverseSps) : p.h2("not support for codecId: ".concat(a2.f[15](this.inCodecpar + 4)), "src/avformat/bsf/h2645/Annexb2AvccFilter.ts", 96), s2.M[15](this.cache + 36, -65 & a2.f[15](this.cache + 36)), (0, o.NX)(this.cache, t3.bufferPointer, t3.length), t3.key && s2.M[15](this.cache + 36, 1 | a2.f[15](this.cache + 36)), t3.extradata) {
          const e4 = (0, f.sY)(t3.extradata.length);
          (0, l.lW)(e4, t3.extradata.length, t3.extradata), (0, o.Ow)(this.cache, 1, e4, t3.extradata.length);
        }
      } else (0, o.rN)(this.cache, e3);
      return this.cached = true, 0;
    }
    receiveAVPacket(e3) {
      return this.cached ? ((0, o.Up)(e3), (0, o.rN)(e3, this.cache), this.cached = false, 0) : u.LR;
    }
    reset() {
      return 0;
    }
  }
}, 56397: (e2, t2, i2) => {
  i2.d(t2, { A: () => v });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(64436), o = i2(14686), c = i2(4624), d2 = i2(9705), h = i2(77231), l = i2(44328), u = i2(37837), f = i2(71517), p = i2(75294), m = i2(64093), g = i2(92647);
  class v extends n.A {
    constructor(...e3) {
      super(...e3), (0, r2.A)(this, "frameHeader", void 0), (0, r2.A)(this, "caches", void 0), (0, r2.A)(this, "cache", void 0), (0, r2.A)(this, "lastDts", void 0);
    }
    init(e3, t3) {
      return super.init(e3, t3), this.caches = [], this.frameHeader = new p.Vz(), 0;
    }
    sendAVPacket(e3) {
      let t3 = 0, i3 = this.lastDts || (a2.f[17](e3 + 16) !== h.Dh ? a2.f[17](e3 + 16) : a2.f[17](e3 + 8)), r3 = (0, o.s3)(a2.f[20](e3 + 24), a2.f[15](e3 + 28)).slice(), s3 = false, n2 = !!this.cache;
      for (n2 && (r3 = (0, g.A)(Uint8Array, [this.cache, r3]), this.cache = null); t3 < r3.length; ) {
        const o2 = r3[t3] << 4 | r3[t3 + 1] >> 4 & 14;
        if (4094 !== o2) {
          let e4 = t3 + 1;
          for (; e4 < r3.length - 1; e4++) if (4094 == (r3[e4] << 4 | r3[e4 + 1] >> 4 & 14)) {
            t3 = e4;
            break;
          }
          if (e4 < r3.length - 1) continue;
          return c.z3("found syncWord not 0xFFE, got: 0x".concat(o2.toString(16)), "src/avformat/bsf/mp3/Mp32RawFilter.ts", 94), d2.LR;
        }
        const u2 = r3[1] >>> 3 & 3, f2 = (12 & r3[2]) >>> 2, g2 = { dts: i3, buffer: null, extradata: null, duration: h.N_, pos: a2.f[17](e3 + 56) }, v2 = m.Y2(u2, f2);
        p.qg(this.frameHeader, r3[t3] << 24 | r3[t3 + 1] << 16 | r3[t3 + 2] << 8 | r3[t3 + 3]);
        let A = p.CM(this.frameHeader, v2);
        if (g2.buffer = r3.subarray(t3, t3 + A), t3 + A > r3.length) {
          this.cache = r3.subarray(t3), this.lastDts = i3;
          break;
        }
        const y = (0, l.k)(BigInt(Math.floor(A / v2 * h.SF)), h.KR, this.inTimeBase);
        g2.duration = Number(y), this.caches.push(g2), t3 += A, i3 += y, !s3 && n2 && (s3 = true, i3 = a2.f[17](e3 + 16) || a2.f[17](e3 + 8));
      }
      return this.lastDts = BigInt(0), 0;
    }
    receiveAVPacket(e3) {
      if (this.caches.length) {
        (0, f.Up)(e3);
        const t3 = this.caches.shift(), i3 = (0, u.sY)(t3.buffer.length);
        return (0, o.lW)(i3, t3.buffer.length, t3.buffer), (0, f.NX)(e3, i3, t3.buffer.length), s2.M[17](e3 + 16, t3.dts), s2.M[17](e3 + 8, t3.dts), s2.M[17](e3 + 56, t3.pos), s2.M[17](e3 + 48, BigInt(Math.floor(t3.duration))), s2.M[15](e3 + 36, 1 | a2.f[15](e3 + 36)), 0;
      }
      return d2.LT;
    }
    reset() {
      return this.cache = null, this.lastDts = BigInt(0), this.caches.length = 0, 0;
    }
  }
}, 61702: (e2, t2, i2) => {
  i2.d(t2, { A: () => g });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(64436), o = i2(77231), c = i2(44328), d2 = i2(22576), h = i2(4624), l = i2(9705), u = i2(71517), f = i2(37837), p = i2(14686), m = i2(92647);
  class g extends n.A {
    constructor(...e3) {
      super(...e3), (0, r2.A)(this, "caches", void 0), (0, r2.A)(this, "pendingItem", void 0);
    }
    init(e3, t3) {
      return super.init(e3, t3), this.caches = [], 0;
    }
    sendAVPacket(e3) {
      let t3 = 0, i3 = a2.f[17](e3 + 16) !== o.Dh ? a2.f[17](e3 + 16) : a2.f[17](e3 + 8), r3 = (0, u.iI)(e3);
      for (this.pendingItem && (this.pendingItem.buffer = (0, m.A)(Uint8Array, [this.pendingItem.buffer, r3.subarray(0, this.pendingItem.miss)]), r3 = r3.subarray(this.pendingItem.miss), this.caches.push(this.pendingItem), this.pendingItem = null); t3 < r3.length; ) {
        const s3 = r3[t3] << 3 | r3[t3 + 1] >> 5;
        if (1023 !== s3) {
          let e4 = t3 + 1;
          for (; e4 < r3.length - 1; e4++) if (1023 == (r3[e4] << 3 | r3[e4 + 1] >> 5)) {
            t3 = e4;
            break;
          }
          if (e4 < r3.length - 1) continue;
          return h.z3("MpegtsOpusParser found syncWord not 0x3ff, got: 0x".concat(s3.toString(16)), "src/avformat/bsf/opus/Mpegts2RawFilter.ts", 94), l.LR;
        }
        const n2 = !!(16 & r3[t3 + 1]), u2 = !!(8 & r3[t3 + 1]);
        let f2 = t3 + 2, p2 = 0;
        for (; 255 === r3[f2]; ) p2 += 255, f2++;
        p2 += r3[f2], f2++, f2 += n2 ? 2 : 0, f2 += u2 ? 2 : 0;
        let m2 = r3.subarray(f2, f2 + p2);
        const g2 = a2.f[15](this.inCodecpar + 136) > 0 ? a2.f[15](this.inCodecpar + 136) : 48e3, v = (0, c.k)(BigInt(Math.floor(d2.kt(m2) / g2 * o.SF)), o.KR, this.inTimeBase), A = { dts: i3, buffer: m2.slice(), duration: Number(v), pos: a2.f[17](e3 + 56) };
        A.buffer.length < p2 ? this.pendingItem = { ...A, miss: p2 - A.buffer.length } : this.caches.push(A), i3 += v, t3 = f2 + p2;
      }
    }
    receiveAVPacket(e3) {
      if (this.caches.length) {
        (0, u.Up)(e3);
        const t3 = this.caches.shift(), i3 = (0, f.sY)(t3.buffer.length);
        return (0, p.lW)(i3, t3.buffer.length, t3.buffer), (0, u.NX)(e3, i3, t3.buffer.length), s2.M[17](e3 + 16, t3.dts), s2.M[17](e3 + 8, t3.dts), s2.M[17](e3 + 56, t3.pos), s2.M[15](e3 + 36, 1 | a2.f[15](e3 + 36)), s2.M[17](e3 + 48, BigInt(Math.floor(t3.duration))), 0;
      }
      return l.LR;
    }
    reset() {
      return this.pendingItem = null, this.caches.length = 0, 0;
    }
  }
}, 16160: (e2, t2, i2) => {
  i2.d(t2, { V: () => a2, v: () => r2 });
  const r2 = 256e3, a2 = BigInt(5e3);
}, 75: (e2, t2, i2) => {
  i2.d(t2, { Cj: () => C, Ib: () => B, ho: () => M, jF: () => U });
  var r2 = i2(61499), a2 = i2(63939), s2 = i2(50932), n = i2(36981), o = i2(29170), c = i2(9599), d2 = i2(95335), h = i2(72739), l = i2(77231), u = i2(31425), f = i2(44328), p = i2(71517), m = i2(16160), g = i2(9705), v = i2(4624), A = i2(40417), y = i2(75742), w = i2(56024), b = i2(14686), k = i2(31633), x = i2(55680), I = i2(89478);
  const P = "src/avformat/demux.ts", S = 16, T = { fastOpen: false, maxAnalyzeDuration: 15e3 };
  async function M(e3, t3 = {}) {
    const i3 = d2.X$({}, T, t3);
    return e3.ioReader || v.h2("need IOReader", P, 86), e3.iformat || v.h2("need iformat", P, 89), 2 === e3.iformat.type && (i3.maxAnalyzeDuration = Math.max(i3.maxAnalyzeDuration, 2e3)), e3.iformat.init(e3), e3.options = i3, e3.iformat.readHeader(e3);
  }
  async function B(e3) {
    const t3 = {}, i3 = {}, g2 = {}, v2 = {}, b2 = {}, P2 = {}, T2 = {}, M2 = e3.iformat.getAnalyzeStreamsCount();
    let B2 = 0;
    const R2 = [];
    let _2 = 0;
    function U2() {
      if (!e3.getDecoderResource) return true;
      for (let t4 = 0; t4 < e3.streams.length; t4++) if (P2[e3.streams[t4].index] && !T2[e3.streams[t4].index]) return false;
      return true;
    }
    function D(e4, t4) {
      let r3 = i3[e4.index];
      const n2 = g2[e4.index];
      let o2 = e4.codecpar.videoDelay;
      if (null != n2 && n2.length && (o2 = Math.min(Math.max((0, x.A)(n2), e4.codecpar.videoDelay), 16), t4 && (e4.codecpar.videoDelay = o2)), !r3 && null != n2 && n2.length) {
        r3 = o2 ? (0, I.A)(o2, n2) : n2.slice();
        const t5 = { delay: o2, dtsQueue: r3 };
        r3 = [], b2[e4.index] = t5;
        for (let i4 = 0; i4 < R2.length; i4++) if (e4.index === a2.f[15](R2[i4] + 32)) {
          const n3 = t5.dtsQueue.shift();
          s2.M[17](R2[i4] + 16, n3), r3.push(n3);
          const o3 = e4.sampleIndexes.find((e5) => e5.pts === a2.f[17](R2[i4] + 8));
          o3 && (o3.dts = a2.f[17](R2[i4] + 16));
        }
      }
      if (r3 && r3.length > 1) {
        let t5 = BigInt(0);
        for (let e5 = 1; e5 < r3.length; e5++) t5 += r3[e5] - r3[e5 - 1];
        if (1 === e4.codecpar.codecType && e4.codecpar.sampleRate > 0 && !e4.codecpar.frameSize) {
          let i5 = Number(t5) / (r3.length - 1);
          e4.codecpar.frameSize = Math.round(i5 / e4.timeBase.den * e4.timeBase.num * e4.codecpar.sampleRate);
        } else if (0 === e4.codecpar.codecType) {
          const i5 = (0, f.j2)(e4.timeBase.den * (r3.length - 1) / (Number(t5) * e4.timeBase.num), l.go);
          e4.codecpar.framerate.num = i5.num, e4.codecpar.framerate.den = i5.den, (0, k.A)(e4.codecpar.framerate);
        }
        const i4 = Number(r3[r3.length - 1] - e4.startTime) * e4.timeBase.num / e4.timeBase.den;
        i4 && (e4.codecpar.bitrate = BigInt(Math.floor(8 * v2[e4.index] / i4)));
      }
    }
    function E() {
      e3.streams.forEach((e4) => {
        D(e4, true), 1 === e4.codecpar.codecType && (1 === e4.codecpar.chLayout.nbChannels ? (e4.codecpar.chLayout.u.mask = BigInt(4), e4.codecpar.chLayout.order = 1) : 2 === e4.codecpar.chLayout.nbChannels && (e4.codecpar.chLayout.u.mask = BigInt(3), e4.codecpar.chLayout.order = 1));
      });
    }
    for (; ; ) {
      if (e3.streams.length >= M2 && e3.options.fastOpen && (0, u.$)(e3)) {
        E();
        break;
      }
      B2 || (B2 = (0, p._5)());
      let s3 = false;
      if (_2 = await C(e3, B2), 0 !== _2) {
        E();
        break;
      }
      const d3 = e3.getStreamByIndex(a2.f[15](B2 + 32));
      let h2 = a2.f[17](B2 + 8);
      if (h2 === l.Dh && (h2 = a2.f[17](B2 + 16)), a2.f[15](B2 + 28) && (s3 = true, R2.push(B2), t3[d3.index] ? h2 < d3.startTime && (d3.startTime = h2) : (d3.firstDTS = a2.f[17](B2 + 16), d3.startTime = h2, t3[d3.index] = true), a2.f[17](B2 + 16) !== l.Dh && (i3[d3.index] ? i3[d3.index].push(a2.f[17](B2 + 16)) : i3[d3.index] = [a2.f[17](B2 + 16)]), g2[d3.index] ? g2[d3.index].push(h2) : g2[d3.index] = [h2], v2[d3.index] ? v2[d3.index] += a2.f[15](B2 + 28) : v2[d3.index] = a2.f[15](B2 + 28), !T2[d3.index] && e3.getDecoderResource && !e3.options.fastOpen && !d3.metadata.encryption)) {
        let t4 = P2[d3.index];
        if (!t4) {
          const i4 = await e3.getDecoderResource(d3.codecpar.codecType, d3.codecpar.codecId);
          i4 && (1 === d3.codecpar.codecType ? t4 = new y.A({ resource: i4, onReceiveAVFrame: (e4) => {
            d3.codecpar.format = a2.f[15](e4 + 80), d3.codecpar.frameSize = a2.f[15](e4 + 76), d3.codecpar.sampleRate = a2.f[15](e4 + 152), d3.codecpar.chLayout = (0, o.A)(e4 + 288, n.r), (0, w.xj)(e4), T2[d3.index] = true;
          } }) : 0 === d3.codecpar.codecType && (i4.threadModule && delete i4.threadModule, t4 = new A.A({ resource: i4, onReceiveAVFrame: (e4) => {
            d3.codecpar.format = a2.f[15](e4 + 80), d3.codecpar.colorRange = a2.f[15](e4 + 208), d3.codecpar.colorSpace = a2.f[15](e4 + 220), d3.codecpar.colorPrimaries = a2.f[15](e4 + 212), d3.codecpar.colorTrc = a2.f[15](e4 + 216), d3.codecpar.chromaLocation = a2.f[15](e4 + 224), a2.f[15](e4 + 92) && a2.f[15](e4 + 96) && (d3.codecpar.sampleAspectRatio = (0, o.A)(e4 + 92, c.P)), d3.codecpar.width = a2.f[15](e4 + 68), d3.codecpar.height = a2.f[15](e4 + 72), (0, w.xj)(e4), T2[d3.index] = true;
          } })), await t4.open(d3.codecpar[r2.o9]) ? (t4.close(), T2[d3.index] = true) : P2[d3.index] = t4);
        }
        t4 && t4.decode(B2) && (T2[d3.index] = true);
      }
      if (g2[d3.index] && g2[d3.index].length === S && D(d3, false), d3.startTime !== l.Dh && h2 - d3.startTime > (0, f.k)(BigInt(Math.floor(e3.options.maxAnalyzeDuration)), l.i0, d3.timeBase) && (e3.streams.length >= M2 && (0, u.$)(e3) || h2 - d3.startTime > (0, f.k)(BigInt(15e3), l.i0, d3.timeBase) && (!g2[d3.index] || g2[d3.index].length > 450)) && U2()) {
        E(), s3 && (B2 = 0);
        break;
      }
      s3 && (B2 = 0);
    }
    return B2 && (0, p.Qe)(B2), R2.length && (e3.interval.packetBuffer = R2.concat(e3.interval.packetBuffer)), d2.__(P2, (e4) => {
      e4 && e4.close();
    }), d2.__(b2, (t4, i4) => {
      const r3 = e3.getStreamByIndex(+i4);
      r3.privateData2 ? d2.X$(r3.privateData2, t4) : r3.privateData2 = t4;
    }), -1048576 === _2 || -1048572 === _2 ? 0 : 0 !== _2 ? _2 : (2 === e3.iformat.type && 1 & e3.ioReader.flags && !(2 & e3.ioReader.flags) && await (async function(e4) {
      const t4 = await e4.ioReader.fileSize();
      if (t4 <= BigInt(0)) return;
      const i4 = e4.interval.packetBuffer;
      e4.interval.packetBuffer = [];
      let r3 = e4.ioReader.getPos(), s3 = 0;
      for (; s3 < 4; ) {
        const i5 = t4 - BigInt(Math.floor(m.v << s3)), n2 = await e4.iformat.seek(e4, null, i5, 2);
        if (n2 < 0) break;
        !s3 && n2 > 0 && (r3 = n2);
        const o2 = {}, c2 = (0, p._5)();
        for (; !(await C(e4, c2) < 0); ) {
          let t5 = a2.f[17](c2 + 8);
          t5 === l.Dh && (t5 = a2.f[17](c2 + 16));
          const i6 = e4.getStreamByIndex(a2.f[15](c2 + 32));
          i6.startTime !== l.Dh ? t5 -= i6.startTime : t5 -= i6.firstDTS, t5 > BigInt(0) && ((i6.duration === l.Dh || !o2[a2.f[15](c2 + 32)] || i6.duration < t5 && Math.abs(Number(t5 - i6.duration)) < 60 * i6.timeBase.den / i6.timeBase.num) && (i6.duration = t5), o2[c2.streamIndex] = t5);
        }
        (0, p.Qe)(c2);
        let d3 = true;
        if (h.__(e4.streams, (e5) => {
          if (e5.duration === l.Dh) return d3 = false, false;
        }), d3) break;
        s3++;
      }
      h.__(e4.interval.packetBuffer, (e5) => {
        (0, p.Qe)(e5);
      }), e4.interval.packetBuffer = i4.filter((e5) => !(a2.f[17](e5 + 56) >= r3 && ((0, p.Qe)(e5), 1))), await e4.iformat.seek(e4, null, r3, 2);
    })(e3), 0);
  }
  function R(e3, t3) {
    let i3 = a2.f[17](t3 + 8);
    i3 === l.Dh && (i3 = a2.f[17](t3 + 16));
    const r3 = h.El(e3.sampleIndexes, (e4) => e4.pts < i3 ? 1 : -1), s3 = { dts: a2.f[17](t3 + 16), pts: i3, pos: a2.f[17](t3 + 56), size: a2.f[15](t3 + 28), duration: a2.f[17](t3 + 48), flags: a2.f[15](t3 + 36) };
    r3 > -1 ? (e3.sampleIndexesPosMap.set(a2.f[17](t3 + 56), r3), e3.sampleIndexes.splice(r3, 0, s3)) : (e3.sampleIndexesPosMap.set(a2.f[17](t3 + 56), e3.sampleIndexes.length), e3.sampleIndexes.push(s3));
  }
  async function _(e3, t3) {
    const i3 = e3.getStreamByIndex(a2.f[15](t3 + 32));
    if (a2.f[17](t3 + 16) === l.Dh) {
      const e4 = i3.privateData2;
      e4 && (e4.delay ? (h._(e4.dtsQueue, a2.f[17](t3 + 8), (e5) => e5 < a2.f[17](t3 + 8) ? 1 : -1), e4.dtsQueue.length > e4.delay && s2.M[17](t3 + 16, e4.dtsQueue.shift())) : s2.M[17](t3 + 16, a2.f[17](t3 + 8)));
    }
    let r3 = 0;
    if (i3 && (27 === i3.codecpar.codecId || 173 === i3.codecpar.codecId || 196 === i3.codecpar.codecId || 86018 === i3.codecpar.codecId)) {
      if (!a2.f[15](t3 + 28) && (0, p.fQ)(t3, 1)) for (; ; ) {
        const i4 = (0, p._5)();
        if (r3 = await e3.iformat.readAVPacket(e3, i4), 0 !== r3) {
          if (e3.interval.packetBuffer.length) {
            let i5 = e3.interval.packetBuffer.shift();
            return (0, p.Up)(t3), (0, p.rN)(t3, i5), (0, p.Qe)(i5), _(e3, t3);
          }
          return r3;
        }
        if (a2.f[15](i4 + 32) !== a2.f[15](t3 + 32)) {
          let t4 = e3.interval.packetBuffer.length - 1, r4 = true;
          for (; t4 >= 0; t4--) if (a2.f[15](e3.interval.packetBuffer[t4] + 32) === a2.f[15](i4 + 32)) {
            a2.f[15](e3.interval.packetBuffer[t4] + 28) || a2.f[15](i4 + 28) ? !a2.f[15](e3.interval.packetBuffer[t4] + 28) && a2.f[15](i4 + 28) && ((0, p.Zx)(e3.interval.packetBuffer[t4], i4), (0, p.Qe)(i4), r4 = false) : ((0, p.Qe)(e3.interval.packetBuffer[t4]), e3.interval.packetBuffer.splice(t4, 1, i4), r4 = false);
            break;
          }
          r4 && e3.interval.packetBuffer.push(i4);
        } else {
          if (a2.f[15](i4 + 28)) return (0, p.Zx)(t3, i4), s2.M[17](t3 + 16, a2.f[17](i4 + 16)), s2.M[17](t3 + 8, a2.f[17](i4 + 8)), (0, p.Qe)(i4), 0;
          (0, p.Up)(t3), (0, p.rN)(t3, i4), (0, p.Qe)(i4);
        }
      }
      else if (32 & a2.f[15](t3 + 36)) return C(e3, t3);
    }
    if (1 & e3.ioReader.flags && !i3.sampleIndexesPosMap.has(a2.f[17](t3 + 56))) {
      if (0 === i3.codecpar.codecType) 1 & a2.f[15](t3 + 36) && R(i3, t3);
      else if (1 === i3.codecpar.codecType) {
        const e4 = h.El(i3.sampleIndexes, (e5) => e5.pts < a2.f[17](t3 + 8) ? 1 : -1);
        (!i3.sampleIndexes.length || e4 < 0 && (0, f.Mr)(a2.f[17](t3 + 8) - i3.sampleIndexes[i3.sampleIndexes.length - 1].pts, t3 + 72, l.i0) >= m.V || e4 > 0 && e4 < i3.sampleIndexes.length - 1 && (0, f.Mr)(a2.f[17](t3 + 8) - i3.sampleIndexes[e4 - 1].pts, t3 + 72, l.i0) >= m.V || 0 === e4 && (0, f.Mr)(i3.sampleIndexes[0].pts - a2.f[17](t3 + 8), t3 + 72, l.i0) >= m.V) && R(i3, t3);
      }
    }
    return 0;
  }
  async function C(e3, t3) {
    let i3 = 0;
    if ((0, p.Up)(t3), e3.interval.packetBuffer.length) {
      const i4 = e3.interval.packetBuffer.shift();
      return (0, p.rN)(t3, i4), (0, p.Qe)(i4), _(e3, t3);
    }
    return i3 = await e3.iformat.readAVPacket(e3, t3), 0 !== i3 ? ((0, p.Up)(t3), i3) : _(e3, t3);
  }
  async function U(e3, t3, i3, r3) {
    let n2 = t3 > -1 ? e3.streams.find((e4) => e4.index === t3) : null;
    if (n2 || (n2 = e3.getStreamByMediaType(0), n2 || (n2 = e3.getStreamByMediaType(1)), n2 || (n2 = e3.getStreamByMediaType(3))), !n2) return v.z3("not found any stream to seek, streamIndex: ".concat(n2.index), P, 734), BigInt(g.LR);
    v.Yz("seek in ".concat(0 === n2.codecpar.codecType ? "video" : "audio", " stream, streamIndex: ").concat(n2.index, ", timestamp: ").concat(i3, ", flags: ").concat(r3), P, 738), i3 = (0, f.k)(i3, l.i0, n2.timeBase);
    const o2 = await e3.iformat.seek(e3, n2, i3, r3);
    if (o2 >= BigInt(0)) {
      h.__(e3.interval.packetBuffer, (t5) => {
        if (2 & e3.ioReader.flags) {
          const i5 = (0, p.rU)(t5, 1), r4 = e3.streams[a2.f[15](t5 + 32)];
          !r4.sideData[1] && i5 && (r4.sideData[1] = (0, b.s3)(a2.f[20](i5), a2.f[25](i5 + 4)).slice());
        }
        (0, p.Qe)(t5);
      }), e3.interval.packetBuffer.length = 0;
      const t4 = {};
      e3.streams.forEach((e4) => {
        const i5 = e4.privateData2;
        null != i5 && i5.dtsQueue && (i5.dtsQueue.length = 0, i5.delay && (t4[e4.index] = i5.delay, i5.delay = S));
      });
      const i4 = [];
      for (; e3.streams.some((e4) => {
        const t5 = e4.privateData2;
        return t5 && t5.dtsQueue && t5.dtsQueue.length < t5.delay;
      }); ) {
        const t5 = (0, p._5)();
        if (await C(e3, t5)) {
          (0, p.Qe)(t5);
          break;
        }
        i4.push(t5);
      }
      return e3.streams.forEach((e4) => {
        const r4 = e4.privateData2;
        if (null != r4 && r4.delay) {
          r4.delay = t4[e4.index], r4.dtsQueue = (0, I.A)(r4.delay, r4.dtsQueue);
          for (let t5 = 0; t5 < i4.length; t5++) if (e4.index === a2.f[15](i4[t5] + 32)) {
            s2.M[17](i4[t5] + 16, r4.dtsQueue.shift());
            const n3 = e4.sampleIndexes.find((e5) => e5.pts === a2.f[17](i4[t5] + 8));
            n3 && (n3.dts = a2.f[17](i4[t5] + 16));
          }
        }
      }), e3.interval.packetBuffer = i4.concat(e3.interval.packetBuffer), BigInt(0);
    }
    return o2;
  }
}, 548: (e2, t2, i2) => {
  i2.d(t2, { Ay: () => _, L_: () => B, eG: () => M, yl: () => T });
  var r2 = i2(69736), a2 = i2.n(r2), s2 = i2(61499), n = i2(63939), o = i2(36981), c = i2(29170), d2 = i2(9599), h = i2(44315), l = i2(95335), u = i2(62751), f = i2(67672), p = i2(44328), m = i2(77231), g = i2(20525), v = i2(62100), A = i2(95832), y = i2(62815), w = i2(67659), b = i2(21477), k = i2(82014), x = i2(64093), I = i2(24310);
  function P(e3) {
    e3 < 0 && (e3 = BigInt(0));
    const t3 = Number(BigInt.asIntN(32, e3 % BigInt(1e3))), i3 = Number(BigInt.asIntN(32, e3 / BigInt(1e3) % BigInt(60))), r3 = Number(BigInt.asIntN(32, e3 / BigInt(1e3) / BigInt(60) % BigInt(60))), a3 = Number(BigInt.asIntN(32, e3 / BigInt(1e3) / BigInt(3600)));
    return g.GP("%02d:%02d:%02d.%03d", a3, r3, i3, t3);
  }
  function S(e3) {
    return e3 < BigInt(1e4) ? (0, v.A)(Number(BigInt.asIntN(32, e3))) + " bps/s" : Number(BigInt.asIntN(32, e3 / BigInt(1e3))) + " kbps/s";
  }
  function T(e3, t3, i3 = "unknown") {
    let r3 = i3;
    return l.__(e3, (e4, i4) => {
      if (t3 === e4) return r3 = i4, false;
    }), r3;
  }
  function M(e3, t3) {
    return 1 === e3 ? T(u.n1, t3) : 0 === e3 ? T(u._R, t3) : 3 === e3 ? T(u.Xp, t3) : "unknown";
  }
  function B(e3) {
    return T(u.iW, e3);
  }
  function R(e3, t3) {
    switch (e3) {
      case 86018:
        return A.uF[t3] || "LC";
      case 86017:
        return x.He[t3] || "Layer3";
      case 27:
        return y.tZ[t3] || "High";
      case 173:
        return w.dT[t3] || "Main";
      case 225:
        return b.zk[t3] || "Main";
      case 167:
        return k.wN[t3] || "Profile0";
    }
  }
  function _(e3, t3) {
    let i3 = "";
    return e3.forEach((e4, r3) => {
      if (e4 instanceof h.oD) {
        const t4 = [];
        for (let i4 = 0; i4 < e4.streams.length; i4++) {
          const r4 = e4.streams[i4];
          t4.push({ index: r4.index, id: r4.id, codecpar: r4.codecpar[s2.o9], nbFrames: r4.nbFrames, metadata: r4.metadata, duration: r4.duration, startTime: r4.startTime, disposition: r4.disposition, timeBase: r4.timeBase });
        }
        e4 = { metadata: e4.metadata, format: e4.format, chapters: e4.chapters, streams: t4 };
      }
      i3 += (function(e5, t4, i4) {
        let r4 = "".concat(i4.tag, " #").concat(t4, ", ").concat(i4.isLive ? "live" : "vod", ", ").concat(T(u.iW, e5.format), ", from '").concat(i4.from, "':\n");
        a2()(e5.metadata).length && (r4 += "  Metadata:\n", l.__(e5.metadata, (e6, t5) => {
          f.Ik(e6) && f.YO(e6) || (r4 += "    ".concat(t5, ": ").concat(e6, "\n"));
        }));
        let s3 = BigInt(0), h2 = BigInt(0), g2 = -BigInt(1);
        return e5.streams.forEach((e6) => {
          const t5 = (0, p.k)(e6.duration, e6.timeBase, m.i0), i5 = (0, p.k)(e6.startTime, e6.timeBase, m.i0);
          t5 > s3 && (s3 = t5), (i5 < g2 || g2 === -BigInt(1)) && (g2 = i5), h2 += n.f[17](e6.codecpar + 32);
        }), r4 += "  Duration: ".concat(P(s3), ", start: ").concat(P(g2), ", bitrate: ").concat(S(h2), "\n"), e5.streams.forEach((e6, i5) => {
          r4 += (function(e7, t5, i6) {
            const r5 = T(u.Mb, n.f[15](e7.codecpar)), s4 = [];
            if (1 === n.f[15](e7.codecpar)) {
              const t6 = R(n.f[15](e7.codecpar + 4), n.f[15](e7.codecpar + 48)), i7 = T(u.n1, n.f[15](e7.codecpar + 4));
              s4.push("".concat(i7).concat(t6 ? " (".concat(t6, ")") : "")), s4.push("".concat(n.f[15](e7.codecpar + 136), " Hz"));
              let r6 = "".concat(n.f[15](e7.codecpar + 116), " channels");
              if (1 === n.f[15](e7.codecpar + 112)) {
                const t7 = T(u.IY, Number((0, c.A)(e7.codecpar + 120, o.r, "u").mask), "");
                t7 && (r6 = t7);
              }
              s4.push(r6), s4.push(T(u.Sz, n.f[15](e7.codecpar + 28))), n.f[17](e7.codecpar + 32) > BigInt(0) && s4.push("".concat(S(n.f[17](e7.codecpar + 32))));
            } else if (0 === n.f[15](e7.codecpar)) {
              const t6 = R(n.f[15](e7.codecpar + 4), n.f[15](e7.codecpar + 48)), i7 = T(u._R, n.f[15](e7.codecpar + 4));
              if (s4.push("".concat(i7).concat(t6 ? " (".concat(t6, ")") : "")), n.f[15](e7.codecpar + 28) !== m.N_) {
                const t7 = T(u.qO, n.f[15](e7.codecpar + 28), "unknown(".concat(n.f[15](e7.codecpar + 28), ")")), i8 = T(u.mX, n.f[15](e7.codecpar + 84), "tv"), r7 = T(u._m, n.f[15](e7.codecpar + 96), "bt709"), a3 = T(u.Eh, n.f[15](e7.codecpar + 88), "bt709"), o2 = T(u.d8, n.f[15](e7.codecpar + 92), "bt709"), c2 = (0, I.A)(e7.codecpar);
                r7 === a3 && a3 === o2 ? s4.push("".concat(t7, "(").concat(i8, ", ").concat(r7, ", ").concat(c2 ? "HDR" : "SDR", ")")) : s4.push("".concat(t7, "(").concat(i8, ", ").concat(r7, "/").concat(a3, "/").concat(o2, ", ").concat(c2 ? "HDR" : "SDR", ")"));
              }
              const r6 = { num: n.f[15](e7.codecpar + 56) * n.f[15](e7.codecpar + 64), den: n.f[15](e7.codecpar + 60) * n.f[15](e7.codecpar + 68) };
              (0, p.iU)(r6), s4.push("".concat(n.f[15](e7.codecpar + 56), "x").concat(n.f[15](e7.codecpar + 60), " [SAR: ").concat(n.f[15](e7.codecpar + 64), ":").concat(n.f[15](e7.codecpar + 68), " DAR ").concat(r6.num, ":").concat(r6.den, "]")), n.f[17](e7.codecpar + 32) > BigInt(0) && s4.push("".concat(S(n.f[17](e7.codecpar + 32)))), (0, p.lb)((0, c.A)(e7.codecpar + 72, d2.P)) > 0 && (s4.push("".concat((0, p.lb)((0, c.A)(e7.codecpar + 72, d2.P)).toFixed(2), " fps")), s4.push("".concat((0, p.lb)((0, c.A)(e7.codecpar + 72, d2.P)).toFixed(2), " tbr"))), s4.push("".concat((h3 = BigInt(Math.floor((0, p.lb)({ num: e7.timeBase.den, den: e7.timeBase.num }))), h3 < BigInt(1e4) ? (0, v.A)(Number(BigInt.asIntN(32, h3))) : Number(BigInt.asIntN(32, h3 / BigInt(1e3))) + "k"), " tbn"));
            } else if (3 === n.f[15](e7.codecpar)) {
              const t6 = T(u.Xp, n.f[15](e7.codecpar + 4));
              s4.push(t6), n.f[17](e7.codecpar + 32) > BigInt(0) && s4.push("".concat(S(n.f[17](e7.codecpar + 32))));
            } else n.f[17](e7.codecpar + 32) > BigInt(0) && s4.push("".concat(S(n.f[17](e7.codecpar + 32))));
            var h3;
            let g3 = "";
            e7.disposition && (g3 = " ", 1 & e7.disposition && (g3 += "(".concat(T(u.Ki, 1), ") ")), 2 & e7.disposition && (g3 += "(".concat(T(u.Ki, 2), ") ")), 4 & e7.disposition && (g3 += "(".concat(T(u.Ki, 4), ") ")), 8 & e7.disposition && (g3 += "(".concat(T(u.Ki, 8), ") ")), 16 & e7.disposition && (g3 += "(".concat(T(u.Ki, 16), ") ")), 32 & e7.disposition && (g3 += "(".concat(T(u.Ki, 32), ") ")), 64 & e7.disposition && (g3 += "(".concat(T(u.Ki, 64), ") ")), 128 & e7.disposition && (g3 += "(".concat(T(u.Ki, 128), ") ")), 256 & e7.disposition && (g3 += "(".concat(T(u.Ki, 256), ") ")), 512 & e7.disposition && (g3 += "(".concat(T(u.Ki, 512), ") ")), 1024 & e7.disposition && (g3 += "(".concat(T(u.Ki, 1024), ") ")), 2048 & e7.disposition && (g3 += "(".concat(T(u.Ki, 2048), ") ")), 65536 & e7.disposition && (g3 += "(".concat(T(u.Ki, 65536), ") ")), 131072 & e7.disposition && (g3 += "(".concat(T(u.Ki, 131072), ") ")), 262144 & e7.disposition && (g3 += "(".concat(T(u.Ki, 262144), ") ")), 524288 & e7.disposition && (g3 += "(".concat(T(u.Ki, 524288), ") ")), 1048576 & e7.disposition && (g3 += "(".concat(T(u.Ki, 1048576), ") ")));
            let A2 = "".concat(i6, "Stream #").concat(t5, ":").concat(e7.index, " ").concat(r5, ": ").concat(s4.join(", ")).concat(g3, "\n");
            return a2()(e7.metadata).length && (A2 += "".concat(i6, "  Metadata:\n"), l.__(e7.metadata, (t6, r6) => {
              f.Ik(t6) || f.YO(t6) ? "matrix" === r6 && 0 === n.f[15](e7.codecpar) && (A2 += "".concat(i6, "    ").concat(r6, ": [").concat(t6.toString(), "]\n")) : A2 += "".concat(i6, "    ").concat(r6, ": ").concat(t6, "\n");
            })), A2;
          })(e6, t4, "  ");
        }), r4;
      })(e4, r3, t3[r3]);
    }), i3;
  }
}, 47094: (e2, t2, i2) => {
  i2.d(t2, { A: () => k });
  var r2 = i2(134), a2 = i2(61499), s2 = i2(63939), n = i2(50932), o = i2(4624), c = i2(9705), d2 = i2(85947), h = i2(14686), l = i2(37837), u = i2(71517), f = i2(44328), p = i2(77231), m = i2(72739), g = i2(95832), v = i2(67672), A = i2(36488), y = i2(19028);
  const w = "src/avformat/formats/IAacFormat.ts", b = 1024;
  class k extends d2.A {
    constructor() {
      super(), (0, r2.A)(this, "type", 15), (0, r2.A)(this, "frameType", void 0), (0, r2.A)(this, "fileSize", void 0), (0, r2.A)(this, "currentPts", void 0), (0, r2.A)(this, "latmFilter", void 0), (0, r2.A)(this, "encodeSampleRate", void 0);
    }
    init(e3) {
      this.currentPts = BigInt(0);
    }
    async destroy(e3) {
      this.latmFilter && (this.latmFilter.destroy(), this.latmFilter = null);
    }
    async estimateTotalBlock(e3) {
      let t3 = 0;
      const i3 = e3.ioReader.getPos();
      for (; ; ) try {
        const i4 = await e3.ioReader.peekBuffer(7), r3 = (3 & i4[3]) << 11 | i4[4] << 3 | (224 & i4[5]) >>> 5;
        t3 += 1 + (3 & i4[6]), await e3.ioReader.skip(r3);
      } catch (e4) {
        break;
      }
      return await e3.ioReader.seek(i3), t3;
    }
    async parseTransportStreamTimestamp(e3) {
      if ("ID3" === await e3.ioReader.peekString(3)) {
        await e3.ioReader.skip(3);
        const t3 = { version: await e3.ioReader.readUint8(), revision: await e3.ioReader.readUint8(), flags: await e3.ioReader.readUint8() }, i3 = {}, r3 = (127 & await e3.ioReader.readUint8()) << 21 | (127 & await e3.ioReader.readUint8()) << 14 | (127 & await e3.ioReader.readUint8()) << 7 | 127 & await e3.ioReader.readUint8();
        if (await y.q(e3.ioReader, r3, t3, i3), v.o(i3["com.apple.streaming.transportStreamTimestamp"])) return i3["com.apple.streaming.transportStreamTimestamp"];
      }
    }
    async readHeader(e3) {
      let t3;
      2 & e3.ioReader.flags && (t3 = await this.parseTransportStreamTimestamp(e3));
      const i3 = await e3.ioReader.peekBuffer(4);
      if (this.fileSize = await e3.ioReader.fileSize(), 65 === i3[0] && 68 === i3[1] && 73 === i3[2] && 70 === i3[3]) {
        const t4 = e3.createStream();
        t4.codecpar.codecId = 86018, t4.codecpar.codecType = 1, this.frameType = 0, t4.duration = this.fileSize, t4.timeBase.den = 16384, t4.timeBase.num = 1;
      } else if (255 !== i3[0] || 240 & ~i3[1]) {
        if (86 !== i3[0] || 224 & ~i3[1]) return c.LR;
        {
          this.frameType = 2;
          const t4 = e3.createStream();
          t4.codecpar.codecId = 86018, t4.codecpar.codecType = 1;
          const i4 = (0, g.f7)(await e3.ioReader.peekBuffer(20));
          if (v.ai(i4)) return c.LR;
          t4.codecpar.profile = i4.profile, t4.codecpar.sampleRate = i4.sampleRate, t4.codecpar.chLayout.nbChannels = i4.channels;
          const r3 = (0, g.Ij)(t4.codecpar);
          t4.codecpar.extradata = (0, l.sY)(r3.length), (0, h.lW)(t4.codecpar.extradata, r3.length, r3), t4.codecpar.extradataSize = r3.length, t4.duration = this.fileSize, t4.timeBase.den = 16384, t4.timeBase.num = 1, this.latmFilter = new A.A(), this.latmFilter.init(t4.codecpar[a2.o9], t4.timeBase[a2.o9]);
        }
      } else {
        this.frameType = 1;
        const i4 = e3.createStream();
        i4.codecpar.codecId = 86018, i4.codecpar.codecType = 1;
        const r3 = (0, g.Bq)(await e3.ioReader.peekBuffer(20));
        if (v.ai(r3)) return c.LR;
        this.encodeSampleRate = r3.sampleRate, i4.codecpar.profile = r3.profile, i4.codecpar.sampleRate = r3.sampleRate, i4.codecpar.chLayout.nbChannels = r3.channels;
        const a3 = (0, g.Ij)(i4.codecpar);
        i4.codecpar.extradata = (0, l.sY)(a3.length), (0, h.lW)(i4.codecpar.extradata, a3.length, a3), i4.codecpar.extradataSize = a3.length, i4.timeBase.den = i4.codecpar.sampleRate, i4.timeBase.num = 1, 2 & e3.ioReader.flags ? v.o(t3) && (this.currentPts = (0, f.k)(t3, { num: 1, den: 9e4 }, i4.timeBase)) : i4.duration = (0, f.k)(BigInt(Math.floor(1024 * await this.estimateTotalBlock(e3) / this.encodeSampleRate * p.SF)), p.KR, i4.timeBase);
      }
      return 0;
    }
    async readAVPacket(e3, t3) {
      const i3 = e3.streams.find((e4) => e4.codecpar.codecType = 1);
      try {
        if (2 & e3.ioReader.flags) {
          let t4 = await this.parseTransportStreamTimestamp(e3);
          v.o(t4) && (this.currentPts = (0, f.k)(t4, { num: 1, den: 9e4 }, i3.timeBase));
        }
        const r3 = e3.ioReader.getPos();
        let a3;
        if (0 === this.frameType) {
          a3 = await e3.ioReader.readBuffer(Math.min(b, Number(BigInt.asIntN(32, this.fileSize - r3))));
          const i4 = (0, l.sY)(a3.length);
          (0, h.lW)(i4, a3.length, a3), (0, u.NX)(t3, i4, a3.length), n.M[17](t3 + 48, BigInt(b)), n.M[17](t3 + 56, r3);
        } else if (1 === this.frameType) {
          const s3 = await e3.ioReader.readBuffer(7), o2 = 1 & s3[1], c2 = (3 & s3[3]) << 11 | s3[4] << 3 | (224 & s3[5]) >>> 5, d3 = 3 & s3[6];
          let m2 = 1 === o2 ? 7 : 9, g2 = c2 - m2;
          9 === m2 && await e3.ioReader.skip(2);
          const v2 = (0, f.k)(BigInt(Math.floor(1024 * (d3 + 1) / this.encodeSampleRate * p.SF)), p.KR, i3.timeBase);
          n.M[17](t3 + 48, v2), a3 = await e3.ioReader.readBuffer(g2);
          const A2 = (0, l.sY)(a3.length);
          (0, h.lW)(A2, a3.length, a3), (0, u.NX)(t3, A2, a3.length), n.M[17](t3 + 56, r3);
        } else if (2 === this.frameType) {
          if (r3 === this.fileSize) return -1048576;
          for (; ; ) {
            let i4 = this.latmFilter.receiveAVPacket(t3);
            if (i4 !== c.LT) {
              if (i4 < 0) return i4;
              n.M[17](t3 + 48, BigInt(0 | s2.f[15](t3 + 28))), n.M[17](t3 + 56, this.currentPts);
              break;
            }
            {
              if (e3.ioReader.getPos() === this.fileSize) return -1048576;
              a3 = await e3.ioReader.readBuffer(Math.min(b, Number(BigInt.asIntN(32, this.fileSize - r3))));
              const i5 = (0, l.sY)(a3.length);
              (0, h.lW)(i5, a3.length, a3), (0, u.NX)(t3, i5, a3.length), this.latmFilter.sendAVPacket(t3);
            }
          }
        }
        return n.M[15](t3 + 32, i3.index), n.M[15](t3 + 76, i3.timeBase.den), n.M[15](t3 + 72, i3.timeBase.num), n.M[17](t3 + 16, this.currentPts), n.M[17](t3 + 8, this.currentPts), n.M[15](t3 + 36, 1 | s2.f[15](t3 + 36)), this.currentPts += s2.f[17](t3 + 48), 0;
      } catch (t4) {
        return -1048576 !== e3.ioReader.error && -1048572 !== e3.ioReader.error ? (o.z3("read packet error, ".concat(t4), w, 337), c.LR) : e3.ioReader.error;
      }
    }
    async syncFrame(e3) {
      if (0 === this.frameType) return;
      let t3 = p.Dh;
      const i3 = 1 === this.frameType ? 4095 : 695, r3 = 1 === this.frameType ? 4 : 5;
      for (; ; ) try {
        let a3 = 0;
        for (t3 = e3.ioReader.getPos(); 3 !== a3 && await e3.ioReader.peekUint16() >>> r3 === i3; ) {
          const t4 = 1 === this.frameType ? (0, g.Bq)(await e3.ioReader.peekBuffer(9)) : (0, g.f7)(await e3.ioReader.peekBuffer(20));
          if (v.ai(t4)) break;
          a3++, await e3.ioReader.skip(t4.headerLength + t4.framePayloadLength);
        }
        if (3 === a3) break;
        await e3.ioReader.skip(1);
      } catch (e4) {
        break;
      }
      t3 !== p.Dh && await e3.ioReader.seek(t3);
    }
    async seek(e3, t3, i3, r3) {
      if (16 & r3 && 2 & e3.ioReader.flags) {
        const r4 = (0, f.k)(i3, t3.timeBase, p.i0);
        return await e3.ioReader.seek(r4, true), this.currentPts = i3, BigInt(0);
      }
      if (1 === this.frameType) {
        const a3 = e3.ioReader.getPos();
        if (2 & r3) {
          const s3 = await e3.ioReader.fileSize();
          return s3 <= BigInt(0) ? BigInt(c.E$) : (i3 < BigInt(0) ? i3 = BigInt(0) : i3 > s3 && (i3 = s3), await e3.ioReader.seek(i3), 4 & r3 || (await this.syncFrame(e3), t3.duration && this.fileSize && (this.currentPts = i3 / this.fileSize * t3.duration)), a3);
        }
        if (t3 && t3.sampleIndexes.length) {
          let r4 = m.El(t3.sampleIndexes, (e4) => e4.pts > i3 ? -1 : 1);
          if (r4 > 0 && (0, f.k)(i3 - t3.sampleIndexes[r4 - 1].pts, t3.timeBase, p.i0) < BigInt(5e3)) return o.Yz("seek in sampleIndexes, found index: ".concat(r4, ", pts: ").concat(t3.sampleIndexes[r4 - 1].pts, ", pos: ").concat(t3.sampleIndexes[r4 - 1].pos), w, 443), await e3.ioReader.seek(t3.sampleIndexes[r4 - 1].pos), this.currentPts = i3, a3;
        }
        if (o.Yz("not found any keyframe index, try to seek in bytes", w, 450), !t3.duration) return BigInt(c.E$);
        {
          await e3.ioReader.seek(BigInt(0));
          let r4 = BigInt(0);
          for (; ; ) try {
            if (r4 >= i3) return this.currentPts = r4, a3;
            const s3 = await e3.ioReader.peekBuffer(7), n2 = (3 & s3[3]) << 11 | s3[4] << 3 | (224 & s3[5]) >>> 5, o2 = 3 & s3[6];
            r4 += (0, f.k)(BigInt(Math.floor(1024 * (o2 + 1) / this.encodeSampleRate * p.SF)), p.KR, t3.timeBase), await e3.ioReader.skip(n2);
          } catch (e4) {
            return BigInt(c.E$);
          }
        }
      } else if (0 === this.frameType || 2 === this.frameType) {
        this.latmFilter && this.latmFilter.reset();
        const t4 = e3.ioReader.getPos();
        return i3 < BigInt(0) ? i3 = BigInt(0) : i3 > this.fileSize && (i3 = this.fileSize), await e3.ioReader.seek(i3), this.currentPts = i3, 2 !== this.frameType || 4 & r3 || await this.syncFrame(e3), t4;
      }
      return BigInt(c.E$);
    }
    getAnalyzeStreamsCount() {
      return 1;
    }
  }
}, 47344: (e2, t2, i2) => {
  i2.d(t2, { A: () => m });
  var r2 = i2(134), a2 = i2(50932), s2 = i2(4624), n = i2(9705), o = i2(85947), c = i2(14686), d2 = i2(37837), h = i2(71517), l = i2(72739), u = i2(50011), f = i2(51785);
  const p = "src/avformat/formats/IAssFormat.ts";
  class m extends o.A {
    constructor() {
      super(), (0, r2.A)(this, "type", 20), (0, r2.A)(this, "queue", void 0), (0, r2.A)(this, "index", void 0);
    }
    init(e3) {
      this.queue = [];
    }
    async readHeader(e3) {
      const t3 = await e3.ioReader.readLine();
      if ("[Script Info]" !== t3.trim()) return s2.z3("the file format is not ass", p, 68), n.LR;
      const i3 = e3.createStream();
      i3.codecpar.codecId = 94230, i3.codecpar.codecType = 3, i3.timeBase.den = 1e3, i3.timeBase.num = 1;
      let r3, a3 = t3 + "\n", o2 = false, h2 = 0, m2 = 0;
      for (; ; ) {
        const t4 = await e3.ioReader.readLine();
        if (!/^;/.test(t4)) {
          if ("[Events]" === t4.trim() && (o2 = true), /^Format:/.test(t4) && o2) {
            a3 += t4, r3 = f.Bp(t4.trim());
            for (let e4 = 0; e4 < r3.length; e4++) "Start" === r3[e4] ? h2 = e4 : "End" === r3[e4] && (m2 = e4);
            break;
          }
          a3 += t4 + "\n";
        }
      }
      const g = u.encode(a3);
      i3.codecpar.extradata = (0, d2.sY)(g.length), i3.codecpar.extradataSize = g.length, (0, c.lW)(i3.codecpar.extradata, g.length, g), this.index = 0;
      let v = BigInt(0);
      try {
        for (; ; ) {
          const t4 = e3.ioReader.getPos(), a4 = (await e3.ioReader.readLine()).trim();
          if (/^;/.test(a4) || /^Comment:/.test(a4)) continue;
          const { start: s3, end: n2 } = f.Ew(r3, a4, h2, m2);
          i3.nbFrames++, i3.duration = n2;
          const o3 = { context: a4, startTs: s3, endTs: n2, pos: t4 };
          s3 >= v ? (this.queue.push(o3), v = s3) : l._(this.queue, o3, (e4) => e4.startTs < o3.startTs ? 1 : -1);
        }
      } catch (e4) {
        return 0;
      }
    }
    async readAVPacket(e3, t3) {
      if (!this.queue.length) return n.LR;
      if (this.index >= this.queue.length) return -1048576;
      const i3 = e3.streams.find((e4) => 3 === e4.codecpar.codecType), r3 = this.queue[this.index++];
      a2.M[15](t3 + 32, i3.index), a2.M[15](t3 + 76, i3.timeBase.den), a2.M[15](t3 + 72, i3.timeBase.num), a2.M[17](t3 + 16, r3.startTs), a2.M[17](t3 + 8, r3.startTs), a2.M[17](t3 + 48, r3.endTs - r3.startTs);
      const s3 = u.encode(r3.context), o2 = (0, d2.sY)(s3.length);
      return (0, c.lW)(o2, s3.length, s3), (0, h.NX)(t3, o2, s3.length), 0;
    }
    async seek(e3, t3, i3, r3) {
      if (2 & r3) return BigInt(n.E$);
      if (i3 <= BigInt(0)) return this.index = 0, BigInt(0);
      const a3 = l.El(this.queue, (e4) => e4.startTs > i3 ? -1 : 1);
      if (a3 >= 0) {
        for (s2.Yz("seek in cues, found index: ".concat(a3, ", pts: ").concat(this.queue[a3].startTs, ", pos: ").concat(this.queue[a3].pos), p, 217), this.index = Math.max(a3 - 1, 0); this.index > 0 && (this.queue[this.index - 1].startTs === this.queue[this.index].startTs || this.queue[this.index - 1].endTs > i3); ) this.index--;
        return BigInt(0);
      }
      return BigInt(n.LR);
    }
    getAnalyzeStreamsCount() {
      return 1;
    }
  }
}, 18453: (e2, t2, i2) => {
  i2.d(t2, { A: () => k });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(4624), o = i2(9705), c = i2(85947), d2 = i2(14686), h = i2(37837), l = i2(71517), u = i2(91375), f = i2(37246), p = i2(92647), m = i2(77231), g = i2(52071), v = i2(72739), A = i2(44328), y = i2(87400);
  const w = "src/avformat/formats/IFlacFormat.ts", b = 1024;
  class k extends c.A {
    constructor() {
      super(), (0, r2.A)(this, "type", 17), (0, r2.A)(this, "context", void 0);
    }
    init(e3) {
      e3.ioReader.setEndian(true), this.context = { streamInfo: { minimumBlockSize: 0, maximumBlockSize: 0, minimumFrameSize: 0, maximumFrameSize: 0, sampleRate: 0, channels: 0, bitPerSample: 0, samples: BigInt(0), md5: "" }, frameInfo: { sampleRate: 0, channels: 0, bps: 0, blocksize: 0, chMode: 0, frameOrSampleNum: BigInt(0), isVarSize: 0 }, seekPoints: [], cueSheet: { catalogNumber: "", leadInSamples: BigInt(0), compactDisc: false, tracks: [] }, picture: { type: 0, mimeType: "", description: "", width: 0, height: 0, colorDepth: 0, indexedColor: 0, data: null }, cacheBuffer: null, cachePos: BigInt(0), bitReader: new f.A(16), fileSize: BigInt(0), firstFramePos: BigInt(0), isVarSize: -1 };
    }
    async readHeader(e3) {
      if ("fLaC" !== await e3.ioReader.readString(4)) return n.z3("the file format is not flac", w, 118), o.LR;
      this.context.fileSize = await e3.ioReader.fileSize();
      const t3 = e3.createStream();
      for (t3.codecpar.codecType = 1, t3.codecpar.codecId = 86028; ; ) {
        const i3 = await e3.ioReader.readUint8(), r3 = await e3.ioReader.readUint24(), a3 = -129 & i3;
        if (0 === a3) {
          t3.codecpar.extradata = (0, h.sY)(r3), t3.codecpar.extradataSize = r3, (0, d2.lW)(t3.codecpar.extradata, r3, await e3.ioReader.peekBuffer(r3)), this.context.streamInfo.minimumBlockSize = await e3.ioReader.readUint16(), this.context.streamInfo.maximumBlockSize = await e3.ioReader.readUint16(), this.context.streamInfo.minimumFrameSize = await e3.ioReader.readUint24(), this.context.streamInfo.maximumFrameSize = await e3.ioReader.readUint24();
          const i4 = await e3.ioReader.readUint24();
          t3.codecpar.sampleRate = i4 >> 4, t3.codecpar.chLayout.nbChannels = 1 + ((15 & i4) >>> 1), this.context.streamInfo.sampleRate = t3.codecpar.sampleRate, this.context.streamInfo.channels = t3.codecpar.chLayout.nbChannels;
          const a4 = await e3.ioReader.readUint8();
          t3.codecpar.bitsPerRawSample = 1 + ((1 & i4) << 4 | (240 & a4) >>> 4), this.context.streamInfo.bitPerSample = t3.codecpar.bitsPerRawSample;
          const s3 = await e3.ioReader.readUint32(), n2 = BigInt(Math.floor(15 & a4)) << BigInt(32) | BigInt(Math.floor(s3));
          this.context.streamInfo.samples = n2, t3.timeBase.den = t3.codecpar.sampleRate, t3.timeBase.num = 1, t3.duration = n2, t3.startTime = BigInt(0), this.context.streamInfo.md5 = await e3.ioReader.readString(16);
        } else if (2 === a3) {
          const t4 = e3.createStream();
          t4.codecpar.codecType = 2, t4.codecpar.codecTag = await e3.ioReader.readUint32(), t4.codecpar.extradata = (0, h.sY)(r3 - 4), t4.codecpar.extradataSize = r3 - 4, await e3.ioReader.readBuffer(r3 - 4, (0, d2.JW)(t4.codecpar.extradata, t4.codecpar.extradataSize));
        } else if (3 === a3) for (let t4 = 0; t4 < r3 / 18; t4++) {
          const t5 = await e3.ioReader.readUint64(), i4 = await e3.ioReader.readUint64(), r4 = await e3.ioReader.readUint16();
          this.context.seekPoints.push({ pts: t5, pos: i4, samples: r4 });
        }
        else if (4 === a3) {
          e3.ioReader.setEndian(false);
          const i4 = await e3.ioReader.readUint32(), r4 = await e3.ioReader.readString(i4), a4 = await e3.ioReader.readUint32(), s3 = [];
          for (let t4 = 0; t4 < a4; t4++) {
            const t5 = await e3.ioReader.readUint32();
            s3.push(await e3.ioReader.readString(t5));
          }
          t3.metadata.vendor = r4, (0, y.ol)(s3, t3.metadata), e3.ioReader.setEndian(true);
        } else if (5 === a3) {
          this.context.cueSheet.catalogNumber = await e3.ioReader.readString(128), this.context.cueSheet.leadInSamples = await e3.ioReader.readUint64(), this.context.cueSheet.compactDisc = !!(await e3.ioReader.readUint8() >>> 7), await e3.ioReader.skip(258);
          const t4 = await e3.ioReader.readUint8();
          for (let i4 = 0; i4 < t4; i4++) {
            const t5 = await e3.ioReader.readUint64(), i5 = await e3.ioReader.readUint8(), r4 = await e3.ioReader.readBuffer(12), a4 = await e3.ioReader.readUint8();
            await e3.ioReader.skip(13);
            const s3 = await e3.ioReader.readUint8(), n2 = [];
            for (let t6 = 0; t6 < s3; t6++) n2.push({ offset: await e3.ioReader.readUint64(), point: await e3.ioReader.readUint8() }), await e3.ioReader.skip(3);
            this.context.cueSheet.tracks.push({ offset: t5, number: i5, isrc: r4, type: a4 >>> 7, preEmphasisFlag: a4 >>> 6 & 1, points: n2 });
          }
        } else if (6 === a3) {
          this.context.picture.type = await e3.ioReader.readUint32();
          let t4 = await e3.ioReader.readUint32();
          this.context.picture.mimeType = await e3.ioReader.readString(t4), t4 = await e3.ioReader.readUint32(), this.context.picture.description = await e3.ioReader.readString(t4), this.context.picture.width = await e3.ioReader.readUint32(), this.context.picture.height = await e3.ioReader.readUint32(), this.context.picture.colorDepth = await e3.ioReader.readUint32(), this.context.picture.indexedColor = await e3.ioReader.readUint32(), t4 = await e3.ioReader.readUint32(), this.context.picture.data = await e3.ioReader.readBuffer(t4);
        } else await e3.ioReader.skip(r3);
        if (128 & i3) break;
      }
      return this.context.firstFramePos = e3.ioReader.getPos(), t3.privData = this.context, 0;
    }
    async getNextFrame(e3) {
      const t3 = [];
      for (; ; ) {
        if (e3.ioReader.getPos() === this.context.fileSize) {
          this.context.cacheBuffer && (t3.push(this.context.cacheBuffer), this.context.cacheBuffer = null);
          break;
        }
        this.context.cacheBuffer ? this.context.cacheBuffer.length < 17 && (this.context.cacheBuffer = (0, p.A)(Uint8Array, [this.context.cacheBuffer, await e3.ioReader.readBuffer(Math.min(b, Number(BigInt.asIntN(32, this.context.fileSize - e3.ioReader.getPos()))))])) : (this.context.cachePos = e3.ioReader.getPos(), this.context.cacheBuffer = await e3.ioReader.readBuffer(Math.min(b, Number(BigInt.asIntN(32, this.context.fileSize - e3.ioReader.getPos())))));
        let i3 = t3.length ? 0 : 2;
        const r3 = this.context.isVarSize < 0 ? [248, 249] : this.context.isVarSize ? [249] : [248], a3 = this.context.cacheBuffer.length - 2;
        for (; i3 < a3; i3++) if (255 === this.context.cacheBuffer[i3] && v.zy(r3, this.context.cacheBuffer[i3 + 1])) {
          i3 && (t3.push(this.context.cacheBuffer.subarray(0, i3)), this.context.cacheBuffer = this.context.cacheBuffer.subarray(i3), this.context.cachePos += BigInt(Math.floor(i3)));
          break;
        }
        if (i3 === a3) {
          e3.ioReader.getPos() === this.context.fileSize ? (t3.push(this.context.cacheBuffer), this.context.cachePos += BigInt(Math.floor(this.context.cacheBuffer.length)), this.context.cacheBuffer = null) : (t3.push(this.context.cacheBuffer.subarray(0, i3)), this.context.cachePos += BigInt(Math.floor(i3)), this.context.cacheBuffer = this.context.cacheBuffer.subarray(i3));
          continue;
        }
        this.context.cacheBuffer.length < 16 && (this.context.cacheBuffer = (0, p.A)(Uint8Array, [this.context.cacheBuffer, await e3.ioReader.readBuffer(Math.min(b, Number(BigInt.asIntN(32, this.context.fileSize - e3.ioReader.getPos()))))])), this.context.bitReader.reset(), this.context.bitReader.appendBuffer(this.context.cacheBuffer.subarray(0, 16));
        const s3 = {};
        if (!((0, u.x)(this.context.bitReader, s3, true) < 0 || s3.frameOrSampleNum - this.context.frameInfo.frameOrSampleNum !== BigInt(0 | this.context.frameInfo.blocksize) && s3.frameOrSampleNum !== this.context.frameInfo.frameOrSampleNum + BigInt(1))) break;
        t3.push(this.context.cacheBuffer.subarray(0, 2)), this.context.cachePos += BigInt(2), this.context.cacheBuffer = this.context.cacheBuffer.subarray(2);
      }
      return 1 === t3.length ? t3[0] : (0, p.A)(Uint8Array, t3);
    }
    async readAVPacket(e3, t3) {
      const i3 = e3.streams.find((e4) => e4.codecpar.codecType = 1);
      try {
        let r3 = e3.ioReader.getPos();
        if (r3 === this.context.fileSize) return -1048576;
        if (this.context.bitReader.reset(), this.context.cacheBuffer ? (r3 = this.context.cachePos, this.context.cacheBuffer.length < 16 && (this.context.cacheBuffer = (0, p.A)(Uint8Array, [this.context.cacheBuffer, await e3.ioReader.readBuffer(Math.min(b, Number(BigInt.asIntN(32, this.context.fileSize - e3.ioReader.getPos()))))])), this.context.bitReader.appendBuffer(this.context.cacheBuffer.subarray(0, 16))) : this.context.bitReader.appendBuffer(await e3.ioReader.peekBuffer(16)), (0, u.x)(this.context.bitReader, this.context.frameInfo) < 0) return o.LR;
        const n2 = await this.getNextFrame(e3), c2 = (0, h.sY)(n2.length);
        return (0, d2.lW)(c2, n2.length, n2), (0, l.NX)(t3, c2, n2.length), s2.M[17](t3 + 56, r3), s2.M[15](t3 + 32, i3.index), s2.M[15](t3 + 76, i3.timeBase.den), s2.M[15](t3 + 72, i3.timeBase.num), s2.M[15](t3 + 36, 1 | a2.f[15](t3 + 36)), s2.M[17](t3 + 16, this.context.frameInfo.isVarSize ? this.context.frameInfo.frameOrSampleNum : this.context.frameInfo.frameOrSampleNum * BigInt(0 | this.context.frameInfo.blocksize)), s2.M[17](t3 + 8, this.context.frameInfo.isVarSize ? this.context.frameInfo.frameOrSampleNum : this.context.frameInfo.frameOrSampleNum * BigInt(0 | this.context.frameInfo.blocksize)), this.context.isVarSize < 0 && (this.context.isVarSize = this.context.frameInfo.isVarSize), 0;
      } catch (t4) {
        return -1048576 !== e3.ioReader.error && -1048572 !== e3.ioReader.error ? (n.z3("read packet error, ".concat(t4), w, 418), o.LR) : e3.ioReader.error;
      }
    }
    async syncFrame(e3) {
      let t3 = m.Dh;
      for (; ; ) try {
        const i3 = await e3.ioReader.peekUint16();
        if ((65529 === i3 || 65528 === i3) && (t3 = e3.ioReader.getPos(), this.context.bitReader.reset(), this.context.bitReader.appendBuffer(await e3.ioReader.peekBuffer(16)), !(0, u.x)(this.context.bitReader, {}, true))) break;
        await e3.ioReader.skip(1);
      } catch (e4) {
        break;
      }
      t3 !== m.Dh && await e3.ioReader.seek(t3);
    }
    async seek(e3, t3, i3, r3) {
      const a3 = e3.ioReader.getPos(), s3 = t3.privData;
      if (2 & r3) {
        const t4 = await e3.ioReader.fileSize();
        return t4 <= BigInt(0) ? BigInt(o.E$) : (i3 < BigInt(0) ? i3 = BigInt(0) : i3 > t4 && (i3 = t4), await e3.ioReader.seek(i3), 4 & r3 || await this.syncFrame(e3), a3);
      }
      if (t3 && t3.sampleIndexes.length) {
        let r4 = v.El(t3.sampleIndexes, (e4) => e4.pts > i3 ? -1 : 1);
        if (r4 > 0 && (0, A.k)(i3 - t3.sampleIndexes[r4 - 1].pts, t3.timeBase, m.i0) < BigInt(5e3)) return n.Yz("seek in sampleIndexes, found index: ".concat(r4, ", pts: ").concat(t3.sampleIndexes[r4 - 1].pts, ", pos: ").concat(t3.sampleIndexes[r4 - 1].pos), w, 485), await e3.ioReader.seek(t3.sampleIndexes[r4 - 1].pos), s3.cacheBuffer = null, a3;
      }
      if (s3.seekPoints.length) {
        let t4 = 0;
        for (let e4 = 0; e4 < s3.seekPoints.length; e4++) {
          if (s3.seekPoints[e4].pts === i3) {
            t4 = e4;
            break;
          }
          if (s3.seekPoints[e4].pts > i3) {
            t4 = Math.max(e4 - 1, 0);
            break;
          }
        }
        const r4 = s3.seekPoints[t4];
        return n.Yz("seek in seekPoints, found index: ".concat(t4, ", pts: ").concat(r4.pts, ", pos: ").concat(r4.pos + s3.firstFramePos), w, 505), await e3.ioReader.seek(r4.pos + s3.firstFramePos), s3.cacheBuffer = null, a3;
      }
      n.Yz("not found any keyframe index, try to seek in bytes", w, 511);
      const c2 = await (0, g.A)(e3, t3, i3, s3.firstFramePos, this.readAVPacket.bind(this), this.syncFrame.bind(this));
      return c2 > 0 && (s3.cacheBuffer = null), c2;
    }
    getAnalyzeStreamsCount() {
      return 1;
    }
  }
}, 28773: (e2, t2, i2) => {
  i2.d(t2, { A: () => z });
  var r2 = i2(134), a2 = i2(14686), s2 = i2(61499), n = i2(63939), o = i2(50932), c = (i2(9599), i2(58121)), d2 = i2(68243), h = i2(4624), l = i2(35028), u = i2(62815), f = i2(95832), p = i2(67659), m = i2(59166), g = i2(21477), v = i2(82014), A = i2(97077), y = i2(14769), w = i2(22576), b = i2(87518), k = i2(64093), x = i2(9705), I = i2(85947), P = i2(37837), S = i2(71517), T = i2(65977), M = i2(44328), B = i2(77231), R = i2(72739), _ = i2(52071), C = i2(34677), U = i2(73040), D = (i2(55833), i2(99991)), E = i2(67672);
  const L = "src/avformat/formats/IFlvFormat.ts";
  class z extends I.A {
    constructor(e3 = {}) {
      super(), (0, r2.A)(this, "type", 0), (0, r2.A)(this, "header", void 0), (0, r2.A)(this, "script", void 0), (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "firstTagPos", void 0), this.header = new c.A(), this.script = new d2.A(), this.options = e3;
    }
    init(e3) {
      e3.ioReader && e3.ioReader.setEndian(true);
    }
    async readHeader(e3) {
      try {
        if ("FLV" !== await e3.ioReader.peekString(3)) return h.z3("the file format is not flv", L, 118), x.LR;
        await this.header.read(e3.ioReader), 0 !== await e3.ioReader.readUint32() && h.R8("the previousTagSize0 is not 0", L, 125);
        let t3 = 0;
        if (18 === await e3.ioReader.peekUint8()) {
          await e3.ioReader.skip(1);
          const i3 = await e3.ioReader.readUint24();
          await e3.ioReader.skip(7), t3 = await this.script.read(e3.ioReader, i3);
        }
        return t3 >= 0 && (this.firstTagPos = e3.ioReader.getPos()), t3;
      } catch (t3) {
        return h.z3(t3.message, L, 143), e3.ioReader.error;
      }
    }
    async readModEx(e3, t3, i3) {
      let r3 = await e3.ioReader.readUint8() + 1;
      256 === r3 && (r3 = await e3.ioReader.readUint16() + 1);
      const a3 = await e3.ioReader.readBuffer(r3), s3 = await e3.ioReader.readUint8(), c2 = 240 & s3;
      if (0 === c2 && 0 === i3 || 0 === c2 && 1 === i3) {
        let e4 = 0;
        3 === a3.length ? (e4 = a3[0] << 16 | a3[1] << 8 | a3[2], this.options.useNanoTimestamp ? o.M[17](t3 + 16, n.f[17](t3 + 16) + BigInt(e4)) : o.M[17](t3 + 16, n.f[17](t3 + 16) + BigInt(e4) / BigInt(1e6)), o.M[17](t3 + 8, n.f[17](t3 + 16))) : h.R8("Invalid ModEx size for Type TimestampOffsetNano!, need 3 but got ".concat(a3.length), L, 176);
      } else h.R8("unknown ModEx type: ".concat(c2), L, 180);
      return 15 & s3;
    }
    async readCodecConfigurationRecord(e3, t3, i3, r3) {
      const s3 = (0, P.sY)(r3);
      t3.codecpar.extradata ? ((0, S.Ow)(i3, 1, s3, r3), await e3.ioReader.readBuffer(r3, (0, a2.JW)(s3, r3))) : (t3.codecpar.extradata = s3, t3.codecpar.extradataSize = r3, await e3.ioReader.readBuffer(r3, (0, a2.JW)(s3, r3)), t3.sideData[1] = (0, a2.s3)(s3, r3).slice(), 27 === t3.codecpar.codecId ? u.XC(t3) : 173 === t3.codecpar.codecId ? p.XC(t3) : 196 === t3.codecpar.codecId ? m.XC(t3) : 225 === t3.codecpar.codecId ? g.XC(t3) : 167 === t3.codecpar.codecId ? v.XC(t3) : 139 === t3.codecpar.codecId ? A.XC(t3) : 86018 === t3.codecpar.codecId ? f.XC(t3) : 86028 === t3.codecpar.codecId ? y.XC(t3) : 86076 === t3.codecpar.codecId && w.XC(t3));
    }
    async readAVPacketData(e3, t3, i3, r3) {
      const s3 = (0, P.sY)(r3);
      (0, S.NX)(i3, s3, r3), await e3.ioReader.readBuffer(r3, (0, a2.JW)(s3, r3));
    }
    parseColorInfo(e3, t3, i3) {
      let r3 = false, a3 = false;
      if (i3.hdrMdcv && (r3 = i3.hdrMdcv.redX > 0 && i3.hdrMdcv.redY > 0 && i3.hdrMdcv.blueX > 0 && i3.hdrMdcv.blueY > 0 && i3.hdrMdcv.greenX > 0 && i3.hdrMdcv.greenY > 0 && i3.hdrMdcv.whitePointX > 0 && i3.hdrMdcv.whitePointY > 0, a3 = i3.hdrMdcv.maxLuminance > 0 && i3.hdrMdcv.minLuminance > 0), 3 !== i3.colorConfig.matrixCoefficients && (e3.codecpar.colorSpace = i3.colorConfig.matrixCoefficients), 3 !== i3.colorConfig.colorPrimaries && 0 !== i3.colorConfig.colorPrimaries && (e3.codecpar.colorPrimaries = i3.colorConfig.colorPrimaries), 3 !== i3.colorConfig.transferCharacteristics && 0 !== i3.colorConfig.transferCharacteristics && (e3.codecpar.colorTrc = i3.colorConfig.transferCharacteristics), i3.hdrCll && i3.hdrCll.maxCLL && i3.hdrCll.maxFall) {
        const n2 = (0, P.Gy)(8);
        o.M[8](n2, i3.hdrCll.maxCLL), o.M[8](n2 + 4, i3.hdrCll.maxFall), (0, S.sn)(e3.codecpar[s2.o9] + 20, e3.codecpar[s2.o9] + 24, 22) ? (0, S.Ow)(t3, 22, n2, 8) : (0, S.$W)(e3.codecpar[s2.o9] + 20, e3.codecpar[s2.o9] + 24, 22, n2, 8);
      }
      if (a3 || r3) {
        let d3 = function(e4, t4) {
          const i4 = (0, M.j2)(t4, B.go);
          o.M[15](e4 + 4, i4.den), o.M[15](e4, i4.num);
        };
        const c2 = (0, P.Gy)(88);
        a3 && (o.M[15](c2 + 84, 1), d3(c2 + 72, i3.hdrMdcv.maxLuminance), d3(c2 + 64, i3.hdrMdcv.minLuminance)), r3 && (o.M[15](c2 + 80, 1), d3(c2, i3.hdrMdcv.redX), d3(c2 + 8, i3.hdrMdcv.redY), d3(c2 + 16, i3.hdrMdcv.greenX), d3(c2 + 16 + 8, i3.hdrMdcv.greenY), d3(c2 + 32, i3.hdrMdcv.blueX), d3(c2 + 32 + 8, i3.hdrMdcv.blueY)), (0, S.sn)(e3.codecpar[s2.o9] + 20, e3.codecpar[s2.o9] + 24, 20) ? (0, S.Ow)(t3, 20, c2, 88) : (0, S.$W)(e3.codecpar[s2.o9] + 20, e3.codecpar[s2.o9] + 24, 20, c2, 88);
      }
    }
    findStream(e3, t3, i3) {
      for (let r3 = 0; r3 < e3.streams.length; r3++) if (e3.streams[r3].codecpar.codecType === t3) {
        const t4 = e3.streams[r3].privData;
        if (t4 && t4.trackId === i3) return e3.streams[r3];
      }
    }
    createStream(e3, t3, i3, r3) {
      var a3;
      const s3 = e3.createStream();
      s3.codecpar.codecType = t3, s3.timeBase.den = this.options.useNanoTimestamp ? B.H3 : B.qs, s3.timeBase.num = 1, s3.startTime = n.f[17](i3 + 8);
      const o2 = { trackId: r3 };
      var c2, d3, h2;
      if (s3.privData = o2, null !== (a3 = this.script.onMetaData) && void 0 !== a3 && a3.duration && (s3.duration = (0, M.k)(BigInt(Math.floor(1e3 * this.script.onMetaData.duration)), B.i0, s3.timeBase)), 0 === t3) (null === (c2 = this.script.onMetaData) || void 0 === c2 ? void 0 : c2.width) > 0 && (s3.codecpar.width = this.script.onMetaData.width), (null === (d3 = this.script.onMetaData) || void 0 === d3 ? void 0 : d3.height) > 0 && (s3.codecpar.height = this.script.onMetaData.height), null !== (h2 = this.script.onMetaData) && void 0 !== h2 && null !== (h2 = h2.videoTrackIdInfoMap) && void 0 !== h2 && h2[r3] && (this.script.onMetaData.videoTrackIdInfoMap[r3].title && (s3.metadata.title = this.script.onMetaData.videoTrackIdInfoMap[r3].title), this.script.onMetaData.videoTrackIdInfoMap[r3].lang && (s3.metadata.language = this.script.onMetaData.videoTrackIdInfoMap[r3].lang), this.script.onMetaData.videoTrackIdInfoMap[r3].width > 0 && (s3.codecpar.width = this.script.onMetaData.videoTrackIdInfoMap[r3].width), this.script.onMetaData.videoTrackIdInfoMap[r3].height > 0 && (s3.codecpar.height = this.script.onMetaData.videoTrackIdInfoMap[r3].height), this.script.onMetaData.videoTrackIdInfoMap[r3].duration > 0 && (s3.duration = (0, M.k)(BigInt(1e3 * this.script.onMetaData.videoTrackIdInfoMap[r3].duration), B.i0, s3.timeBase)));
      else if (1 === t3) {
        var l2;
        null !== (l2 = this.script.onMetaData) && void 0 !== l2 && null !== (l2 = l2.audioTrackIdInfoMap) && void 0 !== l2 && l2[r3] && (this.script.onMetaData.audioTrackIdInfoMap[r3].title && (s3.metadata.title = this.script.onMetaData.audioTrackIdInfoMap[r3].title), this.script.onMetaData.audioTrackIdInfoMap[r3].lang && (s3.metadata.language = this.script.onMetaData.audioTrackIdInfoMap[r3].lang), this.script.onMetaData.audioTrackIdInfoMap[r3].duration > 0 && (s3.duration = (0, M.k)(BigInt(1e3 * this.script.onMetaData.audioTrackIdInfoMap[r3].duration), B.i0, s3.timeBase)));
      }
      return this.onStreamAdd && this.onStreamAdd(s3), s3;
    }
    async readAVPacket_(e3, t3) {
      const i3 = e3.ioReader.getPos();
      o.M[17](t3 + 56, i3);
      let r3 = false;
      const c2 = 31 & await e3.ioReader.readUint8();
      let d3 = await e3.ioReader.readUint24(), u2 = await e3.ioReader.readUint24();
      const f2 = await e3.ioReader.readUint8();
      if (f2 && (u2 |= f2 << 24), o.M[17](t3 + 16, this.options.useNanoTimestamp ? (0, M.k)(BigInt(Math.floor(u2)), B.i0, B.FQ) : BigInt(Math.floor(u2))), o.M[17](t3 + 8, n.f[17](t3 + 16)), await e3.ioReader.skip(3), 8 === c2) {
        o.M[15](t3 + 36, 1 | n.f[15](t3 + 36));
        const c3 = await e3.ioReader.readUint8();
        d3--;
        const u3 = (240 & c3) >> 4;
        if (9 === u3) {
          let l2 = false, u4 = 15 & c3;
          for (; 7 === u4; ) {
            let i4 = e3.ioReader.getPos();
            u4 = await this.readModEx(e3, t3, 1), d3 -= Number(BigInt.asIntN(32, e3.ioReader.getPos() - i4));
          }
          let f3 = 0, p3 = 0;
          if (5 === u4) {
            l2 = true;
            const t4 = await e3.ioReader.readUint8();
            d3--, p3 = (240 & t4) >> 4, u4 = 15 & t4, 2 !== p3 && (f3 = await e3.ioReader.readUint32(), d3 -= 4);
          } else f3 = await e3.ioReader.readUint32(), d3 -= 4;
          let m3 = t3;
          for (; ; ) {
            let c4 = d3, g3 = 0;
            l2 && (2 === p3 && (f3 = await e3.ioReader.readUint32(), d3 -= 4), g3 = await e3.ioReader.readUint8(), d3--, 0 !== p3 ? (c4 = await e3.ioReader.readUint24(), d3 -= 3) : c4 = d3);
            let v3 = this.findStream(e3, 1, g3);
            if (v3 || (v3 = this.createStream(e3, 1, m3, g3), f3 === (0, T.A)("ac-3") ? v3.codecpar.codecId = 86019 : f3 === (0, T.A)("ec-3") ? v3.codecpar.codecId = 86056 : f3 === (0, T.A)("Opus") ? (v3.codecpar.codecId = 86076, v3.codecpar.sampleRate = 48e3) : f3 === (0, T.A)(".mp3") ? v3.codecpar.codecId = 86017 : f3 === (0, T.A)("fLaC") ? v3.codecpar.codecId = 86028 : f3 === (0, T.A)("mp4a") ? v3.codecpar.codecId = 86018 : (h.R8("unknown codec fourcc(".concat(f3.toString(16), ")"), L, 509), v3.codecpar.codecId = 0)), o.M[15](m3 + 32, v3.index), d3 -= c4, 4 === u4) {
              const t4 = await e3.ioReader.readUint8(), i4 = await e3.ioReader.readUint8();
              if (c4 -= 2, (0, D.bl)(v3.codecpar[s2.o9] + 112), 2 === t4) {
                (0, D.xY)(v3.codecpar[s2.o9] + 112, i4);
                for (let t5 = 0; t5 < i4; t5++) {
                  const i5 = await e3.ioReader.readUint8();
                  c4--, i5 < 18 ? o.M[15](v3.codecpar.chLayout.u.map + 24 * t5, i5) : i5 >= 18 && i5 <= 23 ? o.M[15](v3.codecpar.chLayout.u.map + 24 * t5, i5 - 18 + 35) : 254 === i5 ? o.M[15](v3.codecpar.chLayout.u.map + 24 * t5, 512) : o.M[15](v3.codecpar.chLayout.u.map + 24 * t5, 768);
                }
              } else if (1 === t4) {
                let t5 = BigInt(await e3.ioReader.readUint32());
                c4 -= 4, t5 = t5 & BigInt(262143) | (t5 & BigInt(16515072)) << BigInt(35) - BigInt(18), (0, D.ML)(v3.codecpar[s2.o9] + 112, t5);
              }
              r3 = true;
            } else if (0 === u4) c4 ? (await this.readCodecConfigurationRecord(e3, v3, m3, c4), c4 = 0, r3 = false, (0, S.fQ)(t3, 1) || (r3 = true)) : r3 = true;
            else if (2 === u4) o.M[15](m3 + 36, 32 | n.f[15](m3 + 36)), r3 = false;
            else if (1 === u4) {
              if (await this.readAVPacketData(e3, v3, m3, c4), (86019 === v3.codecpar.codecId || 86056 === v3.codecpar.codecId || 86017 === v3.codecpar.codecId) && v3.codecpar.sampleRate === B.N_) if (86019 === v3.codecpar.codecId || 86056 === v3.codecpar.codecId) {
                const e4 = b.R((0, S.iI)(m3));
                E.ai(e4) || (v3.codecpar.sampleRate = e4.sampleRate, v3.codecpar.chLayout.nbChannels = e4.channels, v3.codecpar.bitrate = BigInt(e4.bitrate));
              } else 86017 === v3.codecpar.codecId && k.XC(v3, (0, S.iI)(m3));
              r3 = false, c4 = 0;
            } else h.R8("invalid audioPacketType ".concat(u4), L, 591);
            if (c4 && await e3.ioReader.skip(c4), m3 === t3 || r3 || e3.interval.packetBuffer.push(m3), !l2 || 0 === p3 || !d3) break;
            m3 = (0, S._5)(), o.M[17](m3 + 56, i3), (0, a2.Mr)(m3 + 72, t3 + 72, 8), o.M[17](m3 + 16, n.f[17](t3 + 16)), o.M[17](m3 + 8, n.f[17](t3 + 8)), o.M[15](m3 + 36, 1 | n.f[15](m3 + 36));
          }
        } else {
          let i4 = this.findStream(e3, 1, 0);
          if (!i4) {
            if (i4 = this.createStream(e3, 1, t3, 0), i4.disposition |= 1, i4.codecpar.chLayout.nbChannels = 1 & ~c3 ? 1 : 2, i4.codecpar.sampleRate = 44100 << ((12 & c3) >>> 2) >> 3, i4.codecpar.bitsPerCodedSample = 2 & c3 ? 16 : 8, 0 === u3) i4.codecpar.codecId = 8 === i4.codecpar.bitsPerCodedSample ? 65541 : 65536;
            else if (3 === u3) i4.codecpar.codecId = 8 === i4.codecpar.bitsPerCodedSample ? 65541 : 65536;
            else {
              var p2;
              i4.codecpar.codecId = null !== (p2 = l.FJ[u3]) && void 0 !== p2 ? p2 : 0;
            }
            86051 === i4.codecpar.codecId ? (i4.codecpar.sampleRate = 16e3, i4.codecpar.chLayout.nbChannels = 1) : 65543 !== i4.codecpar.codecId && 65542 !== i4.codecpar.codecId || (i4.codecpar.sampleRate = 8e3);
          }
          o.M[15](t3 + 32, i4.index), 86018 === i4.codecpar.codecId && (d3--, 0 === await e3.ioReader.readUint8() && (this.readCodecConfigurationRecord(e3, i4, t3, d3), d3 = 0, (0, S.fQ)(t3, 1) || (r3 = true))), d3 && (await this.readAVPacketData(e3, i4, t3, d3), d3 = 0);
        }
      } else if (9 === c2) {
        const s3 = await e3.ioReader.readUint8(), c3 = 128 & s3, u3 = (112 & s3) >> 4;
        if (d3--, 1 === u3 && o.M[15](t3 + 36, 1 | n.f[15](t3 + 36)), c3) {
          let c4 = true, l2 = false, f3 = 15 & s3;
          for (; 7 === f3; ) {
            let i4 = e3.ioReader.getPos();
            f3 = await this.readModEx(e3, t3, 0), d3 -= Number(BigInt.asIntN(32, e3.ioReader.getPos() - i4));
          }
          let p3 = 0, m3 = 0;
          if (4 !== f3 && 5 === u3) c4 = false, r3 = true;
          else if (6 === f3) {
            l2 = true;
            const t4 = await e3.ioReader.readUint8();
            d3--, m3 = (240 & t4) >> 4, f3 = 15 & t4, 2 !== m3 && (p3 = await e3.ioReader.readUint32(), d3 -= 4);
          } else p3 = await e3.ioReader.readUint32(), d3 -= 4;
          let g3 = t3;
          for (; c4; ) {
            let s4 = d3, c5 = 0;
            l2 && (2 === m3 && (p3 = await e3.ioReader.readUint32(), d3 -= 4), c5 = await e3.ioReader.readUint8(), d3--, 0 !== m3 ? (s4 = await e3.ioReader.readUint24(), d3 -= 3) : s4 = d3);
            let v3 = this.findStream(e3, 0, c5);
            if (v3 || (v3 = this.createStream(e3, 0, g3, c5), p3 === (0, T.A)("avc1") ? v3.codecpar.codecId = 27 : p3 === (0, T.A)("hvc1") ? v3.codecpar.codecId = 173 : p3 === (0, T.A)("vvc1") ? v3.codecpar.codecId = 196 : p3 === (0, T.A)("av01") ? v3.codecpar.codecId = 225 : p3 === (0, T.A)("vp09") ? v3.codecpar.codecId = 167 : p3 === (0, T.A)("vp08") && (v3.codecpar.codecId = 139)), o.M[15](g3 + 32, v3.index), d3 -= s4, 4 === f3) {
              const t4 = e3.ioReader.getPos() + BigInt(Math.floor(s4)), i4 = await U.$x(e3.ioReader, t4), a3 = await U.$x(e3.ioReader, t4);
              "colorInfo" === i4 ? this.parseColorInfo(v3, g3, a3) : h.R8("unknown metadata key ".concat(i4), L, 768), e3.ioReader.getPos() < t4 && await e3.ioReader.seek(t4), r3 = true, s4 = 0;
            } else if (0 === f3) s4 ? (await this.readCodecConfigurationRecord(e3, v3, g3, s4), s4 = 0, r3 = false, (0, S.fQ)(t3, 1) || (r3 = true)) : r3 = true;
            else if (2 === f3) o.M[15](g3 + 36, 32 | n.f[15](g3 + 36)), r3 = false;
            else if (5 === f3) 225 === v3.codecpar.codecId ? (await this.readCodecConfigurationRecord(e3, v3, g3, s4 - 2), r3 = false, s4 = 0, (0, S.fQ)(t3, 1) || (r3 = true)) : r3 = true;
            else if (1 === f3 || 3 === f3) {
              if (1 === f3 && (173 === v3.codecpar.codecId || 196 === v3.codecpar.codecId || 27 === v3.codecpar.codecId)) {
                const i4 = await e3.ioReader.readInt24();
                o.M[17](g3 + 8, n.f[17](g3 + 16) + (this.options.useNanoTimestamp ? (0, M.FP)(BigInt(0 | i4), B.i0, t3 + 72) : BigInt(0 | i4))), s4 -= 3;
              }
              await this.readAVPacketData(e3, v3, g3, s4), s4 = 0, r3 = false;
            } else h.R8("invalid videoPacketType ".concat(f3), L, 827);
            if (s4 && await e3.ioReader.skip(s4), r3 || g3 === t3 || e3.interval.packetBuffer.push(g3), !l2 || 0 === m3 || !d3) break;
            g3 = (0, S._5)(), o.M[17](g3 + 56, i3), (0, a2.Mr)(g3 + 72, t3 + 72, 8), o.M[17](g3 + 16, n.f[17](t3 + 16)), o.M[17](g3 + 8, n.f[17](t3 + 8)), 1 === u3 && o.M[15](g3 + 36, 1 | n.f[15](g3 + 36));
          }
        } else if (5 !== u3) {
          let i4 = this.findStream(e3, 0, 0);
          var m2;
          if (i4 || (i4 = this.createStream(e3, 0, t3, 0), i4.disposition |= 1, i4.codecpar.codecId = null !== (m2 = l.U5[15 & s3]) && void 0 !== m2 ? m2 : 0), o.M[15](t3 + 32, i4.index), 27 === i4.codecpar.codecId || 173 === i4.codecpar.codecId || 196 === i4.codecpar.codecId || 12 === i4.codecpar.codecId) {
            const a3 = await e3.ioReader.readUint8(), s4 = await e3.ioReader.readInt24();
            d3 -= 4, o.M[17](t3 + 8, n.f[17](t3 + 16) + (this.options.useNanoTimestamp ? (0, M.FP)(BigInt(0 | s4), B.i0, t3 + 72) : BigInt(0 | s4))), 0 === a3 ? (await this.readCodecConfigurationRecord(e3, i4, t3, d3), (0, S.fQ)(t3, 1) || (r3 = true)) : 2 === a3 ? o.M[15](t3 + 36, 32 | n.f[15](t3 + 36)) : await this.readAVPacketData(e3, i4, t3, d3);
          } else await this.readAVPacketData(e3, i4, t3, d3);
          d3 = 0;
        } else r3 = true;
      } else {
        if (18 === c2) {
          let i4 = await this.script.read(e3.ioReader, d3);
          return i4 < 0 ? i4 : await this.readAVPacket_(e3, t3);
        }
        if (15 !== c2) return h.R8("invalid tag type: ".concat(c2, ", try to sync to next tag"), L, 913), await this.syncTag(e3), this.readAVPacket_(e3, t3);
        h.R8("not support script tag encoded by amf3, ignore it", L, 910);
      }
      d3 && await e3.ioReader.skip(d3);
      const g2 = e3.ioReader.getPos() - i3, v2 = BigInt(Math.floor(await e3.ioReader.readUint32()));
      return g2 !== v2 ? (h.R8("tag ".concat(c2, " size not match, size: ").concat(g2, ", previousTagSize: ").concat(v2), L, 926), x.LR) : r3 ? this.readAVPacket_(e3, t3) : 0;
    }
    async readAVPacket(e3, t3) {
      try {
        return o.M[15](t3 + 76, this.options.useNanoTimestamp ? B.H3 : B.qs), o.M[15](t3 + 72, 1), await this.readAVPacket_(e3, t3);
      } catch (t4) {
        return -1048576 !== e3.ioReader.error && -1048572 !== e3.ioReader.error ? (h.z3("read packet error, ".concat(t4), L, 946), x.LR) : e3.ioReader.error;
      }
    }
    async syncTag(e3) {
      let t3 = B.Dh;
      for (; ; ) try {
        if (8 & e3.ioReader.flags) break;
        const i3 = await e3.ioReader.readUint8();
        if (8 === i3 || 9 === i3) {
          t3 = e3.ioReader.getPos() - BigInt(1);
          const i4 = await e3.ioReader.readUint24();
          if (i4 > 10485760) {
            await e3.ioReader.seek(t3 + BigInt(1));
            continue;
          }
          if (await e3.ioReader.skip(4), 0 !== await e3.ioReader.readUint24()) {
            await e3.ioReader.seek(t3 + BigInt(1));
            continue;
          }
          await e3.ioReader.skip(i4);
          if (e3.ioReader.getPos() - t3 !== BigInt(Math.floor(await e3.ioReader.readUint32()))) {
            await e3.ioReader.seek(t3 + BigInt(1)), t3 = B.Dh;
            continue;
          }
          {
            let i5 = 0;
            for (; i5 <= 3; ) {
              const t4 = e3.ioReader.getPos(), r3 = await e3.ioReader.readUint8();
              if (8 !== r3 && 9 !== r3 && 18 !== r3) break;
              {
                const r4 = await e3.ioReader.readUint24();
                await e3.ioReader.skip(7 + r4);
                if (e3.ioReader.getPos() - t4 !== BigInt(Math.floor(await e3.ioReader.readUint32()))) break;
                i5++;
              }
            }
            if (!(i5 < 3)) break;
            await e3.ioReader.seek(t3 + BigInt(1)), t3 = B.Dh;
          }
        }
      } catch (e4) {
        break;
      }
      t3 !== B.Dh && await e3.ioReader.seek(t3);
    }
    async seek(e3, t3, i3, r3) {
      const a3 = e3.ioReader.getPos();
      if (2 & r3) return await e3.ioReader.seek(i3), 4 & r3 || await this.syncTag(e3), a3;
      if (t3 && t3.sampleIndexes.length) {
        let r4 = R.El(t3.sampleIndexes, (e4) => e4.pts > i3 ? -1 : 1);
        if (r4 > 0 && (0, M.k)(i3 - t3.sampleIndexes[r4 - 1].pts, t3.timeBase, B.i0) < BigInt(1e4)) return h.Yz("seek in sampleIndexes, found index: ".concat(r4, ", pts: ").concat(t3.sampleIndexes[r4 - 1].pts, ", pos: ").concat(t3.sampleIndexes[r4 - 1].pos), L, 1053), await e3.ioReader.seek(t3.sampleIndexes[r4 - 1].pos), a3;
      }
      if (this.script.canSeek()) {
        const { pos: r4, dts: s3 } = this.script.dts2Position(Number((0, M.k)(i3, t3.timeBase, B.i0) / BigInt(1e3)));
        if (r4 > 0) {
          h.Yz("seek in filepositions, found pts: ".concat(s3, ", pos: ").concat(r4), L, 1062), await e3.ioReader.seek(BigInt(Math.floor(r4)));
          const t4 = await e3.ioReader.peekUint8();
          return 8 !== t4 && 9 !== t4 && 18 !== t4 && await this.syncTag(e3), a3;
        }
      }
      return h.Yz("not found any keyframe index, try to seek in bytes", L, 1072), (0, _.A)(e3, t3, i3, this.firstTagPos, this.readAVPacket.bind(this), this.syncTag.bind(this));
    }
    getAnalyzeStreamsCount() {
      let e3 = 0;
      return (this.header.hasAudio || (0, C.A)(this.script.onMetaData.audiocodecid)) && e3++, (this.header.hasVideo || (0, C.A)(this.script.onMetaData.videocodecid)) && e3++, e3;
    }
  }
}, 85947: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(134);
  class a2 {
    constructor() {
      (0, r2.A)(this, "type", -1), (0, r2.A)(this, "onStreamAdd", void 0);
    }
    async destroy(e3) {
    }
  }
}, 5299: (e2, t2, i2) => {
  i2.d(t2, { A: () => y });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(9705), o = i2(85947), c = i2(14686), d2 = i2(37837), h = i2(71517), l = i2(95335), u = i2(92647), f = i2(62815), p = i2(77231), m = i2(37246), g = i2(23991), v = i2(37805);
  const A = { framerate: { num: 30, den: 1 } };
  class y extends o.A {
    constructor(e3 = {}) {
      super(), (0, r2.A)(this, "type", 11), (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "currentDts", void 0), (0, r2.A)(this, "currentPts", void 0), (0, r2.A)(this, "step", void 0), (0, r2.A)(this, "slices", void 0), (0, r2.A)(this, "naluPos", void 0), (0, r2.A)(this, "queue", void 0), (0, r2.A)(this, "bitReader", void 0), (0, r2.A)(this, "sliceType", void 0), (0, r2.A)(this, "poc", void 0), (0, r2.A)(this, "picOrderCntMsb", void 0), (0, r2.A)(this, "lastPicOrderCntLsb", void 0), (0, r2.A)(this, "frameNumberOffset", void 0), (0, r2.A)(this, "prevFrameNumber", void 0), (0, r2.A)(this, "sps", void 0), (0, r2.A)(this, "naluReader", void 0), this.options = l.X$({}, A, e3);
    }
    init(e3) {
      e3.ioReader && e3.ioReader.setEndian(false), this.slices = [], this.queue = [], this.bitReader = new m.A(50), this.naluReader = new v.A();
    }
    async destroy(e3) {
      if (this.queue.length) {
        for (let e4 = 0; e4 < this.queue.length; e4++) (0, h.Qe)(this.queue[e4].avpacket);
        this.queue.length = 0;
      }
    }
    isFrameNalu(e3) {
      const t3 = 31 & e3[1 === e3[2] ? 3 : 4];
      return 1 === t3 || 5 === t3 || 2 === t3 || 3 === t3 || 4 === t3;
    }
    async readNaluFrame(e3) {
      let t3 = false;
      const i3 = this.slices;
      for (this.slices = [], i3.length && (t3 = this.isFrameNalu(i3[0])); ; ) {
        const r3 = await this.naluReader.read(e3.ioReader);
        if (!r3) return i3;
        const a3 = 31 & r3[1 === r3[2] ? 3 : 4];
        if (this.isFrameNalu(r3)) if (t3) {
          if (this.bitReader.reset(), this.bitReader.appendBuffer(r3.subarray(1 === r3[2] ? 4 : 5, 10)), 0 === g.xb(this.bitReader)) return this.slices.push(r3), i3;
          i3.push(r3);
        } else i3.push(r3), t3 = true;
        else {
          if (t3 && (9 === a3 || 7 === a3 || 8 === a3)) return this.slices.push(r3), i3;
          i3.push(r3);
        }
      }
    }
    async readHeader(e3) {
      const t3 = e3.createStream();
      for (t3.codecpar.codecType = 0, t3.codecpar.codecId = 27, t3.timeBase.den = p.SF, t3.timeBase.num = 1, t3.codecpar.flags |= 1, this.currentDts = BigInt(0), this.currentPts = BigInt(0), this.naluPos = BigInt(0), this.poc = BigInt(0), this.picOrderCntMsb = BigInt(0), this.lastPicOrderCntLsb = 0, this.frameNumberOffset = BigInt(0), this.prevFrameNumber = 0, this.step = BigInt(Math.floor(p.SF / this.options.framerate.num * this.options.framerate.den)); ; ) {
        const i3 = await this.readNaluFrame(e3);
        if (!i3.length) return -1048576;
        const r3 = (0, u.A)(Uint8Array, i3);
        let n2 = f.sL(r3);
        if (n2) {
          t3.codecpar.extradata = (0, d2.sY)(n2.length), (0, c.lW)(t3.codecpar.extradata, n2.length, n2), t3.codecpar.extradataSize = n2.length, f.XC(t3, n2);
          const o2 = i3.find((e4) => 7 == (31 & e4[1 === e4[2] ? 3 : 4]));
          this.sps = f.wf(o2);
          const l2 = (0, h._5)(), u2 = (0, d2.sY)(r3.length);
          (0, c.lW)(u2, r3.length, r3), (0, h.NX)(l2, u2, r3.length), s2.M[17](l2 + 56, this.naluPos), this.naluPos += BigInt(Math.floor(r3.length)), s2.M[17](l2 + 16, this.currentDts), this.currentDts += this.step, s2.M[17](l2 + 8, this.currentPts), this.currentPts += this.step, s2.M[15](l2 + 32, t3.index), s2.M[15](l2 + 36, 1 | a2.f[15](l2 + 36)), s2.M[15](l2 + 72, t3.timeBase.num), s2.M[15](l2 + 76, t3.timeBase.den), s2.M[15](l2 + 36, 64 | a2.f[15](l2 + 36)), e3.interval.packetBuffer.push(l2);
          break;
        }
        this.naluPos += BigInt(Math.floor(r3.length));
      }
      return 0;
    }
    async readAVPacket_(e3, t3) {
      const i3 = e3.getStreamByMediaType(0), r3 = await this.readNaluFrame(e3);
      if (!r3.length) return -1048576;
      this.sliceType = -1;
      let n2 = false, o2 = true;
      r3.forEach((e4) => {
        const t4 = 1 === e4[2] ? e4[3] : e4[4], i4 = 31 & t4, r4 = t4 >>> 5 & 3;
        if (7 === i4 && (this.sps = f.wf(e4)), 5 === i4 && (n2 = true), (1 === i4 || 2 === i4 || 3 === i4 || 4 === i4 || 5 === i4) && o2) {
          o2 = false, this.bitReader.reset(), this.bitReader.appendBuffer(e4.subarray(1 === e4[2] ? 4 : 5, 50)), g.xb(this.bitReader), this.sliceType = g.xb(this.bitReader), g.xb(this.bitReader);
          const t5 = this.bitReader.readU(this.sps.log2MaxFrameNumMinus4 + 4);
          let a3 = 0, s3 = 0;
          if (this.sps.frameMbsOnlyFlag || (a3 = this.bitReader.readU1()), a3 && (s3 = this.bitReader.readU1()), 5 === i4 && g.xb(this.bitReader), 0 === this.sps.picOrderCntType) {
            const e5 = this.bitReader.readU(this.sps.log2MaxPicOrderCntLsbMinus4 + 4), t6 = (1 << this.sps.log2MaxPicOrderCntLsbMinus4 + 4) - 1;
            Math.abs(e5 - this.lastPicOrderCntLsb) > t6 >>> 1 && (this.picOrderCntMsb += BigInt(Math.floor(t6))), this.poc = this.picOrderCntMsb + BigInt(Math.floor(e5)), this.lastPicOrderCntLsb = e5;
          } else if (1 === this.sps.picOrderCntType) {
            const e5 = [0, 0];
            if (this.sps.deltaPicOrderAlwaysZeroFlag || (e5[0] = g.$x(this.bitReader), s3 && (e5[1] = g.$x(this.bitReader))), t5 < this.prevFrameNumber) {
              const e6 = (1 << this.sps.log2MaxFrameNumMinus4 + 4) - 1;
              this.frameNumberOffset += BigInt(Math.floor(e6));
            }
            let i5 = this.frameNumberOffset + BigInt(Math.floor(t5));
            0 === r4 && i5 > 0 && i5--, this.poc = BigInt(2) * i5 + BigInt(0 | e5[0]), a3 && s3 && (this.poc += BigInt(0 | e5[1])), this.prevFrameNumber = t5;
          } else this.poc++;
        }
      });
      const l2 = (0, u.A)(Uint8Array, r3), p2 = (0, d2.sY)(l2.length);
      return (0, c.lW)(p2, l2.length, l2), (0, h.NX)(t3, p2, l2.length), s2.M[17](t3 + 56, this.naluPos), this.naluPos += BigInt(Math.floor(l2.length)), s2.M[17](t3 + 16, this.currentDts), this.currentDts += this.step, s2.M[15](t3 + 32, i3.index), s2.M[15](t3 + 72, i3.timeBase.num), s2.M[15](t3 + 76, i3.timeBase.den), s2.M[15](t3 + 36, 64 | a2.f[15](t3 + 36)), n2 && s2.M[15](t3 + 36, 1 | a2.f[15](t3 + 36)), 0;
    }
    async readAVPacket(e3, t3) {
      let i3 = this.queue.length;
      const r3 = () => {
        this.queue.length > 1 && this.queue.sort((e4, t4) => e4.poc - t4.poc > BigInt(0) ? 1 : -1);
        for (let e4 = 0; e4 < this.queue.length; e4++) s2.M[17](this.queue[e4].avpacket + 8, this.currentPts), this.currentPts += this.step;
        this.queue.length > 1 && this.queue.sort((e4, t4) => a2.f[17](e4.avpacket + 16) - a2.f[17](t4.avpacket + 16) > BigInt(0) ? 1 : -1), this.queue.length && ((0, h.rN)(t3, this.queue[0].avpacket), (0, h.Qe)(this.queue[0].avpacket));
        for (let t4 = 1; t4 < this.queue.length; t4++) e3.interval.packetBuffer.push(this.queue[t4].avpacket);
        this.queue.length = 0;
      };
      for (; ; ) {
        const t4 = (0, h._5)();
        let s3 = await this.readAVPacket_(e3, t4);
        if (s3 < 0) return (0, h.Qe)(t4), this.queue.length ? (r3(), 0) : s3;
        if (1 & a2.f[15](t4 + 36) || 0 === this.sliceType || 2 === this.sliceType || 5 === this.sliceType || 7 === this.sliceType) {
          if (1 === i3 || 1 & a2.f[15](t4 + 36) && this.queue.length) return r3(), this.queue.push({ avpacket: t4, poc: this.poc }), 0;
          this.queue.push({ avpacket: t4, poc: this.poc }), i3++;
        } else this.queue.push({ avpacket: t4, poc: this.poc });
      }
    }
    async seek(e3, t3, i3, r3) {
      const a3 = e3.ioReader.getPos();
      return 2 & r3 ? (await e3.ioReader.seek(i3), a3) : BigInt(n.E$);
    }
    getAnalyzeStreamsCount() {
      return 1;
    }
  }
}, 85487: (e2, t2, i2) => {
  i2.d(t2, { A: () => y });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(9705), o = i2(85947), c = i2(14686), d2 = i2(37837), h = i2(71517), l = i2(95335), u = i2(92647), f = i2(67659), p = i2(77231), m = i2(37246), g = i2(23991), v = i2(37805);
  const A = { framerate: { num: 30, den: 1 } };
  class y extends o.A {
    constructor(e3 = {}) {
      super(), (0, r2.A)(this, "type", 12), (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "currentDts", void 0), (0, r2.A)(this, "currentPts", void 0), (0, r2.A)(this, "step", void 0), (0, r2.A)(this, "slices", void 0), (0, r2.A)(this, "naluPos", void 0), (0, r2.A)(this, "queue", void 0), (0, r2.A)(this, "bitReader", void 0), (0, r2.A)(this, "sliceType", void 0), (0, r2.A)(this, "poc", void 0), (0, r2.A)(this, "pocTid0", void 0), (0, r2.A)(this, "sps", void 0), (0, r2.A)(this, "pps", void 0), (0, r2.A)(this, "naluReader", void 0), this.options = l.X$({}, A, e3);
    }
    init(e3) {
      e3.ioReader && e3.ioReader.setEndian(false), this.slices = [], this.queue = [], this.bitReader = new m.A(50), this.naluReader = new v.A();
    }
    async destroy(e3) {
      if (this.queue.length) {
        for (let e4 = 0; e4 < this.queue.length; e4++) (0, h.Qe)(this.queue[e4].avpacket);
        this.queue.length = 0;
      }
    }
    isFrameNalu(e3) {
      return (e3[1 === e3[2] ? 3 : 4] >>> 1 & 63) < 32;
    }
    async readNaluFrame(e3) {
      let t3 = false;
      const i3 = this.slices;
      for (this.slices = [], i3.length && (t3 = this.isFrameNalu(i3[0])); ; ) {
        const r3 = await this.naluReader.read(e3.ioReader);
        if (!r3) return i3;
        const a3 = r3[1 === r3[2] ? 3 : 4] >>> 1 & 63;
        if (this.isFrameNalu(r3)) if (t3) {
          if (r3[1 === r3[2] ? 5 : 6] >>> 7) return this.slices.push(r3), i3;
          i3.push(r3);
        } else i3.push(r3), t3 = true;
        else {
          if (t3 && (35 === a3 || 33 === a3 || 34 === a3 || 32 === a3)) return this.slices.push(r3), i3;
          i3.push(r3);
        }
      }
    }
    async readHeader(e3) {
      const t3 = e3.createStream();
      for (t3.codecpar.codecType = 0, t3.codecpar.codecId = 173, t3.timeBase.den = p.SF, t3.timeBase.num = 1, t3.codecpar.flags |= 1, this.currentDts = BigInt(0), this.currentPts = BigInt(0), this.naluPos = BigInt(0), this.poc = 0, this.pocTid0 = 0, this.step = BigInt(Math.floor(p.SF / this.options.framerate.num * this.options.framerate.den)); ; ) {
        const i3 = await this.readNaluFrame(e3);
        if (!i3.length) return -1048576;
        const r3 = (0, u.A)(Uint8Array, i3), n2 = f.sL(r3);
        if (n2) {
          t3.codecpar.extradata = (0, d2.sY)(n2.length), (0, c.lW)(t3.codecpar.extradata, n2.length, n2), t3.codecpar.extradataSize = n2.length, f.XC(t3, n2);
          const o2 = i3.find((e4) => 33 == (e4[1 === e4[2] ? 3 : 4] >>> 1 & 63)), l2 = i3.find((e4) => 34 == (e4[1 === e4[2] ? 3 : 4] >>> 1 & 63));
          this.sps = f.wf(o2), this.pps = f.ZU(l2);
          const u2 = (0, h._5)(), p2 = (0, d2.sY)(r3.length);
          (0, c.lW)(p2, r3.length, r3), (0, h.NX)(u2, p2, r3.length), s2.M[17](u2 + 56, this.naluPos), this.naluPos += BigInt(Math.floor(r3.length)), s2.M[17](u2 + 16, this.currentDts), this.currentDts += this.step, s2.M[17](u2 + 8, this.currentPts), this.currentPts += this.step, s2.M[15](u2 + 32, t3.index), s2.M[15](u2 + 36, 1 | a2.f[15](u2 + 36)), s2.M[15](u2 + 72, t3.timeBase.num), s2.M[15](u2 + 76, t3.timeBase.den), s2.M[15](u2 + 36, 64 | a2.f[15](u2 + 36)), e3.interval.packetBuffer.push(u2);
          break;
        }
        this.naluPos += BigInt(Math.floor(r3.length));
      }
      return 0;
    }
    async readAVPacket_(e3, t3) {
      const i3 = e3.getStreamByMediaType(0), r3 = await this.readNaluFrame(e3);
      if (!r3.length) return -1048576;
      this.sliceType = -1;
      let n2 = false, o2 = true;
      r3.forEach((e4) => {
        const t4 = (1 === e4[2] ? e4[3] : e4[4]) >>> 1 & 63, i4 = 7 & (1 === e4[2] ? e4[4] : e4[5]);
        if (33 === t4 && (this.sps = f.wf(e4)), 34 === t4 && (this.pps = f.ZU(e4)), 19 !== t4 && 20 !== t4 || (n2 = true), t4 < 32 && o2) {
          o2 = false, this.bitReader.reset(), this.bitReader.appendBuffer(e4.subarray(1 === e4[2] ? 5 : 6, 50));
          const r4 = this.bitReader.readU1();
          if (t4 >= 16 && t4 <= 23 && (n2 = true, this.bitReader.readU1()), g.xb(this.bitReader), !r4) {
            this.pps.dependent_slice_segment_flag && this.bitReader.readU1();
            const e5 = Math.ceil(Math.log2(this.sps.ctb_width * this.sps.ctb_height));
            this.bitReader.readU(e5);
          }
          for (let e5 = 0; e5 < this.pps.num_extra_slice_header_bits; e5++) this.bitReader.readU1();
          if (this.sliceType = g.xb(this.bitReader), this.pps.output_flag_present_flag && this.bitReader.readU1(), this.sps.separate_colour_plane_flag && this.bitReader.readU(2), 19 === t4 || 20 === t4) this.poc = 0;
          else {
            const e5 = this.bitReader.readU(this.sps.log2_max_poc_lsb);
            let i5 = 1 << this.sps.log2_max_poc_lsb, r5 = this.pocTid0 % i5, a3 = this.pocTid0 - r5, s3 = 0;
            s3 = e5 < r5 && r5 - e5 >= i5 / 2 ? a3 + i5 : e5 > r5 && e5 - r5 > i5 / 2 ? a3 - i5 : a3, 16 != t4 && 17 != t4 && 18 != t4 || (s3 = 0), this.poc = s3 + e5;
          }
          0 == i4 && 0 != t4 && 2 != t4 && 4 != t4 && 6 != t4 && 8 != t4 && 7 != t4 && 9 != t4 && (this.pocTid0 = this.poc);
        }
      });
      const l2 = (0, u.A)(Uint8Array, r3), p2 = (0, d2.sY)(l2.length);
      return (0, c.lW)(p2, l2.length, l2), (0, h.NX)(t3, p2, l2.length), s2.M[17](t3 + 56, this.naluPos), this.naluPos += BigInt(Math.floor(l2.length)), s2.M[17](t3 + 16, this.currentDts), this.currentDts += this.step, s2.M[15](t3 + 32, i3.index), s2.M[15](t3 + 72, i3.timeBase.num), s2.M[15](t3 + 76, i3.timeBase.den), s2.M[15](t3 + 36, 64 | a2.f[15](t3 + 36)), n2 && s2.M[15](t3 + 36, 1 | a2.f[15](t3 + 36)), 0;
    }
    async readAVPacket(e3, t3) {
      let i3 = this.queue.length;
      const r3 = () => {
        this.queue.length > 1 && this.queue.sort((e4, t4) => e4.poc - t4.poc > 0 ? 1 : -1);
        for (let e4 = 0; e4 < this.queue.length; e4++) s2.M[17](this.queue[e4].avpacket + 8, this.currentPts), this.currentPts += this.step;
        this.queue.length > 1 && this.queue.sort((e4, t4) => a2.f[17](e4.avpacket + 16) - a2.f[17](t4.avpacket + 16) > BigInt(0) ? 1 : -1), this.queue.length && ((0, h.rN)(t3, this.queue[0].avpacket), (0, h.Qe)(this.queue[0].avpacket));
        for (let t4 = 1; t4 < this.queue.length; t4++) e3.interval.packetBuffer.push(this.queue[t4].avpacket);
        this.queue.length = 0;
      };
      for (; ; ) {
        const t4 = (0, h._5)();
        let s3 = await this.readAVPacket_(e3, t4);
        if (s3 < 0) return (0, h.Qe)(t4), this.queue.length ? (r3(), 0) : s3;
        if (1 & a2.f[15](t4 + 36) || 1 === this.sliceType || 2 === this.sliceType) {
          if (1 === i3 || 1 & a2.f[15](t4 + 36) && this.queue.length) return r3(), this.queue.push({ avpacket: t4, poc: this.poc }), 0;
          this.queue.push({ avpacket: t4, poc: this.poc }), i3++;
        } else this.queue.push({ avpacket: t4, poc: this.poc });
      }
    }
    async seek(e3, t3, i3, r3) {
      const a3 = e3.ioReader.getPos();
      return 2 & r3 ? (await e3.ioReader.seek(i3), a3) : BigInt(n.E$);
    }
    getAnalyzeStreamsCount() {
      return 1;
    }
  }
}, 16634: (e2, t2, i2) => {
  i2.d(t2, { A: () => g });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(4624), o = i2(9705), c = i2(85947), d2 = i2(14686), h = i2(37837), l = i2(71517), u = i2(77231);
  const f = "src/avformat/formats/IIvfFormat.ts", p = { VP80: 139, VP90: 167 };
  class m {
    constructor() {
      (0, r2.A)(this, "version", void 0), (0, r2.A)(this, "length", void 0), (0, r2.A)(this, "codec", void 0), (0, r2.A)(this, "width", void 0), (0, r2.A)(this, "height", void 0), (0, r2.A)(this, "denominator", void 0), (0, r2.A)(this, "numerator", void 0), (0, r2.A)(this, "framesCount", void 0), this.version = 0, this.length = 32, this.codec = "VP80", this.width = 0, this.height = 0, this.framesCount = 0, this.denominator = 1, this.numerator = 0;
    }
  }
  class g extends c.A {
    constructor() {
      super(), (0, r2.A)(this, "type", 5), (0, r2.A)(this, "header", void 0), this.header = new m();
    }
    init(e3) {
      e3.ioReader && e3.ioReader.setEndian(false);
    }
    async readHeader(e3) {
      try {
        if ("DKIF" !== await e3.ioReader.readString(4)) return n.z3("the file format is not ivf", f, 105), o.LR;
        this.header.version = await e3.ioReader.readUint16(), await e3.ioReader.skip(2), this.header.codec = await e3.ioReader.readString(4), this.header.width = await e3.ioReader.readUint16(), this.header.height = await e3.ioReader.readUint16(), this.header.denominator = await e3.ioReader.readUint32(), this.header.numerator = await e3.ioReader.readUint32(), this.header.framesCount = await e3.ioReader.readUint32(), await e3.ioReader.skip(4);
        const t3 = e3.createStream();
        return t3.codecpar.codecType = 0, t3.codecpar.codecId = p[this.header.codec], t3.timeBase.den = this.header.denominator, t3.timeBase.num = this.header.numerator, t3.codecpar.width = this.header.width, t3.codecpar.height = this.header.height, t3.nbFrames = BigInt(Math.floor(this.header.framesCount)), this.onStreamAdd && this.onStreamAdd(t3), 0;
      } catch (t3) {
        return n.z3(t3.message, f, 137), e3.ioReader.error;
      }
    }
    async readAVPacket(e3, t3) {
      try {
        const i3 = e3.getStreamByMediaType(0);
        if (!i3) return o.LR;
        {
          const r3 = e3.ioReader.getPos(), n2 = await e3.ioReader.readUint32(), o2 = await e3.ioReader.readUint64(), c2 = (0, h.sY)(n2);
          (0, l.NX)(t3, c2, n2), await e3.ioReader.readBuffer(n2, (0, d2.JW)(c2, n2)), s2.M[17](t3 + 56, r3), s2.M[17](t3 + 8, o2), s2.M[17](t3 + 16, o2), s2.M[15](t3 + 76, this.header.denominator), s2.M[15](t3 + 72, this.header.numerator), s2.M[15](t3 + 32, i3.index), i3.startTime === u.Dh && (i3.startTime = a2.f[17](t3 + 8) || a2.f[17](t3 + 16));
        }
        return 0;
      } catch (t4) {
        return -1048576 !== e3.ioReader.error && -1048572 !== e3.ioReader.error ? (n.z3("read packet error, ".concat(t4), f, 176), o.LR) : e3.ioReader.error;
      }
    }
    async seek(e3, t3, i3, r3) {
      const a3 = e3.ioReader.getPos();
      return 2 & r3 ? (await e3.ioReader.seek(i3), a3) : BigInt(o.E$);
    }
    getAnalyzeStreamsCount() {
      return 1;
    }
  }
}, 34577: (e2, t2, i2) => {
  i2.d(t2, { A: () => H });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(97860), o = i2.n(n), c = i2(14686), d2 = i2(61499), h = i2(63939), l = i2(50932), u = (i2(9599), i2(4624)), f = i2(9705), p = i2(85947), m = i2(37837), g = i2(71517), v = i2(77231), A = i2(31866), y = i2(33919), w = i2(72739), b = i2(62815), k = i2(67659), x = i2(59166), I = i2(97077), P = i2(82014), S = i2(21477), T = i2(64093), M = i2(22576), B = i2(95832), R = i2(14769), _ = i2(44328), C = i2(31865), U = i2(93082), D = i2(5783), E = i2(82774), L = i2(67672), z = i2(95335), $ = i2(53260), F = i2(13663), N = i2(92647), V = i2(50011), O = i2(34677), q = i2(60264);
  const W = "src/avformat/formats/IMatroskaFormat.ts";
  class H extends p.A {
    constructor() {
      super(), (0, r2.A)(this, "type", 8), (0, r2.A)(this, "context", void 0), (0, r2.A)(this, "blockReader", void 0);
    }
    init(e3) {
      e3.ioReader && e3.ioReader.setEndian(true);
      const t3 = { isLive: true, firstCluster: -BigInt(1), segmentStart: -BigInt(1), header: { version: 0, readVersion: 0, maxIdLength: 4, maxSizeLength: 8, docType: "", docTypeVersion: 0, docTypeReadVersion: 0 }, seekHead: null, info: null, tracks: null, attachments: null, chapters: null, cues: null, tags: null, maxPts: v.Dh, currentCluster: { timeCode: BigInt(0), pos: -BigInt(1), block: { pos: -BigInt(1), size: -BigInt(1) }, blockGroup: { block: null } }, clusterIndexes: [], clusterIndexesPosMap: new (s2())() };
      e3.privateData = this.context = t3;
    }
    analyzeStreams(e3) {
      const t3 = "webm" === this.context.header.docType ? A.N : A.e;
      this.context.tracks && w.__(this.context.tracks.entry, (i3) => {
        var r3, a3, s3;
        const n2 = e3.createStream();
        switch (n2.privData = i3, n2.codecpar.codecId = t3[i3.codecId] || 0, i3.type) {
          case 2:
            n2.codecpar.codecType = 1;
            break;
          case 1:
            n2.codecpar.codecType = 0, n2.codecpar.flags |= 4;
            break;
          case 17:
            n2.codecpar.codecType = 3;
            break;
          default:
            n2.codecpar.codecType = -1;
        }
        i3.language && (n2.metadata.language = i3.language), i3.name && (n2.metadata.title = i3.name), i3.audio ? ("A_PCM/FLOAT/IEEE" === i3.codecName ? 64 === i3.audio.bitDepth ? n2.codecpar.codecId = 65559 : 32 === i3.audio.bitDepth && (n2.codecpar.codecId = 65557) : "A_PCM/INT/BIG" === i3.codecName ? 16 === i3.audio.bitDepth ? n2.codecpar.codecId = 65537 : 24 === i3.audio.bitDepth ? n2.codecpar.codecId = 65549 : 32 === i3.audio.bitDepth && (n2.codecpar.codecId = 65545) : "A_PCM/INT/LIT" === i3.codecName && (8 === i3.audio.bitDepth ? n2.codecpar.codecId = 65541 : 16 === i3.audio.bitDepth ? n2.codecpar.codecId = 65536 : 24 === i3.audio.bitDepth ? n2.codecpar.codecId = 65548 : 32 === i3.audio.bitDepth && (n2.codecpar.codecId = 65544)), n2.codecpar.chLayout.nbChannels = i3.audio.channels, n2.codecpar.sampleRate = 0 | i3.audio.sampleRate, n2.codecpar.bitsPerCodedSample = i3.audio.bitDepth) : i3.video && (n2.codecpar.width = i3.video.pixelWidth, n2.codecpar.height = i3.video.pixelHeight, i3.video.color && (L.ai(i3.video.color.primaries) && (n2.codecpar.colorPrimaries = i3.video.color.primaries), L.ai(i3.video.color.transferCharacteristics) && (n2.codecpar.colorTrc = i3.video.color.transferCharacteristics), L.ai(i3.video.color.range) && (n2.codecpar.colorRange = i3.video.color.range), L.ai(i3.video.color.matrixCoefficients) && (n2.codecpar.colorSpace = i3.video.color.matrixCoefficients)));
        let o2 = 0;
        if ("V_MS/VFW/FOURCC" === i3.codecId && (null === (r3 = i3.codecPrivate) || void 0 === r3 ? void 0 : r3.size) >= 40) n2.codecpar.bitsPerCodedSample = i3.codecPrivate.data[15] << 8 | i3.codecPrivate.data[14], n2.codecpar.codecTag = i3.codecPrivate.data[19] << 24 | i3.codecPrivate.data[18] << 16 | i3.codecPrivate.data[17] << 8 | i3.codecPrivate.data[16], n2.codecpar.codecId = $.nz[n2.codecpar.codecTag] || 0, 0 === n2.codecpar.codecId && (n2.codecpar.codecId, F.h6[n2.codecpar.codecTag]), o2 = 40;
        else if ("V_QUICKTIME" === i3.codecId && (null === (a3 = i3.codecPrivate) || void 0 === a3 ? void 0 : a3.size) >= 21) {
          const e4 = 1 === n2.codecpar.codecType ? F.uM : F.h6;
          n2.codecpar.codecTag = i3.codecPrivate.data[3] << 24 | i3.codecPrivate.data[2] << 16 | i3.codecPrivate.data[1] << 8 | i3.codecPrivate.data[0];
          const t4 = e4[n2.codecpar.codecTag];
          if (t4) {
            const e5 = new Uint8Array(4), t5 = Number(BigInt.asIntN(32, i3.codecPrivate.size));
            e5[0] = t5 >>> 24 & 255, e5[1] = t5 >>> 16 & 255, e5[2] = t5 >>> 8 & 255, e5[3] = 255 & t5, i3.codecPrivate.size += BigInt(4), i3.codecPrivate.data = (0, N.A)(Uint8Array, [e5, i3.codecPrivate.data]);
          }
          n2.codecpar.codecId = t4 || 0;
        }
        if (null !== (s3 = i3.codecPrivate) && void 0 !== s3 && s3.data && i3.codecPrivate.size - BigInt(Math.floor(o2)) > 0) {
          let e4 = i3.codecPrivate.data.subarray(o2);
          if (94212 === n2.codecpar.codecId || 94230 === n2.codecpar.codecId) {
            let t4, i4 = V.decode(e4).split(/\r?\n/);
            for (let e5 = 0; e5 < i4.length; e5++) if ("[Events]" === i4[e5].trim()) {
              i4[e5 + 1] && /^Format:/.test(i4[e5 + 1]) && (t4 = i4[e5 + 1]), i4 = i4.slice(0, e5);
              break;
            }
            t4 && (t4 = t4.replace(/^Format:/, ""), t4 = t4.split(",").map((e5) => e5.trim()).filter((e5) => "Start" !== e5 && "End" !== e5).join(", "), t4 = "Format: ReadOrder, ".concat(t4)), i4.push("[Events]"), i4.push(t4 || "Format: ReadOrder, Layer, Style, Name, MarginL, MarginR, MarginV, Effect, Text"), e4 = V.encode(i4.join("\n"));
          }
          if (n2.codecpar.extradataSize = e4.length, n2.codecpar.extradata = (0, m.sY)(e4.length), (0, c.lW)(n2.codecpar.extradata, e4.length, e4), n2.codecpar.extradata) switch (n2.codecpar.codecId) {
            case 27: {
              const e5 = (0, c.s3)(n2.codecpar.extradata, n2.codecpar.extradataSize);
              b.XC(n2, e5), q.Bs(e5) && (n2.codecpar.flags |= 1);
              break;
            }
            case 173: {
              const e5 = (0, c.s3)(n2.codecpar.extradata, n2.codecpar.extradataSize);
              k.XC(n2, e5), q.Bs(e5) && (n2.codecpar.flags |= 1);
              break;
            }
            case 196: {
              const e5 = (0, c.s3)(n2.codecpar.extradata, n2.codecpar.extradataSize);
              x.XC(n2, e5), q.Bs(e5) && (n2.codecpar.flags |= 1);
              break;
            }
            case 225:
              S.XC(n2, (0, c.s3)(n2.codecpar.extradata, n2.codecpar.extradataSize));
              break;
            case 139:
              I.XC(n2, (0, c.s3)(n2.codecpar.extradata, n2.codecpar.extradataSize));
              break;
            case 167:
              P.XC(n2, (0, c.s3)(n2.codecpar.extradata, n2.codecpar.extradataSize));
              break;
            case 86018:
              B.XC(n2, (0, c.s3)(n2.codecpar.extradata, n2.codecpar.extradataSize));
              break;
            case 86017:
              T.XC(n2, (0, c.s3)(n2.codecpar.extradata, n2.codecpar.extradataSize));
              break;
            case 86076:
              M.XC(n2, (0, c.s3)(n2.codecpar.extradata, n2.codecpar.extradataSize));
              break;
            case 86028:
              if (n2.codecpar.extradataSize > R.ob) {
                const e5 = new C.A((0, c.s3)(n2.codecpar.extradata, n2.codecpar.extradataSize));
                if ("fLaC" === e5.readString(4)) for (; e5.remainingSize(); ) {
                  const t4 = e5.readUint8(), i4 = e5.readUint24(), r4 = -129 & t4;
                  if (0 === r4) {
                    const t5 = e5.readBuffer(i4);
                    (0, m.Eb)(n2.codecpar.extradata), n2.codecpar.extradata = (0, m.sY)(t5.length), n2.codecpar.extradataSize = t5.length, (0, c.lW)(n2.codecpar.extradata, t5.length, t5);
                    break;
                  }
                  e5.skip(r4);
                }
              }
              n2.codecpar.extradataSize === R.ob && R.XC(n2, (0, c.s3)(n2.codecpar.extradata, n2.codecpar.extradataSize));
          }
          else {
            let e5;
            86018 === n2.codecpar.codecId && (e5 = B.Ij(n2.codecpar)), e5 && (n2.codecpar.extradataSize = e5.length, n2.codecpar.extradata = (0, m.sY)(n2.codecpar.extradataSize), (0, c.lW)(n2.codecpar.extradata, n2.codecpar.extradataSize, e5));
          }
        }
        this.context.info && (n2.timeBase.num = 1, this.context.info.timestampScale ? n2.timeBase.den = 1e3 * v.SF / this.context.info.timestampScale | 0 : (n2.timeBase.den = 1e3, this.context.info.timestampScale = v.SF), this.context.info.duration && (n2.duration = BigInt(Math.floor(this.context.info.duration)))), (null == i3.default || i3.default) && (n2.disposition |= 1), 94226 === n2.codecpar.codecId && ("D_WEBVTT/CAPTIONS" === i3.codecId ? n2.disposition |= 65536 : ("D_WEBVTT/DESCRIPTIONS" === i3.codecId || "D_WEBVTT/METADATA" === i3.codecId) && n2.disposition), i3.encodings && w.__(i3.encodings.entry, (e4) => {
          e4.compression && (0, O.A)(e4.compression.algo) && (i3.needDecompression = true), e4.encryption && (0, O.A)(e4.encryption.algo) && (i3.needDecryption = true);
        });
      }), this.context.attachments && w.__(this.context.attachments.entry, (t4) => {
        const i3 = e3.createStream();
        i3.codecpar.codecType = 4, i3.privData = t4, t4.data && (i3.codecpar.extradataSize = Number(BigInt.asIntN(32, t4.data.size)), i3.codecpar.extradata = (0, m.sY)(i3.codecpar.extradataSize), (0, c.lW)(i3.codecpar.extradata, i3.codecpar.extradataSize, t4.data.data));
      }), this.context.tags && w.__(this.context.tags.entry, (t4) => {
        var i3;
        if ("DURATION" === (null === (i3 = t4.tag) || void 0 === i3 ? void 0 : i3.name)) {
          let i4 = t4.tag.string.replaceAll("\0", "").split("."), r3 = i4[0].split(":"), a3 = BigInt(+r3[0]) * BigInt(36e8) + BigInt(+r3[1]) * BigInt(6e7) + BigInt(+r3[2]) * BigInt(1e6) + BigInt(+i4[1]) / BigInt(1e3);
          const s3 = (0, U.A)(e3.streams, t4.target.trackUid);
          s3 && (s3.duration = (0, _.k)(a3, v.KR, s3.timeBase));
        }
      }), this.context.chapters && w.__(this.context.chapters.entry, (t4) => {
        const i3 = t4.atom;
        i3 && w.__(i3, (t5) => {
          var i4, r3;
          e3.chapters.push({ id: t5.uid, start: t5.start, end: t5.end, timeBase: { num: 1, den: 1e9 }, metadata: { title: (null === (i4 = t5.display) || void 0 === i4 ? void 0 : i4.title) || "", language: (null === (r3 = t5.display) || void 0 === r3 ? void 0 : r3.language) || "" } });
        });
      });
    }
    async readHeader(e3) {
      if (440786851 !== await (0, y.aL)(e3, this.context.header.maxIdLength)) return u.z3("not matroska format", W, 473), f.LR;
      const t3 = await (0, y.Qb)(e3.ioReader, this.context.header.maxSizeLength);
      if (this.context.header = z.X$(this.context.header, await (0, y.Pb)(e3, t3, y.jt)), 408125543 !== await (0, y.aL)(e3, this.context.header.maxIdLength)) return u.z3("not matroska format", W, 482), f.LR;
      const i3 = await (0, y.Qb)(e3.ioReader, this.context.header.maxSizeLength);
      this.context.segmentStart = e3.ioReader.getPos();
      const r3 = e3.ioReader.getPos() + i3, a3 = new (o())();
      let s3 = false, n2 = false;
      for (; e3.ioReader.getPos() < r3 || !s3 || !n2; ) {
        const t4 = e3.ioReader.getPos(), i4 = await (0, y.aL)(e3, this.context.header.maxIdLength);
        if (i4 === f.LR) {
          await this.syncTopLevelElement(e3, 2);
          continue;
        }
        const r4 = await (0, y.Qb)(e3.ioReader, this.context.header.maxSizeLength);
        if (r4 !== BigInt(0 | f.LR)) {
          if (290298740 === i4) this.context.isLive = false, this.context.seekHead = await (0, y.Pb)(e3, r4, y.Cr);
          else if (475249515 === i4) this.context.isLive = false, this.context.cues = await (0, y.Pb)(e3, r4, y.eG);
          else if (272869232 === i4) this.context.isLive = false, this.context.chapters = await (0, y.Pb)(e3, r4, y.Y0);
          else if (357149030 === i4) this.context.info = await (0, y.Pb)(e3, r4, y.qi);
          else if (307544935 === i4) this.context.tags = await (0, y.Pb)(e3, r4, y.hK);
          else if (423732329 === i4) this.context.attachments = await (0, y.Pb)(e3, r4, y.qp);
          else if (374648427 === i4) s3 = true, this.context.tracks = await (0, y.Pb)(e3, r4, y.Wy);
          else if (524531317 === i4) {
            if (n2 = true, this.context.firstCluster = t4, this.context.isLive || !this.context.seekHead || !(1 & e3.ioReader.flags)) break;
            const i5 = this.context.seekHead.entry;
            let r5 = 0;
            for (; r5 < i5.length; r5++) if (!a3.has(i5[r5].id)) {
              await e3.ioReader.seek(i5[r5].pos + this.context.segmentStart);
              break;
            }
            if (r5 === i5.length) break;
          } else await e3.ioReader.skip(Number(BigInt.asIntN(32, r4)));
          a3.add(i4);
        } else await this.syncTopLevelElement(e3, 2);
      }
      return this.context.firstCluster > 0 && await e3.ioReader.seek(this.context.firstCluster), this.analyzeStreams(e3), 0;
    }
    parseAdditions(e3, t3) {
      for (let r3 = 0; r3 < t3.entry.length; r3++) {
        var i3;
        const a3 = t3.entry[r3];
        if (null !== (i3 = a3.additional) && void 0 !== i3 && i3.size) {
          4 === a3.additionalId && u.R8("ITU_T_T35 not support now", W, 576);
          const t4 = (0, m.sY)(a3.additional.data.length + 8);
          E.Cv(t4, BigInt(a3.additionalId >>> 0)), (0, c.lW)(t4 + 8, a3.additional.data.length, a3.additional.data), (0, g.Ow)(e3, 15, t4, a3.additional.data.length + 8);
        }
      }
    }
    async parseBlock(e3, t3) {
      var i3, r3, a3;
      const s3 = (null === (i3 = this.context.currentCluster.block) || void 0 === i3 ? void 0 : i3.data) || this.context.currentCluster.blockGroup.block.data;
      let n2 = null === (r3 = this.context.currentCluster.block) || void 0 === r3 ? void 0 : r3.pos;
      n2 < 0 && (n2 = this.context.currentCluster.blockGroup.block.pos);
      let o2, p2 = -1, A2 = BigInt(0);
      null !== (a3 = this.context.currentCluster.blockGroup) && void 0 !== a3 && a3.block && (o2 = this.context.currentCluster.blockGroup.additions, p2 = this.context.currentCluster.blockGroup.reference ? 0 === this.context.currentCluster.blockGroup.reference.length ? 1 : 0 : 1, this.context.currentCluster.blockGroup.duration && (A2 = this.context.currentCluster.blockGroup.duration)), this.blockReader ? this.blockReader.resetBuffer(s3) : this.blockReader = new C.A(s3);
      const w2 = this.blockReader.getPos(), b2 = Number(BigInt.asUintN(32, await (0, y.Qb)(this.blockReader, 8))), k2 = (0, D.A)(e3.streams, b2);
      if (!k2) return u.z3("invalid track number ".concat(b2), W, 626), f.OY;
      const x2 = this.blockReader.readInt16(), I2 = this.blockReader.readUint8();
      -1 === p2 && (p2 = 128 & I2 ? 1 : 0);
      let P2 = 0, S2 = [];
      switch (I2 >>> 1 & 3) {
        case 1: {
          P2 = this.blockReader.readUint8() + 1;
          let e5 = 0;
          for (let t4 = 0; t4 < P2 - 1; t4++) {
            let t5 = 0;
            for (; ; ) {
              const e6 = this.blockReader.readUint8();
              if (0 === e6) break;
              if (255 !== e6) {
                t5 += e6;
                break;
              }
              t5 += 255;
            }
            e5 += t5, S2.push(t5);
          }
          S2.push(s3.length - Number(BigInt.asIntN(32, this.blockReader.getPos() - w2)) - e5);
          break;
        }
        case 3: {
          P2 = this.blockReader.readUint8() + 1, S2.push(await (0, y.Ag)(this.blockReader, 4));
          let e5 = S2[0];
          for (let t4 = 1; t4 < P2 - 1; t4++) {
            let i4 = await (0, y.pf)(this.blockReader, 4) + S2[t4 - 1];
            e5 += i4, S2.push(i4);
          }
          S2.push(s3.length - Number(BigInt.asIntN(32, this.blockReader.getPos() - w2)) - e5);
          break;
        }
        case 2:
          P2 = this.blockReader.readUint8() + 1;
          const e4 = (s3.length - Number(BigInt.asIntN(32, this.blockReader.getPos() - w2))) / P2;
          for (let t4 = 0; t4 < P2; t4++) S2.push(e4);
          break;
        case 0:
          P2 = 1, S2.push(s3.length - Number(BigInt.asIntN(32, this.blockReader.getPos() - w2)));
      }
      const T2 = k2.privData, M2 = T2.timeScale || 1;
      if (T2.needDecryption) throw new Error("not support encryption stream");
      let B2 = (this.context.currentCluster.timeCode + BigInt(Math.floor(x2 * M2))) * BigInt(0 | this.context.info.timestampScale);
      T2.codecDelay && (B2 -= T2.codecDelay), B2 /= BigInt(1e3), B2 = (0, _.k)(B2, v.KR, k2.timeBase), A2 = BigInt(Math.floor(Number(BigInt.asIntN(32, A2)) * M2)) * BigInt(0 | this.context.info.timestampScale), A2 /= BigInt(1e3), A2 = (0, _.k)(A2, v.KR, k2.timeBase);
      for (let i4 = 0; i4 < P2; i4++) {
        const r4 = 0 !== i4 ? (0, g._5)() : t3;
        let a4, s4 = S2[i4], f2 = 0;
        if (T2.needDecompression) {
          const e4 = T2.encodings.entry.find((e5) => !!e5.compression);
          3 === e4.compression.algo ? (a4 = e4.compression.settings.data, s4 += a4.length, f2 = a4.length) : u.h2("not support compression stream, algo: ".concat(e4.compression.algo), W, 736);
        }
        l.M[17](r4 + 56, n2 + this.blockReader.getPos()), l.M[15](r4 + 32, k2.index), (0, c.Mr)(r4 + 72, k2.timeBase[d2.o9], 8), l.M[17](r4 + 8, B2), l.M[15](r4 + 28, s4), l.M[17](r4 + 48, A2);
        const v2 = (0, m.sY)(s4);
        a4 && (0, c.lW)(v2, f2, a4), (0, c.lW)(v2 + f2, S2[i4], this.blockReader.readBuffer(S2[i4])), (0, g.NX)(r4, v2, s4), 0 !== k2.codecpar.codecType ? (l.M[15](r4 + 36, 1 | h.f[15](r4 + 36)), l.M[17](r4 + 16, B2)) : (p2 && l.M[15](r4 + 36, 1 | h.f[15](r4 + 36)), 27 !== k2.codecpar.codecId && 173 !== k2.codecpar.codecId && 196 !== k2.codecpar.codecId || (1 & k2.codecpar.flags ? l.M[15](r4 + 36, 64 | h.f[15](r4 + 36)) : l.M[15](r4 + 36, -65 & h.f[15](r4 + 36)))), o2 && this.parseAdditions(r4, o2), 0 !== i4 && e3.interval.packetBuffer.push(r4), this.context.maxPts < B2 && (this.context.maxPts = B2);
      }
      return this.context.currentCluster.block = { pos: -BigInt(1), size: -BigInt(1) }, this.context.currentCluster.blockGroup = { block: null }, 0;
    }
    addClusterIndex(e3) {
      if (this.context.clusterIndexesPosMap.has(e3.pos)) return;
      const t3 = w.El(this.context.clusterIndexes, (t4) => t4.time < e3.time ? 1 : -1);
      t3 > -1 ? (this.context.clusterIndexesPosMap.set(e3.pos, t3), this.context.clusterIndexes.splice(t3, 0, e3)) : (this.context.clusterIndexesPosMap.set(e3.pos, this.context.clusterIndexes.length), this.context.clusterIndexes.push(e3));
    }
    async readAVPacket_(e3, t3) {
      const i3 = e3.ioReader.getPos(), r3 = await (0, y.aL)(e3, this.context.header.maxIdLength);
      if (r3 === f.LR) return await this.syncTopLevelElement(e3), this.readAVPacket_(e3, t3);
      const a3 = await (0, y.Qb)(e3.ioReader, this.context.header.maxSizeLength);
      if (a3 === BigInt(f.LR)) return await this.syncTopLevelElement(e3), this.readAVPacket_(e3, t3);
      if (524531317 === r3) {
        this.context.currentCluster.pos = i3, this.context.currentCluster.timeCode = BigInt(0), await (0, y.Pb)(e3, a3, y.GZ, this.context.currentCluster, [163, 160]), this.context.isLive || this.addClusterIndex({ time: this.context.currentCluster.timeCode, pos: i3 });
        let r4 = await this.parseBlock(e3, t3);
        if (r4 === f.OY) return this.readAVPacket_(e3, t3);
        if (r4 < 0) return r4;
      } else if (163 === r3) {
        this.context.currentCluster.block = { pos: e3.ioReader.getPos(), size: a3, data: await e3.ioReader.readBuffer(Number(BigInt.asIntN(32, a3))) };
        let i4 = await this.parseBlock(e3, t3);
        if (i4 === f.OY) return this.readAVPacket_(e3, t3);
        if (i4 < 0) return i4;
      } else {
        if (160 !== r3) return 475249515 === r3 || 307544935 === r3 || 423732329 === r3 || 272869232 === r3 || 357149030 === r3 || 374648427 === r3 || 290298740 === r3 ? (await e3.ioReader.skip(Number(BigInt.asIntN(32, a3))), this.readAVPacket_(e3, t3)) : (await this.syncTopLevelElement(e3), this.readAVPacket_(e3, t3));
        {
          await (0, y.Pb)(e3, a3, y.Wg, this.context.currentCluster.blockGroup);
          let i4 = await this.parseBlock(e3, t3);
          if (i4 === f.OY) return this.readAVPacket_(e3, t3);
          if (i4 < 0) return i4;
        }
      }
      return 0;
    }
    async readAVPacket(e3, t3) {
      try {
        return await this.readAVPacket_(e3, t3);
      } catch (t4) {
        return -1048576 !== e3.ioReader.error && -1048572 !== e3.ioReader.error ? (u.z3("read packet error, ".concat(t4), W, 920), f.LR) : e3.ioReader.error;
      }
    }
    async syncTopLevelElement(e3, t3 = 3) {
      let i3 = v.Dh;
      for (; ; ) try {
        if (8 & e3.ioReader.flags) break;
        const r3 = e3.ioReader.getPos(), a3 = await e3.ioReader.peekUint32();
        if (524531317 === a3 || 475249515 === a3 || 307544935 === a3 || 423732329 === a3 || 272869232 === a3 || 357149030 === a3 || 374648427 === a3 || 290298740 === a3) {
          i3 = r3;
          let a4 = 0;
          await e3.ioReader.skip(4);
          const s3 = await (0, y.Qb)(e3.ioReader, this.context.header.maxSizeLength);
          if (s3 === BigInt(f.LR)) {
            await e3.ioReader.seek(r3 + BigInt(1));
            continue;
          }
          for (await e3.ioReader.skip(Number(BigInt.asIntN(32, s3))); a4 <= t3; ) {
            const t4 = await (0, y.aL)(e3, this.context.header.maxIdLength), i4 = await (0, y.Qb)(e3.ioReader, this.context.header.maxSizeLength);
            if (524531317 !== t4 && 475249515 !== t4 && 307544935 !== t4 && 423732329 !== t4 && 272869232 !== t4 && 357149030 !== t4 && 374648427 !== t4 && 290298740 !== t4) break;
            a4++, await e3.ioReader.skip(Number(BigInt.asIntN(32, i4)));
          }
          if (!(a4 < t3)) break;
          await e3.ioReader.seek(i3 + BigInt(1)), i3 = v.Dh;
        } else await e3.ioReader.skip(1), i3 = v.Dh;
      } catch (e4) {
        break;
      }
      i3 !== v.Dh && await e3.ioReader.seek(i3);
    }
    async seek(e3, t3, i3, r3) {
      var a3;
      const s3 = e3.ioReader.getPos();
      if (2 & r3) return await e3.ioReader.seek(i3), s3;
      const n2 = (0, _.k)(i3, t3.timeBase, v.KR);
      let o2 = v.Dh;
      if (null !== (a3 = this.context.cues) && void 0 !== a3 && a3.entry.length) {
        const e4 = t3.privData;
        for (let t4 = 0; t4 < this.context.cues.entry.length; t4++) if ((this.context.cues.entry[t4].time || BigInt(0)) * BigInt(0 | this.context.info.timestampScale) / BigInt(1e3) > n2) {
          const i4 = this.context.cues.entry[Math.max(t4 - 1, 0)].pos;
          if (i4.length) {
            const t5 = i4.find((t6) => t6.track === e4.number);
            if (t5) {
              o2 = t5.pos + this.context.segmentStart;
              break;
            }
          }
        }
      }
      if (o2 === v.Dh && this.context.clusterIndexes.length) {
        for (let e4 = 0; e4 < this.context.clusterIndexes.length; e4++) if (this.context.clusterIndexes[e4].time * BigInt(0 | this.context.info.timestampScale) / BigInt(1e3) > n2) {
          o2 = this.context.clusterIndexes[Math.max(e4 - 1, 0)].pos;
          break;
        }
        o2 === v.Dh && (o2 = this.context.clusterIndexes[this.context.clusterIndexes.length - 1].pos);
      }
      return o2 !== v.Dh ? (await e3.ioReader.seek(o2), s3) : BigInt(f.E$);
    }
    getAnalyzeStreamsCount() {
      return 0;
    }
  }
}, 92047: (e2, t2, i2) => {
  i2.d(t2, { A: () => k });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(4624), o = i2(9705), c = i2(65977), d2 = i2(74963), h = i2(85947), l = i2(85428), u = i2(9690), f = i2(72739), p = i2(14686), m = i2(37837), g = i2(71517), v = i2(44328), A = i2(77231), y = i2(39381), w = i2(50315);
  const b = "src/avformat/formats/IMovFormat.ts";
  class k extends h.A {
    constructor(e3 = {}) {
      super(), (0, r2.A)(this, "type", 1), (0, r2.A)(this, "context", void 0), (0, r2.A)(this, "firstAfterSeek", void 0), (0, r2.A)(this, "options", void 0), this.options = e3, this.context = (0, u.A)(), e3.ignoreEditlist && (this.context.ignoreEditlist = true);
    }
    init(e3) {
      e3.ioReader && e3.ioReader.setEndian(true), this.firstAfterSeek = false;
    }
    async readHeader(e3) {
      try {
        const t3 = await e3.ioReader.fileSize();
        let i3 = 0, r3 = await e3.ioReader.readUint32(), a3 = await e3.ioReader.readUint32();
        a3 === (0, c.A)("ftyp") ? await d2.E6(e3.ioReader, this.context, { type: a3, size: r3 - 8 }) : (!t3 || r3 < t3) && await e3.ioReader.skip(r3 - 8);
        let s3 = BigInt(0);
        for (; !this.context.foundMoov; ) {
          const i4 = e3.ioReader.getPos();
          if (i4 === t3) return n.z3("the file format is not mp4", b, 112), o.LR;
          if (r3 = await e3.ioReader.readUint32(), a3 = await e3.ioReader.readUint32(), 1 === r3 && (r3 = Number(await e3.ioReader.readUint64())), r3 < 8 || t3 && i4 + BigInt(Math.floor(r3)) > t3) return n.z3("invalid box size ".concat(r3), b, 125), o.LR;
          a3 === (0, c.A)("mdat") ? (this.context.foundMdat || (s3 = i4), this.context.foundMdat = true, await e3.ioReader.seek(i4 + BigInt(Math.floor(r3)))) : a3 === (0, c.A)("moov") ? (await d2.wB(e3.ioReader, e3, this.context, { size: r3 - 8, type: a3 }), this.context.foundMoov = true) : await e3.ioReader.seek(i4 + BigInt(Math.floor(r3)));
        }
        if (!this.context.fragment && !this.context.foundMdat) {
          const t4 = await e3.ioReader.peekUint64() >> BigInt(32);
          Number(t4) === (0, c.A)("moof") && (this.context.fragment = true);
        }
        if (this.context.fragment && 1 & e3.ioReader.flags) {
          const t4 = e3.ioReader.getPos(), i4 = await e3.ioReader.fileSize();
          if (i4 > BigInt(16)) {
            await e3.ioReader.seek(i4 - BigInt(12));
            let r4 = await e3.ioReader.readUint32();
            if (r4 === (0, c.A)("mfro")) {
              await e3.ioReader.skip(4);
              const t5 = await e3.ioReader.readUint32();
              await e3.ioReader.seek(i4 - BigInt(Math.floor(t5)));
              const a4 = await e3.ioReader.readUint32();
              r4 = await e3.ioReader.readUint32(), r4 === (0, c.A)("mfra") && await d2.t9(e3.ioReader, e3, this.context, { size: a4 - 8, type: r4 });
            }
            await e3.ioReader.seek(t4);
          }
        }
        return !this.context.fragment && this.context.foundMdat && await e3.ioReader.seek(s3), this.context.fragment || e3.streams.forEach((e4) => {
          if (27 === e4.codecpar.codecId || 173 === e4.codecpar.codecId || 196 === e4.codecpar.codecId) {
            const t4 = e4.privData;
            !(e4.codecpar.videoDelay > 0) || t4.cttsSampleCounts && t4.cttsSampleCounts.length || (e4.codecpar.flags |= 2);
          }
        }), i3;
      } catch (t3) {
        return n.z3(t3.message, b, 205), this.context.foundMoov || n.z3("moov not found", b, 208), e3.ioReader.error;
      }
    }
    async readAVPacket_(e3, t3) {
      const { sample: i3, stream: r3, encryption: n2 } = (0, l.G)(e3, this.context, e3.ioReader.flags);
      if (!i3) return -1048576;
      {
        s2.M[15](t3 + 32, r3.index), s2.M[17](t3 + 16, i3.dts), 2 & r3.codecpar.flags || s2.M[17](t3 + 8, i3.pts), s2.M[17](t3 + 48, BigInt(Math.floor(i3.duration))), s2.M[15](t3 + 36, a2.f[15](t3 + 36) | i3.flags), s2.M[17](t3 + 56, i3.pos), s2.M[15](t3 + 76, r3.timeBase.den), s2.M[15](t3 + 72, r3.timeBase.num), r3.startTime === A.Dh && (r3.startTime = a2.f[17](t3 + 8));
        const o2 = a2.f[17](t3 + 56) - e3.ioReader.getPos();
        o2 !== BigInt(0) && (o2 > 0 && (4 & e3.ioReader.flags || 2 & e3.ioReader.flags) && !this.firstAfterSeek ? await e3.ioReader.skip(Number(BigInt.asIntN(32, o2))) : await e3.ioReader.seek(a2.f[17](t3 + 56))), this.firstAfterSeek && (this.firstAfterSeek = false);
        const d3 = i3.size, h2 = (0, m.sY)(d3);
        if ((0, g.NX)(t3, h2, d3), await e3.ioReader.readBuffer(d3, (0, p.JW)(h2, d3)), 94226 === r3.codecpar.codecId && a2.f[15](t3 + 28) >= 8) {
          const e4 = y.Sg(a2.f[20](t3 + 24) + 4) >>> 0, i4 = a2.f[15](t3 + 28);
          if (e4 === (0, c.A)("vtte") && 8 === i4) {
            const e5 = (0, m.Gy)(1);
            (0, g.NX)(t3, e5, 1), s2.M[15](t3 + 28, 1);
          }
          if (i4 > 8 && (e4 === (0, c.A)("vtte") || e4 === (0, c.A)("vttc"))) {
            let e5 = a2.f[20](t3 + 24) + 8;
            const r4 = a2.f[20](t3 + 24) + i4;
            for (; e5 < r4; ) {
              const i5 = y.Sg(e5);
              if (y.Sg(e5 + 4) >>> 0 === (0, c.A)("payl") && i5 > 8) {
                const r5 = (0, m.sY)(i5 - 8);
                (0, p.Mr)(r5, e5 + 8, i5 - 8), (0, g.NX)(t3, r5, i5 - 8);
                break;
              }
              e5 += i5;
            }
          }
        }
        if (r3.sideData[1] && 1 & a2.f[15](t3 + 36)) {
          const e4 = r3.sideData[1].length, i4 = (0, m.sY)(e4);
          (0, g.Ow)(t3, 1, i4, e4), (0, p.lW)(i4, e4, r3.sideData[1]), delete r3.sideData[1];
        }
        if (n2) {
          const e4 = (0, w.zz)(n2), i4 = (0, m.sY)(e4.length);
          (0, p.lW)(i4, e4.length, e4), (0, g.Ow)(t3, 25, i4, e4.length);
        }
      }
      return 0;
    }
    async readAVPacket(e3, t3) {
      try {
        if (!e3.streams.find((e4) => {
          var t4;
          const i3 = e4.privData;
          return (null === (t4 = i3.samplesIndex) || void 0 === t4 ? void 0 : t4.length) && false === i3.sampleEnd;
        }) && this.context.fragment && !this.context.currentFragment) for (; !this.context.currentFragment; ) {
          const t4 = e3.ioReader.getPos(), i3 = await e3.ioReader.readUint32(), r3 = await e3.ioReader.readUint32();
          r3 === (0, c.A)("moof") ? (this.context.currentFragment = { pos: t4, size: i3, sequence: 0, tracks: [], currentTrack: null }, this.context.firstMoof || (this.context.firstMoof = t4), await d2.wZ(e3.ioReader, e3, this.context, { type: r3, size: i3 - 8 })) : r3 === (0, c.A)("moov") ? await d2.wB(e3.ioReader, e3, this.context, { size: i3 - 8, type: r3 }) : await e3.ioReader.skip(i3 - 8);
        }
        return await this.readAVPacket_(e3, t3);
      } catch (t4) {
        return -1048576 !== e3.ioReader.error && -1048572 !== e3.ioReader.error ? (n.z3("read packet error, ".concat(t4), b, 369), o.LR) : e3.ioReader.error;
      }
    }
    async seek(e3, t3, i3, r3) {
      const a3 = e3.ioReader.getPos();
      if (2 & r3) return await e3.ioReader.seek(i3), a3;
      const s3 = i3, n2 = t3.privData, c2 = () => {
        this.context.currentFragment = null, e3.streams.forEach((e4) => {
          e4.privData.samplesIndex.length = 0;
        });
      };
      if (16 & r3 && this.context.fragment) {
        const r4 = (0, v.k)(i3, t3.timeBase, A.i0);
        return await e3.ioReader.seek(r4, true), c2(), a3;
      }
      if (this.context.fragment) {
        if (n2.fragIndexes.length) {
          let t4 = f.El(n2.fragIndexes, (e4) => e4.time > s3 ? -1 : e4.time === s3 ? 0 : 1);
          if (t4 > -1) return t4 > 0 && n2.fragIndexes[t4].time > s3 && t4--, await e3.ioReader.seek(n2.fragIndexes[t4].pos, true), c2(), a3;
        }
        return s3 === BigInt(0) && this.context.firstMoof ? (await e3.ioReader.seek(this.context.firstMoof), c2(), a3) : BigInt(o.E$);
      }
      let d3 = f.El(n2.samplesIndex, (e4) => e4.pts > s3 ? -1 : e4.pts === s3 ? 0 : 1);
      if (d3 > -1 && 0 === t3.codecpar.codecType) {
        let e4 = d3;
        for (; e4 >= 0; e4--) if (1 & n2.samplesIndex[e4].flags) {
          d3 = e4;
          break;
        }
        e4 < 0 && (d3 = -1);
      }
      return d3 > -1 ? (n2.currentSample = d3, n2.sampleEnd = false, f.__(e3.streams, (e4) => {
        if (e4 !== t3) {
          const i4 = e4.privData;
          let r4 = (0, v.k)(n2.samplesIndex[n2.currentSample].pts, t3.timeBase, e4.timeBase), a4 = f.El(i4.samplesIndex, (e5) => e5.pts > r4 ? -1 : e5.pts === r4 ? 0 : 1);
          if (a4 > -1 && 0 === e4.codecpar.codecType) {
            let e5 = a4;
            for (; e5 >= 0; e5--) if (1 & i4.samplesIndex[e5].flags) {
              a4 = e5;
              break;
            }
            e5 < 0 && (a4 = -1);
          }
          a4 >= 0 ? (i4.currentSample = a4, i4.sampleEnd = false) : (i4.sampleEnd = true, i4.currentSample = i4.samplesIndex.length);
        }
      }), this.firstAfterSeek = true, a3) : BigInt(o.LR);
    }
    getAnalyzeStreamsCount() {
      return 0;
    }
  }
}, 6839: (e2, t2, i2) => {
  i2.d(t2, { A: () => I });
  var r2 = i2(134), a2 = i2(14686), s2 = i2(61499), n = i2(63939), o = i2(50932), c = (i2(9599), i2(4624)), d2 = i2(85947), h = i2(37837), l = i2(71517), u = i2(77231), f = i2(50011), p = i2(64093), m = i2(44328), g = i2(31608), v = i2(43607), A = i2(72739), y = i2(19028), w = i2(75294), b = i2(9705), k = i2(67672);
  const x = "src/avformat/formats/IMp3Format.ts";
  class I extends d2.A {
    constructor() {
      super(), (0, r2.A)(this, "type", 14), (0, r2.A)(this, "context", void 0);
    }
    init(e3) {
      e3.ioReader && e3.ioReader.setEndian(true), this.context = { firstFramePos: u.Dh, isVBR: false, hasID3v1: false, id3v2: { version: u.N_, revision: u.N_, flags: u.N_ }, fileSize: BigInt(0) };
    }
    async parseID3(e3, t3) {
      if ("ID3" === await e3.ioReader.peekString(3)) {
        await e3.ioReader.skip(3), this.context.id3v2.version = await e3.ioReader.readUint8(), this.context.id3v2.revision = await e3.ioReader.readUint8(), this.context.id3v2.flags = await e3.ioReader.readUint8();
        const i3 = (127 & await e3.ioReader.readUint8()) << 21 | (127 & await e3.ioReader.readUint8()) << 14 | (127 & await e3.ioReader.readUint8()) << 7 | 127 & await e3.ioReader.readUint8();
        await y.q(e3.ioReader, i3, this.context.id3v2, t3.metadata), k.o(t3.metadata["com.apple.streaming.transportStreamTimestamp"]) && (t3.privData.nextDTS = (0, m.k)(t3.metadata["com.apple.streaming.transportStreamTimestamp"], { num: 1, den: 9e4 }, t3.timeBase));
      }
    }
    async readHeader(e3) {
      const t3 = e3.createStream();
      t3.codecpar.codecId = 86017, t3.codecpar.codecType = 1, t3.startTime = BigInt(0), t3.firstDTS = BigInt(0);
      const i3 = { frameHeader: new w.Vz(), nbFrame: BigInt(0), tocIndexes: [], nextDTS: BigInt(0), frameLength: 0 };
      t3.privData = i3;
      const r3 = t3.metadata = {}, s3 = await e3.ioReader.fileSize();
      if (1 & e3.ioReader.flags && !(2 & e3.ioReader.flags) && s3 > g.c1 && (await e3.ioReader.seek(s3 - BigInt(g.c1)), "TAG" === await e3.ioReader.readString(3))) {
        let t4 = await e3.ioReader.readBuffer(30);
        r3.title = f.decode(t4).replace(/\s/g, ""), t4 = await e3.ioReader.readBuffer(30), r3.artist = f.decode(t4).replace(/\s/g, ""), t4 = await e3.ioReader.readBuffer(30), r3.album = f.decode(t4).replace(/\s/g, ""), t4 = await e3.ioReader.readBuffer(4), r3.date = f.decode(t4).replace(/\s/g, ""), t4 = await e3.ioReader.readBuffer(30), r3.comment = f.decode(t4).replace(/\s/g, ""), 0 === t4[28] && 0 !== t4[29] && (r3.track = t4[29] + ""), r3.genre = await e3.ioReader.readUint8(), this.context.hasID3v1 = true;
      }
      for (await e3.ioReader.seek(BigInt(0)), await this.parseID3(e3, t3), this.context.firstFramePos = e3.ioReader.getPos(); 65504 & ~await e3.ioReader.peekUint16(); ) await e3.ioReader.skip(1);
      this.context.firstFramePos !== e3.ioReader.getPos() && (c.R8("skipping ".concat(e3.ioReader.getPos() - this.context.firstFramePos, " bytes of junk at ").concat(this.context.firstFramePos), x, 189), this.context.firstFramePos = e3.ioReader.getPos()), t3.codecpar.extradataSize = 4, t3.codecpar.extradata = (0, h.sY)(t3.codecpar.extradataSize), await e3.ioReader.peekBuffer(t3.codecpar.extradataSize, (0, a2.JW)(t3.codecpar.extradata, t3.codecpar.extradataSize)), w.qg(i3.frameHeader, await e3.ioReader.readUint32()), t3.codecpar.profile = p.Au(i3.frameHeader.layer), t3.codecpar.frameSize = p.hG(i3.frameHeader.version, i3.frameHeader.layer), t3.codecpar.sampleRate = p.Y2(i3.frameHeader.version, i3.frameHeader.samplingFrequency), t3.timeBase.num = 1, t3.timeBase.den = t3.codecpar.sampleRate;
      const n2 = 3 === i3.frameHeader.mode ? 1 : 2;
      t3.codecpar.chLayout.nbChannels = n2;
      const o2 = BigInt(Math.floor(p.oz(i3.frameHeader.version, i3.frameHeader.layer, i3.frameHeader.bitrateIndex))), d3 = w.CM(i3.frameHeader, t3.codecpar.sampleRate), l2 = e3.ioReader.getPos();
      await e3.ioReader.skip([[0, 9, 17], [0, 0, 0], [0, 9, 17], [0, 17, 32]][i3.frameHeader.version][t3.codecpar.chLayout.nbChannels]);
      const u2 = await e3.ioReader.readString(4);
      if ("Xing" === u2 || "Info" === u2) {
        this.context.isVBR = true;
        const a3 = await e3.ioReader.readUint32();
        1 & a3 && (i3.nbFrame = BigInt(Math.floor(await e3.ioReader.readUint32()))), 2 & a3 && (this.context.fileSize = BigInt(Math.floor(await e3.ioReader.readUint32())));
        const n3 = s3 >= l2 ? s3 - l2 : BigInt(0);
        if (n3 && this.context.fileSize) {
          const e4 = v.jk(n3, this.context.fileSize), t4 = v.T9(n3, this.context.fileSize) - e4;
          n3 > this.context.fileSize && t4 > e4 >> BigInt(4) ? (i3.nbFrame = BigInt(0), c.R8("invalid concatenated file detected - using bitrate for duration", x, 242)) : t4 > e4 >> BigInt(4) && c.R8("filesize and duration do not match (growing file?)", x, 245);
        }
        if (t3.duration = i3.nbFrame * BigInt(0 | t3.codecpar.frameSize), 4 & a3) for (let r4 = 0; r4 < g.W8; r4++) {
          const a4 = await e3.ioReader.readUint8(), s4 = this.context.fileSize * BigInt(Math.floor(a4)) / BigInt(256), n4 = { dts: t3.duration / BigInt(g.W8) * BigInt(Math.floor(r4)), pos: s4 };
          i3.tocIndexes.push(n4);
        }
        8 & a3 && await e3.ioReader.skip(4), r3.encoder = await e3.ioReader.readString(9), this.context.firstFramePos += BigInt(Math.floor(d3));
      } else await e3.ioReader.seek(l2), "VBRI" === await e3.ioReader.readString(4) ? (1 === await e3.ioReader.readUint16() && (await e3.ioReader.skip(4), this.context.fileSize = BigInt(Math.floor(await e3.ioReader.readUint32())), i3.nbFrame = BigInt(Math.floor(await e3.ioReader.readUint32())), t3.duration = i3.nbFrame * BigInt(0 | t3.codecpar.frameSize)), this.context.firstFramePos += BigInt(Math.floor(d3))) : (this.context.isVBR = false, t3.codecpar.bitrate = o2 * BigInt(1e3), i3.nbFrame = (s3 - this.context.firstFramePos - BigInt(g.c1)) / BigInt(Math.floor(d3)), t3.duration = i3.nbFrame * BigInt(0 | t3.codecpar.frameSize), i3.frameLength = d3, this.context.fileSize = s3);
      for (await e3.ioReader.seek(this.context.firstFramePos); 65504 & ~await e3.ioReader.peekUint16(); ) await e3.ioReader.skip(1);
      if (this.context.firstFramePos !== e3.ioReader.getPos() && (c.R8("skipping ".concat(e3.ioReader.getPos() - this.context.firstFramePos, " bytes of junk at ").concat(this.context.firstFramePos), x, 305), this.context.firstFramePos = e3.ioReader.getPos()), i3.tocIndexes.length) for (let e4 = 0; e4 < g.W8; e4++) i3.tocIndexes[e4].pos += this.context.firstFramePos;
      return 0;
    }
    async readAVPacket(e3, t3) {
      const i3 = e3.getStreamByMediaType(1), r3 = i3.privData, d3 = e3.ioReader.getPos();
      if (this.context.hasID3v1 && d3 >= this.context.fileSize - BigInt(g.c1)) return -1048576;
      try {
        2 & e3.ioReader.flags && await this.parseID3(e3, i3), w.qg(r3.frameHeader, await e3.ioReader.peekUint32());
        const c2 = w.CM(r3.frameHeader, i3.codecpar.sampleRate), u2 = p.hG(r3.frameHeader.version, r3.frameHeader.layer);
        o.M[15](t3 + 28, c2), o.M[17](t3 + 56, d3), o.M[15](t3 + 32, i3.index), (0, a2.Mr)(t3 + 72, i3.timeBase[s2.o9], 8), o.M[17](t3 + 48, BigInt(Math.floor(u2))), o.M[17](t3 + 16, r3.nextDTS), o.M[17](t3 + 8, r3.nextDTS), o.M[15](t3 + 36, 1 | n.f[15](t3 + 36)), r3.nextDTS += BigInt(Math.floor(u2));
        const f2 = (0, h.sY)(c2);
        return (0, l.NX)(t3, f2, c2), await e3.ioReader.readBuffer(c2, (0, a2.JW)(f2, c2)), 0;
      } catch (t4) {
        return -1048576 !== e3.ioReader.error && -1048572 !== e3.ioReader.error && c.z3(t4.message, x, 360), e3.ioReader.error;
      }
    }
    async syncToFrame(e3) {
      let t3 = u.Dh;
      const i3 = e3.getStreamByMediaType(1), r3 = i3.privData;
      for (; ; ) try {
        if (!(65504 & ~await e3.ioReader.peekUint16())) {
          t3 = e3.ioReader.getPos(), w.qg(r3.frameHeader, await e3.ioReader.peekUint32());
          let a3 = this.context.isVBR ? w.CM(r3.frameHeader, i3.codecpar.sampleRate) : r3.frameLength;
          if (a3 > 512e3) {
            await e3.ioReader.skip(1);
            continue;
          }
          await e3.ioReader.skip(a3);
          let s3 = 0;
          for (; s3 <= 3 && !(65504 & ~await e3.ioReader.peekUint16()); ) {
            w.qg(r3.frameHeader, await e3.ioReader.peekUint32());
            let t4 = this.context.isVBR ? w.CM(r3.frameHeader, i3.codecpar.sampleRate) : r3.frameLength;
            await e3.ioReader.skip(t4), s3++;
          }
          if (!(s3 < 3)) break;
          await e3.ioReader.seek(t3 + BigInt(1)), t3 = u.Dh;
        }
        await e3.ioReader.skip(1);
      } catch (e4) {
        break;
      }
      t3 !== u.Dh && await e3.ioReader.seek(t3);
    }
    async seek(e3, t3, i3, r3) {
      const a3 = e3.ioReader.getPos(), s3 = t3.privData;
      if (16 & r3 && 2 & e3.ioReader.flags) {
        const r4 = (0, m.k)(i3, t3.timeBase, u.i0);
        return await e3.ioReader.seek(r4, true), s3.nextDTS = i3, BigInt(0);
      }
      if (2 & r3) {
        const n2 = await e3.ioReader.fileSize();
        return n2 <= BigInt(0) ? BigInt(b.E$) : (i3 < BigInt(0) ? i3 = BigInt(0) : i3 > n2 && (i3 = n2), await e3.ioReader.seek(i3), 4 & r3 || (await this.syncToFrame(e3), t3.duration && n2 && (s3.nextDTS = i3 / n2 * t3.duration)), a3);
      }
      if (t3.sampleIndexes.length) {
        let r4 = A.El(t3.sampleIndexes, (e4) => e4.pts > i3 ? -1 : 1);
        if (r4 > 0 && (0, m.k)(i3 - t3.sampleIndexes[r4 - 1].pts, t3.timeBase, u.i0) < BigInt(1e4)) return c.Yz("seek in sampleIndexes, found index: ".concat(r4, ", pts: ").concat(t3.sampleIndexes[r4 - 1].pts, ", pos: ").concat(t3.sampleIndexes[r4 - 1].pos), x, 475), await e3.ioReader.seek(t3.sampleIndexes[r4 - 1].pos), s3.nextDTS = t3.sampleIndexes[r4 - 1].dts, a3;
      }
      if (i3 === BigInt(0)) return await e3.ioReader.seek(this.context.firstFramePos), a3;
      if (this.context.isVBR) if (s3.tocIndexes.length) {
        const r4 = s3.tocIndexes[Number(BigInt.asIntN(32, i3 / (t3.duration / BigInt(g.W8))))];
        if (r4) c.Yz("seek in xing toc indexes, pts: ".concat(r4.dts, ", pos: ").concat(r4.pos), x, 491), await e3.ioReader.seek(r4.pos), s3.nextDTS = r4.dts;
        else {
          c.Yz("not found any keyframe index, try to seek in bytes", x, 496);
          const r5 = w.CM(s3.frameHeader, t3.codecpar.sampleRate), a4 = i3 / BigInt(0 | t3.codecpar.frameSize), n2 = a4 * BigInt(Math.floor(r5)) + this.context.firstFramePos;
          s3.nextDTS = a4 * BigInt(0 | t3.codecpar.frameSize), await e3.ioReader.seek(n2);
        }
      } else {
        c.Yz("not found any keyframe index, try to seek in bytes", x, 505);
        const r4 = w.CM(s3.frameHeader, t3.codecpar.sampleRate), a4 = i3 / BigInt(0 | t3.codecpar.frameSize), n2 = a4 * BigInt(Math.floor(r4)) + this.context.firstFramePos;
        s3.nextDTS = a4 * BigInt(0 | t3.codecpar.frameSize), await e3.ioReader.seek(n2);
      }
      else {
        const r4 = i3 / BigInt(0 | t3.codecpar.frameSize), a4 = r4 * BigInt(0 | s3.frameLength) + this.context.firstFramePos;
        s3.nextDTS = r4 * BigInt(0 | t3.codecpar.frameSize), await e3.ioReader.seek(a4);
      }
      return await this.syncToFrame(e3), a3;
    }
    getAnalyzeStreamsCount() {
      return 1;
    }
  }
}, 83855: (e2, t2, i2) => {
  i2.d(t2, { A: () => V });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(61499), o = i2(63939), c = i2(50932), d2 = i2(4624), h = i2(9705), l = i2(51660), u = i2(6403), f = i2(85947), p = i2(71517), m = i2(77231), g = i2(52071), v = i2(44328), A = i2(72739), y = i2(95335), w = i2(64093), b = i2(62815), k = i2(67659), x = i2(59166), I = i2(95832), P = i2(22576), S = i2(87518), T = i2(43290), M = i2(78887), B = i2(37837), R = i2(14686), _ = i2(10662), C = i2(92647), U = i2(60264), D = i2(56397), E = i2(75294), L = i2(67672), z = i2(51113), $ = i2(7309), F = i2(50848);
  const N = "src/avformat/formats/IMpegpsFormat.ts";
  class V extends f.A {
    constructor() {
      super(), (0, r2.A)(this, "type", 3), (0, r2.A)(this, "context", void 0), (0, r2.A)(this, "cacheAVPacket", void 0), this.context = { headerState: 255, psmType: new (s2())(), pes: new u.xf(), slices: new (s2())(), lastPtsMap: new (s2())(), imkhCctv: false, sofdec: false, ioEnded: false, paddingPES: null };
    }
    init(e3) {
      e3.ioReader && e3.ioReader.setEndian(true), this.cacheAVPacket = 0;
    }
    async destroy(e3) {
      this.cacheAVPacket && ((0, p.Qe)(this.cacheAVPacket), this.cacheAVPacket = 0), A.__(e3.streams, (e4) => {
        const t3 = e4.privData;
        t3.filter && (t3.filter.destroy(), t3.filter = null);
      });
    }
    async findNextStartCode(e3) {
      let t3 = 255, i3 = 0;
      for (; i3 < _.V; ) {
        const r3 = await e3.ioReader.readUint8();
        if (1 === t3) {
          t3 = 16777215 & (t3 << 8 | r3);
          break;
        }
        t3 = 16777215 & (t3 << 8 | r3), i3++;
      }
      return i3 === _.V && (t3 = -1), this.context.headerState = t3, t3;
    }
    async parsePSM(e3) {
      const t3 = await e3.ioReader.readUint16();
      await e3.ioReader.skip(2);
      const i3 = await e3.ioReader.readUint16();
      await e3.ioReader.skip(i3), await e3.ioReader.readUint16();
      let r3 = t3 - i3 - 10;
      for (; r3 >= 4; ) {
        const t4 = await e3.ioReader.readUint8(), i4 = await e3.ioReader.readUint8(), a3 = await e3.ioReader.readUint16();
        this.context.psmType.set(i4, t4), await e3.ioReader.skip(a3), r3 -= a3 + 4;
      }
      await e3.ioReader.readUint32();
    }
    async readPES(e3) {
      for (; ; ) {
        const t3 = await this.findNextStartCode(e3);
        if (t3 < 0) return h.LR;
        if (442 === t3 || 443 === t3) continue;
        if (446 === t3 || 447 === t3) {
          const t4 = await e3.ioReader.readUint16();
          await e3.ioReader.skip(t4);
          continue;
        }
        if (444 === t3) {
          await this.parsePSM(e3);
          continue;
        }
        if (!(t3 >= 448 && t3 <= 479 || t3 >= 480 && t3 <= 495 || 445 == t3 || 447 == t3 || 509 == t3)) continue;
        const i3 = await e3.ioReader.readUint16();
        this.context.pes.pos = e3.ioReader.getPos() - BigInt(6), this.context.pes.streamId = 255 & t3, this.context.pes.streamType = this.context.psmType[this.context.pes.streamId];
        const r3 = new Uint8Array(i3 + 6);
        return r3[0] = 0, r3[1] = 0, r3[2] = 1, r3[3] = this.context.pes.streamId, r3[4] = i3 >> 8, r3[5] = 255 & i3, await e3.ioReader.readBuffer(i3, r3.subarray(6)), this.context.pes.data = r3, t3;
      }
    }
    createStream(e3, t3, i3, r3) {
      let a3 = 0, s3 = -1;
      switch (i3) {
        case 226:
          s3 = 0, a3 = 27;
          break;
        case 128:
          s3 = 1, a3 = 86019;
          break;
        case 136:
          s3 = 1, a3 = 86020;
          break;
        case 160:
          s3 = 1, a3 = 65537;
          break;
        case 32:
          s3 = 3, a3 = 94208;
          break;
        default:
          switch (t3) {
            case 1:
            case 2:
              s3 = 0, a3 = 2;
              break;
            case 3:
            case 4:
              s3 = 1, a3 = 86017;
              break;
            case 15:
              s3 = 1, a3 = 86018;
              break;
            case 16:
              s3 = 0, a3 = 12;
              break;
            case 27:
              s3 = 0, a3 = 27;
              break;
            case 36:
              s3 = 0, a3 = 173;
              break;
            case 51:
              s3 = 0, a3 = 196;
              break;
            case 129:
              s3 = 1, a3 = 86019;
              break;
            case 144:
              s3 = 1, a3 = 65543;
              break;
            case 145:
              s3 = 1, a3 = 65542;
              break;
            case 447:
              s3 = 2, a3 = 98312;
              break;
            default:
              if (r3 >= 480 && r3 <= 495) s3 = 0, a3 = 2;
              else if (r3 >= 448 && r3 <= 479) s3 = 1, a3 = 86017;
              else if (r3 >= 128 && r3 <= 135) s3 = 1, a3 = 86019;
              else if (r3 >= 136 && r3 <= 143 || r3 >= 152 && r3 <= 159) s3 = 1, a3 = 86020;
              else if (r3 >= 176 && r3 <= 191) s3 = 1, a3 = 86060;
              else if (r3 >= 192 && r3 <= 207) s3 = 1, a3 = 86019;
              else if (r3 >= 32 && r3 <= 63) s3 = 3, a3 = 94208;
              else {
                if (!(r3 >= 64853 && r3 <= 64863)) return;
                s3 = 0, a3 = 70;
              }
          }
      }
      const o2 = e3.createStream();
      o2.codecpar.codecType = s3, o2.codecpar.codecId = a3, o2.timeBase.den = 9e4, o2.timeBase.num = 1;
      const c2 = o2.privData = { streamId: i3, streamType: t3, filter: null, paddingPES: null };
      return 65543 !== a3 && 65542 !== a3 || (o2.codecpar.chLayout.nbChannels = 1, o2.codecpar.sampleRate = 8e3, o2.codecpar.chLayout.order = 1, o2.codecpar.chLayout.u.mask = BigInt(4)), 27 !== o2.codecpar.codecId && 173 !== o2.codecpar.codecId && 196 !== o2.codecpar.codecId || (o2.codecpar.flags |= 1), 86017 === o2.codecpar.codecId ? c2.filter = new D.A() : 86019 === o2.codecpar.codecId ? c2.filter = new z.A() : 86020 === o2.codecpar.codecId ? c2.filter = new $.A() : 86018 === o2.codecpar.codecId && (c2.filter = new F.A()), c2.filter && c2.filter.init(o2.codecpar[n.o9], o2.timeBase[n.o9]), o2;
    }
    async readHeader(e3) {
      const t3 = await e3.ioReader.peekString(6);
      if ("IMKH" === t3.substring(0, 4) ? (this.context.imkhCctv = true, await e3.ioReader.skip(4)) : "Sofdec" === t3 && (this.context.sofdec = true, await e3.ioReader.skip(6)), 442 !== await e3.ioReader.peekUint32()) return d2.z3("the file format is not mpegps", N, 389), h.LR;
      if (1 & e3.ioReader.flags) {
        const t4 = e3.ioReader.getPos(), i3 = BigInt(5e5);
        let r3 = await e3.ioReader.fileSize() - i3;
        r3 < t4 && (r3 = t4), await e3.ioReader.seek(r3);
        try {
          for (this.context.pes.pts = m.Dh; ; ) await this.readPES(e3), (0, l.A)(this.context.pes), this.context.pes.pts !== m.Dh && this.context.lastPtsMap.set(this.context.pes.streamId, this.context.pes.pts);
        } catch (i4) {
          await e3.ioReader.seek(t4);
        }
      }
      return this.context.ioEnded = false, 0;
    }
    checkExtradata(e3, t3) {
      if (86017 === t3.codecpar.codecId && t3.codecpar.sampleRate === m.N_) {
        const i3 = (0, p.iI)(e3), r3 = i3[1] >>> 3 & 3, a3 = (6 & i3[1]) >> 1, s3 = (12 & i3[2]) >>> 2, n2 = 3 & ~(i3[3] >>> 6) ? 2 : 1, o2 = w.Au(a3), c2 = w.Y2(r3, s3);
        t3.codecpar.profile = o2, t3.codecpar.sampleRate = c2, t3.codecpar.chLayout.nbChannels = n2;
      } else if (86019 === t3.codecpar.codecId && t3.codecpar.sampleRate === m.N_) {
        const i3 = (0, p.iI)(e3), r3 = S.R(i3);
        L.ai(r3) || (t3.codecpar.sampleRate = r3.sampleRate, t3.codecpar.chLayout.nbChannels = r3.channels, t3.codecpar.bitrate = BigInt(r3.bitrate));
      } else if (86020 === t3.codecpar.codecId && t3.codecpar.sampleRate === m.N_) {
        const i3 = (0, p.iI)(e3), r3 = T.R(i3);
        L.ai(r3) || (t3.codecpar.sampleRate = r3.sampleRate, t3.codecpar.chLayout.nbChannels = r3.channels, t3.codecpar.bitrate = BigInt(0 | r3.bitrate));
      } else if (!t3.codecpar.extradata) {
        let i3 = (0, p.rU)(e3, 1);
        i3 && (t3.codecpar.extradata = (0, B.sY)(o.f[25](i3 + 4)), (0, R.Mr)(t3.codecpar.extradata, o.f[20](i3), o.f[25](i3 + 4)), t3.codecpar.extradataSize = 0 | o.f[25](i3 + 4), (0, p.Is)(e3, 1), 86018 === t3.codecpar.codecId ? I.XC(t3, (0, R.JW)(t3.codecpar.extradata, t3.codecpar.extradataSize)) : 86076 === t3.codecpar.codecId && P.XC(t3, (0, R.JW)(t3.codecpar.extradata, t3.codecpar.extradataSize)));
      }
    }
    parseSlice(e3, t3, i3, r3) {
      const a3 = (0, C.A)(Uint8Array, e3.buffers), s3 = r3.privData;
      1 === r3.codecpar.codecType && c.M[15](i3 + 36, 1 | o.f[15](i3 + 36));
      const n2 = r3.codecpar.codecId;
      27 !== n2 && 173 !== n2 && 196 !== n2 || c.M[15](i3 + 36, 64 | o.f[15](i3 + 36)), c.M[15](i3 + 32, r3.index), c.M[17](i3 + 16, e3.dts), c.M[17](i3 + 8, e3.pts), c.M[17](i3 + 56, e3.pos), c.M[15](i3 + 76, 9e4), c.M[15](i3 + 72, 1), r3.startTime === m.Dh && (r3.startTime = o.f[17](i3 + 8) || o.f[17](i3 + 16), this.context.lastPtsMap.has(s3.streamId) && (r3.duration = this.context.lastPtsMap.get(s3.streamId) - r3.startTime));
      const l2 = (0, B.sY)(a3.length);
      if ((0, R.lW)(l2, a3.length, a3), (0, p.NX)(i3, l2, a3.length), s3.filter) {
        let e4 = 0;
        if (e4 = s3.filter.sendAVPacket(i3), e4 < 0) return d2.z3("send avpacket to bsf failed", N, 528), h.LR;
        if (e4 = s3.filter.receiveAVPacket(i3), e4 < 0) return e4;
        for (c.M[15](i3 + 76, 9e4), c.M[15](i3 + 72, 1), c.M[15](i3 + 32, r3.index), this.checkExtradata(i3, r3); ; ) {
          const i4 = this.cacheAVPacket || (0, p._5)();
          if (e4 = s3.filter.receiveAVPacket(i4), 0 !== e4) {
            this.cacheAVPacket = i4;
            break;
          }
          c.M[15](i4 + 76, 9e4), c.M[15](i4 + 72, 1), c.M[15](i4 + 32, r3.index), this.checkExtradata(i4, r3), t3.interval.packetBuffer.push(i4), this.cacheAVPacket = 0;
        }
      } else if (2 === r3.codecpar.codecId) M.K(i3) && c.M[15](i3 + 36, 1 | o.f[15](i3 + 36));
      else if (27 === r3.codecpar.codecId) {
        if (!r3.codecpar.extradata) {
          const e4 = b.sL((0, p.iI)(i3));
          e4 && (r3.codecpar.extradata = (0, B.sY)(e4.length), (0, R.lW)(r3.codecpar.extradata, e4.length, e4), r3.codecpar.extradataSize = e4.length, b.XC(r3, e4));
        }
        b.KD(i3) && c.M[15](i3 + 36, 1 | o.f[15](i3 + 36));
      } else if (173 === r3.codecpar.codecId) {
        if (!r3.codecpar.extradata) {
          const e4 = k.sL((0, p.iI)(i3));
          e4 && (r3.codecpar.extradata = (0, B.sY)(e4.length), (0, R.lW)(r3.codecpar.extradata, e4.length, e4), r3.codecpar.extradataSize = e4.length, k.XC(r3, e4));
        }
        k.KD(i3) && c.M[15](i3 + 36, 1 | o.f[15](i3 + 36));
      } else if (196 === r3.codecpar.codecId) {
        if (!r3.codecpar.extradata) {
          const e4 = x.sL((0, p.iI)(i3));
          e4 && (r3.codecpar.extradata = (0, B.sY)(e4.length), (0, R.lW)(r3.codecpar.extradata, e4.length, e4), r3.codecpar.extradataSize = e4.length, x.XC(r3, e4));
        }
        x.KD(i3) && c.M[15](i3 + 36, 1 | o.f[15](i3 + 36));
      }
      return 0;
    }
    getMpegVideoNextFrame(e3, t3, i3) {
      for (; ; ) {
        const r3 = U.Ky(t3, e3);
        if (!(r3.offset >= 0)) return -1;
        if (27 === i3.codecpar.codecId && 4 === r3.startCode || 2 === i3.codecpar.codecId && 3 === r3.startCode && r3.offset + 3 < t3.length && (t3[r3.offset + 3] < 1 || t3[r3.offset + 3] > 175) && 181 !== t3[r3.offset + 3]) return 183 === t3[r3.offset + 3] ? r3.offset + 4 : r3.offset;
        if (2 === i3.codecpar.codecId && 4 === r3.startCode && r3.offset + 4 < t3.length && (t3[r3.offset + 4] < 1 || t3[r3.offset + 4] > 175) && 181 !== t3[r3.offset + 4]) return 183 === t3[r3.offset + 4] ? r3.offset + 5 : r3.offset + 1;
        e3 = r3.offset + 3;
      }
    }
    getMpegAudioNextFrame(e3, t3) {
      let i3 = 0, r3 = 2;
      86019 === t3.codecpar.codecId ? i3 = 11 : 86017 === t3.codecpar.codecId ? i3 = 255 : (i3 = 127, r3 = 4);
      for (let a3 = 0; a3 < e3.length - r3; a3++) if (e3[a3] === i3) {
        const i4 = e3[a3 + 1], r4 = 2;
        if (!(86017 !== t3.codecpar.codecId || 224 & ~i4)) {
          if (0 !== a3) {
            let t4 = 0, i5 = 0;
            for (; ; ) {
              const s3 = new E.Vz();
              E.qg(s3, e3[a3 + i5] << 24 | e3[a3 + i5 + 1] << 16 | e3[a3 + i5 + 2] << 8 | e3[a3 + i5 + 3]);
              const n2 = e3[a3 + i5 + 1] >>> 3 & 3, o2 = (12 & e3[a3 + i5 + 2]) >>> 2, c2 = w.Y2(n2, o2);
              let d3 = E.CM(s3, c2);
              if (!(d3 && a3 + i5 + d3 < e3.length - 2 && 255 === e3[a3 + i5 + d3]) || 224 & ~e3[a3 + i5 + d3 + 1]) break;
              if (t4++, i5 += d3, t4 === r4) break;
            }
            if (t4 === r4) return a3;
            continue;
          }
          break;
        }
        if (86019 === t3.codecpar.codecId && 119 === i4) {
          if (0 !== a3) {
            let t4 = 0, i5 = 0;
            for (; ; ) {
              const s3 = S.R(e3.subarray(a3 + i5));
              if (L.ai(s3) || !(a3 + i5 + s3.frameSize < e3.length - 2) || 11 !== e3[a3 + i5 + s3.frameSize] || 119 !== e3[a3 + i5 + s3.frameSize + 1]) break;
              if (t4++, i5 += s3.frameSize, t4 === r4) break;
            }
            if (t4 === r4) return a3;
            continue;
          }
          break;
        }
        if (86020 === t3.codecpar.codecId && 254 === i4 && 128 === e3[a3 + 2] && 129 === e3[a3 + 3]) {
          if (0 !== a3) {
            let t4 = 0, i5 = 0;
            for (; ; ) {
              const s3 = T.R(e3.subarray(a3 + i5));
              if (L.ai(s3) || !(a3 + i5 + s3.frameSize < e3.length - 4) || 127 !== e3[a3 + i5 + s3.frameSize] || 254 !== e3[a3 + i5 + s3.frameSize + 1] || 128 !== e3[a3 + i5 + s3.frameSize + 2] || 129 !== e3[a3 + i5 + s3.frameSize + 3]) break;
              if (t4++, i5 += s3.frameSize, t4 === r4) break;
            }
            if (t4 === r4) return a3;
            continue;
          }
          break;
        }
      }
      return -1;
    }
    async readAVPacket_(e3, t3) {
      const i3 = (i4, r3) => {
        let a3 = this.context.slices.get(i4.streamId);
        if (a3 || (a3 = { pts: -BigInt(1), dts: -BigInt(1), pos: -BigInt(1), buffers: [] }, this.context.slices.set(i4.streamId, a3)), this.context.pes.dts !== m.Dh && a3.buffers.length) {
          let s3 = 0;
          if (0 === r3.codecpar.codecType) {
            let e4 = this.getMpegVideoNextFrame(0, this.context.pes.payload, r3);
            if (e4 > 0) a3.buffers.push(this.context.pes.payload.subarray(0, e4)), this.context.pes.payload = this.context.pes.payload.subarray(e4);
            else if (e4 < 0) return i4.paddingPES = y.X$({}, this.context.pes), true;
          }
          if (2 === r3.codecpar.codecId) {
            let i5 = (0, C.A)(Uint8Array, a3.buffers);
            const s4 = [];
            for (; ; ) {
              let e4 = 0, t4 = 0, a4 = false;
              for (; ; ) {
                const s5 = this.getMpegVideoNextFrame(t4, i5, r3);
                if (!(s5 >= 0)) break;
                if (a4) {
                  e4 = s5;
                  break;
                }
                0 === i5[s5 + 3] && (a4 = true), t4 = s5 + 3;
              }
              if (!(e4 > 0)) break;
              s4.push(i5.subarray(0, e4)), i5 = i5.subarray(e4);
            }
            if (s4.push(i5), s4.length > 1) {
              const i6 = (this.context.pes.dts - a3.dts) / BigInt(Math.floor(s4.length)), n2 = (this.context.pes.pts - a3.pts) / BigInt(Math.floor(s4.length));
              for (let o2 = 0; o2 < s4.length; o2++) if (a3.buffers.length = 0, a3.buffers.push(s4[o2]), a3.dts += i6 * BigInt(Math.floor(o2)), a3.pts += n2 * BigInt(Math.floor(o2)), 0 === o2) this.parseSlice(a3, e3, t3, r3);
              else {
                const t4 = (0, p._5)();
                this.parseSlice(a3, e3, t4, r3), e3.interval.packetBuffer.push(t4);
              }
            } else a3.buffers = s4, this.parseSlice(a3, e3, t3, r3);
          } else s3 = this.parseSlice(a3, e3, t3, r3);
          return a3.buffers.length = 0, this.context.paddingPES ? this.context.paddingPES.payload = this.context.pes.payload : (a3.buffers.push(this.context.pes.payload), a3.dts = this.context.pes.dts, a3.pts = this.context.pes.pts, a3.pos = this.context.pes.pos), s3 === h.LT;
        }
        if (this.context.pes.dts !== m.Dh) {
          if (a3.dts = this.context.pes.dts, a3.pts = this.context.pes.pts, a3.pos = this.context.pes.pos, 0 === r3.codecpar.codecType) {
            const e4 = this.getMpegVideoNextFrame(0, this.context.pes.payload, r3);
            if (e4 > 0) this.context.pes.payload = this.context.pes.payload.subarray(e4);
            else if (e4 < 0) return i4.paddingPES = y.X$({}, this.context.pes), true;
          } else if (86019 === r3.codecpar.codecId || 86020 === r3.codecpar.codecId || 86017 === r3.codecpar.codecId) {
            const e4 = this.getMpegAudioNextFrame(this.context.pes.payload, r3);
            e4 > 0 && (this.context.pes.payload = this.context.pes.payload.subarray(e4));
          }
        }
        return a3.buffers.push(this.context.pes.payload), true;
      };
      for (; ; ) {
        let t4 = 0;
        this.context.paddingPES ? (this.context.pes = this.context.paddingPES, this.context.paddingPES = null) : (t4 = await this.readPES(e3), (0, l.A)(this.context.pes), 445 === t4 && (t4 = this.context.pes.payload[0], 11 === t4 ? 119 === this.context.pes.payload[1] ? t4 = 128 : this.context.pes.payload = this.context.pes.payload.subarray(1) : this.context.pes.payload = t4 >= 128 && t4 <= 207 ? this.context.pes.payload.subarray(4) : this.context.pes.payload.subarray(1), this.context.pes.streamId = 255 & t4));
        let r3 = e3.streams.find((e4) => e4.privData.streamId === this.context.pes.streamId);
        if (!r3) {
          const i4 = 255 & t4;
          r3 = this.createStream(e3, this.context.psmType.get(i4), i4, t4);
        }
        if (r3) {
          const e4 = r3.privData;
          if (!this.context.pes.payload) continue;
          if (e4.paddingPES && (e4.paddingPES.payload = (0, C.A)(Uint8Array, [e4.paddingPES.payload, this.context.pes.payload]), this.context.pes.dts === m.Dh ? (this.context.pes = e4.paddingPES, e4.paddingPES = null) : (this.context.paddingPES = this.context.pes, this.context.pes = e4.paddingPES, e4.paddingPES = null)), i3(e4, r3)) continue;
          return 0;
        }
      }
    }
    async readAVPacket(e3, t3) {
      try {
        if (this.context.ioEnded) {
          if (this.context.slices.size) {
            let i3, r3;
            if (this.context.slices.forEach((t4, a3) => {
              t4.buffers.length && (r3 = e3.streams.find((e4) => e4.privData.streamId === a3), r3 && (i3 = t4));
            }), i3) return this.parseSlice(i3, e3, t3, r3), i3.buffers.length = 0, i3.pts = i3.dts = i3.pos = -BigInt(1), 0;
          }
          return -1048576;
        }
        return await this.readAVPacket_(e3, t3);
      } catch (i3) {
        return -1048576 !== e3.ioReader.error && -1048572 !== e3.ioReader.error ? (d2.z3("read packet error, ".concat(i3), N, 1033), h.LR) : (this.context.ioEnded = true, this.readAVPacket(e3, t3));
      }
    }
    async syncPSPacket(e3) {
      let t3 = m.Dh;
      try {
        for (this.context.pes.pts = m.Dh; this.context.pes.pts === m.Dh; ) await this.readPES(e3), (0, l.A)(this.context.pes), t3 = this.context.pes.pos;
      } catch (e4) {
        t3 = m.Dh;
      }
      t3 !== m.Dh && await e3.ioReader.seek(t3);
    }
    async seek(e3, t3, i3, r3) {
      let a3 = e3.ioReader.getPos();
      if (this.context.slices.forEach((e4) => {
        e4.buffers.length && e4.pos < a3 && (a3 = e4.pos), e4.buffers.length = 0, e4.pts = e4.dts = e4.pos = -BigInt(1);
      }), e3.streams.forEach((e4) => {
        const t4 = e4.privData;
        t4.filter && t4.filter.reset();
      }), 2 & r3) {
        const t4 = await e3.ioReader.fileSize();
        return t4 <= BigInt(0) ? BigInt(h.E$) : (i3 < BigInt(0) ? i3 = BigInt(0) : i3 > t4 && (i3 = t4), await e3.ioReader.seek(i3), 4 & r3 || await this.syncPSPacket(e3), this.context.ioEnded = false, a3);
      }
      {
        if (t3 && t3.sampleIndexes.length) {
          let r5 = A.El(t3.sampleIndexes, (e4) => e4.pts > i3 ? -1 : 1);
          if (r5 > 0 && (0, v.k)(i3 - t3.sampleIndexes[r5 - 1].pts, t3.timeBase, m.i0) < BigInt(1e4)) return d2.Yz("seek in sampleIndexes, found index: ".concat(r5, ", pts: ").concat(t3.sampleIndexes[r5 - 1].pts, ", pos: ").concat(t3.sampleIndexes[r5 - 1].pos), N, 1117), await e3.ioReader.seek(t3.sampleIndexes[r5 - 1].pos), this.context.ioEnded = false, a3;
        }
        d2.Yz("not found any keyframe index, try to seek in bytes", N, 1124);
        let r4 = await (0, g.A)(e3, t3, i3, BigInt(0), this.readAVPacket.bind(this), this.syncPSPacket.bind(this));
        return r4 >= 0 && (this.context.ioEnded = false), r4;
      }
    }
    getAnalyzeStreamsCount() {
      return 1;
    }
  }
}, 59331: (e2, t2, i2) => {
  i2.d(t2, { A: () => z });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(4624), o = i2(19770), c = i2(53783), d2 = i2(27274), h = i2(39e3), l = i2(9705), u = i2(51660), f = i2(39144), p = i2(52088), m = i2(6403), g = i2(85947), v = i2(86191), A = i2(71517), y = i2(77231), w = i2(52071), b = i2(44328), k = i2(72739), x = i2(64093), I = i2(62815), P = i2(67659), S = i2(59166), T = i2(95832), M = i2(22576), B = i2(87518), R = i2(43290), _ = i2(37837), C = i2(14686), U = i2(67672), D = i2(60264), E = i2(92647);
  const L = "src/avformat/formats/IMpegtsFormat.ts";
  class z extends g.A {
    constructor() {
      super(), (0, r2.A)(this, "type", 2), (0, r2.A)(this, "context", void 0), (0, r2.A)(this, "firstTSPacketPos", void 0), (0, r2.A)(this, "cacheAVPacket", void 0), this.context = (0, o.A)();
    }
    init(e3) {
      e3.ioReader && e3.ioReader.setEndian(true), this.cacheAVPacket = 0;
    }
    async destroy(e3) {
      this.cacheAVPacket && ((0, A.Qe)(this.cacheAVPacket), this.cacheAVPacket = 0), k.__(e3.streams, (e4) => {
        const t3 = e4.privData;
        t3.filter && (t3.filter.destroy(), t3.filter = null);
      });
    }
    async readHeader(e3) {
      try {
        let t3 = 0, i3 = await c.q(e3.ioReader);
        for (i3 || (i3 = d2.ZT), this.context.tsPacketSize = i3, this.context.tsPacketSize !== d2.VG && 71 !== await e3.ioReader.peekUint8() && await this.syncTSPacket(e3, false); !this.context.hasPAT || !this.context.hasPMT; ) {
          const t4 = await c.$(e3.ioReader, this.context);
          t4.payload && (0 !== t4.pid && t4.pid !== this.context.currentPmtPid && 134 !== this.context.pmt.pid2StreamType.get(t4.pid) || (0, h.A)(t4, this.context));
        }
        return this.context.hasPAT && this.context.hasPMT ? (this.firstTSPacketPos = e3.ioReader.getPos(), t3) : l.LR;
      } catch (t3) {
        return n.z3(t3.message, L, 148), e3.ioReader.error;
      }
    }
    checkExtradata(e3, t3) {
      if (!t3.codecpar.extradata) {
        let i3 = (0, A.rU)(e3, 1);
        if (!i3) return;
        t3.codecpar.extradata = (0, _.sY)(a2.f[25](i3 + 4)), (0, C.Mr)(t3.codecpar.extradata, a2.f[20](i3), a2.f[25](i3 + 4)), t3.codecpar.extradataSize = 0 | a2.f[25](i3 + 4), (0, A.Is)(e3, 1), 86018 === t3.codecpar.codecId ? T.XC(t3, (0, C.JW)(t3.codecpar.extradata, t3.codecpar.extradataSize)) : 86076 === t3.codecpar.codecId && M.XC(t3, (0, C.JW)(t3.codecpar.extradata, t3.codecpar.extradataSize));
      }
    }
    handlePES(e3, t3, i3, r3) {
      (i3.randomAccessIndicator || 1 === r3.codecpar.codecType) && s2.M[15](t3 + 36, 1 | a2.f[15](t3 + 36));
      const o2 = r3.privData;
      27 !== r3.codecpar.codecId && 173 !== r3.codecpar.codecId && 196 !== r3.codecpar.codecId || s2.M[15](t3 + 36, 64 | a2.f[15](t3 + 36)), s2.M[15](t3 + 32, r3.index), s2.M[17](t3 + 16, i3.dts), s2.M[17](t3 + 8, i3.pts), s2.M[17](t3 + 56, i3.pos), s2.M[15](t3 + 76, 9e4), s2.M[15](t3 + 72, 1), s2.M[15](t3 + 36, a2.f[15](t3 + 36) | i3.flags), r3.startTime === y.Dh && (r3.startTime = a2.f[17](t3 + 8) || a2.f[17](t3 + 16));
      const c2 = (0, _.sY)(i3.payload.length);
      if ((0, C.lW)(c2, i3.payload.length, i3.payload), (0, A.NX)(t3, c2, i3.payload.length), o2.filter) {
        let i4 = 0;
        if (i4 = o2.filter.sendAVPacket(t3), i4 < 0) return n.z3("send avpacket to bsf failed", L, 209), l.LR;
        if (i4 = o2.filter.receiveAVPacket(t3), i4 < 0) return this.context.ioEnd ? (n.z3("receive avpacket from bsf failed", L, 219), l.LR) : -1048575;
        for (s2.M[15](t3 + 76, 9e4), s2.M[15](t3 + 72, 1), s2.M[15](t3 + 32, r3.index), this.checkExtradata(t3, r3); ; ) {
          const t4 = this.cacheAVPacket || (0, A._5)();
          if (i4 = o2.filter.receiveAVPacket(t4), 0 !== i4) {
            this.cacheAVPacket = t4;
            break;
          }
          s2.M[15](t4 + 76, 9e4), s2.M[15](t4 + 72, 1), s2.M[15](t4 + 32, r3.index), this.checkExtradata(t4, r3), e3.interval.packetBuffer.push(t4), this.cacheAVPacket = 0;
        }
      } else {
        const e4 = this.context.pmt.pid2StreamType.get(o2.pid);
        if (3 === e4 || 4 === e4) {
          s2.M[15](t3 + 36, 1 | a2.f[15](t3 + 36));
          const e5 = (0, A.iI)(t3), i4 = e5[1] >>> 3 & 3, n2 = (6 & e5[1]) >> 1, o3 = (12 & e5[2]) >>> 2, c3 = 3 & ~(e5[3] >>> 6) ? 2 : 1, d3 = x.Au(n2), h2 = x.Y2(i4, o3);
          (r3.codecpar.profile !== d3 || r3.codecpar.sampleRate !== h2 || r3.codecpar.chLayout.nbChannels !== c3) && (r3.codecpar.profile = d3, r3.codecpar.sampleRate = h2, r3.codecpar.chLayout.nbChannels = c3);
        } else if (27 === r3.codecpar.codecId) {
          if (!r3.codecpar.extradata) {
            const e5 = I.sL((0, A.iI)(t3));
            e5 && (r3.codecpar.extradata = (0, _.sY)(e5.length), (0, C.lW)(r3.codecpar.extradata, e5.length, e5), r3.codecpar.extradataSize = e5.length, I.XC(r3, e5), s2.M[15](t3 + 36, 1 | a2.f[15](t3 + 36)));
          }
        } else if (173 === r3.codecpar.codecId) {
          if (!r3.codecpar.extradata) {
            const e5 = P.sL((0, A.iI)(t3));
            e5 && (r3.codecpar.extradata = (0, _.sY)(e5.length), (0, C.lW)(r3.codecpar.extradata, e5.length, e5), r3.codecpar.extradataSize = e5.length, P.XC(r3, e5), s2.M[15](t3 + 36, 1 | a2.f[15](t3 + 36)));
          }
        } else if (196 === r3.codecpar.codecId) {
          if (!r3.codecpar.extradata) {
            const e5 = S.sL((0, A.iI)(t3));
            e5 && (r3.codecpar.extradata = (0, _.sY)(e5.length), (0, C.lW)(r3.codecpar.extradata, e5.length, e5), r3.codecpar.extradataSize = e5.length, S.XC(r3, e5), s2.M[15](t3 + 36, 1 | a2.f[15](t3 + 36)));
          }
        } else if (86019 === r3.codecpar.codecId || 86056 === r3.codecpar.codecId) {
          if (r3.codecpar.sampleRate === y.N_) {
            const e5 = B.R((0, A.iI)(t3));
            U.ai(e5) || (r3.codecpar.sampleRate = e5.sampleRate, r3.codecpar.chLayout.nbChannels = e5.channels);
          }
        } else if (86020 === r3.codecpar.codecId && r3.codecpar.sampleRate === y.N_) {
          const e5 = R.R((0, A.iI)(t3));
          U.ai(e5) || (r3.codecpar.sampleRate = e5.sampleRate, r3.codecpar.chLayout.nbChannels = e5.channels);
        }
      }
      return 0;
    }
    parsePESSlice(e3, t3, i3, r3) {
      const a3 = r3.privData;
      let s3 = (0, f.A)(i3), n2 = (0, u.A)(s3);
      if (n2) return n2;
      if ((0, p.A)(i3), 27 === r3.codecpar.codecId || 173 === r3.codecpar.codecId || 196 === r3.codecpar.codecId) {
        if (!a3.pendingPES && !this.context.ioEnd) return a3.pendingPES = s3, -1048575;
        if (a3.pendingPES) {
          let e4 = 0;
          for (; ; ) {
            const t4 = D.Ky(s3.payload, e4);
            if (!(t4.offset >= 0)) {
              e4 = -1;
              break;
            }
            if (4 === t4.startCode) {
              e4 = t4.offset;
              break;
            }
            e4 += 3;
          }
          if (e4 >= 0) {
            e4 > 0 && (a3.pendingPES.payload = (0, E.A)(Uint8Array, [a3.pendingPES.payload, s3.payload.subarray(0, e4)]), s3.payload = s3.payload.subarray(e4));
            let t4 = a3.pendingPES;
            a3.pendingPES = s3, s3 = t4;
          } else {
            if (a3.pendingPES.payload = (0, E.A)(Uint8Array, [a3.pendingPES.payload, s3.payload]), !this.context.ioEnd) return -1048575;
            s3 = a3.pendingPES, a3.pendingPES = null;
          }
        }
      }
      return this.handlePES(e3, t3, s3, r3);
    }
    async readAVPacket_(e3, t3) {
      if (this.context.ioEnd) {
        const i4 = () => {
          const i5 = e3.streams.find((e4) => !!e4.privData.pendingPES);
          if (i5) {
            const r5 = i5.privData, a5 = r5.pendingPES;
            return r5.pendingPES = null, this.handlePES(e3, t3, a5, i5);
          }
          return -1048576;
        };
        if (!this.context.tsSliceQueueMap.size) return i4();
        const r4 = this.context.tsSliceQueueMap.values();
        let a4;
        for (; ; ) {
          const e4 = r4.next();
          if (e4.value && e4.value.slices.length) {
            a4 = e4.value;
            break;
          }
          if (e4.done) break;
        }
        if (!a4) return i4();
        const s4 = e3.streams.find((e4) => e4.privData.pid === a4.pid);
        return s4 ? this.parsePESSlice(e3, t3, a4, s4) : ((0, p.A)(a4), this.readAVPacket_(e3, t3));
      }
      try {
        for (; ; ) {
          if (this.context.tsPacketSize !== d2.VG && 71 !== await e3.ioReader.peekUint8()) {
            try {
              await e3.ioReader.flush();
            } catch (e4) {
            }
            await this.syncTSPacket(e3, false);
          }
          const n2 = await c.$(e3.ioReader, this.context);
          if (!n2.payload) continue;
          if (0 === n2.pid || n2.pid === this.context.currentPmtPid || 134 === this.context.pmt.pid2StreamType.get(n2.pid)) {
            (0, h.A)(n2, this.context);
            continue;
          }
          const o2 = this.context.pmt.pid2StreamType.get(n2.pid);
          if (!o2) continue;
          let l2 = e3.streams.find((e4) => e4.privData.pid === n2.pid);
          l2 || (l2 = e3.createStream(), (0, v.A)(n2.pid, l2, this.context));
          let u2 = n2.payload[4] << 8 | n2.payload[5], f2 = this.context.tsSliceQueueMap.get(n2.pid), p2 = false;
          if (f2) {
            if (f2.totalLength > 0 && n2.payloadUnitStartIndicator) {
              const a4 = this.parsePESSlice(e3, t3, f2, l2);
              if (a4 < 0) {
                if (-1048575 === a4) {
                  var i3, r3;
                  f2.randomAccessIndicator = null !== (i3 = null === (r3 = n2.adaptationFieldInfo) || void 0 === r3 ? void 0 : r3.randomAccessIndicator) && void 0 !== i3 ? i3 : 0, f2.pos = n2.pos, f2.pid = n2.pid, f2.streamType = o2, f2.expectedLength = 0 === u2 ? 0 : u2 + 6, f2.slices.push(n2.payload), f2.totalLength += n2.payload.length;
                  continue;
                }
                return a4;
              }
              p2 = true;
            }
          } else {
            if (!n2.payloadUnitStartIndicator) continue;
            f2 = new m.pi(), this.context.tsSliceQueueMap.set(n2.pid, f2);
          }
          var a3, s3;
          if (n2.payloadUnitStartIndicator && (f2.randomAccessIndicator = null !== (a3 = null === (s3 = n2.adaptationFieldInfo) || void 0 === s3 ? void 0 : s3.randomAccessIndicator) && void 0 !== a3 ? a3 : 0, f2.pos = n2.pos, f2.pid = n2.pid, f2.streamType = o2, f2.expectedLength = 0 === u2 ? 0 : u2 + 6), f2.slices.push(n2.payload), f2.totalLength += n2.payload.length, f2.expectedLength > 0 && f2.expectedLength === f2.totalLength) {
            const i4 = this.parsePESSlice(e3, t3, f2, l2);
            if (i4 < 0) {
              if (-1048575 === i4) continue;
              return i4;
            }
            p2 = true;
          }
          if (p2) return 0;
        }
      } catch (i4) {
        return -1048576 !== e3.ioReader.error || this.context.ioEnd ? -1048576 === e3.ioReader.error || -1048572 === e3.ioReader.error ? e3.ioReader.error : (n.z3("read packet error, ".concat(i4), L, 568), l.LR) : (this.context.ioEnd = true, this.readAVPacket_(e3, t3));
      }
    }
    async readAVPacket(e3, t3) {
      try {
        return this.readAVPacket_(e3, t3);
      } catch (t4) {
        return -1048576 !== e3.ioReader.error && -1048572 !== e3.ioReader.error && n.z3(t4.message, L, 583), e3.ioReader.error;
      }
    }
    async syncTSPacket(e3, t3 = true) {
      let i3 = y.Dh;
      for (; ; ) try {
        if (71 === await e3.ioReader.readUint8()) {
          i3 = this.context.tsPacketSize === d2.VG ? e3.ioReader.getPos() - BigInt(5) : e3.ioReader.getPos() - BigInt(1);
          let t4 = 0, r3 = e3.ioReader.getPos();
          for (; t4 <= 10 && (await e3.ioReader.skip(this.context.tsPacketSize - 1), 71 === await e3.ioReader.readUint8()); ) t4++;
          if (t4 < 10) {
            i3 = y.Dh, await e3.ioReader.seek(r3);
            continue;
          }
          break;
        }
      } catch (e4) {
        i3 = y.Dh;
        break;
      }
      if (i3 !== y.Dh && (await e3.ioReader.seek(i3), t3)) for (; ; ) {
        if ((await c.$(e3.ioReader, this.context)).payloadUnitStartIndicator) {
          await e3.ioReader.seek(i3), e3.streams.forEach((e4) => {
            let t4 = this.context.tsSliceQueueMap.get(e4.privData.pid);
            t4 && (0, p.A)(t4);
            const i4 = e4.privData;
            i4.pendingPES = null, i4.filter && i4.filter.reset();
          });
          break;
        }
        i3 = e3.ioReader.getPos();
      }
    }
    async seek(e3, t3, i3, r3) {
      let a3 = e3.ioReader.getPos();
      this.context.tsSliceQueueMap.forEach((e4) => {
        e4.slices.length && e4.pos < a3 && (a3 = e4.pos);
      }), e3.streams.forEach((e4) => {
        var t4;
        const i4 = e4.privData;
        (null === (t4 = i4.pendingPES) || void 0 === t4 ? void 0 : t4.pos) < a3 && (a3 = i4.pendingPES.pos);
      });
      const s3 = () => {
        this.context.tsSliceQueueMap.forEach((e4) => {
          (0, p.A)(e4);
        }), e3.streams.forEach((e4) => {
          const t4 = e4.privData;
          t4.pendingPES = null, t4.filter && t4.filter.reset();
        });
      };
      if (this.context.pmt.pid2StreamType.forEach((e4, t4) => {
        this.context.tsSliceQueueMap.delete(t4);
      }), 16 & r3) {
        const r4 = (0, b.k)(i3, t3.timeBase, y.i0);
        return await e3.ioReader.seek(r4, true), this.context.ioEnd = false, s3(), BigInt(0);
      }
      if (2 & r3) {
        const t4 = await e3.ioReader.fileSize();
        return t4 <= BigInt(0) ? BigInt(l.E$) : (i3 < BigInt(0) ? i3 = BigInt(0) : i3 > t4 && (i3 = t4), await e3.ioReader.seek(i3), 4 & r3 || await this.syncTSPacket(e3), this.context.ioEnd = false, s3(), a3);
      }
      {
        if (t3 && t3.sampleIndexes.length) {
          let r5 = k.El(t3.sampleIndexes, (e4) => e4.pts > i3 ? -1 : 1);
          if (r5 > 0 && (0, b.k)(i3 - t3.sampleIndexes[r5 - 1].pts, t3.timeBase, y.i0) < BigInt(1e4)) return n.Yz("seek in sampleIndexes, found index: ".concat(r5, ", pts: ").concat(t3.sampleIndexes[r5 - 1].pts, ", pos: ").concat(t3.sampleIndexes[r5 - 1].pos), L, 745), await e3.ioReader.seek(t3.sampleIndexes[r5 - 1].pos), this.context.ioEnd = false, s3(), a3;
        }
        n.Yz("not found any keyframe index, try to seek in bytes", L, 753);
        let r4 = await (0, w.A)(e3, t3, i3, this.firstTSPacketPos, this.readAVPacket.bind(this), this.syncTSPacket.bind(this));
        return r4 >= 0 && (this.context.ioEnd = false, s3()), r4;
      }
    }
    getAnalyzeStreamsCount() {
      var e3, t3;
      return null !== (e3 = null === (t3 = this.context.pmt) || void 0 === t3 ? void 0 : t3.pid2StreamType.size) && void 0 !== e3 ? e3 : 1;
    }
  }
}, 29118: (e2, t2, i2) => {
  i2.d(t2, { A: () => I });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(38743), o = i2(4624), c = i2(54712), d2 = i2(87400), h = i2(9705), l = i2(92647), u = i2(85947), f = i2(14686), p = i2(37837), m = i2(71517), g = i2(82348), v = i2(35336), A = i2(77231), y = i2(52071), w = i2(44328), b = i2(79630), k = i2(43607);
  const x = "src/avformat/formats/IOggFormat.ts";
  class I extends u.A {
    constructor() {
      super(), (0, r2.A)(this, "type", 4), (0, r2.A)(this, "headerPagesPayload", void 0), (0, r2.A)(this, "page", void 0), (0, r2.A)(this, "curSegIndex", void 0), (0, r2.A)(this, "curSegStart", void 0), (0, r2.A)(this, "segCount", void 0), (0, r2.A)(this, "segIndex", void 0), (0, r2.A)(this, "currentPts", void 0), (0, r2.A)(this, "firstPos", void 0), (0, r2.A)(this, "firstGranulePosition", void 0), (0, r2.A)(this, "paddingPayload", void 0), this.page = new n.B(), this.headerPagesPayload = [];
    }
    init(e3) {
      e3.ioReader && e3.ioReader.setEndian(false), e3.ioReader && e3.ioReader.setEndian(false), this.curSegIndex = -1, this.curSegStart = 0, this.currentPts = BigInt(0), this.segCount = 0, this.segIndex = 0, this.firstGranulePosition = BigInt(0);
    }
    async estimateTotalBlock(e3) {
      let t3 = BigInt(0);
      const i3 = e3.ioReader.getPos(), r3 = this.currentPts, a3 = await e3.ioReader.fileSize();
      for (await e3.ioReader.seek(k.T9(a3 - BigInt(195072), BigInt(0))), await this.syncPage(e3); ; ) try {
        this.page.reset(), await this.page.read(e3.ioReader), t3 = this.page.granulePosition;
      } catch (e4) {
        break;
      }
      return await e3.ioReader.seek(i3), this.currentPts = r3, t3;
    }
    async getNextSegment(e3) {
      if (this.curSegIndex < 0) {
        this.page.granulePosition > BigInt(0) && (this.currentPts = this.page.granulePosition), this.page.reset(), await this.page.read(e3.ioReader), this.curSegIndex = 0, this.curSegStart = 0, this.segIndex = -1, this.segCount = 0;
        for (let e4 = 0; e4 < this.page.segmentTable.length; e4++) 255 !== this.page.segmentTable[e4] && this.segCount++;
        this.segCount || (this.segCount = 1);
      }
      let t3 = 0;
      for (; this.curSegIndex < this.page.segmentTable.length; ) {
        const e4 = this.page.segmentTable[this.curSegIndex++];
        if (t3 += e4, 255 !== e4) break;
      }
      const i3 = this.curSegStart;
      return this.curSegStart += t3, this.segIndex++, this.curSegIndex === this.page.segmentTable.length && (this.curSegIndex = -1), this.page.payload.subarray(i3, i3 + t3);
    }
    addComment(e3, t3) {
      e3.vendorString && (t3.metadata.vendor = e3.vendorString), (0, d2.ol)(e3.comments.list, t3.metadata);
    }
    async createStream(e3, t3) {
      if (t3.length < 8) return 0;
      let i3 = new g.A(t3.length, false);
      i3.appendBuffer(t3);
      const r3 = i3.peekString(8);
      if ("OpusHead" === r3) {
        const r4 = new c.q();
        r4.read(i3);
        const a3 = e3.createStream();
        a3.codecpar.codecType = 1, a3.codecpar.codecId = 86076, a3.codecpar.sampleRate = r4.sampleRate, a3.codecpar.chLayout.nbChannels = r4.channels, a3.timeBase.den = a3.codecpar.sampleRate, a3.timeBase.num = 1, a3.codecpar.extradata = (0, p.sY)(t3.length), a3.codecpar.extradataSize = t3.length, a3.codecpar.initialPadding = r4.preSkip, (0, f.lW)(a3.codecpar.extradata, t3.length, t3);
        const s3 = new c.o();
        t3 = await this.getNextSegment(e3), i3 = new g.A(t3.length, false), i3.appendBuffer(t3), s3.read(i3), this.headerPagesPayload = [r4, s3], a3.privData = { serialNumber: this.page.serialNumber }, this.addComment(s3, a3), a3.duration = await this.estimateTotalBlock(e3);
      } else if ("vorbis" === r3.slice(1, 7)) {
        const r4 = [t3], a3 = new d2.mS();
        a3.read(i3);
        const s3 = new d2.GM();
        t3 = await this.getNextSegment(e3), i3 = new g.A(t3.length, false), i3.appendBuffer(t3), s3.read(i3), r4.push(t3), this.headerPagesPayload = [a3, s3];
        const n2 = e3.createStream();
        n2.codecpar.codecType = 1, n2.codecpar.codecId = 86021, n2.codecpar.sampleRate = a3.sampleRate, n2.codecpar.chLayout.nbChannels = a3.channels, n2.timeBase.den = n2.codecpar.sampleRate, n2.timeBase.num = 1, n2.privData = { serialNumber: this.page.serialNumber }, this.addComment(s3, n2), r4.push(await this.getNextSegment(e3));
        const o2 = r4.reduce((e4, t4) => e4 + 2 + t4.length, 0), c2 = (0, p.sY)(o2), h2 = new v.A(o2, true, new b.A(c2, o2));
        r4.forEach((e4) => {
          h2.writeUint16(e4.length), h2.writeBuffer(e4);
        }), n2.codecpar.extradata = c2, n2.codecpar.extradataSize = o2, n2.duration = await this.estimateTotalBlock(e3);
      } else if ("FLAC" === r3.slice(1, 5)) {
        i3.setEndian(true), i3.skip(1), i3.skip(4), i3.skip(1), i3.skip(1), i3.readUint16(), i3.skip(4);
        const r4 = i3.readUint8(), a3 = i3.readUint24();
        if (0 !== r4) return h.LR;
        {
          const r5 = e3.createStream();
          r5.codecpar.codecType = 1, r5.codecpar.codecId = 86028;
          const s3 = (0, p.sY)(a3);
          i3.peekBuffer(a3, (0, f.s3)(s3, a3)), i3.skip(10);
          const o2 = i3.readUint24();
          r5.codecpar.sampleRate = o2 >> 4, r5.codecpar.chLayout.nbChannels = 1 + ((15 & o2) >>> 1), r5.timeBase.den = r5.codecpar.sampleRate, r5.timeBase.num = 1, r5.privData = { serialNumber: this.page.serialNumber }, r5.codecpar.extradata = s3, r5.codecpar.extradataSize = a3;
          const c2 = new n.h();
          t3 = await this.getNextSegment(e3), i3 = new g.A(t3.length - 4, false), i3.appendBuffer(t3.subarray(4)), c2.read(i3), r5.duration = await this.estimateTotalBlock(e3), this.addComment(c2, r5), this.headerPagesPayload = [c2];
        }
      } else {
        if ("Speex" !== r3.slice(0, 5)) return 0;
        {
          const r4 = e3.createStream();
          r4.codecpar.codecType = 1, r4.codecpar.codecId = 86051;
          const a3 = (0, p.sY)(t3.length);
          (0, f.lW)(a3, t3.length, t3), r4.codecpar.extradata = a3, r4.codecpar.extradataSize = t3.length, i3.seek(BigInt(36)), r4.codecpar.sampleRate = i3.readUint32(), i3.seek(BigInt(48)), r4.codecpar.chLayout.nbChannels = i3.readUint32(), r4.timeBase.den = r4.codecpar.sampleRate, r4.timeBase.num = 1, r4.privData = { serialNumber: this.page.serialNumber };
          const s3 = new n.h();
          t3 = await this.getNextSegment(e3), i3 = new g.A(t3.length, false), i3.appendBuffer(t3), s3.read(i3), r4.duration = await this.estimateTotalBlock(e3), this.addComment(s3, r4), this.headerPagesPayload = [s3];
        }
      }
      return 1;
    }
    async readHeader(e3) {
      try {
        if ("OggS" !== await e3.ioReader.peekString(4)) return o.z3("the file format is not oggs", x, 386), h.LR;
        for (; ; ) {
          let t3 = this.paddingPayload || await this.getNextSegment(e3);
          this.paddingPayload && (this.paddingPayload = null);
          const i3 = await this.createStream(e3, t3);
          if (i3 < 0) return i3;
          if (!i3) {
            this.paddingPayload = t3;
            break;
          }
        }
        return this.firstPos = this.paddingPayload ? this.page.pos : e3.ioReader.getPos(), 0;
      } catch (t3) {
        return o.z3(t3.message, x, 408), e3.ioReader.error;
      }
    }
    async readAVPacket(e3, t3) {
      s2.M[17](t3 + 56, e3.ioReader.getPos());
      try {
        const i3 = this.paddingPayload || await this.getNextSegment(e3);
        this.paddingPayload && (this.paddingPayload = null);
        let r3 = this.currentPts + (this.page.granulePosition - this.currentPts) / BigInt(Math.floor(this.segCount)) * BigInt(Math.floor(this.segIndex));
        s2.M[17](t3 + 16, r3), s2.M[17](t3 + 8, r3), this.firstGranulePosition || (this.firstGranulePosition = this.page.granulePosition);
        const n2 = e3.streams.find((e4) => e4.privData && e4.privData.serialNumber === this.page.serialNumber);
        if (!n2) return await this.createStream(e3, i3), this.readAVPacket(e3, t3);
        s2.M[15](t3 + 32, n2.index), s2.M[15](t3 + 76, n2.timeBase.den), s2.M[15](t3 + 72, n2.timeBase.num), 1 === n2.codecpar.codecType && s2.M[15](t3 + 36, 1 | a2.f[15](t3 + 36));
        const o2 = [i3];
        for (; this.curSegIndex < 0; ) try {
          if (!(1 & (await e3.ioReader.peekBuffer(6))[5])) break;
          o2.push(await this.getNextSegment(e3));
        } catch (e4) {
          break;
        }
        const c2 = (0, l.A)(Uint8Array, o2), d3 = c2.length, h2 = (0, p.sY)(d3);
        return (0, f.lW)(h2, d3, c2), (0, m.NX)(t3, h2, d3), 0;
      } catch (t4) {
        return -1048576 !== e3.ioReader.error && -1048572 !== e3.ioReader.error ? (o.z3("read packet error, ".concat(t4), x, 479), h.LR) : e3.ioReader.error;
      }
    }
    async syncPage(e3) {
      let t3 = A.Dh, i3 = BigInt(0);
      for (; ; ) try {
        if ("OggS" === await e3.ioReader.peekString(4)) {
          t3 = e3.ioReader.getPos(), this.page.reset(), await this.page.read(e3.ioReader), i3 = this.page.granulePosition;
          let r3 = 0;
          for (; 3 !== r3 && "OggS" === await e3.ioReader.peekString(4); ) r3++, this.page.reset(), await this.page.read(e3.ioReader);
          if (3 === r3) break;
        }
        await e3.ioReader.skip(1);
      } catch (e4) {
        break;
      }
      if (t3 !== A.Dh) {
        for (await e3.ioReader.seek(t3); 1 & (await e3.ioReader.peekBuffer(6))[5]; ) this.page.reset(), await this.page.read(e3.ioReader), i3 = this.page.granulePosition;
        this.currentPts = i3 - this.firstGranulePosition, this.curSegIndex = -1;
      }
    }
    async seek(e3, t3, i3, r3) {
      const a3 = e3.ioReader.getPos();
      if (2 & r3) {
        const t4 = await e3.ioReader.fileSize();
        return t4 <= BigInt(0) ? BigInt(h.E$) : (i3 < BigInt(0) ? i3 = BigInt(0) : i3 > t4 && (i3 = t4), await e3.ioReader.seek(i3), 4 & r3 || await this.syncPage(e3), a3);
      }
      return (0, w.k)(i3, t3.timeBase, A.i0) < BigInt(1e4) ? (o.Yz("seek pts is earlier then 10s, seek to first packet pos(".concat(this.firstPos, ") directly"), x, 571), await e3.ioReader.seek(this.firstPos), this.currentPts = BigInt(0), a3) : (0, y.A)(e3, t3, i3, this.firstPos, this.readAVPacket.bind(this), this.syncPage.bind(this));
    }
    getAnalyzeStreamsCount() {
      return 1;
    }
  }
}, 50522: (e2, t2, i2) => {
  i2.d(t2, { A: () => D });
  var r2 = i2(134), a2 = i2(73146), s2 = i2.n(a2), n = i2(14686), o = i2(61499), c = i2(63939), d2 = i2(50932), h = (i2(9599), i2(47958), i2(4624)), l = i2(9705), u = i2(85947), f = i2(37837), p = i2(71517), m = i2(89222), g = i2(47860), v = i2(41654), A = i2(72739), y = i2(64093), w = i2(15012), b = i2(48416), k = i2(38183), x = i2(60264), I = i2(44328), P = i2(77231), S = i2(90764), T = i2(79940), M = i2(52575), B = i2(39342), R = i2(56397), _ = i2(30725), C = i2(51113);
  const U = "src/avformat/formats/IRtspFormat.ts";
  class D extends u.A {
    constructor(e3) {
      super(), (0, r2.A)(this, "type", 6), (0, r2.A)(this, "rtspSession", void 0), (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "context", void 0), (0, r2.A)(this, "cacheAVPacket", void 0), this.options = e3;
    }
    init(e3) {
      e3.ioReader && e3.ioReader.setEndian(true), this.rtspSession = new m.A(this.options.uri, e3.ioReader, e3.ioWriter), this.context = { sessionId: "", canOutputPacket: true }, this.cacheAVPacket = 0;
    }
    async readHeader(e3) {
      try {
        let t3 = await this.rtspSession.options();
        if (200 !== t3.statusCode) return l.LR;
        if (t3 = await this.rtspSession.describe(), 200 !== t3.statusCode) return h.z3("describe failed, ".concat(s2()(t3)), U, 135), l.LR;
        const i3 = g.q(t3.content);
        let r3 = 1, a3 = 0;
        for (let n2 = 0; n2 < i3.media.length; n2++) {
          if (!i3.media[n2].rtp.length) continue;
          const c2 = e3.createStream(), d3 = w.fm.find((e4) => e4.payload === i3.media[n2].rtp[0].payload);
          if (d3) c2.codecpar.codecType = d3.codecType, c2.codecpar.codecId = d3.codecId, 1 === d3.codecType ? (c2.codecpar.sampleRate = i3.media[n2].rtp[0].rate || d3.rate, c2.codecpar.chLayout.nbChannels = i3.media[n2].rtp[0].encoding || d3.encoding, c2.timeBase.num = 1, c2.timeBase.den = c2.codecpar.sampleRate) : (c2.timeBase.num = 1, c2.timeBase.den = i3.media[n2].rtp[0].rate || d3.rate);
          else {
            "audio" === i3.media[n2].type ? c2.codecpar.codecType = 1 : "video" === i3.media[n2].type && (c2.codecpar.codecType = 0);
            const e4 = i3.media[n2].rtp[0].codec;
            let t4 = w.xl[e4] || 0;
            c2.codecpar.codecId = t4, 1 === c2.codecpar.codecType ? (c2.codecpar.sampleRate = i3.media[n2].rtp[0].rate, c2.codecpar.chLayout.nbChannels = i3.media[n2].rtp[0].encoding, c2.timeBase.num = 1, c2.timeBase.den = c2.codecpar.sampleRate) : 0 === c2.codecpar.codecType && (c2.timeBase.num = 1, c2.timeBase.den = i3.media[n2].rtp[0].rate);
          }
          const u2 = { ssrc: 0, trackId: r3++, interleaved: a3, payloadContext: null, queue: null, payloadType: i3.media[n2].rtp[0].payload, rangeStartOffset: BigInt(0), lastRtcpNtpTime: P.Dh, firstRtcpNtpTime: P.Dh, lastRtcpTimestamp: 0, rtcpTsOffset: BigInt(0), baseTimestamp: 0, timestamp: 0, unwrappedTimestamp: BigInt(0), filter: null };
          if (i3.media[n2].control) {
            let e4 = i3.media[n2].control.split(";").find((e5) => e5.indexOf("trackID") > -1);
            if (e4) {
              let t4 = e4.split("=");
              u2.trackId = +t4[1].trim();
            }
          }
          if (i3.media[n2].fmtp.length && _.zQ[c2.codecpar.codecId] && (u2.payloadContext = _.zQ[c2.codecpar.codecId](c2, i3.media[n2].fmtp[0].config)), u2.queue = new b.A(c2.codecpar[o.o9], u2.payloadContext), a3 += 2, c2.privData = u2, t3 = await this.rtspSession.setup({ trackId: u2.trackId, streamMode: 2, interleaved: u2.interleaved, multcast: false }, this.context.sessionId), 200 !== t3.statusCode) return h.z3("setup track ".concat(u2.trackId, " failed, ").concat(s2()(t3)), U, 241), l.LR;
          const f2 = t3.headers.Transport.split(";").find((e4) => e4.indexOf("ssrc") > -1);
          f2 && (u2.ssrc = +("0x" + f2.split("=")[1].trim())), this.context.sessionId = t3.headers.Session, 0 === c2.codecpar.codecType && (this.context.canOutputPacket = false), 86017 === c2.codecpar.codecId ? u2.filter = new R.A() : 86019 === c2.codecpar.codecId && (u2.filter = new C.A()), u2.filter && u2.filter.init(c2.codecpar[o.o9], c2.timeBase[o.o9]);
        }
        return e3.streams.length ? (t3 = await this.rtspSession.play(this.context.sessionId), 200 !== t3.statusCode ? (h.z3("play failed, ".concat(s2()(t3)), U, 274), l.LR) : 0) : (h.z3("not found stream", U, 267), l.LR);
      } catch (t3) {
        return h.z3(t3.message, U, 281), e3.ioReader.error;
      }
    }
    addPrft(e3, t3, i3) {
      const r3 = e3.privData;
      if (r3.lastRtcpNtpTime !== P.Dh) {
        const a3 = (0, f.sY)(16), s3 = v.q(r3.lastRtcpNtpTime) - P.WT, n2 = BigInt(i3) - r3.lastRtcpNtpTime, o2 = (0, I.k)(n2, e3.timeBase, P.KR);
        d2.M[17](a3, s3 + o2), d2.M[15](a3 + 8, 24), (0, p.Ow)(t3, 27, a3, 16);
      }
    }
    getPacketPts(e3, t3, i3) {
      if (-1 === i3) return -BigInt(1);
      const r3 = t3.privData;
      if (r3.lastRtcpNtpTime !== P.Dh && e3.streams.length > 1) {
        const e4 = BigInt(i3 - r3.lastRtcpTimestamp | 0), a3 = (r3.lastRtcpNtpTime - r3.firstRtcpNtpTime) * BigInt(0 | t3.timeBase.den) / (BigInt(0 | t3.timeBase.num) << BigInt(32));
        return r3.rangeStartOffset + r3.rtcpTsOffset + a3 + e4;
      }
      return r3.baseTimestamp || (r3.baseTimestamp = i3), r3.timestamp ? r3.unwrappedTimestamp += BigInt(i3 - r3.timestamp | 0) : r3.unwrappedTimestamp += BigInt(i3), r3.timestamp = i3, r3.unwrappedTimestamp + r3.rangeStartOffset - BigInt(r3.baseTimestamp);
    }
    handleRtcpPacket(e3, t3, i3 = -1) {
      if (200 === t3[1]) {
        const r3 = (0, B.N)(t3);
        let a3 = e3.streams.find((e4) => {
          const t4 = e4.privData;
          return t4.ssrc === r3.ssrc || t4.interleaved === i3;
        });
        if (a3) {
          const e4 = a3.privData;
          e4.lastRtcpNtpTime = r3.ntp, e4.lastRtcpTimestamp = r3.timestamp, e4.firstRtcpNtpTime === P.Dh && (e4.firstRtcpNtpTime = r3.ntp, e4.baseTimestamp || (e4.baseTimestamp = r3.timestamp), e4.rtcpTsOffset = BigInt(e4.lastRtcpTimestamp - e4.baseTimestamp | 0));
        }
      }
    }
    async readAVPacket(e3, t3) {
      try {
        for (; ; ) {
          const { data: i3, interleaved: r3 } = await this.rtspSession.readPacket();
          if ((0, S.A)(i3)) this.handleRtcpPacket(e3, i3, r3);
          else if ((0, T.A)(i3)) {
            const a3 = (0, M.A)(i3), s3 = e3.streams.find((e4) => {
              const t4 = e4.privData;
              return t4.ssrc === a3.header.ssrc || t4.interleaved === r3 || t4.payloadType === a3.header.payloadType;
            });
            if (s3) {
              const i4 = s3.privData;
              i4.queue.push(a3), i4.ssrc || (i4.ssrc = a3.header.ssrc);
              let r4 = false;
              const u2 = (i5, a4, h2) => {
                let l2 = r4 ? (0, p._5)() : t3;
                d2.M[15](l2 + 32, s3.index), (0, n.Mr)(l2 + 72, s3.timeBase[o.o9], 8);
                const u3 = (0, f.sY)(i5.length);
                return (0, n.lW)(u3, i5.length, i5), (0, p.NX)(l2, u3, i5.length), d2.M[17](l2 + 16, h2), d2.M[17](l2 + 8, h2), a4 && (d2.M[15](l2 + 36, 1 | c.f[15](l2 + 36)), this.context.canOutputPacket = true), r4 ? (e3.interval.packetBuffer.push(l2), l2 = 0) : r4 = true, l2;
              }, m2 = (i5, a4, h2 = BigInt(0)) => {
                if (!i5.length) return;
                let l2 = r4 ? (0, p._5)() : t3;
                d2.M[15](l2 + 32, s3.index), (0, n.Mr)(l2 + 72, s3.timeBase[o.o9], 8);
                const u3 = (0, f.sY)(i5[0].length);
                (0, n.lW)(u3, i5[0].length, i5[0]), (0, p.NX)(l2, u3, i5[0].length), d2.M[17](l2 + 16, a4), d2.M[17](l2 + 8, a4), d2.M[15](l2 + 36, 1 | c.f[15](l2 + 36)), r4 ? (e3.interval.packetBuffer.push(l2), l2 = 0) : r4 = true;
                for (let t4 = 1; t4 < i5.length; t4++) {
                  const r5 = (0, p._5)();
                  d2.M[15](r5 + 32, s3.index), (0, n.Mr)(r5 + 72, s3.timeBase[o.o9], 8), d2.M[17](r5 + 16, a4 + BigInt(t4) * h2), d2.M[17](r5 + 8, a4 + BigInt(t4) * h2), d2.M[15](r5 + 36, 1 | c.f[15](r5 + 36));
                  const l3 = (0, f.sY)(i5[t4].length);
                  (0, n.lW)(l3, i5[t4].length, i5[t4]), (0, p.NX)(r5, l3, i5[t4].length), e3.interval.packetBuffer.push(r5);
                }
              }, g2 = (a4, u3) => {
                let m3 = r4 ? (0, p._5)() : t3;
                d2.M[15](m3 + 32, s3.index), (0, n.Mr)(m3 + 72, s3.timeBase[o.o9], 8);
                const g3 = (0, f.sY)(a4.length);
                (0, n.lW)(g3, a4.length, a4), (0, p.NX)(m3, g3, a4.length), d2.M[17](m3 + 16, u3), d2.M[17](m3 + 8, u3);
                let v2 = i4.filter.sendAVPacket(m3);
                if (v2 < 0) return h.h2("send avpacket to bsf failed", U, 460), l.LR;
                if (v2 = i4.filter.receiveAVPacket(m3), v2 !== l.LT) for ((0, n.Mr)(m3 + 72, s3.timeBase[o.o9], 8), d2.M[15](m3 + 32, s3.index), d2.M[15](m3 + 36, 1 | c.f[15](m3 + 36)), r4 ? (e3.interval.packetBuffer.push(m3), m3 = 0) : r4 = true; ; ) {
                  const t4 = this.cacheAVPacket || (0, p._5)();
                  if (v2 = i4.filter.receiveAVPacket(t4), 0 !== v2) {
                    this.cacheAVPacket = t4;
                    break;
                  }
                  (0, n.Mr)(t4 + 72, s3.timeBase[o.o9], 8), d2.M[15](t4 + 32, s3.index), e3.interval.packetBuffer.push(t4), this.cacheAVPacket = 0;
                }
              };
              for (; i4.queue.hasFrame(); ) {
                const t4 = i4.queue.getFrame();
                if (!t4.length) continue;
                const r5 = this.getPacketPts(e3, s3, t4[0].header.timestamp);
                if (0 === s3.codecpar.codecType || this.context.canOutputPacket) {
                  if (27 === s3.codecpar.codecId || 173 === s3.codecpar.codecId) {
                    const { nalus: e4, isKey: a4 } = 27 === s3.codecpar.codecId ? k.Hj(t4) : k.pA(t4, i4.payloadContext);
                    if (!e4.length) continue;
                    if (!a4 && !this.context.canOutputPacket) continue;
                    const n2 = u2(x.nW(e4, 2), a4, r5);
                    1 & s3.codecpar.flags ? d2.M[15](n2 + 36, 64 | c.f[15](n2 + 36)) : d2.M[15](n2 + 36, -65 & c.f[15](n2 + 36)), d2.M[17](n2 + 16, P.Dh);
                  } else if (86018 === s3.codecpar.codecId) m2(k.kx(t4, s3.privData.payloadContext), r5, BigInt(1024));
                  else if (12 === s3.codecpar.codecId) {
                    const e4 = k.xW(t4), i5 = e4[4] >>> 6 == 0;
                    if (!i5 && !this.context.canOutputPacket) continue;
                    u2(e4, i5, r5);
                  } else if (65543 === s3.codecpar.codecId || 65542 === s3.codecpar.codecId || 69660 === s3.codecpar.codecId || 65537 === s3.codecpar.codecId || 86076 === s3.codecpar.codecId || 86051 === s3.codecpar.codecId) m2([k.xW(t4)], r5);
                  else if (86017 === s3.codecpar.codecId) {
                    const e4 = k.Jz(t4, s3.codecpar.codecType);
                    if (s3.codecpar.profile === P.N_) {
                      const t5 = (6 & e4[1]) >> 1;
                      s3.codecpar.profile = y.Au(t5);
                    }
                    g2(e4, r5);
                  } else if (86019 === s3.codecpar.codecId) g2(k.we(t4), r5);
                  else if (2 === s3.codecpar.codecId) {
                    const e4 = k.Jz(t4, s3.codecpar.codecType), i5 = 1 == (e4[5] >> 3 & 7);
                    if (!i5 && !this.context.canOutputPacket) continue;
                    u2(e4, i5, r5);
                  } else if (139 === s3.codecpar.codecId) {
                    const { payload: e4, isKey: i5 } = k.hw(t4);
                    if (!i5 && !this.context.canOutputPacket) continue;
                    u2(e4, i5, r5);
                  } else if (167 === s3.codecpar.codecId) {
                    const { payload: e4, isKey: i5 } = k.o_(t4);
                    if (!i5 && !this.context.canOutputPacket) continue;
                    u2(e4, i5, r5);
                  } else if (225 === s3.codecpar.codecId) {
                    const { payload: e4, isKey: i5 } = k.l6(t4);
                    if (!i5 && !this.context.canOutputPacket) continue;
                    u2(e4, i5, r5);
                  }
                }
              }
              if (r4) return 0;
            }
          } else h.R8("received invalid data", U, 609);
        }
      } catch (t4) {
        return -1048576 !== e3.ioReader.error && -1048572 !== e3.ioReader.error ? (h.z3("read packet error, ".concat(t4), U, 617), l.LR) : e3.ioReader.error;
      }
    }
    async seek(e3, t3, i3, r3) {
      return BigInt(l.E$);
    }
    getAnalyzeStreamsCount() {
      return 0;
    }
    async destroy(e3) {
      await this.rtspSession.teardown(this.context.sessionId), this.cacheAVPacket && ((0, p.Qe)(this.cacheAVPacket), this.cacheAVPacket = 0), A.__(e3.streams, (e4) => {
        const t3 = e4.privData;
        t3.filter && (t3.filter.destroy(), t3.filter = null);
      });
    }
  }
}, 78070: (e2, t2, i2) => {
  i2.d(t2, { A: () => p });
  var r2 = i2(134), a2 = i2(50932), s2 = i2(4624), n = i2(9705), o = i2(85947), c = i2(14686), d2 = i2(37837), h = i2(71517), l = i2(72739), u = i2(50011), f = i2(54825);
  class p extends o.A {
    constructor() {
      super(), (0, r2.A)(this, "type", 19), (0, r2.A)(this, "queue", void 0), (0, r2.A)(this, "index", void 0);
    }
    init(e3) {
      this.queue = [];
    }
    async readChunk(e3) {
      let t3 = "";
      const i3 = e3.ioReader.getPos();
      for (; ; ) {
        const i4 = await e3.ioReader.readLine();
        if ("" === i4) break;
        t3 += i4 + "\n";
      }
      return { chunk: t3.trim(), pos: i3 };
    }
    async readHeader(e3) {
      const t3 = e3.createStream();
      t3.codecpar.codecId = 94225, t3.codecpar.codecType = 3, t3.timeBase.den = 1e3, t3.timeBase.num = 1, this.index = 0;
      let i3 = BigInt(0);
      try {
        for (; ; ) {
          const { chunk: r3, pos: a3 } = await this.readChunk(e3);
          if ("" === r3) continue;
          const s3 = r3.split("\n");
          let n2 = s3.shift().trim(), o2 = s3.shift().split(/--?>/);
          const c2 = (0, f.t)(o2[0]), d3 = (0, f.t)(o2[1]);
          if (d3 <= c2) continue;
          const h2 = s3.join("\n").trim();
          if (!h2) continue;
          t3.nbFrames++, t3.duration = d3;
          const u2 = { identifier: n2, context: h2, startTs: c2, endTs: d3, pos: a3 };
          c2 >= i3 ? (this.queue.push(u2), i3 = c2) : l._(this.queue, u2, (e4) => e4.startTs < u2.startTs ? 1 : -1);
        }
      } catch (e4) {
        return 0;
      }
    }
    async readAVPacket(e3, t3) {
      if (!this.queue.length) return n.LR;
      if (this.index >= this.queue.length) return -1048576;
      const i3 = e3.streams.find((e4) => 3 === e4.codecpar.codecType), r3 = this.queue[this.index++];
      if (a2.M[15](t3 + 32, i3.index), a2.M[15](t3 + 76, i3.timeBase.den), a2.M[15](t3 + 72, i3.timeBase.num), a2.M[17](t3 + 16, r3.startTs), a2.M[17](t3 + 8, r3.startTs), a2.M[17](t3 + 48, r3.endTs - r3.startTs), r3.identifier) {
        const e4 = u.encode(r3.identifier), i4 = (0, d2.sY)(e4.length);
        (0, c.lW)(i4, e4.length, e4), (0, h.Ow)(t3, 16, i4, e4.length);
      }
      const s3 = u.encode(r3.context), o2 = (0, d2.sY)(s3.length);
      return (0, c.lW)(o2, s3.length, s3), (0, h.NX)(t3, o2, s3.length), 0;
    }
    async seek(e3, t3, i3, r3) {
      if (2 & r3) return BigInt(n.E$);
      if (i3 <= BigInt(0)) return this.index = 0, BigInt(0);
      const a3 = l.El(this.queue, (e4) => e4.startTs > i3 ? -1 : 1);
      if (a3 >= 0) {
        for (s2.Yz("seek in cues, found index: ".concat(a3, ", pts: ").concat(this.queue[a3].startTs, ", pos: ").concat(this.queue[a3].pos), "src/avformat/formats/ISubRipFormat.ts", 201), this.index = Math.max(a3 - 1, 0); this.index > 0 && (this.queue[this.index - 1].startTs === this.queue[this.index].startTs || this.queue[this.index - 1].endTs > i3); ) this.index--;
        return BigInt(0);
      }
      return BigInt(n.LR);
    }
    getAnalyzeStreamsCount() {
      return 1;
    }
  }
}, 98854: (e2, t2, i2) => {
  i2.d(t2, { A: () => g });
  var r2 = i2(134), a2 = i2(73146), s2 = i2.n(a2), n = i2(50932), o = i2(4624), c = i2(9705), d2 = i2(85947), h = i2(14686), l = i2(37837), u = i2(71517), f = i2(72739), p = i2(50011), m = i2(74762);
  class g extends d2.A {
    constructor() {
      super(), (0, r2.A)(this, "type", 21), (0, r2.A)(this, "queue", void 0), (0, r2.A)(this, "index", void 0);
    }
    init(e3) {
      this.queue = [];
    }
    async readHeader(e3) {
      const t3 = e3.createStream();
      t3.codecpar.codecId = 94232, t3.codecpar.codecType = 3, t3.timeBase.den = 1e3, t3.timeBase.num = 1;
      let i3 = "";
      if (1 & e3.ioReader.flags) {
        const t4 = await e3.ioReader.fileSize();
        i3 = await e3.ioReader.readString(Number(BigInt.asIntN(32, t4)));
      } else try {
        i3 += await e3.ioReader.readLine() + "\n";
      } catch (e4) {
      }
      if (p) {
        const e4 = m.q(i3);
        if (this.queue = e4.queue, e4.head) {
          const i4 = s2()(e4.head), r3 = p.encode(i4);
          t3.codecpar.extradata = (0, l.sY)(r3.length), (0, h.lW)(t3.codecpar.extradata, r3.length, r3), t3.codecpar.extradataSize = r3.length;
        }
      }
      return this.index = 0, 0;
    }
    async readAVPacket(e3, t3) {
      if (!this.queue.length) return c.LR;
      if (this.index >= this.queue.length) return -1048576;
      const i3 = e3.streams.find((e4) => 3 === e4.codecpar.codecType), r3 = this.queue[this.index++];
      n.M[15](t3 + 32, i3.index), n.M[15](t3 + 76, i3.timeBase.den), n.M[15](t3 + 72, i3.timeBase.num), n.M[17](t3 + 16, r3.pts), n.M[17](t3 + 8, r3.pts), n.M[17](t3 + 48, r3.duration);
      const a3 = p.encode(r3.context), s3 = (0, l.sY)(a3.length);
      return (0, h.lW)(s3, a3.length, a3), (0, u.NX)(t3, s3, a3.length), 0;
    }
    async seek(e3, t3, i3, r3) {
      if (2 & r3) return BigInt(c.E$);
      if (i3 <= BigInt(0)) return this.index = 0, BigInt(0);
      const a3 = f.El(this.queue, (e4) => e4.pts > i3 ? -1 : 1);
      if (a3 >= 0) {
        for (o.Yz("seek in cues, found index: ".concat(a3, ", pts: ").concat(this.queue[a3].pts), "src/avformat/formats/ITtmlFormat.ts", 143), this.index = Math.max(a3 - 1, 0); this.index > 0 && (this.queue[this.index - 1].pts === this.queue[this.index].pts || this.queue[this.index - 1].pts + this.queue[this.index - 1].duration > i3); ) this.index--;
        return BigInt(0);
      }
      return BigInt(c.LR);
    }
    getAnalyzeStreamsCount() {
      return 1;
    }
  }
}, 95808: (e2, t2, i2) => {
  i2.d(t2, { A: () => y });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(9705), o = i2(85947), c = i2(14686), d2 = i2(37837), h = i2(71517), l = i2(95335), u = i2(92647), f = i2(59166), p = i2(77231), m = i2(37246), g = i2(23991), v = i2(37805);
  const A = { framerate: { num: 30, den: 1 } };
  class y extends o.A {
    constructor(e3 = {}) {
      super(), (0, r2.A)(this, "type", 12), (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "currentDts", void 0), (0, r2.A)(this, "currentPts", void 0), (0, r2.A)(this, "step", void 0), (0, r2.A)(this, "slices", void 0), (0, r2.A)(this, "naluPos", void 0), (0, r2.A)(this, "queue", void 0), (0, r2.A)(this, "bitReader", void 0), (0, r2.A)(this, "sliceType", void 0), (0, r2.A)(this, "naluType", void 0), (0, r2.A)(this, "poc", void 0), (0, r2.A)(this, "pocTid0", void 0), (0, r2.A)(this, "sps", void 0), (0, r2.A)(this, "naluReader", void 0), this.options = l.X$({}, A, e3);
    }
    init(e3) {
      e3.ioReader && e3.ioReader.setEndian(false), this.slices = [], this.queue = [], this.bitReader = new m.A(500), this.naluReader = new v.A();
    }
    async destroy(e3) {
      if (this.queue.length) {
        for (let e4 = 0; e4 < this.queue.length; e4++) (0, h.Qe)(this.queue[e4].avpacket);
        this.queue.length = 0;
      }
    }
    isFrameNalu(e3) {
      return (e3[1 === e3[2] ? 4 : 5] >>> 3 & 31) < 12;
    }
    async readNaluFrame(e3) {
      let t3 = false;
      const i3 = this.slices;
      for (this.slices = [], i3.length && (t3 = this.isFrameNalu(i3[0])); ; ) {
        const r3 = await this.naluReader.read(e3.ioReader);
        if (!r3) return i3;
        const a3 = r3[1 === r3[2] ? 4 : 5] >>> 3 & 31;
        if (this.isFrameNalu(r3)) if (t3) {
          if (r3[1 === r3[2] ? 5 : 6] >>> 7) return this.slices.push(r3), i3;
          i3.push(r3);
        } else i3.push(r3), t3 = true;
        else {
          if (t3 && (20 === a3 || 19 === a3 || 15 === a3 || 14 === a3 || 16 === a3 || 12 === a3 || 13 === a3)) return this.slices.push(r3), i3;
          i3.push(r3);
        }
      }
    }
    async readHeader(e3) {
      const t3 = e3.createStream();
      for (t3.codecpar.codecType = 0, t3.codecpar.codecId = 196, t3.timeBase.den = p.SF, t3.timeBase.num = 1, t3.codecpar.flags |= 1, this.currentDts = BigInt(0), this.currentPts = BigInt(0), this.naluPos = BigInt(0), this.poc = 0, this.pocTid0 = 0, this.step = BigInt(Math.floor(p.SF / this.options.framerate.num * this.options.framerate.den)); ; ) {
        const i3 = await this.readNaluFrame(e3);
        if (!i3.length) return -1048576;
        const r3 = (0, u.A)(Uint8Array, i3), n2 = f.sL(r3);
        if (n2) {
          t3.codecpar.extradata = (0, d2.sY)(n2.length), (0, c.lW)(t3.codecpar.extradata, n2.length, n2), t3.codecpar.extradataSize = n2.length, f.XC(t3, n2);
          const o2 = i3.find((e4) => 15 == (e4[1 === e4[2] ? 4 : 5] >>> 3 & 31));
          this.sps = f.wf(o2);
          const l2 = (0, h._5)(), u2 = (0, d2.sY)(r3.length);
          (0, c.lW)(u2, r3.length, r3), (0, h.NX)(l2, u2, r3.length), s2.M[17](l2 + 56, this.naluPos), this.naluPos += BigInt(Math.floor(r3.length)), s2.M[17](l2 + 16, this.currentDts), this.currentDts += this.step, s2.M[17](l2 + 8, this.currentPts), this.currentPts += this.step, s2.M[15](l2 + 32, t3.index), s2.M[15](l2 + 36, 1 | a2.f[15](l2 + 36)), s2.M[15](l2 + 72, t3.timeBase.num), s2.M[15](l2 + 76, t3.timeBase.den), s2.M[15](l2 + 36, 64 | a2.f[15](l2 + 36)), e3.interval.packetBuffer.push(l2);
          break;
        }
        this.naluPos += BigInt(Math.floor(r3.length));
      }
      return 0;
    }
    computePoc(e3, t3, i3, r3) {
      this.bitReader.reset(), this.bitReader.appendBuffer(i3.subarray(0, 500)), r3 && this.bitReader.readU1();
      const a3 = this.bitReader.readU1(), s3 = this.bitReader.readU1();
      let n2 = 0;
      a3 && (n2 = this.bitReader.readU1()), this.bitReader.readU1() && this.bitReader.readU1(), g.xb(this.bitReader);
      const o2 = this.bitReader.readU(this.sps.sps_log2_max_pic_order_cnt_lsb_minus4 + 4);
      n2 && g.xb(this.bitReader);
      for (let e4 = 0; e4 < 8 * this.sps.sps_num_extra_ph_bytes; e4++) this.sps.sps_extra_ph_bit_present_flag[e4] && this.bitReader.readU1();
      let c2 = 0, d3 = 0;
      this.sps.sps_poc_msb_cycle_flag && (d3 = this.bitReader.readU1(), d3 && (c2 = this.bitReader.readU(this.sps.sps_poc_msb_cycle_len_minus1 + 1)));
      const h2 = 1 << this.sps.sps_log2_max_pic_order_cnt_lsb_minus4 + 4;
      let l2 = 0;
      if (8 === e3 || 7 === e3) l2 = d3 ? c2 * h2 : 0;
      else {
        const e4 = this.pocTid0, t4 = e4 & h2 - 1, i4 = e4 - t4;
        l2 = d3 ? c2 * h2 : o2 < t4 && t4 - o2 >= h2 / 2 ? i4 + h2 : o2 > t4 && o2 - t4 > h2 / 2 ? i4 - h2 : i4;
      }
      this.poc = l2 + o2, 0 != t3 || s3 || 2 === e3 || 3 === e3 || (this.pocTid0 = this.poc);
    }
    async readAVPacket_(e3, t3) {
      const i3 = e3.getStreamByMediaType(0), r3 = await this.readNaluFrame(e3);
      if (!r3.length) return -1048576;
      this.sliceType = -1;
      let n2 = false, o2 = true;
      r3.forEach((e4) => {
        const t4 = 1 === e4[2] ? e4[4] : e4[5], i4 = t4 >>> 3 & 31, r4 = (7 & t4) - 1;
        15 === i4 && (this.sps = f.wf(e4)), 8 !== i4 && 7 !== i4 || (n2 = true), 19 === i4 && this.computePoc(i4, r4, e4.subarray(1 === e4[2] ? 5 : 6), false), i4 < 14 && o2 && (o2 = false, this.naluType = i4, e4[1 === e4[2] ? 5 : 6] >>> 7 && this.computePoc(i4, r4, e4.subarray(1 === e4[2] ? 5 : 6), true));
      });
      const l2 = (0, u.A)(Uint8Array, r3), p2 = (0, d2.sY)(l2.length);
      return (0, c.lW)(p2, l2.length, l2), (0, h.NX)(t3, p2, l2.length), s2.M[17](t3 + 56, this.naluPos), this.naluPos += BigInt(Math.floor(l2.length)), s2.M[17](t3 + 16, this.currentDts), this.currentDts += this.step, s2.M[15](t3 + 32, i3.index), s2.M[15](t3 + 72, i3.timeBase.num), s2.M[15](t3 + 76, i3.timeBase.den), s2.M[15](t3 + 36, 64 | a2.f[15](t3 + 36)), n2 && s2.M[15](t3 + 36, 1 | a2.f[15](t3 + 36)), 0;
    }
    async readAVPacket(e3, t3) {
      let i3 = this.queue.length;
      const r3 = () => {
        this.queue.length > 1 && this.queue.sort((e4, t4) => e4.poc - t4.poc > 0 ? 1 : -1);
        for (let e4 = 0; e4 < this.queue.length; e4++) s2.M[17](this.queue[e4].avpacket + 8, this.currentPts), this.currentPts += this.step;
        this.queue.length > 1 && this.queue.sort((e4, t4) => a2.f[17](e4.avpacket + 16) - a2.f[17](t4.avpacket + 16) > BigInt(0) ? 1 : -1), this.queue.length && ((0, h.rN)(t3, this.queue[0].avpacket), (0, h.Qe)(this.queue[0].avpacket));
        for (let t4 = 1; t4 < this.queue.length; t4++) e3.interval.packetBuffer.push(this.queue[t4].avpacket);
        this.queue.length = 0;
      };
      for (; ; ) {
        const t4 = (0, h._5)();
        let s3 = await this.readAVPacket_(e3, t4);
        if (s3 < 0) return (0, h.Qe)(t4), this.queue.length ? (r3(), 0) : s3;
        if (1 & a2.f[15](t4 + 36) || 9 === this.naluType || 1 === this.sliceType || 2 === this.sliceType) {
          if (1 === i3 || (9 === this.naluType || 1 & a2.f[15](t4 + 36)) && this.queue.length) return r3(), this.queue.push({ avpacket: t4, poc: this.poc }), 0;
          this.queue.push({ avpacket: t4, poc: this.poc }), i3++;
        } else this.queue.push({ avpacket: t4, poc: this.poc });
      }
    }
    async seek(e3, t3, i3, r3) {
      const a3 = e3.ioReader.getPos();
      return 2 & r3 ? (await e3.ioReader.seek(i3), a3) : BigInt(n.E$);
    }
    getAnalyzeStreamsCount() {
      return 1;
    }
  }
}, 3791: (e2, t2, i2) => {
  i2.d(t2, { A: () => m });
  var r2 = i2(134), a2 = i2(61499), s2 = i2(50932), n = i2(4624), o = i2(9705), c = i2(85947), d2 = i2(14686), h = i2(37837), l = i2(71517), u = i2(35531), f = i2(95644);
  const p = "src/avformat/formats/IWavFormat.ts";
  class m extends c.A {
    constructor() {
      super(), (0, r2.A)(this, "type", 16), (0, r2.A)(this, "dataSize", void 0), (0, r2.A)(this, "sampleCount", void 0), (0, r2.A)(this, "pcmStartPos", void 0), (0, r2.A)(this, "currentPts", void 0);
    }
    init(e3) {
      e3.ioReader.setEndian(false);
    }
    async readHeader(e3) {
      const t3 = await e3.ioReader.readString(4);
      switch (t3) {
        case "RIFF":
        case "RF64":
        case "BW64":
          break;
        case "RIFX":
          e3.ioReader.setEndian(true);
          break;
        default:
          return n.z3("the file format is not wav", p, 73), o.LR;
      }
      await e3.ioReader.skip(4);
      const i3 = await e3.ioReader.readString(4);
      if ("WAVE" !== i3) return n.z3("invalid start code ".concat(i3, " in RIFF header"), p, 83), o.LR;
      if ("RF64" === t3 || "BW64" === t3) {
        if ("ds64" !== await e3.ioReader.readString(4)) return o.LR;
        const t4 = await e3.ioReader.readUint32();
        if (t4 < 24) return o.LR;
        if (await e3.ioReader.skip(8), this.dataSize = await e3.ioReader.readUint64(), this.sampleCount = await e3.ioReader.readUint64(), this.dataSize < 0 || this.sampleCount < 0) return n.z3("negative data_size and/or sample_count in ds64", p, 103), o.LR;
        await e3.ioReader.skip(t4 - 24);
      }
      const r3 = e3.createStream(), s3 = await e3.ioReader.fileSize();
      for (; e3.ioReader.getPos() < s3; ) {
        const t4 = await e3.ioReader.readString(4), i4 = await e3.ioReader.readUint32();
        if ("fmt " === t4) {
          let t5 = await (0, u.yr)(e3.ioReader, r3.codecpar[a2.o9], i4);
          if (t5 < 0) return t5;
        } else if ("data" === t4) {
          if (this.pcmStartPos = e3.ioReader.getPos(), this.dataSize || (this.dataSize = BigInt(Math.floor(i4))), this.pcmStartPos + this.dataSize === s3) break;
          await e3.ioReader.seek(this.pcmStartPos + this.dataSize);
        } else {
          if (this.pcmStartPos + this.dataSize === s3) break;
          await e3.ioReader.seek(e3.ioReader.getPos() + BigInt(Math.floor(i4)));
        }
      }
      return this.sampleCount || (this.sampleCount = (this.dataSize << BigInt(3)) / BigInt(r3.codecpar.chLayout.nbChannels * (0, f.MZ)(r3.codecpar.codecId))), r3.timeBase.den = r3.codecpar.sampleRate, r3.timeBase.num = 1, this.sampleCount && (r3.duration = this.sampleCount), this.currentPts = BigInt(0), await e3.ioReader.seek(this.pcmStartPos), 0;
    }
    async readAVPacket(e3, t3) {
      const i3 = e3.streams.find((e4) => e4.codecpar.codecType = 1);
      try {
        const r3 = 1024 * i3.codecpar.chLayout.nbChannels * (0, f.MZ)(i3.codecpar.codecId) >>> 3, a3 = (0, h.sY)(r3);
        return (0, l.NX)(t3, a3, r3), s2.M[17](t3 + 16, this.currentPts), s2.M[17](t3 + 8, this.currentPts), s2.M[17](t3 + 56, e3.ioReader.getPos()), await e3.ioReader.readBuffer(r3, (0, d2.JW)(a3, r3)), s2.M[15](t3 + 32, i3.index), s2.M[15](t3 + 76, i3.timeBase.den), s2.M[15](t3 + 72, i3.timeBase.num), this.currentPts += BigInt(1024), 0;
      } catch (t4) {
        return -1048576 !== e3.ioReader.error && -1048572 !== e3.ioReader.error ? (n.z3("read packet error, ".concat(t4), p, 193), o.LR) : e3.ioReader.error;
      }
    }
    async seek(e3, t3, i3, r3) {
      const a3 = e3.ioReader.getPos();
      if (2 & r3) {
        const s3 = await e3.ioReader.fileSize();
        return s3 <= BigInt(0) ? BigInt(o.E$) : (i3 < BigInt(0) ? i3 = BigInt(0) : i3 > s3 && (i3 = s3), await e3.ioReader.seek(i3), 4 & r3 || (this.currentPts = (i3 - this.pcmStartPos << BigInt(3)) / BigInt(t3.codecpar.chLayout.nbChannels * (0, f.MZ)(t3.codecpar.codecId))), a3);
      }
      {
        const r4 = this.pcmStartPos + (i3 * BigInt(t3.codecpar.chLayout.nbChannels * (0, f.MZ)(t3.codecpar.codecId)) >> BigInt(3));
        return await e3.ioReader.seek(r4), this.currentPts = i3, a3;
      }
    }
    getAnalyzeStreamsCount() {
      return 1;
    }
  }
}, 85611: (e2, t2, i2) => {
  i2.d(t2, { A: () => v });
  var r2 = i2(134), a2 = i2(50932), s2 = i2(4624), n = i2(9705), o = i2(85947), c = i2(14686), d2 = i2(37837), h = i2(71517), l = i2(72739), u = i2(50011), f = i2(54825), p = i2(77231), m = i2(44328);
  const g = "src/avformat/formats/IWebVttFormat.ts";
  class v extends o.A {
    constructor() {
      super(), (0, r2.A)(this, "type", 18), (0, r2.A)(this, "queue", void 0), (0, r2.A)(this, "index", void 0), (0, r2.A)(this, "baseTs", void 0);
    }
    init(e3) {
      this.queue = [], this.baseTs = BigInt(0);
    }
    async readChunk(e3) {
      let t3 = "";
      const i3 = e3.ioReader.getPos();
      for (; ; ) {
        const i4 = await e3.ioReader.readLine();
        if ("" === i4 || "WEBVTT" === i4) break;
        t3 += i4 + "\n";
      }
      return { chunk: t3.trim(), pos: i3 };
    }
    async readCue(e3, t3) {
      for (; ; ) {
        const { chunk: i3, pos: r3 } = await this.readChunk(e3);
        if ("" === i3 || /^NOTE/.test(i3) || "WEBVTT" === i3) continue;
        if (/^STYLE/.test(i3)) {
          t3.push({ style: i3.replace(/STYLE[\s|\n]?/, ""), pos: r3 });
          continue;
        }
        if (/^X-TIMESTAMP-MAP/.test(i3)) {
          const e4 = i3.split("=")[1].split(",");
          let t4 = BigInt(0), r4 = BigInt(0);
          e4.forEach((e5) => {
            const i4 = e5.split(":");
            "LOCAL" === i4[0] ? (i4.shift(), t4 = (0, f.j)(i4.join(":").trim())) : "MPEGTS" === i4[0] && (r4 = BigInt(+i4[1]) * BigInt(1e3) / BigInt(9e4));
          }), this.baseTs = r4 - t4;
          continue;
        }
        const a3 = i3.split("\n");
        let s3, n2;
        -1 === a3[0].indexOf("-->") && (s3 = a3.shift().trim());
        let o2 = a3.shift().split("-->");
        const c2 = (0, f.j)(o2.shift()) + this.baseTs;
        o2 = o2.shift().trim().split(" ");
        const d3 = (0, f.j)(o2.shift()) + this.baseTs;
        if (d3 <= c2) continue;
        o2 = o2.filter((e4) => "" !== e4), o2.length && (n2 = o2.join(" "));
        const h2 = a3.join("\n").trim();
        if (h2) return { identifier: s3, options: n2, context: h2, startTs: c2, endTs: d3, pos: r3 };
      }
    }
    async readHeader(e3) {
      const t3 = await e3.ioReader.peekBuffer(3);
      if (239 === t3[0] && 187 === t3[1] && 191 === t3[2] && await e3.ioReader.skip(3), "WEBVTT" !== await e3.ioReader.peekString(6)) return s2.z3("the file format is not vtt", g, 169), n.LR;
      const i3 = e3.createStream();
      i3.codecpar.codecId = 94226, i3.codecpar.codecType = 3, i3.timeBase.den = 1e3, i3.timeBase.num = 1;
      const r3 = await e3.ioReader.readLine();
      r3.indexOf("-") > 0 && (i3.metadata.title = r3.split("-").pop().trim()), this.index = 0;
      const a3 = [];
      let o2 = BigInt(0);
      try {
        for (; ; ) {
          const t4 = await this.readCue(e3, a3);
          if (i3.nbFrames++, i3.duration = t4.endTs, t4.startTs >= o2 ? (this.queue.push(t4), o2 = t4.startTs) : l._(this.queue, t4, (e4) => e4.startTs < t4.startTs ? 1 : -1), 2 & e3.ioReader.flags) break;
        }
      } catch (e4) {
      }
      return i3.metadata.styles = a3, 0;
    }
    async readAVPacket(e3, t3) {
      const i3 = e3.streams.find((e4) => 3 === e4.codecpar.codecType);
      if (2 & e3.ioReader.flags) {
        if (this.index >= this.queue.length) try {
          const r4 = await this.readCue(e3, i3.metadata.styles);
          if (this.queue.length) {
            const i4 = this.queue[this.queue.length - 1];
            if (i4.startTs === r4.startTs && i4.endTs === r4.endTs && i4.context === r4.context) return this.readAVPacket(e3, t3);
          }
          this.queue.push(r4), i3.nbFrames++, i3.duration = r4.endTs;
        } catch (t4) {
          return -1048576 !== e3.ioReader.error && -1048572 !== e3.ioReader.error ? (s2.z3("read cue error, ".concat(t4), g, 252), n.LR) : e3.ioReader.error;
        }
      } else {
        if (!this.queue.length) return n.LR;
        if (this.index >= this.queue.length) return -1048576;
      }
      const r3 = this.queue[this.index++];
      if (a2.M[15](t3 + 32, i3.index), a2.M[15](t3 + 76, i3.timeBase.den), a2.M[15](t3 + 72, i3.timeBase.num), a2.M[17](t3 + 16, r3.startTs), a2.M[17](t3 + 8, r3.startTs), a2.M[17](t3 + 48, r3.endTs - r3.startTs), r3.identifier) {
        const e4 = u.encode(r3.identifier), i4 = (0, d2.sY)(e4.length);
        (0, c.lW)(i4, e4.length, e4), (0, h.Ow)(t3, 16, i4, e4.length);
      }
      if (r3.options) {
        const e4 = u.encode(r3.options), i4 = (0, d2.sY)(e4.length);
        (0, c.lW)(i4, e4.length, e4), (0, h.Ow)(t3, 17, i4, e4.length);
      }
      const o2 = u.encode(r3.context), l2 = (0, d2.sY)(o2.length);
      return (0, c.lW)(l2, o2.length, o2), (0, h.NX)(t3, l2, o2.length), 0;
    }
    async seek(e3, t3, i3, r3) {
      if (2 & r3) return BigInt(n.E$);
      if (16 & r3 && 2 & e3.ioReader.flags) {
        const r4 = (0, m.k)(i3, t3.timeBase, p.i0);
        return await e3.ioReader.seek(r4, true), this.queue.length = 0, this.index = 0, BigInt(0);
      }
      if (i3 <= BigInt(0)) return this.index = 0, BigInt(0);
      const a3 = l.El(this.queue, (e4) => e4.startTs > i3 ? -1 : 1);
      if (a3 >= 0) {
        for (s2.Yz("seek in cues, found index: ".concat(a3, ", pts: ").concat(this.queue[a3].startTs, ", pos: ").concat(this.queue[a3].pos), g, 319), this.index = Math.max(a3 - 1, 0); this.index > 0 && (this.queue[this.index - 1].startTs === this.queue[this.index].startTs || this.queue[this.index - 1].endTs > i3); ) this.index--;
        return BigInt(0);
      }
      return BigInt(n.LR);
    }
    getAnalyzeStreamsCount() {
      return 1;
    }
  }
}, 51597: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2, E: () => s2 });
  var r2 = i2(134);
  class a2 {
    constructor() {
      (0, r2.A)(this, "type", -1);
    }
    async destroy(e3) {
    }
  }
  const s2 = { 15: [86018], 10: [86017, 86019, 86018, 12, 27], 17: [86028], 0: [86017, 86018, 86051, 69645, 86049, 65543, 65542, 86019, 86056, 86076, 86028, 12, 27, 173, 225, 167, 139, 196], 5: [139, 167], 8: [86021, 86076, 86018, 86017, 86028, 86032, 86020, 86056, 86019, 65557, 65537, 65536, 139, 167, 225, 27, 173, 196, 12, 30, 94226, 94212, 94230, 94210, 94225], 9: [86021, 86076, 139, 167, 225, 94226], 1: [86021, 86076, 86018, 86017, 86028, 86051, 86019, 86056, 167, 225, 27, 173, 196, 12, 94226, 94213], 14: [86017], 2: [86076, 86018, 86017, 86019, , 86020, 86065, 86056, 12, 225, 27, 173, 196], 3: [86058, 86016, 86017, 86019, , 86020, 2, 12, 27, 173, 196], 4: [86021, 86076, 86028, 86051], 16: [65557, 65559, 65541, 65536, 65548, 65544, 65567], 18: [94226], 20: [94230, 94212], 19: [94225], 21: [94232], 11: [27], 12: [173], 13: [196], 6: [86076, 86018, 86017, 65543, 65542, 2, 12, 27, 173, 139, 167, 225], 7: [86017, 86018, 86051, 69645, 86049, 65543, 65542, 12, 27, 173, 225, 167, 196] };
}, 69765: (e2, t2, i2) => {
  i2.d(t2, { A: () => D });
  var r2 = i2(134), a2 = i2(61499), s2 = i2(63939), n = i2(9599), o = i2(29170), c = i2(51597), d2 = i2(9690), h = i2(65977), l = i2(75473), u = i2(38106), f = i2(3384), p = i2(35336), m = i2(72739), g = i2(4624), v = i2(92647), A = i2(79804), y = i2(77231), w = i2(95335), b = i2(20841), k = i2(59989), x = i2(44328), I = i2(71517), P = i2(26173), S = i2(67672), T = i2(43607), M = i2(87518), B = i2(14686), R = i2(14041), _ = i2(50315);
  const C = "src/avformat/formats/OMovFormat.ts", U = { fragmentMode: 0, movMode: 0, fragment: false, fastOpen: false, defaultBaseIsMoof: false, reverseSpsInAvcc: false, ignoreEncryption: false, minFragmentLength: 5e3, minFragmentIndexLength: 5e3, hasTfra: true };
  class D extends c.A {
    constructor(e3 = {}) {
      super(), (0, r2.A)(this, "type", 1), (0, r2.A)(this, "context", void 0), (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "annexb2AvccFilter", void 0), (0, r2.A)(this, "avpacket", void 0), this.options = w.X$({}, U, e3), this.context = (0, d2.A)();
    }
    init(e3) {
      return e3.ioWriter.setEndian(true), e3.streams.forEach((e4) => {
        this.annexb2AvccFilter || 27 !== e4.codecpar.codecId && 173 !== e4.codecpar.codecId && 196 !== e4.codecpar.codecId || (this.annexb2AvccFilter = new P.A(this.options.reverseSpsInAvcc), this.annexb2AvccFilter.init(e4.codecpar[a2.o9], e4.timeBase[a2.o9]));
      }), this.avpacket = (0, I._5)(), 0;
    }
    async destroy(e3) {
      this.annexb2AvccFilter && (this.annexb2AvccFilter.destroy(), this.annexb2AvccFilter = null), this.avpacket && ((0, I.Qe)(this.avpacket), this.avpacket = 0);
    }
    enableStreams(e3) {
      const t3 = [], i3 = [];
      for (let e4 = 0; e4 < 5; e4++) t3[e4] = 0, i3[e4] = -1;
      m.__(e3.streams, (e4, r3) => {
        if (-1 === e4.codecpar.codecType || e4.codecpar.codecType >= 5) return true;
        i3[e4.codecpar.codecType] < 0 && (i3[e4.codecpar.codecType] = r3), 1 & e4.disposition && (t3[e4.codecpar.codecType]++, e4.privData.flags |= 1);
      });
      for (let r3 = 0; r3 < 5; r3++) switch (r3) {
        case 0:
        case 1:
        case 3:
          t3[r3] > 1 && (e3.streams[t3[r3]].privData.perStreamGrouping = true), !t3[r3] && i3[r3] >= 0 && (e3.streams[i3[r3]].privData.flags |= 1);
      }
    }
    writeHeader(e3) {
      if (this.context.majorBrand = (0, h.A)("isom"), this.context.minorVersion = 512, this.context.compatibleBrand = [(0, h.A)("isom")], this.context.timescale = 1e3, this.context.ignoreEncryption = this.options.ignoreEncryption, this.options.fragment && (this.context.compatibleBrand.push((0, h.A)("iso6")), this.context.fragment = true), 1 === this.options.movMode && (this.context.isom = true, this.context.majorBrand = (0, h.A)("qt  "), this.context.compatibleBrand = [this.context.majorBrand]), 1 !== this.options.movMode) {
        this.context.compatibleBrand.push((0, h.A)("iso2"));
        const t3 = e3.getStreamByMediaType(0);
        t3 && 27 === t3.codecpar.codecId && this.context.compatibleBrand.push((0, h.A)("avc1")), this.context.compatibleBrand.push((0, h.A)("mp41"));
      }
      if (l.l7(e3.ioWriter, this.context), this.context.holdMoovPos = e3.ioWriter.getPos(), this.options.fragment) this.context.currentFragment = { pos: BigInt(0), currentTrack: null, sequence: 1, tracks: [], size: 0, firstWrote: false }, m.__(e3.streams, (e4, t3) => {
        const i3 = (0, u.A)();
        e4.privData = i3, i3.chunkOffsets = [], i3.cttsSampleCounts = [], i3.cttsSampleOffsets = [], i3.stscFirstChunk = [], i3.stscSamplesPerChunk = [], i3.stscSampleDescriptionIndex = [], i3.stssSampleNumbers = [], i3.sampleSizes = [], i3.sttsSampleCounts = [], i3.sttsSampleDeltas = [], i3.alternateGroup = t3;
        const r3 = (0, f.A)();
        r3.baseIsMoof = this.options.defaultBaseIsMoof, r3.streamIndex = e4.index, r3.trackId = this.context.nextTrackId++, i3.trackId = r3.trackId;
        const a3 = this.options.encryption || e4.metadata.encryption;
        if (a3) {
          const e5 = this.context.cencs || {};
          e5[r3.trackId] = { schemeType: a3.schemeType, schemeVersion: a3.schemeVersion, cryptByteBlock: a3.cryptByteBlock, skipByteBlock: a3.skipByteBlock, defaultConstantIV: a3.constantIV, isProtected: 1, defaultPerSampleIVSize: a3.perSampleIVSize, defaultKeyId: a3.kid, pattern: !!a3.pattern }, this.context.cencs = e5;
        }
        r3.ioWriter = new p.A(), r3.ioWriter.onFlush = (e5) => (r3.buffers.push(e5.slice()), 0), this.context.currentFragment.tracks.push(r3);
      }), this.enableStreams(e3), l.dI(e3.ioWriter, e3, this.context), e3.ioWriter.flush();
      else {
        m.__(e3.streams, (e4, t4) => {
          const i3 = (0, u.A)();
          e4.privData = i3, i3.trackId = this.context.nextTrackId++, i3.chunkOffsets = [], i3.cttsSampleCounts = [], i3.cttsSampleOffsets = [], i3.stscFirstChunk = [], i3.stscSamplesPerChunk = [], i3.stscSampleDescriptionIndex = [], i3.stssSampleNumbers = [], i3.sampleSizes = [], i3.sttsSampleCounts = [], i3.sttsSampleDeltas = [], i3.alternateGroup = t4;
        }), this.enableStreams(e3);
        const t3 = e3.ioWriter.getPos();
        e3.ioWriter.writeUint32(0), e3.ioWriter.writeUint32((0, h.A)("mdat")), this.context.boxsPositionInfo.push({ pos: t3, type: "mdat", size: 0 });
      }
      return e3.getStreamByMediaType(0) || (this.context.audioOnly = true), 0;
    }
    updateCurrentChunk(e3) {
      let t3 = this.context.currentChunk;
      if (!t3 || !t3.sampleCount) return;
      const i3 = e3.streams.find((e4) => e4.index === t3.streamIndex).privData;
      i3.chunkCount++, i3.chunkOffsets.push(t3.pos), i3.stscFirstChunk.length ? i3.lastStscCount !== t3.sampleCount && (i3.stscFirstChunk.push(i3.chunkCount), i3.stscSamplesPerChunk.push(t3.sampleCount), i3.stscSampleDescriptionIndex.push(1), i3.lastStscCount = t3.sampleCount) : (i3.stscFirstChunk.push(i3.chunkCount), i3.stscSamplesPerChunk.push(t3.sampleCount), i3.stscSampleDescriptionIndex.push(1), i3.lastStscCount = t3.sampleCount);
    }
    updateCurrentFragment(e3, t3) {
      if (this.context.currentFragment.firstWrote) {
        m.__(this.context.currentFragment.tracks, (i4) => {
          const r4 = e3.streams.find((e4) => e4.index === i4.streamIndex);
          if (!i4.sampleCount || !r4) return true;
          const a4 = r4.privData;
          var s3, n2;
          i4.baseDataOffset = e3.ioWriter.getPos(), this.context.currentFragment.pos = e3.ioWriter.getPos(), i4.sampleDurations.length ? t3 && i4.sampleDurations.length === i4.sampleSizes.length - 1 && i4.sampleDurations.push(Number(t3 - a4.lastDts)) : 1 === r4.codecpar.codecType ? t3 ? i4.sampleDurations.push(Number(t3 - a4.lastDts)) : r4.codecpar.frameSize > 0 ? i4.sampleDurations.push(Number((0, x.k)(BigInt(r4.codecpar.frameSize / r4.codecpar.sampleRate * y.SF), y.KR, r4.timeBase))) : (r4.codecpar.codecId, i4.sampleDurations.push(Number((0, x.k)(BigInt(1024 / r4.codecpar.sampleRate * y.SF), y.KR, r4.timeBase)))) : 0 === r4.codecpar.codecType ? t3 ? i4.sampleDurations.push(Number(t3 - a4.lastDts)) : (0, x.lb)(r4.codecpar.framerate) > 0 ? i4.sampleDurations.push(Number((0, x.k)(BigInt(Math.floor(1 / (0, x.lb)(r4.codecpar.framerate) * y.SF)), y.KR, r4.timeBase))) : i4.sampleDurations.push(r4.timeBase.den / (30 * r4.timeBase.num) >>> 0) : i4.sampleDurations.push(0), a4.lastDuration = i4.sampleDurations[i4.sampleSizes.length - 1], (1 === i4.sampleFlags.length || (0, k.A)(i4.sampleFlags, 1)) && (i4.firstSampleFlags = i4.sampleFlags[0], i4.defaultSampleFlags = null !== (s3 = i4.sampleFlags[1]) && void 0 !== s3 ? s3 : i4.firstSampleFlags, i4.sampleFlags = []), (1 === i4.sampleSizes.length || (0, k.A)(i4.sampleSizes)) && (i4.defaultSampleSize = i4.sampleSizes[0], i4.sampleSizes = []), (1 === i4.sampleDurations.length || (0, k.A)(i4.sampleDurations)) && (i4.defaultSampleDuration = i4.sampleDurations[0], i4.sampleDurations = []), i4.cenc && (1 === i4.cenc.sampleSizes.length || (0, k.A)(i4.cenc.sampleSizes)) && (i4.cenc.defaultSampleInfoSize = i4.cenc.sampleSizes[0], i4.cenc.sampleSizes = []), 1 === r4.codecpar.codecType ? i4.defaultSampleFlags = 33554432 : i4.sampleFlags.length && (i4.defaultSampleFlags = i4.sampleFlags[0]), i4.sampleSizes.length && (i4.defaultSampleSize = i4.sampleSizes[0]), i4.sampleDurations.length && (i4.defaultSampleDuration = i4.sampleDurations[0]), this.options.hasTfra && (!a4.fragIndexes.length || 0 === this.options.fragmentMode || (0, x.k)(i4.baseDataOffset - i4.lastFragIndexDts, r4.timeBase, y.i0) >= this.options.minFragmentIndexLength) && (a4.fragIndexes.push({ pos: i4.baseDataOffset, time: i4.baseMediaDecodeTime + BigInt(Math.floor(null !== (n2 = i4.sampleCompositionTimeOffset[0]) && void 0 !== n2 ? n2 : 0)) }), i4.lastFragIndexDts = a4.lastDts);
        }), e3.ioWriter.flush(), l.Ro(e3.ioWriter, e3, this.context);
        let i3 = this.context.currentFragment.size + 8;
        const r3 = [];
        let a3 = 8;
        m.__(this.context.currentFragment.tracks, (t4) => {
          if (!t4.sampleCount) return true;
          t4.ioWriter.flush();
          const s3 = (0, v.A)(Uint8Array, t4.buffers);
          t4.dataOffset = i3, i3 += s3.length, a3 += s3.length, r3.push(s3), (0, b.A)(e3.ioWriter, t4.dataOffsetPos, t4.dataOffset, "int32"), t4.cenc && t4.cenc.offsetPos && (0, b.A)(e3.ioWriter, t4.cenc.offsetPos, t4.cenc.offset, "int32"), t4.buffers = [], t4.sampleFlags = [], t4.sampleSizes = [], t4.sampleDurations = [], t4.sampleCompositionTimeOffset = [], t4.sampleCount = 0, t4.firstSampleFlags = 0, t4.cenc = null;
        }), e3.ioWriter.writeUint32(a3), e3.ioWriter.writeUint32((0, h.A)("mdat")), m.__(r3, (t4) => {
          e3.ioWriter.writeBuffer(t4);
        }), (0, A.A)(e3.ioWriter, this.context), e3.ioWriter.flush(), this.context.currentFragment.firstWrote = false, this.context.currentFragment.sequence++;
      }
    }
    handleEAC3(e3, t3) {
      this.context.ac3Info || (this.context.ac3Info = { done: false, numBlocks: 0, dataRate: 0, ac3BitrateCode: -1, numIndSub: 0, substream: [] });
      const i3 = this.context.ac3Info, r3 = M.R((0, B.s3)(s2.f[20](e3 + 24), s2.f[15](e3 + 28)));
      if (S.ai(r3)) i3.done = true;
      else if (i3.dataRate = Math.max(i3.dataRate, r3.bitrate / 1e3), i3.ac3BitrateCode = Math.max(i3.ac3BitrateCode, r3.ac3BitrateCode), !i3.done) {
        if (r3.bitstreamId <= 10 && 0 != r3.substreamId) return;
        if (0 === r3.frameType || 2 == r3.frameType) {
          var a3;
          if (r3.substreamId > i3.numIndSub + 1) return;
          if (r3.substreamId == i3.numIndSub + 1) return;
          if (r3.substreamId < i3.numIndSub || 0 == r3.substreamId && null !== (a3 = i3.substream[0]) && void 0 !== a3 && a3.bsid) return void (i3.done = true);
        } else if (0 != r3.substreamId) return;
        if (i3.substream[r3.substreamId] || (i3.substream[r3.substreamId] = { fscod: 0, bsid: 0, bsmod: 0, acmod: 0, lfeon: 0, numDepSub: 0, chanLoc: 0 }), i3.substream[r3.substreamId].fscod = r3.srCode, i3.substream[r3.substreamId].bsid = r3.bitstreamId, i3.substream[r3.substreamId].bsmod = r3.bitstreamMode, i3.substream[r3.substreamId].acmod = r3.channelMode, i3.substream[r3.substreamId].lfeon = r3.lfeOn, 86019 === t3.codecpar.codecId) return void (i3.done = true);
      }
    }
    writeAVPacket(e3, t3) {
      if (!s2.f[15](t3 + 28)) return g.R8("packet's size is 0: ".concat(s2.f[15](t3 + 32), ", ignore it"), C, 639), 0;
      const i3 = e3.getStreamByIndex(s2.f[15](t3 + 32));
      if (!i3) return void g.R8("can not found the stream width the avpacket's streamIndex: ".concat(s2.f[15](t3 + 32), ", ignore it"), C, 646);
      const r3 = i3.privData;
      let a3 = (0, x.Mr)(s2.f[17](t3 + 16), t3 + 72, i3.timeBase), c2 = (0, x.Mr)(s2.f[17](t3 + 8) !== y.Dh ? s2.f[17](t3 + 8) : s2.f[17](t3 + 16), t3 + 72, i3.timeBase);
      const d3 = s2.f[17](t3 + 48) !== y.Dh ? (0, x.Mr)(s2.f[17](t3 + 48), t3 + 72, i3.timeBase) : -BigInt(1);
      if ((27 === i3.codecpar.codecId || 173 === i3.codecpar.codecId || 196 === i3.codecpar.codecId) && 64 & s2.f[15](t3 + 36) ? (this.annexb2AvccFilter.sendAVPacket(t3), this.annexb2AvccFilter.receiveAVPacket(this.avpacket), t3 = this.avpacket) : 86019 !== i3.codecpar.codecId && 86056 !== i3.codecpar.codecId || this.context.ac3Info && this.context.ac3Info.done || this.handleEAC3(t3, i3), this.context.fragment) {
        const h2 = this.context.currentFragment.tracks.find((e4) => e4.streamIndex === s2.f[15](t3 + 32));
        if (h2) {
          if (h2.tfdtDelay === y.Dh && (h2.tfdtDelay = a3 < 0 ? -a3 : BigInt(0), c2 < 0 && (h2.trunPtsDelay = h2.tfdtDelay)), a3 += h2.tfdtDelay, c2 += h2.trunPtsDelay, (0 === this.options.fragmentMode && (0 === i3.codecpar.codecType && 1 & s2.f[15](t3 + 36) || this.context.audioOnly && (0, x.k)(a3 - h2.baseMediaDecodeTime, i3.timeBase, y.i0) >= this.options.minFragmentLength) || 1 === this.options.fragmentMode) && (1 === this.context.currentFragment.tracks.length ? this.updateCurrentFragment(e3, a3) : this.updateCurrentFragment(e3)), h2.ioWriter.writeBuffer((0, I.iI)(t3)), h2.sampleSizes.length || (h2.baseMediaDecodeTime = a3), h2.sampleSizes.length && (!h2.sampleDurations[h2.sampleSizes.length - 1] || h2.sampleDurations[h2.sampleSizes.length - 1] <= 0) && (h2.sampleDurations[h2.sampleSizes.length - 1] = Number(a3 - r3.lastDts)), s2.f[17](t3 + 48) > 0 && h2.sampleDurations.push(Number((0, x.k)(s2.f[17](t3 + 48), (0, o.A)(t3 + 72, n.P), i3.timeBase))), h2.sampleSizes.push(s2.f[15](t3 + 28)), 0 === i3.codecpar.codecType) {
            let e4 = 0;
            1 & s2.f[15](t3 + 36) ? e4 |= 33554432 : e4 |= 16842752, h2.sampleCompositionTimeOffset.push(Number((c2 !== y.Dh ? c2 : a3) - a3)), h2.sampleFlags.push(e4);
          }
          const l2 = (0, I.Un)(t3 + 40, t3 + 44, 25), u2 = this.context.cencs && this.context.cencs[r3.trackId];
          if (l2 && u2) {
            const e4 = (0, _.p$)((0, B.s3)(s2.f[20](l2), s2.f[25](l2 + 4)));
            h2.cenc || (h2.cenc = { sampleCount: 0, defaultSampleInfoSize: 0, sampleSizes: [], offset: 0, useSubsamples: false, sampleInfoOffset: [], sampleEncryption: [] }), e4.subsamples.length && (!h2.cenc.useSubsamples && h2.cenc.sampleSizes.length && (h2.cenc.sampleSizes = h2.cenc.sampleSizes.map((e5) => e5 + 2)), h2.cenc.useSubsamples = true), h2.cenc.sampleCount++, h2.cenc.sampleSizes.push(u2.defaultPerSampleIVSize + (h2.cenc.useSubsamples ? 2 + 6 * e4.subsamples.length : 0)), h2.cenc.sampleEncryption.push({ iv: e4.iv, subsamples: e4.subsamples });
          }
          h2.sampleCount++, r3.lastPts = T.T9(r3.lastPts, c2 + (d3 !== y.Dh ? d3 : BigInt(0))), r3.lastDts = a3, this.context.currentFragment.firstWrote = true;
        } else g.R8("can not found track width streamIndex ".concat(s2.f[15](t3 + 32), ", ignore it"), C, 786);
      } else {
        const n2 = e3.ioWriter.getPos();
        let o2 = this.context.currentChunk;
        if (o2 ? o2.streamIndex !== s2.f[15](t3 + 32) ? (this.updateCurrentChunk(e3), o2.streamIndex = s2.f[15](t3 + 32), o2.sampleCount = 1, o2.pos = n2) : o2.sampleCount++ : o2 = this.context.currentChunk = { pos: n2, streamIndex: s2.f[15](t3 + 32), sampleCount: 1 }, e3.ioWriter.writeBuffer((0, I.iI)(t3)), r3.sampleSizes.push(s2.f[15](t3 + 28)), 0 === i3.codecpar.codecType && 1 & s2.f[15](t3 + 36) && r3.stssSampleNumbers.push(r3.sampleSizes.length), r3.firstWrote) {
          const e4 = Number(a3 - r3.lastDts);
          r3.sttsSampleCounts.length && r3.sttsSampleDeltas[r3.sttsSampleDeltas.length - 1] === e4 ? r3.sttsSampleCounts[r3.sttsSampleCounts.length - 1]++ : (r3.sttsSampleCounts.push(1), r3.sttsSampleDeltas.push(e4));
        } else r3.startDts = a3, r3.startCT = Number((c2 !== y.Dh ? c2 : a3) - a3), r3.firstWrote = true;
        if (c2 >= 0 && (r3.startPts === y.Dh ? r3.startPts = c2 : r3.startPts = T.jk(r3.startPts, c2)), 0 === i3.codecpar.codecType) {
          const e4 = Number((c2 !== y.Dh ? c2 : a3) - a3);
          r3.cttsSampleCounts.length && r3.cttsSampleOffsets[r3.cttsSampleOffsets.length - 1] === e4 ? r3.cttsSampleCounts[r3.cttsSampleCounts.length - 1]++ : (r3.cttsSampleCounts.push(1), r3.cttsSampleOffsets.push(e4));
        }
        r3.lastPts = T.T9(r3.lastPts, c2 + (d3 !== y.Dh ? d3 : BigInt(0))), r3.lastDts = a3, r3.lastDuration = Number(d3);
      }
      return 0;
    }
    writeTrailer(e3) {
      if (this.context.fragment) m.__(this.context.currentFragment.tracks, (t3) => {
        const i3 = e3.streams.find((e4) => e4.index === t3.streamIndex).privData;
        t3.sampleCount && (t3.sampleDurations.length ? t3.sampleDurations.push(t3.sampleDurations[t3.sampleDurations.length - 1]) : t3.sampleDurations = [i3.lastDuration]);
      }), this.updateCurrentFragment(e3), this.options.hasTfra ? l.yT(e3.ioWriter, e3, this.context) : (e3.ioWriter.writeUint32(8), e3.ioWriter.writeString("mfra")), e3.ioWriter.flush();
      else {
        this.updateCurrentChunk(e3);
        let t3 = BigInt(0);
        m.__(e3.streams, (e4) => {
          const i4 = e4.privData;
          i4.sampleSizes.length && (i4.sttsSampleDeltas.length ? i4.lastDuration > 0 && i4.lastDuration !== i4.sttsSampleDeltas[i4.sttsSampleDeltas.length - 1] ? (i4.sttsSampleCounts.push(1), i4.sttsSampleDeltas.push(i4.lastDuration)) : i4.sttsSampleCounts[i4.sttsSampleCounts.length - 1]++ : (i4.sttsSampleCounts = [1], i4.sttsSampleDeltas = [0]));
          const r3 = (0, x.k)((0, R.A)(i4), e4.timeBase, { den: 1e3, num: 1 });
          r3 > t3 && (t3 = r3);
        }), this.context.duration = t3;
        const i3 = this.context.boxsPositionInfo[this.context.boxsPositionInfo.length - 1];
        if ("mdat" !== i3.type && g.z3("last box is not mdat", C, 917), i3.size = Number(e3.ioWriter.getPos() - i3.pos), i3.size > y.f7) {
          const t4 = e3.ioWriter.getPos();
          e3.ioWriter.seek(i3.pos - BigInt(8)), e3.ioWriter.writeUint32(1), e3.ioWriter.writeUint32((0, h.A)("mdat")), e3.ioWriter.writeUint64(BigInt(i3.size) + BigInt(8)), e3.ioWriter.seek(t4), this.context.boxsPositionInfo.pop(), this.context.use64Mdat = true;
        }
        if ((0, A.A)(e3.ioWriter, this.context), this.options.fastOpen) {
          e3.ioWriter.flush();
          let t4 = [];
          const i4 = e3.ioWriter.onFlush;
          e3.ioWriter.onFlush = (e4) => (t4.push(e4.slice()), 0), l.dI(e3.ioWriter, e3, this.context), e3.ioWriter.flush();
          let r3 = (0, v.A)(Uint8Array, t4);
          m.__(e3.streams, (e4) => {
            const t5 = e4.privData;
            if (t5.chunkOffsets.length) for (let e5 = 0; e5 < t5.chunkOffsets.length; e5++) t5.chunkOffsets[e5] += BigInt(Math.floor(r3.length));
          }), t4 = [], l.dI(e3.ioWriter, e3, this.context), e3.ioWriter.flush(), r3 = (0, v.A)(Uint8Array, t4), i4 && i4(r3, this.context.holdMoovPos), e3.ioWriter.onFlush = i4;
        } else l.dI(e3.ioWriter, e3, this.context), e3.ioWriter.flush();
      }
      return 0;
    }
    flush(e3) {
      return this.options.fragment && (m.__(this.context.currentFragment.tracks, (t3) => {
        const i3 = e3.streams.find((e4) => e4.index === t3.streamIndex).privData;
        t3.sampleCount && (t3.sampleDurations.length ? t3.sampleDurations.push(t3.sampleDurations[t3.sampleDurations.length - 1]) : t3.sampleDurations = [i3.lastDuration]);
      }), this.updateCurrentFragment(e3)), e3.ioWriter.flush(), 0;
    }
  }
}, 5028: (e2, t2, i2) => {
  i2.d(t2, { Q: () => r2 });
  const r2 = ["ReadOrder", "Layer", "Start", "End", "Style", "Name", "MarginL", "MarginR", "MarginV", "Effect", "Text"];
}, 51785: (e2, t2, i2) => {
  i2.d(t2, { Bp: () => d2, Ew: () => l, wj: () => u }), i2(7210);
  var r2 = i2(4624), a2 = i2(5028), s2 = i2(54825), n = i2(44453), o = i2(93935);
  const c = "src/avformat/formats/ass/iass.ts";
  function d2(e3) {
    return (function(e4, t3) {
      const i3 = t3.match(/Format\s*:\s*(.*)/i)[1].split(/\s*,\s*/), a3 = [];
      for (let t4 = 0; t4 < i3.length; t4++) {
        const s3 = e4.find((e5) => e5.toLowerCase() === i3[t4].toLowerCase());
        s3 || r2.R8("not support ass field(".concat(i3[t4], ")"), c, 40), a3.push(s3 || i3[t4]);
      }
      return a3;
    })(a2.Q, e3);
  }
  function h(e3, t3) {
    let i3 = t3.split(",");
    if (i3.length > e3.length) {
      const t4 = i3.slice(e3.length - 1).join(",");
      i3 = i3.slice(0, e3.length - 1), i3.push(t4);
    }
    return i3;
  }
  function l(e3, t3, i3, r3) {
    const [, , a3] = t3.match(/^(\w+?)\s*:\s*(.*)/i), n2 = h(e3, a3);
    return { start: (0, s2.j)(n2[i3]), end: (0, s2.j)(n2[r3]) };
  }
  function u(e3, t3) {
    const [, i3, r3] = t3.match(/^(\w+?)\s*:\s*(.*)/i);
    let a3 = 0;
    switch (i3) {
      case "Comment":
        a3 = 2;
        break;
      case "Dialogue":
        a3 = 1;
        break;
      case "Command":
        a3 = 6;
        break;
      case "Movie":
        a3 = 5;
        break;
      case "Picture":
        a3 = 3;
        break;
      case "Sound":
        a3 = 4;
    }
    const c2 = h(e3, r3), d3 = { type: a3 };
    for (let t4 = 0; t4 < c2.length; t4++) {
      d3[e3[t4]] = c2[t4];
      const i4 = e3[t4], r4 = c2[t4].trim();
      switch (i4) {
        case "Layer":
        case "MarginL":
        case "MarginR":
        case "MarginV":
          d3[i4] = +r4;
          break;
        case "Start":
        case "End":
          d3[i4] = (0, s2.j)(r4);
          break;
        case "Effect":
          d3[i4] = (0, n.d)(r4);
          break;
        case "Text":
          d3[i4] = (0, o.r)(r4);
          break;
        default:
          d3[i4] = r4;
      }
    }
    return d3;
  }
}, 91375: (e2, t2, i2) => {
  i2.d(t2, { x: () => c });
  var r2 = i2(9705), a2 = i2(4624), s2 = i2(14769), n = i2(13188);
  const o = "src/avformat/formats/flac/iflac.ts";
  function c(e3, t3, i3 = false) {
    const c2 = e3.getPointer();
    if (32764 != (32767 & e3.readU(15))) return !i3 && a2.z3("invalid sync code", o, 57), r2.LR;
    t3.isVarSize = e3.readU1();
    const d2 = e3.readU(4), h = e3.readU(4);
    if (t3.chMode = e3.readU(4), t3.chMode < s2.jA) t3.channels = t3.chMode + 1, t3.chMode = 0;
    else {
      if (!(t3.chMode < s2.jA + 3)) return !i3 && a2.z3("invalid channel mode: ".concat(t3.chMode), o, 76), r2.LR;
      t3.channels = 2, t3.chMode -= s2.jA - 1;
    }
    const l = e3.readU(3);
    if (3 === l) return !i3 && a2.z3("invalid sample size code: ".concat(l), o, 82), r2.LR;
    if (t3.bps = s2.oe[l], e3.readU1()) return !i3 && a2.z3("broken stream, invalid padding", o, 88), r2.LR;
    if (t3.frameOrSampleNum = (function(e4) {
      let t4 = BigInt(Math.floor(e4.readU(8))), i4 = (t4 & BigInt(128)) >> BigInt(1);
      if ((t4 & BigInt(192)) === BigInt(128) || t4 >= BigInt(254)) return -BigInt(1);
      for (; t4 & i4; ) {
        const r3 = BigInt(Math.floor(e4.readU(8))) - BigInt(128);
        if (r3 >> BigInt(6)) return -BigInt(1);
        t4 = (t4 << BigInt(6)) + r3, i4 <<= BigInt(5);
      }
      return t4 &= (i4 << BigInt(1)) - BigInt(1), t4;
    })(e3), t3.frameOrSampleNum < 0) return !i3 && a2.z3("sample/frame number invalid", o, 95), r2.LR;
    if (0 === d2) return !i3 && a2.z3("reserved blocksize code: 0", o, 100), r2.LR;
    if (t3.blocksize = 6 === d2 ? e3.readU(8) + 1 : 7 === d2 ? e3.readU(16) + 1 : s2.Xr[d2], h < 12) t3.sampleRate = s2.DK[h];
    else if (12 === h) t3.sampleRate = 1e3 * e3.readU(8);
    else if (13 === h) t3.sampleRate = e3.readU(16);
    else {
      if (14 !== h) return !i3 && a2.z3("illegal sample rate code ".concat(h), o, 126), r2.LR;
      t3.sampleRate = 10 * e3.readU(16);
    }
    return (0, n.A)(e3.getBuffer().subarray(c2, e3.getPointer())) !== e3.readU(8) ? (!i3 && a2.z3("header crc mismatch", o, 133), r2.LR) : 0;
  }
}, 58121: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(134);
  class a2 {
    constructor() {
      (0, r2.A)(this, "signature", void 0), (0, r2.A)(this, "version", void 0), (0, r2.A)(this, "flags", void 0), (0, r2.A)(this, "dataOffset", void 0), (0, r2.A)(this, "hasVideo", void 0), (0, r2.A)(this, "hasAudio", void 0), this.signature = "FLV", this.version = 1, this.flags = 0, this.dataOffset = 9, this.hasAudio = false, this.hasVideo = false;
    }
    async read(e3) {
      this.signature = await e3.readString(3), this.version = await e3.readUint8(), this.flags = await e3.readUint8(), this.dataOffset = await e3.readUint32(), this.hasAudio = !!(4 & this.flags), this.hasVideo = !!(1 & this.flags);
    }
    write(e3) {
      this.flags = 0, this.hasAudio && (this.flags |= 4), this.hasVideo && (this.flags |= 1), e3.writeString(this.signature), e3.writeUint8(this.version), e3.writeUint8(this.flags), e3.writeUint32(this.dataOffset);
    }
  }
}, 68243: (e2, t2, i2) => {
  i2.d(t2, { A: () => h });
  var r2 = i2(134), a2 = i2(35336), s2 = i2(92647), n = i2(4624), o = i2(94889), c = i2(9705), d2 = i2(73040);
  class h {
    constructor() {
      (0, r2.A)(this, "onMetaData", void 0), this.onMetaData = { canSeekToEnd: false };
    }
    async read(e3, t3) {
      const i3 = e3.getPos(), r3 = i3 + BigInt(Math.floor(t3)), a3 = await (0, d2.$x)(e3, r3), s3 = await (0, d2.$x)(e3, r3);
      this[a3] = s3, r3 > e3.getPos() && await e3.skip(Number(BigInt.asIntN(32, r3 - e3.getPos())));
      const o2 = Number(e3.getPos() - i3), h2 = await e3.readUint32();
      return o2 + 11 !== h2 ? (n.R8("script size not match, size: ".concat(o2 + 11, ", previousTagSize: ").concat(h2), "src/avformat/formats/flv/FlvScriptTag.ts", 63), c.LR) : 0;
    }
    computeSize() {
      const e3 = [], t3 = new a2.A();
      return t3.onFlush = (t4) => (e3.push(t4.slice()), 0), (0, d2.bD)(t3, "onMetaData"), (0, d2.bD)(t3, this.onMetaData), t3.flush(), (0, s2.A)(Uint8Array, e3).length;
    }
    write(e3) {
      if (this.onMetaData) {
        const t3 = [], i3 = new a2.A();
        i3.onFlush = (e4) => (t3.push(e4.slice()), 0), (0, d2.bD)(i3, "onMetaData"), (0, d2.bD)(i3, this.onMetaData), i3.flush();
        const r3 = (0, s2.A)(Uint8Array, t3);
        o.M5(e3, 18, BigInt(0), void 0, r3);
      }
    }
    dts2Position(e3) {
      if (this.canSeek()) {
        let t3 = -1;
        const i3 = this.onMetaData.keyframes.times, r3 = this.onMetaData.keyframes.filepositions;
        let a3;
        for (a3 = 0; a3 < i3.length; a3++) {
          if (i3[a3] === e3) {
            t3 = a3;
            break;
          }
          if (i3[a3] > e3) {
            t3 = Math.max(a3 - 1, 0);
            break;
          }
        }
        return a3 && a3 === i3.length && (t3 = i3.length - 1), { pos: r3[t3], dts: i3[t3] };
      }
      return { pos: -1, dts: -1 };
    }
    position2DTS(e3) {
      if (this.canSeek()) {
        let i3 = -1;
        const r3 = this.onMetaData.keyframes.times, a3 = this.onMetaData.keyframes.filepositions;
        let s3 = 0;
        for (s3 = 0; s3 < a3.length; s3++) if (a3[s3] > e3) {
          i3 = s3;
          break;
        }
        var t3;
        return s3 === a3.length ? null !== (t3 = this.onMetaData.duration) && void 0 !== t3 ? t3 : r3[r3.length - 1] : r3[i3];
      }
      return -1;
    }
    canSeek() {
      return !!(this.onMetaData.keyframes && this.onMetaData.keyframes.filepositions && this.onMetaData.keyframes.filepositions.length);
    }
  }
}, 35028: (e2, t2, i2) => {
  i2.d(t2, { FJ: () => r2, U5: () => a2 });
  const r2 = { 10: 86018, 2: 86017, 11: 86051, 1: 69645, 4: 86049, 5: 86049, 6: 86049, 7: 65543, 8: 65542 }, a2 = { 7: 27, 12: 173, 9: 12, 2: 4, 3: 86, 4: 92, 5: 106, 6: 131 };
}, 94889: (e2, t2, i2) => {
  i2.d(t2, { M5: () => s2 }), i2(35028), i2(44328), i2(77231), i2(65977);
  var r2 = i2(67672);
  function a2(e3, t3, i3) {
    const r3 = e3.getPos(), a3 = e3.getPointer(), s3 = r3 - BigInt(Math.floor(a3));
    t3 < r3 && t3 >= s3 ? (e3.seekInline(a3 + Number(t3 - r3)), e3.writeUint24(i3), e3.seekInline(a3)) : (e3.seek(t3), e3.writeUint24(i3), e3.seek(r3));
  }
  function s2(e3, t3, i3, s3, n, o) {
    e3.flush(), e3.writeUint8(t3);
    const c = e3.getPos();
    e3.writeUint24(0), e3.writeUint24(Number(i3 & BigInt(16777215))), e3.writeUint8(Number(i3 >> BigInt(24) & BigInt(255))), e3.writeUint24(0);
    const d2 = e3.getPos();
    s3 && s3(e3), r2.Pc(n) ? (n(e3), a2(e3, c, Number(e3.getPos() - d2))) : n && (a2(e3, c, n.length + Number(e3.getPos() - d2)), e3.writeBuffer(n));
    const h = Number(e3.getPos() - c) + 1;
    o && o(h), e3.writeUint32(h);
  }
}, 13663: (e2, t2, i2) => {
  i2.d(t2, { h6: () => a2, s5: () => n, uM: () => s2 });
  var r2 = i2(79682);
  const a2 = { [(0, r2.A)("mp4v")]: 12, [(0, r2.A)("DIVX")]: 12, [(0, r2.A)("XVID")]: 12, [(0, r2.A)("3IV2")]: 12, [(0, r2.A)("vvc1")]: 196, [(0, r2.A)("vvi1")]: 196, [(0, r2.A)("hev1")]: 173, [(0, r2.A)("hvc1")]: 173, [(0, r2.A)("dvhe")]: 173, [(0, r2.A)("hev1")]: 173, [(0, r2.A)("avc1")]: 27, [(0, r2.A)("avc2")]: 27, [(0, r2.A)("avc3")]: 27, [(0, r2.A)("avc4")]: 27, [(0, r2.A)("ai5p")]: 27, [(0, r2.A)("ai5q")]: 27, [(0, r2.A)("ai52")]: 27, [(0, r2.A)("ai53")]: 27, [(0, r2.A)("ai55")]: 27, [(0, r2.A)("ai56")]: 27, [(0, r2.A)("ai1p")]: 27, [(0, r2.A)("ai1q")]: 27, [(0, r2.A)("ai12")]: 27, [(0, r2.A)("ai13")]: 27, [(0, r2.A)("ai15")]: 27, [(0, r2.A)("ai16")]: 27, [(0, r2.A)("AVin")]: 27, [(0, r2.A)("aivx")]: 27, [(0, r2.A)("rv64")]: 27, [(0, r2.A)("xalg")]: 27, [(0, r2.A)("avlg")]: 27, [(0, r2.A)("dva1")]: 27, [(0, r2.A)("dvav")]: 27, [(0, r2.A)("vp08")]: 139, [(0, r2.A)("vp09")]: 167, [(0, r2.A)("av01")]: 225 }, s2 = { [(0, r2.A)("mp4a")]: 86018, [(0, r2.A)("ac-3")]: 86019, [(0, r2.A)("sac3")]: 86019, [(0, r2.A)("ac-4")]: 86119, [(0, r2.A)("dtsc")]: 86020, [(0, r2.A)("dtsh")]: 86020, [(0, r2.A)("dtsl")]: 86020, [(0, r2.A)("dtse")]: 86020, [(0, r2.A)("DTS ")]: 86020, [(0, r2.A)("ec-3")]: 86056, [(0, r2.A)(".mp3")]: 86017, [(0, r2.A)("mp3 ")]: 86017, 1836253269: 86017, [(0, r2.A)("spex")]: 86051, [(0, r2.A)("SPXN")]: 86051, [(0, r2.A)("fLaC")]: 86028, [(0, r2.A)("Opus")]: 86076, [(0, r2.A)("alaw")]: 65543, [(0, r2.A)("ulaw")]: 65542, [(0, r2.A)("fl32")]: 65557, [(0, r2.A)("fl64")]: 65559, [(0, r2.A)("twos")]: 65537, [(0, r2.A)("lpcm")]: 65536, [(0, r2.A)("sowt")]: 65536, [(0, r2.A)("in24")]: 65548, [(0, r2.A)("in32")]: 65544, [(0, r2.A)("sowt")]: 65540, [(0, r2.A)("raw ")]: 65541, [(0, r2.A)("NONE")]: 65541 }, n = { [(0, r2.A)("text")]: 94213, [(0, r2.A)("tx3g")]: 94213, [(0, r2.A)("c608")]: 94218 };
}, 5783: (e2, t2, i2) => {
  function r2(e3, t3) {
    for (let i3 = 0; i3 < e3.length; i3++) if (e3[i3].privData.number === t3) return e3[i3];
  }
  i2.d(t2, { A: () => r2 });
}, 93082: (e2, t2, i2) => {
  function r2(e3, t3) {
    for (let i3 = 0; i3 < e3.length; i3++) if (e3[i3].privData.uid === t3) return e3[i3];
  }
  i2.d(t2, { A: () => r2 });
}, 33919: (e2, t2, i2) => {
  i2.d(t2, { Ag: () => w, Cr: () => d2, GZ: () => A, Pb: () => S, Qb: () => k, Wg: () => v, Wy: () => l, Y0: () => f, aL: () => P, eG: () => p, hK: () => g, jt: () => y, pf: () => b, qi: () => h, qp: () => u });
  var r2 = i2(4624), a2 = i2(9705), s2 = i2(67672), n = i2(72739);
  const o = "src/avformat/formats/matroska/imatroska.ts", c = BigInt(20971520), d2 = { 19899: { type: 9, isArray: true, filedName: "entry", child: { 21419: { type: 1, filedName: "id" }, 21420: { type: 2, filedName: "pos" } } } }, h = { 29604: { type: 2, filedName: "segmentUUID" }, 2807729: { type: 1, filedName: "timestampScale" }, 17545: { type: 5, filedName: "duration" }, 31657: { type: 7, filedName: "title" }, 19840: { type: 7, filedName: "muxingApp" }, 22337: { type: 7, filedName: "writingApp" }, 17505: { type: 8, filedName: "dateUTC" } }, l = { 174: { type: 9, isArray: true, filedName: "entry", child: { 215: { type: 1, filedName: "number" }, 29637: { type: 1, filedName: "uid" }, 131: { type: 1, filedName: "type" }, 21358: { type: 7, filedName: "name" }, 136: { type: 10, filedName: "default" }, 185: { type: 10, filedName: "enabled" }, 2274716: { type: 7, filedName: "language" }, 2306383: { type: 6, filedName: "timeScale" }, 134: { type: 7, filedName: "codecId" }, 2459272: { type: 7, filedName: "codecName" }, 25506: { type: 8, filedName: "codecPrivate" }, 225: { type: 9, filedName: "audio", child: { 181: { type: 5, filedName: "sampleRate" }, 30901: { type: 5, filedName: "outSampleRate" }, 25188: { type: 1, filedName: "bitDepth" }, 159: { type: 1, filedName: "channels" } } }, 224: { type: 9, filedName: "video", child: { 2327523: { type: 1, filedName: "framerate" }, 21680: { type: 1, filedName: "displayWidth" }, 21690: { type: 1, filedName: "displayHeight" }, 176: { type: 1, filedName: "pixelWidth" }, 186: { type: 1, filedName: "pixelHeight" }, 3061028: { type: 8, filedName: "colorSpace" }, 21440: { type: 1, filedName: "alphaMode" }, 21936: { type: 9, filedName: "color", child: { 21937: { type: 1, filedName: "matrixCoefficients" }, 21938: { type: 1, filedName: "bitsPerChannel" }, 21941: { type: 1, filedName: "cbSubHorz" }, 21942: { type: 1, filedName: "cbSubVert" }, 21939: { type: 1, filedName: "chromaSubHorz" }, 21940: { type: 1, filedName: "chromaSubVert" }, 21943: { type: 1, filedName: "chromaSitingHorz" }, 21944: { type: 1, filedName: "chromaSitingVert" }, 21945: { type: 1, filedName: "range" }, 21946: { type: 1, filedName: "transferCharacteristics" }, 21947: { type: 1, filedName: "primaries" }, 21948: { type: 1, filedName: "maxCll" }, 21949: { type: 1, filedName: "maxFall" }, 21968: { type: 9, filedName: "masteringMeta", child: { 21969: { type: 5, filedName: "rx" }, 21970: { type: 5, filedName: "ry" }, 21971: { type: 5, filedName: "gx" }, 21972: { type: 5, filedName: "gy" }, 21973: { type: 5, filedName: "bx" }, 21974: { type: 5, filedName: "by" }, 21975: { type: 5, filedName: "whiteX" }, 21976: { type: 5, filedName: "whiteY" }, 21978: { type: 5, isArray: true, filedName: "minLuminance" }, 21977: { type: 5, filedName: "maxLuminance" } } } } }, 30320: { type: 9, filedName: "projection", child: { 30321: { type: 1, filedName: "type" }, 30322: { type: 8, filedName: "private" }, 30323: { type: 5, filedName: "yaw" }, 30324: { type: 5, filedName: "pitch" }, 30325: { type: 5, filedName: "roll" } } }, 21682: { type: 1, filedName: "displayUnit" }, 154: { type: 1, filedName: "interlaced" }, 157: { type: 1, filedName: "fieldOrder" }, 21432: { type: 1, filedName: "stereoMode" }, 21683: { type: 1, filedName: "aspectRatio" } } }, 226: { type: 9, filedName: "operations", child: { 227: { type: 9, isArray: true, filedName: "entry", child: { 228: { type: 9, isArray: true, filedName: "planes", child: { 230: { type: 1, filedName: "type" }, 229: { type: 1, filedName: "uid" } } } } } } }, 28032: { type: 9, filedName: "encodings", child: { 25152: { type: 9, isArray: true, filedName: "entry", child: { 20530: { type: 1, filedName: "scope" }, 20531: { type: 1, filedName: "type" }, 20532: { type: 9, filedName: "compression", child: { 16980: { type: 1, filedName: "algo" }, 16981: { type: 8, filedName: "settings" } } }, 20533: { type: 9, filedName: "encryption", child: { 18401: { type: 1, filedName: "algo" }, 18402: { type: 8, filedName: "keyId" } } } } } } } } } }, u = { 24999: { type: 9, isArray: true, filedName: "entry", child: { 18094: { type: 1, filedName: "uid" }, 18030: { type: 7, filedName: "name" }, 18016: { type: 7, filedName: "mime" }, 18046: { type: 7, filedName: "description" }, 18012: { type: 8, filedName: "data" } } } }, f = { 17849: { type: 9, isArray: true, filedName: "entry", child: { 182: { type: 9, isArray: true, filedName: "atom", child: { 145: { type: 2, filedName: "start" }, 146: { type: 2, filedName: "end" }, 29636: { type: 1, filedName: "uid" }, 128: { type: 9, filedName: "display", child: { 133: { type: 7, filedName: "title" }, 17276: { type: 7, filedName: "language" } } } } } } } }, p = { 187: { type: 9, isArray: true, filedName: "entry", child: { 179: { type: 2, filedName: "time" }, 183: { type: 9, isArray: true, filedName: "pos", child: { 247: { type: 1, filedName: "track" }, 241: { type: 2, filedName: "pos" } } } } } }, m = { 17827: { type: 7, filedName: "name" }, 17543: { type: 7, filedName: "string" }, 17530: { type: 7, filedName: "language" }, 17540: { type: 1, filedName: "default" }, 17588: { type: 1, filedName: "default" }, 26568: { type: 9, filedName: "sub" } };
  m[26568].child = m;
  const g = { 29555: { type: 9, isArray: true, filedName: "entry", child: { 26568: { type: 9, filedName: "tag", child: m }, 25536: { type: 9, filedName: "target", child: { 25546: { type: 7, filedName: "type" }, 26826: { type: 1, filedName: "typeValue" }, 25541: { type: 1, filedName: "trackUid" }, 25540: { type: 1, filedName: "chapterUid" }, 25542: { type: 1, filedName: "attachUid" } } } } } }, v = { 161: { type: 8, filedName: "block" }, 30113: { type: 9, filedName: "additions", child: { 166: { type: 9, isArray: true, filedName: "entry", child: { 238: { type: 1, filedName: "additionalId" }, 165: { type: 8, filedName: "additional" } } } } }, 155: { type: 2, filedName: "duration" }, 30114: { type: 4, filedName: "discardPadding" }, 251: { type: 4, isArray: true, filedName: "reference" }, 164: { type: 10, filedName: "nonSimple" } }, A = { 163: { type: 8, filedName: "block" }, 160: { type: 9, filedName: "blockGroup", child: v }, 231: { type: 2, filedName: "timeCode" }, 167: { type: 2, filedName: "pos" }, 171: { type: 2, filedName: "prevSize" } }, y = { 17030: { type: 1, filedName: "version" }, 17143: { type: 1, filedName: "readVersion" }, 17138: { type: 1, filedName: "maxIdLength" }, 17139: { type: 1, filedName: "maxSizeLength" }, 17026: { type: 7, filedName: "docType" }, 17031: { type: 1, filedName: "docTypeVersion" }, 17029: { type: 1, filedName: "docTypeReadVersion" } };
  async function w(e3, t3) {
    const i3 = e3.getPos();
    let s3 = await e3.readUint8();
    if (!s3) return r2.z3("0x00 as pos ".concat(i3, " invalid as first byte of an EBML number"), o, 766), a2.LR;
    let n2 = 1;
    for (; !(128 & s3); ) n2++, s3 <<= 1;
    if (s3 &= 127, n2 > t3) return r2.z3("Length ".concat(n2, " indicated by an EBML number's first byte ").concat(s3.toString(16), " at pos ").concat(i3, " exceeds max length ").concat(t3, "."), o, 779), a2.LR;
    let c2 = s3 >>> n2 - 1;
    for (; --n2; ) c2 <<= 8, c2 |= await e3.readUint8();
    return c2;
  }
  async function b(e3, t3) {
    const i3 = e3.getPos();
    return await w(e3, t3) - ((1 << 7 * Number(BigInt.asIntN(32, e3.getPos() - i3)) - 1) - 1);
  }
  async function k(e3, t3) {
    const i3 = e3.getPos();
    let s3 = await e3.readUint8(), n2 = 1;
    if (!s3) return r2.z3("0x00 as pos ".concat(i3, " invalid as first byte of an EBML number"), o, 813), BigInt(a2.LR);
    for (; !(128 & s3); ) n2++, s3 <<= 1;
    if (s3 &= 127, n2 > t3) return r2.z3("Length ".concat(n2, " indicated by an EBML number's first byte ").concat(s3.toString(16), " at pos ").concat(i3, " exceeds max length ").concat(t3, "."), o, 824), BigInt(a2.LR);
    let c2 = BigInt(Math.floor(s3 >>> n2 - 1));
    for (; --n2; ) {
      c2 <<= BigInt(8);
      const t4 = await e3.readUint8();
      c2 |= BigInt(Math.floor(t4));
    }
    return c2;
  }
  async function x(e3, t3) {
    switch (t3) {
      case BigInt(0):
        return 0;
      case BigInt(1):
        return e3.ioReader.readUint8();
      case BigInt(2):
        return e3.ioReader.readUint16();
      case BigInt(3):
        return e3.ioReader.readUint24();
      case BigInt(4):
        return e3.ioReader.readUint32();
      case BigInt(8):
        return e3.ioReader.readUint64();
    }
    let i3 = BigInt(0), r3 = 0;
    for (; r3++ < t3; ) {
      const t4 = await e3.ioReader.readUint8();
      i3 = i3 << BigInt(8) | BigInt.asUintN(64, BigInt(Math.floor(t4)));
    }
    return i3;
  }
  async function I(e3, t3) {
    switch (t3) {
      case BigInt(0):
        return 0;
      case BigInt(1):
        return e3.ioReader.readInt8();
      case BigInt(2):
        return e3.ioReader.readInt16();
      case BigInt(4):
        return e3.ioReader.readInt32();
      case BigInt(8):
        return e3.ioReader.readInt64();
    }
    let i3 = BigInt(0), r3 = 0;
    for (; r3++ < t3; ) {
      const t4 = await e3.ioReader.readUint8();
      i3 = i3 << BigInt(8) | BigInt.asUintN(64, BigInt(Math.floor(t4)));
    }
    return t3 === BigInt(3) ? Number(BigInt.asIntN(32, BigInt.asIntN(24, i3))) : BigInt.asIntN(64, i3);
  }
  async function P(e3, t3) {
    const i3 = e3.ioReader.getPos();
    let s3 = await e3.ioReader.peekUint8();
    if (!s3) return r2.z3("0x00 as pos ".concat(i3, " invalid as first byte of an EBML number"), o, 909), a2.LR;
    let n2 = 1;
    for (; !(128 & s3); ) n2++, s3 <<= 1;
    if (n2 > t3) return r2.z3("Length ".concat(n2, " indicated by an EBML number's first byte ").concat(s3.toString(16), " at pos ").concat(i3, " exceeds max length ").concat(t3, "."), o, 921), a2.LR;
    let c2 = 0;
    for (; n2--; ) c2 <<= 8, c2 |= await e3.ioReader.readUint8();
    return c2;
  }
  async function S(e3, t3, i3, r3 = {}, a3 = []) {
    return await (async function(e4, t4, i4) {
      const r4 = e4.privateData, a4 = e4.ioReader.getPos();
      for (; e4.ioReader.getPos() < a4 + t4; ) {
        const t5 = await P(e4, r4.header.maxIdLength), a5 = await k(e4.ioReader, r4.header.maxSizeLength);
        if (e4.ioReader.getPos(), false === await i4(t5, a5)) return;
      }
    })(e3, t3, async (t4, o2) => {
      if (i3[t4]) {
        const a4 = i3[t4];
        let n2;
        switch (a4.type) {
          case 1:
            n2 = await x(e3, o2);
            break;
          case 2:
            n2 = await x(e3, o2), s2.ai(n2) && (n2 = BigInt(n2));
            break;
          case 3:
            n2 = await I(e3, o2);
            break;
          case 4:
            n2 = await I(e3, o2), s2.ai(n2) && (n2 = BigInt(n2));
            break;
          case 6:
          case 5:
            n2 = await (async function(e4, t5) {
              return t5 === BigInt(4) ? e4.ioReader.readFloat() : t5 === BigInt(8) ? e4.ioReader.readDouble() : (await e4.ioReader.skip(Number(BigInt.asIntN(32, t5))), 0);
            })(e3, o2);
            break;
          case 7:
            n2 = await e3.ioReader.readString(Number(BigInt.asIntN(32, o2))), n2 && 0 === n2.charCodeAt(n2.length - 1) && (n2 = n2.substring(0, n2.length - 1));
            break;
          case 10:
            n2 = !!await x(e3, o2);
            break;
          case 8:
            n2 = { pos: e3.ioReader.getPos(), size: o2, data: o2 < c ? await e3.ioReader.readBuffer(Number(BigInt.asIntN(32, o2))) : null };
            break;
          case 9:
            n2 = a4.child ? await S(e3, o2, a4.child) : {};
            break;
          default:
            await e3.ioReader.skip(Number(BigInt.asIntN(32, o2)));
        }
        if (null != n2) if (a4.isArray) {
          const e4 = r3[a4.filedName] || [];
          e4.push(n2), r3[a4.filedName] = e4;
        } else r3[a4.filedName] = n2;
      } else await e3.ioReader.skip(Number(BigInt.asIntN(32, o2)));
      if (a3.length && n.zy(a3, t4)) return false;
    }), r3;
  }
}, 31866: (e2, t2, i2) => {
  i2.d(t2, { N: () => a2, e: () => r2 });
  const r2 = { A_AAC: 86018, A_AC3: 86019, A_ALAC: 86032, A_DTS: 86020, A_EAC3: 86056, A_FLAC: 86028, A_MLP: 86045, "A_MPEG/L2": 86016, "A_MPEG/L1": 86058, "A_MPEG/L3": 86017, A_OPUS: 86076, "A_OPUS/EXPERIMENTAL": 86076, "A_PCM/FLOAT/IEEE": 65557, "A_PCM/INT/BIG": 65537, "A_PCM/INT/LIT": 65536, "A_QUICKTIME/QDMC": 86066, "A_QUICKTIME/QDM2": 86035, "A_REAL/14_4": 77824, "A_REAL/28_8": 77825, "A_REAL/ATRC": 86047, "A_REAL/COOK": 86036, "A_REAL/SIPR": 86057, A_TRUEHD: 86060, A_TTA1: 86038, A_VORBIS: 86021, A_WAVPACK4: 86041, "D_WEBVTT/SUBTITLES": 94226, "D_WEBVTT/CAPTIONS": 94226, "D_WEBVTT/DESCRIPTIONS": 94226, "D_WEBVTT/METADATA": 94226, "S_TEXT/UTF8": 94225, "S_TEXT/ASCII": 94210, "S_TEXT/ASS": 94230, "S_TEXT/SSA": 94230, "S_TEXT/WEBVTT": 94226, S_ASS: 94230, S_SSA: 94230, S_VOBSUB: 94208, S_DVBSUB: 94209, "S_HDMV/PGS": 94214, "S_HDMV/TEXTST": 94231, V_AV1: 225, V_DIRAC: 116, V_FFV1: 33, V_MJPEG: 7, V_MPEG1: 1, V_MPEG2: 2, "V_MPEG4/ISO/ASP": 12, "V_MPEG4/ISO/AP": 12, "V_MPEG4/ISO/SP": 12, "V_MPEG4/ISO/AVC": 27, "V_MPEGH/ISO/HEVC": 173, "V_MPEGH/ISO/VVC": 196, "V_MPEG4/MS/V3": 16, V_PRORES: 147, "V_REAL/RV10": 5, "V_REAL/RV20": 6, "V_REAL/RV30": 68, "V_REAL/RV40": 69, V_SNOW: 208, V_THEORA: 30, V_UNCOMPRESSED: 13, V_VP8: 139, V_VP9: 167 }, a2 = { V_VP8: 139, V_VP9: 167, V_AV1: 225, A_VORBIS: 86021, A_OPUS: 86076, "D_WEBVTT/SUBTITLES": 94226, "D_WEBVTT/CAPTIONS": 94226, "D_WEBVTT/DESCRIPTIONS": 94226, "D_WEBVTT/METADATA": 94226 };
}, 21071: (e2, t2, i2) => {
  i2.d(t2, { _l: () => r2, gQ: () => a2 });
  const r2 = ["hmhd", "nmhd", "iods", "xml ", "url ", "bxml", "ipro", "mere", "stts", "ctts", "stss", "stsz", "stz2", "stsc", "stco", "co64", "stsd", "dref", "mvhd", "tkhd", "mdhd", "hdlr"], a2 = ["moov", "trak", "edts", "mdia", "minf", "dinf", "stbl", "mvex", "moof", "traf", "vttc", "tref", "iref", "mfra", "hnti", "hinf", "strd", "sinf", "rinf", "schi", "trgr", "udta", "iprp", "ipco", "strk", "meco", "encv", "enca", "sinf", "schi"];
}, 61179: (e2, t2, i2) => {
  function r2(e3, t3, i3, r3, a2 = 0) {
    const s2 = e3.privData;
    let n = t3.baseDataOffset + BigInt(Math.floor(t3.dataOffset));
    (t3.baseIsMoof || n < r3) && (n += i3.currentFragment.pos);
    let o = t3.baseMediaDecodeTime;
    const c = t3.sampleSizes, d2 = t3.sampleDurations, h = t3.sampleFlags, l = t3.sampleCompositionTimeOffset, u = t3.remainDataOffsets, f = t3.remainDataOffsetIndex;
    let p = 0;
    const m = [];
    for (let e4 = 0; e4 < t3.sampleCount; e4++) {
      f[p] === e4 && (n = t3.baseDataOffset + BigInt(Math.floor(u[p])), t3.baseIsMoof && (n += i3.currentFragment.pos), p++);
      const r4 = { dts: o, pts: o + BigInt(Math.floor(l[e4])), pos: n, size: c[e4], duration: d2[e4], flags: 0 };
      o += BigInt(Math.floor(r4.duration)), n += BigInt(Math.floor(r4.size)), 16842752 & h[e4] || (r4.flags |= 1), 0 === e4 && c.length > 1 && 2 & a2 && (r4.flags |= 1), m.push(r4);
    }
    s2.samplesIndex = m;
    const g = i3.cencs ? i3.cencs[s2.trackId] : null;
    g && t3.cenc && t3.cenc.sampleEncryption && (s2.samplesEncryption = t3.cenc.sampleEncryption.map((e4) => ({ scheme: g.schemeType, keyId: g.defaultKeyId, skipByteBlock: g.skipByteBlock, cryptByteBlock: g.cryptByteBlock, iv: e4.iv, subsamples: e4.subsamples })));
  }
  i2.d(t2, { p: () => r2 });
}, 98859: (e2, t2, i2) => {
  i2.d(t2, { X: () => o });
  var r2 = i2(4624), a2 = i2(44328), s2 = i2(77231);
  const n = "src/avformat/formats/mov/function/buildIndex.ts";
  function o(e3, t3) {
    var i3;
    const o2 = e3.privData, c = o2.chunkOffsets, d2 = o2.sampleSizes, h = o2.cttsSampleCounts, l = o2.cttsSampleOffsets, u = o2.stscFirstChunk, f = o2.stscSamplesPerChunk, p = o2.stssSampleNumbersMap, m = o2.sttsSampleCounts, g = o2.sttsSampleDeltas;
    if (!c.length) return;
    let v = 0, A = 0, y = 0, w = 0, b = 0, k = 0, x = BigInt(0), I = 0, P = BigInt(0);
    const S = [];
    if (!t3.ignoreEditlist && null !== (i3 = e3.metadata.elst) && void 0 !== i3 && i3.length) {
      let i4 = BigInt(0), o3 = 0, c2 = false, d3 = BigInt(0), h2 = BigInt(0);
      for (let t4 = 0; t4 < e3.metadata.elst.length; t4++) {
        const i5 = e3.metadata.elst[t4];
        0 === t4 && i5.mediaTime === -BigInt(1) ? (d3 = i5.segmentDuration, o3 = 1) : t4 === o3 && i5.mediaTime >= BigInt(0) ? h2 = i5.mediaTime : c2 = true;
      }
      c2 && r2.R8("multiple edit list entries, a/v desync might occur, patch welcome", n, 93), (d3 || h2) && t3.timescale > 0 && (d3 && (d3 = (0, a2.k)(d3, { num: 1, den: t3.timescale }, e3.timeBase), e3.duration !== s2.Dh && (e3.duration += d3)), i4 = h2 - d3, P = -i4);
    }
    for (let t4 = 0; t4 < c.length; t4++) for (x = c[t4], v < u.length - 1 && u[v + 1] === t4 + 1 && v++, k = f[v]; k > 0; ) {
      const t5 = { dts: P, pts: P, pos: x, size: d2[I], duration: g[A], flags: 0 };
      (p && p.has(I + 1) || 1 === e3.codecpar.codecType) && (t5.flags |= 1), l && (t5.pts = t5.dts + BigInt(Math.floor(l[w])), b++, b === h[w] && (w++, b = 0)), x += BigInt(Math.floor(t5.size)), P += BigInt(Math.floor(g[A])), y++, y === m[A] && (A++, y = 0), I++, S.push(t5), k--;
    }
    S.length && e3.duration === s2.Dh && (e3.duration = S[I - 1].pts + BigInt(Math.floor(S[I - 1].duration))), o2.samplesIndex = S;
  }
}, 3384: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(77231);
  function a2() {
    return { trackId: 0, baseDataOffset: BigInt(0), defaultSampleDuration: 0, defaultSampleSize: 0, defaultSampleFlags: 0, baseMediaDecodeTime: BigInt(0), sampleCount: 0, dataOffset: 0, remainDataOffsets: [], remainDataOffsetIndex: [], dataOffsetPos: BigInt(0), firstSampleFlags: 0, sampleDurations: [], sampleSizes: [], sampleFlags: [], sampleCompositionTimeOffset: [], baseIsMoof: false, ioWriter: null, buffers: [], lastFragIndexDts: BigInt(0), tfdtDelay: r2.Dh, trunPtsDelay: BigInt(0) };
  }
}, 9690: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(77231);
  function a2() {
    return { isom: false, timescale: r2.N_, duration: r2.Dh, foundMoov: false, foundMdat: false, majorBrand: 0, minorVersion: 0, compatibleBrand: [], creationTime: BigInt(0), modificationTime: BigInt(0), rate: r2.N_, volume: r2.N_, matrix: null, nextTrackId: 1, fragment: false, trexs: [], currentFragment: null, boxsPositionInfo: [], holdMoovPos: BigInt(0), currentChunk: null };
  }
}, 38106: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(77231);
  function a2() {
    return { chunkOffsets: null, cttsSampleCounts: null, cttsSampleOffsets: null, stscFirstChunk: null, stscSamplesPerChunk: null, stscSampleDescriptionIndex: null, stssSampleNumbersMap: null, stssSampleNumbers: null, sampleSizes: null, sttsSampleCounts: null, sttsSampleDeltas: null, duration: BigInt(0), trackId: r2.N_, layer: 0, alternateGroup: 0, volume: 0, matrix: null, width: 0, height: 0, audioCid: 0, samplesPerFrame: 0, bytesPerFrame: 0, currentSample: 0, sampleEnd: false, samplesIndex: [], samplesEncryption: [], fragIndexes: [], lastPts: r2.Dh, lastDts: r2.Dh, startDts: r2.Dh, startCT: r2.N_, startPts: r2.Dh, lastDuration: 0, chunkCount: 0, firstWrote: false, lastStscCount: 0, perStreamGrouping: false, index: 0, flags: 0 };
  }
}, 85428: (e2, t2, i2) => {
  i2.d(t2, { G: () => s2 });
  var r2 = i2(77231), a2 = i2(44328);
  function s2(e3, t3, i3) {
    let s3, n, o, c, d2, h, l, u = BigInt(0);
    if (e3.streams.forEach((e4) => {
      const t4 = e4.privData;
      if (!t4.samplesIndex || !t4.samplesIndex.length) return t4.sampleEnd = true, true;
      t4.sampleEnd || c && !(t4.samplesIndex[t4.currentSample].pos < c.pos) || (c = t4.samplesIndex[t4.currentSample], d2 = e4), t4.sampleEnd || h && !((0, a2.k)(t4.samplesIndex[t4.currentSample].dts, e4.timeBase, r2.KR) < u) || (h = t4.samplesIndex[t4.currentSample], u = (0, a2.k)(h.dts, e4.timeBase, r2.KR), l = e4);
    }), c && h) {
      const t4 = (0, a2.k)(c.dts, d2.timeBase, r2.KR), o2 = (0, a2.k)(h.dts, l.timeBase, r2.KR);
      Math.abs(Number(t4 - o2)) < 1e6 || 2 & e3.ioReader.flags || 4 & e3.ioReader.flags || !(1 & i3) ? (s3 = c, n = d2) : (s3 = h, n = l);
    } else c ? (s3 = c, n = d2) : h && (s3 = h, n = l);
    if (n) {
      const e4 = n.privData;
      o = e4.samplesEncryption[e4.currentSample], e4.currentSample++, e4.currentSample >= e4.samplesIndex.length && (e4.sampleEnd = true);
    }
    if (t3.fragment) {
      const i4 = !!e3.streams.find((e4) => false === e4.privData.sampleEnd);
      i4 || (t3.currentFragment = null);
    }
    return { sample: s3, stream: n, encryption: o };
  }
}, 14041: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(77231);
  function a2(e3) {
    return e3.startPts !== r2.Dh ? e3.lastPts - e3.startPts : e3.startDts === r2.Dh ? e3.lastPts : e3.lastPts - (e3.startDts + BigInt(0 | e3.startCT));
  }
}, 79804: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(72739);
  function a2(e3, t3) {
    const i3 = e3.getPos(), a3 = e3.getPointer(), s2 = i3 - BigInt(Math.floor(a3)), n = [];
    r2.__(t3.boxsPositionInfo, (t4) => {
      t4.pos < i3 && t4.pos >= s2 ? (e3.seekInline(a3 + Number(t4.pos - i3)), e3.writeUint32(t4.size)) : n.push(t4);
    }), r2.__(n, (t4) => {
      e3.seek(t4.pos), e3.writeUint32(t4.size);
    }), n.length ? e3.seek(i3) : e3.seekInline(a3), t3.boxsPositionInfo = [];
  }
}, 74963: (e2, t2, i2) => {
  i2.d(t2, { E6: () => A, t9: () => k, wB: () => w, wZ: () => b });
  var r2 = i2(61499), a2 = i2(65977), s2 = i2(21071), n = i2(68361), o = i2(4624), c = i2(61179), d2 = i2(98859), h = i2(3384), l = i2(38106), u = i2(37837), f = i2(14686), p = i2(77231), m = i2(50315), g = i2(71517);
  const v = "src/avformat/formats/mov/imov.ts";
  async function A(e3, t3, i3) {
    const r3 = e3.getPos() + BigInt(Math.floor(i3.size));
    for (t3.majorBrand = await e3.readUint32(), t3.minorVersion = await e3.readUint32(), t3.majorBrand === (0, a2.A)("qt  ") && (t3.isom = true); e3.getPos() < r3; ) t3.compatibleBrand.push(await e3.readUint32());
  }
  async function y(e3, t3, i3, r3) {
    const c2 = e3.getPos() + BigInt(Math.floor(i3.size));
    for (; e3.getPos() < c2; ) {
      const i4 = await e3.readUint32(), c3 = await e3.readUint32();
      if (i4 < 8) return void o.z3("invalid box size ".concat(i4), v, 74);
      if (n.A[c3]) await n.A[c3](e3, t3, { type: c3, size: i4 - 8 }, r3);
      else if (c3 === (0, a2.A)("mdia")) {
        let o2 = false, c4 = BigInt(0);
        const d3 = e3.getPos() + BigInt(Math.floor(i4 - 8));
        for (; e3.getPos() < d3; ) {
          const i5 = await e3.readUint32(), d4 = await e3.readUint32();
          d4 === (0, a2.A)("hdlr") ? (await n.A[d4](e3, t3, { type: d4, size: i5 - 8 }, r3), o2 = true) : d4 === (0, a2.A)("minf") && o2 ? await y(e3, t3, { size: i5 - 8 }, r3) : d4 !== (0, a2.A)("minf") || o2 ? n.A[d4] ? await n.A[d4](e3, t3, { type: d4, size: i5 - 8 }, r3) : s2.gQ.some((e4) => (0, a2.A)(e4) === d4) ? await y(e3, t3, { size: i5 - 8 }, r3) : await e3.skip(i5 - 8) : (c4 = e3.getPos() - BigInt(8), await e3.skip(i5 - 8));
        }
        if (c4) {
          const i5 = e3.getPos();
          await e3.seek(c4);
          const a3 = await e3.readUint32();
          await e3.readUint32();
          await y(e3, t3, { size: a3 - 8 }, r3), await e3.seek(i5);
        }
      } else s2.gQ.some((e4) => (0, a2.A)(e4) === c3) ? await y(e3, t3, { size: i4 - 8 }, r3) : await e3.skip(i4 - 8);
    }
  }
  async function w(e3, t3, i3, s3) {
    i3.parseOneBox = y, i3.parsers = n.A;
    const c2 = e3.getPos() + BigInt(Math.floor(s3.size));
    for (; e3.getPos() < c2; ) {
      const r3 = await e3.readUint32(), s4 = await e3.readUint32();
      if (r3 < 8) return void o.z3("invalid box, type: ".concat(s4, ", size ").concat(r3), v, 207);
      if (n.A[s4]) await n.A[s4](e3, null, { type: s4, size: r3 - 8 }, i3);
      else if (s4 === (0, a2.A)("trak")) if (!i3.foundMoov || i3.fragment) {
        const a3 = t3.createStream();
        if (a3.privData = (0, l.A)(), await y(e3, a3, { size: r3 - 8 }, i3), i3.fragment) {
          const e4 = a3.privData, i4 = t3.streams.find((t4) => {
            const i5 = t4.privData;
            if (t4.index !== a3.index && i5.trackId === e4.trackId) return true;
          });
          i4 ? (a3.sideData[1] && (i4.sideData[1] = a3.sideData[1], i4.codecpar.extradata && (0, u.Eb)(i4.codecpar.extradata), i4.codecpar.extradataSize = i4.sideData[1].length, i4.codecpar.extradata = (0, u.sY)(i4.codecpar.extradataSize), (0, f.lW)(i4.codecpar.extradata, i4.codecpar.extradataSize, i4.sideData[1]), a3.codecpar.width !== p.N_ && e4.width > 0 && (i4.codecpar.width = e4.width), a3.codecpar.width !== p.N_ && e4.height > 0 && (i4.codecpar.height = e4.height)), t3.removeStream(a3), t3.streamIndex--) : (a3.codecpar.width === p.N_ && e4.width > 0 && (a3.codecpar.width = e4.width), a3.codecpar.width === p.N_ && e4.height > 0 && (a3.codecpar.height = e4.height));
        } else (0, d2.X)(a3, i3);
      } else await e3.skip(r3 - 8);
      else s4 === (0, a2.A)("mvex") ? (i3.fragment = true, await y(e3, null, { size: r3 - 8 }, i3)) : await e3.skip(r3 - 8);
    }
    t3.streams.forEach((e4) => {
      if (i3.encryptionInitInfos) {
        const t4 = (0, m.bE)(i3.encryptionInitInfos), a3 = (0, u.sY)(t4.length);
        (0, f.lW)(a3, t4.length, t4), (0, g.$W)(e4.codecpar[r2.o9] + 20, e4.codecpar[r2.o9] + 24, 24, a3, t4.length);
      }
      if (i3.cencs) {
        const t4 = e4.privData, r3 = i3.cencs[t4.trackId];
        r3 && (e4.metadata.encryption = { schemeType: r3.schemeType, schemeVersion: r3.schemeVersion, cryptByteBlock: r3.cryptByteBlock, skipByteBlock: r3.skipByteBlock, perSampleIVSize: r3.defaultPerSampleIVSize, kid: r3.defaultKeyId, constantIV: r3.defaultConstantIV, pattern: r3.pattern });
      }
    });
  }
  async function b(e3, t3, i3, r3) {
    const s3 = e3.getPos() + BigInt(Math.floor(r3.size));
    for (; e3.getPos() < s3; ) {
      const r4 = await e3.readUint32(), s4 = await e3.readUint32();
      if (r4 < 8) return void o.z3("invalid box, type: ".concat(s4, ", size ").concat(r4), v, 341);
      if (n.A[s4]) await n.A[s4](e3, null, { type: s4, size: r4 - 8 }, i3);
      else if (s4 === (0, a2.A)("traf")) {
        const a3 = (0, h.A)();
        i3.currentFragment.currentTrack = a3, await y(e3, null, { size: r4 - 8 }, i3), i3.currentFragment.tracks.push(a3), i3.currentFragment.currentTrack = null;
        const n2 = t3.streams.find((e4) => e4.privData.trackId === a3.trackId);
        if (n2) {
          const e4 = n2.privData;
          a3.streamIndex = n2.index, (0, c.p)(n2, a3, i3, t3.ioReader.getPos(), t3.ioReader.flags), e4.currentSample = 0, e4.sampleEnd = false;
        }
      } else await e3.skip(r4 - 8);
    }
  }
  async function k(e3, t3, i3, r3) {
    const s3 = e3.getPos() + BigInt(Math.floor(r3.size)), n2 = {};
    for (t3.streams.forEach((e4) => {
      const t4 = e4.privData;
      n2[e4.index] = { samples: t4.samplesIndex, currentSample: t4.currentSample, sampleEnd: t4.sampleEnd }, t4.samplesIndex = [];
    }); e3.getPos() < s3; ) {
      const r4 = e3.getPos(), s4 = await e3.readUint32();
      if (await e3.readUint32() === (0, a2.A)("tfra")) {
        const r5 = await e3.readUint8();
        await e3.skip(3);
        const s5 = await e3.readUint32(), n3 = await e3.readUint32(), o2 = await e3.readUint32(), c2 = t3.streams.find((e4) => e4.privData.trackId === s5);
        if (c2) {
          const s6 = c2.privData;
          let d3, h2;
          for (let t4 = 0; t4 < o2; t4++) {
            1 === r5 ? (d3 = await e3.readUint64(), h2 = await e3.readUint64()) : (d3 = BigInt(Math.floor(await e3.readUint32())), h2 = BigInt(Math.floor(await e3.readUint32()))), s6.fragIndexes.push({ pos: h2, time: d3 });
            for (let t5 = 0; t5 < 1 + (n3 >> 4 & 3); t5++) await e3.skip(1);
            for (let t5 = 0; t5 < 1 + (n3 >> 2 & 3); t5++) await e3.skip(1);
            for (let t5 = 0; t5 < 1 + (3 & n3); t5++) await e3.skip(1);
          }
          if (s6.fragIndexes.length) {
            await e3.seek(s6.fragIndexes[s6.fragIndexes.length - 1].pos);
            const r6 = await e3.readUint32(), n4 = await e3.readUint32();
            if (n4 === (0, a2.A)("moof") && (i3.currentFragment = { pos: BigInt(0), size: r6, sequence: 0, tracks: [], currentTrack: null }, await b(e3, t3, i3, { size: r6 }), s6.samplesIndex.length)) {
              const e4 = s6.samplesIndex[s6.samplesIndex.length - 1];
              c2.duration = e4.pts + BigInt(Math.floor(e4.duration)), s6.samplesIndex.length = 0;
            }
          }
        }
      }
      await e3.seek(r4 + BigInt(Math.floor(s4)), false, false);
    }
    i3.currentFragment = null, t3.streams.forEach((e4) => {
      var t4, i4, r4, a3, s4, o2;
      const c2 = e4.privData;
      c2.samplesIndex = null !== (t4 = null === (i4 = n2[e4.index]) || void 0 === i4 ? void 0 : i4.samples) && void 0 !== t4 ? t4 : [], c2.currentSample = null !== (r4 = null === (a3 = n2[e4.index]) || void 0 === a3 ? void 0 : a3.currentSample) && void 0 !== r4 ? r4 : 0, c2.sampleEnd = null !== (s4 = null === (o2 = n2[e4.index]) || void 0 === o2 ? void 0 : o2.sampleEnd) && void 0 !== s4 && s4;
    });
  }
}, 14202: (e2, t2, i2) => {
  i2.d(t2, { BB: () => a2, Ip: () => s2, Jl: () => r2 });
  const r2 = { 1: function(e3) {
    return [{ type: "tkhd" }, { type: "mdia", children: [{ type: "mdhd" }, { type: "hdlr" }, { type: "minf", children: [{ type: "smhd" }, e3.isom ? { type: "minf_hdlr" } : null, { type: "dinf", children: [{ type: "dref", children: [{ type: "url " }] }] }, { type: "stbl", children: [{ type: "stsd" }, { type: "stts" }, { type: "stsc" }, { type: "stsz" }, { type: "stco" }] }] }] }];
  }, 0: function(e3) {
    return [{ type: "tkhd" }, { type: "mdia", children: [{ type: "mdhd" }, { type: "hdlr" }, { type: "minf", children: [{ type: "vmhd" }, e3.isom ? { type: "minf_hdlr" } : null, { type: "dinf", children: [{ type: "dref", children: [{ type: "url " }] }] }, { type: "stbl", children: [{ type: "stsd" }, { type: "stts" }, { type: "stsc" }, { type: "stsz" }, { type: "stco" }] }] }] }];
  } }, a2 = { 1: function(e3, t3) {
    return [{ type: "tkhd" }, { type: "edts" }, { type: "mdia", children: [{ type: "mdhd" }, { type: "hdlr" }, { type: "minf", children: [{ type: "smhd" }, e3.isom ? { type: "minf_hdlr" } : null, { type: "dinf", children: [{ type: "dref", children: [{ type: "url " }] }] }, { type: "stbl", children: [{ type: "stsd" }, { type: "stts" }, { type: "stsc" }, { type: "stsz" }, { type: e3.use64Mdat ? "co64" : "stco" }] }] }] }];
  }, 0: function(e3, t3) {
    let i3 = true;
    if (27 === t3.codecpar.codecId || 173 === t3.codecpar.codecId || 196 === t3.codecpar.codecId) {
      const e4 = t3.privData;
      2 & t3.codecpar.flags && (!e4.cttsSampleCounts || !e4.cttsSampleCounts.length || 1 === e4.cttsSampleCounts.length && 0 === e4.cttsSampleOffsets[0]) && (i3 = false);
    }
    return [{ type: "tkhd" }, { type: "edts" }, { type: "mdia", children: [{ type: "mdhd" }, { type: "hdlr" }, { type: "minf", children: [{ type: "vmhd" }, e3.isom ? { type: "minf_hdlr" } : null, { type: "dinf", children: [{ type: "dref", children: [{ type: "url " }] }] }, { type: "stbl", children: [{ type: "stsd" }, { type: "stts" }, { type: "stss" }, i3 ? { type: "ctts" } : null, { type: "stsc" }, { type: "stsz" }, { type: e3.use64Mdat ? "co64" : "stco" }] }] }] }];
  } }, s2 = function(e3) {
    return [{ type: "tfhd" }, { type: "tfdt" }, { type: "trun" }, e3.cenc && (e3.cenc.defaultSampleInfoSize || e3.cenc.sampleSizes.length) ? { type: "saiz" } : null, e3.cenc && (e3.cenc.defaultSampleInfoSize || e3.cenc.sampleSizes.length) ? { type: "saio" } : null, e3.cenc ? { type: "senc" } : null];
  };
}, 6660: (e2, t2, i2) => {
  i2.d(t2, { Q9: () => s2, f3: () => n, uf: () => o, zs: () => a2 });
  var r2 = i2(65977);
  const a2 = { 86018: 64, 86017: 105, 86076: 173, 86028: 193, 86021: 221, 12: 32, 27: 33, 173: 35, 196: 51, 167: 177, 0: 0 }, s2 = { 32: 12, 33: 27, 35: 173, 51: 196, 177: 167, 64: 86018, 102: 86018, 103: 86018, 104: 86018, 105: 86017, 107: 86017, 173: 86076, 193: 86028, 221: 86021, 0: 0 }, n = { vide: 0, soun: 1, clcp: 3, sbtl: 3, subt: 3, subp: 3, text: 3 }, o = { [(0, r2.A)("mp4a")]: 86018, 1836253269: 86017, [(0, r2.A)("Opus")]: 86076, [(0, r2.A)("fLaC")]: 86028, [(0, r2.A)("spex")]: 86051, [(0, r2.A)("SPXN")]: 86051, [(0, r2.A)("ac-3")]: 86019, [(0, r2.A)("sac3")]: 86019, [r2.A.mp4v]: 12, [(0, r2.A)("av01")]: 225, [(0, r2.A)("vp08")]: 139, [(0, r2.A)("vp09")]: 167, [(0, r2.A)("avc1")]: 27, [(0, r2.A)("hev1")]: 173, [(0, r2.A)("hvc1")]: 173, [(0, r2.A)("vvc1")]: 196, [(0, r2.A)("vvi1")]: 196, [(0, r2.A)("text")]: 94213, [(0, r2.A)("tx3g")]: 94213 };
}, 75473: (e2, t2, i2) => {
  i2.d(t2, { Ro: () => v, dI: () => g, l7: () => p, yT: () => A });
  var r2 = i2(61499), a2 = i2(63939), s2 = i2(65977), n = i2(21071), o = i2(72739), c = i2(80025), d2 = i2(14202), h = i2(79804), l = i2(71517), u = i2(50315), f = i2(14686);
  function p(e3, t3) {
    e3.flush();
    const i3 = e3.getPointer(), r3 = e3.getPos();
    e3.writeUint32(0), e3.writeUint32((0, s2.A)("ftyp")), e3.writeUint32(t3.majorBrand || (0, s2.A)("isom")), e3.writeUint32(t3.minorVersion || 512), o.__(t3.compatibleBrand, (t4) => {
      e3.writeUint32(t4);
    }), (function(e4, t4, i4) {
      const r4 = e4.getPointer();
      e4.seekInline(t4), e4.writeUint32(i4), e4.seekInline(r4);
    })(e3, i3, Number(e3.getPos() - r3)), t3.isom ? (e3.writeUint32(8), e3.writeUint32((0, s2.A)("wide"))) : t3.fragment || (e3.writeUint32(8), e3.writeUint32((0, s2.A)("free")));
  }
  function m(e3, t3, i3, r3) {
    o.__(t3, (t4) => {
      if (!t4) return true;
      if (c.A[t4.type]) c.A[t4.type](e3, i3, r3);
      else if (t4.children) {
        const a3 = e3.getPos();
        e3.writeUint32(0), e3.writeUint32((0, s2.A)(t4.type)), m(e3, t4.children, i3, r3), r3.boxsPositionInfo.push({ pos: a3, type: t4.type, size: Number(e3.getPos() - a3) });
      } else !(function(e4, t5) {
        const i4 = o.zy(n._l, t5);
        e4.writeUint32(i4 ? 12 : 8), e4.writeUint32((0, s2.A)(t5)), i4 && e4.writeUint32(0);
      })(e3, t4.type);
    });
  }
  function g(e3, t3, i3) {
    const n2 = e3.getPos();
    if (e3.writeUint32(0), e3.writeUint32((0, s2.A)("moov")), c.A.mvhd(e3, null, i3), o.__(t3.streams, (t4) => {
      const r3 = e3.getPos();
      e3.writeUint32(0), e3.writeUint32((0, s2.A)("trak")), m(e3, i3.fragment ? d2.Jl[t4.codecpar.codecType](i3) : d2.BB[t4.codecpar.codecType](i3, t4), t4, i3), i3.boxsPositionInfo.push({ pos: r3, type: "trak", size: Number(e3.getPos() - r3) });
    }), i3.fragment) {
      const n3 = e3.getPos();
      e3.writeUint32(0), e3.writeUint32((0, s2.A)("mvex")), o.__(t3.streams, (t4) => {
        c.A.trex(e3, t4, i3);
      }), i3.boxsPositionInfo.push({ pos: n3, type: "mvex", size: Number(e3.getPos() - n3) }), i3.ignoreEncryption || (function(e4, t4, i4) {
        const n4 = [];
        o.__(t4.streams, (e5) => {
          const t5 = (0, l.Un)(e5.codecpar[r2.o9] + 20, e5.codecpar[r2.o9] + 24, 24);
          t5 && (0, u.ZK)((0, f.s3)(a2.f[20](t5), a2.f[25](t5 + 4))).forEach((e6) => {
            (function(e7) {
              if (!n4.length) return false;
              for (let t6 = 0; t6 < n4.length; t6++) {
                const i5 = n4[t6];
                if (!o.FB(i5.systemId, e7.systemId)) return false;
                if (!i5.keyIds || !e7.keyIds) return false;
                if (i5.keyIds.length !== e7.keyIds.length) return false;
                for (let t7 = 0; t7 < i5.keyIds.length; t7++) if (!o.FB(i5.keyIds[t7], e7.keyIds[t7])) return false;
                if (!o.FB(i5.data, e7.data)) return false;
              }
              return true;
            })(e6) || n4.push(e6);
          });
        }), n4.length && n4.forEach((t5) => {
          const r3 = e4.getPos();
          e4.writeUint32(0), e4.writeUint32((0, s2.A)("pssh")), e4.writeUint8(1), e4.writeUint24(0), e4.writeBuffer(t5.systemId), e4.writeUint32(t5.keyIds.length), t5.keyIds.forEach((t6) => {
            e4.writeBuffer(t6);
          }), e4.writeUint32(t5.data.length), e4.writeBuffer(t5.data), i4.boxsPositionInfo.push({ pos: r3, type: "pssh", size: Number(e4.getPos() - r3) });
        });
      })(e3, t3, i3);
    }
    i3.boxsPositionInfo.push({ pos: n2, type: "moov", size: Number(e3.getPos() - n2) }), (0, h.A)(e3, i3);
  }
  function v(e3, t3, i3) {
    const r3 = e3.getPos();
    e3.writeUint32(0), e3.writeUint32((0, s2.A)("moof")), c.A.mfhd(e3, null, i3), o.__(i3.currentFragment.tracks, (r4) => {
      if (!r4.sampleCount) return true;
      const a4 = e3.getPos();
      e3.writeUint32(0), e3.writeUint32((0, s2.A)("traf"));
      const n2 = t3.streams.find((e4) => e4.privData.trackId === r4.trackId);
      m(e3, (0, d2.Ip)(r4), n2, i3), i3.boxsPositionInfo.push({ pos: a4, type: "traf", size: Number(e3.getPos() - a4) });
    });
    const a3 = Number(e3.getPos() - r3);
    i3.boxsPositionInfo.push({ pos: r3, type: "moof", size: a3 }), i3.currentFragment.size = a3;
  }
  function A(e3, t3, i3) {
    let r3 = 24;
    o.__(i3.currentFragment.tracks, (e4) => {
      const i4 = t3.streams.find((t4) => t4.index === e4.streamIndex).privData;
      i4.fragIndexes.length && (r3 += 24 + 19 * i4.fragIndexes.length);
    }), e3.writeUint32(r3), e3.writeString("mfra"), o.__(i3.currentFragment.tracks, (i4) => {
      const r4 = t3.streams.find((e4) => e4.index === i4.streamIndex).privData;
      r4.fragIndexes.length && (e3.writeUint32(24 + 19 * r4.fragIndexes.length), e3.writeString("tfra"), e3.writeUint8(1), e3.writeUint24(0), e3.writeUint32(i4.trackId), e3.writeUint32(0), e3.writeUint32(r4.fragIndexes.length), r4.fragIndexes.forEach((t4) => {
        e3.writeUint64(t4.time), e3.writeUint64(t4.pos), e3.writeUint8(1), e3.writeUint8(1), e3.writeUint8(1);
      }));
    }), e3.writeUint32(16), e3.writeString("mfro"), e3.writeUint32(0), e3.writeUint32(r3);
  }
}, 38582: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(4624), a2 = i2(14686), s2 = i2(37837), n = i2(21477);
  const o = "src/avformat/formats/mov/parsing/av1c.ts";
  async function c(e3, t3, i3, c2) {
    const d2 = e3.getPos();
    if (t3.codecpar.codecId = 225, i3.size <= 0) return;
    const h = (0, s2.sY)(i3.size), l = await e3.readBuffer(i3.size, (0, a2.JW)(h, i3.size));
    c2.foundMoov ? (t3.sideData[1] = l.slice(), (0, s2.Eb)(h)) : (t3.codecpar.extradata && (0, s2.Eb)(t3.codecpar.extradata), t3.codecpar.extradata = h, t3.codecpar.extradataSize = i3.size, n.XC(t3, l));
    const u = i3.size - Number(e3.getPos() - d2);
    u > 0 ? await e3.skip(u) : u < 0 && r2.z3("read avcc error, size: ".concat(i3.size, ", read: ").concat(i3.size - u), o, 66);
  }
}, 73840: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(37837), a2 = i2(14686), s2 = i2(4624), n = i2(62815);
  const o = "src/avformat/formats/mov/parsing/avcc.ts";
  async function c(e3, t3, i3, c2) {
    const d2 = e3.getPos();
    if (t3.codecpar.codecId = 27, i3.size <= 0) return;
    const h = (0, r2.sY)(i3.size), l = await e3.readBuffer(i3.size, (0, a2.JW)(h, i3.size));
    c2.foundMoov ? (t3.sideData[1] = l.slice(), (0, r2.Eb)(h)) : (t3.codecpar.extradata && (0, r2.Eb)(t3.codecpar.extradata), t3.codecpar.extradata = h, t3.codecpar.extradataSize = i3.size, n.XC(t3, l));
    const u = i3.size - Number(e3.getPos() - d2);
    u > 0 ? await e3.skip(u) : u < 0 && s2.z3("read avcc error, size: ".concat(i3.size, ", read: ").concat(i3.size - u), o, 66);
  }
}, 37213: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/co64.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = await e3.readUint8();
    await e3.skip(3);
    const c = [], d2 = await e3.readUint32();
    if (0 === o) for (let t4 = 0; t4 < d2; t4++) c.push(await e3.readUint64());
    t3.privData.chunkOffsets = c;
    const h = i3.size - Number(e3.getPos() - n);
    h > 0 ? await e3.skip(h) : h < 0 && r2.z3("read co64 error, size: ".concat(i3.size, ", read: ").concat(i3.size - h), a2, 54);
  }
}, 12869: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/colr.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos();
    let o = await e3.readString(4);
    if ("nclx" === o || "nclc" === o || "prof" === o) if ("prof" === o) {
      const r3 = await e3.readBuffer(i3.size - 4);
      t3.sideData[28] = r3;
    } else {
      let i4 = await e3.readUint16(), r3 = await e3.readUint16(), a3 = await e3.readUint16();
      if ("nclx" === o) {
        const i5 = await e3.readUint8() >> 7;
        t3.codecpar.colorRange = i5 ? 2 : 1;
      }
      i4 >= 23 && (i4 = 2), r3 >= 19 && (r3 = 2), a3 >= 15 && (a3 = 2), t3.codecpar.colorPrimaries = i4, t3.codecpar.colorTrc = r3, t3.codecpar.colorSpace = a3;
    }
    else r2.R8("unsupported color_parameter_type: ".concat(o), a2, 77);
    const c = i3.size - Number(e3.getPos() - n);
    c > 0 ? await e3.skip(c) : c < 0 && r2.z3("read vpcc error, size: ".concat(i3.size, ", read: ").concat(i3.size - c), a2, 85);
  }
}, 59299: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/ctts.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = t3.privData;
    await e3.skip(4);
    const c = [], d2 = [], h = await e3.readUint32();
    for (let t4 = 0; t4 < h; t4++) c.push(await e3.readUint32()), d2.push(await e3.readInt32());
    o.cttsSampleCounts = c, o.cttsSampleOffsets = d2;
    const l = i3.size - Number(e3.getPos() - n);
    l > 0 ? await e3.skip(l) : l < 0 && r2.z3("read ctts error, size: ".concat(i3.size, ", read: ").concat(i3.size - l), a2, 57);
  }
}, 7320: (e2, t2, i2) => {
  i2.d(t2, { A: () => l });
  var r2 = i2(61499), a2 = i2(63939), s2 = i2(50932), n = i2(4624), o = i2(71517), c = i2(87518), d2 = i2(99991);
  const h = "src/avformat/formats/mov/parsing/dac3.ts";
  async function l(e3, t3, i3, l2) {
    const u = e3.getPos();
    if (t3.codecpar.codecId = 86019, i3.size <= 0) return;
    const f = (0, o.E4)(t3.codecpar[r2.o9] + 20, t3.codecpar[r2.o9] + 24, 7, 4), p = a2.f[20](f), m = await e3.readUint24(), g = m >> 14 & 7, v = m >> 11 & 7, A = m >> 10 & 1;
    let y = BigInt(c.j[v]);
    A && (y |= BigInt(8)), d2.bl(t3.codecpar[r2.o9] + 112), d2.ML(t3.codecpar[r2.o9] + 112, y), s2.M[15](p, g);
    const w = i3.size - Number(e3.getPos() - u);
    w > 0 ? await e3.skip(w) : w < 0 && n.z3("read avcc error, size: ".concat(i3.size, ", read: ").concat(i3.size - w), h, 75);
  }
}, 36868: (e2, t2, i2) => {
  i2.d(t2, { A: () => l });
  var r2 = i2(61499), a2 = i2(63939), s2 = i2(50932), n = i2(4624), o = i2(71517), c = i2(87518), d2 = i2(99991);
  const h = "src/avformat/formats/mov/parsing/dec3.ts";
  async function l(e3, t3, i3, l2) {
    const u = e3.getPos();
    if (t3.codecpar.codecId = 86056, i3.size <= 0) return;
    const f = (0, o.E4)(t3.codecpar[r2.o9] + 20, t3.codecpar[r2.o9] + 24, 7, 4), p = a2.f[20](f);
    await e3.skip(2);
    const m = await e3.readUint24(), g = m >> 12 & 31, v = m >> 9 & 7, A = m >> 8 & 1;
    let y = BigInt(c.j[v]);
    A && (y |= BigInt(8)), d2.bl(t3.codecpar[r2.o9] + 112), d2.ML(t3.codecpar[r2.o9] + 112, y), s2.M[15](p, g), t3.codecpar.chLayout.nbChannels > 1 && 7 == g && s2.M[15](p, 8);
    const w = i3.size - Number(e3.getPos() - u);
    w > 0 ? await e3.skip(w) : w < 0 && n.z3("read avcc error, size: ".concat(i3.size, ", read: ").concat(i3.size - w), h, 80);
  }
}, 86528: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(4624), a2 = i2(37837), s2 = i2(14686), n = i2(14769);
  const o = "src/avformat/formats/mov/parsing/dfla.ts";
  async function c(e3, t3, i3, c2) {
    const d2 = e3.getPos();
    t3.codecpar.codecId = 86028, await e3.skip(1), await e3.skip(3);
    const h = await e3.readUint8(), l = 128 & h, u = 127 & h, f = await e3.readUint24();
    if (0 === u && 34 === f) {
      const i4 = (0, a2.sY)(f), r3 = await e3.readBuffer(f, (0, s2.JW)(i4, f));
      c2.foundMoov ? (t3.sideData[1] = r3.slice(), (0, a2.Eb)(i4)) : (t3.codecpar.extradata && (0, a2.Eb)(t3.codecpar.extradata), t3.codecpar.extradata = i4, t3.codecpar.extradataSize = f, n.XC(t3, r3));
    } else r2.z3("streaminfo must be first FLACMetadataBlock", o, 69);
    l || r2.R8("non streaminfo FLACMetadataBlock(s) ignored", o, 73);
    const p = i3.size - Number(e3.getPos() - d2);
    p > 0 ? await e3.skip(p) : p < 0 && r2.z3("read vpcc error, size: ".concat(i3.size, ", read: ").concat(i3.size - p), o, 81);
  }
}, 41781: (e2, t2, i2) => {
  i2.d(t2, { A: () => h });
  var r2 = i2(4624), a2 = i2(37837), s2 = i2(14686), n = i2(22576), o = i2(31865), c = i2(729);
  const d2 = "src/avformat/formats/mov/parsing/dops.ts";
  async function h(e3, t3, i3, h2) {
    const l = e3.getPos();
    t3.codecpar.codecId = 86076, await e3.skip(1);
    const u = (0, a2.sY)(i3.size + 8), f = (0, s2.JW)(u, i3.size + 8), p = new o.A(f), m = new c.A(f, false);
    m.writeString("OpusHead"), m.writeUint8(1), await e3.readBuffer(i3.size - 1, (0, s2.JW)(u + 9, i3.size - 1)), p.seek(10), m.seek(10), m.writeUint16(p.readUint16()), m.writeUint32(p.readUint32()), m.writeUint16(p.readUint16()), h2.foundMoov ? (t3.sideData[1] = f.slice(), (0, a2.Eb)(u)) : (t3.codecpar.extradata && (0, a2.Eb)(t3.codecpar.extradata), t3.codecpar.extradata = u, t3.codecpar.extradataSize = f.length, n.XC(t3, f));
    const g = i3.size - Number(e3.getPos() - l);
    g > 0 ? await e3.skip(g) : g < 0 && r2.z3("read dops error, size: ".concat(i3.size, ", read: ").concat(i3.size - g), d2, 82);
  }
}, 30875: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/elst.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = await e3.readUint8();
    await e3.skip(3);
    const c = await e3.readInt32(), d2 = [];
    for (let t4 = 0; t4 < c; t4++) {
      let t5 = BigInt(0), i4 = BigInt(0);
      1 === o ? (t5 = await e3.readInt64(), i4 = await e3.readInt64()) : (t5 = BigInt(Math.floor(await e3.readInt32())), i4 = BigInt(Math.floor(await e3.readInt32())));
      const r3 = await e3.readInt16(), a3 = await e3.readInt16();
      d2.push({ segmentDuration: t5, mediaTime: i4, mediaRate: r3, mediaRateFraction: a3 });
    }
    t3.metadata.elst = d2;
    const h = i3.size - Number(e3.getPos() - n);
    h > 0 ? await e3.skip(h) : h < 0 && r2.z3("read elst error, size: ".concat(i3.size, ", read: ").concat(i3.size - h), a2, 75);
  }
}, 28412: (e2, t2, i2) => {
  i2.d(t2, { A: () => l });
  var r2 = i2(4624), a2 = i2(6660), s2 = i2(37837), n = i2(14686), o = i2(95832), c = i2(22576);
  const d2 = "src/avformat/formats/mov/parsing/esds.ts";
  async function h(e3) {
    let t3 = 0;
    for (let i3 = 0; i3 < 4; i3++) {
      const i4 = await e3.readUint8();
      if (t3 = t3 << 7 | 127 & i4, !(128 & i4)) break;
    }
    return t3;
  }
  async function l(e3, t3, i3, l2) {
    const u = e3.getPos();
    await e3.skip(4);
    let f = e3.getPos() + BigInt(Math.floor(i3.size - 4));
    for (; e3.getPos() < f; ) {
      let i4 = await e3.readUint8(), u2 = await h(e3);
      if (0 !== u2) if (3 === i4) {
        let f2 = e3.getPos() + BigInt(Math.floor(u2));
        if (await e3.skip(2), await e3.skip(1), i4 = await e3.readUint8(), u2 = await h(e3), 0 === u2) {
          r2.R8("esds invalid ES descriptor size 0, skip", d2, 81), await e3.skip(Number(f2 - e3.getPos()));
          continue;
        }
        if (4 === i4) if (t3.codecpar.codecId = a2.Q9[await e3.readUint8()], await e3.skip(1), await e3.skip(3), await e3.skip(4), await e3.skip(4), e3.getPos() < f2 - BigInt(5)) if (i4 = await e3.readUint8(), u2 = await h(e3), 5 === i4) {
          const i5 = (0, s2.sY)(u2), r3 = await e3.readBuffer(u2, (0, n.JW)(i5, u2));
          l2.foundMoov ? (t3.sideData[1] = r3.slice(), (0, s2.Eb)(i5)) : (t3.codecpar.extradata = i5, t3.codecpar.extradataSize = u2, 86018 === t3.codecpar.codecId ? o.XC(t3, r3.slice()) : 86076 === t3.codecpar.codecId && c.XC(t3, r3.slice()));
        } else await e3.skip(Number(f2 - e3.getPos()));
        else await e3.skip(Number(f2 - e3.getPos()));
        else await e3.skip(Math.min(u2, Number(f2 - e3.getPos())));
      } else await e3.skip(Math.min(u2, Number(f - e3.getPos())));
      else r2.R8("esds invalid descriptor size 0, skip", d2, 64), await e3.skip(Number(f - e3.getPos()));
    }
    const p = i3.size - Number(e3.getPos() - u);
    p > 0 ? await e3.skip(p) : p < 0 && r2.z3("read vpcc error, size: ".concat(i3.size, ", read: ").concat(i3.size - p), d2, 149);
  }
}, 9239: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(4624), a2 = i2(13663);
  const s2 = "src/avformat/formats/mov/parsing/frma.ts";
  async function n(e3, t3, i3, n2) {
    const o = e3.getPos(), c = await e3.peekUint32();
    e3.setEndian(false);
    const d2 = await e3.readUint32();
    e3.setEndian(true);
    let h = a2.uM[d2];
    h > 0 && 0 !== t3.codecpar.codecType ? t3.codecpar.codecType = 1 : 1 !== t3.codecpar.codecType && (h = a2.h6[d2], h > 0 ? t3.codecpar.codecType = 0 : (h = a2.s5[d2], t3.codecpar.codecType = 3)), t3.codecpar.codecTag = c, t3.codecpar.codecId = h;
    const l = i3.size - Number(e3.getPos() - o);
    l > 0 ? await e3.skip(l) : l < 0 && r2.z3("read frma error, size: ".concat(i3.size, ", read: ").concat(i3.size - l), s2, 66);
  }
}, 40179: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(4624), a2 = i2(34677), s2 = i2(6660);
  const n = "src/avformat/formats/mov/parsing/hdlr.ts";
  async function o(e3, t3, i3, o2) {
    const c = e3.getPos(), d2 = await e3.readUint8();
    if (await e3.skip(3), 0 === d2) {
      await e3.skip(4);
      const r3 = await e3.readString(4), n2 = s2.f3[r3];
      (0, a2.A)(n2) && (t3.codecpar.codecType = n2), await e3.skip(4), await e3.skip(4), await e3.skip(4);
      const c2 = i3.size - 24;
      if (c2 > 0) {
        const i4 = !o2.isom && await e3.peekUint8() === c2 - 1;
        i4 && await e3.skip(1), t3.metadata.handlerName = await e3.readString(c2 - (i4 ? 1 : 0));
      }
    }
    const h = i3.size - Number(e3.getPos() - c);
    h > 0 ? await e3.skip(h) : h < 0 && r2.z3("read hdlr error, size: ".concat(i3.size, ", read: ").concat(i3.size - h), n, 76);
  }
}, 31421: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(37837), a2 = i2(14686), s2 = i2(4624), n = i2(67659);
  const o = "src/avformat/formats/mov/parsing/hvcc.ts";
  async function c(e3, t3, i3, c2) {
    const d2 = e3.getPos();
    if (t3.codecpar.codecId = 173, i3.size <= 0) return;
    const h = (0, r2.sY)(i3.size), l = await e3.readBuffer(i3.size, (0, a2.JW)(h, i3.size));
    c2.foundMoov ? (t3.sideData[1] = l.slice(), (0, r2.Eb)(h)) : (t3.codecpar.extradata && (0, r2.Eb)(t3.codecpar.extradata), t3.codecpar.extradata = h, t3.codecpar.extradataSize = i3.size, n.XC(t3, l));
    const u = i3.size - Number(e3.getPos() - d2);
    u > 0 ? await e3.skip(u) : u < 0 && s2.z3("read hevc error, size: ".concat(i3.size, ", read: ").concat(i3.size - u), o, 66);
  }
}, 45248: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/mdhd.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = await e3.readUint8();
    await e3.skip(3);
    let c = BigInt(0), d2 = BigInt(0), h = 0, l = BigInt(0);
    1 === o ? (c = await e3.readUint64(), d2 = await e3.readUint64(), h = await e3.readUint32(), l = await e3.readUint64()) : (c = BigInt(Math.floor(await e3.readUint32())), d2 = BigInt(Math.floor(await e3.readUint32())), h = await e3.readUint32(), l = BigInt(Math.floor(await e3.readUint32()))), t3.duration = l, t3.timeBase.den = h, t3.timeBase.num = 1, t3.metadata.creationTime = c, t3.metadata.modificationTime = d2;
    const u = await e3.readUint16(), f = [];
    f[0] = u >> 10 & 31, f[1] = u >> 5 & 31, f[2] = 31 & u;
    const p = String.fromCharCode(f[0] + 96, f[1] + 96, f[2] + 96);
    t3.metadata.language = u, t3.metadata.languageString = p, await e3.skip(2);
    const m = i3.size - Number(e3.getPos() - n);
    m > 0 ? await e3.skip(m) : m < 0 && r2.z3("read mdhd error, size: ".concat(i3.size, ", read: ").concat(i3.size - m), a2, 82);
  }
}, 7018: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/mfhd.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos();
    await e3.readUint8(), await e3.skip(3), s3.currentFragment.sequence = await e3.readUint32();
    const o = i3.size - Number(e3.getPos() - n);
    o > 0 ? await e3.skip(o) : o < 0 && r2.z3("read vpcc error, size: ".concat(i3.size, ", read: ").concat(i3.size - o), a2, 47);
  }
}, 19354: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/mvhd.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = await e3.readUint8();
    await e3.skip(3), 1 === o ? (s3.creationTime = await e3.readUint64(), s3.modificationTime = await e3.readUint64(), s3.timescale = await e3.readUint32(), s3.duration = await e3.readUint64()) : (s3.creationTime = BigInt(Math.floor(await e3.readUint32())), s3.modificationTime = BigInt(Math.floor(await e3.readUint32())), s3.timescale = await e3.readUint32(), s3.duration = BigInt(Math.floor(await e3.readUint32()))), s3.rate = await e3.readUint32(), s3.volume = await e3.readUint16() >>> 8, await e3.skip(10), s3.matrix = new Uint32Array(9);
    for (let t4 = 0; t4 < 9; t4++) s3.matrix[t4] = await e3.readUint32();
    await e3.skip(24), s3.nextTrackId = await e3.readUint32();
    const c = i3.size - Number(e3.getPos() - n);
    c > 0 ? await e3.skip(c) : c < 0 && r2.z3("read mvhd error, size: ".concat(i3.size, ", read: ").concat(i3.size - c), a2, 68);
  }
}, 68361: (e2, t2, i2) => {
  i2.d(t2, { A: () => R });
  var r2 = i2(91635), a2 = i2(59299), s2 = i2(63080), n = i2(62831), o = i2(6570), c = i2(34136), d2 = i2(15692), h = i2(37213), l = i2(45248), u = i2(19354), f = i2(27436), p = i2(40179), m = i2(35173), g = i2(25778), v = i2(7018), A = i2(61807), y = i2(67523), w = i2(58996), b = i2(30875), k = i2(74551), x = i2(9239), I = i2(168), P = i2(89417), S = i2(48265), T = i2(82302), M = i2(73066), B = i2(65977);
  const R = { [(0, B.A)("stts")]: r2.A, [(0, B.A)("ctts")]: a2.A, [(0, B.A)("stss")]: s2.A, [(0, B.A)("stsz")]: n.A, [(0, B.A)("stz2")]: o.A, [(0, B.A)("stsc")]: c.A, [(0, B.A)("stco")]: d2.A, [(0, B.A)("co64")]: h.A, [(0, B.A)("mdhd")]: l.A, [(0, B.A)("mvhd")]: u.A, [(0, B.A)("tkhd")]: f.A, [(0, B.A)("hdlr")]: p.A, [(0, B.A)("stsd")]: m.A, [(0, B.A)("elst")]: b.A, [(0, B.A)("trex")]: g.A, [(0, B.A)("mfhd")]: v.A, [(0, B.A)("tfhd")]: A.A, [(0, B.A)("tfdt")]: y.A, [(0, B.A)("trun")]: w.A, [(0, B.A)("pssh")]: k.A, [(0, B.A)("frma")]: x.A, [(0, B.A)("schm")]: I.A, [(0, B.A)("tenc")]: P.A, [(0, B.A)("saio")]: S.A, [(0, B.A)("saiz")]: T.A, [(0, B.A)("senc")]: M.A };
}, 74551: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/pssh.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = await e3.readUint8();
    await e3.skip(3);
    const c = s3.encryptionInitInfos || [], d2 = { systemId: await e3.readBuffer(16), keyIds: [], data: null };
    if (o > 0) {
      const t4 = await e3.readUint32();
      for (let i4 = 0; i4 < t4; i4++) d2.keyIds.push(await e3.readBuffer(16));
    }
    const h = await e3.readUint32();
    d2.data = await e3.readBuffer(h), c.push(d2), s3.encryptionInitInfos = c;
    const l = i3.size - Number(e3.getPos() - n);
    l > 0 ? await e3.skip(l) : l < 0 && r2.z3("read pssh error, size: ".concat(i3.size, ", read: ").concat(i3.size - l), a2, 66);
  }
}, 48265: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/saio.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = s3.currentFragment.currentTrack, c = s3.cencs ? s3.cencs[o.trackId] : null, d2 = await e3.readUint8();
    if (1 & await e3.readUint24()) {
      const t4 = await e3.readUint32(), i4 = await e3.readUint32();
      if (!c) return void await l();
      if (t4 !== c.schemeType) return r2.R8("Ignoring saio box with non-zero aux_info_type", a2, 44), void await l();
      if (0 !== i4) return r2.R8("Ignoring saio box with non-zero aux_info_type_parameter", a2, 49), void await l();
    } else if (!c) return void await l();
    o.cenc || (o.cenc = { defaultSampleInfoSize: 0, sampleCount: 0, offset: 0, useSubsamples: false, sampleEncryption: [], sampleSizes: [], sampleInfoOffset: [] });
    const h = await e3.readUint32();
    for (let t4 = 0; t4 < h; t4++) o.cenc.sampleInfoOffset.push(0 === d2 ? await e3.readUint32() : await e3.readUint64());
    async function l() {
      const t4 = i3.size - Number(e3.getPos() - n);
      t4 > 0 ? await e3.skip(t4) : t4 < 0 && r2.z3("read saio error, size: ".concat(i3.size, ", read: ").concat(i3.size - t4), a2, 88);
    }
    await l();
  }
}, 82302: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/saiz.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = s3.currentFragment.currentTrack, c = s3.cencs ? s3.cencs[o.trackId] : null;
    if (await e3.skip(1), 1 & await e3.readUint24()) {
      const t4 = await e3.readUint32(), i4 = await e3.readUint32();
      if (!c) return void await d2();
      if (t4 !== c.schemeType) return r2.R8("Ignoring saiz box with non-zero aux_info_type", a2, 47), void await d2();
      if (0 !== i4) return r2.R8("Ignoring saiz box with non-zero aux_info_type_parameter", a2, 52), void await d2();
    } else if (!c) return void await d2();
    if (o.cenc || (o.cenc = { defaultSampleInfoSize: 0, sampleCount: 0, offset: 0, useSubsamples: false, sampleEncryption: [], sampleSizes: [], sampleInfoOffset: [] }), o.cenc.defaultSampleInfoSize = await e3.readUint8(), o.cenc.sampleCount = await e3.readUint32(), 0 === o.cenc.defaultSampleInfoSize) {
      if (!o.cenc.sampleCount) return r2.z3("invalid saiz data", a2, 83), void await d2();
      for (let t4 = 0; t4 < o.cenc.sampleCount; t4++) o.cenc.sampleSizes.push(await e3.readUint8());
    }
    async function d2() {
      const t4 = i3.size - Number(e3.getPos() - n);
      t4 > 0 ? await e3.skip(t4) : t4 < 0 && r2.z3("read saiz error, size: ".concat(i3.size, ", read: ").concat(i3.size - t4), a2, 99);
    }
    await d2();
  }
}, 168: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/schm.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos();
    await e3.skip(4);
    const o = t3.privData;
    let c = s3.cencs ? s3.cencs[o.trackId] : null;
    c || (c = { schemeType: 0, schemeVersion: 0, isProtected: 0, defaultPerSampleIVSize: 0, defaultKeyId: null, defaultConstantIV: null, cryptByteBlock: 0, skipByteBlock: 0, pattern: false }), c.schemeType = await e3.readUint32(), c.schemeVersion = await e3.readUint32(), s3.cencs ? s3.cencs[o.trackId] = c : s3.cencs = { [o.trackId]: c };
    const d2 = i3.size - Number(e3.getPos() - n);
    d2 > 0 ? await e3.skip(d2) : d2 < 0 && r2.z3("read schm error, size: ".concat(i3.size, ", read: ").concat(i3.size - d2), a2, 72);
  }
}, 73066: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/senc.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = s3.currentFragment.currentTrack, c = s3.cencs ? s3.cencs[o.trackId] : null;
    await e3.readUint8();
    const d2 = await e3.readUint24();
    o.cenc || (o.cenc = { defaultSampleInfoSize: 0, sampleCount: 0, offset: 0, useSubsamples: false, sampleEncryption: [], sampleSizes: [], sampleInfoOffset: [] });
    const h = await e3.readUint32(), l = 2 & d2, u = c.defaultPerSampleIVSize;
    for (let t4 = 0; t4 < h; t4++) {
      const t5 = { iv: u ? await e3.readBuffer(u) : c.defaultConstantIV, subsamples: [] };
      if (l) {
        const i4 = await e3.readUint16();
        for (let r3 = 0; r3 < i4; r3++) t5.subsamples.push({ bytesOfClearData: await e3.readUint16(), bytesOfProtectedData: await e3.readUint32() });
      }
      o.cenc.sampleEncryption.push(t5);
    }
    l && (o.cenc.useSubsamples = true);
    const f = i3.size - Number(e3.getPos() - n);
    f > 0 ? await e3.skip(f) : f < 0 && r2.z3("read senc error, size: ".concat(i3.size, ", read: ").concat(i3.size - f), a2, 80);
  }
}, 15692: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/stco.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = await e3.readUint8();
    await e3.skip(3);
    const c = [], d2 = await e3.readUint32();
    if (0 === o) for (let t4 = 0; t4 < d2; t4++) c.push(BigInt(Math.floor(await e3.readUint32())));
    t3.privData.chunkOffsets = c;
    const h = i3.size - Number(e3.getPos() - n);
    h > 0 ? await e3.skip(h) : h < 0 && r2.z3("read stco error, size: ".concat(i3.size, ", read: ").concat(i3.size - h), a2, 54);
  }
}, 34136: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/stsc.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = await e3.readUint8();
    await e3.skip(3);
    const c = t3.privData, d2 = [], h = [], l = [], u = await e3.readUint32();
    if (0 === o) for (let t4 = 0; t4 < u; t4++) d2.push(await e3.readUint32()), h.push(await e3.readUint32()), l.push(await e3.readUint32());
    c.stscFirstChunk = d2, c.stscSamplesPerChunk = h, c.stscSampleDescriptionIndex = l;
    const f = i3.size - Number(e3.getPos() - n);
    f > 0 ? await e3.skip(f) : f < 0 && r2.z3("read stsc error, size: ".concat(i3.size, ", read: ").concat(i3.size - f), a2, 63);
  }
}, 35173: (e2, t2, i2) => {
  i2.d(t2, { A: () => w });
  var r2 = i2(4624), a2 = i2(65977), s2 = i2(21071), n = i2(6660), o = i2(73840), c = i2(31421), d2 = i2(60703), h = i2(83561), l = i2(38582), u = i2(28412), f = i2(28460), p = i2(86528), m = i2(41781), g = i2(12869), v = i2(7320), A = i2(36868);
  const y = "src/avformat/formats/mov/parsing/stsd.ts";
  async function w(e3, t3, i3, w2) {
    const b = e3.getPos(), k = await e3.readUint8();
    await e3.skip(3);
    const x = t3.privData, I = await e3.readUint32();
    for (let i4 = 0; i4 < I; i4++) {
      const i5 = await e3.readUint32(), b2 = await e3.readUint32(), I2 = e3.getPos() + BigInt(Math.floor(i5 - 8));
      if (n.uf[b2] && (t3.codecpar.codecId = n.uf[b2]), 0 === i5) {
        r2.R8("stsd entry invalid box size 0, skip", y, 72), await e3.skip(Number(I2 - e3.getPos()));
        break;
      }
      if (i5 >= 16 ? (await e3.skip(6), await e3.skip(2)) : i5 <= 7 && r2.h2("invalid size: ".concat(i5, " in stsd"), y, 85), 0 === t3.codecpar.codecType) {
        await e3.skip(2), await e3.skip(2), t3.metadata.vendorId = await e3.readString(4), await e3.skip(4), await e3.skip(4), t3.codecpar.width = await e3.readUint16(), t3.codecpar.height = await e3.readUint16(), await e3.skip(4), await e3.skip(4), await e3.skip(4), await e3.skip(2);
        let i6 = await e3.readUint8();
        for (i6 > 31 && (i6 = 31), t3.metadata.encoder = await e3.readString(i6), i6 < 31 && await e3.skip(31 - i6), await e3.skip(2), await e3.skip(2); e3.getPos() < I2; ) {
          const i7 = await e3.readUint32(), n2 = await e3.readUint32();
          0 !== i7 ? n2 === (0, a2.A)("avcC") ? await (0, o.A)(e3, t3, { type: n2, size: i7 - 8 }, w2) : n2 === (0, a2.A)("hvcC") ? await (0, c.A)(e3, t3, { type: n2, size: i7 - 8 }, w2) : n2 === (0, a2.A)("vvcC") ? await (0, d2.A)(e3, t3, { type: n2, size: i7 - 8 }, w2) : n2 === (0, a2.A)("av1C") ? await (0, l.A)(e3, t3, { type: n2, size: i7 - 8 }, w2) : n2 === (0, a2.A)("vpcC") ? await (0, h.A)(e3, t3, { type: n2, size: i7 - 8 }, w2) : n2 === (0, a2.A)("esds") ? await (0, u.A)(e3, t3, { type: n2, size: i7 - 8 }, w2) : n2 === (0, a2.A)("wave") ? await (0, f.A)(e3, t3, { type: n2, size: i7 - 8 }, w2) : n2 === (0, a2.A)("colr") ? await (0, g.A)(e3, t3, { type: n2, size: i7 - 8 }, w2) : w2.parsers && w2.parsers[n2] ? await w2.parsers[n2](e3, null, { type: n2, size: i7 - 8 }, w2) : w2.parseOneBox && s2.gQ.some((e4) => (0, a2.A)(e4) === n2) ? await w2.parseOneBox(e3, t3, { type: n2, size: i7 - 8 }, w2) : await e3.skip(Math.min(i7 - 8, Number(I2 - e3.getPos()))) : (r2.R8("stsd video invalid box size 0, skip", y, 134), await e3.skip(Number(I2 - e3.getPos())));
        }
      } else if (1 === t3.codecpar.codecType) {
        const i6 = await e3.readUint16();
        for (await e3.skip(2), t3.metadata.vendorId = await e3.readString(4), t3.codecpar.chLayout.nbChannels = await e3.readUint16(), t3.codecpar.bitsPerCodedSample = await e3.readUint16(), x.audioCid = await e3.readUint16(), await e3.skip(2), t3.codecpar.sampleRate = await e3.readUint32() >>> 16, (!w2.isom || 0 === k && i6 > 0) && (1 === i6 ? (x.samplesPerFrame = await e3.readUint32(), await e3.skip(4), x.bytesPerFrame = await e3.readUint32(), await e3.skip(4)) : 2 === i6 && (await e3.skip(4), t3.codecpar.sampleRate = Number(await e3.readUint64()), t3.codecpar.chLayout.nbChannels = await e3.readUint32(), await e3.skip(4), t3.codecpar.bitsPerCodedSample = await e3.readUint32(), await e3.skip(4), x.bytesPerFrame = await e3.readUint32(), x.samplesPerFrame = await e3.readUint32())); e3.getPos() < I2; ) {
          const i7 = await e3.readUint32(), n2 = await e3.readUint32();
          0 !== i7 ? n2 === (0, a2.A)("esds") ? await (0, u.A)(e3, t3, { type: n2, size: i7 - 8 }, w2) : n2 === (0, a2.A)("dfLa") ? await (0, p.A)(e3, t3, { type: n2, size: i7 - 8 }, w2) : n2 === (0, a2.A)("dOps") ? await (0, m.A)(e3, t3, { type: n2, size: i7 - 8 }, w2) : n2 === (0, a2.A)("wave") ? await (0, f.A)(e3, t3, { type: n2, size: i7 - 8 }, w2) : n2 === (0, a2.A)("dac3") ? await (0, v.A)(e3, t3, { type: n2, size: i7 - 8 }, w2) : n2 === (0, a2.A)("dec3") ? await (0, A.A)(e3, t3, { type: n2, size: i7 - 8 }, w2) : w2.parsers && w2.parsers[n2] ? await w2.parsers[n2](e3, null, { type: n2, size: i7 - 8 }, w2) : w2.parseOneBox && s2.gQ.some((e4) => (0, a2.A)(e4) === n2) ? await w2.parseOneBox(e3, t3, { type: n2, size: i7 - 8 }, w2) : await e3.skip(Math.min(i7 - 8, Number(I2 - e3.getPos()))) : (r2.R8("stsd audio invalid box size 0, skip", y, 307), await e3.skip(Number(I2 - e3.getPos())));
        }
      } else 3 === t3.codecpar.codecType ? (b2 === (0, a2.A)("stpp") ? t3.codecpar.codecId = 94232 : b2 === (0, a2.A)("wvtt") ? t3.codecpar.codecId = 94226 : b2 === (0, a2.A)("tx3g") || b2 === (0, a2.A)("text") ? t3.codecpar.codecId = 94213 : b2 === (0, a2.A)("c608") && (t3.codecpar.codecId = 94218), await e3.skip(Math.min(i5 - 8, Number(I2 - e3.getPos())))) : await e3.skip(Math.min(i5 - 8, Number(I2 - e3.getPos())));
    }
    const P = i3.size - Number(e3.getPos() - b);
    P > 0 ? await e3.skip(P) : P < 0 && r2.z3("read stsd error, size: ".concat(i3.size, ", read: ").concat(i3.size - P), y, 434);
  }
}, 63080: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(80662), a2 = i2.n(r2), s2 = i2(4624);
  const n = "src/avformat/formats/mov/parsing/stss.ts";
  async function o(e3, t3, i3, r3) {
    const o2 = e3.getPos(), c = await e3.readUint8();
    await e3.skip(3);
    const d2 = new (a2())(), h = await e3.readUint32();
    if (0 === c) for (let t4 = 0; t4 < h; t4++) d2.set(await e3.readUint32(), true);
    t3.privData.stssSampleNumbersMap = d2;
    const l = i3.size - Number(e3.getPos() - o2);
    l > 0 ? await e3.skip(l) : l < 0 && s2.z3("read stss error, size: ".concat(i3.size, ", read: ").concat(i3.size - l), n, 55);
  }
}, 62831: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/stsz.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = await e3.readUint8();
    await e3.skip(3);
    const c = [];
    let d2 = 0, h = 0;
    if (0 === o) {
      d2 = await e3.readUint32(), h = await e3.readUint32();
      for (let t4 = 0; t4 < h; t4++) 0 === d2 ? c.push(await e3.readUint32()) : c[t4] = d2;
    }
    t3.privData.sampleSizes = c;
    const l = i3.size - Number(e3.getPos() - n);
    l > 0 ? await e3.skip(l) : l < 0 && r2.z3("read stsz error, size: ".concat(i3.size, ", read: ").concat(i3.size - l), a2, 63);
  }
}, 91635: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/stts.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = await e3.readUint8();
    await e3.skip(3);
    const c = t3.privData, d2 = [], h = [], l = await e3.readUint32();
    let u = 1;
    if (0 === o) for (let t4 = 0; t4 < l; t4++) d2.push(await e3.readUint32()), u = await e3.readInt32(), u < 0 && (r2.R8("File uses negative stts sample delta, using value 1 instead, sync may be lost!", a2, 51), u = 1), h.push(u);
    c.sttsSampleCounts = d2, c.sttsSampleDeltas = h;
    const f = i3.size - Number(e3.getPos() - n);
    f > 0 ? await e3.skip(f) : f < 0 && r2.z3("read stts error, size: ".concat(i3.size, ", read: ").concat(i3.size - f), a2, 66);
  }
}, 6570: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/stz2.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = await e3.readUint8();
    await e3.skip(3);
    const c = [];
    let d2 = 0, h = 0;
    if (0 === o) if (await e3.skip(3), h = await e3.readUint8(), d2 = await e3.readUint32(), 4 === h) for (let t4 = 0; t4 < d2; t4 += 2) {
      const i4 = await e3.readUint8();
      c[t4] = i4 >> 4 & 15, c[t4 + 1] = 15 & i4;
    }
    else if (8 === h) for (let t4 = 0; t4 < d2; t4++) c[t4] = await e3.readUint8();
    else if (16 === h) for (let t4 = 0; t4 < d2; t4++) c[t4] = await e3.readUint16();
    else r2.z3("Error in length field in stz2 box", a2, 65);
    t3.privData.sampleSizes = c;
    const l = i3.size - Number(e3.getPos() - n);
    l > 0 ? await e3.skip(l) : l < 0 && r2.z3("read stz2 error, size: ".concat(i3.size, ", read: ").concat(i3.size - l), a2, 76);
  }
}, 89417: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/tenc.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = await e3.readUint8();
    await e3.skip(3);
    const c = t3.privData;
    let d2 = s3.cencs ? s3.cencs[c.trackId] : null;
    d2 || (d2 = { schemeType: 0, schemeVersion: 0, isProtected: 0, defaultPerSampleIVSize: 0, defaultKeyId: null, defaultConstantIV: null, cryptByteBlock: 0, skipByteBlock: 0, pattern: false }), await e3.skip(1);
    const h = await e3.readUint8();
    if (o > 0 && (d2.pattern = true, d2.cryptByteBlock = h >>> 4 & 15, d2.skipByteBlock = 15 & h), d2.isProtected = await e3.readUint8(), d2.defaultPerSampleIVSize = await e3.readUint8(), d2.defaultKeyId = await e3.readBuffer(16), d2.isProtected && !d2.defaultPerSampleIVSize) {
      const t4 = await e3.readUint8();
      d2.defaultConstantIV = await e3.readBuffer(t4);
    }
    s3.cencs ? s3.cencs[c.trackId] = d2 : s3.cencs = { [c.trackId]: d2 };
    const l = i3.size - Number(e3.getPos() - n);
    l > 0 ? await e3.skip(l) : l < 0 && r2.z3("read schm error, size: ".concat(i3.size, ", read: ").concat(i3.size - l), a2, 90);
  }
}, 67523: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/tfdt.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = await e3.readUint8();
    await e3.skip(3);
    const c = s3.currentFragment.currentTrack;
    c && (c.baseMediaDecodeTime = 1 === o ? await e3.readUint64() : BigInt(Math.floor(await e3.readUint32())));
    const d2 = i3.size - Number(e3.getPos() - n);
    d2 > 0 ? await e3.skip(d2) : d2 < 0 && r2.z3("read vpcc error, size: ".concat(i3.size, ", read: ").concat(i3.size - d2), a2, 55);
  }
}, 61807: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/tfhd.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = (await e3.readUint8(), await e3.readUint24()), c = await e3.readUint32(), d2 = s3.currentFragment.currentTrack;
    d2.trackId = c, d2 && (1 & o && (d2.baseDataOffset = await e3.readUint64()), 2 & o && await e3.skip(4), 8 & o && (d2.defaultSampleDuration = await e3.readUint32()), 16 & o && (d2.defaultSampleSize = await e3.readUint32()), 32 & o && (d2.defaultSampleFlags = await e3.readUint32()), 131072 & o && (d2.baseIsMoof = true));
    const h = i3.size - Number(e3.getPos() - n);
    h > 0 ? await e3.skip(h) : h < 0 && r2.z3("read vpcc error, size: ".concat(i3.size, ", read: ").concat(i3.size - h), a2, 73);
  }
}, 27436: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/tkhd.ts";
  async function s2(e3, t3, i3, s3) {
    const n = t3.privData, o = e3.getPos(), c = await e3.readUint8();
    n.flags = await e3.readUint24(), 1 & n.flags && (t3.disposition |= 1), 1 === c ? (t3.metadata.creationTime = await e3.readUint64(), t3.metadata.modificationTime = await e3.readUint64(), n.trackId = await e3.readUint32(), await e3.skip(4), n.duration = await e3.readUint64()) : (t3.metadata.creationTime = BigInt(Math.floor(await e3.readUint32())), t3.metadata.modificationTime = BigInt(Math.floor(await e3.readUint32())), n.trackId = await e3.readUint32(), await e3.skip(4), n.duration = BigInt(Math.floor(await e3.readUint32()))), await e3.skip(8), n.layer = await e3.readInt16(), n.alternateGroup = await e3.readInt16(), n.volume = await e3.readInt16() >> 8, await e3.skip(2);
    const d2 = [];
    n.matrix = new Int32Array(9);
    for (let t4 = 0; t4 < 9; t4++) n.matrix[t4] = await e3.readInt32(), d2[t4] = 8 === t4 ? n.matrix[t4] / 1073741824 : n.matrix[t4] / 65536;
    n.width = await e3.readUint32() >> 16, n.height = await e3.readUint32() >> 16, t3.metadata.matrix = d2;
    const h = i3.size - Number(e3.getPos() - o);
    h > 0 ? await e3.skip(h) : h < 0 && r2.z3("read tkhd error, size: ".concat(i3.size, ", read: ").concat(i3.size - h), a2, 90);
  }
}, 25778: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/trex.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos();
    await e3.readUint8(), await e3.skip(3);
    const o = await e3.readUint32();
    await e3.skip(4);
    const c = await e3.readUint32(), d2 = await e3.readUint32(), h = await e3.readUint32();
    s3.trexs.push({ trackId: o, duration: c, size: d2, flags: h });
    const l = i3.size - Number(e3.getPos() - n);
    l > 0 ? await e3.skip(l) : l < 0 && r2.z3("read trex error, size: ".concat(i3.size, ", read: ").concat(i3.size - l), a2, 59);
  }
}, 58996: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/parsing/trun.ts";
  async function s2(e3, t3, i3, s3) {
    const n = e3.getPos(), o = await e3.readUint8(), c = await e3.readUint24(), d2 = s3.currentFragment.currentTrack, h = s3.trexs.find((e4) => e4.trackId === d2.trackId);
    if (d2) {
      const t4 = await e3.readUint32();
      1 & c && (d2.sampleCount ? (d2.remainDataOffsets.push(await e3.readInt32()), d2.remainDataOffsetIndex.push(d2.sampleCount)) : d2.dataOffset = await e3.readInt32());
      let i4 = -1;
      4 & c && (i4 = await e3.readUint32());
      for (let r3 = 0; r3 < t4; r3++) 256 & c ? d2.sampleDurations.push(await e3.readUint32()) : d2.sampleDurations.push(d2.defaultSampleDuration || (null == h ? void 0 : h.duration)), 512 & c ? d2.sampleSizes.push(await e3.readUint32()) : d2.sampleSizes.push(d2.defaultSampleSize || (null == h ? void 0 : h.size)), 1024 & c ? d2.sampleFlags.push(await e3.readUint32()) : d2.sampleFlags.push(d2.defaultSampleFlags || (null == h ? void 0 : h.flags)), 2048 & c ? 0 === o ? d2.sampleCompositionTimeOffset.push(await e3.readUint32()) : d2.sampleCompositionTimeOffset.push(await e3.readInt32()) : d2.sampleCompositionTimeOffset.push(0), i4 > -1 && 0 === r3 && (d2.sampleFlags.pop(), d2.sampleFlags.push(i4));
      d2.sampleCount += t4;
    }
    const l = i3.size - Number(e3.getPos() - n);
    l > 0 ? await e3.skip(l) : l < 0 && r2.z3("read vpcc error, size: ".concat(i3.size, ", read: ").concat(i3.size - l), a2, 103);
  }
}, 83561: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(37837), a2 = i2(14686), s2 = i2(4624), n = i2(82014);
  const o = "src/avformat/formats/mov/parsing/vpcc.ts";
  async function c(e3, t3, i3, c2) {
    const d2 = e3.getPos();
    if (await e3.readUint8(), await e3.skip(3), t3.codecpar.codecId = 167, i3.size - 4 <= 0) return;
    const h = (0, r2.sY)(i3.size - 4), l = await e3.readBuffer(i3.size - 4, (0, a2.JW)(h, i3.size - 4));
    c2.foundMoov ? (t3.sideData[1] = l.slice(), (0, r2.Eb)(h)) : (t3.codecpar.extradata && (0, r2.Eb)(t3.codecpar.extradata), t3.codecpar.extradata = h, t3.codecpar.extradataSize = i3.size - 4, n.XC(t3, l));
    const u = i3.size - Number(e3.getPos() - d2);
    u > 0 ? await e3.skip(u) : u < 0 && s2.z3("read vpcc error, size: ".concat(i3.size, ", read: ").concat(i3.size - u), o, 70);
  }
}, 60703: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(37837), a2 = i2(14686), s2 = i2(4624), n = i2(59166);
  const o = "src/avformat/formats/mov/parsing/vvcc.ts";
  async function c(e3, t3, i3, c2) {
    const d2 = e3.getPos();
    if (await e3.readUint8(), await e3.skip(3), t3.codecpar.codecId = 196, i3.size - 4 <= 0) return;
    const h = (0, r2.sY)(i3.size - 4), l = await e3.readBuffer(i3.size - 4, (0, a2.JW)(h, i3.size - 4));
    c2.foundMoov ? (t3.sideData[1] = l.slice(), (0, r2.Eb)(h)) : (t3.codecpar.extradata && (0, r2.Eb)(t3.codecpar.extradata), t3.codecpar.extradata = h, t3.codecpar.extradataSize = i3.size - 4, n.XC(t3, l));
    const u = i3.size - Number(e3.getPos() - d2);
    u > 0 ? await e3.skip(u) : u < 0 && s2.z3("read vvcc error, size: ".concat(i3.size, ", read: ").concat(i3.size - u), o, 70);
  }
}, 28460: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(4624), a2 = i2(65977), s2 = i2(28412);
  const n = "src/avformat/formats/mov/parsing/wave.ts";
  async function o(e3, t3, i3, o2) {
    const c = e3.getPos(), d2 = c + BigInt(Math.floor(i3.size));
    for (; e3.getPos() < d2; ) {
      const i4 = await e3.readUint32(), c2 = await e3.readUint32();
      0 !== i4 ? c2 === (0, a2.A)("esds") ? await (0, s2.A)(e3, t3, { type: c2, size: i4 - 8 }, o2) : await e3.skip(Math.min(i4 - 8, Number(d2 - e3.getPos()))) : (r2.R8("wave invalid box size 0, skip", n, 45), await e3.skip(Number(d2 - e3.getPos())));
    }
    const h = i3.size - Number(e3.getPos() - c);
    h > 0 ? await e3.skip(h) : h < 0 && r2.z3("read vpcc error, size: ".concat(i3.size, ", read: ").concat(i3.size - h), n, 71);
  }
}, 39878: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(14686);
  function a2(e3, t3, i3) {
    var a3;
    e3.writeUint32(8 + (null !== (a3 = t3.codecpar.extradataSize) && void 0 !== a3 ? a3 : 0)), e3.writeString("av1C"), i3.fragment && t3.sideData[1] ? (e3.writeBuffer(t3.sideData[1]), delete t3.sideData[1]) : t3.codecpar.extradata && e3.writeBuffer((0, r2.s3)(t3.codecpar.extradata, t3.codecpar.extradataSize));
  }
}, 61600: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(14686), a2 = i2(60264), s2 = i2(62815);
  function n(e3, t3, i3) {
    let n2;
    i3.fragment && t3.sideData[1] ? (n2 = t3.sideData[1], delete t3.sideData[1]) : t3.codecpar.extradata && (n2 = (0, r2.s3)(t3.codecpar.extradata, t3.codecpar.extradataSize)), n2 && a2.Bs(n2) && (n2 = s2.S1(n2)), e3.writeUint32(8 + (n2 ? n2.length : 0)), e3.writeString("avcC"), n2 && e3.writeBuffer(n2);
  }
}, 93861: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    e3.writeUint32(20), e3.writeString("btrt"), e3.writeUint32(0), e3.writeUint32(0), e3.writeUint32(0);
  }
  i2.d(t2, { A: () => r2 });
}, 34445: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    const r3 = t3.privData.chunkOffsets || [];
    e3.writeUint32(16 + 8 * r3.length), e3.writeString("co64"), e3.writeUint8(0), e3.writeUint24(0), e3.writeUint32(r3.length);
    for (let t4 = 0; t4 < r3.length; t4++) e3.writeUint64(r3[t4]);
  }
  i2.d(t2, { A: () => r2 });
}, 853: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    const r3 = t3.sideData[28];
    if (r3) e3.writeUint32(12 + r3.length), e3.writeString("colr"), e3.writeString("prof"), e3.writeBuffer(r3);
    else {
      const i4 = 2 === t3.codecpar.colorRange;
      e3.writeUint32(19), e3.writeString("colr"), e3.writeString("nclx"), e3.writeUint16(t3.codecpar.colorPrimaries), e3.writeUint16(t3.codecpar.colorTrc), e3.writeUint16(t3.codecpar.colorSpace), e3.writeUint8(i4 ? 128 : 0);
    }
  }
  i2.d(t2, { A: () => r2 });
}, 18387: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/writing/ctts.ts";
  function s2(e3, t3, i3) {
    const s3 = t3.privData, n = s3.cttsSampleCounts || [], o = s3.cttsSampleOffsets || [];
    n.length !== o.length && r2.R8("ctts sampleCounts's length is not match sampleOffsets's length", a2, 39);
    const c = Math.min(n.length, o.length);
    e3.writeUint32(16 + 8 * c), e3.writeString("ctts"), e3.writeUint8(1), e3.writeUint24(0), e3.writeUint32(c);
    for (let t4 = 0; t4 < c; t4++) e3.writeUint32(n[t4]), e3.writeInt32(o[t4]);
  }
}, 80648: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(83314);
  function a2(e3, t3, i3) {
    e3.writeUint32(11), e3.writeString("dac3");
    const a3 = new r2.A(3), s2 = i3.ac3Info;
    a3.writeU(2, s2.substream[0].fscod), a3.writeU(5, s2.substream[0].bsid), a3.writeU(3, s2.substream[0].bsmod), a3.writeU(3, s2.substream[0].acmod), a3.writeU(1, s2.substream[0].lfeon), a3.writeU(5, s2.ac3BitrateCode), a3.writeU(5, 0), e3.writeBuffer(a3.getBuffer());
  }
}, 55668: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(83314);
  function a2(e3, t3, i3) {
    const a3 = i3.ac3Info, s2 = new r2.A(2 + (34 * (a3.numIndSub + 1) + 7 >> 3));
    s2.writeU(13, a3.dataRate), s2.writeU(3, a3.numIndSub);
    for (let e4 = 0; e4 < a3.numIndSub; e4++) s2.writeU(2, a3.substream[e4].fscod), s2.writeU(5, a3.substream[e4].bsid), s2.writeU(1, 0), s2.writeU(1, 0), s2.writeU(3, a3.substream[e4].bsmod), s2.writeU(3, a3.substream[e4].acmod), s2.writeU(1, a3.substream[e4].lfeon), s2.writeU(5, 0), s2.writeU(4, a3.substream[e4].numDepSub), a3.substream[e4].numDepSub ? s2.writeU(9, a3.substream[e4].chanLoc) : s2.writeU(1, 0);
    s2.padding();
    const n = s2.getPointer();
    e3.writeUint32(8 + n), e3.writeString("dec3"), e3.writeBuffer(s2.getBuffer().subarray(0, n));
  }
}, 47280: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(14686), a2 = i2(4624), s2 = i2(14769);
  const n = "src/avformat/formats/mov/writing/dfla.ts";
  function o(e3, t3, i3) {
    let o2;
    i3.fragment && t3.sideData[1] ? (o2 = t3.sideData[1], delete t3.sideData[1]) : t3.codecpar.extradata && (o2 = (0, r2.s3)(t3.codecpar.extradata, t3.codecpar.extradataSize)), o2 && o2.length === s2.ob ? (e3.writeUint32(o2.length + 16), e3.writeString("dfLa"), e3.writeUint8(0), e3.writeUint24(0), e3.writeUint8(128), e3.writeUint24(o2.length), e3.writeBuffer(o2)) : a2.z3("invalid extradata", n, 57);
  }
}, 82181: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(14686), a2 = i2(31865);
  function s2(e3, t3, i3) {
    let s3;
    if (i3.fragment && t3.sideData[1] ? (s3 = t3.sideData[1], delete t3.sideData[1]) : t3.codecpar.extradata && (s3 = (0, r2.s3)(t3.codecpar.extradata, t3.codecpar.extradataSize)), !s3 || s3.length < 19) e3.writeUint32(19), e3.writeString("dOps"), e3.writeUint8(0), e3.writeUint8(t3.codecpar.chLayout.nbChannels), e3.writeUint16(t3.codecpar.initialPadding), e3.writeUint32(t3.codecpar.sampleRate), e3.writeUint16(0), e3.writeUint8(0);
    else {
      const t4 = new a2.A(s3, false);
      e3.writeUint32(s3.length), e3.writeString("dOps"), e3.writeUint8(0), t4.seek(9), e3.writeUint8(t4.readUint8()), e3.writeUint16(t4.readUint16()), e3.writeUint32(t4.readUint32()), e3.writeUint16(t4.readUint16()), e3.writeBuffer(s3.subarray(18));
    }
  }
}, 12412: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    e3.writeUint32(28), e3.writeString("dref"), e3.writeUint32(0), e3.writeUint32(1), e3.writeUint32(12), e3.writeString("url "), e3.writeUint32(1);
  }
  i2.d(t2, { A: () => r2 });
}, 44473: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(77231), a2 = i2(44328), s2 = i2(14041);
  function n(e3, t3, i3) {
    const n2 = t3.privData;
    let o = (0, a2.k)((0, s2.A)(n2), t3.timeBase, { den: i3.timescale, num: 1 }), c = n2.startCT;
    const d2 = (0, a2.k)(n2.startDts + BigInt(Math.floor(c)), t3.timeBase, { den: i3.timescale, num: 1 });
    let h = o < r2.go ? 0 : 1;
    h |= d2 < r2.go ? 0 : 1;
    const l = 1 + (d2 > 0 ? 1 : 0), u = 24 + l * (1 === h ? 20 : 12);
    e3.writeUint32(u), e3.writeString("edts"), e3.writeUint32(u - 8), e3.writeString("elst"), e3.writeUint8(h), e3.writeUint24(0), e3.writeUint32(l), d2 > 0 ? (1 === h ? (e3.writeUint64(d2), e3.writeInt64(r2.Dh)) : (e3.writeUint32(Number(d2)), e3.writeInt32(-1)), e3.writeUint32(65536)) : (c = -Math.min(Number(n2.startDts), 0), o += d2), i3.fragment && (o = BigInt(0)), 1 === h ? (e3.writeUint64(o), e3.writeInt64(BigInt(Math.floor(c)))) : (e3.writeUint32(Number(o)), e3.writeInt32(c)), e3.writeUint32(65536);
  }
}, 4652: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(6660), a2 = i2(14686);
  function s2(e3, t3, i3) {
    e3.writeUint8(t3);
    for (let t4 = 3; t4 > 0; t4--) e3.writeUint8(i3 >> 7 * t4 | 128);
    e3.writeUint8(127 & i3);
  }
  function n(e3, t3, i3) {
    const n2 = t3.privData, o = t3.codecpar.extradata ? 5 + t3.codecpar.extradataSize : 0, c = e3.getPos();
    e3.writeUint32(0), e3.writeString("esds"), e3.writeUint32(0), s2(e3, 3, 21 + o + 5 + 1), e3.writeUint16(n2.trackId), e3.writeUint8(0), s2(e3, 4, 13 + o), (86016 === t3.codecpar.codecId || 86017 === t3.codecpar.codecId) && t3.codecpar.sampleRate > 24e3 ? e3.writeUint8(107) : e3.writeUint8(r2.zs[t3.codecpar.codecId]), 94208 === t3.codecpar.codecId ? e3.writeUint8(225) : 1 === t3.codecpar.codecType ? e3.writeUint8(21) : e3.writeUint8(17), e3.writeUint24(0), e3.writeUint32(0), e3.writeUint32(0), t3.codecpar.extradata && (s2(e3, 5, t3.codecpar.extradataSize), e3.writeBuffer((0, a2.s3)(t3.codecpar.extradata, t3.codecpar.extradataSize))), s2(e3, 6, 1), e3.writeUint8(2), i3.boxsPositionInfo.push({ pos: c, type: "esds", size: Number(e3.getPos() - c) });
  }
}, 87384: (e2, t2, i2) => {
  function r2(e3, t3, i3, r3, a2, s2, n) {
    e3.writeInt32(Math.floor(65536 * t3)), e3.writeInt32(Math.floor(65536 * i3)), e3.writeInt32(0), e3.writeInt32(Math.floor(65536 * r3)), e3.writeInt32(Math.floor(65536 * a2)), e3.writeInt32(0), e3.writeInt32(Math.floor(65536 * s2)), e3.writeInt32(Math.floor(65536 * n)), e3.writeInt32(1073741824);
  }
  i2.d(t2, { A: () => r2 });
}, 17923: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    const r3 = e3.getPos();
    e3.writeUint32(0), e3.writeString("hdlr"), e3.writeUint8(0), e3.writeUint24(0);
    let a2 = "dhlr", s2 = "url ", n = "DataHandler";
    t3 && (a2 = "mhlr", 1 === t3.codecpar.codecType ? (s2 = "soun", n = "SoundHandler") : 0 === t3.codecpar.codecType ? (s2 = "vide", n = "VideoHandler") : 3 === t3.codecpar.codecType ? (s2 = "text", n = "SubtitleHandler") : (t3.metadata.handlerName && (n = t3.metadata.handlerName), t3.metadata.hdlrType && (s2 = t3.metadata.hdlrType))), e3.writeString(a2), e3.writeString(s2), e3.writeUint32(0), e3.writeUint32(0), e3.writeUint32(0), t3 && !i3.isom || e3.writeUint8(n.length), e3.writeString(n), t3 && !i3.isom && e3.writeUint8(0), i3.boxsPositionInfo.push({ pos: r3, type: "hdlr", size: Number(e3.getPos() - r3) });
  }
  i2.d(t2, { A: () => r2 });
}, 78669: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(14686), a2 = i2(60264), s2 = i2(67659);
  function n(e3, t3, i3) {
    let n2;
    i3.fragment && t3.sideData[1] ? (n2 = t3.sideData[1], delete t3.sideData[1]) : t3.codecpar.extradata && (n2 = (0, r2.s3)(t3.codecpar.extradata, t3.codecpar.extradataSize)), n2 && a2.Bs(n2) && (n2 = s2.S1(n2)), e3.writeUint32(8 + (n2 ? n2.length : 0)), e3.writeString("hvcC"), n2 && e3.writeBuffer(n2);
  }
}, 6e3: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(77231), a2 = i2(14041);
  function s2(e3, t3, i3) {
    const s3 = t3.privData, n = (0, a2.A)(s3), o = t3.metadata.creationTime || 0, c = t3.metadata.modificationTime || 0, d2 = t3.metadata.language || 21956;
    let h = n < BigInt(r2.f7) ? 0 : 1;
    h = o < r2.f7 ? 0 : 1, h = c < r2.f7 ? 0 : 1, e3.writeUint32(1 === h ? 44 : 32), e3.writeString("mdhd"), e3.writeUint8(h), e3.writeUint24(0), 1 === h ? (e3.writeUint64(o), e3.writeUint64(c)) : (e3.writeUint32(Number(o)), e3.writeUint32(Number(c))), e3.writeUint32(t3.timeBase.den), 1 === h ? e3.writeUint64(n) : e3.writeUint32(Number(n)), e3.writeUint16(d2), e3.writeUint16(0);
  }
}, 31130: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    e3.writeUint32(16), e3.writeString("mfhd"), e3.writeUint8(0), e3.writeUint24(0), e3.writeUint32(i3.currentFragment.sequence);
  }
  i2.d(t2, { A: () => r2 });
}, 48669: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(17923);
  function a2(e3, t3, i3) {
    (0, r2.A)(e3, null, i3);
  }
}, 7114: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(77231), a2 = i2(87384);
  function s2(e3, t3, i3) {
    const s3 = i3.duration, n = i3.creationTime || 0, o = i3.modificationTime || 0, c = i3.timescale || 0;
    let d2 = i3.nextTrackId || 1;
    i3.fragment && (d2 = 2);
    let h = s3 < BigInt(r2.f7) ? 0 : 1;
    h = n < r2.f7 ? 0 : 1, h = o < r2.f7 ? 0 : 1, e3.writeUint32(1 === h ? 120 : 108), e3.writeString("mvhd"), e3.writeUint8(h), e3.writeUint24(0), 1 === h ? (e3.writeUint64(n), e3.writeUint64(o)) : (e3.writeUint32(Number(n)), e3.writeUint32(Number(o))), e3.writeUint32(c), 1 === h ? e3.writeUint64(s3) : e3.writeUint32(Number(s3)), e3.writeUint32(65536), e3.writeUint16(256), e3.writeUint16(0), e3.writeUint32(0), e3.writeUint32(0), (0, a2.A)(e3, 1, 0, 0, 1, 0, 0), e3.writeUint32(0), e3.writeUint32(0), e3.writeUint32(0), e3.writeUint32(0), e3.writeUint32(0), e3.writeUint32(0), e3.writeUint32(d2);
  }
}, 65629: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    e3.writeUint32(16), e3.writeString("pasp"), e3.writeUint32(1), e3.writeUint32(1);
  }
  i2.d(t2, { A: () => r2 });
}, 37241: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    const r3 = i3.currentFragment.tracks.find((e4) => e4.trackId === t3.privData.trackId);
    e3.writeUint32(20), e3.writeString("saio"), e3.writeUint32(0), e3.writeUint32(1), r3.cenc.offsetPos = e3.getPos(), e3.writeUint32(0);
  }
  i2.d(t2, { A: () => r2 });
}, 32366: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    const r3 = i3.currentFragment.tracks.find((e4) => e4.trackId === t3.privData.trackId), a2 = e3.getPos();
    e3.writeUint32(0), e3.writeString("saiz"), e3.writeUint32(0), e3.writeUint8(r3.cenc.sampleSizes.length ? 0 : r3.cenc.defaultSampleInfoSize), e3.writeUint32(r3.cenc.sampleCount), r3.cenc.sampleSizes.length && r3.cenc.sampleSizes.forEach((t4) => {
      e3.writeUint8(t4);
    }), i3.boxsPositionInfo.push({ pos: a2, type: "saiz", size: Number(e3.getPos() - a2) });
  }
  i2.d(t2, { A: () => r2 });
}, 90842: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    const r3 = i3.currentFragment.tracks.find((e4) => e4.trackId === t3.privData.trackId), a2 = i3.cencs ? i3.cencs[r3.trackId] : null, s2 = e3.getPos();
    e3.writeUint32(0), e3.writeString("senc"), e3.writeUint32(r3.cenc.useSubsamples ? 2 : 0), e3.writeUint32(r3.cenc.sampleEncryption.length), r3.cenc.offset = Number(e3.getPos() - i3.currentFragment.pos), r3.cenc.sampleEncryption.forEach((t4) => {
      a2.defaultPerSampleIVSize && e3.writeBuffer(t4.iv), r3.cenc.useSubsamples && (e3.writeUint16(t4.subsamples.length), t4.subsamples.forEach((t5) => {
        e3.writeUint16(t5.bytesOfClearData), e3.writeUint32(t5.bytesOfProtectedData);
      }));
    }), i3.boxsPositionInfo.push({ pos: s2, type: "senc", size: Number(e3.getPos() - s2) });
  }
  i2.d(t2, { A: () => r2 });
}, 11573: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    e3.writeUint32(16), e3.writeString("smhd"), e3.writeUint32(0), e3.writeUint16(0), e3.writeUint16(0);
  }
  i2.d(t2, { A: () => r2 });
}, 2204: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    const r3 = t3.privData.chunkOffsets || [];
    e3.writeUint32(16 + 4 * r3.length), e3.writeString("stco"), e3.writeUint8(0), e3.writeUint24(0), e3.writeUint32(r3.length);
    for (let t4 = 0; t4 < r3.length; t4++) e3.writeUint32(Number(r3[t4]));
  }
  i2.d(t2, { A: () => r2 });
}, 84360: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/writing/stsc.ts";
  function s2(e3, t3, i3) {
    const s3 = t3.privData, n = s3.stscFirstChunk, o = s3.stscSamplesPerChunk, c = s3.stscSampleDescriptionIndex;
    n.length === o.length && n.length === c.length || r2.R8("ctts firstChunk's length is not match samplesPerChunk's length or sampleDescriptionIndex's length", a2, 42);
    const d2 = Math.min(n.length, o.length, c.length);
    e3.writeUint32(16 + 12 * d2), e3.writeString("stsc"), e3.writeUint8(0), e3.writeUint24(0), e3.writeUint32(d2);
    for (let t4 = 0; t4 < d2; t4++) e3.writeUint32(n[t4]), e3.writeUint32(o[t4]), e3.writeUint32(c[t4]);
  }
}, 69301: (e2, t2, i2) => {
  i2.d(t2, { A: () => T });
  var r2 = i2(61600), a2 = i2(78669), s2 = i2(1263), n = i2(99193), o = i2(39878), c = i2(47280), d2 = i2(82181), h = i2(4652), l = i2(853), u = i2(65629), f = i2(93861), p = i2(57756), m = i2(80648), g = i2(55668), v = i2(14686), A = i2(61619), y = i2(65977);
  const w = { 27: "avc1", 173: "hvc1", 196: "vvc1", 225: "av01", 167: "vp09", 86019: "ac-3", 86056: "ec-3" };
  function b(e3) {
    if (e3.codecTag) return (0, A.A)(e3.codecTag);
    let t3 = w[e3.codecId];
    return t3 || (t3 = 0 === e3.codecType ? "mp4v" : 1 === e3.codecType ? 86076 === e3.codecId ? "Opus" : 86028 === e3.codecId ? "fLaC" : "mp4a" : 3 === e3.codecType ? "text" : "none"), t3;
  }
  function k(e3, t3, i3) {
    const r3 = t3.privData, a3 = i3.cencs[r3.trackId], s3 = e3.getPos();
    e3.writeUint32(0), e3.writeString("sinf"), e3.writeUint32(12), e3.writeString("frma"), e3.writeString(b(t3.codecpar)), e3.writeUint32(20), e3.writeString("schm"), e3.writeUint32(0), e3.writeUint32(a3.schemeType || (0, y.A)("cenc")), e3.writeUint32(a3.schemeVersion || 65536), e3.writeUint32(16 + a3.defaultKeyId.length + 8 + (a3.defaultConstantIV ? 1 + a3.defaultConstantIV.length : 0)), e3.writeString("schi"), e3.writeUint32(16 + a3.defaultKeyId.length + (a3.defaultConstantIV ? 1 + a3.defaultConstantIV.length : 0)), e3.writeString("tenc"), a3.cryptByteBlock || a3.skipByteBlock || a3.pattern ? e3.writeUint8(1) : e3.writeUint8(0), e3.writeUint24(0), e3.writeUint8(0), e3.writeUint8((15 & (a3.cryptByteBlock || 0)) << 4 | 15 & (a3.skipByteBlock || 0)), e3.writeUint8(1), e3.writeUint8(a3.defaultPerSampleIVSize), e3.writeBuffer(a3.defaultKeyId), a3.defaultConstantIV && (e3.writeUint8(a3.defaultConstantIV.length), e3.writeBuffer(a3.defaultConstantIV)), i3.boxsPositionInfo.push({ pos: s3, type: "sinf", size: Number(e3.getPos() - s3) });
  }
  function x(e3, t3, i3) {
    const r3 = i3.isom ? 1 : 0;
    e3.writeUint32(0), e3.writeUint16(0), e3.writeUint16(1), e3.writeUint16(r3), e3.writeUint16(0), e3.writeUint32(0), i3.isom ? (e3.writeUint16(t3.codecpar.chLayout.nbChannels), 65541 === t3.codecpar.codecId || 65540 === t3.codecpar.codecId ? e3.writeUint16(8) : 69643 === t3.codecpar.codecId ? e3.writeUint16(t3.codecpar.bitsPerCodedSample) : e3.writeUint16(16), e3.writeUint16(-2)) : (86028 === t3.codecpar.codecId || 86032 === t3.codecpar.codecId || 86076 === t3.codecpar.codecId ? e3.writeUint16(t3.codecpar.chLayout.nbChannels) : e3.writeUint16(2), 86028 === t3.codecpar.codecId || 86032 === t3.codecpar.codecId ? e3.writeUint16(t3.codecpar.bitsPerRawSample) : e3.writeUint16(16), e3.writeUint16(0)), e3.writeUint16(0), 86076 === t3.codecpar.codecId ? e3.writeUint16(48e3) : 86060 === t3.codecpar.codecId ? e3.writeUint32(t3.codecpar.sampleRate) : e3.writeUint16(t3.codecpar.sampleRate), 86060 !== t3.codecpar.codecId && e3.writeUint16(0), 1 === r3 && (e3.writeUint32(t3.codecpar.frameSize), e3.writeUint32(0), e3.writeUint32(0), e3.writeUint32(2));
  }
  function I(e3, t3, i3) {
    const r3 = b(t3.codecpar);
    !i3.isom || 86018 !== t3.codecpar.codecId && 86019 !== t3.codecpar.codecId && 86056 !== t3.codecpar.codecId && 73728 !== t3.codecpar.codecId && 86032 !== t3.codecpar.codecId && 69638 !== t3.codecpar.codecId && 69633 !== t3.codecpar.codecId && 86035 !== t3.codecpar.codecId ? 86028 === t3.codecpar.codecId ? (0, c.A)(e3, t3, i3) : 86076 === t3.codecpar.codecId ? (0, d2.A)(e3, t3, i3) : 86019 === t3.codecpar.codecId ? (0, m.A)(e3, t3, i3) : 86056 === t3.codecpar.codecId ? (0, g.A)(e3, t3, i3) : "mp4a" == r3 && (0, h.A)(e3, t3, i3) : (0, p.A)(e3, t3, i3);
  }
  function P(e3, t3, i3) {
    const r3 = 13 == t3.codecpar.codecId && 15 == t3.codecpar.format || 13 == t3.codecpar.codecId && 1 == t3.codecpar.format || 202 == t3.codecpar.codecId || 203 == t3.codecpar.codecId || 156 == t3.codecpar.codecId || 127 == t3.codecpar.codecId;
    e3.writeUint32(0), e3.writeUint16(0), e3.writeUint16(1), e3.writeUint16(r3 ? 2 : 0), e3.writeUint16(0), i3.isom ? (e3.writeString("FFMP"), 13 === t3.codecpar.codecId || r3 ? (e3.writeUint32(0), e3.writeUint32(1024)) : (e3.writeUint32(512), e3.writeUint32(512))) : (e3.writeUint32(0), e3.writeUint32(0), e3.writeUint32(0)), e3.writeUint16(t3.codecpar.width), e3.writeUint16(t3.codecpar.height), e3.writeUint32(4718592), e3.writeUint32(4718592), e3.writeUint32(0), e3.writeUint16(1);
    let a3 = t3.metadata.compressorName || "";
    if (a3 = a3.slice(0, 31), e3.writeUint8(a3.length), e3.writeString(a3), a3.length < 31) {
      let t4 = 31 - a3.length;
      for (; t4 > 0; ) e3.writeUint8(0), t4--;
    }
    i3.isom && t3.codecpar.bitsPerCodedSample ? e3.writeUint16(t3.codecpar.bitsPerCodedSample) : e3.writeUint16(24), e3.writeUint16(65535);
  }
  function S(e3, t3, i3) {
    "mp4v" === b(t3.codecpar) ? (0, h.A)(e3, t3, i3) : 27 === t3.codecpar.codecId ? (0, r2.A)(e3, t3, i3) : 173 === t3.codecpar.codecId ? (0, a2.A)(e3, t3, i3) : 196 === t3.codecpar.codecId ? (0, s2.A)(e3, t3, i3) : 167 === t3.codecpar.codecId ? (0, n.A)(e3, t3, i3) : 225 === t3.codecpar.codecId && (0, o.A)(e3, t3, i3);
  }
  function T(e3, t3, i3) {
    const r3 = e3.getPos();
    e3.writeUint32(0), e3.writeString("stsd");
    const a3 = t3.privData, s3 = i3.cencs && i3.cencs[a3.trackId] && (1 === t3.codecpar.codecType || 0 === t3.codecpar.codecType) && !i3.ignoreEncryption;
    e3.writeUint8(0), e3.writeUint24(0), e3.writeUint32(s3 ? 2 : 1), 1 === t3.codecpar.codecType ? (s3 && (function(e4, t4, i4) {
      const r4 = e4.getPos();
      e4.writeUint32(0), e4.writeString("enca"), x(e4, t4, i4), k(e4, t4, i4), I(e4, t4, i4), i4.boxsPositionInfo.push({ pos: r4, type: "enca", size: Number(e4.getPos() - r4) });
    })(e3, t3, i3), (function(e4, t4, i4) {
      const r4 = e4.getPos(), a4 = b(t4.codecpar);
      e4.writeUint32(0), e4.writeString(a4), x(e4, t4, i4), I(e4, t4, i4), i4.isom || (0, f.A)(e4, t4, i4), i4.boxsPositionInfo.push({ pos: r4, type: a4, size: Number(e4.getPos() - r4) });
    })(e3, t3, i3)) : 0 === t3.codecpar.codecType ? (s3 && (function(e4, t4, i4) {
      const r4 = e4.getPos();
      e4.writeUint32(0), e4.writeString("encv"), P(e4, t4, i4), k(e4, t4, i4), S(e4, t4, i4), i4.boxsPositionInfo.push({ pos: r4, type: "encv", size: Number(e4.getPos() - r4) });
    })(e3, t3, i3), (function(e4, t4, i4) {
      const r4 = e4.getPos(), a4 = b(t4.codecpar);
      e4.writeUint32(0), e4.writeString(a4), P(e4, t4, i4), S(e4, t4, i4), (0, l.A)(e4, t4, i4), (0, u.A)(e4, t4, i4), i4.isom || (0, f.A)(e4, t4, i4), i4.boxsPositionInfo.push({ pos: r4, type: a4, size: Number(e4.getPos() - r4) });
    })(e3, t3, i3)) : 3 === t3.codecpar.codecType && (function(e4, t4, i4) {
      const r4 = e4.getPos(), a4 = b(t4.codecpar);
      e4.writeUint32(0), e4.writeString(a4), e4.writeUint32(0), e4.writeUint16(0), e4.writeUint16(1), 94208 === t4.codecpar.codecId ? (0, h.A)(e4, t4, i4) : t4.codecpar.extradata && e4.writeBuffer((0, v.s3)(t4.codecpar.extradata, t4.codecpar.extradataSize)), i4.isom || (0, f.A)(e4, t4, i4), i4.boxsPositionInfo.push({ pos: r4, type: a4, size: Number(e4.getPos() - r4) });
    })(e3, t3, i3), i3.boxsPositionInfo.push({ pos: r3, type: "esds", size: Number(e3.getPos() - r3) });
  }
}, 20184: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    const r3 = t3.privData.stssSampleNumbers;
    e3.writeUint32(16 + 4 * r3.length), e3.writeString("stss"), e3.writeUint8(0), e3.writeUint24(0), e3.writeUint32(r3.length);
    for (let t4 = 0; t4 < r3.length; t4++) e3.writeUint32(r3[t4]);
  }
  i2.d(t2, { A: () => r2 });
}, 57247: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    const r3 = t3.privData.sampleSizes;
    e3.writeUint32(20 + 4 * r3.length), e3.writeString("stsz"), e3.writeUint8(0), e3.writeUint24(0), e3.writeUint32(0), e3.writeUint32(r3.length);
    for (let t4 = 0; t4 < r3.length; t4++) e3.writeUint32(r3[t4]);
  }
  i2.d(t2, { A: () => r2 });
}, 86051: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/formats/mov/writing/stts.ts";
  function s2(e3, t3, i3) {
    const s3 = t3.privData, n = s3.sttsSampleCounts || [], o = s3.sttsSampleDeltas || [];
    n.length !== o.length && r2.R8("stts sampleCounts's length is not match sampleDeltas's length", a2, 39);
    const c = Math.min(n.length, o.length);
    e3.writeUint32(16 + 8 * c), e3.writeString("stts"), e3.writeUint8(0), e3.writeUint24(0), e3.writeUint32(c);
    for (let t4 = 0; t4 < c; t4++) e3.writeUint32(n[t4]), e3.writeInt32(o[t4]);
  }
}, 11251: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    const r3 = i3.currentFragment.tracks.find((e4) => e4.trackId === t3.privData.trackId), a2 = r3 ? r3.baseMediaDecodeTime : BigInt(0);
    e3.writeUint32(20), e3.writeString("tfdt"), e3.writeUint8(1), e3.writeUint24(0), e3.writeUint64(a2);
  }
  i2.d(t2, { A: () => r2 });
}, 11903: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    const r3 = i3.currentFragment.tracks.find((e4) => e4.trackId === t3.privData.trackId);
    let a2 = 57;
    r3.baseIsMoof && (a2 &= -2, a2 |= 131072);
    const s2 = e3.getPos();
    e3.writeUint32(0), e3.writeString("tfhd"), e3.writeUint8(0), e3.writeUint24(a2), e3.writeUint32(r3.trackId), 1 & a2 && e3.writeUint64(r3.baseDataOffset), 8 & a2 && e3.writeUint32(r3.defaultSampleDuration), 16 & a2 && e3.writeUint32(r3.defaultSampleSize), 32 & a2 && e3.writeUint32(r3.defaultSampleFlags), i3.boxsPositionInfo.push({ pos: s2, type: "tfhd", size: Number(e3.getPos() - s2) });
  }
  i2.d(t2, { A: () => r2 });
}, 59868: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(77231), a2 = i2(87384), s2 = i2(44328), n = i2(14041);
  function o(e3, t3, i3) {
    const o2 = t3.privData, c = (0, s2.k)((0, n.A)(o2), t3.timeBase, { den: i3.timescale, num: 1 }), d2 = t3.metadata.creationTime || 0, h = t3.metadata.modificationTime || 0, l = o2.layer || 0, u = o2.alternateGroup || 0;
    let f = t3.codecpar.width > 0 ? t3.codecpar.width : 0, p = t3.codecpar.height > 0 ? t3.codecpar.height : 0;
    const m = (0, s2.lb)(t3.codecpar.sampleAspectRatio);
    0 !== m && m !== 1 / 0 && (f = Math.floor(f * m)), f < r2.zg && (f <<= 16), p < r2.zg && (p <<= 16);
    let g = c < BigInt(r2.f7) ? 0 : 1;
    g = d2 < r2.f7 ? 0 : 1, g = h < r2.f7 ? 0 : 1;
    let v = 2;
    1 & o2.flags && (v |= 1), e3.writeUint32(1 === g ? 100 : 92), e3.writeString("tkhd"), e3.writeUint8(g), e3.writeUint24(v), 1 === g ? (e3.writeUint64(d2), e3.writeUint64(h)) : (e3.writeUint32(Number(d2)), e3.writeUint32(Number(h))), e3.writeUint32(o2.trackId), e3.writeUint32(0), 1 === g ? e3.writeUint64(c) : e3.writeUint32(Number(c)), e3.writeUint32(0), e3.writeUint32(0), e3.writeInt16(l), e3.writeInt16(o2.perStreamGrouping ? u : t3.codecpar.codecType), 1 === t3.codecpar.codecType ? e3.writeInt16(256) : e3.writeInt16(0), e3.writeInt16(0);
    const A = t3.metadata.matrix;
    A ? (0, a2.A)(e3, A[0], A[1], A[3], A[4], A[6], A[7]) : (0, a2.A)(e3, 1, 0, 0, 1, 0, 0), e3.writeUint32(f), e3.writeUint32(p);
  }
}, 35010: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    var r3, a2, s2;
    const n = i3.currentFragment.tracks.find((e4) => e4.trackId === t3.privData.trackId), o = i3.trexs.find((e4) => {
      e4.trackId, t3.privData.trackId;
    }), c = null !== (r3 = null == o ? void 0 : o.duration) && void 0 !== r3 ? r3 : 0, d2 = null !== (a2 = null == o ? void 0 : o.size) && void 0 !== a2 ? a2 : 0, h = null !== (s2 = null == o ? void 0 : o.flags) && void 0 !== s2 ? s2 : 0;
    e3.writeUint32(32), e3.writeString("trex"), e3.writeUint8(0), e3.writeUint24(0), e3.writeUint32(n.trackId), e3.writeUint32(1), e3.writeUint32(c), e3.writeUint32(d2), e3.writeUint32(h);
  }
  i2.d(t2, { A: () => r2 });
}, 48516: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    const r3 = t3.privData, a2 = i3.currentFragment.tracks.find((e4) => e4.trackId === r3.trackId), s2 = a2.firstSampleFlags || 0, n = a2.dataOffset || 0, o = a2.sampleDurations, c = a2.sampleSizes, d2 = a2.sampleFlags, h = a2.sampleCompositionTimeOffset, l = a2.sampleCount, u = o.length > 0, f = c.length > 0, p = d2.length > 0, m = h.length > 0, g = 0 !== s2;
    let v = 1;
    g && (v |= 4), u && (v |= 256), f && (v |= 512), p && (v |= 1024), m && (v |= 2048);
    const A = e3.getPos();
    e3.writeUint32(0), e3.writeString("trun"), e3.writeUint8(1), e3.writeUint24(v), e3.writeUint32(l), a2.dataOffsetPos = e3.getPos(), e3.writeInt32(n), g && e3.writeUint32(s2);
    for (let t4 = 0; t4 < l; t4++) u && e3.writeUint32(o[t4] || 0), f && e3.writeUint32(c[t4] || 0), p && e3.writeUint32(d2[t4] || 0), m && e3.writeInt32(h[t4] || 0);
    i3.boxsPositionInfo.push({ pos: A, type: "trun", size: Number(e3.getPos() - A) });
  }
  i2.d(t2, { A: () => r2 });
}, 54012: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    e3.writeUint32(20), e3.writeString("vmhd"), e3.writeUint8(0), e3.writeUint24(1), e3.writeUint64(BigInt(0));
  }
  i2.d(t2, { A: () => r2 });
}, 99193: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(14686);
  function a2(e3, t3, i3) {
    var a3;
    e3.writeUint32(12 + (null !== (a3 = t3.codecpar.extradataSize) && void 0 !== a3 ? a3 : 0)), e3.writeString("vpcC"), e3.writeUint8(1), e3.writeUint24(0), i3.fragment && t3.sideData[1] ? (e3.writeBuffer(t3.sideData[1]), delete t3.sideData[1]) : t3.codecpar.extradata && e3.writeBuffer((0, r2.s3)(t3.codecpar.extradata, t3.codecpar.extradataSize));
  }
}, 1263: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(14686), a2 = i2(60264), s2 = i2(59166);
  function n(e3, t3, i3) {
    let n2;
    i3.fragment && t3.sideData[1] ? (n2 = t3.sideData[1], delete t3.sideData[1]) : t3.codecpar.extradata && (n2 = (0, r2.s3)(t3.codecpar.extradata, t3.codecpar.extradataSize)), n2 && a2.Bs(n2) && (n2 = s2.S1(n2)), e3.writeUint32(12 + (n2 ? n2.length : 0)), e3.writeString("vvcC"), e3.writeUint8(0), e3.writeUint24(0), n2 && e3.writeBuffer(n2);
  }
}, 57756: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(14686), a2 = i2(4652);
  function s2(e3, t3, i3) {
    const s3 = e3.getPos();
    e3.writeUint32(0), e3.writeString("wave"), 86035 !== t3.codecpar.codecId && (e3.writeUint32(12), e3.writeString("frma"), e3.writeUint32(t3.codecpar.codecTag)), 86018 === t3.codecpar.codecId ? (e3.writeUint32(12), e3.writeString("mp4a"), e3.writeUint32(0), (0, a2.A)(e3, t3, i3)) : i3.fragment && t3.sideData[1] ? (e3.writeBuffer(t3.sideData[1]), delete t3.sideData[1]) : t3.codecpar.extradata && e3.writeBuffer((0, r2.s3)(t3.codecpar.extradata, t3.codecpar.extradataSize)), e3.writeUint32(8), e3.writeUint32(0), i3.boxsPositionInfo.push({ pos: s3, type: "wave", size: Number(e3.getPos() - s3) });
  }
}, 80025: (e2, t2, i2) => {
  i2.d(t2, { A: () => M });
  var r2 = i2(86051), a2 = i2(18387), s2 = i2(20184), n = i2(57247), o = i2(84360), c = i2(2204), d2 = i2(34445), h = i2(6e3), l = i2(7114), u = i2(59868), f = i2(17923), p = i2(69301), m = i2(54012), g = i2(44473), v = i2(11573), A = i2(12412), y = i2(35010), w = i2(31130), b = i2(11903), k = i2(11251), x = i2(48516), I = i2(48669), P = i2(32366), S = i2(37241), T = i2(90842);
  const M = { stts: r2.A, ctts: a2.A, stss: s2.A, stsz: n.A, stsc: o.A, stco: c.A, co64: d2.A, mdhd: h.A, mvhd: l.A, tkhd: u.A, hdlr: f.A, stsd: p.A, vmhd: m.A, edts: g.A, smhd: v.A, dref: A.A, trex: y.A, mfhd: w.A, tfhd: b.A, tfdt: k.A, trun: x.A, minf_hdlr: I.A, saio: S.A, saiz: P.A, senc: T.A };
}, 75294: (e2, t2, i2) => {
  i2.d(t2, { CM: () => o, Vz: () => s2, qg: () => n });
  var r2 = i2(134), a2 = i2(64093);
  class s2 {
    constructor() {
      (0, r2.A)(this, "version", void 0), (0, r2.A)(this, "layer", void 0), (0, r2.A)(this, "protection", void 0), (0, r2.A)(this, "bitrateIndex", void 0), (0, r2.A)(this, "samplingFrequency", void 0), (0, r2.A)(this, "padding", void 0), (0, r2.A)(this, "private", void 0), (0, r2.A)(this, "mode", void 0), (0, r2.A)(this, "modeExtension", void 0), (0, r2.A)(this, "copyright", void 0), (0, r2.A)(this, "original", void 0), (0, r2.A)(this, "emphasis", void 0);
    }
  }
  function n(e3, t3) {
    e3.version = t3 >> 19 & 3, e3.layer = t3 >> 17 & 3, e3.protection = t3 >> 16 & 1, e3.bitrateIndex = t3 >> 12 & 15, e3.samplingFrequency = t3 >> 10 & 3, e3.padding = t3 >> 9 & 1, e3.mode = t3 >> 6 & 3, e3.modeExtension = t3 >> 4 & 3, e3.copyright = t3 >> 3 & 1, e3.original = t3 >> 2 & 1, e3.emphasis = 3 & t3;
  }
  function o(e3, t3) {
    let i3 = a2.oz(e3.version, e3.layer, e3.bitrateIndex);
    switch (e3.layer) {
      case 1:
      default:
        i3 = 144e3 * i3 / (t3 << (3 === e3.version ? 0 : 1)) >>> 0, i3 += e3.padding;
        break;
      case 2:
        i3 = 144e3 * i3 / t3 >>> 0, i3 += e3.padding;
        break;
      case 3:
        i3 = 12e3 * i3 / t3 >>> 0, i3 = 4 * (i3 + e3.padding);
    }
    return i3;
  }
}, 19028: (e2, t2, i2) => {
  i2.d(t2, { q: () => o });
  var r2 = i2(4624), a2 = i2(50011);
  const s2 = "src/avformat/formats/mp3/id3v2.ts";
  function n(e3, t3) {
    let i3 = "utf-8";
    return 0 === e3 ? i3 = "iso-8859-1" : 1 === e3 ? i3 = "utf-16" : 2 === e3 && (i3 = "utf-16be"), new TextDecoder(i3).decode(t3);
  }
  async function o(e3, t3, i3, o2) {
    const c = 2 !== i3.version, d2 = c ? 10 : 6;
    let h = e3.getPos() + BigInt(0 | t3);
    async function l() {
      await e3.seek(h);
    }
    if (c && 64 & i3.flags) {
      let a3 = await (async function(e4, t4) {
        let i4 = 0;
        for (; t4--; ) i4 = (i4 << 7) + (127 & await e4.readUint8());
        return i4;
      })(e3, 4);
      if (4 === i3.version && (a3 -= 4), a3 < 0) return r2.z3("invalid extended header length", s2, 88), await l();
      if (await e3.skip(a3), (t3 -= a3 + 4) < 0) return r2.z3("extended header too long", s2, 94), await e3.seek(h), await l();
    }
    for (; t3 > d2; ) {
      let i4, h2;
      if (c) {
        if (i4 = await e3.readString(4), h2 = await e3.readUint32(), !h2) {
          r2.z3("invalid frame size", s2, 108);
          break;
        }
        await e3.readUint16();
      } else i4 = await e3.readString(3), h2 = await e3.readUint24();
      if ("APIC" === i4) o2.poster = await e3.readBuffer(h2);
      else if ("USLT" === i4) {
        const t4 = await e3.readUint8(), i5 = await e3.readString(3), r3 = await e3.readBuffer(h2 - 4);
        o2.lyrics = "".concat(i5, " ").concat(n(t4, r3));
      } else if ("COMM" === i4 || "COM" === i4) {
        const t4 = await e3.readUint8(), i5 = await e3.readString(3), r3 = await e3.readBuffer(h2 - 4);
        o2.comment = "".concat(i5, " ").concat(n(t4, r3));
      } else if ("PRIV" === i4) {
        const t4 = e3.getPos(), i5 = [];
        for (; ; ) {
          const t5 = await e3.readUint8();
          if (0 === t5) break;
          i5.push(t5);
        }
        const r3 = a2.decode(new Uint8Array(i5));
        let s3;
        s3 = "com.apple.streaming.transportStreamTimestamp" === r3 ? await e3.readUint64() : await e3.readBuffer(h2 - Number(e3.getPos() - t4)), o2[r3] = s3;
      } else {
        let t4;
        switch (t4 = "T" === i4[0] ? n(await e3.readUint8(), await e3.readBuffer(h2 - 1)) : await e3.readBuffer(h2), i4) {
          case "TIT2":
          case "TT2":
            o2.title = t4;
            break;
          case "TPE1":
          case "TP1":
            o2.artist = t4;
            break;
          case "TPE2":
          case "TP2":
            o2.albumArtist = t4;
            break;
          case "TPOS":
            o2.disc = t4;
            break;
          case "TCOP":
            o2.copyright = t4;
            break;
          case "TALB":
          case "TAL":
            o2.album = t4;
            break;
          case "TRCK":
          case "TRK":
            o2.track = t4;
            break;
          case "TYER":
          case "TDRL":
          case "TDRC":
            o2.date = t4;
            break;
          case "COMM":
          case "COM":
            o2.comment = t4;
            break;
          case "TCON":
          case "TCO":
            o2.genre = t4;
            break;
          case "TSSE":
          case "TEN":
            o2.encoder = t4;
            break;
          case "TCOM":
            o2.composer = t4;
            break;
          case "TENC":
            o2.vendor = t4;
            break;
          case "TLAN":
            o2.language = t4;
            break;
          case "TPE3":
          case "TP3":
            o2.performer = t4;
            break;
          case "TPUB":
            o2.publisher = t4;
            break;
          case "TCMP":
          case "TCP":
            o2.compilation = t4;
            break;
          case "TDEN":
            o2.creationTime = t4;
            break;
          case "TSOA":
            o2.albumSort = t4;
            break;
          case "TSOP":
            o2.artistSort = t4;
            break;
          case "TSOT":
            o2.titleSort = t4;
            break;
          case "TIT1":
            o2.grouping = t4;
            break;
          default:
            o2[i4] = t4;
        }
      }
      t3 -= h2 + d2;
    }
    4 == i3.version && 16 & i3.flags && (h += BigInt(10)), await e3.seek(h);
  }
}, 31608: (e2, t2, i2) => {
  i2.d(t2, { W8: () => r2, c1: () => a2 });
  const r2 = 100, a2 = 128;
}, 89564: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(27274);
  function a2(e3, t3, i3) {
    const a3 = new Uint8Array(r2.GV);
    let s2 = 0, n = 0;
    for (let r3 = 0; r3 < e3.length - 3; r3++) if (71 === e3[r3]) {
      const o = 8191 & (e3[r3 + 1] << 8 | e3[r3 + 2]);
      let c = 48 & e3[r3 + 3];
      if (!i3 || 8191 === o || c) {
        const e4 = r3 % t3;
        a3[e4]++, s2++, a3[e4] > n && (n = a3[e4]);
      }
    }
    return n - Math.max(s2 - 10 * n, 0) / 10;
  }
}, 52088: (e2, t2, i2) => {
  function r2(e3) {
    e3.slices = [], e3.totalLength = 0, e3.expectedLength = -1;
  }
  i2.d(t2, { A: () => r2 });
}, 19770: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(80662), a2 = i2.n(r2), s2 = i2(77231), n = i2(6403);
  function o() {
    return { currentProgram: s2.N_, currentPmtPid: s2.N_, tsPacketSize: s2.N_, hasPAT: false, hasPMT: false, tsSliceQueueMap: new (a2())(), pat: new n.Cd(), pmt: new n.I4(), program2Pmt: new (a2())(), ioEnd: false, startPid: 256, delay: BigInt(0) };
  }
}, 76538: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(77231);
  function a2() {
    return { pid: r2.N_, filter: null, tsPacket: null, pes: null, pendingPES: null, continuityCounter: 0, pesSlices: { total: 0, buffers: [] }, latm: false };
  }
}, 39e3: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(6403), a2 = i2(52088), s2 = i2(63599);
  function n(e3, t3) {
    const i3 = t3.tsSliceQueueMap.get(e3.pid);
    if (e3.payloadUnitStartIndicator) {
      const c = e3.payload[0];
      if (i3 && i3.totalLength > 0) {
        const r3 = e3.payload.slice(1, Math.min(1 + c, e3.payload.length));
        i3.slices.push(r3), i3.totalLength += r3.length, i3.totalLength === i3.expectedLength ? ((0, s2.A)(e3.pid, i3, t3), (0, a2.A)(i3)) : ((0, a2.A)(i3), t3.tsSliceQueueMap.delete(e3.pid));
      }
      for (let i4 = 1 + c; i4 < e3.payload.length; ) {
        var n2, o;
        if (255 === e3.payload[i4]) break;
        const c2 = (15 & e3.payload[i4 + 1]) << 8 | e3.payload[i4 + 2], d2 = new r2.pi();
        d2.pid = e3.pid, d2.expectedLength = c2 + 3, d2.randomAccessIndicator = null !== (n2 = null === (o = e3.adaptationFieldInfo) || void 0 === o ? void 0 : o.randomAccessIndicator) && void 0 !== n2 ? n2 : 0;
        const h = e3.payload.slice(i4, Math.min(i4 + d2.expectedLength - d2.totalLength, e3.payload.length));
        d2.slices.push(h), d2.totalLength += h.length, t3.tsSliceQueueMap.set(e3.pid, d2), d2.totalLength === d2.expectedLength ? ((0, s2.A)(e3.pid, d2, t3), (0, a2.A)(d2)) : ((0, a2.A)(d2), t3.tsSliceQueueMap.delete(e3.pid)), i4 += h.length;
      }
    } else if (i3 && 0 !== i3.totalLength) {
      const r3 = e3.payload.slice(0, Math.min(i3.expectedLength - i3.totalLength, e3.payload.length));
      i3.slices.push(r3), i3.totalLength += r3.length, i3.totalLength === i3.expectedLength ? ((0, s2.A)(e3.pid, i3, t3), (0, a2.A)(i3)) : ((0, a2.A)(i3), t3.tsSliceQueueMap.delete(e3.pid));
    }
  }
}, 86191: (e2, t2, i2) => {
  i2.d(t2, { A: () => u });
  var r2 = i2(61499), a2 = i2(76538), s2 = i2(27274), n = i2(50848), o = i2(36488), c = i2(61702), d2 = i2(22576), h = i2(37837), l = i2(14686);
  function u(e3, t3, i3) {
    t3.timeBase.den = 9e4, t3.timeBase.num = 1;
    const u2 = (0, a2.A)();
    u2.pid = e3, t3.privData = u2;
    const f = i3.pmt.pid2StreamType.get(e3);
    if (6 === f) {
      const r3 = i3.pmt.pid2ESDescriptor.get(e3);
      if (t3.codecpar.codecType = 2, r3) {
        var p;
        const e4 = r3.find((e5) => 5 === e5.tag);
        if (e4 && (null === (p = e4.buffer) || void 0 === p ? void 0 : p.length) >= 4) {
          if ("O" === String.fromCharCode(e4.buffer[0]) || "p" === String.fromCharCode(e4.buffer[1]) || "u" === String.fromCharCode(e4.buffer[2]) || "s" === String.fromCharCode(e4.buffer[3])) {
            t3.codecpar.codecType = 1, t3.codecpar.codecId = 86076, t3.codecpar.sampleRate = 48e3;
            const e5 = r3.find((e6) => 127 === e6.tag);
            if (e5 && 128 === e5.buffer[0]) {
              t3.codecpar.chLayout.nbChannels = 15 & e5.buffer[1] ? 15 & e5.buffer[1] : 2;
              const i4 = d2.Ij(t3.codecpar);
              i4 && (t3.codecpar.extradata = (0, h.sY)(i4.length), (0, l.lW)(t3.codecpar.extradata, i4.length, i4), t3.codecpar.extradataSize = i4.length);
            }
          } else if ("A" === String.fromCharCode(e4.buffer[0]) || "V" === String.fromCharCode(e4.buffer[1]) || "0" === String.fromCharCode(e4.buffer[2]) || "1" === String.fromCharCode(e4.buffer[3])) {
            t3.codecpar.codecType = 0, t3.codecpar.codecId = 225;
            const e5 = r3.find((e6) => 128 === e6.tag);
            e5 && (t3.codecpar.extradata = (0, h.sY)(e5.buffer.length), (0, l.lW)(t3.codecpar.extradata, e5.buffer.length, e5.buffer), t3.codecpar.extradataSize = e5.buffer.length);
          }
        }
      }
    } else {
      const e4 = s2.$x[f];
      e4 ? (t3.codecpar.codecType = e4[0], t3.codecpar.codecId = e4[1]) : t3.codecpar.codecType = 2;
    }
    let m;
    switch (f) {
      case 15:
        m = new n.A();
        break;
      case 17:
        m = new o.A();
        break;
      case 6:
        86076 === t3.codecpar.codecId && (m = new c.A());
    }
    return 27 !== t3.codecpar.codecId && 173 !== t3.codecpar.codecId && 196 !== t3.codecpar.codecId || (t3.codecpar.flags |= 1), m && (t3.privData.filter = m, m.init(t3.codecpar[r2.o9], t3.timeBase[r2.o9])), t3;
  }
}, 31239: (e2, t2, i2) => {
  function r2(e3, t3) {
    let i3 = 0, r3 = e3[i3++];
    if (t3.adaptationFieldInfo.discontinuityIndicator = r3 >> 7 & 1, t3.adaptationFieldInfo.randomAccessIndicator = r3 >> 6 & 1, t3.adaptationFieldInfo.elementaryStreamPriorityIndicator = r3 >> 5 & 1, t3.adaptationFieldInfo.pcrFlag = r3 >> 4 & 1, t3.adaptationFieldInfo.opcrFlag = r3 >> 3 & 1, t3.adaptationFieldInfo.splicingPointFlag = r3 >> 2 & 1, t3.adaptationFieldInfo.transportPrivateDataFlag = r3 >> 1 & 1, t3.adaptationFieldInfo.adaptationFieldExtensionFlag = 1 & r3, t3.adaptationFieldInfo.pcrFlag) {
      const r4 = BigInt(Math.floor(e3[i3++] << 25 | e3[i3++] << 17 | e3[i3++] << 9 | e3[i3++] << 1 | e3[i3] >> 7)), a2 = BigInt(Math.floor((1 & e3[i3++]) << 8 | e3[i3++]));
      t3.adaptationFieldInfo.pcr = r4 * BigInt(300) + a2;
    }
    if (t3.adaptationFieldInfo.opcrFlag) {
      const r4 = BigInt(Math.floor(e3[i3++] << 25 | e3[i3++] << 17 | e3[i3++] << 9 | e3[i3++] << 1 | e3[i3] >> 7)), a2 = BigInt(Math.floor((1 & e3[i3++]) << 8 | e3[i3++]));
      t3.adaptationFieldInfo.pcr = r4 * BigInt(300) + a2;
    }
    if (t3.adaptationFieldInfo.splicingPointFlag && (t3.adaptationFieldInfo.spliceCountDown = e3[i3++]), t3.adaptationFieldInfo.transportPrivateDataFlag) {
      const r4 = e3[i3++];
      t3.adaptationFieldInfo.transportPrivateData = e3.subarray(i3, i3 + r4), i3 += r4;
    }
    if (t3.adaptationFieldInfo.adaptationFieldExtensionFlag) {
      const r4 = e3[i3++];
      t3.adaptationFieldInfo.extension = e3.subarray(i3, i3 + r4), i3 += r4;
    }
  }
  i2.d(t2, { A: () => r2 });
}, 20549: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(31865), a2 = i2(6403), s2 = i2(92647), n = i2(4624);
  const o = "src/avformat/formats/mpegts/function/parsePAT.ts";
  function c(e3, t3) {
    let i3 = 0;
    const c2 = new r2.A((0, s2.A)(Uint8Array, e3.slices), true), d2 = c2.readUint8();
    0 !== d2 && n.z3("parsePAT: table_id ".concat(d2, " is not corresponded to PAT!"), o, 40);
    const h = 4095 & c2.readUint16();
    c2.readUint16(), i3 = c2.readUint8();
    const l = i3 >> 1 & 31, u = 1 & i3, f = c2.readUint8();
    let p;
    if (c2.readUint8(), 1 === u && 0 === f) p = new a2.Cd(), p.versionNumber = l;
    else if (p = t3.pat, !p) return void n.z3("can not found PAT in mpegts context", o, 64);
    const m = h - 5 - 4, g = Number(BigInt.asIntN(32, c2.getPos())) + m;
    let v = -1, A = -1;
    for (; c2.getPos() < g; ) {
      const e4 = c2.readUint16(), t4 = 8191 & c2.readUint16();
      0 === e4 ? p.networkPid = t4 : (p.program2PmtPid.set(e4, t4), -1 === v && (v = e4), -1 === A && (A = t4));
    }
    1 === u && 0 === f && (t3.pat || n.pq("parsed first PAT", o, 100), t3.pat = p, t3.currentProgram = v, t3.currentPmtPid = A, t3.hasPAT = true);
  }
}, 51660: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(77231), a2 = i2(4624), s2 = i2(9705);
  const n = "src/avformat/formats/mpegts/function/parsePES.ts";
  function o(e3) {
    const t3 = e3.data, i3 = t3[3], o2 = t3[4] << 8 | t3[5];
    let c = 0, d2 = 0, h = 0;
    if (188 !== i3 && 190 !== i3 && 191 !== i3 && 240 !== i3 && 241 !== i3 && 255 !== i3 && 242 !== i3 && 248 !== i3) {
      let i4 = r2.Dh, l = r2.Dh;
      for (; ; ) {
        if (6 + d2 >= t3.length) return s2.LR;
        if (h = t3[6 + d2], 255 !== h) break;
        d2++;
      }
      if (64 == (192 & h) && (d2 += 2, h = t3[6 + d2]), 32 == (224 & h)) c += 5, i4 = i4 = BigInt(Math.floor(536870912 * (14 & t3[6 + d2]) + 4194304 * (255 & t3[7 + d2]) + 16384 * (254 & t3[8 + d2]) + 128 * (255 & t3[9 + d2]) + (254 & t3[10 + d2]) / 2)), 16 & h ? (l = BigInt(Math.floor(536870912 * (14 & t3[11 + d2]) + 4194304 * (255 & t3[12 + d2]) + 16384 * (254 & t3[13 + d2]) + 128 * (255 & t3[14 + d2]) + (254 & t3[15 + d2]) / 2)), c += 5) : l = i4;
      else if (128 == (192 & h)) {
        const e4 = (192 & t3[7 + d2]) >>> 6;
        c = 3 + t3[8 + d2], 2 !== e4 && 3 !== e4 || (i4 = BigInt(Math.floor(536870912 * (14 & t3[9 + d2]) + 4194304 * (255 & t3[10 + d2]) + 16384 * (254 & t3[11 + d2]) + 128 * (255 & t3[12 + d2]) + (254 & t3[13 + d2]) / 2)), l = 3 === e4 ? BigInt(Math.floor(536870912 * (14 & t3[14 + d2]) + 4194304 * (255 & t3[15 + d2]) + 16384 * (254 & t3[16 + d2]) + 128 * (255 & t3[17 + d2]) + (254 & t3[18 + d2]) / 2)) : i4);
      } else {
        if (15 !== h) return a2.z3("invalid data", n, 122), s2.LR;
        c = 1;
      }
      e3.dts = l, e3.pts = i4;
      const u = 6 + d2 + c;
      let f = 0;
      if (0 !== o2) {
        if (o2 < d2 + c) return a2.z3("Malformed PES: PES_packet_length < 3 + PES_header_data_length", n, 134), s2.LR;
        f = o2 - (d2 + c), u + (t3.byteLength - u) != o2 + 6 && (a2.R8("PES packet size mismatch", n, 139), e3.flags |= 2);
      } else f = t3.byteLength - u;
      e3.payload = t3.subarray(u, u + f);
    } else if ((188 === i3 || 191 === i3 || 240 === i3 || 241 === i3 || 255 === i3 || 242 === i3 || 248 === i3) && 6 === e3.streamId) {
      const i4 = 6;
      let r3 = 0;
      r3 = 0 !== o2 ? o2 : t3.byteLength - i4, e3.payload = t3.subarray(i4, i4 + r3);
    }
    return 0;
  }
}, 39144: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(6403);
  function a2(e3) {
    let t3 = new Uint8Array(e3.totalLength);
    for (let i4 = 0, r3 = 0; i4 < e3.slices.length; i4++) {
      let a4 = e3.slices[i4];
      t3.set(a4, r3), r3 += a4.byteLength;
    }
    const i3 = t3[3], a3 = new r2.xf();
    return a3.data = t3, a3.pid = e3.pid, a3.streamId = i3, a3.streamType = e3.streamType, a3.pos = e3.pos, a3.randomAccessIndicator = e3.randomAccessIndicator, a3.flags = 0, a3;
  }
}, 65945: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(31865), a2 = i2(6403), s2 = i2(92647), n = i2(4624);
  const o = "src/avformat/formats/mpegts/function/parsePMT.ts";
  function c(e3, t3) {
    let i3 = 0;
    const c2 = new r2.A((0, s2.A)(Uint8Array, e3.slices), true), d2 = c2.readUint8();
    2 !== d2 && n.z3("parse PMT: table_id ".concat(d2, " is not corresponded to PAT!"), o, 40);
    const h = 4095 & c2.readUint16(), l = c2.readUint16();
    i3 = c2.readUint8();
    const u = i3 >> 1 & 31, f = 1 & i3, p = c2.readUint8();
    let m;
    if (c2.readUint8(), 1 === f && 0 === p) m = new a2.I4(), m.programNumber = l, m.versionNumber = u, t3.program2Pmt.set(l, m), t3.hasPMT = true;
    else if (m = t3.program2Pmt.get(l), !m) return void n.z3("can not found PMT in mpegts context", o, 68);
    m.pcrPid = 8191 & c2.readUint16();
    const g = 4095 & c2.readUint16();
    c2.skip(g);
    let v = Number(BigInt.asIntN(32, c2.getPos())) + (h - 9 - g - 4);
    for (; c2.getPos() < v; ) {
      const e4 = c2.readUint8(), t4 = 8191 & c2.readUint16(), i4 = 4095 & c2.readUint16();
      if (m.pid2StreamType.set(t4, e4), i4 > 0) {
        const e5 = [], r3 = Number(BigInt.asIntN(32, c2.getPos())) + i4;
        for (; c2.getPos() < r3; ) {
          const t5 = new a2.kJ();
          t5.tag = c2.readUint8();
          const i5 = c2.readUint8();
          i5 > 0 && (t5.buffer = c2.readBuffer(i5)), e5.push(t5);
        }
        m.pid2ESDescriptor.set(t4, e5);
      }
    }
    l === t3.currentProgram && (t3.pmt || n.pq("parsed first PMT", o, 111), t3.pmt = m);
  }
}, 43383: (e2, t2, i2) => {
  function r2(e3, t3) {
  }
  i2.d(t2, { A: () => r2 });
}, 63599: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(20549), a2 = i2(65945), s2 = i2(43383);
  function n(e3, t3, i3) {
    0 === e3 ? (0, r2.A)(t3, i3) : e3 === i3.currentPmtPid ? (0, a2.A)(t3, i3) : i3.pmt && 134 === i3.pmt.pid2StreamType.get(e3) && (0, s2.A)(t3, i3);
  }
}, 53783: (e2, t2, i2) => {
  i2.d(t2, { $: () => l, q: () => h });
  var r2 = i2(27274), a2 = i2(89564), s2 = i2(4624), n = i2(6403), o = i2(31239), c = i2(20576);
  const d2 = "src/avformat/formats/mpegts/impegts.ts";
  async function h(e3) {
    let t3;
    try {
      t3 = await e3.peekBuffer(r2.pm);
    } catch (i3) {
      -1048576 !== e3.error && (t3 = await e3.peekBuffer(e3.remainingLength()));
    }
    if (t3 && t3.length >= r2.ZT) {
      const e4 = (0, a2.A)(t3, r2.ZT, false), i3 = (0, a2.A)(t3, r2.VG, false), n2 = (0, a2.A)(t3, r2.eR, false);
      let o2 = (0, c.A)([e4, n2, i3]);
      t3.length < r2.pm && (o2 += r2.hY);
      let h2 = r2.ZT;
      return e4 > o2 ? h2 = r2.ZT : i3 > o2 ? h2 = r2.VG : n2 > o2 && (h2 = r2.eR), s2.Yz("got ts packet size: ".concat(h2), d2, 70), h2;
    }
    return 0;
  }
  async function l(e3, t3) {
    const i3 = e3.getPos();
    let a3 = 0;
    t3.tsPacketSize === r2.VG && await e3.skip(4);
    const c2 = await e3.readUint8();
    71 !== c2 && s2.h2("found syncByte not 0x47, value: ".concat(c2.toString(16)), d2, 90);
    const h2 = new n.am();
    h2.pos = i3, a3 = await e3.readUint16(), h2.payloadUnitStartIndicator = a3 >> 14 & 1, h2.transportPriority = a3 >> 13 & 1, h2.pid = 8191 & a3, a3 = await e3.readUint8(), h2.adaptationFieldControl = a3 >> 4 & 3, h2.continuityCounter = 15 & a3;
    let l2 = 4;
    if (2 === h2.adaptationFieldControl || 3 === h2.adaptationFieldControl) {
      const i4 = await e3.readUint8();
      if (5 + i4 === r2.ZT) return (0, o.A)(await e3.readBuffer(i4), h2), t3.tsPacketSize === r2.eR && await e3.skip(16), h2;
      i4 > 0 && (0, o.A)(await e3.readBuffer(i4), h2), l2 = 5 + i4;
    }
    return 1 !== h2.adaptationFieldControl && 3 !== h2.adaptationFieldControl || (h2.payload = await e3.readBuffer(r2.ZT - l2)), t3.tsPacketSize === r2.eR && await e3.skip(16), h2;
  }
}, 10662: (e2, t2, i2) => {
  i2.d(t2, { V: () => r2 });
  const r2 = 1e5;
}, 27274: (e2, t2, i2) => {
  i2.d(t2, { $x: () => d2, GV: () => n, VG: () => a2, ZT: () => s2, eR: () => r2, hY: () => c, pm: () => o });
  const r2 = 204, a2 = 192, s2 = 188, n = 204, o = 8192, c = 5, d2 = { 15: [1, 86018], 17: [1, 86018], 3: [1, 86017], 4: [1, 86017], 1: [0, 2], 2: [0, 2], 27: [0, 27], 16: [0, 12], 36: [0, 173], 51: [0, 196], 129: [1, 86019], 135: [1, 86056], 130: [1, 86020] };
}, 6403: (e2, t2, i2) => {
  i2.d(t2, { Cd: () => h, I4: () => u, am: () => c, kJ: () => l, pi: () => d2, xf: () => f });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(77231);
  class o {
    constructor() {
      (0, r2.A)(this, "discontinuityIndicator", 0), (0, r2.A)(this, "randomAccessIndicator", 0), (0, r2.A)(this, "elementaryStreamPriorityIndicator", 0), (0, r2.A)(this, "pcrFlag", 0), (0, r2.A)(this, "opcrFlag", 0), (0, r2.A)(this, "splicingPointFlag", 0), (0, r2.A)(this, "transportPrivateDataFlag", 0), (0, r2.A)(this, "adaptationFieldExtensionFlag", 0), (0, r2.A)(this, "pcr", BigInt(0)), (0, r2.A)(this, "opcr", BigInt(0)), (0, r2.A)(this, "spliceCountDown", 0), (0, r2.A)(this, "transportPrivateData", null), (0, r2.A)(this, "extension", null);
    }
  }
  class c {
    constructor() {
      (0, r2.A)(this, "pos", n.Dh), (0, r2.A)(this, "payloadUnitStartIndicator", 0), (0, r2.A)(this, "transportPriority", 0), (0, r2.A)(this, "pid", n.N_), (0, r2.A)(this, "adaptationFieldControl", 0), (0, r2.A)(this, "continuityCounter", 0), (0, r2.A)(this, "transportScramblingControl", 0), (0, r2.A)(this, "adaptationFieldInfo", new o()), (0, r2.A)(this, "payload", null);
    }
  }
  class d2 {
    constructor() {
      (0, r2.A)(this, "slices", []), (0, r2.A)(this, "totalLength", 0), (0, r2.A)(this, "expectedLength", n.N_), (0, r2.A)(this, "randomAccessIndicator", 0), (0, r2.A)(this, "pid", n.N_), (0, r2.A)(this, "streamType", 0), (0, r2.A)(this, "pos", n.Dh);
    }
  }
  class h {
    constructor() {
      (0, r2.A)(this, "versionNumber", 0), (0, r2.A)(this, "networkPid", n.N_), (0, r2.A)(this, "program2PmtPid", new (s2())());
    }
  }
  class l {
    constructor() {
      (0, r2.A)(this, "tag", void 0), (0, r2.A)(this, "buffer", void 0);
    }
  }
  class u {
    constructor() {
      (0, r2.A)(this, "versionNumber", 0), (0, r2.A)(this, "programNumber", 0), (0, r2.A)(this, "pcrPid", 0), (0, r2.A)(this, "pid2StreamType", new (s2())()), (0, r2.A)(this, "pid2ESDescriptor", new (s2())());
    }
  }
  class f {
    constructor() {
      (0, r2.A)(this, "pid", n.N_), (0, r2.A)(this, "streamType", 0), (0, r2.A)(this, "streamId", n.N_), (0, r2.A)(this, "dts", n.Dh), (0, r2.A)(this, "pts", n.Dh), (0, r2.A)(this, "pos", n.Dh), (0, r2.A)(this, "payload", null), (0, r2.A)(this, "data", null), (0, r2.A)(this, "randomAccessIndicator", 0), (0, r2.A)(this, "flags", void 0);
    }
  }
}, 37805: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(134), a2 = i2(60264), s2 = i2(92647);
  class n {
    constructor() {
      (0, r2.A)(this, "buffer", void 0), (0, r2.A)(this, "pos", void 0), (0, r2.A)(this, "end", void 0), (0, r2.A)(this, "ended", void 0), this.buffer = new Uint8Array(102400), this.pos = 0, this.end = 0, this.ended = false;
    }
    async read(e3) {
      if (this.ended && this.pos >= this.end) return;
      const t3 = [];
      if (this.pos < this.end - 4) {
        let e4 = a2.Ky(this.buffer.subarray(this.pos, this.end - 4), 3);
        if (e4.offset > -1) {
          const t4 = this.buffer.slice(this.pos, this.pos + e4.offset);
          return this.pos += e4.offset, t4;
        }
        t3.push(this.buffer.slice(this.pos, this.end - 4)), this.buffer.copyWithin(0, this.end - 4, this.end), this.pos = 0, this.end = 4;
      }
      for (; ; ) {
        if (!this.ended && this.end < this.buffer.length) try {
          const t4 = await e3.readToBuffer(this.buffer.length - this.end, this.buffer.subarray(this.end));
          this.end += t4;
        } catch (e4) {
          if (this.ended = true, this.pos >= this.end) return t3.length ? (0, s2.A)(Uint8Array, t3) : null;
        }
        let i3 = a2.Ky(this.buffer.subarray(this.pos, this.end - 4), t3.length ? 0 : 3);
        if (i3.offset > -1) return t3.push(this.buffer.slice(this.pos, this.pos + i3.offset)), this.pos += i3.offset, (0, s2.A)(Uint8Array, t3);
        if (this.ended) return t3.push(this.buffer.slice(this.pos, this.end)), this.pos = this.end = 0, (0, s2.A)(Uint8Array, t3);
        t3.push(this.buffer.slice(this.pos, this.end - 4)), this.buffer.copyWithin(0, this.end - 4, this.end), this.pos = 0, this.end = 4;
      }
    }
    reset() {
      this.pos = 0, this.end = 0, this.ended = false;
    }
  }
}, 38743: (e2, t2, i2) => {
  i2.d(t2, { B: () => o, h: () => c });
  var r2 = i2(134), a2 = i2(77231), s2 = i2(50011);
  class n {
    constructor() {
      (0, r2.A)(this, "list", void 0), this.list = [];
    }
    read(e3, t3) {
      for (let i3 = 0; i3 < t3; i3++) {
        const t4 = e3.readUint32();
        this.list.push(e3.readString(t4));
      }
    }
    write(e3) {
      for (let t3 = 0; t3 < this.list.length; t3++) {
        const i3 = s2.encode(this.list[t3]);
        e3.writeUint32(i3.length), e3.writeBuffer(i3);
      }
    }
    addComment(e3) {
      this.list.push(e3);
    }
  }
  class o {
    constructor() {
      (0, r2.A)(this, "capturePattern", void 0), (0, r2.A)(this, "streamStructureVersion", void 0), (0, r2.A)(this, "headerTypeFlag", void 0), (0, r2.A)(this, "granulePosition", void 0), (0, r2.A)(this, "serialNumber", void 0), (0, r2.A)(this, "pageSequenceNumber", void 0), (0, r2.A)(this, "crcCheckSum", void 0), (0, r2.A)(this, "numberPageSegments", void 0), (0, r2.A)(this, "segmentTable", void 0), (0, r2.A)(this, "payload", void 0), (0, r2.A)(this, "pos", void 0), this.reset();
    }
    reset() {
      this.capturePattern = "OggS", this.streamStructureVersion = 0, this.headerTypeFlag = 0, this.granulePosition = a2.Dh, this.serialNumber = 0, this.pageSequenceNumber = 0, this.crcCheckSum = 0, this.numberPageSegments = 0, this.segmentTable = [], this.pos = BigInt(0);
    }
    async read(e3) {
      this.pos = e3.getPos(), await this.readPageHeader(e3);
      const t3 = this.segmentTable.reduce((e4, t4) => e4 + t4, 0);
      t3 && (this.payload = await e3.readBuffer(t3));
    }
    async readPageHeader(e3) {
      if (this.capturePattern = await e3.readString(4), this.streamStructureVersion = await e3.readUint8(), this.headerTypeFlag = await e3.readUint8(), this.granulePosition = await e3.readUint64(), this.serialNumber = await e3.readUint32(), this.pageSequenceNumber = await e3.readUint32(), this.crcCheckSum = await e3.readUint32(), this.numberPageSegments = await e3.readUint8(), this.numberPageSegments) for (let t3 = 0; t3 < this.numberPageSegments; t3++) {
        const t4 = await e3.readUint8();
        this.segmentTable.push(t4);
      }
    }
    write(e3) {
      if (this.pos = e3.getPos(), e3.writeString(this.capturePattern), e3.writeUint8(this.streamStructureVersion), e3.writeUint8(this.headerTypeFlag), e3.writeUint64(this.granulePosition), e3.writeUint32(this.serialNumber), e3.writeUint32(this.pageSequenceNumber), e3.writeUint32(this.crcCheckSum), this.payload) {
        this.numberPageSegments = Math.floor(this.payload.length / 255) + 1;
        const t3 = this.payload.length % 255;
        e3.writeUint8(this.numberPageSegments);
        for (let t4 = 0; t4 < this.numberPageSegments - 1; t4++) e3.writeUint8(255);
        e3.writeUint8(t3), e3.writeBuffer(this.payload);
      } else e3.writeUint8(0);
    }
  }
  class c {
    constructor() {
      (0, r2.A)(this, "streamIndex", void 0), (0, r2.A)(this, "signature", void 0), (0, r2.A)(this, "vendorStringLength", void 0), (0, r2.A)(this, "vendorString", void 0), (0, r2.A)(this, "userCommentListLength", void 0), (0, r2.A)(this, "comments", void 0), this.vendorString = "v0.10.0-alpha.3-7-gb47705d4", this.vendorStringLength = this.vendorString.length, this.userCommentListLength = 0, this.comments = new n();
    }
    read(e3) {
      this.vendorStringLength = e3.readUint32(), this.vendorString = e3.readString(this.vendorStringLength), this.userCommentListLength = e3.readUint32(), this.userCommentListLength && this.comments.read(e3, this.userCommentListLength);
    }
    write(e3) {
      const t3 = s2.encode(this.vendorString);
      e3.writeUint32(t3.length), e3.writeBuffer(t3), e3.writeUint32(this.comments.list.length), this.comments.write(e3);
    }
    addComment(e3) {
      this.comments.addComment(e3);
    }
    setCodec(e3) {
    }
  }
}, 54712: (e2, t2, i2) => {
  i2.d(t2, { o: () => o, q: () => n });
  var r2 = i2(134), a2 = i2(38743);
  class s2 {
    constructor() {
      (0, r2.A)(this, "streamCount", void 0), (0, r2.A)(this, "coupledStreamCount", void 0), (0, r2.A)(this, "mapping", void 0), this.streamCount = 1, this.coupledStreamCount = 0, this.mapping = new Uint8Array(1);
    }
    read(e3) {
      this.streamCount = e3.readUint8(), this.coupledStreamCount = e3.readUint8(), this.mapping = e3.readBuffer(this.streamCount + this.coupledStreamCount);
    }
    write(e3) {
      e3.writeUint8(this.streamCount), e3.writeUint8(this.coupledStreamCount), e3.writeBuffer(this.mapping);
    }
  }
  class n {
    constructor() {
      (0, r2.A)(this, "streamIndex", void 0), (0, r2.A)(this, "signature", void 0), (0, r2.A)(this, "version", void 0), (0, r2.A)(this, "channels", void 0), (0, r2.A)(this, "preSkip", void 0), (0, r2.A)(this, "sampleRate", void 0), (0, r2.A)(this, "outputGain", void 0), (0, r2.A)(this, "channelMappingFamily", void 0), (0, r2.A)(this, "channelMappingTable", void 0), this.signature = "OpusHead", this.version = 1, this.channels = 1, this.preSkip = 0, this.sampleRate = 48e3, this.outputGain = 0, this.channelMappingFamily = 0, this.channelMappingTable = new s2();
    }
    read(e3) {
      this.signature = e3.readString(8), this.version = e3.readUint8(), this.channels = e3.readUint8(), this.preSkip = e3.readUint16(), this.sampleRate = e3.readUint32(), this.outputGain = e3.readInt16(), this.channelMappingFamily = e3.readUint8(), 0 !== this.channelMappingFamily && this.channelMappingTable.read(e3);
    }
    write(e3) {
      e3.writeString(this.signature), e3.writeUint8(this.version), e3.writeUint8(this.channels), e3.writeUint16(this.preSkip), e3.writeUint32(this.sampleRate), e3.writeInt16(this.outputGain), e3.writeUint8(this.channelMappingFamily), 0 !== this.channelMappingFamily && this.channelMappingTable.write(e3);
    }
    setCodec(e3) {
      this.sampleRate = e3.sampleRate, this.channels = e3.chLayout.nbChannels, this.channelMappingFamily = e3.format;
    }
  }
  class o extends a2.h {
    constructor() {
      super(), this.signature = "OpusTags";
    }
    read(e3) {
      this.signature = e3.readString(8), super.read(e3);
    }
    write(e3) {
      e3.writeString(this.signature), super.write(e3);
    }
    addComment(e3) {
      this.comments.addComment(e3);
    }
    setCodec(e3) {
    }
  }
}, 87400: (e2, t2, i2) => {
  i2.d(t2, { GM: () => c, mS: () => o, ol: () => n });
  var r2 = i2(134), a2 = i2(38743);
  i2(95335), i2(34677);
  const s2 = { album: "album", artist: "artist", description: "description", encoder: "encoder", title: "title", tracknumber: "track", date: "date", genre: "genre", comment: "comment", albumartist: "albumArtist", composer: "composer", performer: "performer", discnumber: "disc", organization: "vendor", copyright: "copyright", license: "license", isrc: "isrc", lyrics: "lyrics", language: "language", label: "vendor", script: "lyrics", encoded_by: "vendor" };
  function n(e3, t3) {
    e3 && e3.forEach((e4) => {
      const i3 = e4.split("=");
      if (2 === i3.length) {
        const e5 = i3[0].trim().toLowerCase(), r3 = i3[1].trim();
        s2[e5] ? t3[s2[e5]] = r3 : t3[e5.toLowerCase()] = r3;
      }
    });
  }
  class o {
    constructor(e3 = "vorbis") {
      (0, r2.A)(this, "streamIndex", void 0), (0, r2.A)(this, "packetType", void 0), (0, r2.A)(this, "signature", void 0), (0, r2.A)(this, "version", void 0), (0, r2.A)(this, "channels", void 0), (0, r2.A)(this, "sampleRate", void 0), (0, r2.A)(this, "bitrateMaximum", void 0), (0, r2.A)(this, "bitrateNominal", void 0), (0, r2.A)(this, "bitrateMinimum", void 0), (0, r2.A)(this, "blocksize0", void 0), (0, r2.A)(this, "blocksize1", void 0), (0, r2.A)(this, "framingFlag", void 0), this.signature = e3, this.version = 0, this.channels = 1, this.sampleRate = 48e3, this.bitrateMaximum = 0, this.bitrateNominal = 0, this.bitrateMinimum = 0, this.blocksize0 = 2048, this.blocksize1 = 256;
    }
    read(e3) {
      this.packetType = e3.readUint8(), this.signature = e3.readString(6), this.version = e3.readUint32(), this.channels = e3.readUint8(), this.sampleRate = e3.readInt32(), this.bitrateMaximum = e3.readInt32(), this.bitrateNominal = e3.readInt32(), this.bitrateMinimum = e3.readInt32();
      const t3 = 255 & e3.readUint8();
      this.blocksize0 = Math.pow(2, t3 >>> 4), this.blocksize1 = Math.pow(2, 15 & t3), this.framingFlag = e3.readUint8();
    }
    write(e3) {
      e3.writeUint8(1), e3.writeString(this.signature), e3.writeUint32(this.version), e3.writeUint8(this.channels), e3.writeInt32(this.sampleRate), e3.writeInt32(this.bitrateMaximum), e3.writeInt32(this.bitrateNominal), e3.writeInt32(this.bitrateMinimum), e3.writeUint8(Math.log2(this.blocksize0) << 4 | Math.log2(this.blocksize1)), e3.writeUint8(1);
    }
    setCodec(e3) {
      this.sampleRate = e3.sampleRate, this.channels = e3.chLayout.nbChannels;
    }
  }
  class c extends a2.h {
    constructor(e3 = "vorbis") {
      super(), (0, r2.A)(this, "packetType", void 0), (0, r2.A)(this, "framingFlag", void 0), this.signature = e3, this.packetType = 1, this.framingFlag = 1;
    }
    read(e3) {
      this.packetType = e3.readUint8(), this.signature = e3.readString(6), super.read(e3), "vorbis" === this.signature && (this.framingFlag = e3.readUint8());
    }
    write(e3) {
      e3.writeUint8(this.packetType), e3.writeString(this.signature), super.write(e3), "vorbis" === this.signature && e3.writeUint8(this.framingFlag);
    }
    addComment(e3) {
      this.comments.addComment(e3);
    }
    setCodec(e3) {
    }
  }
}, 35531: (e2, t2, i2) => {
  i2.d(t2, { LV: () => v, ML: () => y, nF: () => A, yr: () => g });
  var r2 = i2(61499), a2 = i2(63939), s2 = i2(50932), n = i2(4624), o = i2(9705), c = i2(53260), d2 = i2(95644), h = i2(37837), l = i2(14686), u = i2(39381), f = i2(99991);
  const p = "src/avformat/formats/riff/iriff.ts";
  function m(e3, t3) {
    let i3 = c.gi[e3];
    return i3 ? (65541 === i3 ? i3 = (0, d2.uU)(t3, false, false, -2) : 65557 === i3 && (i3 = (0, d2.uU)(t3, true, false, 0)), 69633 === i3 && 8 === t3 && (i3 = 69676), i3) : 0;
  }
  async function g(e3, t3, i3) {
    if (i3 < 14) return n.z3("wav format size < 14", p, 49), o.LR;
    s2.M[15](t3, 1);
    const r3 = await e3.readUint16();
    let c2 = await e3.readUint16();
    const d3 = await e3.readUint32();
    let f2 = 8 * await e3.readUint32();
    const g2 = await e3.readUint16();
    if (s2.M[15](t3 + 136, d3), s2.M[15](t3 + 140, g2), 14 === i3 ? s2.M[15](t3 + 40, 8) : s2.M[15](t3 + 40, await e3.readUint16()), 65534 === r3 ? s2.M[8](t3 + 8, 0) : (s2.M[8](t3 + 8, r3), s2.M[15](t3 + 4, m(r3, a2.f[15](t3 + 40)))), i3 >= 18 && 357 !== r3) {
      let n2 = await e3.readUint16();
      i3 -= 18, n2 = Math.min(i3, n2), n2 >= 22 && 65534 === r3 && (await e3.skip(22), n2 -= 22, i3 -= 22), n2 > 0 && (s2.M[20](t3 + 12, (0, h.sY)(n2)), s2.M[15](t3 + 16, n2), await e3.readBuffer(n2, (0, l.JW)(a2.f[20](t3 + 12), n2)), i3 -= n2), i3 > 0 && await e3.skip(i3);
    } else if (357 === r3 && i3 >= 32) {
      i3 -= 4, s2.M[20](t3 + 12, (0, h.sY)(i3)), s2.M[15](t3 + 16, i3), await e3.readBuffer(i3, (0, l.JW)(a2.f[20](t3 + 12), i3));
      const r4 = u.E3(a2.f[20](t3 + 12) + 4);
      if (s2.M[15](t3 + 136, u.Y0(a2.f[20](t3 + 12) + 12)), c2 = 0, f2 = 0, i3 < 8 + 20 * r4) return o.LR;
      for (let e4 = 0; e4 < r4; e4++) c2 += a2.f[2](a2.f[20](t3 + 12) + (8 + 20 * e4 + 17));
    }
    return s2.M[17](t3 + 32, BigInt(f2)), a2.f[15](t3 + 136) < 0 ? (n.z3("Invalid sample rate: ".concat(a2.f[15](t3 + 136)), p, 129), o.LR) : (86065 === a2.f[15](t3 + 4) && (c2 = 0, s2.M[15](t3 + 136, 0)), 69643 == a2.f[15](t3 + 4) && a2.f[15](t3 + 136) && s2.M[15](t3 + 40, Number(BigInt.asIntN(32, a2.f[17](t3 + 32))) / a2.f[15](t3 + 136)), c2 != a2.f[15](t3 + 116) && (s2.M[15](t3 + 112, 0), s2.M[15](t3 + 116, c2)), 0);
  }
  async function v(e3, t3, i3) {
    const r3 = e3.getPos() + t3;
    for (; e3.getPos() < r3; ) {
      const t4 = await e3.readString(4), r4 = await e3.readUint32(), a3 = await e3.readString(r4);
      i3[t4] = a3, r4 % 2 && await e3.skip(1);
    }
  }
  async function A(e3, t3) {
    const i3 = await e3.readUint32();
    return t3.codecpar.width = await e3.readUint32(), t3.codecpar.height = await e3.readUint32(), await e3.skip(2), t3.codecpar.bitsPerCodedSample = await e3.readUint16(), t3.codecpar.codecTag = await e3.readUint32(), await e3.skip(20), i3;
  }
  async function y(e3, t3, i3) {
    if (i3 < 14) return n.z3("wav header size < 14", p, 197), o.LR;
    let s3, d3, g2;
    if ((0, f.bl)(t3.codecpar[r2.o9] + 112), s3 = await e3.readUint16(), (357 !== s3 || e3.isBigEndian()) && (d3 = await e3.readUint16(), t3.codecpar.sampleRate = await e3.readUint32(), g2 = 8 * await e3.readUint32(), t3.codecpar.blockAlign = await e3.readUint16()), t3.codecpar.bitsPerCodedSample = 14 === i3 ? 8 : await e3.readUint16(), 65534 === s3 ? t3.codecpar.codecTag = 0 : (t3.codecpar.codecTag = s3, t3.codecpar.codecId = m(s3, t3.codecpar.bitsPerCodedSample)), i3 >= 18 && 357 != s3) {
      let a3 = await e3.readUint16();
      if (e3.isBigEndian()) return n.z3("WAVEFORMATEX support for RIFX files", p, 229), o.LR;
      i3 -= 18, a3 = Math.min(a3, i3), a3 >= 22 && 65534 == s3 && (await (async function(e4, t4) {
        const i4 = await e4.readUint16();
        i4 && (t4.codecpar.bitsPerCodedSample = i4);
        const a4 = await e4.readUint32();
        (0, f.ML)(t4.codecpar[r2.o9] + 112, BigInt(a4));
        const s4 = (await e4.readHex(16)).toLocaleUpperCase();
        var o2;
        s4.slice(4) === c.IC || s4.slice(4) === c.mO || s4.slice(4) === c.dd ? (t4.codecpar.codecTag = await e4.readUint32(), t4.codecpar.codecId = m(t4.codecpar.codecTag, t4.codecpar.bitsPerCodedSample)) : (t4.codecpar.codecId = (o2 = s4, c.t6[o2.toLocaleUpperCase()] || 0), t4.codecpar.codecId || n.R8("unknown subformat: ".concat(s4), p, 190));
      })(e3, t3), a3 -= 22, i3 -= 22), a3 > 0 && (t3.codecpar.extradata && (0, h.Eb)(t3.codecpar.extradata), t3.codecpar.extradataSize = a3, t3.codecpar.extradata = (0, h.sY)(a3), await e3.readBuffer(a3, (0, l.JW)(t3.codecpar.extradata, a3)), i3 -= a3), i3 > 0 && await e3.skip(i3);
    } else if (357 == s3 && i3 >= 32) {
      i3 -= 4, t3.codecpar.extradata && (0, h.Eb)(t3.codecpar.extradata), t3.codecpar.extradataSize = i3, t3.codecpar.extradata = (0, h.sY)(i3), await e3.readBuffer(i3, (0, l.JW)(t3.codecpar.extradata, i3));
      const r3 = u.E3(t3.codecpar.extradata + 4);
      if (t3.codecpar.sampleRate = u.Y0(t3.codecpar.extradata + 12), i3 < 8 + 20 * r3) return o.LR;
      for (let e4 = 0; e4 < r3; e4++) d3 += a2.f[2](t3.codecpar.extradata + (8 + 20 * e4 + 17));
    }
    return t3.codecpar.bitrate = BigInt(0 | g2), t3.codecpar.sampleRate < 0 ? (n.z3("Invalid sample rate ".concat(t3.codecpar.sampleRate), p, 272), o.LR) : (86065 === t3.codecpar.codecId && (d3 = 0, t3.codecpar.sampleRate = 0), 69643 === t3.codecpar.codecId && t3.codecpar.sampleRate && (t3.codecpar.bitsPerCodedSample = Number(t3.codecpar.bitrate) / t3.codecpar.sampleRate), d3 !== t3.codecpar.chLayout.nbChannels && ((0, f.bl)(t3.codecpar[r2.o9] + 112), t3.codecpar.chLayout.order = 0, t3.codecpar.chLayout.nbChannels = d3), 0);
  }
}, 53260: (e2, t2, i2) => {
  i2.d(t2, { IC: () => o, dd: () => n, gi: () => a2, mO: () => c, nz: () => s2, t6: () => d2 });
  var r2 = i2(79682);
  const a2 = { 1: 65541, 2: 69638, 3: 65557, 6: 65543, 7: 65542, 10: 86052, 16: 69664, 17: 69633, 23: 69664, 32: 69646, 34: 86037, 49: 86046, 50: 86046, 56: 73728, 66: 86068, 69: 69643, 20: 69643, 64: 69643, 80: 86016, 85: 86017, 87: 73728, 88: 73729, 97: 69635, 98: 69634, 100: 69643, 105: 69633, 117: 86079, 131: 86069, 255: 86018, 273: 86068, 304: 86057, 309: 86106, 352: 86023, 353: 86024, 354: 86053, 355: 86054, 357: 86095, 358: 86096, 384: 86116, 512: 69644, 533: 86022, 534: 86022, 624: 86047, 654: 86111, 655: 69660, 848: 86114, 1025: 86043, 1026: 86074, 1280: 86081, 1281: 86081, 5376: 86046, 5377: 86037, 5632: 86018, 5634: 86065, 8192: 86019, 8193: 86020, 8264: 86085, 8738: 86069, 27765: 65542, 28781: 86018, 16707: 86018, 16768: 86116, 22858: 81922, 29338: 86069, 33152: 86116, 41216: 86068, 41222: 86018, 41225: 86051, 61868: 86028, 65534: 86112, 21318: 69645, 22127: 86021 }, s2 = { [(0, r2.A)("H261")]: 3, [(0, r2.A)("H263")]: 4, [(0, r2.A)("X263")]: 4, [(0, r2.A)("T263")]: 4, [(0, r2.A)("L263")]: 4, [(0, r2.A)("VX1K")]: 4, [(0, r2.A)("ZyGo")]: 4, [(0, r2.A)("M263")]: 4, [(0, r2.A)("lsvm")]: 4, [(0, r2.A)("I263")]: 20, [(0, r2.A)("U263")]: 4, [(0, r2.A)("VSM4")]: 4, [(0, r2.A)("H264")]: 27, [(0, r2.A)("h264")]: 27, [(0, r2.A)("X264")]: 27, [(0, r2.A)("x264")]: 27, [(0, r2.A)("avc1")]: 27, [(0, r2.A)("DAVC")]: 27, [(0, r2.A)("SMV2")]: 27, [(0, r2.A)("VSSH")]: 27, [(0, r2.A)("Q264")]: 27, [(0, r2.A)("V264")]: 27, [(0, r2.A)("GAVC")]: 27, [(0, r2.A)("UMSV")]: 27, [(0, r2.A)("tshd")]: 27, [(0, r2.A)("INMC")]: 27, [(0, r2.A)("FMP4")]: 12, [(0, r2.A)("DIVX")]: 12, [(0, r2.A)("DX50")]: 12, [(0, r2.A)("XVID")]: 12, [(0, r2.A)("MP4S")]: 12, [(0, r2.A)("M4S2")]: 12, [(0, r2.A)("DIVX")]: 12, 4: 12, [(0, r2.A)("ZMP4")]: 12, [(0, r2.A)("DIV1")]: 12, [(0, r2.A)("BLZ0")]: 12, [(0, r2.A)("mp4v")]: 12, [(0, r2.A)("UMP4")]: 12, [(0, r2.A)("WV1F")]: 12, [(0, r2.A)("SEDG")]: 12, [(0, r2.A)("RMP4")]: 12, [(0, r2.A)("3IV2")]: 12, [(0, r2.A)("WAWV")]: 12, [(0, r2.A)("FFDS")]: 12, [(0, r2.A)("FVFW")]: 12, [(0, r2.A)("DCOD")]: 12, [(0, r2.A)("MVXM")]: 12, [(0, r2.A)("PM4V")]: 12, [(0, r2.A)("SMP4")]: 12, [(0, r2.A)("DXGM")]: 12, [(0, r2.A)("VIDM")]: 12, [(0, r2.A)("M4T3")]: 12, [(0, r2.A)("GEOX")]: 12, [(0, r2.A)("G264")]: 12, [(0, r2.A)("HDX4")]: 12, [(0, r2.A)("DM4V")]: 12, [(0, r2.A)("DMK2")]: 12, [(0, r2.A)("DYM4")]: 12, [(0, r2.A)("DIGI")]: 12, [(0, r2.A)("EPHV")]: 12, [(0, r2.A)("EM4A")]: 12, [(0, r2.A)("M4CC")]: 12, [(0, r2.A)("SN40")]: 12, [(0, r2.A)("VSPX")]: 12, [(0, r2.A)("ULDX")]: 12, [(0, r2.A)("GEOV")]: 12, [(0, r2.A)("SIPP")]: 12, [(0, r2.A)("SM4V")]: 12, [(0, r2.A)("XVIX")]: 12, [(0, r2.A)("DreX")]: 12, [(0, r2.A)("QMP4")]: 12, [(0, r2.A)("PLV1")]: 12, [(0, r2.A)("GLV4")]: 12, [(0, r2.A)("GMP4")]: 12, [(0, r2.A)("MNM4")]: 12, [(0, r2.A)("GTM4")]: 12, [(0, r2.A)("MPG4")]: 14, [(0, r2.A)("MP41")]: 14, [(0, r2.A)("MP42")]: 15, [(0, r2.A)("DIV2")]: 15, [(0, r2.A)("MP43")]: 16, [(0, r2.A)("DIV3")]: 16, [(0, r2.A)("MPG3")]: 16, [(0, r2.A)("DIV5")]: 16, [(0, r2.A)("DIV6")]: 16, [(0, r2.A)("DIV4")]: 16, [(0, r2.A)("DVX3")]: 16, [(0, r2.A)("AP41")]: 16, [(0, r2.A)("COL1")]: 16, [(0, r2.A)("COL0")]: 16, [(0, r2.A)("WMV1")]: 17, [(0, r2.A)("WMV2")]: 18, [(0, r2.A)("GXVE")]: 18, [(0, r2.A)("dvsd")]: 24, [(0, r2.A)("dvhd")]: 24, [(0, r2.A)("dvh1")]: 24, [(0, r2.A)("dvsl")]: 24, [(0, r2.A)("dv25")]: 24, [(0, r2.A)("dv50")]: 24, [(0, r2.A)("cdvc")]: 24, [(0, r2.A)("CDVH")]: 24, [(0, r2.A)("CDV5")]: 24, [(0, r2.A)("dvc ")]: 24, [(0, r2.A)("dvcs")]: 24, [(0, r2.A)("dvh1")]: 24, [(0, r2.A)("dvis")]: 24, [(0, r2.A)("pdvc")]: 24, [(0, r2.A)("SL25")]: 24, [(0, r2.A)("SLDV")]: 24, [(0, r2.A)("AVd1")]: 24, [(0, r2.A)("mpg1")]: 2, [(0, r2.A)("mpg2")]: 2, [(0, r2.A)("MPEG")]: 2, [(0, r2.A)("PIM1")]: 2, [(0, r2.A)("PIM2")]: 2, [(0, r2.A)("VCR2")]: 2, 268435457: 2, 268435458: 2, 268435460: 2, [(0, r2.A)("DVR ")]: 2, [(0, r2.A)("MMES")]: 2, [(0, r2.A)("LMP2")]: 2, [(0, r2.A)("slif")]: 2, [(0, r2.A)("EM2V")]: 2, [(0, r2.A)("M701")]: 2, [(0, r2.A)("M702")]: 2, [(0, r2.A)("M703")]: 2, [(0, r2.A)("M704")]: 2, [(0, r2.A)("M705")]: 2, [(0, r2.A)("mpgv")]: 2, [(0, r2.A)("BW10")]: 2, [(0, r2.A)("XMPG")]: 2, [(0, r2.A)("MJPG")]: 7, [(0, r2.A)("RV40")]: 69, [(0, r2.A)("AV01")]: 225, [(0, r2.A)("VP80")]: 139, [(0, r2.A)("VP90")]: 167, [(0, r2.A)("HEVC")]: 173, [(0, r2.A)("H265")]: 173 }, n = "00001000800000AA00389B71", o = "2107D3118644C8C1CA000000", c = "0000000000001000800000AA", d2 = { "2C806DE046DBCF11B4D100805F6CBBEA": 86019, BFAA23E958CB7144A119FFFA01E4CE62: 86055, D242E147BA368D4D88FC61654F8C836C: 86104, AF87FBA7022DFB42A4D405CD93843BDD: 86056, "2B806DE046DBCF11B4D100805F6CBBEA": 86016, "82EC1F6ACADB1945BDE756D3B3EF981D": 69673, "3AC1FA38811D4361A40DCE53CA607CD1": 86112 };
}, 59989: (e2, t2, i2) => {
  function r2(e3, t3 = 0) {
    if (!e3) return false;
    if (e3.length < 2) return true;
    let i3 = e3[t3], r3 = t3 + 1;
    for (; r3 < e3.length && i3 === e3[r3]; r3++) ;
    return r3 === e3.length;
  }
  i2.d(t2, { A: () => r2 });
}, 31425: (e2, t2, i2) => {
  i2.d(t2, { $: () => n });
  var r2 = i2(77231), a2 = i2(72739), s2 = i2(44328);
  function n(e3) {
    let t3 = true;
    return a2.__(e3.streams, (e4) => {
      switch (e4.codecpar.codecType) {
        case 1:
          e4.codecpar.chLayout.nbChannels !== r2.N_ && e4.codecpar.sampleRate !== r2.N_ && e4.codecpar.frameSize !== r2.N_ && e4.codecpar.bitrate !== BigInt(0) || (t3 = false);
          break;
        case 0:
          0 !== (0, s2.lb)(e4.codecpar.framerate) && e4.codecpar.width !== r2.N_ && e4.codecpar.height !== r2.N_ && e4.codecpar.bitrate !== BigInt(0) || (t3 = false), 27 !== e4.codecpar.codecId && 173 !== e4.codecpar.codecId && 196 !== e4.codecpar.codecId && 12 !== e4.codecpar.codecId || e4.codecpar.profile !== r2.N_ && e4.codecpar.level !== r2.N_ || (t3 = false);
      }
    }), t3;
  }
}, 61619: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(67672);
  function a2(e3, t3 = 4) {
    let i3 = "";
    for (let a3 = 0; a3 < t3; a3++) r2.ai(e3) ? (i3 = String.fromCharCode(255 & e3) + i3, e3 >>>= 8) : (i3 = String.fromCharCode(Number(e3 & BigInt(255))) + i3, e3 >>= BigInt(8));
    return i3;
  }
}, 2187: (e2, t2, i2) => {
  i2.d(t2, { d: () => n });
  var r2 = i2(72739), a2 = i2(44328), s2 = i2(77231);
  function n(e3, t3, i3) {
    let n2 = BigInt(0);
    return r2.__(e3, (e4) => {
      n2 += e4.codecpar.bitrate * (0, a2.k)(t3, i3, s2.i0) / BigInt(8e3);
    }), n2;
  }
}, 55680: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(72739);
  function a2(e3) {
    if (e3.length < 2) return 0;
    const t3 = e3.slice().sort((e4, t4) => e4 > t4 ? 1 : -1);
    let i3 = 0, a3 = 0, s2 = [];
    for (let n = 0; n < e3.length; n++) {
      for (r2._(s2, e3[n], (t4) => t4 < e3[n] ? 1 : -1); s2.length && s2[0] === t3[a3]; ) s2.shift(), a3++;
      i3 = Math.max(i3, s2.length);
    }
    return i3;
  }
}, 89478: (e2, t2, i2) => {
  function r2(e3, t3) {
    if (t3.length < e3) return t3.slice().sort((e4, t4) => e4 > t4 ? 1 : -1);
    const i3 = [], r3 = t3.slice().sort((e4, t4) => e4 > t4 ? 1 : -1);
    if (e3) {
      const t4 = r3[r3.length - 1] - r3[r3.length - 2];
      for (let a3 = e3; a3 > 0; a3--) i3.push((i3.length ? i3[i3.length - 1] : BigInt(0)) + (a3 >= r3.length ? t4 : r3[a3] - r3[a3 - 1]));
      i3.reverse();
    }
    const a2 = [];
    for (let t4 = 0; t4 < e3; t4++) a2.push(r3[0] - i3[t4]);
    return a2.concat(r3);
  }
  i2.d(t2, { A: () => r2 });
}, 65977: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/function/mktag.ts";
  function s2(e3) {
    4 !== e3.length && r2.R8("tag length is not 4, tag: ".concat(e3), a2, 30);
    let t3 = 0;
    for (let i3 = 0; i3 < 4; i3++) t3 = t3 << 8 | e3.charCodeAt(i3);
    return t3;
  }
}, 79682: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(4624);
  const a2 = "src/avformat/function/mktagle.ts";
  function s2(e3) {
    4 !== e3.length && r2.R8("tag length is not 4, tag: ".concat(e3), a2, 30);
    let t3 = 0;
    for (let i3 = 3; i3 >= 0; i3--) t3 = t3 << 8 | e3.charCodeAt(i3);
    return t3;
  }
}, 20841: (e2, t2, i2) => {
  function r2(e3, t3, i3, r3) {
    const a2 = e3.getPos(), s2 = e3.getPointer(), n = a2 - BigInt(Math.floor(s2));
    let o = false;
    switch (t3 < a2 && t3 >= n ? (e3.seekInline(s2 + Number(t3 - a2)), o = true) : e3.seek(t3), r3) {
      case "uint8":
        e3.writeUint8(255 & i3);
        break;
      case "int8":
        e3.writeInt8(i3);
        break;
      case "uint16":
        e3.writeUint16(65535 & i3);
        break;
      case "int16":
        e3.writeInt16(i3);
        break;
      case "uint32":
        e3.writeUint32(i3 >>> 0);
        break;
      case "int32":
        e3.writeInt32(i3);
        break;
      case "uint64":
        e3.writeUint64(BigInt.asUintN(64, i3));
        break;
      case "int64":
        e3.writeInt64(i3);
        break;
      case "float":
        e3.writeFloat(i3);
        break;
      case "double":
        e3.writeDouble(i3);
    }
    o ? e3.seekInline(s2) : e3.seek(a2);
  }
  i2.d(t2, { A: () => r2 });
}, 31633: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(44328);
  const a2 = 399;
  function s2(e3) {
    return e3 < 360 ? 1001 * (e3 + 1) : (e3 -= 360) < 30 ? 1001 * (e3 + 31) * 12 : (e3 -= 30) < 3 ? 1001 * [80, 120, 240][e3] * 12 : 1e3 * [24, 30, 60, 12, 15, 48][e3 -= 3] * 12;
  }
  function n(e3) {
    let t3 = 0, i3 = 0.01;
    for (let n2 = 0; n2 < a2; n2++) {
      const a3 = Math.abs((0, r2.lb)(e3) / (0, r2.lb)({ num: s2(n2), den: 12012 }) - 1);
      a3 < i3 && (i3 = a3, t3 = s2(n2));
    }
    if (t3) {
      const i4 = { num: t3, den: 12012 };
      (0, r2.iU)(i4), e3.num = i4.num, e3.den = i4.den;
    }
  }
}, 52071: (e2, t2, i2) => {
  i2.d(t2, { A: () => l });
  var r2 = i2(63939), a2 = (i2(9599), i2(77231)), s2 = i2(44328), n = i2(2187), o = i2(71517), c = i2(9705), d2 = i2(4624);
  const h = "src/avformat/function/seekInBytes.ts";
  async function l(e3, t3, i3, l2, u, f) {
    const p = e3.ioReader.getPos(), m = await e3.ioReader.fileSize();
    let g = a2.Dh, v = i3;
    t3.startTime !== a2.Dh ? v -= t3.startTime : v -= t3.firstDTS;
    const A = (0, s2.k)(i3, t3.timeBase, a2.i0);
    if (A < BigInt(1e4)) return d2.Yz("seek pts is earlier then 10s, seek to first packet pos(".concat(l2, ") directly"), h, 63), await e3.ioReader.seek(l2), p;
    let y = (0, n.d)(e3.streams, v, t3.timeBase);
    const w = m - (0, n.d)(e3.streams, BigInt(1e4), a2.i0), b = (0, n.d)(e3.streams, BigInt(1e4), a2.i0);
    if (y > w && (y = w), y < l2) return await e3.ioReader.seek(l2), p;
    const k = (0, o._5)();
    let x = m, I = BigInt(0);
    e: for (; x - I < b && (y = I), await e3.ioReader.seek(y), await f(e3), !(8 & e3.ioReader.flags); ) {
      let i4 = await u(e3, k), n2 = r2.f[17](k + 56);
      if (!(i4 >= 0)) {
        g = a2.Dh;
        break;
      }
      {
        const c2 = (0, s2.Mr)(r2.f[17](k + 8), k + 72, a2.i0);
        let l3 = c2 - A;
        if (d2.Yz("try to seek to pos: ".concat(y, ", got packet pts: ").concat(r2.f[17](k + 8), "(").concat(c2, "ms), diff: ").concat(l3, "ms"), h, 100), l3 <= BigInt(0) && -l3 < BigInt(1e4) || x - I < b) {
          const c3 = [n2];
          for (; l3 <= 0; ) {
            if (r2.f[15](k + 32) === t3.index && 1 & r2.f[15](k + 36) && c3.push(n2), (0, o.Up)(k), i4 = await u(e3, k), i4 < 0) {
              if (-1048576 === i4) break;
              if (-1048575 === i4) continue;
              g = a2.Dh;
              break e;
            }
            n2 = r2.f[17](k + 56), l3 = (0, s2.Mr)(r2.f[17](k + 8), k + 72, a2.i0) - A;
          }
          g = c3.pop();
          break;
        }
        l3 > BigInt(0) ? (x = y, y = I + x >> BigInt(1)) : (I = y, y = I + x >> BigInt(1));
      }
      if (8 & e3.ioReader.flags) break;
    }
    return (0, o.Qe)(k), g !== a2.Dh ? (d2.Yz("finally seek to pos ".concat(g), h, 155), await e3.ioReader.seek(g), await f(e3), p) : (await e3.ioReader.seek(p), 8 & e3.ioReader.flags ? BigInt(c.LT) : BigInt(c.E$));
  }
}, 92174: (e2, t2, i2) => {
  i2.d(t2, { XA: () => y, bX: () => b, bx: () => A, dJ: () => w, ho: () => v });
  var r2 = i2(80662), a2 = i2.n(r2), s2 = i2(63939), n = i2(50932), o = i2(95335), c = i2(4624), d2 = i2(51597), h = i2(72739), l = i2(9705), u = i2(548), f = i2(77231), p = i2(43607);
  const m = "src/avformat/mux.ts", g = { zeroStart: false, nonnegative: false };
  function v(e3, t3 = {}) {
    const i3 = o.X$({}, g, t3);
    e3.ioWriter || c.h2("need ioWriter", m, 58), e3.oformat || c.h2("need oformat", m, 61), e3.options = i3, e3.privateData2 = { firstPts: new (a2())(), firstDts: new (a2())(), dtsPtsDelta: new (a2())() };
    let r3 = d2.E[e3.oformat.type];
    if (r3) for (let t4 = 0; t4 < e3.streams.length; t4++) {
      const i4 = e3.streams[t4].codecpar.codecId, a3 = e3.streams[t4].codecpar.codecType;
      if (16 === e3.oformat.type) {
        if (i4 < 65536 || i4 > 69683) return c.z3("format ".concat((0, u.L_)(e3.oformat.type), " not support codecId ").concat((0, u.eG)(e3.streams[t4].codecpar.codecType, i4)), m, 80), l.r8;
      } else if (2 !== a3 && 4 !== a3 && !h.zy(r3, i4)) return c.z3("format ".concat((0, u.L_)(e3.oformat.type), " not support codecId ").concat((0, u.eG)(e3.streams[t4].codecpar.codecType, i4)), m, 88), l.r8;
    }
    return e3.oformat.init(e3);
  }
  function A(e3) {
    return e3.oformat.writeHeader(e3), 0;
  }
  function y(e3, t3) {
    const i3 = e3.privateData2;
    return i3.firstDts.has(s2.f[15](t3 + 32)) || i3.firstDts.set(s2.f[15](t3 + 32), s2.f[17](t3 + 16) === f.Dh ? BigInt(0) : s2.f[17](t3 + 16)), i3.firstPts.has(s2.f[15](t3 + 32)) || (i3.firstPts.set(s2.f[15](t3 + 32), s2.f[17](t3 + 8) === f.Dh ? BigInt(0) : s2.f[17](t3 + 8)), i3.dtsPtsDelta.set(s2.f[15](t3 + 32), p.jk(i3.firstDts.get(s2.f[15](t3 + 32)), i3.firstPts.get(s2.f[15](t3 + 32))))), (e3.options.zeroStart || e3.options.nonnegative && (i3.firstDts.get(s2.f[15](t3 + 32)) < 0 || i3.firstPts.get(s2.f[15](t3 + 32)) < 0)) && (n.M[17](t3 + 16, s2.f[17](t3 + 16) - i3.dtsPtsDelta.get(s2.f[15](t3 + 32))), n.M[17](t3 + 8, s2.f[17](t3 + 8) - i3.dtsPtsDelta.get(s2.f[15](t3 + 32)))), e3.oformat.writeAVPacket(e3, t3);
  }
  function w(e3) {
    return e3.oformat.writeTrailer(e3), 0;
  }
  function b(e3) {
    e3.oformat.flush(e3);
  }
}, 49847: (e2, t2, i2) => {
  i2.d(t2, { A: () => r2 });
  class r2 {
    constructor() {
    }
    get ext() {
      throw new Error("need implemented ext getter");
    }
    get flags() {
      return 0;
    }
    get name() {
      return "CustomIOLoader." + Math.random();
    }
    get minBuffer() {
      return 4;
    }
    write(e3) {
      throw new Error("need implemented write function");
    }
  }
}, 77580: (e2, t2, i2) => {
  i2.d(t2, { A: () => u });
  var r2 = i2(134), a2 = i2(29967), s2 = i2.n(a2), n = i2(13724), o = i2(82800), c = i2(95335), d2 = i2(4624), h = i2(9705);
  const l = "src/avnetwork/ioLoader/FetchIOLoader.ts";
  class u extends o.A {
    constructor(e3 = {}) {
      super(e3), (0, r2.A)(this, "contentLength", void 0), (0, r2.A)(this, "receivedLength", void 0), (0, r2.A)(this, "info", void 0), (0, r2.A)(this, "range", void 0), (0, r2.A)(this, "startBytes", void 0), (0, r2.A)(this, "endBytes", void 0), (0, r2.A)(this, "eofIndex", void 0), (0, r2.A)(this, "abortController", void 0), (0, r2.A)(this, "reader", void 0), (0, r2.A)(this, "buffers", void 0), (0, r2.A)(this, "supportRange", void 0), (0, r2.A)(this, "abortSleep_", void 0), (0, r2.A)(this, "aborted", void 0);
    }
    async getTotalSize(e3, t3 = {}) {
      var i3, r3, a3;
      const n2 = { method: e3, headers: {}, mode: "cors", cache: "default", referrerPolicy: "no-referrer-when-downgrade" };
      null !== (i3 = this.info.httpOptions) && void 0 !== i3 && i3.headers && c.__(this.info.httpOptions.headers, (e4, t4) => {
        n2.headers[t4] = e4;
      }), c.__(t3, (e4, t4) => {
        n2.headers[t4] = e4;
      }), null !== (r3 = this.info.httpOptions) && void 0 !== r3 && r3.credentials && (n2.credentials = this.info.httpOptions.credentials), null !== (a3 = this.info.httpOptions) && void 0 !== a3 && a3.referrerPolicy && (n2.referrerPolicy = this.info.httpOptions.referrerPolicy), "function" == typeof AbortController && (this.abortController = new AbortController(), n2.signal = this.abortController.signal);
      try {
        const e4 = await fetch(this.info.url, n2);
        if (e4.ok && e4.status >= 200 && e4.status <= 299) {
          this.abortController && (this.abortController.abort(), this.abortController = null);
          const t4 = e4.headers.get("Accept-Ranges");
          t4 && -1 === t4.indexOf("bytes") && (this.supportRange = false);
          const i4 = e4.headers.get("Content-Range");
          if (i4) {
            const e5 = i4.split("/")[1];
            if (e5) return s2()(e5);
          }
          const r4 = e4.headers.get("X-Content-Length") || e4.headers.get("Content-Length");
          if (null != r4) return s2()(r4);
        }
      } catch (e4) {
      }
      return 0;
    }
    async open(e3, t3 = { from: 0, to: -1 }) {
      var i3;
      if (this.info = e3, this.range = t3, this.range.to || (this.range.to = -1), this.range.from = Math.max(this.range.from, 0), this.startBytes = 0, this.endBytes = -1, this.eofIndex = -1, this.receivedLength = 0, this.buffers = [], this.supportRange = true, this.aborted = false, this.range.to > 0 && (this.eofIndex = t3.to), this.range && !this.options.isLive && (this.startBytes = null !== (i3 = this.range.from) && void 0 !== i3 ? i3 : 0), this.status = 1, !this.options.isLive && !this.options.disableSegment) {
        let e4 = await this.getTotalSize("HEAD");
        e4 || (e4 = await this.getTotalSize("Get", { range: "bytes=0-1" })), e4 <= 2 && (e4 = 0), e4 ? (this.contentLength = e4, this.range.to < 0 && (this.eofIndex = this.contentLength + this.range.to), this.supportRange && (this.endBytes = Math.min(this.startBytes + this.options.preload - 1, this.eofIndex))) : this.endBytes = -1;
      }
      return this.status = 2, 0;
    }
    async openReader() {
      var e3, t3, i3;
      const r3 = { method: "GET", headers: {}, mode: "cors", cache: "default", referrerPolicy: "no-referrer-when-downgrade" };
      null !== (e3 = this.info.httpOptions) && void 0 !== e3 && e3.headers && c.__(this.info.httpOptions.headers, (e4, t4) => {
        r3.headers[t4] = e4;
      }), this.options.isLive || this.options.disableSegment || (r3.headers.range = "bytes=".concat(this.startBytes, "-").concat(this.endBytes > 0 ? this.endBytes : "")), null !== (t3 = this.info.httpOptions) && void 0 !== t3 && t3.credentials && (r3.credentials = this.info.httpOptions.credentials), null !== (i3 = this.info.httpOptions) && void 0 !== i3 && i3.referrerPolicy && (r3.referrerPolicy = this.info.httpOptions.referrerPolicy), this.abortController && this.abortController.abort(), "function" == typeof AbortController && (this.abortController = new AbortController(), r3.signal = this.abortController.signal);
      try {
        const e4 = await fetch(this.info.url, r3);
        e4.ok && e4.status >= 200 && e4.status <= 299 ? this.reader = e4.body.getReader() : (this.status = 3, d2.h2("FetchStreamLoader: Http code invalid, ".concat(e4.status, " ").concat(e4.statusText), l, 239));
      } catch (e4) {
        if (this.retryCount < this.options.retryCount && (!this.options.isLive || !this.receivedLength)) {
          if (this.retryCount++, this.status = 1, this.abortSleep_ = new n.A(this.options.retryInterval), await this.abortSleep_, this.abortSleep_ = null, this.aborted) return;
          return this.openReader();
        }
        d2.h2("FetchStreamLoader: exception ".concat(e4.message), l, 256);
      }
    }
    async readInterval(e3, t3 = 0) {
      let i3 = 0;
      for (; this.buffers.length && i3 < e3.length; ) {
        const t4 = this.buffers.shift();
        t4.length > e3.length - i3 ? (e3.set(t4.subarray(0, e3.length - i3), i3), this.buffers.unshift(t4.subarray(e3.length - i3)), i3 = e3.length) : (e3.set(t4, i3), i3 += t4.length);
      }
      if (i3 >= e3.length) return e3.length + t3;
      if (4 === this.status) return i3 > 0 ? i3 + t3 : t3 > 0 ? t3 : -1048576;
      if (!this.reader && (await this.openReader(), this.aborted)) return -1048576;
      const { value: r3, done: a3 } = await this.reader.read();
      return a3 ? void 0 !== this.contentLength && this.receivedLength + this.range.from < this.endBytes + 1 ? (this.status = 3, void d2.h2("Fetch stream meet Early-EOF", l, 298)) : this.options.isLive || this.options.disableSegment || this.receivedLength + this.range.from >= this.eofIndex ? (this.status = 4, this.startBytes = 0, i3 > 0 ? i3 + t3 : t3 > 0 ? t3 : -1048576) : (await this.reader.cancel(), this.abortController && (this.abortController.abort(), this.abortController = null), this.reader = null, this.startBytes = this.endBytes + 1, this.endBytes = Math.min(this.startBytes + this.options.preload - 1, this.eofIndex), this.readInterval(e3.subarray(i3, void 0, true), i3)) : (this.receivedLength += r3.length, r3.length > e3.length - i3 ? (e3.set(r3.subarray(0, e3.length - i3), i3), this.buffers.push(r3.subarray(e3.length - i3)), e3.length + t3) : (e3.set(r3, i3), i3 += r3.length, i3 + t3));
    }
    async read(e3) {
      return this.readInterval(e3);
    }
    async seek(e3) {
      return this.supportRange ? this.eofIndex > 0 && Number(e3) > this.eofIndex ? h.nr : (await this.abort(), this.aborted = false, this.receivedLength = Number(e3) - this.range.from, this.startBytes = Number(e3), this.options.disableSegment || (this.endBytes = Math.min(this.startBytes + this.options.preload, this.eofIndex)), this.buffers.length = 0, 4 === this.status && (this.status = 2), 0) : h.NU;
    }
    async size() {
      return this.options.isLive ? BigInt(0) : BigInt(Math.floor(this.contentLength || 0));
    }
    abortSleep() {
      this.aborted = true, this.abortSleep_ && (this.abortSleep_.stop(), this.abortSleep_ = null);
    }
    async abort() {
      this.abortSleep(), this.reader && (await this.reader.cancel(), this.abortController && (this.abortController.abort(), this.abortController = null), this.reader = null);
    }
    async stop() {
      this.status = 0, await this.abort();
    }
    getUrl() {
      var e3;
      return null === (e3 = this.info) || void 0 === e3 ? void 0 : e3.url;
    }
  }
}, 79686: (e2, t2, i2) => {
  i2.d(t2, { A: () => d2 });
  var r2 = i2(134), a2 = i2(54001), s2 = i2.n(a2), n = i2(82800);
  const o = i2(67672).Pc(Blob.prototype.arrayBuffer), c = "function" == typeof FileReaderSync;
  class d2 extends n.A {
    constructor(...e3) {
      super(...e3), (0, r2.A)(this, "info", void 0), (0, r2.A)(this, "range", void 0), (0, r2.A)(this, "readPos", void 0), (0, r2.A)(this, "endPos", void 0), (0, r2.A)(this, "reader", void 0), (0, r2.A)(this, "readerResolve", void 0);
    }
    async open(e3, t3 = { from: 0, to: -1 }) {
      return this.info = e3, this.range = t3, this.readPos = 0, this.endPos = this.info.file.size, t3.from > 0 && (this.readPos = t3.from), t3.to > 0 && (this.endPos = t3.to), this.status = 2, 0;
    }
    readBufferByReaderSync(e3) {
      return this.reader || (this.reader = new FileReaderSync()), this.reader.readAsArrayBuffer(this.info.file.slice(this.readPos, this.readPos + e3));
    }
    async readBufferByReader(e3) {
      return this.reader || (this.reader = new FileReader(), this.reader.onloadend = (e4) => {
        this.readerResolve && this.readerResolve(e4.target.result);
      }), new (s2())((t3) => {
        this.readerResolve = t3, this.reader.readAsArrayBuffer(this.info.file.slice(this.readPos, this.readPos + e3));
      });
    }
    async read(e3) {
      if (this.readPos >= this.endPos) return this.status = 4, -1048576;
      const t3 = Math.min(e3.length, this.endPos - this.readPos);
      return c ? e3.set(new Uint8Array(this.readBufferByReaderSync(t3)), 0) : o ? e3.set(new Uint8Array(await this.info.file.slice(this.readPos, this.readPos + t3).arrayBuffer()), 0) : e3.set(new Uint8Array(await this.readBufferByReader(t3)), 0), this.readPos += t3, this.readPos >= this.endPos && (this.status = 4), t3;
    }
    async seek(e3) {
      return this.readPos = Number(e3), 4 === this.status && (this.status = 2), 0;
    }
    async size() {
      return BigInt(Math.floor(this.info.file.size));
    }
    async stop() {
      this.status = 0;
    }
  }
}, 82800: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(134), a2 = i2(95335);
  const s2 = { isLive: false, preload: 5242880, retryCount: 20, retryInterval: 1 };
  class n {
    constructor(e3 = {}) {
      (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "status", void 0), (0, r2.A)(this, "retryCount", void 0), (0, r2.A)(this, "retryTimeout", void 0), this.options = e3, this.status = 0, this.retryCount = 0, this.options = a2.X$({}, s2), a2.X$(this.options, e3);
    }
    write(e3) {
      throw new Error("need implemented write function");
    }
  }
}, 36773: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(134), a2 = i2(54001), s2 = i2.n(a2), n = i2(82800);
  class o extends n.A {
    constructor(e3 = {}) {
      super(e3), (0, r2.A)(this, "readQueue", void 0), (0, r2.A)(this, "consume", void 0), this.readQueue = [];
    }
    async readInterval(e3, t3 = 0) {
      let i3 = 0;
      for (; this.readQueue.length && i3 < e3.length; ) {
        const t4 = this.readQueue.shift();
        t4.length > e3.length - i3 ? (e3.set(t4.subarray(0, e3.length - i3), i3), this.readQueue.unshift(t4.subarray(e3.length - i3)), i3 = e3.length) : (e3.set(t4, i3), i3 += t4.length);
      }
      return i3 > 0 || t3 ? i3 + t3 : 4 === this.status || 0 === this.status ? i3 > 0 ? i3 + t3 : t3 > 0 ? t3 : -1048576 : 3 === this.status ? i3 > 0 ? i3 + t3 : t3 > 0 ? t3 : -1048573 : (await new (s2())((e4) => {
        this.consume = e4;
      }), this.consume = null, this.readInterval(e3, t3));
    }
    async read(e3) {
      return this.readInterval(e3);
    }
    async write(e3) {
      return this.send(e3);
    }
  }
}, 14619: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(134), a2 = i2(54001), s2 = i2.n(a2), n = i2(36773);
  class o extends n.A {
    constructor(...e3) {
      super(...e3), (0, r2.A)(this, "info", void 0), (0, r2.A)(this, "socket", void 0);
    }
    async send(e3) {
      return this.socket ? (this.socket.send(e3.slice()), 0) : -1048574;
    }
    open(e3) {
      return this.info = e3, this.status = 1, new (s2())((t3) => {
        var i3;
        this.socket = new WebSocket(e3.url, null === (i3 = e3.websocketOptions) || void 0 === i3 ? void 0 : i3.protocols), this.socket.binaryType = "arraybuffer", this.socket.onopen = () => {
          this.status = 2, t3(0);
        }, this.socket.onerror = () => {
          this.status = 3, t3(-1048573), this.consume && this.consume();
        }, this.socket.onmessage = (e4) => {
          let t4 = e4.data;
          this.readQueue.push(new Uint8Array(t4)), this.consume && this.consume();
        };
      });
    }
    seek(e3, t3) {
      throw new Error("Method not implemented.");
    }
    size() {
      throw new Error("Method not implemented.");
    }
    async stop() {
      this.socket && (this.socket.close(), this.socket = null), this.status = 4, this.consume && this.consume();
    }
  }
}, 42383: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(134), a2 = i2(54001), s2 = i2.n(a2), n = i2(36773);
  class o extends n.A {
    constructor(...e3) {
      super(...e3), (0, r2.A)(this, "info", void 0), (0, r2.A)(this, "transport", void 0), (0, r2.A)(this, "datagramReader", void 0), (0, r2.A)(this, "reader", void 0), (0, r2.A)(this, "datagramWriter", void 0), (0, r2.A)(this, "writer", void 0), (0, r2.A)(this, "stream", void 0), (0, r2.A)(this, "readPacketQueue", void 0), (0, r2.A)(this, "consumePacket", void 0);
    }
    async send(e3) {
      return this.writer ? (this.writer.write(e3.slice()), 0) : -1048574;
    }
    async handleRead() {
      let e3 = false;
      for (; ; ) try {
        const { value: t3, done: i3 } = await this.reader.read();
        if (i3) {
          e3 = i3;
          break;
        }
        this.readQueue.push(t3);
      } catch (t3) {
        e3 || (this.status = 3, this.consume && this.consume());
        break;
      }
    }
    async readDatagram() {
      let e3 = false;
      for (; ; ) try {
        const { value: t3, done: i3 } = await this.datagramReader.read();
        if (i3) {
          e3 = true;
          break;
        }
        this.readPacketQueue.push(t3);
      } catch (t3) {
        e3 || (this.status = 3, this.consumePacket && this.consumePacket());
        break;
      }
    }
    async open(e3) {
      return this.info = e3, this.transport = new WebTransport(e3.url, e3.webtransportOptions), this.readPacketQueue = [], this.status = 1, await this.transport.ready, this.transport.closed.then(() => {
        this.transport ? this.status = 3 : this.status = 4;
      }), this.status = 2, this.stream = await this.transport.createBidirectionalStream(), this.reader = this.stream.readable.getReader(), this.writer = this.stream.writable.getWriter(), this.datagramReader = this.transport.datagrams.readable.getReader(), this.datagramWriter = this.transport.datagrams.writable.getWriter(), this.handleRead(), this.readDatagram(), 0;
    }
    async readPacket(e3) {
      for (; ; ) {
        if (this.readPacketQueue.length) {
          const t3 = this.readPacketQueue.shift();
          return e3.set(t3, 0), t3.length;
        }
        if (4 === this.status || 0 === this.status) return -1048576;
        if (3 === this.status) return -1048573;
        await new (s2())((e4) => {
          this.consumePacket = e4;
        }), this.consumePacket = null;
      }
    }
    async writePacket(e3) {
      return this.datagramWriter ? (this.datagramWriter.write(e3.slice()), 0) : -1048574;
    }
    seek(e3, t3) {
      throw new Error("Method not implemented.");
    }
    size() {
      throw new Error("Method not implemented.");
    }
    async stop() {
      this.transport && (this.transport.close(), this.transport = null), this.status = 4, this.consume && this.consume();
    }
  }
}, 18667: (e2, t2, i2) => {
  i2.d(t2, { A: () => T });
  var r2 = i2(54001), a2 = i2.n(r2), s2 = i2(63939), n = i2(50932), o = i2(12264), c = i2(29170), d2 = i2(44527), h = i2(9705), l = i2(84149), u = i2(75742), f = i2(4624), p = i2(16041), m = (i2(77162), i2(77104)), g = i2(84290), v = i2(72739), A = i2(86932), y = i2(36204), w = i2(94561), b = i2(72703), k = i2(71762), x = i2(37837), I = i2(71766), P = i2(67672);
  const S = "src/avpipeline/AudioDecodePipeline.ts";
  class T extends d2.A {
    constructor() {
      super();
    }
    createWebcodecDecoder(e3) {
      return new m.A({ onError: (t3) => {
        f.z3("audio decode error, taskId: ".concat(e3.taskId, ", error: ").concat(t3), S, 91);
      }, onReceiveAudioData(t3) {
        const i3 = (0, y.t)(t3, e3.avframePool.alloc());
        e3.frameCaches.push(i3), n.M[17](e3.stats + 56, s2.f[17](e3.stats + 56) + BigInt(1)), n.M[15](e3.stats + 248, Math.max((0, A.A)() - e3.lastDecodeTimestamp, s2.f[15](e3.stats + 248))), t3.close();
      } });
    }
    createWasmcodecDecoder(e3, t3) {
      return new u.A({ resource: t3, onReceiveAVFrame(t4) {
        e3.frameCaches.push(t4), n.M[17](e3.stats + 56, s2.f[17](e3.stats + 56) + BigInt(1)), n.M[15](e3.stats + 248, Math.max((0, A.A)() - e3.lastDecodeTimestamp, s2.f[15](e3.stats + 248)));
      }, avframePool: e3.avframePool });
    }
    async pullAVPacketInternal(e3, t3) {
      const i3 = await t3.request("pull");
      if (P.ai(i3) || (0, b.A)(i3)) return i3;
      {
        const t4 = e3.avpacketPool.alloc();
        return (0, k.r0)(i3, t4), t4;
      }
    }
    async createTask(e3) {
      const t3 = new l.Ay(e3.leftPort), i3 = new l.Ay(e3.rightPort), r3 = [], a3 = new p.A((0, c.A)(e3.avframeList, o.A), e3.avframeListMutex), d3 = { ...e3, resource: await (0, w.A)(e3.resource), frameCaches: r3, inputEnd: false, decoder: null, parameters: 0, lastDecodeTimestamp: 0, avframePool: a3, avpacketPool: new g.A((0, c.A)(e3.avpacketList, o.A), e3.avpacketListMutex) };
      return d3.resource ? d3.decoder = this.createWasmcodecDecoder(d3, d3.resource) : d3.decoder = this.createWebcodecDecoder(d3), this.tasks.set(e3.taskId, d3), i3.on(l.S3, async (a4) => {
        switch (a4.method) {
          case "pull":
            if (r3.length) {
              const e4 = r3.shift();
              i3.reply(a4, e4);
              break;
            }
            if (!d3.inputEnd) {
              for (; ; ) {
                if (r3.length) {
                  const e4 = r3.shift();
                  i3.reply(a4, e4);
                  break;
                }
                d3.pending && await d3.pending, d3.lastDecodeTimestamp = (0, A.A)();
                const o2 = await this.pullAVPacketInternal(d3, t3);
                if (-1048576 === o2) {
                  if (await d3.decoder.flush(), d3.inputEnd = true, r3.length) {
                    const e4 = r3.shift();
                    i3.reply(a4, e4);
                    break;
                  }
                  f.pq("audio decoder ended, taskId: ".concat(d3.taskId), S, 198), i3.reply(a4, -1048576);
                  break;
                }
                if (!(o2 > 0)) {
                  f.z3("audio decode pull avpacket error, taskId: ".concat(e3.taskId, ", ret: ").concat(o2), S, 216), i3.reply(a4, o2);
                  break;
                }
                {
                  const t4 = d3.decoder.decode(o2);
                  d3.avpacketPool.release(o2), t4 < 0 && (n.M[15](d3.stats + 48, s2.f[15](d3.stats + 48) + 1), f.z3("audio decode error, taskId: ".concat(e3.taskId, ", ret: ").concat(t4), S, 211));
                }
              }
              break;
            }
            i3.reply(a4, -1048576);
        }
      }), 0;
    }
    async open(e3, t3, i3 = {}) {
      const r3 = this.tasks.get(e3);
      if (r3) {
        r3.wasmDecoderOptions = i3;
        const e4 = (0, x.Gy)(168);
        return (0, b.A)(t3) ? (0, I.Yi)(e4, t3) : (0, k.T8)(t3, e4), r3.parameters && (0, I.dn)(r3.parameters), r3.parameters = e4, new (a2())(async (t4, i4) => {
          const a3 = await r3.decoder.open(e4, r3.wasmDecoderOptions);
          if (a3) return f.z3("open audio decoder failed, error: ".concat(a3), S, 250), void t4(h.r8);
          t4(0);
        });
      }
      f.h2("task not found", S, 257);
    }
    async beforeReopenDecoder(e3) {
      const t3 = this.tasks.get(e3);
      t3 ? t3.pending = new (a2())((e4) => {
        t3.pendingResolve = e4;
      }) : f.h2("task not found", S, 268);
    }
    async reopenDecoder(e3, t3, i3, r3) {
      const s3 = this.tasks.get(e3);
      if (s3) {
        r3 && (s3.wasmDecoderOptions = r3);
        const e4 = (0, x.Gy)(168);
        let n2;
        return (0, b.A)(t3) ? (0, I.Yi)(e4, t3) : (0, k.T8)(t3, e4), s3.parameters && (0, I.dn)(s3.parameters), s3.parameters = e4, i3 ? (i3 = await (0, w.A)(i3), n2 = this.createWasmcodecDecoder(s3, i3)) : n2 = this.createWebcodecDecoder(s3), new (a2())(async (t4, r4) => {
          const a3 = await n2.open(e4);
          if (a3) return f.z3("reopen audio decoder failed, error: ".concat(a3), S, 305), void t4(h.r8);
          i3 && (s3.resource = i3), s3.decoder.close(), s3.decoder = n2, f.Yz("reopen audio decoder, taskId: ".concat(s3.taskId), S, 315), t4(0), s3.pendingResolve && (s3.pendingResolve(), s3.pending = null);
        });
      }
      f.h2("task not found", S, 323);
    }
    async resetTask(e3) {
      const t3 = this.tasks.get(e3);
      t3 && (t3.decoder && await t3.decoder.flush(), v.__(t3.frameCaches, (e4) => {
        t3.avframePool.release(e4);
      }), t3.frameCaches.length = 0, t3.inputEnd = false, t3.lastDecodeTimestamp = (0, A.A)(), f.pq("reset audio decoder, taskId: ".concat(t3.taskId), S, 339));
    }
    async registerTask(e3) {
      return this.tasks.has(e3.taskId) ? h.lh : this.createTask(e3);
    }
    async unregisterTask(e3) {
      const t3 = this.tasks.get(e3);
      t3 && (t3.rightPort.close(), t3.leftPort.close(), t3.decoder.close(), t3.frameCaches.forEach((e4) => {
        t3.avframePool.release(e4);
      }), t3.parameters && (0, I.dn)(t3.parameters), this.tasks.delete(e3), f.Yz("unregisterTask task, taskId: ".concat(e3), S, 363));
    }
  }
}, 59377: (e2, t2, i2) => {
  i2.d(t2, { A: () => $ });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(54001), o = i2.n(n), c = i2(61499), d2 = i2(12264), h = i2(74503), l = i2(73783), u = i2(29170), f = i2(63939), p = (i2(9599), i2(50932)), m = i2(94300), g = i2(10278), v = i2(44527), A = i2(9705), y = i2(84149), w = i2(4624), b = i2(16041), k = i2(92246), x = i2(47442), I = i2(37837), P = i2(70089), S = i2(14686), T = i2(44328), M = i2(77231), B = i2(86932), R = i2(13724), _ = i2(43607), C = i2(94561), U = i2(47222), D = i2(39638), E = i2(74936);
  const L = "src/avpipeline/AudioRenderPipeline.ts", z = BigInt(400);
  class $ extends v.A {
    constructor() {
      super(), (0, r2.A)(this, "avPCMBufferPool", void 0), (0, r2.A)(this, "avPCMBufferList", void 0), (0, r2.A)(this, "avPCMBufferListMutex", void 0), this.avPCMBufferList = (0, h.A)(d2.A), this.avPCMBufferListMutex = (0, h.A)(l.eu), this.avPCMBufferPool = new x.A(this.avPCMBufferList, this.avPCMBufferListMutex[c.o9]);
    }
    async createTask(e3) {
      const t3 = new y.Ay(e3.leftPort), i3 = new y.Ay(e3.rightPort), r3 = new y.Ay(e3.controlPort), a3 = { ...e3, leftIPCPort: t3, rightIPCPort: i3, controlIPCPort: r3, resamplerResource: await (0, C.A)(e3.resamplerResource), stretchpitcherResource: await (0, C.A)(e3.stretchpitcherResource), resampler: null, stretchpitcher: new (s2())(), outPCMBuffer: null, waitPCMBuffer: 0, waitAVFrame: 0, waitPCMBufferPos: 0, ended: false, stretchpitcherEnded: false, playRate: 1, playTempo: 1, playPitch: 1, useStretchpitcher: false, lastNotifyPTS: BigInt(0), currentPTS: M.Dh, lastMasterPts: M.Dh, masterTimer: new E.A(), firstPlayed: false, seeking: false, pausing: false, stopping: false, seekSync: null, receivePCMSync: null, paddingAVFrame: 0, fakePlayStartTimestamp: 0, fakePlaySamples: BigInt(0), fakePlayTimer: null, fakePlayWorkerTimer: null, fakePlay: false, lastRenderTimestamp: 0, avframePool: new b.A((0, u.A)(e3.avframeList, d2.A), e3.avframeListMutex) };
      for (let t4 = 0; t4 < e3.playChannels; t4++) {
        const i4 = new P.A({ resource: a3.stretchpitcherResource });
        a3.stretchpitcher.set(t4, i4), await i4.open({ sampleRate: e3.playSampleRate, channels: 1 }), i4.setTempo(a3.playTempo), i4.setPitch(a3.playPitch), i4.setRate(a3.playRate);
      }
      const n2 = async () => {
        let e4;
        if (a3.paddingAVFrame ? (e4 = a3.paddingAVFrame, a3.paddingAVFrame = 0) : e4 = await a3.leftIPCPort.request("pull"), -1048576 === e4) {
          for (let e5 = 0; e5 < a3.playChannels; e5++) a3.stretchpitcher.get(e5).flush();
          return w.pq("audio render ended, taskId: ".concat(a3.taskId), L, 215), -1048576;
        }
        if (e4 < 0) return w.z3("pull audio frame failed, taskId: ".concat(a3.taskId), L, 219), e4;
        {
          if (1 !== a3.playRate || 1 !== a3.playTempo || 1 !== a3.playPitch || a3.enableJitterBuffer ? a3.useStretchpitcher = true : a3.useStretchpitcher = false, !a3.firstPlayed) {
            const t5 = (0, T.Mr)(f.f[17](e4 + 104), e4 + 120, M.i0);
            a3.firstPlayed = true, w.Yz("got first audio frame, pts: ".concat(f.f[17](e4 + 104), "(").concat(t5, "ms), taskId: ").concat(a3.taskId), L, 241);
          }
          const t4 = (0, T.Mr)(f.f[17](e4 + 104), e4 + 120, M.i0);
          (t4 > BigInt(0) && a3.masterTimer.getMasterTime() - t4 > z || a3.isLive && t4 - a3.currentPTS > BigInt(4e3)) && a3.masterTimer.setMasterTime(t4), a3.currentPTS = t4, p.M[17](a3.stats + 72, f.f[17](a3.stats + 72) + BigInt(1)), p.M[17](a3.stats + 344, t4), a3.lastRenderTimestamp && p.M[15](a3.stats + 252, Math.max((0, B.A)() - a3.lastRenderTimestamp, f.f[15](a3.stats + 252))), a3.lastRenderTimestamp = (0, B.A)();
          let i4 = true;
          if (f.f[15](e4 + 152) !== a3.playSampleRate || f.f[15](e4 + 80) !== a3.playFormat || f.f[15](e4 + 292) !== a3.playChannels) {
            if (a3.resampler) {
              const t6 = a3.resampler.getInputPCMParameters();
              t6.format === f.f[15](e4 + 80) && t6.sampleRate === f.f[15](e4 + 152) && t6.channels === f.f[15](e4 + 292) || (a3.resampler.close(), a3.resampler = null);
            }
            a3.resampler || (a3.resampler = new k.A({ resource: a3.resamplerResource }), await a3.resampler.open({ sampleRate: f.f[15](e4 + 152), format: f.f[15](e4 + 80), channels: f.f[15](e4 + 292) }, { sampleRate: a3.playSampleRate, format: a3.playFormat, channels: a3.playChannels }));
            let t5 = this.avPCMBufferPool.alloc(), i5 = a3.resampler.resample(f.f[20](e4 + 64), t5, f.f[15](e4 + 76));
            if (i5 < 0) return w.z3("resample error, ret: ".concat(i5, ", taskId: ").concat(a3.taskId), L, 301), this.avPCMBufferPool.release(t5), i5;
            if (a3.useStretchpitcher) {
              for (let e5 = 0; e5 < a3.playChannels; e5++) a3.stretchpitcher.get(e5).sendSamples(f.f[20](f.f[20](t5) + 4 * e5), f.f[15](t5 + 8));
              this.avPCMBufferPool.release(t5);
            } else a3.waitPCMBuffer = t5, a3.waitPCMBufferPos = 0;
          } else if (a3.useStretchpitcher) for (let t5 = 0; t5 < a3.playChannels; t5++) a3.stretchpitcher.get(t5).sendSamples(f.f[20](f.f[20](e4 + 64) + 4 * t5), f.f[15](e4 + 76));
          else {
            let t5 = this.avPCMBufferPool.alloc();
            f.f[20](t5) && ((0, I.aI)(f.f[20](t5)), (0, I.aI)(t5)), p.M[15](t5 + 8, f.f[15](e4 + 76)), p.M[15](t5 + 12, f.f[15](e4 + 76)), p.M[15](t5 + 20, f.f[15](e4 + 152)), p.M[15](t5 + 16, f.f[15](e4 + 292)), p.M[20](t5, f.f[20](e4 + 64)), a3.waitAVFrame = e4, a3.waitPCMBuffer = t5, a3.waitPCMBufferPos = 0, i4 = false;
          }
          p.M[15](a3.stats + 4, f.f[15](e4 + 152)), p.M[15](a3.stats, f.f[15](e4 + 292)), p.M[15](a3.stats + 8, f.f[15](e4 + 76)), i4 && a3.avframePool.release(e4);
        }
        return 0;
      }, l2 = async (e4) => {
        let t4 = 0;
        if (a3.seeking && (await new (o())((e5) => {
          a3.receivePCMSync = e5;
        }), a3.stopping)) return -1048576;
        if (a3.enableJitterBuffer && f.f[15](a3.stats + 32) / f.f[15](a3.stats + 244) * 1e3 <= f.f[15](a3.stats + 280) && this.setPlayRate(a3.taskId, 1), a3.ended && a3.useStretchpitcher) {
          let i4 = 0;
          for (let r4 = 0; r4 < a3.playChannels; r4++) {
            const s3 = a3.stretchpitcher.get(r4);
            f.f[20](f.f[20](e4) + 4 * r4) && (i4 = s3.receiveSamples(f.f[20](f.f[20](e4) + 4 * r4) + 4 * t4, f.f[15](e4 + 12) - t4));
          }
          if (t4 + i4 < f.f[15](e4 + 12)) {
            a3.stretchpitcherEnded = true;
            for (let i5 = 0; i5 < a3.playChannels; i5++) (0, S.sO)(f.f[20](f.f[20](e4) + 4 * i5) + t4, 0, 4 * (f.f[15](e4 + 12) - t4));
          }
          return p.M[15](e4 + 8, t4), 0;
        }
        for (; t4 < f.f[15](e4 + 12); ) {
          let i4 = 0;
          if (a3.useStretchpitcher) for (let r4 = 0; r4 < a3.playChannels; r4++) {
            const s3 = a3.stretchpitcher.get(r4);
            f.f[20](f.f[20](e4) + 4 * r4) && (i4 = s3.receiveSamples(f.f[20](f.f[20](e4) + 4 * r4) + 4 * t4, f.f[15](e4 + 12) - t4));
          }
          else if (a3.waitPCMBuffer) {
            if (i4 = Math.min(f.f[15](a3.waitPCMBuffer + 8) - a3.waitPCMBufferPos, f.f[15](e4 + 12) - t4), i4) {
              for (let r4 = 0; r4 < a3.playChannels; r4++) (0, S.Mr)(f.f[20](f.f[20](e4) + 4 * r4) + 4 * t4, f.f[20](f.f[20](a3.waitPCMBuffer) + 4 * r4) + 4 * a3.waitPCMBufferPos, 4 * i4);
              a3.waitPCMBufferPos += i4;
            }
            f.f[15](a3.waitPCMBuffer + 8) === a3.waitPCMBufferPos && (a3.waitAVFrame && (p.M[20](a3.waitPCMBuffer, 0), p.M[15](a3.waitPCMBuffer + 12, 0), a3.avframePool.release(a3.waitAVFrame), a3.waitAVFrame = 0), this.avPCMBufferPool.release(a3.waitPCMBuffer), a3.waitPCMBuffer = 0);
          }
          if (t4 += i4, t4 < f.f[15](e4 + 12)) {
            let i5 = await n2();
            if (-1048576 === i5) {
              if (a3.ended = true, a3.useStretchpitcher) {
                for (let r4 = 0; r4 < a3.playChannels; r4++) {
                  const s3 = a3.stretchpitcher.get(r4);
                  f.f[20](f.f[20](e4) + 4 * r4) && (s3.flush(), i5 = s3.receiveSamples(f.f[20](f.f[20](e4) + 4 * r4) + 4 * t4, f.f[15](e4 + 12) - t4));
                }
                if (t4 + i5 < f.f[15](e4 + 12)) {
                  a3.stretchpitcherEnded = true;
                  for (let i6 = 0; i6 < a3.playChannels; i6++) (0, S.sO)(f.f[20](f.f[20](e4) + 4 * i6) + t4, 0, 4 * (f.f[15](e4 + 12) - t4));
                }
                t4 += i5;
              }
              break;
            }
            if (i5 < 0) return i5;
          }
        }
        return p.M[15](e4 + 8, t4), a3.seekSync && (a3.seekSync(), a3.seekSync = null), 0;
      };
      return i3.on(y.S3, async (e4) => {
        switch (e4.method) {
          case "pull": {
            if (a3.fakePlay && (a3.fakePlay = false, this.clearFakePlayTimer(a3), a3.fakePlaySamples = BigInt(0), a3.fakePlayStartTimestamp = 0), a3.ended && (a3.stretchpitcherEnded || !a3.useStretchpitcher)) return void i3.reply(e4, -1048576);
            const t4 = e4.params.buffer;
            if (!a3.firstPlayed) {
              a3.masterTimer.setMasterTime(a3.lastMasterPts === M.Dh ? a3.startPTS : a3.lastMasterPts), a3.lastMasterPts = M.Dh;
              let t5 = await n2();
              if (t5 < 0) {
                i3.reply(e4, t5);
                break;
              }
            }
            if (a3.currentPTS - a3.masterTimer.getMasterTime() > z && !a3.audioMasterForce) {
              (0, S.sO)(f.f[20](f.f[20](t4)), 0, 4 * f.f[15](t4 + 12) * f.f[15](t4 + 16)), i3.reply(e4, 0), this.fakeSyncPts(a3);
              break;
            }
            this.syncPts(a3, f.f[15](t4 + 12));
            const r4 = await l2(t4);
            i3.reply(e4, r4);
            break;
          }
          case "pullBuffer": {
            if (a3.fakePlay && (a3.fakePlay = false, this.clearFakePlayTimer(a3), a3.fakePlaySamples = BigInt(0), a3.fakePlayStartTimestamp = 0), a3.ended && (a3.stretchpitcherEnded || !a3.useStretchpitcher)) return void i3.reply(e4, -1048576);
            const t4 = e4.params.nbSamples;
            if (!a3.outPCMBuffer || a3.outPCMBuffer.maxnbSamples !== t4) {
              a3.outPCMBuffer && ((0, I.aI)(a3.outPCMBuffer.data), (0, I.aI)(a3.outPCMBuffer[c.o9]), (0, m.A)(a3.outPCMBuffer)), a3.outPCMBuffer = (0, h.A)(g.A), a3.outPCMBuffer.data = (0, I.sY)(4 * a3.playChannels);
              const e5 = (0, I.Gy)(4 * t4 * a3.playChannels);
              for (let i4 = 0; i4 < a3.playChannels; i4++) p.M[20](a3.outPCMBuffer.data + 4 * i4, e5 + 4 * t4 * i4);
              a3.outPCMBuffer.maxnbSamples = t4;
            }
            if (!a3.firstPlayed) {
              a3.masterTimer.setMasterTime(a3.lastMasterPts === M.Dh ? a3.startPTS : a3.lastMasterPts), a3.lastMasterPts = M.Dh;
              let t5 = await n2();
              if (t5 < 0) {
                i3.reply(e4, t5);
                break;
              }
            }
            if (a3.currentPTS - a3.masterTimer.getMasterTime() > z && !a3.audioMasterForce) {
              const t5 = new Uint8Array(4 * a3.outPCMBuffer.nbSamples * a3.playChannels);
              i3.reply(e4, t5.buffer, null, [t5.buffer]), this.fakeSyncPts(a3);
              break;
            }
            this.syncPts(a3, a3.outPCMBuffer.maxnbSamples);
            const r4 = await l2(a3.outPCMBuffer[c.o9]);
            if (r4 < 0) return void i3.reply(e4, r4);
            const s3 = (0, S.s3)(f.f[20](a3.outPCMBuffer.data), 4 * a3.outPCMBuffer.nbSamples * a3.playChannels).slice();
            i3.reply(e4, s3.buffer, null, [s3.buffer]);
            break;
          }
        }
      }), this.tasks.set(e3.taskId, a3), 0;
    }
    checkUseStretchpitcher(e3) {
      const t3 = 1 !== e3.playRate || 1 !== e3.playTempo || 1 !== e3.playPitch || e3.enableJitterBuffer;
      if (e3.useStretchpitcher && !t3) for (let t4 = 0; t4 < e3.playChannels; t4++) e3.stretchpitcher.get(t4).flush();
    }
    setPlayRate(e3, t3) {
      const i3 = this.tasks.get(e3);
      if (i3) {
        i3.enableJitterBuffer && f.f[15](i3.stats + 32) / f.f[15](i3.stats + 244) * 1e3 <= f.f[15](i3.stats + 280) && (t3 = 1), i3.playRate = t3;
        for (let e4 = 0; e4 < i3.playChannels; e4++) i3.stretchpitcher.get(e4).setRate(t3);
        this.checkUseStretchpitcher(i3), i3.masterTimer.setRate(i3.playRate * i3.playTempo), i3.fakePlay && (i3.fakePlayStartTimestamp = (0, B.A)(), i3.fakePlaySamples = BigInt(0));
      }
    }
    async setPlayTempo(e3, t3) {
      const i3 = this.tasks.get(e3);
      if (i3) {
        i3.playTempo = t3;
        for (let e4 = 0; e4 < i3.playChannels; e4++) i3.stretchpitcher.get(e4).setTempo(t3);
        this.checkUseStretchpitcher(i3), i3.masterTimer.setRate(i3.playRate * i3.playTempo), i3.fakePlay && (i3.fakePlayStartTimestamp = (0, B.A)(), i3.fakePlaySamples = BigInt(0));
      }
    }
    setPlayPitch(e3, t3) {
      const i3 = this.tasks.get(e3);
      if (i3) {
        i3.playPitch = t3;
        for (let e4 = 0; e4 < i3.playChannels; e4++) i3.stretchpitcher.get(e4).setPitch(t3);
        this.checkUseStretchpitcher(i3);
      }
    }
    async beforeSeek(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        if (t3.fakePlay || t3.pausing ? this.clearFakePlayTimer(t3) : (w.Yz("wait current pull front frame before seek, taskId: ".concat(t3.taskId), L, 677), await new (o())((e4) => {
          t3.seekSync = e4;
        })), t3.seeking = true, t3.stretchpitcher.size) for (const e4 of t3.stretchpitcher.keys()) t3.stretchpitcher.get(e4).clear();
        t3.waitPCMBuffer && (t3.waitAVFrame && (p.M[20](t3.waitPCMBuffer, 0), p.M[15](t3.waitPCMBuffer + 12, 0), t3.avframePool.release(t3.waitAVFrame), t3.waitAVFrame = 0), this.avPCMBufferPool.release(t3.waitPCMBuffer), t3.waitPCMBuffer = 0), w.Yz("before seek end, taskId: ".concat(t3.taskId), L, 705);
      }
    }
    async syncSeekTime(e3, t3, i3) {
      const r3 = this.tasks.get(e3);
      if (r3) {
        let a3 = false;
        for (; ; ) {
          if (!r3.leftIPCPort) return r3.ended = true, void w.R8("pull audio frame end after unregisterTask, taskId: ".concat(e3), L, 719);
          let s3 = (0, B.A)(), n2 = f.f[15](r3.stats + 120);
          for (; !a3 && i3 && f.f[15](r3.stats + 120) > i3; ) await new R.A(0), (0, B.A)() - s3 > 200 && n2 === f.f[15](r3.stats + 120) && (a3 = true), n2 !== f.f[15](r3.stats + 120) && (n2 = f.f[15](r3.stats + 120), s3 = (0, B.A)());
          let o2 = await r3.leftIPCPort.request("pull");
          if (o2 < 0) {
            w.R8("pull audio frame end after seek, taskId: ".concat(e3), L, 741), r3.ended = true;
            break;
          }
          if (t3 < BigInt(0)) {
            w.pq("use the first audio frame because of the seek time".concat(t3, " < 0"), L, 747);
            break;
          }
          const c2 = (0, T.Mr)(f.f[17](o2 + 104), o2 + 120, M.i0);
          if (c2 >= t3) {
            r3.paddingAVFrame = o2, r3.ended = false, r3.lastNotifyPTS = c2, p.M[17](r3.stats + 328, c2), r3.currentPTS = c2, r3.masterTimer.setMasterTime(t3), r3.lastMasterPts = t3;
            break;
          }
          r3.avframePool.release(o2);
        }
        w.Yz("sync seek time end, taskId: ".concat(r3.taskId), L, 775);
      }
    }
    async afterSeek(e3, t3) {
      const i3 = this.tasks.get(e3);
      i3 && (i3.seeking = false, i3.receivePCMSync && (i3.receivePCMSync(), i3.receivePCMSync = null), i3.pausing || (i3.fakePlay && (i3.fakePlayStartTimestamp = (0, B.A)(), i3.fakePlaySamples = BigInt(0), this.fakePlayNext(i3)), i3.lastRenderTimestamp = (0, B.A)()), w.Yz("after seek end, taskId: ".concat(i3.taskId), L, 797));
    }
    async restart(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        var i3;
        if (t3.lastNotifyPTS = BigInt(0), t3.ended = false, t3.firstPlayed = false, t3.stretchpitcherEnded = false, null !== (i3 = t3.stretchpitcher) && void 0 !== i3 && i3.size) for (let e4 = 0; e4 < t3.playChannels; e4++) {
          var r3;
          null === (r3 = t3.stretchpitcher.get(e4)) || void 0 === r3 || r3.clear();
        }
        this.clearFakePlayTimer(t3), t3.fakePlaySamples = BigInt(0), t3.fakePlayStartTimestamp = 0, t3.lastRenderTimestamp = (0, B.A)(), t3.masterTimer.setMasterTime(t3.startPTS), w.Yz("restart task, taskId: ".concat(t3.taskId), L, 819);
      }
    }
    async setMasterTime(e3, t3) {
      const i3 = this.tasks.get(e3);
      i3 && i3.masterTimer.setMasterTime(t3);
    }
    fakeSyncPts(e3) {
      const t3 = e3.masterTimer.getMasterTime();
      t3 - e3.lastNotifyPTS >= BigInt(1e3) && (e3.lastNotifyPTS = t3, p.M[17](e3.stats + 328, t3), e3.controlIPCPort.notify("syncPts", { pts: t3 }));
    }
    syncPts(e3, t3) {
      const i3 = ((e3.useStretchpitcher ? e3.stretchpitcher.get(0).getLatency() : 0) + (3 * t3 >>> 1)) / e3.playSampleRate * 1e3 >>> 0, r3 = _.T9(e3.currentPTS - BigInt(Math.floor(i3)), BigInt(0));
      p.M[17](e3.stats + 328, r3), e3.currentPTS - e3.lastNotifyPTS >= BigInt(1e3) && (e3.lastNotifyPTS = e3.currentPTS, e3.controlIPCPort.notify("syncPts", { pts: r3 }));
    }
    clearFakePlayTimer(e3) {
      e3.fakePlayTimer && (e3.fakePlayWorkerTimer ? (e3.fakePlayWorkerTimer.clearTimeout(e3.fakePlayTimer), e3.fakePlayWorkerTimer.destroy(), e3.fakePlayWorkerTimer = null) : clearTimeout(e3.fakePlayTimer), e3.fakePlayTimer = null);
    }
    setFakePlayTimer(e3, t3, i3) {
      return (0, D.A)() ? setTimeout(t3, i3) : (e3.fakePlayWorkerTimer || (e3.fakePlayWorkerTimer = new U.A()), e3.fakePlayWorkerTimer.setTimeout(t3, i3));
    }
    async fakePlayNext(e3) {
      const t3 = e3.paddingAVFrame || await e3.leftIPCPort.request("pull");
      if (e3.paddingAVFrame = 0, t3 < 0) return e3.ended = true, w.pq("audio fake render ended, taskId: ".concat(e3.taskId), L, 890), void e3.controlIPCPort.notify("ended");
      if (!e3.fakePlay || e3.pausing) return void e3.avframePool.release(t3);
      let i3 = f.f[15](t3 + 76) / f.f[15](t3 + 152) * 1e3 >>> 0;
      i3 /= e3.playRate * e3.playTempo;
      const r3 = (0, T.Mr)(f.f[17](t3 + 104), t3 + 120, M.i0);
      if ((r3 > BigInt(0) && e3.masterTimer.getMasterTime() - r3 > z || e3.isLive && r3 - e3.currentPTS > BigInt(4e3)) && e3.masterTimer.setMasterTime(r3), e3.currentPTS - e3.masterTimer.getMasterTime() > z) return e3.paddingAVFrame = t3, this.fakeSyncPts(e3), void (e3.fakePlayTimer = this.setFakePlayTimer(e3, () => {
        e3.fakePlayTimer = null, this.fakePlayNext(e3);
      }, i3));
      this.syncPts(e3, 0);
      let a3 = BigInt(Math.floor((0, B.A)() - e3.fakePlayStartTimestamp)) * BigInt(0 | f.f[15](t3 + 152)) / BigInt(1e3);
      a3 = a3 * BigInt(Math.floor(e3.playRate * e3.playTempo * 100)) / BigInt(100), i3 -= Number(a3 - e3.fakePlaySamples) / f.f[15](t3 + 152) * 1e3 >>> 0, e3.fakePlaySamples += BigInt(0 | f.f[15](t3 + 76)), e3.avframePool.release(t3), e3.currentPTS = r3, p.M[15](e3.stats + 80, f.f[15](e3.stats + 80) + 1), p.M[17](e3.stats + 344, r3), e3.lastRenderTimestamp && p.M[15](e3.stats + 252, Math.max((0, B.A)() - e3.lastRenderTimestamp, f.f[15](e3.stats + 252))), e3.lastRenderTimestamp = (0, B.A)(), e3.currentPTS - e3.lastNotifyPTS >= BigInt(1e3) && (e3.lastNotifyPTS = e3.currentPTS, p.M[17](e3.stats + 328, e3.currentPTS), e3.controlIPCPort.notify("syncPts", { pts: e3.currentPTS })), e3.fakePlayTimer = this.setFakePlayTimer(e3, () => {
        e3.fakePlayTimer = null, this.fakePlayNext(e3);
      }, i3);
    }
    async fakePlay(e3) {
      const t3 = this.tasks.get(e3);
      t3 && (t3.fakePlayStartTimestamp = (0, B.A)(), t3.fakePlay = true, t3.fakePlaySamples = BigInt(0), this.fakePlayNext(t3), w.pq("start fake play, taskId: ".concat(t3.taskId), L, 971));
    }
    async pause(e3) {
      const t3 = this.tasks.get(e3);
      t3 && (t3.pausing = true, t3.lastMasterPts = t3.masterTimer.getMasterTime(), t3.fakePlay && this.clearFakePlayTimer(t3), w.pq("task paused, taskId: ".concat(t3.taskId), L, 984));
    }
    async unpause(e3) {
      const t3 = this.tasks.get(e3);
      t3 && (t3.pausing = false, t3.masterTimer.setMasterTime(t3.lastMasterPts), t3.lastMasterPts = M.Dh, t3.fakePlay && (t3.fakePlayStartTimestamp = (0, B.A)(), t3.fakePlaySamples = BigInt(0), t3.lastRenderTimestamp = (0, B.A)(), this.fakePlayNext(t3)), w.pq("task unpaused, taskId: ".concat(t3.taskId), L, 1001));
    }
    async stop(e3) {
      const t3 = this.tasks.get(e3);
      t3 && (t3.stopping = true, t3.receivePCMSync && (t3.receivePCMSync(), t3.receivePCMSync = null), w.pq("task stopping, taskId: ".concat(t3.taskId), L, 1013));
    }
    async registerTask(e3) {
      return this.tasks.has(e3.taskId) ? A.lh : this.createTask(e3);
    }
    async unregisterTask(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        if (this.clearFakePlayTimer(t3), t3.resampler && t3.resampler.close(), t3.stretchpitcher.size) {
          for (const e4 of t3.stretchpitcher.keys()) t3.stretchpitcher.get(e4).close();
          t3.stretchpitcher.clear();
        }
        t3.outPCMBuffer && ((0, I.aI)(t3.outPCMBuffer.data), (0, I.aI)(t3.outPCMBuffer[c.o9]), (0, m.A)(t3.outPCMBuffer)), t3.waitPCMBuffer && (t3.waitAVFrame && (p.M[20](t3.waitPCMBuffer, 0), p.M[15](t3.waitPCMBuffer + 12, 0), t3.avframePool.release(t3.waitAVFrame), t3.waitAVFrame = 0), this.avPCMBufferPool.release(t3.waitPCMBuffer), t3.waitPCMBuffer = 0), t3.paddingAVFrame && t3.avframePool.release(t3.paddingAVFrame), t3.leftIPCPort && (t3.leftIPCPort.destroy(), t3.leftIPCPort = null), t3.rightIPCPort && (t3.rightIPCPort.destroy(), t3.rightIPCPort = null), t3.controlIPCPort && (t3.controlIPCPort.destroy(), t3.controlIPCPort = null), this.tasks.delete(e3), w.Yz("unregisterTask task, taskId: ".concat(e3), L, 1070);
      }
    }
    async clear() {
      await super.clear(), this.avPCMBufferList.clear((e3) => {
        f.f[20](e3) && ((0, I.aI)(f.f[20](e3)), (0, I.aI)(e3));
      }, 20), (0, m.A)(this.avPCMBufferList), (0, m.A)(this.avPCMBufferListMutex);
    }
  }
}, 72480: (e2, t2, i2) => {
  i2.d(t2, { A: () => ce });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(61499), o = i2(12264), c = i2(29170), d2 = i2(63939), h = i2(50932), l = (i2(9599), i2(44527)), u = i2(9705), f = i2(84149), p = i2(44315), m = i2(24175), g = i2(34531), v = i2(75), A = i2(37837), y = i2(79630), w = i2(4624), b = i2(84290), k = i2(39148), x = i2(72739), I = i2(44328), P = i2(77231), S = i2(43607), T = i2(71517), M = i2(14686), B = i2(49032), R = i2(94561), _ = i2(39638), C = i2(26429), U = i2(71762), D = i2(72703), E = i2(67672), L = i2(62815), z = i2(67659), $ = i2(59166), F = i2(50522), N = i2(28773), V = i2(5299), O = i2(85487), q = i2(95808), W = i2(95797), H = i2(92047), G = i2(59331), j = i2(83855), Q = i2(16634), Y = i2(29118), K = i2(6839), X = i2(34577), J = i2(47094), Z = i2(18453), ee = i2(3791), te = i2(85611), ie = i2(78070), re = i2(47344), ae = i2(98854), se = i2(57455);
  const ne = "src/avpipeline/DemuxPipeline.ts", oe = -1;
  class ce extends l.A {
    constructor() {
      super(), (0, r2.A)(this, "baseTime", 0), (0, r2.A)(this, "timecodeCallbackSent", false);
    }
    createTask(e3) {
      let t3, i3;
      if (e3.mainTaskId) {
        const r4 = this.tasks.get(e3.mainTaskId);
        t3 = r4.leftIPCPort, i3 = r4.controlIPCPort;
      } else t3 = new f.Ay(e3.leftPort), e3.controlPort && (i3 = new f.Ay(e3.controlPort));
      const r3 = e3.bufferLength || 1048576, a3 = (0, A.sY)(r3);
      if (!a3) return u.gR;
      const n2 = (0, A.sY)(r3);
      if (!n2) return u.gR;
      const d3 = new y.A(a3, r3), h2 = new m.A(r3, true, d3), l2 = new y.A(n2, r3), v2 = new g.A(r3, true, l2);
      e3.isLive || (h2.flags |= 1), e3.flags && (h2.flags |= e3.flags), h2.onFlush = async (i4) => {
        const r4 = { pointer: i4.byteOffset, length: i4.length };
        e3.ioloaderOptions && (r4.ioloaderOptions = e3.ioloaderOptions);
        try {
          const e4 = await t3.request("read", r4);
          return E.ai(e4) ? e4 : ((0, M.lW)(r4.pointer, e4.length, e4), e4.length);
        } catch (e4) {
          return -1048574;
        }
      }, h2.onSeek = async (i4) => {
        try {
          const r4 = { pos: i4 };
          return e3.ioloaderOptions && (r4.ioloaderOptions = e3.ioloaderOptions), t3.request("seek", r4);
        } catch (e4) {
          return -1048574;
        }
      }, h2.onSize = async () => {
        try {
          return t3.request("size");
        } catch (e4) {
          return BigInt(-1048574);
        }
      }, v2.onFlush = async (e4) => {
        const i4 = { pointer: e4.byteOffset, length: e4.length };
        try {
          return await t3.request("write", i4);
        } catch (e5) {
          return -1048574;
        }
      };
      const w2 = (0, p.Xv)();
      return w2.ioReader = h2, w2.ioWriter = v2, W.A.wasmBaseSupported && (w2.getDecoderResource = async (e4, t4) => {
        if (!i3) return;
        const r4 = await i3.request("getDecoderResource", { codecId: t4, mediaType: e4 });
        return (0, R.A)(r4, 0 === e4);
      }), this.tasks.set(e3.taskId, { ...e3, leftIPCPort: t3, rightIPCPorts: new (s2())(), controlIPCPort: i3, formatContext: w2, ioReader: h2, iBuffer: a3, oBuffer: n2, cacheAVPackets: new (s2())(), cacheRequests: new (s2())(), streamIndexFlush: new (s2())(), pendingAVPackets: new (s2())(), realFormat: -1, demuxEnded: false, loop: null, gopCounter: 0, lastKeyFramePts: BigInt(0), lastAudioDts: BigInt(0), lastVideoDts: BigInt(0), avpacketPool: new b.A((0, c.A)(e3.avpacketList, o.A), e3.avpacketListMutex), unmodifiedPts: BigInt(0), firstIFrameTimecode: void 0, firstIFramePts: void 0, timecodeCallbackSent: false }), 0;
    }
    async openStream(e3, t3 = 3e3) {
      const r3 = this.tasks.get(e3);
      if (r3) {
        let e4, a3, s3 = await r3.leftIPCPort.request("open");
        if (s3 < 0) return w.z3("open ioloader failed, ret: ".concat(s3), ne, 330), s3;
        try {
          6 !== r3.format ? (e4 = await (0, B.A)(r3.ioReader, r3.format), r3.format = e4) : e4 = r3.format;
        } catch (e5) {
          return u.LR;
        }
        switch (e4) {
          case 0:
            a3 = new N.A(r3.formatOptions);
            break;
          case 1:
            a3 = new H.A(r3.formatOptions);
            break;
          case 2:
            a3 = new G.A();
            break;
          case 3:
            a3 = new j.A();
            break;
          case 5:
            a3 = new Q.A();
            break;
          case 4:
            a3 = new Y.A();
            break;
          case 14:
            a3 = new K.A();
            break;
          case 8:
          case 9:
            a3 = new X.A();
            break;
          case 15:
            a3 = new J.A();
            break;
          case 17:
            a3 = new Z.A();
            break;
          case 16:
            a3 = new ee.A();
            break;
          case 18:
            a3 = new te.A();
            break;
          case 19:
            a3 = new ie.A();
            break;
          case 20:
            a3 = new re.A();
            break;
          case 21:
            a3 = new ae.A();
            break;
          case 11:
            a3 = new V.A(r3.formatOptions);
            break;
          case 12:
            a3 = new O.A(r3.formatOptions);
            break;
          case 13:
            a3 = new q.A(r3.formatOptions);
            break;
          case 6:
            a3 = new F.A(r3.formatOptions);
            break;
          case 10:
            a3 = new (await i2.e(635).then(i2.bind(i2, 96635))).default(r3.formatOptions);
            break;
          default:
            return w.z3("format not support", ne, 552), u.E$;
        }
        return r3.realFormat = e4, r3.formatContext.iformat = a3, v.ho(r3.formatContext, { maxAnalyzeDuration: t3, fastOpen: r3.isLive });
      }
      w.h2("task not found", ne, 567);
    }
    async getFormat(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) return t3.realFormat;
      w.h2("task not found", ne, 577);
    }
    async analyzeStreams(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        let e4 = await v.Ib(t3.formatContext);
        if (e4) return e4;
        const i3 = [];
        for (let e5 = 0; e5 < t3.formatContext.streams.length; e5++) {
          const r3 = t3.formatContext.streams[e5];
          i3.push({ index: r3.index, id: r3.id, codecpar: r3.codecpar[n.o9], nbFrames: r3.nbFrames, metadata: r3.metadata, duration: r3.duration, startTime: r3.startTime, disposition: r3.disposition, timeBase: { den: r3.timeBase.den, num: r3.timeBase.num } });
        }
        return { metadata: t3.formatContext.metadata, format: t3.realFormat, chapters: t3.formatContext.chapters, streams: i3 };
      }
      w.h2("task not found", ne, 617);
    }
    replyAVPacket(e3, t3, i3, r3) {
      if ((0, _.A)() && !C.USE_THREADS && (0, D.A)(r3)) {
        const a3 = (0, U.wm)(r3), s3 = [a3.data.buffer];
        return a3.sideData.length && a3.sideData.forEach((e4) => {
          s3.push(e4.data.buffer);
        }), t3.reply(i3, a3, null, s3), void e3.avpacketPool.release(r3);
      }
      t3.reply(i3, r3);
    }
    async connectStreamTask(e3, t3, i3) {
      const r3 = this.tasks.get(e3);
      if (r3) {
        const e4 = new f.Ay(i3);
        r3.cacheAVPackets.set(t3, []), e4.streamIndex = t3, e4.on(f.S3, async (t4) => {
          switch (t4.method) {
            case "pull": {
              const i4 = r3.cacheAVPackets.get(e4.streamIndex);
              if (i4.length) {
                const a3 = i4.shift();
                0 !== r3.stats && (1 === r3.formatContext.streams[d2.f[15](a3 + 32)].codecpar.codecType ? h.M[15](r3.stats + 32, d2.f[15](r3.stats + 32) - 1) : 0 === r3.formatContext.streams[d2.f[15](a3 + 32)].codecpar.codecType && h.M[15](r3.stats + 120, d2.f[15](r3.stats + 120) - 1)), this.replyAVPacket(r3, e4, t4, a3);
              } else r3.demuxEnded ? e4.reply(t4, -1048576) : (r3.cacheRequests.set(e4.streamIndex, t4), r3.loop && r3.loop.isStarted() && r3.loop.resetInterval());
              break;
            }
          }
        }), r3.rightIPCPorts.set(t3, e4), w.Yz("connect stream ".concat(t3, ", taskId: ").concat(r3.taskId), ne, 678);
      } else w.h2("task not found", ne, 681);
    }
    async addPendingStream(e3, t3) {
      const i3 = this.tasks.get(e3);
      i3 ? i3.pendingAVPackets.set(t3, []) : w.h2("task not found", ne, 691);
    }
    async changeConnectStream(e3, t3, i3, r3 = true, a3 = false) {
      const s3 = this.tasks.get(e3);
      if (s3) {
        if (t3 === i3) return;
        let e4 = s3.cacheAVPackets.get(i3);
        const n2 = s3.rightIPCPorts.get(i3), o2 = s3.cacheRequests.get(i3);
        e4 || w.R8("oldStreamIndex ".concat(i3, " not found"), ne, 708), await s3.loop.stopBeforeNextTick(), r3 ? s3.pendingAVPackets.has(t3) || (x.__(e4, (e5) => {
          s3.avpacketPool.release(e5);
        }), e4.length = 0) : s3.streamIndexFlush.set(t3, true), s3.pendingAVPackets.has(t3) && (s3.pendingAVPackets.set(i3, e4), e4 = s3.pendingAVPackets.get(t3), s3.pendingAVPackets.delete(t3)), 1 === s3.formatContext.streams[t3].codecpar.codecType ? h.M[15](s3.stats + 32, e4.length) : 0 === s3.formatContext.streams[t3].codecpar.codecType && h.M[15](s3.stats + 120, e4.length), n2.streamIndex = t3, s3.cacheAVPackets.set(t3, e4), s3.rightIPCPorts.set(t3, n2), s3.cacheAVPackets.delete(i3), s3.rightIPCPorts.delete(i3), o2 && (s3.cacheRequests.set(t3, o2), s3.cacheRequests.delete(i3)), r3 && !a3 || s3.loop.start(), w.Yz("changed connect stream, new ".concat(t3, ", old: ").concat(i3, ", force: ").concat(r3, ", taskId: ").concat(s3.taskId), ne, 754);
      } else w.h2("task not found", ne, 757);
    }
    async doDemux(e3, t3) {
      const i3 = e3.avpacketPool.alloc();
      let r3 = await v.Cj(e3.formatContext, i3);
      if (r3) {
        e3.avpacketPool.release(i3), -1048576 !== r3 && -1048572 !== r3 && (e3.controlIPCPort.notify("demuxError", { code: r3 }), w.z3("demux error, ret: ".concat(r3, ", taskId: ").concat(e3.taskId), ne, 946));
        for (let t4 of e3.cacheRequests.keys()) e3.cacheAVPackets.get(t4).length || (e3.rightIPCPorts.get(t4).reply(e3.cacheRequests.get(t4), -1048576), e3.cacheRequests.delete(t4));
      } else {
        const r4 = d2.f[15](i3 + 32), a3 = e3.formatContext.streams[r4];
        if (0 !== e3.stats) {
          if (1 === a3.codecpar.codecType && e3.cacheAVPackets.has(r4)) {
            if (h.M[17](e3.stats + 24, d2.f[17](e3.stats + 24) + BigInt(1)), h.M[17](e3.stats + 16, d2.f[17](e3.stats + 16) + BigInt(0 | d2.f[15](i3 + 28))), d2.f[17](e3.stats + 24) > 1 && d2.f[17](i3 + 16) > e3.lastAudioDts) {
              const t4 = e3.cacheAVPackets.get(r4);
              t4 && t4.length ? h.M[15](e3.stats + 244, Math.round(d2.f[15](i3 + 76) / d2.f[15](i3 + 72) / (Number(BigInt.asIntN(32, d2.f[17](i3 + 16) - d2.f[17](t4[0] + 16))) / t4.length))) : h.M[15](e3.stats + 244, Math.round(d2.f[15](i3 + 76) / d2.f[15](i3 + 72) / Number(BigInt.asIntN(32, d2.f[17](i3 + 16) - e3.lastAudioDts))));
            }
            e3.lastAudioDts = d2.f[17](i3 + 16);
          } else if (0 === a3.codecpar.codecType && e3.cacheAVPackets.has(r4)) {
            if (h.M[17](e3.stats + 112, d2.f[17](e3.stats + 112) + BigInt(1)), h.M[17](e3.stats + 104, d2.f[17](e3.stats + 104) + BigInt(0 | d2.f[15](i3 + 28))), 1 & d2.f[15](i3 + 36) ? (h.M[17](e3.stats + 176, d2.f[17](e3.stats + 176) + BigInt(1)), d2.f[17](e3.stats + 176) > 1 && d2.f[17](i3 + 8) > e3.lastKeyFramePts && (h.M[15](e3.stats + 96, e3.gopCounter), e3.gopCounter = 1, h.M[15](e3.stats + 92, Number(BigInt.asIntN(32, (0, I.Mr)(d2.f[17](i3 + 8) - e3.lastKeyFramePts, i3 + 72, P.i0))))), e3.lastKeyFramePts = d2.f[17](i3 + 8)) : e3.gopCounter++, d2.f[17](e3.stats + 112) > 1 && d2.f[17](i3 + 16) > e3.lastVideoDts) {
              const t4 = e3.cacheAVPackets.get(r4);
              t4 && t4.length ? h.M[15](e3.stats + 232, Math.round(d2.f[15](i3 + 76) / d2.f[15](i3 + 72) / (Number(BigInt.asIntN(32, d2.f[17](i3 + 16) - d2.f[17](t4[0] + 16))) / t4.length))) : h.M[15](e3.stats + 232, Math.round(d2.f[15](i3 + 76) / d2.f[15](i3 + 72) / Number(BigInt.asIntN(32, d2.f[17](i3 + 16) - e3.lastVideoDts))));
            }
            e3.lastVideoDts = d2.f[17](i3 + 16);
          }
        }
        if (0 === a3.codecpar.codecType && 1 & d2.f[15](i3 + 36)) {
          const t4 = (0, se.C)(i3, a3);
          t4 && void 0 === e3.firstIFrameTimecode && (e3.firstIFrameTimecode = BigInt(t4), e3.firstIFramePts = d2.f[17](i3 + 8), e3.controlIPCPort && !e3.timecodeCallbackSent && (e3.controlIPCPort.notify("seiTimecode", { timecode: t4, pts: d2.f[17](i3 + 8), streamIndex: r4, taskId: e3.taskId }), e3.timecodeCallbackSent = true));
        }
        if (e3.streamIndexFlush.get(r4)) {
          if (!(0, T.rU)(i3, 1) && a3.codecpar.extradataSize) {
            const e4 = (0, A.sY)(a3.codecpar.extradataSize);
            (0, M.Mr)(e4, a3.codecpar.extradata, a3.codecpar.extradataSize), (0, T.Ow)(i3, 1, e4, a3.codecpar.extradataSize);
          }
          e3.streamIndexFlush.set(r4, false);
        }
        if (e3.cacheRequests.has(r4)) this.replyAVPacket(e3, e3.rightIPCPorts.get(r4), e3.cacheRequests.get(r4), i3), e3.cacheRequests.delete(r4);
        else if (e3.cacheAVPackets.has(r4)) e3.cacheAVPackets.get(r4).push(i3), 0 !== e3.stats && (1 === a3.codecpar.codecType ? h.M[15](e3.stats + 32, d2.f[15](e3.stats + 32) + 1) : 0 === a3.codecpar.codecType && h.M[15](e3.stats + 120, d2.f[15](e3.stats + 120) + 1)), 3 === a3.codecpar.codecType && e3.cacheAVPackets.get(r4).length > t3 && e3.avpacketPool.release(e3.cacheAVPackets.get(r4).shift());
        else if (e3.pendingAVPackets.has(r4)) {
          const a4 = e3.pendingAVPackets.get(r4);
          if (a4.push(i3), 0 !== e3.stats) {
            const i4 = e3.formatContext.streams[r4].codecpar.codecType;
            for (; a4.length; ) {
              const r5 = a4[0], s3 = (0, I.Mr)(d2.f[17](r5 + 8), r5 + 72, P.i0), n2 = S.T9(d2.f[17](e3.stats + 328), d2.f[17](e3.stats + 336));
              if (1 === i4 && s3 >= n2 || 0 === i4 && s3 >= n2 || 1 !== i4 && 0 !== i4 && a4.length <= t3) break;
              e3.avpacketPool.release(a4.shift());
            }
          } else a4.length > t3 && e3.avpacketPool.release(a4.shift());
        } else e3.rightIPCPorts.has(oe) ? e3.cacheRequests.has(oe) ? (this.replyAVPacket(e3, e3.rightIPCPorts.get(oe), e3.cacheRequests.get(oe), i3), e3.cacheRequests.delete(oe)) : e3.cacheAVPackets.get(oe).push(i3) : e3.avpacketPool.release(i3);
      }
      return r3;
    }
    async startDemux(e3, t3, i3) {
      const r3 = this.tasks.get(e3);
      if (r3) {
        if (i3 = Math.max(i3, 2 === r3.format ? 20 : 10), r3.loop && r3.loop.destroy(), r3.loop = new k.A(async () => {
          if (!t3) {
            let e4 = false, t4 = false;
            if (r3.cacheAVPackets.forEach((a3, s3) => {
              const n2 = r3.formatContext.streams.find((e5) => e5.index === s3);
              a3.length < i3 && (3 !== n2.codecpar.codecType || 1 === r3.cacheAVPackets.size) && (e4 = true), a3.length > Math.max(2 * i3, 5e3) && (t4 = true);
            }), !e4 || t4) return void r3.loop.emptyTask();
          }
          await this.doDemux(r3, i3) && (r3.demuxEnded = true, w.pq("demuxer ended, taskId: ".concat(r3.taskId), ne, 997), r3.loop.stop());
        }, 0, 0, true, false), t3 && r3.cacheAVPackets.size) for (; ; ) {
          let e4 = false;
          if (r3.cacheAVPackets.forEach((t4, r4) => {
            t4.length >= i3 && (e4 = true);
          }), e4) break;
          if (await this.doDemux(r3, i3)) return void (r3.demuxEnded = true);
        }
        r3.loop.start(), w.Yz("start demux loop, taskId: ".concat(r3.taskId), ne, 1025);
      } else w.h2("task not found", ne, 1028);
    }
    async seek(e3, t3, i3, r3 = -1) {
      const a3 = this.tasks.get(e3);
      if (a3) {
        if (a3.loop) {
          await a3.loop.stopBeforeNextTick();
          let s3 = await v.jF(a3.formatContext, r3, t3, i3);
          if (s3 >= BigInt(0)) {
            let n2 = function(e4) {
              x.__(e4, (e5) => {
                if (2 & a3.formatContext.ioReader.flags) {
                  const t4 = (0, T.rU)(e5, 1), i4 = a3.formatContext.streams[d2.f[15](e5 + 32)];
                  !i4.sideData[1] && t4 && (i4.sideData[1] = (0, M.s3)(d2.f[20](t4), d2.f[25](t4 + 4)).slice());
                }
                a3.avpacketPool.release(e5);
              }), e4.length = 0;
            };
            a3.cacheAVPackets.forEach(n2), a3.pendingAVPackets.forEach(n2), 0 !== a3.stats && a3.cacheAVPackets.forEach((e4, t4) => {
              const i4 = a3.formatContext.streams.find((e5) => e5.index === t4);
              1 === i4.codecpar.codecType ? h.M[15](a3.stats + 32, 0) : 0 === i4.codecpar.codecType && h.M[15](a3.stats + 120, 0);
            });
            const o2 = a3.avpacketPool.alloc();
            for (; s3 = await v.Cj(a3.formatContext, o2), !(s3 < 0 || a3.cacheAVPackets.has(d2.f[15](o2 + 32))); ) ;
            if (s3 >= 0) {
              a3.demuxEnded = false;
              const c2 = d2.f[15](o2 + 32);
              return a3.cacheAVPackets.get(c2).push(o2), 0 !== a3.stats && (1 === a3.formatContext.streams[d2.f[15](o2 + 32)].codecpar.codecType ? h.M[15](a3.stats + 32, d2.f[15](a3.stats + 32) + 1) : 0 === a3.formatContext.streams[d2.f[15](o2 + 32)].codecpar.codecType && h.M[15](a3.stats + 120, d2.f[15](a3.stats + 120) + 1)), a3.loop.start(), (0, I.Mr)(S.T9(d2.f[17](o2 + 8), BigInt(0)), o2 + 72, P.i0);
            }
            return w.R8("got first packet failed after seek, taskId: ".concat(a3.taskId), ne, 1099), a3.avpacketPool.release(o2), a3.demuxEnded = true, t3;
          }
          return s3;
        }
        {
          w.pq("seek before demux loop start", ne, 1110);
          let l2 = await v.jF(a3.formatContext, -1, t3, i3);
          return l2 < 0 ? l2 : t3;
        }
      }
    }
    async croppingAVPacketQueue(e3, t3) {
      const i3 = this.tasks.get(e3);
      if (i3) {
        let n2 = function(e4, t4) {
          if (!(1 & d2.f[15](e4 + 36))) return false;
          let i4 = 0 !== (0, T.rU)(e4, 1);
          return !i4 && 64 & d2.f[15](e4 + 36) && (27 === t4 ? i4 = !!L.sL((0, T.iI)(e4)) : 173 === t4 ? i4 = !!z.sL((0, T.iI)(e4)) : 196 === t4 && (i4 = !!$.sL((0, T.iI)(e4)))), i4;
        };
        let r3 = t3;
        const a3 = new (s2())();
        const o2 = new (s2())();
        i3.cacheAVPackets.forEach((e4, t4) => {
          o2.set(t4, e4);
        }), i3.pendingAVPackets.forEach((e4, t4) => {
          o2.set(t4, e4);
        }), o2.forEach((e4, s3) => {
          const o3 = i3.formatContext.streams[s3].codecpar.codecType, c2 = i3.formatContext.streams[s3].codecpar.codecId;
          if (0 === o3) {
            const i4 = d2.f[17](e4[e4.length - 1] + 16);
            let o4 = e4.length - 2;
            for (o4 = e4.length - 2; o4 >= 0; o4--) if (1 & d2.f[15](e4[o4] + 36) && (0, I.Mr)(i4 - d2.f[17](e4[o4] + 16), e4[o4] + 72, P.i0) >= t3) {
              r3 = S.T9(r3, (0, I.Mr)(i4 - d2.f[17](e4[o4] + 16), e4[o4] + 72, P.i0));
              break;
            }
            if ((27 === c2 || 173 === c2 || 196 === c2) && o4 > 0 && !n2(e4[o4], c2)) {
              for (let t4 = o4 - 1; t4 > 0; t4--) if (1 & d2.f[15](e4[t4] + 36) && n2(e4[t4], c2)) {
                r3 = S.T9(r3, (0, I.Mr)(i4 - d2.f[17](e4[t4] + 16), e4[t4] + 72, P.i0)), o4 = t4;
                break;
              }
            }
            o4 > 0 && a3.set(s3, o4);
          }
        }), o2.forEach((e4, t4) => {
          if (0 !== i3.formatContext.streams[t4].codecpar.codecType) {
            const i4 = d2.f[17](e4[e4.length - 1] + 16);
            let s3 = e4.length - 2;
            for (s3 = e4.length - 2; s3 >= 0 && !((0, I.Mr)(i4 - d2.f[17](e4[s3] + 16), e4[s3] + 72, P.i0) >= r3); s3--) ;
            s3 >= 0 && a3.set(t4, s3);
          }
        }), a3.size === o2.size && a3.forEach((e4, t4) => {
          const r4 = o2.get(t4);
          r4.splice(0, e4).forEach((e5) => {
            i3.avpacketPool.release(e5);
          });
          const a4 = i3.formatContext.streams[t4].codecpar.codecType;
          0 !== i3.stats && (1 === a4 ? h.M[15](i3.stats + 32, r4.length) : 0 === a4 && h.M[15](i3.stats + 120, r4.length));
        });
      }
    }
    async stop(e3) {
      const t3 = this.tasks.get(e3);
      t3 && (t3.formatContext.ioReader.flags |= 8);
    }
    async registerTask(e3) {
      return this.tasks.has(e3.taskId) ? u.lh : this.createTask(e3);
    }
    async unregisterTask(e3) {
      const t3 = this.tasks.get(e3);
      t3 && (t3.ioReader && 4 & t3.ioReader.flags && t3.ioReader.abort(), t3.loop && (await t3.loop.stopBeforeNextTick(), t3.loop.destroy()), t3.cacheAVPackets.forEach((e4) => {
        e4.forEach((e5) => {
          t3.avpacketPool.release(e5);
        });
      }), t3.pendingAVPackets.forEach((e4) => {
        e4.forEach((e5) => {
          t3.avpacketPool.release(e5);
        });
      }), t3.cacheRequests.forEach((e4, i3) => {
        t3.rightIPCPorts.get(i3).reply(e4, -1048576);
      }), t3.cacheRequests.clear(), await t3.formatContext.destroy(), t3.mainTaskId || (t3.leftIPCPort.destroy(), t3.controlIPCPort && t3.controlIPCPort.destroy()), t3.rightIPCPorts.forEach((e4) => {
        e4.destroy();
      }), t3.rightIPCPorts.clear(), t3.iBuffer && ((0, A.Eb)(t3.iBuffer), t3.iBuffer = 0), t3.oBuffer && ((0, A.Eb)(t3.oBuffer), t3.oBuffer = 0), this.tasks.delete(e3), w.Yz("unregisterTask task, taskId: ".concat(e3), ne, 1304));
    }
  }
}, 87243: (e2, t2, i2) => {
  i2.d(t2, { A: () => m });
  var r2 = i2(63939), a2 = i2(50932), s2 = i2(44527), n = i2(77580), o = i2(9705), c = i2(84149), d2 = i2(14686), h = i2(79686), l = i2(4624), u = i2(14619), f = i2(42383);
  const p = "src/avpipeline/IOPipeline.ts";
  class m extends s2.A {
    constructor() {
      super();
    }
    async createTask(e3) {
      let t3;
      switch (e3.type) {
        case 0:
          t3 = new n.A(e3.options);
          break;
        case 1:
          t3 = new h.A(e3.options);
          break;
        case 2:
          t3 = new u.A(e3.options);
          break;
        case 3:
          t3 = new f.A(e3.options);
          break;
        case 4:
          t3 = new (await i2.e(433).then(i2.bind(i2, 15433))).default(e3.options);
          break;
        case 5:
          t3 = new (await i2.e(576).then(i2.bind(i2, 41576))).default(e3.options);
          break;
        case 6:
          t3 = new (await i2.e(543).then(i2.bind(i2, 67543))).default(e3.options);
      }
      if (!t3) return o.UY;
      const s3 = new c.Ay(e3.rightPort), m2 = { ...e3, ioLoader: t3, ipcPort: s3 };
      return s3.on(c.S3, async (i3) => {
        switch (i3.method) {
          case "open":
            try {
              const r3 = await t3.open(e3.info, e3.range);
              if (r3 < 0) {
                l.z3("loader open error, ".concat(r3, ", taskId: ").concat(e3.taskId), p, 128), s3.reply(i3, null, r3);
                break;
              }
              s3.reply(i3, r3);
            } catch (t4) {
              l.z3("loader open error, ".concat(t4, ", taskId: ").concat(e3.taskId), p, 135), s3.reply(i3, null, t4);
            }
            break;
          case "read": {
            const n2 = i3.params.pointer, c2 = i3.params.length, h2 = i3.params.ioloaderOptions, u2 = (0, d2.JW)(n2, c2);
            try {
              const e4 = await t3.read(u2, h2);
              a2.M[17](m2.stats + 192, r2.f[17](m2.stats + 192) + BigInt(0 | e4)), s3.reply(i3, e4);
            } catch (t4) {
              if (!this.tasks.has(e3.taskId)) return;
              l.z3("loader read error, ".concat(t4, ", taskId: ").concat(e3.taskId), p, 159), s3.reply(i3, o.LR);
            }
            break;
          }
          case "write": {
            const n2 = i3.params.pointer, c2 = i3.params.length, h2 = (0, d2.JW)(n2, c2);
            try {
              const e4 = await t3.write(h2);
              a2.M[17](m2.stats + 200, r2.f[17](m2.stats + 200) + BigInt(0 | c2)), s3.reply(i3, e4);
            } catch (t4) {
              l.z3("loader write error, ".concat(t4, ", taskId: ").concat(e3.taskId), p, 181), s3.reply(i3, o.LR);
            }
            break;
          }
          case "seek": {
            const r3 = i3.params.pos, a3 = i3.params.ioloaderOptions;
            try {
              const n2 = await t3.seek(r3, a3);
              if (n2 < 0) {
                l.z3("loader seek error, ".concat(n2, ", taskId: ").concat(e3.taskId), p, 197), s3.reply(i3, null, n2);
                break;
              }
              s3.reply(i3, n2);
            } catch (t4) {
              l.z3("loader seek error, ".concat(t4, ", taskId: ").concat(e3.taskId), p, 204), s3.reply(i3, null, t4);
            }
            break;
          }
          case "size":
            s3.reply(i3, await t3.size());
        }
      }), this.tasks.set(e3.taskId, m2), 0;
    }
    async open(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) return await t3.ioLoader.open(t3.info, t3.range), 0;
    }
    async getDuration(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) return 4 === t3.type || 5 === t3.type ? t3.ioLoader.getDuration() : 0;
    }
    async hasAudio(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        if (5 === t3.type) return t3.ioLoader.hasAudio();
        if (4 === t3.type) return t3.ioLoader.hasAudio();
      }
      return false;
    }
    async hasVideo(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        if (5 === t3.type) return t3.ioLoader.hasVideo();
        if (4 === t3.type) return t3.ioLoader.hasVideo();
      }
      return false;
    }
    async hasSubtitle(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        if (5 === t3.type) return t3.ioLoader.hasSubtitle();
        if (4 === t3.type) return t3.ioLoader.hasSubtitle();
      }
      return false;
    }
    async getVideoList(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        if (5 === t3.type) return t3.ioLoader.getVideoList();
        if (4 === t3.type) return t3.ioLoader.getVideoList();
      }
      return { list: [], selectedIndex: 0 };
    }
    async getAudioList(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        if (5 === t3.type) return t3.ioLoader.getAudioList();
        if (4 === t3.type) return t3.ioLoader.getAudioList();
      }
      return { list: [], selectedIndex: 0 };
    }
    async getSubtitleList(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        if (5 === t3.type) return t3.ioLoader.getSubtitleList();
        if (4 === t3.type) return t3.ioLoader.getSubtitleList();
      }
      return { list: [], selectedIndex: 0 };
    }
    async selectVideo(e3, t3) {
      const i3 = this.tasks.get(e3);
      if (i3) {
        if (5 === i3.type) return i3.ioLoader.selectVideo(t3);
        if (4 === i3.type) return i3.ioLoader.selectVideo(t3);
      }
    }
    async selectAudio(e3, t3) {
      const i3 = this.tasks.get(e3);
      if (i3) {
        if (5 === i3.type) return i3.ioLoader.selectAudio(t3);
        if (4 === i3.type) return i3.ioLoader.selectAudio(t3);
      }
    }
    async selectSubtitle(e3, t3) {
      const i3 = this.tasks.get(e3);
      if (i3) {
        if (5 === i3.type) return i3.ioLoader.selectSubtitle(t3);
        if (4 === i3.type) return i3.ioLoader.selectSubtitle(t3);
      }
    }
    async getCurrentProtection(e3, t3) {
      const i3 = this.tasks.get(e3);
      if (i3 && 5 === i3.type) return i3.ioLoader.getCurrentProtection(t3);
    }
    async getMinBuffer(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        if (5 === t3.type) return t3.ioLoader.getMinBuffer();
        if (4 === t3.type) return t3.ioLoader.getMinBuffer();
      }
      return 0;
    }
    async registerTask(e3) {
      return this.tasks.has(e3.taskId) ? o.lh : this.createTask(e3);
    }
    async unregisterTask(e3) {
      const t3 = this.tasks.get(e3);
      t3 && (await t3.ioLoader.stop().catch((e4) => {
        l.R8("stop ioloader error: ".concat(e4, ", we will ignore it"), p, 422);
      }), t3.ipcPort.destroy(), this.tasks.delete(e3), l.Yz("unregisterTask task, taskId: ".concat(e3), p, 426));
    }
  }
}, 44527: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(4624);
  class o {
    constructor() {
      (0, r2.A)(this, "tasks", void 0), this.tasks = new (s2())();
    }
    async clear() {
      if (this.tasks.size) for (const e3 of this.tasks.keys()) await this.unregisterTask(e3);
    }
    async setLogLevel(e3) {
      n.V$(e3);
    }
    async getTaskCount() {
      return this.tasks.size;
    }
  }
}, 31138: (e2, t2, i2) => {
  i2.d(t2, { A: () => $ });
  var r2 = i2(54001), a2 = i2.n(r2), s2 = i2(63939), n = i2(50932), o = i2(12264), c = i2(29170), d2 = i2(9599), h = i2(44527), l = i2(9705), u = i2(84149), f = i2(40417), p = i2(71039), m = i2(4624), g = i2(16041), v = i2(67672), A = i2(72739), y = i2(13724), w = (i2(77162), i2(84290)), b = i2(39638), k = i2(44328), x = i2(86932), I = i2(77231), P = i2(95797), S = i2(72703), T = i2(94561), M = i2(71762), B = i2(37837), R = i2(71766), _ = i2(71517), C = i2(14686), U = i2(62815), D = i2(67659), E = i2(59166), L = i2(39381);
  const z = "src/avpipeline/VideoDecodePipeline.ts";
  class $ extends h.A {
    constructor() {
      super();
    }
    createWebCodecDecoder(e3, t3 = true) {
      return new p.A({ onError: (t4) => {
        e3.hardwareRetryCount > 3 || !e3.firstDecoded ? e3.targetDecoder === e3.hardwareDecoder ? (e3.targetDecoder = e3.softwareDecoder, e3.hardwareDecoder.close(), e3.hardwareDecoder = null, e3.decoderFallbackReady = this.openSoftwareDecoder(e3), m.R8("video decode error by hardware decoder(".concat(e3.hardwareRetryCount, "), taskId: ").concat(e3.taskId, ", error: ").concat(t4, ", try to fallback to software decoder"), z, 133)) : e3.targetDecoder === e3.softwareDecoder && (e3.softwareDecoder.close(), e3.softwareDecoder = this.createWasmcodecDecoder(e3, e3.resource), e3.softwareDecoderOpened = false, e3.decoderFallbackReady = this.openSoftwareDecoder(e3), m.R8("video decode error by software(webcodecs) decoder(".concat(e3.hardwareRetryCount, "), taskId: ").concat(e3.taskId, ", error: ").concat(t4, ", try to fallback to software(wasm) decoder"), z, 140)) : (e3.hardwareRetryCount++, e3.targetDecoder === e3.hardwareDecoder ? (m.pq("retry open hardware decoder(".concat(e3.hardwareRetryCount, "), taskId: ").concat(e3.taskId), z, 146), e3.decoderFallbackReady = e3.hardwareDecoder.open(e3.parameters)) : e3.targetDecoder === e3.softwareDecoder && (m.pq("retry open software(webcodecs) decoder(".concat(e3.hardwareRetryCount, "), taskId: ").concat(e3.taskId), z, 150), e3.decoderFallbackReady = e3.softwareDecoder.open(e3.parameters))), e3.needKeyFrame = true, e3.leftIPCPort.request("requestKeyframe");
      }, onReceiveVideoFrame(t4) {
        e3.firstDecoded = true, e3.frameCaches.push(t4), n.M[17](e3.stats + 144, s2.f[17](e3.stats + 144) + BigInt(1)), e3.lastDecodeTimestamp !== I.N_ && (n.M[15](e3.stats + 256, Math.max((0, x.A)() - e3.lastDecodeTimestamp, s2.f[15](e3.stats + 256))), e3.lastDecodeTimestamp = I.N_);
      }, enableHardwareAcceleration: t3, optimizeForLatency: e3.preferLatency });
    }
    createWasmcodecDecoder(e3, t3) {
      return new f.A({ resource: t3, onReceiveAVFrame(t4) {
        e3.firstDecoded = true, e3.frameCaches.push(t4), n.M[17](e3.stats + 144, s2.f[17](e3.stats + 144) + BigInt(1)), e3.lastDecodeTimestamp !== I.N_ && (n.M[15](e3.stats + 256, Math.max((0, x.A)() - e3.lastDecodeTimestamp, s2.f[15](e3.stats + 256))), e3.lastDecodeTimestamp = I.N_);
      }, avframePool: e3.avframePool });
    }
    async pullAVPacketInternal(e3, t3) {
      const i3 = await t3.request("pull");
      if (v.ai(i3) || (0, S.A)(i3)) return i3;
      {
        const t4 = e3.avpacketPool.alloc();
        return (0, M.r0)(i3, t4), t4;
      }
    }
    async createTask(e3) {
      const t3 = new u.Ay(e3.leftPort), i3 = new u.Ay(e3.rightPort), r3 = [], d3 = new g.A((0, c.A)(e3.avframeList, o.A), e3.avframeListMutex), h2 = { ...e3, resource: await (0, T.A)(e3.resource, true), leftIPCPort: t3, rightIPCPort: i3, softwareDecoder: null, hardwareDecoder: null, frameCaches: r3, inputEnd: false, targetDecoder: null, needKeyFrame: true, parameters: 0, hardwareRetryCount: 0, lastDecodeTimestamp: 0, firstDecoded: false, decoderFallbackReady: null, softwareDecoderOpened: false, discard: 0, playRate: 1, avframePool: d3, avpacketPool: new w.A((0, c.A)(e3.avpacketList, o.A), e3.avpacketListMutex) };
      return h2.softwareDecoder = h2.resource ? this.createWasmcodecDecoder(h2, h2.resource) : P.A.videoDecoder ? this.createWebCodecDecoder(h2, false) : null, h2.softwareDecoder ? (P.A.videoDecoder && e3.enableHardware && (h2.hardwareDecoder = this.createWebCodecDecoder(h2)), h2.targetDecoder = h2.hardwareDecoder || h2.softwareDecoder, this.tasks.set(e3.taskId, h2), i3.on(u.S3, async (o2) => {
        switch (o2.method) {
          case "pull":
            if (r3.length) {
              const e4 = r3.shift();
              i3.reply(o2, e4, null, (0, S.A)(e4) || v.ai(e4) ? null : [e4]);
              break;
            }
            if (!h2.inputEnd) {
              for (; ; ) {
                if (r3.length) {
                  const e4 = r3.shift();
                  i3.reply(o2, e4, null, (0, S.A)(e4) || v.ai(e4) ? null : [e4]);
                  break;
                }
                if (h2.decoderFallbackReady) {
                  let e4 = await h2.decoderFallbackReady;
                  if (e4 && (h2.targetDecoder === h2.hardwareDecoder && (h2.targetDecoder = h2.softwareDecoder, h2.hardwareDecoder.close(), h2.hardwareDecoder = null, m.R8("video decode error by hardware decoder(".concat(h2.hardwareRetryCount, "), taskId: ").concat(h2.taskId, ", error: ").concat(e4, ", try to fallback to software decoder"), z, 280), e4 = await this.openSoftwareDecoder(h2)), e4)) {
                    m.pq("video decoder open error, taskId: ".concat(h2.taskId), z, 284), i3.reply(o2, l.r8);
                    break;
                  }
                  h2.decoderFallbackReady = null;
                }
                h2.lastDecodeTimestamp === I.N_ && (h2.lastDecodeTimestamp = (0, x.A)());
                const c2 = await this.pullAVPacketInternal(h2, t3);
                if (-1048576 === c2) {
                  if (h2.targetDecoder === h2.hardwareDecoder ? await a2().race([new y.A(2), h2.targetDecoder.flush()]) && m.R8("video hardware decoder flush failed, ignore it, taskId: ".concat(h2.taskId), z, 304) : await h2.targetDecoder.flush(), h2.inputEnd = true, h2.targetDecoder === h2.hardwareDecoder && await new y.A(0), r3.length) {
                    const e4 = r3.shift();
                    i3.reply(o2, e4, null, h2.targetDecoder === h2.hardwareDecoder ? [e4] : null);
                    break;
                  }
                  m.pq("video decoder ended, taskId: ".concat(h2.taskId), z, 321), i3.reply(o2, -1048576);
                  break;
                }
                if (!(c2 > 0)) {
                  m.z3("video decode pull avpacket error, taskId: ".concat(e3.taskId, ", ret: ").concat(c2), z, 465), i3.reply(o2, c2);
                  break;
                }
                {
                  if (h2.needKeyFrame) {
                    if (!(1 & s2.f[15](c2 + 36) && 27 !== s2.f[15](h2.parameters + 4) || 27 === s2.f[15](h2.parameters + 4) && U.KD(c2, s2.f[20](h2.parameters + 12) ? 1 + (3 & L.r8(s2.f[20](h2.parameters + 12) + 4)) : 4) || 173 === s2.f[15](h2.parameters + 4) && D.KD(c2, s2.f[20](h2.parameters + 12) ? 1 + (3 & L.r8(s2.f[20](h2.parameters + 12) + 21)) : 4) || 196 === s2.f[15](h2.parameters + 4) && E.KD(c2, s2.f[20](h2.parameters + 12) ? 1 + (L.r8(s2.f[20](h2.parameters + 12)) >>> 1 & 3) : 4))) {
                      h2.avpacketPool.release(c2);
                      continue;
                    }
                    h2.needKeyFrame = false, n.M[15](c2 + 36, 1 | s2.f[15](c2 + 36));
                  }
                  let t4 = h2.targetDecoder.decode(c2);
                  if (1 & s2.f[15](c2 + 36)) {
                    const e4 = (0, _.rU)(c2, 1);
                    0 !== e4 && (s2.f[20](h2.parameters + 12) && (0, B.Eb)(s2.f[20](h2.parameters + 12)), n.M[15](h2.parameters + 16, 0 | s2.f[25](e4 + 4)), n.M[20](h2.parameters + 12, (0, B.sY)(s2.f[25](e4 + 4))), (0, C.Mr)(s2.f[20](h2.parameters + 12), s2.f[20](e4), s2.f[25](e4 + 4)));
                  }
                  if (t4 < 0) {
                    if (n.M[15](h2.stats + 136, s2.f[15](h2.stats + 136) + 1), h2.targetDecoder instanceof p.A && h2.softwareDecoder) {
                      if (m.R8("video decode error from hardware, taskId: ".concat(h2.taskId, ", error: ").concat(t4, ", try to fallback to software decoder"), z, 386), h2.targetDecoder === h2.hardwareDecoder) h2.hardwareDecoder.close(), h2.hardwareDecoder = null;
                      else {
                        if (!h2.resource) {
                          m.z3("cannot fallback to wasm video decoder because of resource not found , taskId: ".concat(e3.taskId), z, 398), i3.reply(o2, l.r8);
                          break;
                        }
                        h2.softwareDecoder.close(), h2.softwareDecoder = this.createWasmcodecDecoder(h2, h2.resource), h2.softwareDecoderOpened = false;
                      }
                      try {
                        await this.openSoftwareDecoder(h2), h2.targetDecoder = h2.softwareDecoder;
                      } catch (t5) {
                        m.z3("video software decoder open error, taskId: ".concat(e3.taskId), z, 408), i3.reply(o2, l.r8);
                        break;
                      }
                      if (!(1 & s2.f[15](c2 + 36))) {
                        h2.avpacketPool.release(c2), h2.needKeyFrame = true, h2.leftIPCPort.request("requestKeyframe");
                        continue;
                      }
                      if (t4 = h2.targetDecoder.decode(c2), t4 >= 0) {
                        h2.avpacketPool.release(c2);
                        continue;
                      }
                      if (h2.targetDecoder instanceof p.A && h2.resource) {
                        m.R8("video decode error by webcodecs soft decoder, taskId: ".concat(h2.taskId, ", error: ").concat(t4, ", try to fallback to wasm software decoder"), z, 422), h2.softwareDecoder.close(), h2.softwareDecoder = this.createWasmcodecDecoder(h2, h2.resource), h2.softwareDecoderOpened = false;
                        try {
                          await this.openSoftwareDecoder(h2), h2.targetDecoder = h2.softwareDecoder;
                        } catch (t5) {
                          m.z3("video wasm software decoder open error, taskId: ".concat(e3.taskId), z, 432), i3.reply(o2, l.r8);
                          break;
                        }
                        if (t4 = h2.targetDecoder.decode(c2), t4 >= 0) {
                          h2.avpacketPool.release(c2);
                          continue;
                        }
                      }
                    }
                    h2.avpacketPool.release(c2), m.z3("video decode error, taskId: ".concat(e3.taskId, ", ret: ").concat(t4), z, 451), i3.reply(o2, t4);
                    break;
                  }
                  for (h2.avpacketPool.release(c2); h2.targetDecoder instanceof p.A && h2.targetDecoder.getQueueLength() > 20; ) await new y.A(0);
                }
              }
              break;
            }
            m.pq("video decoder ended, taskId: ".concat(h2.taskId), z, 472), i3.reply(o2, -1048576);
        }
      }), 0) : (m.z3("software decoder not support", z, 245), l.lh);
    }
    async openSoftwareDecoder(e3) {
      if (e3.softwareDecoder && !e3.softwareDecoderOpened) {
        const t3 = e3.parameters;
        let i3 = 1;
        if ((0, b.A)()) {
          let e4 = s2.f[15](t3 + 56) * s2.f[15](t3 + 60), r4 = (0, k.lb)((0, c.A)(t3 + 72, d2.P));
          e4 >= 2073600 && e4 <= 2211840 ? (173 !== s2.f[15](t3 + 4) && 196 !== s2.f[15](t3 + 4) && 225 !== s2.f[15](t3 + 4) || (i3 = 2), r4 > 30 ? (i3 = 2, 173 !== s2.f[15](t3 + 4) && 196 !== s2.f[15](t3 + 4) && 225 !== s2.f[15](t3 + 4) || (i3 = 4)) : r4 > 60 && (i3 = 4, 173 !== s2.f[15](t3 + 4) && 196 !== s2.f[15](t3 + 4) && 225 !== s2.f[15](t3 + 4) || (i3 = 6))) : e4 > 2211840 && e4 <= 8294400 ? (i3 = 4, 173 !== s2.f[15](t3 + 4) && 196 !== s2.f[15](t3 + 4) && 225 !== s2.f[15](t3 + 4) || (i3 = 6)) : e4 > 8294400 && (i3 = 6, 173 !== s2.f[15](t3 + 4) && 196 !== s2.f[15](t3 + 4) && 225 !== s2.f[15](t3 + 4) || (i3 = 8)), i3 = Math.min(i3, navigator.hardwareConcurrency);
        }
        m.Yz("open software(".concat(e3.softwareDecoder instanceof p.A ? "webcodecs" : "wasm", ") decoder"), z, 537);
        let r3 = await e3.softwareDecoder.open(t3, i3, e3.wasmDecoderOptions);
        if (r3) {
          if (!(e3.softwareDecoder instanceof p.A && e3.resource)) return r3;
          if (m.R8("webcodecs software decoder open failed, ".concat(r3, ", try to fallback to wasm software decoder"), z, 543), e3.softwareDecoder.close(), e3.softwareDecoder = this.createWasmcodecDecoder(e3, e3.resource), r3 = await e3.softwareDecoder.open(t3, i3), r3) return r3;
          e3.targetDecoder = e3.softwareDecoder;
        }
        e3.softwareDecoderOpened = true;
      }
      return 0;
    }
    async reopenDecoder(e3, t3, i3, r3) {
      const s3 = this.tasks.get(e3);
      if (s3) {
        const e4 = (0, B.Gy)(168);
        let n2;
        (0, S.A)(t3) ? (0, R.Yi)(e4, t3) : (0, M.T8)(t3, e4), s3.parameters && (0, R.dn)(s3.parameters), s3.parameters = e4, r3 && (s3.wasmDecoderOptions = r3), i3 && (i3 = await (0, T.A)(i3, true)), n2 = s3.preferWebCodecs && P.A.videoDecoder && p.A.isSupported(e4, false) ? this.createWebCodecDecoder(s3, false) : i3 ? this.createWasmcodecDecoder(s3, i3) : P.A.videoDecoder ? this.createWebCodecDecoder(s3, false) : null;
        let o2 = P.A.videoDecoder && s3.enableHardware ? this.createWebCodecDecoder(s3, true) : null;
        return new (a2())(async (t4, r4) => {
          if (s3.softwareDecoder && s3.softwareDecoder.close(), s3.hardwareDecoder && s3.hardwareDecoder.close(), s3.softwareDecoder = n2, s3.hardwareDecoder = o2, s3.targetDecoder = s3.hardwareDecoder || s3.softwareDecoder, s3.hardwareRetryCount = 0, s3.hardwareDecoder) {
            const t5 = await s3.hardwareDecoder.open(e4);
            t5 ? (m.z3("cannot reopen hardware decoder, ".concat(t5, ", taskId: ").concat(s3.taskId), z, 619), s3.hardwareDecoder.close(), s3.hardwareDecoder = null, s3.targetDecoder = s3.softwareDecoder) : m.Yz("reopen video hardware decoder, taskId: ".concat(s3.taskId), z, 625);
          }
          if (i3 && (s3.resource = i3), s3.targetDecoder === s3.softwareDecoder) {
            const e5 = await this.openSoftwareDecoder(s3);
            if (e5) {
              if (m.z3("reopen video software decoder failed, error: ".concat(e5), z, 636), !s3.hardwareDecoder) return void t4(l.r8);
            } else m.Yz("reopen video soft decoder, taskId: ".concat(s3.taskId), z, 643);
          }
          t4(0);
        });
      }
      m.h2("task not found", z, 649);
    }
    async open(e3, t3, i3 = {}) {
      const r3 = this.tasks.get(e3);
      if (r3) {
        r3.wasmDecoderOptions = i3;
        const e4 = (0, B.Gy)(168);
        if ((0, S.A)(t3) ? (0, R.Yi)(e4, t3) : (0, M.T8)(t3, e4), r3.parameters && (0, R.dn)(r3.parameters), r3.parameters = e4, r3.preferWebCodecs && P.A.videoDecoder && p.A.isSupported(e4, false) && r3.softwareDecoder instanceof f.A) {
          r3.softwareDecoder.close();
          const e5 = this.createWebCodecDecoder(r3, false);
          r3.softwareDecoder === r3.targetDecoder && (r3.targetDecoder = e5), r3.softwareDecoder = e5;
        }
        return new (a2())(async (t4, i4) => {
          if (r3.hardwareDecoder) {
            m.Yz("open hardware decoder", z, 684);
            const t5 = await r3.hardwareDecoder.open(e4);
            t5 && (m.R8("cannot open hardware decoder, ".concat(t5, ", try to open software decoder"), z, 687), r3.hardwareDecoder.close(), r3.hardwareDecoder = null, r3.targetDecoder = r3.softwareDecoder);
          }
          if (r3.targetDecoder === r3.softwareDecoder) {
            const e5 = await this.openSoftwareDecoder(r3);
            if (e5 && (m.z3("open video software decoder failed, error: ".concat(e5), z, 697), !r3.hardwareDecoder)) return void t4(l.r8);
          }
          t4(0);
        });
      }
      m.h2("task not found", z, 707);
    }
    async setPlayRate(e3, t3) {
      const i3 = this.tasks.get(e3);
      if (i3 && i3.softwareDecoder) {
        let e4 = 0, r3 = (0, k.lb)((0, c.A)(i3.parameters + 72, d2.P));
        e4 = r3 >= 120 ? t3 <= 1 ? 0 : t3 < 1.5 || t3 < 3 ? 8 : 32 : r3 >= 60 ? t3 < 1.5 ? 0 : t3 < 3 ? 8 : t3 < 8 ? 24 : 32 : t3 >= 8 ? 32 : t3 >= 4 ? 24 : 0, i3.softwareDecoder.setSkipFrameDiscard(e4), i3.playRate < t3 ? i3.discard = e4 : i3.discard = Math.max(i3.discard, e4), i3.playRate = t3;
      }
    }
    async setNextDiscard(e3) {
      const t3 = this.tasks.get(e3);
      t3 && t3.softwareDecoder && t3.discard < 32 && (t3.discard += 8, t3.softwareDecoder.setSkipFrameDiscard(t3.discard), m.pq("set next discard, taskId: ".concat(t3.taskId, ", discard: ").concat(t3.discard), z, 774));
    }
    async setPrevDiscard(e3) {
      const t3 = this.tasks.get(e3);
      t3 && t3.softwareDecoder && t3.discard > 0 && (t3.discard -= 8, t3.softwareDecoder.setSkipFrameDiscard(t3.discard), m.pq("set prev discard, taskId: ".concat(t3.taskId, ", discard: ").concat(t3.discard), z, 786));
    }
    async resetTask(e3) {
      const t3 = this.tasks.get(e3);
      t3 && (t3.targetDecoder === t3.softwareDecoder ? await t3.targetDecoder.flush() : t3.targetDecoder === t3.hardwareDecoder && (t3.hardwareDecoder.close(), t3.hardwareDecoder = this.createWebCodecDecoder(t3), await t3.hardwareDecoder.open(t3.parameters) && m.h2("reopen hardware decoder failed", z, 803), t3.targetDecoder = t3.hardwareDecoder), A.__(t3.frameCaches, (e4) => {
        (0, S.A)(e4) ? t3.avframePool.release(e4) : e4.close();
      }), t3.frameCaches.length = 0, t3.needKeyFrame = true, t3.inputEnd = false, t3.lastDecodeTimestamp = (0, x.A)(), m.pq("reset video decoder, taskId: ".concat(t3.taskId), z, 820));
    }
    async registerTask(e3) {
      return this.tasks.has(e3.taskId) ? l.lh : this.createTask(e3);
    }
    async unregisterTask(e3) {
      const t3 = this.tasks.get(e3);
      t3 && (t3.rightPort.close(), t3.leftPort.close(), t3.softwareDecoder && t3.softwareDecoder.close(), t3.hardwareDecoder && t3.hardwareDecoder.close(), t3.frameCaches.forEach((e4) => {
        (0, S.A)(e4) ? t3.avframePool.release(e4) : e4.close();
      }), t3.parameters && (0, R.dn)(t3.parameters), this.tasks.delete(e3), m.Yz("unregisterTask task, taskId: ".concat(e3), z, 854));
    }
    async getTasksInfo() {
      const e3 = [];
      return this.tasks.forEach((t3) => {
        e3.push({ codecId: s2.f[15](t3.parameters + 4), width: s2.f[15](t3.parameters + 56), height: s2.f[15](t3.parameters + 60), framerate: (0, k.lb)((0, c.A)(t3.parameters + 72, d2.P)), hardware: t3.targetDecoder === t3.hardwareDecoder });
      }), e3;
    }
  }
}, 33968: (e2, t2, i2) => {
  i2.d(t2, { A: () => O });
  var r2 = i2(54001), a2 = i2.n(r2), s2 = i2(12264), n = i2(29170), o = i2(63939), c = (i2(9599), i2(50932)), d2 = i2(44527), h = i2(9705), l = i2(84149), u = i2(67672), f = i2(72739), p = i2(16041), m = i2(95797), g = i2(39148), v = i2(86932), A = i2(44328), y = i2(77231), w = i2(86834), b = i2(4624), k = i2(43607), x = i2(15045), I = i2(88103), P = i2(54750), S = i2(69047), T = i2(3016), M = i2(38222), B = i2(87623), R = i2(63849), _ = i2(39638), C = i2(7972), U = i2(72703), D = i2(44690), E = i2(74936);
  const L = "src/avpipeline/VideoRenderPipeline.ts", z = [M.A];
  z.push(B.A);
  const $ = [S.A];
  var F;
  $.push(T.A), (function(e3) {
    e3[e3.None = 0] = "None", e3[e3.Accelerate = 1] = "Accelerate", e3[e3.Decelerate = 2] = "Decelerate";
  })(F || (F = {}));
  let N = false;
  const V = ["bt2020", "bt2100", "st2048", "p3-dcl", "hlg"];
  class O extends d2.A {
    constructor() {
      super();
    }
    async createTask(e3) {
      const t3 = new l.Ay(e3.leftPort), i3 = new l.Ay(e3.controlPort), r3 = { ...e3, leftIPCPort: t3, controlIPCPort: i3, render: null, frontFrame: null, backFrame: null, renderFrame: null, renderFrameCount: BigInt(0), loop: null, renderRedyed: false, currentPTS: y.Dh, adjust: F.None, adjustDiff: BigInt(0), lastAdjustTimestamp: BigInt(0), lastMasterPts: y.Dh, masterTimer: new E.A(), lastNotifyPTS: BigInt(0), playRate: BigInt(100), firstRendered: false, canvasUpdated: false, renderCreating: false, renderRecreateCount: 0, skipRender: false, isSupport: () => false, frontBuffered: false, ended: false, seeking: false, seekSync: null, afterPullResolver: null, pausing: false, lastRenderTimestamp: 0, avframePool: new p.A((0, n.A)(e3.avframeList, s2.A), e3.avframeListMutex) };
      return i3.on(l.Wo, async (e4) => {
        switch (e4.method) {
          case "syncPts": {
            const t4 = e4.params.pts, i4 = r3.masterTimer.getMasterTime(), a3 = Math.abs(Number(t4 - i4));
            a3 > 100 && r3.currentPTS > BigInt(0) && (t4 > i4 ? (r3.adjust = F.Accelerate, b.Yz("video render sync master time accelerate, targetMaster: ".concat(t4, ", currentMaster: ").concat(i4, ", diff: ").concat(a3, ", taskId: ").concat(r3.taskId), L, 225)) : (r3.adjust = F.Decelerate, b.Yz("video render sync master time decelerate, targetMaster: ".concat(t4, ", currentMaster: ").concat(i4, ", diff: ").concat(a3, " taskId: ").concat(r3.taskId), L, 229)), r3.adjustDiff = BigInt(Math.floor(a3)));
            break;
          }
          case "skipRender":
            r3.skipRender = e4.params.skipRender;
        }
      }), this.tasks.set(e3.taskId, r3), 0;
    }
    swap(e3) {
      if (!e3.seeking) {
        if (e3.backFrame && ((0, U.A)(e3.backFrame) ? e3.avframePool.release(e3.backFrame) : e3.backFrame.close()), e3.backFrame = null, !e3.frontBuffered) return false;
        if (e3.backFrame = e3.frontFrame, e3.frontFrame = null, c.M[17](e3.stats + 352, (0, U.A)(e3.backFrame) ? (0, A.Mr)(o.f[17](e3.backFrame + 104), e3.backFrame + 120, y.i0) : (0, A.k)(BigInt(e3.backFrame.timestamp), y.KR, y.i0)), !e3.ended) return e3.frontBuffered = false, e3.leftIPCPort.request("pull").then((t3) => (e3.afterPullResolver && e3.afterPullResolver(), u.ai(t3) && t3 < 0 ? (e3.ended = true, void (e3.frontFrame = null)) : (e3.frontFrame = t3, e3.frontBuffered = true, e3.seekSync ? (e3.seekSync(), void (e3.seekSync = null)) : void (e3.backFrame || this.swap(e3))))), true;
      }
    }
    fakeSyncPts(e3) {
      const t3 = e3.masterTimer.getMasterTime();
      t3 - e3.lastNotifyPTS >= BigInt(1e3) && (e3.lastNotifyPTS = t3, c.M[17](e3.stats + 336, t3), e3.controlIPCPort.notify("syncPts", { pts: t3 }));
    }
    async createRender(e3, t3, i3 = false) {
      if (!e3.renderCreating) {
        var r3;
        if (e3.renderCreating = true, e3.renderRedyed = false, e3.render && e3.render.destroy(), "function" == typeof WritableStream && e3.canvas instanceof WritableStream ? (e3.render = new R.A(e3.canvas), e3.isSupport = R.A.isSupport) : (0, U.A)(t3) ? (e3.enableWebGPU && m.A.webgpu && !N && f.__(z, (i4) => {
          if (i4.isSupport(t3)) return e3.render = new i4(e3.canvas, { sar: e3.sar, devicePixelRatio: e3.devicePixelRatio, renderMode: e3.renderMode, onRenderContextLost: () => {
            e3.canvasUpdated = false, e3.renderRedyed = false, b.R8("render context lost", L, 397), e3.controlIPCPort.notify("updateCanvas");
          } }), e3.isSupport = i4.isSupport, false;
        }), e3.render || f.__($, (i4) => {
          if (i4.isSupport(t3)) return e3.render = new i4(e3.canvas, { sar: e3.sar, devicePixelRatio: e3.devicePixelRatio, renderMode: e3.renderMode, onRenderContextLost: () => {
            e3.canvasUpdated = false, e3.renderRedyed = false, b.R8("render context lost", L, 416), e3.controlIPCPort.notify("updateCanvas");
          } }), e3.isSupport = i4.isSupport, false;
        })) : e3.enableWebGPU && m.A.webgpu && !N && ((w.A.chrome || w.A.newEdge) && w.A.checkVersion(w.A.majorVersion, "116", true) || w.A.safari && w.A.checkVersion(w.A.majorVersion, "17.4", true) || D.A.ios && w.A.checkVersion(D.A.version, "17.4", true) || w.A.firefox && w.A.checkVersion(w.A.majorVersion, "129", true)) && (r3 = t3.colorSpace.primaries, !f.zy(V, r3)) ? (e3.render = new P.A(e3.canvas, { sar: e3.sar, devicePixelRatio: e3.devicePixelRatio, renderMode: e3.renderMode, onRenderContextLost: () => {
          e3.canvasUpdated = false, e3.renderRedyed = false, b.R8("render context lost", L, 357), e3.controlIPCPort.notify("updateCanvas");
        } }), e3.isSupport = P.A.isSupport) : (e3.render = new I.A(e3.canvas, { sar: e3.sar, devicePixelRatio: e3.devicePixelRatio, renderMode: e3.renderMode, colorSpace: "pq" === t3.colorSpace.transfer ? "rec2100-pq" : "hlg" === t3.colorSpace.transfer ? "rec2100-hlg" : void 0 }), e3.isSupport = I.A.isSupport), !e3.render) return b.z3("not found format ".concat(t3.format, " render"), L, 428), void (e3.renderCreating = false);
        try {
          var a3, s3, n2;
          await e3.render.init(), e3.render.viewport(e3.viewportWidth, e3.viewportHeight), e3.render.setRotate(null !== (a3 = e3.renderRotate) && void 0 !== a3 ? a3 : 0, false), e3.render.enableHorizontalFlip(null !== (s3 = e3.flipHorizontal) && void 0 !== s3 && s3), e3.render.enableVerticalFlip(null !== (n2 = e3.flipVertical) && void 0 !== n2 && n2), e3.render.render(t3), e3.render.clear();
        } catch (r4) {
          if (e3.render instanceof x.A && !i3) return N = true, e3.renderCreating = false, b.R8("not support webgpu render, try to fallback to webgl render", L, 447), this.createRender(e3, t3, true);
          if (i3) {
            if (e3.renderCreating = false, b.R8("canvas context lost after fallback, wait for recreate canvas", L, 452), e3.renderRecreateCount < 3) return e3.renderRecreateCount++, void e3.controlIPCPort.notify("updateCanvas");
            throw r4;
          }
        }
        e3.renderRedyed = true, e3.renderCreating = false, e3.renderRecreateCount = 0;
      }
    }
    async play(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        if (t3.loop && b.h2("task has already call play", L, 474), (0, U.A)(t3.backFrame) || u.Ik(t3.backFrame) || (t3.backFrame = await t3.leftIPCPort.request("pull")), u.ai(t3.backFrame) && t3.backFrame < 0) return t3.backFrame = 0, b.pq("video render ended, taskId: ".concat(t3.taskId), L, 483), void t3.controlIPCPort.notify("ended");
        (0, U.A)(t3.frontFrame) || u.Ik(t3.frontFrame) || (t3.frontFrame = await t3.leftIPCPort.request("pull")), t3.frontBuffered = true, t3.ended = false, u.ai(t3.frontFrame) && t3.frontFrame < 0 && (t3.ended = true, t3.frontBuffered = false, t3.frontFrame = 0), await this.createRender(t3, t3.backFrame), t3.currentPTS = (0, U.A)(t3.backFrame) ? (0, A.Mr)(o.f[17](t3.backFrame + 104), t3.backFrame + 120, y.i0) : (0, A.k)(BigInt(t3.backFrame.timestamp), y.KR, y.i0), b.Yz("got first video frame, pts: ".concat((0, U.A)(t3.backFrame) ? o.f[17](t3.backFrame + 104) : BigInt(t3.backFrame.timestamp), "(").concat(t3.currentPTS, "ms), taskId: ").concat(t3.taskId), L, 515), t3.masterTimer.setMasterTime(t3.lastMasterPts === y.Dh ? t3.startPTS : t3.lastMasterPts), t3.lastMasterPts = y.Dh, c.M[17](t3.stats + 352, t3.currentPTS);
        const e4 = (0, _.A)(), i3 = e4 && m.A.shareArrayBuffer ? 0 : 10;
        t3.loop = new g.A(() => {
          if (!t3.backFrame) return void (t3.ended ? (t3.loop.stop(), t3.adjust = F.None, b.pq("video render ended, taskId: ".concat(t3.taskId), L, 536), t3.controlIPCPort.notify("ended")) : t3.loop.emptyTask());
          if (!t3.isSupport(t3.backFrame)) {
            if (t3.render) {
              if (!t3.renderRedyed) return;
              return t3.renderRedyed = false, t3.renderFrame = t3.backFrame, void t3.controlIPCPort.notify("updateCanvas");
            }
            this.createRender(t3, t3.backFrame);
          }
          const i4 = (0, U.A)(t3.backFrame) ? (0, A.Mr)(o.f[17](t3.backFrame + 104), t3.backFrame + 120, y.i0) : (0, A.k)(BigInt(t3.backFrame.timestamp), y.KR, y.i0);
          if (i4 < t3.currentPTS) {
            if (!(t3.currentPTS - i4 > BigInt(5e3))) return b.R8("dropping frame with pts ".concat(i4, ", which is earlier then the last rendered frame(").concat(t3.currentPTS, "), taskId: ").concat(t3.taskId), L, 575), void this.swap(t3);
            t3.masterTimer.setMasterTime(i4);
          } else i4 - t3.currentPTS > BigInt(4e3) && t3.isLive && t3.masterTimer.setMasterTime(i4);
          if (t3.adjust === F.Accelerate) {
            if (t3.adjustDiff <= 0) t3.adjust = F.None, t3.lastAdjustTimestamp = BigInt(0);
            else if (BigInt(Math.floor((0, v.A)())) - t3.lastAdjustTimestamp >= BigInt(100)) {
              const e5 = k.jk(t3.adjustDiff, BigInt(100));
              t3.masterTimer.setMasterTime(t3.masterTimer.getMasterTime() + e5), t3.adjustDiff -= e5, b.Yz("video render accelerate master time add: ".concat(e5, ", taskId: ").concat(t3.taskId), L, 597), t3.lastAdjustTimestamp = BigInt(Math.floor((0, v.A)()));
            }
          } else if (t3.adjust === F.Decelerate) {
            if (t3.adjustDiff <= 0) t3.adjust = F.None, t3.lastAdjustTimestamp = BigInt(0);
            else if (BigInt(Math.floor((0, v.A)())) - t3.lastAdjustTimestamp >= BigInt(300)) {
              const e5 = k.jk(t3.adjustDiff, BigInt(50));
              t3.masterTimer.setMasterTime(t3.masterTimer.getMasterTime() - e5), t3.adjustDiff -= e5, b.Yz("video render decelerate master time sub: ".concat(e5, ", taskId: ").concat(t3.taskId), L, 615), t3.lastAdjustTimestamp = BigInt(Math.floor((0, v.A)()));
            }
          }
          t3.enableJitterBuffer && o.f[15](t3.stats + 120) / o.f[15](t3.stats + 232) * 1e3 <= o.f[15](t3.stats + 280) && this.setPlayRate(t3.taskId, 1);
          const r3 = i4 - t3.masterTimer.getMasterTime();
          r3 <= 0 ? (t3.renderRedyed && !t3.skipRender && (e4 || -r3 < BigInt(100) || t3.renderFrameCount & BigInt(1)) ? (t3.render.render(t3.backFrame), c.M[17](t3.stats + 160, o.f[17](t3.stats + 160) + BigInt(1)), t3.lastRenderTimestamp && c.M[15](t3.stats + 260, Math.max((0, v.A)() - t3.lastRenderTimestamp, o.f[15](t3.stats + 260))), t3.lastRenderTimestamp = (0, v.A)()) : c.M[15](t3.stats + 168, o.f[15](t3.stats + 168) + 1), c.M[17](t3.stats + 336, i4), t3.renderFrameCount++, (0, U.A)(t3.backFrame) ? (c.M[15](t3.stats + 84, o.f[15](t3.backFrame + 68)), c.M[15](t3.stats + 88, o.f[15](t3.backFrame + 72))) : (c.M[15](t3.stats + 84, t3.backFrame.displayWidth), c.M[15](t3.stats + 88, t3.backFrame.displayHeight)), t3.firstRendered || (t3.controlIPCPort.notify(t3.canvasUpdated ? "firstRenderedAfterUpdateCanvas" : "firstRendered"), t3.firstRendered = true, t3.canvasUpdated = false), t3.currentPTS = i4, i4 - t3.lastNotifyPTS >= BigInt(1e3) && (t3.lastNotifyPTS = i4, t3.controlIPCPort.notify("syncPts", { pts: i4 })), this.swap(t3), t3.masterTimer.getMasterTime() - i4 >= BigInt(2e3) && t3.masterTimer.setMasterTime(i4)) : (this.fakeSyncPts(t3), t3.loop.emptyTask());
        }, 0, i3), t3.loop.start();
      } else b.h2("task not found", L, 687);
    }
    async restart(e3) {
      const t3 = this.tasks.get(e3);
      t3 && (t3.loop || b.h2("task has not played", L, 695), t3.loop.isStarted() && b.h2("task has already run", L, 699), t3.backFrame || (t3.backFrame = await t3.leftIPCPort.request("pull")), t3.frontFrame || (t3.frontFrame = await t3.leftIPCPort.request("pull")), t3.frontBuffered = true, t3.ended = false, t3.adjust = F.None, t3.lastNotifyPTS = y.Dh, t3.firstRendered = false, t3.pausing = false, t3.seeking = false, (!t3.frontFrame || u.ai(t3.frontFrame) && t3.frontFrame < 0) && (t3.frontBuffered = false, t3.ended = true), t3.currentPTS = (0, U.A)(t3.backFrame) ? (0, A.Mr)(o.f[17](t3.backFrame + 104), t3.backFrame + 120, y.i0) : (0, A.k)(BigInt(t3.backFrame.timestamp), y.KR, y.i0), t3.masterTimer.setMasterTime(k.T9(t3.startPTS, t3.currentPTS)), t3.loop.start());
    }
    async pause(e3) {
      const t3 = this.tasks.get(e3);
      t3 && (t3.loop || b.h2("task has not played", L, 744), t3.loop.stop(), t3.pausing = true, t3.lastMasterPts = t3.masterTimer.getMasterTime(), b.pq("task paused, taskId: ".concat(t3.taskId), L, 750));
    }
    async unpause(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        if (t3.seeking) return;
        t3.loop || b.h2("task has not played", L, 761), t3.masterTimer.setMasterTime(t3.lastMasterPts), t3.lastMasterPts = y.Dh, t3.seeking || t3.loop.start(), t3.pausing = false, t3.lastRenderTimestamp = (0, v.A)(), b.pq("task unpaused, taskId: ".concat(t3.taskId), L, 771);
      }
    }
    async updateCanvas(e3, t3) {
      const i3 = this.tasks.get(e3);
      i3 ? (i3.canvas = t3, i3.render && (i3.render.destroy(), i3.render = null), i3.isSupport = () => false, i3.canvasUpdated = true, i3.firstRendered = false, i3.renderRedyed = false) : b.h2("task not found", L, 789);
    }
    async setPlayRate(e3, t3) {
      const i3 = this.tasks.get(e3);
      i3 && (i3.enableJitterBuffer && o.f[15](i3.stats + 120) / o.f[15](i3.stats + 232) * 1e3 <= o.f[15](i3.stats + 280) && (t3 = 1), i3.masterTimer.setRate(t3), i3.playRate = BigInt(Math.floor(Math.floor(100 * t3))));
    }
    async setRenderMode(e3, t3) {
      const i3 = this.tasks.get(e3);
      i3 && i3.render && (i3.renderMode = t3, i3.render.setRenderMode(t3), (0, C.A)(() => {
        i3.pausing && i3.backFrame && i3.render && i3.render.render(i3.backFrame);
      }));
    }
    async setRenderRotate(e3, t3) {
      const i3 = this.tasks.get(e3);
      i3 && i3.render && (i3.renderRotate = t3, i3.render.setRotate(t3), (0, C.A)(() => {
        i3.pausing && i3.backFrame && i3.render && i3.render.render(i3.backFrame);
      }));
    }
    async enableHorizontalFlip(e3, t3) {
      const i3 = this.tasks.get(e3);
      i3 && i3.render && (i3.flipHorizontal = t3, i3.render.enableHorizontalFlip(t3), (0, C.A)(() => {
        i3.pausing && i3.backFrame && i3.render && i3.render.render(i3.backFrame);
      }));
    }
    async enableVerticalFlip(e3, t3) {
      const i3 = this.tasks.get(e3);
      i3 && i3.render && (i3.flipVertical = t3, i3.render.enableVerticalFlip(t3), (0, C.A)(() => {
        i3.pausing && i3.backFrame && i3.render && i3.render.render(i3.backFrame);
      }));
    }
    async resize(e3, t3, i3) {
      const r3 = this.tasks.get(e3);
      r3 && r3.render && (r3.render.viewport(t3, i3), (0, C.A)(() => {
        r3.pausing && r3.backFrame && r3.render && r3.render.render(r3.backFrame);
      }));
    }
    async setSkipRender(e3, t3) {
      const i3 = this.tasks.get(e3);
      i3 && (i3.skipRender = t3, c.M[15](i3.stats + 260, 0), i3.lastRenderTimestamp = (0, v.A)());
    }
    async setMasterTime(e3, t3) {
      const i3 = this.tasks.get(e3);
      i3 && i3.masterTimer.setMasterTime(t3);
    }
    async beforeSeek(e3) {
      const t3 = this.tasks.get(e3);
      t3 && (t3.ended || t3.frontBuffered || (b.Yz("wait current pull front frame before seek, taskId: ".concat(t3.taskId), L, 902), await new (a2())((e4) => {
        t3.seekSync = e4;
      })), t3.seeking = true, t3.loop.stop(), t3.backFrame && ((0, U.A)(t3.backFrame) ? t3.avframePool.release(t3.backFrame) : t3.backFrame.close()), t3.frontFrame && ((0, U.A)(t3.frontFrame) ? t3.avframePool.release(t3.frontFrame) : t3.frontFrame.close()), t3.frontFrame = null, t3.backFrame = null, t3.currentPTS = y.Dh, b.Yz("before seek end, taskId: ".concat(t3.taskId), L, 930));
    }
    async syncSeekTime(e3, t3, i3) {
      const r3 = this.tasks.get(e3);
      if (r3) {
        for (; ; ) {
          if (r3.afterPullResolver) return r3.ended = true, r3.adjust = F.None, r3.backFrame = null, void b.R8("pull video frame end after unregisterTask, taskId: ".concat(e3), L, 943);
          if (r3.backFrame = await r3.leftIPCPort.request("pull"), u.ai(r3.backFrame) && r3.backFrame < 0) return r3.ended = true, r3.adjust = F.None, r3.backFrame = null, void b.R8("pull video frame end after seek, taskId: ".concat(e3), L, 953);
          if (t3 < BigInt(0)) {
            b.pq("use the first video frame because of the seek time".concat(t3, " < 0"), L, 958);
            break;
          }
          const i4 = (0, U.A)(r3.backFrame) ? (0, A.Mr)(o.f[17](r3.backFrame + 104), r3.backFrame + 120, y.i0) : (0, A.k)(BigInt(r3.backFrame.timestamp), y.KR, y.i0);
          if (i4 >= t3) {
            r3.ended = false, c.M[17](r3.stats + 336, i4), r3.lastNotifyPTS = i4, r3.currentPTS = i4, r3.masterTimer.setMasterTime(t3), r3.lastMasterPts = t3, b.Yz("got first video frame after syncSeekTime, pts: ".concat((0, U.A)(r3.backFrame) ? o.f[17](r3.backFrame + 104) : BigInt(r3.backFrame.timestamp), "(").concat(r3.currentPTS, "ms), taskId: ").concat(r3.taskId), L, 981);
            break;
          }
          (0, U.A)(r3.backFrame) ? r3.avframePool.release(r3.backFrame) : r3.backFrame.close();
        }
        b.Yz("sync seek time end, taskId: ".concat(r3.taskId), L, 1001);
      }
    }
    async afterSeek(e3, t3) {
      const i3 = this.tasks.get(e3);
      if (i3) {
        if (i3.ended) return i3.seeking = false, i3.controlIPCPort.notify("ended"), i3.afterPullResolver && (i3.afterPullResolver(), i3.afterPullResolver = null), void b.Yz("after seek end with task ended, taskId: ".concat(i3.taskId), L, 1016);
        if (i3.frontFrame = await i3.leftIPCPort.request("pull"), u.ai(i3.frontFrame) && i3.frontFrame < 0 ? (i3.frontFrame = null, i3.frontBuffered = false, i3.ended = true) : (i3.frontBuffered = true, i3.ended = false), i3.afterPullResolver) return i3.backFrame && ((0, U.A)(i3.backFrame) ? i3.avframePool.release(i3.backFrame) : i3.backFrame.close(), i3.backFrame = null), i3.frontFrame && ((0, U.A)(i3.frontFrame) ? i3.avframePool.release(i3.frontFrame) : i3.frontFrame.close(), i3.frontFrame = null), i3.seeking = false, i3.ended = true, i3.afterPullResolver(), i3.afterPullResolver = null, void b.Yz("after seek end with unregisterTask call, taskId: ".concat(i3.taskId), L, 1055);
        i3.adjust = F.None, i3.lastRenderTimestamp = (0, v.A)(), i3.currentPTS = (0, U.A)(i3.backFrame) ? (0, A.Mr)(o.f[17](i3.backFrame + 104), i3.backFrame + 120, y.i0) : (0, A.k)(BigInt(i3.backFrame.timestamp), y.KR, y.i0), c.M[17](i3.stats + 336, i3.currentPTS), i3.seeking = false, i3.pausing ? i3.backFrame && i3.render.render(i3.backFrame) : i3.loop.start(), b.Yz("after seek end, taskId: ".concat(i3.taskId), L, 1083);
      }
    }
    async renderNextFrame(e3) {
      const t3 = this.tasks.get(e3);
      if (t3 && t3.backFrame) {
        const e4 = (0, U.A)(t3.backFrame) ? (0, A.Mr)(o.f[17](t3.backFrame + 104), t3.backFrame + 120, y.i0) : (0, A.k)(BigInt(t3.backFrame.timestamp), y.KR, y.i0);
        t3.render.render(t3.backFrame), c.M[17](t3.stats + 336, e4), c.M[17](t3.stats + 160, o.f[17](t3.stats + 160) + BigInt(1)), t3.currentPTS = e4, t3.lastMasterPts = e4, this.swap(t3);
      }
    }
    async registerTask(e3) {
      return this.tasks.has(e3.taskId) ? h.lh : await this.createTask(e3);
    }
    async unregisterTask(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        const i3 = !!t3.loop;
        t3.loop && (await t3.loop.stopBeforeNextTick(), t3.loop.destroy(), t3.loop = null), !i3 || t3.ended || t3.frontFrame || await new (a2())((e4) => {
          t3.afterPullResolver = e4;
        }), t3.render && (t3.renderRedyed && t3.render.clear(), t3.render.destroy(), t3.render = null), t3.backFrame && ((0, U.A)(t3.backFrame) && t3.backFrame > 0 ? t3.avframePool.release(t3.backFrame) : t3.backFrame.close(), t3.backFrame = null), t3.frontFrame && ((0, U.A)(t3.frontFrame) && t3.frontFrame > 0 ? t3.avframePool.release(t3.frontFrame) : t3.frontFrame.close(), t3.frontFrame = null), t3.leftIPCPort.destroy(), t3.controlIPCPort.destroy(), this.tasks.delete(e3), b.Yz("unregisterTask task, taskId: ".concat(e3), L, 1162);
      }
    }
  }
}, 30128: (e2, t2, i2) => {
  i2.d(t2, { A: () => l });
  var r2, a2, s2 = i2(134), n = i2(80662), o = i2.n(n), c = i2(61499), d2 = i2(12085);
  class h {
    constructor() {
      (0, s2.A)(this, "min", void 0), (0, s2.A)(this, "max", void 0);
    }
  }
  r2 = h.prototype, (a2 = new (o())()).set("min", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), a2.set("max", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), (0, d2.A)(r2, c.Og, true), (0, d2.A)(r2, c.dc, 4), (0, d2.A)(r2, c.g7, 8), (0, d2.A)(r2, c.JY, a2);
  class l {
    constructor() {
      (0, s2.A)(this, "channels", void 0), (0, s2.A)(this, "sampleRate", void 0), (0, s2.A)(this, "audioFrameSize", void 0), (0, s2.A)(this, "audioPacketBytes", void 0), (0, s2.A)(this, "audioPacketCount", void 0), (0, s2.A)(this, "audioPacketQueueLength", void 0), (0, s2.A)(this, "audioDropPacketCount", void 0), (0, s2.A)(this, "audioDecodeErrorPacketCount", void 0), (0, s2.A)(this, "audioEncodeErrorFrameCount", void 0), (0, s2.A)(this, "audioFrameDecodeCount", void 0), (0, s2.A)(this, "audioPacketEncodeCount", void 0), (0, s2.A)(this, "audioFrameRenderCount", void 0), (0, s2.A)(this, "audioFrameDropCount", void 0), (0, s2.A)(this, "width", void 0), (0, s2.A)(this, "height", void 0), (0, s2.A)(this, "keyFrameInterval", void 0), (0, s2.A)(this, "gop", void 0), (0, s2.A)(this, "videoPacketBytes", void 0), (0, s2.A)(this, "videoPacketCount", void 0), (0, s2.A)(this, "videoPacketQueueLength", void 0), (0, s2.A)(this, "videoDropPacketCount", void 0), (0, s2.A)(this, "videoDecodeErrorPacketCount", void 0), (0, s2.A)(this, "videoEncodeErrorFrameCount", void 0), (0, s2.A)(this, "videoFrameDecodeCount", void 0), (0, s2.A)(this, "videoPacketEncodeCount", void 0), (0, s2.A)(this, "videoFrameRenderCount", void 0), (0, s2.A)(this, "videoFrameDropCount", void 0), (0, s2.A)(this, "keyFrameCount", void 0), (0, s2.A)(this, "bufferDropBytes", void 0), (0, s2.A)(this, "bufferReceiveBytes", void 0), (0, s2.A)(this, "bufferSendBytes", void 0), (0, s2.A)(this, "bufferOutputBytes", void 0), (0, s2.A)(this, "audioBitrate", void 0), (0, s2.A)(this, "videoBitrate", void 0), (0, s2.A)(this, "videoDecodeFramerate", void 0), (0, s2.A)(this, "videoRenderFramerate", void 0), (0, s2.A)(this, "videoEncodeFramerate", void 0), (0, s2.A)(this, "audioDecodeFramerate", void 0), (0, s2.A)(this, "audioRenderFramerate", void 0), (0, s2.A)(this, "audioEncodeFramerate", void 0), (0, s2.A)(this, "audioFrameDecodeIntervalMax", void 0), (0, s2.A)(this, "audioFrameRenderIntervalMax", void 0), (0, s2.A)(this, "videoFrameDecodeIntervalMax", void 0), (0, s2.A)(this, "videoFrameRenderIntervalMax", void 0), (0, s2.A)(this, "bandwidth", void 0), (0, s2.A)(this, "jitter", void 0), (0, s2.A)(this, "jitterBuffer", void 0), (0, s2.A)(this, "audioStutter", void 0), (0, s2.A)(this, "videoStutter", void 0), (0, s2.A)(this, "audiocodec", void 0), (0, s2.A)(this, "videocodec", void 0), (0, s2.A)(this, "firstAudioMuxDts", void 0), (0, s2.A)(this, "lastAudioMuxDts", void 0), (0, s2.A)(this, "firstVideoMuxDts", void 0), (0, s2.A)(this, "lastVideoMuxDts", void 0), (0, s2.A)(this, "audioCurrentTime", void 0), (0, s2.A)(this, "videoCurrentTime", void 0), (0, s2.A)(this, "audioNextTime", void 0), (0, s2.A)(this, "videoNextTime", void 0);
    }
  }
  !(function(e3) {
    var t3 = new (o())();
    t3.set("channels", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), t3.set("sampleRate", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), t3.set("audioFrameSize", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), t3.set("audioPacketBytes", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 16, 8: 0 }), t3.set("audioPacketCount", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 24, 8: 0 }), t3.set("audioPacketQueueLength", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 32, 8: 0 }), t3.set("audioDropPacketCount", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 40, 8: 0 }), t3.set("audioDecodeErrorPacketCount", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 48, 8: 0 }), t3.set("audioEncodeErrorFrameCount", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 52, 8: 0 }), t3.set("audioFrameDecodeCount", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 56, 8: 0 }), t3.set("audioPacketEncodeCount", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 64, 8: 0 }), t3.set("audioFrameRenderCount", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 72, 8: 0 }), t3.set("audioFrameDropCount", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 80, 8: 0 }), t3.set("width", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 84, 8: 0 }), t3.set("height", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 88, 8: 0 }), t3.set("keyFrameInterval", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 92, 8: 0 }), t3.set("gop", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 96, 8: 0 }), t3.set("videoPacketBytes", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 104, 8: 0 }), t3.set("videoPacketCount", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 112, 8: 0 }), t3.set("videoPacketQueueLength", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 120, 8: 0 }), t3.set("videoDropPacketCount", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 128, 8: 0 }), t3.set("videoDecodeErrorPacketCount", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 136, 8: 0 }), t3.set("videoEncodeErrorFrameCount", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 140, 8: 0 }), t3.set("videoFrameDecodeCount", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 144, 8: 0 }), t3.set("videoPacketEncodeCount", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 152, 8: 0 }), t3.set("videoFrameRenderCount", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 160, 8: 0 }), t3.set("videoFrameDropCount", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 168, 8: 0 }), t3.set("keyFrameCount", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 176, 8: 0 }), t3.set("bufferDropBytes", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 184, 8: 0 }), t3.set("bufferReceiveBytes", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 192, 8: 0 }), t3.set("bufferSendBytes", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 200, 8: 0 }), t3.set("bufferOutputBytes", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 208, 8: 0 }), t3.set("audioBitrate", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 216, 8: 0 }), t3.set("videoBitrate", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 220, 8: 0 }), t3.set("videoDecodeFramerate", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 224, 8: 0 }), t3.set("videoRenderFramerate", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 228, 8: 0 }), t3.set("videoEncodeFramerate", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 232, 8: 0 }), t3.set("audioDecodeFramerate", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 236, 8: 0 }), t3.set("audioRenderFramerate", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 240, 8: 0 }), t3.set("audioEncodeFramerate", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 244, 8: 0 }), t3.set("audioFrameDecodeIntervalMax", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 248, 8: 0 }), t3.set("audioFrameRenderIntervalMax", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 252, 8: 0 }), t3.set("videoFrameDecodeIntervalMax", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 256, 8: 0 }), t3.set("videoFrameRenderIntervalMax", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 260, 8: 0 }), t3.set("bandwidth", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 264, 8: 0 }), t3.set("jitter", { 0: 19, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 272, 8: 0 }), t3.set("jitterBuffer", { 0: h, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 280, 8: 0 }), t3.set("audioStutter", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 288, 8: 0 }), t3.set("videoStutter", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 292, 8: 0 }), t3.set("firstAudioMuxDts", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 296, 8: 0 }), t3.set("lastAudioMuxDts", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 304, 8: 0 }), t3.set("firstVideoMuxDts", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 312, 8: 0 }), t3.set("lastVideoMuxDts", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 320, 8: 0 }), t3.set("audioCurrentTime", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 328, 8: 0 }), t3.set("videoCurrentTime", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 336, 8: 0 }), t3.set("audioNextTime", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 344, 8: 0 }), t3.set("videoNextTime", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 352, 8: 0 }), (0, d2.A)(e3, c.Og, true), (0, d2.A)(e3, c.dc, 8), (0, d2.A)(e3, c.g7, 360), (0, d2.A)(e3, c.JY, t3);
  })(l.prototype);
}, 61634: (e2, t2, i2) => {
  i2.d(t2, { Ay: () => Ke, KU: () => Ge, dB: () => je, zM: () => Ye });
  var r2 = i2(134), a2 = i2(66681), s2 = i2.n(a2), n = i2(73146), o = i2.n(n), c = i2(54001), d2 = i2.n(c), h = i2(94144), l = i2.n(h), u = i2(45249), f = i2.n(u), p = i2(80662), m = i2.n(p), g = i2(61499), v = i2(52277), A = i2(74503), y = i2(63939), w = i2(9599), b = i2(29170), k = i2(77162), x = i2(94300), I = i2(87243), P = i2(72480), S = i2(31138), T = i2(18667), M = i2(88506), B = i2(96172), R = i2(8284), _ = i2(67672), C = i2(95335), U = i2(76045), D = i2(56024), E = i2(71517), L = i2(59377), z = i2(33968), $ = i2(8507), F = i2(26429), N = i2(41324), V = i2(88397), O = i2(11473), q = i2(11628), W = i2(28090), H = i2(47595), G = i2(4624), j = i2(95797), Q = i2(48641), Y = i2(36), K = i2(86834), X = i2(44328), J = i2(77231), Z = (i2(30128), i2(14686)), ee = i2(67593), te = i2(28875), ie = i2(10333), re = i2(85224), ae = i2(25115), se = i2(39365), ne = i2(13724), oe = i2(78201), ce = i2(73783), de = i2(43607), he = i2(76750), le = i2(2368), ue = i2(79756), fe = i2(62751), pe = i2(548), me = i2(72739), ge = i2(24310), ve = i2(93147), Ae = i2(40031), ye = i2(94561), we = i2(44690), be = i2(84149), ke = i2(9705), xe = i2(77580), Ie = i2(79686), Pe = i2(49847), Se = i2(71762), Te = i2(29998), Me = i2(40097), Be = i2(21678), Re = i2(21862), _e = i2(364), Ce = i2(14619), Ue = i2(36773), De = i2(42383), Ee = i2(67603), Le = i2(54058), ze = i2(50315), $e = i2(3680), Fe = i2(61619), Ne = i2(37837), Ve = i2(80089), Oe = i2(30691), qe = i2(50011);
  const We = "src/avplayer/AVPlayer.ts", He = { 1: "cover", 0: "contain" }, Ge = [27, 173, 12, 196, 225, 139, 167, 30, 2, 1, 3, 4, 20, 19, 14, 15, 16, 5, 6, 68, 69, 17, 18, 71, 7, 86018, 86017, 86076, 86028, 86051, 86021, 86019, 86056, 86020, 86023, 86024, 86052, 86054, 86053, 86036, 86057, 86073, 94226, 94225, 94230, 94212, 94232, 94213, 94210], je = [27, 173, 225, 139, 167, 86018, 86017, 86076, 86028, 86021], Qe = { enableHardware: !we.A.ios, enableWebGPU: true, enableWorker: !we.A.ios, enableWebCodecs: true, enableAudioWorklet: true, loop: false, enableJitterBuffer: true, jitterBufferMax: 4, jitterBufferMin: 1, lowLatency: false, preLoadTime: 4, maxLatency: 5 };
  var Ye;
  !(function(e3) {
    e3[e3.LOW = 0] = "LOW", e3[e3.MEDIUM = 1] = "MEDIUM", e3[e3.HIGH = 2] = "HIGH", e3[e3.HD = 3] = "HD";
  })(Ye || (Ye = {}));
  class Ke extends B.A {
    constructor(e3) {
      super(true), (0, r2.A)(this, "VideoDecoderThread", void 0), (0, r2.A)(this, "VideoRenderThread", void 0), (0, r2.A)(this, "VideoPipelineProxy", void 0), (0, r2.A)(this, "GlobalData", void 0), (0, r2.A)(this, "taskId", void 0), (0, r2.A)(this, "subTaskId", void 0), (0, r2.A)(this, "subtitleTaskId", void 0), (0, r2.A)(this, "ext", void 0), (0, r2.A)(this, "source", void 0), (0, r2.A)(this, "ioIPCPort", void 0), (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "ioloader2DemuxerChannel", void 0), (0, r2.A)(this, "demuxer2VideoDecoderChannel", void 0), (0, r2.A)(this, "demuxer2AudioDecoderChannel", void 0), (0, r2.A)(this, "videoDecoder2VideoRenderChannel", void 0), (0, r2.A)(this, "audioDecoder2AudioRenderChannel", void 0), (0, r2.A)(this, "audioRender2AudioWorkletChannel", void 0), (0, r2.A)(this, "audioSourceNode", void 0), (0, r2.A)(this, "gainNode", void 0), (0, r2.A)(this, "formatContext", void 0), (0, r2.A)(this, "canvas", void 0), (0, r2.A)(this, "updateCanvas", void 0), (0, r2.A)(this, "video", void 0), (0, r2.A)(this, "audio", void 0), (0, r2.A)(this, "controller", void 0), (0, r2.A)(this, "volume", void 0), (0, r2.A)(this, "playRate", void 0), (0, r2.A)(this, "renderMode", void 0), (0, r2.A)(this, "renderRotate", void 0), (0, r2.A)(this, "flipHorizontal", void 0), (0, r2.A)(this, "flipVertical", void 0), (0, r2.A)(this, "useMSE", void 0), (0, r2.A)(this, "audioEnded", void 0), (0, r2.A)(this, "videoEnded", void 0), (0, r2.A)(this, "status", void 0), (0, r2.A)(this, "lastStatus", void 0), (0, r2.A)(this, "playChannels", void 0), (0, r2.A)(this, "seekedTimestamp", void 0), (0, r2.A)(this, "isLive_", void 0), (0, r2.A)(this, "drmSystemKey", void 0), (0, r2.A)(this, "drmSession", void 0), (0, r2.A)(this, "stopPending", void 0), (0, r2.A)(this, "statsController", void 0), (0, r2.A)(this, "jitterBufferController", void 0), (0, r2.A)(this, "selectedVideoStream", void 0), (0, r2.A)(this, "selectedAudioStream", void 0), (0, r2.A)(this, "selectedSubtitleStream", void 0), (0, r2.A)(this, "lastSelectedInnerSubtitleStreamIndex", void 0), (0, r2.A)(this, "subtitleRender", void 0), (0, r2.A)(this, "externalSubtitleTasks", void 0), (0, r2.A)(this, "animationTriggered", false), (0, r2.A)(this, "currentQuality", 1), (0, r2.A)(this, "totalQuality", 4), (0, r2.A)(this, "qualityCheckTimer", null), (0, r2.A)(this, "lastStutterCount", 0), (0, r2.A)(this, "qualityCheckInterval", 1e3), (0, r2.A)(this, "qualityUpgradeCounter", 0), (0, r2.A)(this, "qualityDowngradeCounter", 0), (0, r2.A)(this, "qualityUpgradeThreshold", 5), (0, r2.A)(this, "qualityDowngradeThreshold", 1), (0, r2.A)(this, "isQualityChanging", false), (0, r2.A)(this, "firstIFrameTimecode", null), (0, r2.A)(this, "firstIFramePts", null), (0, r2.A)(this, "timecodeReceived", false), (0, r2.A)(this, "maxLatency", 5), (0, r2.A)(this, "driftConfirms", 3), (0, r2.A)(this, "driftCooldownMs", 3e4), (0, r2.A)(this, "driftExceedCount", 0), (0, r2.A)(this, "lastReloadAtMs", 0), (0, r2.A)(this, "driftEndedTriggered", false), (0, r2.A)(this, "timecodeQueue", []), (0, r2.A)(this, "qualityMode", "AUTO"), this.options = C.X$({}, Qe, e3), this.taskId = (0, R.A)(), this.status = 0, this.volume = 1, this.playRate = 1, this.renderMode = 0, this.renderRotate = 0, this.flipHorizontal = false, this.flipVertical = false, this.seekedTimestamp = J.Dh, this.isLive_ = !!e3.isLive, _.ai(e3.maxLatency) ? this.setMaxLatency(e3.maxLatency) : _.ai(this.options.maxLatency) && (this.maxLatency = Math.max(0.1, this.options.maxLatency), this.options.maxLatency = this.maxLatency), this.GlobalData = (0, A.A)(v.M), this.statsController = new oe.A(this.GlobalData[g.o9] + 32, !(F.USE_THREADS || !j.A.worker || !this.options.enableWorker), this), this.externalSubtitleTasks = [], this.lastSelectedInnerSubtitleStreamIndex = -1, ce.Ts(this.GlobalData[g.o9] + 24), ce.Ts(this.GlobalData[g.o9] + 28), Ke.Instances.push(this), G.pq("create player, taskId: ".concat(this.taskId), We, 700);
    }
    onFirstIFrameTimecode(e3, t3) {
      this.timecodeReceived || (this.firstIFrameTimecode = e3, this.firstIFramePts = t3, this.timecodeReceived = true, G.Yz("[debug:timecode - AVPlayer] 已儲存 firstIFrameTimecode | timecode=".concat(e3, " pts=").concat(Number(t3), " taskId=").concat(this.taskId), We, 711));
    }
    get currentTime() {
      var e3;
      return this.useMSE ? BigInt(Math.floor(1e3 * ((null === (e3 = this.video || this.audio) || void 0 === e3 ? void 0 : e3.currentTime) || 0))) : this.selectedAudioStream && this.selectedVideoStream ? de.T9(this.GlobalData.stats.audioCurrentTime, this.GlobalData.stats.videoCurrentTime) : this.selectedAudioStream ? this.GlobalData.stats.audioCurrentTime : this.selectedVideoStream ? this.GlobalData.stats.videoCurrentTime : BigInt(0);
    }
    isCodecIdSupported(e3, t3, i3 = false) {
      return e3 > 65536 && e3 <= 65572 || e3 >= 69632 && e3 <= 69683 || me.zy(!i3 || 1 !== t3 && 0 !== t3 ? Ge : je, e3);
    }
    findBestStream(e3, t3, i3 = false) {
      if (this.options.findBestStream) return this.options.findBestStream(e3, t3);
      const r3 = e3.filter((e4) => y.f[15](e4.codecpar) === t3);
      if (r3.length) {
        if (1 === r3.length) return r3[0];
        const e4 = r3.find((e5) => !!(1 & e5.disposition));
        return e4 && this.isCodecIdSupported(y.f[15](e4.codecpar + 4), y.f[15](e4.codecpar), i3) ? e4 : r3.find((e5) => this.isCodecIdSupported(y.f[15](e5.codecpar + 4), y.f[15](e5.codecpar), i3)) || r3[0];
      }
    }
    async checkUseMSE(e3) {
      {
        if (!j.A.mse) return G.R8("disable mse because of not support mse", We, 782), false;
        if (!j.A.wasmPlayerSupported) return G.R8("use mse because of not support wasm", We, 788), true;
        const t3 = this.findBestStream(this.formatContext.streams, 0, true), i3 = this.findBestStream(this.formatContext.streams, 1, true);
        if (e3.video && t3 && !(0, he.A)().isTypeSupported((0, ie.A)(t3.codecpar))) return G.R8("can not support mse for codec: ".concat((0, ie.A)(t3.codecpar), ", taskId: ").concat(this.taskId), We, 797), false;
        if (e3.audio && i3 && !(0, he.A)().isTypeSupported((0, re.A)(i3.codecpar))) return G.R8("can not support mse for codec: ".concat((0, re.A)(i3.codecpar), ", taskId: ").concat(this.taskId), We, 801), false;
        if (e3.video && t3 && t3.metadata.encryption || e3.audio && i3 && i3.metadata.encryption) return true;
        if (10 === this.formatContext.format) return false;
        if (this.options.checkUseMES) return this.options.checkUseMES(this.formatContext.streams);
        if (t3 && e3.video) {
          if ((0, ge.A)(t3.codecpar)) return G.R8("use mse because of hdr", We, 831), true;
          if (this.isMediaStreamMode() && !j.A.trackGenerator) {
            if (K.A.firefox && (0, H.A)() && (F.USE_THREADS || j.A.worker && this.options.enableWorker)) return G.R8("use mse because of cannot use captureStream in OffscreenCanvas on firefox", We, 846), true;
            if (K.A.safari || we.A.ios) return G.R8("disable mse because of cannot use captureStream in HTMLMediaElement on safari", We, 851), false;
          }
          if (y.f[15](t3.codecpar + 56) * y.f[15](t3.codecpar + 60) > 2073600) {
            if (!j.A.videoDecoder) return G.R8("use mse because of cannot use webcodec VideoDecoder with resolution more then 1080p", We, 860), true;
            if (this.isMediaStreamMode() && !j.A.trackGenerator) return G.R8("use mse because of cannot use MediaStreamTrackGenerator with resolution more then 1080p in MediaStream mode", We, 865), true;
            let e4 = null;
            0 !== y.f[20](t3.codecpar + 12) && (e4 = (0, Z.s3)(y.f[20](t3.codecpar + 12), y.f[15](t3.codecpar + 16)));
            try {
              const i4 = { codec: (0, te.A)(t3.codecpar), codedWidth: y.f[15](t3.codecpar + 56), codedHeight: y.f[15](t3.codecpar + 60), description: 1 & y.f[15](t3.codecpar + 160) ? void 0 : e4, hardwareAcceleration: (0, se.C)(true) };
              if (i4.description || delete i4.description, !(await VideoDecoder.isConfigSupported(i4)).supported) return G.R8("use mse because of cannot use webcodec hardwareAcceleration VideoDecoder with resolution more then 1080p", We, 889), true;
            } catch (e5) {
            }
          } else if (y.f[15](t3.codecpar + 56) * y.f[15](t3.codecpar + 60) == 2073600 && (K.A.safari && !K.A.checkVersion(K.A.version, "16.1", true) || we.A.ios && !K.A.checkVersion(we.A.version, "16.1", true)) && (0, X.lb)((0, b.A)(t3.codecpar + 72, w.P)) > 30) return true;
        }
      }
      return false;
    }
    createCanvas() {
      const e3 = document.createElement("canvas");
      e3.id = "avplayer-canvas-" + (0, R.A)(), e3.className = "avplayer-canvas";
      const t3 = this.options.container;
      let i3 = t3.offsetWidth;
      return e3.width = i3 * devicePixelRatio, e3.height = t3.offsetHeight * devicePixelRatio, e3.style.cssText = "\n      width: 100%;\n      height: 100%;\n    ", e3.ondragstart = () => false, s2()(e3, "currentTime", { enumerable: true, configurable: false, get: () => Number(this.currentTime) / 1e3, set: (e4) => {
        this.seek(BigInt(Math.floor(Math.floor(1e3 * e4))));
      } }), e3;
    }
    createVideo() {
      this.video && !this.isMediaStreamMode() && this.options.container.removeChild(this.video);
      const e3 = document.createElement("video");
      e3.autoplay = true, e3.playsInline = true, e3.className = "avplayer-video", e3.style.cssText = "\n      width: 100%;\n      height: 100%;\n    ", this.isMediaStreamMode() || this.options.container.appendChild(e3), this.video = e3;
    }
    createAudio() {
      this.audio && !this.isMediaStreamMode() && this.options.container.removeChild(this.audio);
      const e3 = document.createElement("audio");
      e3.autoplay = true, e3.className = "avplayer-audio", this.isMediaStreamMode() || this.options.container.appendChild(e3), this.audio = e3;
    }
    handleTimeupdate(e3) {
      let t3 = 0;
      e3.ontimeupdate = () => {
        const i3 = e3.currentTime;
        Math.abs(i3 - t3) >= 1 && (6 === this.status && (this.fire(W.E9, [this.currentTime]), Ke.MSEThread.setCurrentTime(this.taskId, i3)), t3 = i3);
      }, e3.onended = () => {
        this.audioEnded = true, this.videoEnded = true, this.handleEnded();
      }, e3.onwaiting = () => {
        this.audio === e3 ? this.GlobalData.stats.audioStutter++ : (this.GlobalData.stats.audioStutter++, this.GlobalData.stats.videoStutter++);
      }, e3.oncanplay = () => {
        6 === this.status && e3.play();
      }, e3.onencrypted = async (t4) => {
        if (this.drmSession) return;
        this.drmSession = e3.mediaKeys.createSession(), this.drmSession.onmessage = async (e4) => {
          var t5;
          let i4, r4;
          if (this.isDash()) {
            if (this.hasVideo()) {
              const e5 = await Ke.IOThread.getCurrentProtection(this.taskId, 0);
              null != e5 && e5.url && (i4 = e5.url);
            }
            if (!i4 && this.hasAudio()) {
              const e5 = await Ke.IOThread.getCurrentProtection(this.taskId, 1);
              null != e5 && e5.url && (i4 = e5.url);
            }
          }
          if (null !== (t5 = this.options.drmSystemOptions) && void 0 !== t5 && t5.onRequest) r4 = await this.options.drmSystemOptions.onRequest(this.drmSystemKey, e4.messageType, e4.message, i4);
          else if (this.options.drmSystemOptions.requestUrl) {
            var a3, s3, n2;
            r4 = await fetch(this.options.drmSystemOptions.requestUrl, { method: null !== (a3 = null === (s3 = this.options.drmSystemOptions) || void 0 === s3 ? void 0 : s3.method) && void 0 !== a3 ? a3 : "POST", headers: null === (n2 = this.options.drmSystemOptions) || void 0 === n2 ? void 0 : n2.header, body: e4.message }).then((e5) => e5.arrayBuffer());
          } else if (i4) {
            var o2, c2, d3, h2;
            r4 = await fetch(i4, { method: null !== (o2 = null === (c2 = this.options.drmSystemOptions) || void 0 === c2 ? void 0 : c2.method) && void 0 !== o2 ? o2 : "POST", headers: null !== (d3 = null === (h2 = this.options.drmSystemOptions) || void 0 === h2 ? void 0 : h2.header) && void 0 !== d3 ? d3 : { "Content-Type": "application/json" }, body: e4.message }).then((e5) => e5.arrayBuffer());
          }
          r4 && await this.drmSession.update(r4);
        };
        let i3 = t4.initDataType, r3 = t4.initData;
        if (this.drmSystemKey === Ve.s.CLEARKEY) {
          const e4 = [];
          if (this.selectedAudioStream) {
            const t5 = this.selectedAudioStream.metadata.encryption;
            null != t5 && t5.kid && e4.push((0, Oe.A)(t5.kid));
          }
          if (this.selectedVideoStream) {
            const t5 = this.selectedVideoStream.metadata.encryption;
            if (null != t5 && t5.kid) {
              const i4 = (0, Oe.A)(t5.kid);
              i4 !== e4[0] && e4.push(i4);
            }
          }
          i3 = "keyids", r3 = qe.encode(o()({ kids: e4 })).buffer;
        }
        await this.drmSession.generateRequest(i3, r3);
      };
    }
    async replayTo(e3) {
      let t3 = -BigInt(1);
      this.isDash() || this.isHls() ? (t3 = await Ke.DemuxerThread.seek(this.taskId, e3, 16), this.subTaskId && await Ke.DemuxerThread.seek(this.subTaskId, e3, 16), this.subtitleTaskId && await Ke.DemuxerThread.seek(this.subtitleTaskId, e3, 16)) : t3 = await Ke.DemuxerThread.seek(this.taskId, e3, 8);
      for (let t4 = 0; t4 < this.externalSubtitleTasks.length; t4++) await Ke.DemuxerThread.seek(this.externalSubtitleTasks[0].taskId, e3, 8);
      if (this.fire(W.E9, [e3]), this.useMSE) {
        var i3;
        null !== (i3 = this.video || this.audio) && void 0 !== i3 && i3.src && URL.revokeObjectURL((this.video || this.audio).src), await Ke.MSEThread.restart(this.taskId);
        const t4 = await Ke.MSEThread.getMediaSource(this.taskId);
        var r3, a3;
        t4 && (j.A.workerMSE && t4 instanceof MediaSourceHandle ? (this.video || this.audio).srcObject = t4 : (this.video || this.audio).src = URL.createObjectURL(t4), this.video ? (this.video.currentTime = Number(e3) / 1e3, this.video.playbackRate = this.playRate) : this.audio && (this.audio.currentTime = Number(e3) / 1e3, this.audio.playbackRate = this.playRate), await d2().all([null === (r3 = this.video) || void 0 === r3 ? void 0 : r3.play(), null === (a3 = this.audio) || void 0 === a3 ? void 0 : a3.play()]));
      } else {
        let i4 = 20;
        this.formatContext.streams.forEach((e4) => {
          0 === y.f[15](e4.codecpar) && (i4 = Math.max(Math.ceil((0, X.lb)((0, b.A)(e4.codecpar + 72, w.P))), i4));
        }), this.audioDecoder2AudioRenderChannel && (await Ke.AudioDecoderThread.resetTask(this.taskId), await Ke.AudioRenderThread.syncSeekTime(this.taskId, t3 >= 0 ? t3 > e3 ? t3 : e3 : J.Dh, i4), await Ke.AudioRenderThread.restart(this.taskId), this.controller.setTimeUpdateListenType(1)), this.audioSourceNode && (await this.audioSourceNode.request("restart"), "suspended" !== Ke.audioContext.state && "interrupted" !== Ke.audioContext.state || await Ke.AudioRenderThread.fakePlay(this.taskId), this.audioEnded = false), this.videoDecoder2VideoRenderChannel && (await this.VideoDecoderThread.resetTask(this.taskId), await this.VideoRenderThread.beforeSeek(this.taskId), await this.VideoRenderThread.syncSeekTime(this.taskId, t3 >= 0 ? t3 > e3 ? t3 : e3 : J.Dh, i4), await this.VideoRenderThread.restart(this.taskId), this.videoEnded = false);
      }
      this.subtitleRender && (this.subtitleRender.reset(), this.subtitleRender.start());
    }
    async handleEnded() {
      this.driftEndedTriggered || this.audioEnded && this.videoEnded && (G.pq("[AVPlayer.handleEnded] player ended, taskId: ".concat(this.taskId), We, 1202), this.options.loop && !this.isLive_ ? (G.pq("loop play, taskId: ".concat(this.taskId), We, 1206), await this.replayTo(BigInt(0))) : (this.status = 7, this.fire(W.hV)));
    }
    isHls() {
      return "m3u8" === this.ext || "m3u" === this.ext;
    }
    isDash() {
      return "mpd" === this.ext;
    }
    getMinStartPTS() {
      let e3 = J.Dh;
      for (const t3 of this.formatContext.streams) t3.startTime !== J.Dh && (e3 = e3 === J.Dh ? (0, X.k)(t3.startTime, t3.timeBase, J.i0) : de.jk(e3, (0, X.k)(t3.startTime, t3.timeBase, J.i0)));
      return e3 < BigInt(1e3) ? BigInt(0) : e3;
    }
    async getResource(e3, t3, i3) {
      var r3;
      const a3 = null != t3 ? "".concat(e3, "-").concat(t3) : e3;
      if (Ke.Resource.has(a3)) return Ke.Resource.get(a3);
      const s3 = this.options.getWasm ? this.options.getWasm(e3, t3, i3) : (0, Ee.A)(null !== (r3 = this.options.wasmBaseUrl) && void 0 !== r3 ? r3 : "https://cdn.jsdelivr.net/gh/zhaohappy/libmedia@".concat("v0.10.0-alpha.3-7-gb47705d4".split("-")[0].replace(/^[v|n]/, ""), "/dist"), e3, t3);
      if (s3) {
        let e4;
        if ((K.A.safari && !K.A.checkVersion(K.A.version, "16.4", true) || we.A.ios && !K.A.checkVersion(we.A.version, "16.4", true)) && (_.Yj(s3) || _.sv(s3))) if (_.Yj(s3)) {
          const t4 = { method: "GET", headers: {}, mode: "cors", cache: "default", referrerPolicy: "no-referrer-when-downgrade" }, i4 = await fetch(s3, t4);
          e4 = await i4.arrayBuffer();
        } else e4 = s3;
        else e4 = await (0, ye.A)(s3, 0 === i3);
        return Ke.Resource.set(a3, e4), e4;
      }
    }
    createSubtitleRender(e3, t3) {
      var i3, r3, a3, s3;
      this.isMediaStreamMode() || (this.subtitleRender = new Ae.A({ dom: this.canvas || this.video || this.options.container, getCurrentTime: () => this.currentTime, avpacketList: this.GlobalData[g.o9], avpacketListMutex: this.GlobalData[g.o9] + 24, codecpar: e3.codecpar, container: this.options.container, videoWidth: null !== (i3 = y.f[15]((null === (r3 = this.selectedVideoStream) || void 0 === r3 ? void 0 : r3.codecpar) + 56)) && void 0 !== i3 ? i3 : 0, videoHeight: null !== (a3 = y.f[15]((null === (s3 = this.selectedVideoStream) || void 0 === s3 ? void 0 : s3.codecpar) + 60)) && void 0 !== a3 ? a3 : 0 }), this.subtitleRender.setDemuxTask(t3), this.selectedSubtitleStream = e3, t3 === this.taskId && (this.lastSelectedInnerSubtitleStreamIndex = e3.index), Ke.DemuxerThread.connectStreamTask.transfer(this.subtitleRender.getDemuxerPort(t3)).invoke(t3, e3.index, this.subtitleRender.getDemuxerPort(t3)));
    }
    async loadExternalSubtitle(e3) {
      if (1 !== this.status && 2 !== this.status || G.h2("player has already destroyed", We, 1344), e3.source || G.h2("external subtitle must has source", We, 1348), this.externalSubtitleTasks.some((t4) => t4.source === e3.source)) return void G.R8("external subtitle has already loaded", We, 1352);
      const t3 = (0, R.A)(), i3 = (0, ee.A)(this.options.enableWorker), r3 = C.X$({ taskId: t3, streamId: -1, ioloader2DemuxerChannel: i3 }, e3);
      let a3 = "", s3 = 0, n2 = 0;
      _.Yj(e3.source) ? (n2 |= 4, a3 = $.qg(e3.source).file.split(".").pop(), s3 = await Ke.IOThread.registerTask.transfer(i3.port1).invoke({ type: 0, info: { url: e3.source }, range: { from: -1, to: -1 }, taskId: t3, options: { isLive: this.isLive_ }, rightPort: i3.port1, stats: this.GlobalData[g.o9] + 32 })) : (a3 = e3.source.name.split(".").pop(), s3 = await Ke.IOThread.registerTask.transfer(i3.port1).invoke({ type: 1, info: { file: e3.source }, range: { from: -1, to: -1 }, taskId: t3, options: { isLive: this.isLive_ }, rightPort: i3.port1, stats: this.GlobalData[g.o9] + 32 })), s3 < 0 && G.h2("register io task failed, ret: ".concat(s3, ", taskId: ").concat(this.taskId), We, 1416), await Ke.DemuxerThread.registerTask.transfer(i3.port2).invoke({ taskId: t3, leftPort: i3.port2, format: fe.HR[a3], stats: 0, isLive: false, flags: n2, avpacketList: this.GlobalData[g.o9], avpacketListMutex: this.GlobalData[g.o9] + 24 }), s3 = await Ke.DemuxerThread.openStream(t3), s3 < 0 && G.h2("open external subtitle failed, ret: ".concat(s3, ", taskId: ").concat(t3), We, 1433);
      let o2 = await Ke.DemuxerThread.analyzeStreams(t3);
      if (_.ai(o2)) return void G.h2("analyze stream failed, ret: ".concat(o2), We, 1437);
      o2.streams.length || G.h2("not found any stream", We, 1441);
      const c2 = o2.streams[0];
      this.formatContext.streams.push(c2), r3.streamId = c2.id, e3.lang && (c2.metadata.language = e3.lang), e3.title && (c2.metadata.title = e3.title);
      const d3 = 8 === this.status || 6 === this.status || 9 === this.status || 10 === this.status;
      return d3 && await Ke.DemuxerThread.seek(t3, this.currentTime, 8), d3 && !this.subtitleRender ? (this.createSubtitleRender(c2, t3), this.subtitleRender.start()) : this.subtitleRender && await Ke.DemuxerThread.connectStreamTask.transfer(this.subtitleRender.getDemuxerPort(t3)).invoke(t3, c2.index, this.subtitleRender.getDemuxerPort(t3)), await Ke.DemuxerThread.startDemux(t3, false, 10), this.externalSubtitleTasks.push(r3), this.fire(W.xv), 0;
    }
    async load(e3, t3 = {}) {
      G.pq("[AVPlayer.load] status: ".concat(this.status), We, 1493), 7 === this.status && await this.stop(true), 7 === this.status && await this.stop(true), console.log("CrystalPlayer version: 0.10.0-alpha.5"), G.pq("call load, taskId: ".concat(this.taskId), We, 1504), this.status = 3, this.fire(W.F5), _.zM(t3.isLive) ? this.isLive_ = t3.isLive : this.isLive_ = !!this.options.isLive, this.controller = new q.A(this, this.options.enableWorker), this.ioloader2DemuxerChannel = (0, ee.A)(this.options.enableWorker), (0, Z.sO)(this.GlobalData[g.o9] + 32, 0, 360), this.externalSubtitleTasks.length = 0, this.firstIFrameTimecode = null, this.firstIFramePts = null, this.timecodeReceived = false, this.driftExceedCount = 0, this.lastReloadAtMs = 0, this.driftEndedTriggered = false, this.timecodeQueue.length = 0, await Ke.startDemuxPipeline(this.options.enableWorker);
      let i3 = 0, r3 = 0;
      if (_.Yj(e3)) {
        we.A.ios && (e3.includes("hi") || e3.includes("hd")) && (e3 = (e3 = e3.replace("hi", "me")).replace("hd", "me")), i3 |= 4;
        let { info: a4, type: s4, ext: n2 } = await (0, _e.A)(e3, t3.ext, t3.http);
        this.ext = n2, r3 = await Ke.IOThread.registerTask.transfer(this.ioloader2DemuxerChannel.port1).invoke({ type: s4, info: { ...a4, httpOptions: t3.http, webtransportOptions: t3.webtransport, websocketOptions: t3.websocket, uri: t3.uri }, range: { from: -1, to: -1 }, taskId: this.taskId, options: C.X$({}, t3.ioLoaderOptions || {}, { isLive: this.isLive_ }), rightPort: this.ioloader2DemuxerChannel.port1, stats: this.GlobalData[g.o9] + 32 });
      } else if (e3 instanceof File) this.isLive_ = false, this.ext = e3.name.split(".").pop(), r3 = await Ke.IOThread.registerTask.transfer(this.ioloader2DemuxerChannel.port1).invoke({ type: 1, info: { file: e3 }, range: { from: -1, to: -1 }, taskId: this.taskId, options: C.X$({}, t3.ioLoaderOptions || {}, { isLive: false }), rightPort: this.ioloader2DemuxerChannel.port1, stats: this.GlobalData[g.o9] + 32 });
      else if (e3 instanceof Pe.A) {
        const t4 = e3;
        i3 |= e3.flags || 0, this.ext = e3.ext, this.ioIPCPort = new be.Ay(this.ioloader2DemuxerChannel.port1), this.ioIPCPort.on(be.S3, async (e4) => {
          switch (e4.method) {
            case "open":
              try {
                const i4 = await t4.open();
                if (i4 < 0) {
                  G.z3("custom loader open error, ".concat(i4, ", taskId: ").concat(this.taskId), We, 1603), this.ioIPCPort.reply(e4, null, i4);
                  break;
                }
                this.ioIPCPort.reply(e4, i4);
              } catch (t5) {
                G.z3("loader open error, ".concat(t5, ", taskId: ").concat(this.taskId), We, 1610), this.ioIPCPort.reply(e4, null, t5);
              }
              break;
            case "read": {
              const i4 = e4.params.pointer, r4 = e4.params.length, a4 = e4.params.ioloaderOptions, s4 = Ke.IODemuxProxy ? new Uint8Array(r4) : (0, Z.JW)(i4, r4);
              try {
                const i5 = await t4.read(s4, a4);
                i5 < 0 ? this.ioIPCPort.reply(e4, i5, null) : (this.GlobalData.stats.bufferReceiveBytes += BigInt(0 | i5), this.ioIPCPort.reply(e4, Ke.IODemuxProxy ? s4.subarray(0, i5) : i5, null, Ke.IODemuxProxy ? [s4.buffer] : null));
              } catch (t5) {
                G.z3("loader read error, ".concat(t5, ", taskId: ").concat(this.taskId), We, 1633), this.ioIPCPort.reply(e4, ke.LR);
              }
              break;
            }
            case "write": {
              const i4 = e4.params.pointer, r4 = e4.params.length, a4 = (0, Z.JW)(i4, r4);
              try {
                const i5 = await t4.write(a4);
                this.GlobalData.stats.bufferSendBytes += r4, this.ioIPCPort.reply(e4, i5);
              } catch (t5) {
                G.z3("loader write error, ".concat(t5, ", taskId: ").concat(this.taskId), We, 1655), this.ioIPCPort.reply(e4, ke.LR);
              }
              break;
            }
            case "seek": {
              const i4 = e4.params.pos, r4 = e4.params.ioloaderOptions;
              try {
                const a4 = await t4.seek(i4, r4);
                if (a4 < 0) {
                  G.z3("custom loader seek error, ".concat(a4, ", taskId: ").concat(this.taskId), We, 1671), this.ioIPCPort.reply(e4, null, a4);
                  break;
                }
                this.ioIPCPort.reply(e4, a4);
              } catch (t5) {
                G.z3("loader seek error, ".concat(t5, ", taskId: ").concat(this.taskId), We, 1678), this.ioIPCPort.reply(e4, null, t5);
              }
              break;
            }
            case "size":
              this.ioIPCPort.reply(e4, await t4.size());
          }
        });
      } else G.h2("invalid source", We, 1692);
      r3 < 0 && G.h2("register io task failed, ret: ".concat(r3, ", taskId: ").concat(this.taskId), We, 1696), (this.isDash() || this.isHls()) && (i3 |= 2);
      const a3 = C.X$({}, t3.formatOptions || {});
      if (this.isDash() || this.isHls()) {
        await Ke.IOThread.open(this.taskId);
        const e4 = await Ke.IOThread.hasAudio(this.taskId), t4 = await Ke.IOThread.hasVideo(this.taskId);
        e4 && t4 ? (this.subTaskId = (0, R.A)(), await Ke.DemuxerThread.registerTask.transfer(this.ioloader2DemuxerChannel.port2, this.controller.getDemuxerControlPort()).invoke({ taskId: this.taskId, leftPort: this.ioloader2DemuxerChannel.port2, controlPort: this.controller.getDemuxerControlPort(), format: fe.HR[this.ext], stats: this.GlobalData[g.o9] + 32, isLive: this.isLive_, flags: i3, ioloaderOptions: { mediaType: 1 }, formatOptions: a3, avpacketList: this.GlobalData[g.o9], avpacketListMutex: this.GlobalData[g.o9] + 24 }), await Ke.DemuxerThread.registerTask({ taskId: this.subTaskId, mainTaskId: this.taskId, flags: i3, format: fe.HR[this.ext], stats: this.GlobalData[g.o9] + 32, isLive: this.isLive_, ioloaderOptions: { mediaType: 0 }, formatOptions: a3, avpacketList: this.GlobalData[g.o9], avpacketListMutex: this.GlobalData[g.o9] + 24 })) : (e4 || t4) && await Ke.DemuxerThread.registerTask.transfer(this.ioloader2DemuxerChannel.port2, this.controller.getDemuxerControlPort()).invoke({ taskId: this.taskId, leftPort: this.ioloader2DemuxerChannel.port2, controlPort: this.controller.getDemuxerControlPort(), format: fe.HR[this.ext], stats: this.GlobalData[g.o9] + 32, isLive: this.isLive_, flags: i3, ioloaderOptions: { mediaType: e4 ? 1 : 0 }, formatOptions: a3, avpacketList: this.GlobalData[g.o9], avpacketListMutex: this.GlobalData[g.o9] + 24 });
      } else "rtsp" !== this.ext && "rtmp" !== this.ext || (a3.uri = t3.uri || e3.replace(/^\S+:\/\//, this.ext + "://")), await Ke.DemuxerThread.registerTask.transfer(this.ioloader2DemuxerChannel.port2, this.controller.getDemuxerControlPort()).invoke({ taskId: this.taskId, leftPort: this.ioloader2DemuxerChannel.port2, controlPort: this.controller.getDemuxerControlPort(), format: fe.HR[this.ext], formatOptions: a3, stats: this.GlobalData[g.o9] + 32, isLive: this.isLive_, flags: i3, avpacketList: this.GlobalData[g.o9], avpacketListMutex: this.GlobalData[g.o9] + 24 });
      (this.isDash() || this.isHls()) && await Ke.IOThread.hasSubtitle(this.taskId) && (this.subtitleTaskId = (0, R.A)(), await Ke.DemuxerThread.registerTask({ taskId: this.subtitleTaskId, mainTaskId: this.taskId, flags: i3, format: fe.HR[this.ext], stats: this.GlobalData[g.o9] + 32, isLive: this.isLive_, ioloaderOptions: { mediaType: 3 }, avpacketList: this.GlobalData[g.o9], avpacketListMutex: this.GlobalData[g.o9] + 24 })), this.fire(W.Gd, [0]), r3 = await Ke.DemuxerThread.openStream(this.taskId), r3 < 0 && G.h2("[AVplayer.progress] open stream failed, ret: ".concat(r3, ", taskId: ").concat(this.taskId), We, 1814), this.fire(W.Gd, [1, this.ext]);
      let s3 = await Ke.DemuxerThread.analyzeStreams(this.taskId);
      if (_.ai(s3)) G.h2("[AVPlayer.progress] analyze stream failed, ret: ".concat(s3), We, 1821);
      else {
        if (s3.streams.length || G.h2("not found any stream", We, 1825), this.subTaskId) {
          r3 = await Ke.DemuxerThread.openStream(this.subTaskId), r3 < 0 && G.h2("open stream failed, ret: ".concat(r3, ", taskId: ").concat(this.subTaskId), We, 1831);
          const e4 = await Ke.DemuxerThread.analyzeStreams(this.subTaskId);
          if (_.ai(e4)) return void G.h2("analyze stream failed, ret: ".concat(e4), We, 1835);
          e4.streams.length || G.h2("not found any stream", We, 1839), s3.streams = s3.streams.concat(e4.streams);
        }
        if (this.subtitleTaskId) {
          r3 = await Ke.DemuxerThread.openStream(this.subtitleTaskId), r3 < 0 && G.h2("open subtitle stream failed, ret: ".concat(r3, ", taskId: ").concat(this.subtitleTaskId), We, 1847);
          const e4 = await Ke.DemuxerThread.analyzeStreams(this.subtitleTaskId);
          if (_.ai(e4)) return void G.h2("analyze subtitle stream failed, ret: ".concat(e4), We, 1851);
          e4.streams.length || G.h2("not found any stream", We, 1855), s3.streams = s3.streams.concat(e4.streams);
        }
        if (this.formatContext = s3, this.source = e3, t3.externalSubtitles) for (let e4 = 0; e4 < t3.externalSubtitles.length; e4++) await this.loadExternalSubtitle(t3.externalSubtitles[e4]);
        if (s3.streams.forEach((e4) => {
          1 === y.f[15](e4.codecpar) ? this.GlobalData.stats.audiocodec = (0, ue.A)(e4.codecpar) : 0 === y.f[15](e4.codecpar) && (this.GlobalData.stats.videocodec = (0, te.A)(e4.codecpar));
        }), this.isHls() || this.isDash()) {
          const e4 = 1e3 * await Ke.IOThread.getDuration(this.taskId);
          if (e4 > 0) for (let t4 = 0; t4 < this.formatContext.streams.length; t4++) this.formatContext.streams[t4].duration = (0, X.k)(BigInt(Math.floor(e4)), J.i0, this.formatContext.streams[t4].timeBase);
        }
        if (this.isLive_ && this.options.enableJitterBuffer) {
          const e4 = Math.max(this.source instanceof Pe.A ? this.source.minBuffer : await Ke.IOThread.getMinBuffer(this.taskId), this.options.jitterBufferMin);
          let t4 = this.options.jitterBufferMax;
          t4 <= e4 && (t4 = e4 + (this.isHls() || this.isDash() ? e4 : 1)), this.jitterBufferController = new le.A({ stats: this.GlobalData[g.o9] + 32, jitterBuffer: this.GlobalData.stats[g.o9] + 280, lowLatencyStart: !(this.isHls() || this.isDash()), lowLatency: this.options.lowLatency, useMse: this.useMSE, max: t4, min: e4, observer: { onCroppingBuffer: (e5) => {
            var t5;
            G.Yz("cropping buffer by jitter buffer, max: ".concat(e5, ", taskId: ").concat(this.taskId), We, 1915), null === (t5 = Ke.DemuxerThread) || void 0 === t5 || t5.croppingAVPacketQueue(this.taskId, BigInt(0 | e5));
          }, onSetPlayRate: (e5) => {
            G.Yz("set play rate by jitter buffer, rate: ".concat(e5, ", taskId: ").concat(this.taskId), We, 1919), this.useMSE ? (Ke.MSEThread.setPlayRate(this.taskId, e5), this.video ? this.video.playbackRate = e5 : this.audio && (this.audio.playbackRate = e5)) : (this.audioDecoder2AudioRenderChannel && Ke.AudioRenderThread.setPlayTempo(this.taskId, e5), this.videoDecoder2VideoRenderChannel && this.VideoRenderThread.setPlayRate(this.taskId, e5));
          } } });
        }
        if (G.pq("\nCrystalPlayer version v0.10.0-alpha.3-7-gb47705d4\n" + (0, pe.Ay)([s3], [{ from: _.Yj(e3) ? e3 : e3.name, tag: "Input", isLive: this.isLive_ }]), We, 1942), !this.isLive_) {
          let e4 = J.Dh;
          s3.streams.forEach((t4) => {
            const i4 = (0, X.k)(t4.startTime, t4.timeBase, J.i0);
            1 !== y.f[15](t4.codecpar) && 0 !== y.f[15](t4.codecpar) || (i4 < e4 || e4 === -BigInt(1)) && (e4 = i4);
          }), e4 < BigInt(0) && e4 !== J.Dh && await this.seek(BigInt(0));
        }
        this.status = 4, this.fire(W.S2);
      }
    }
    async playUseMSE(e3) {
      {
        await Ke.startMSEPipeline(this.options.enableWorker);
        const i3 = this.findBestStream(this.formatContext.streams, 0, true), r3 = this.findBestStream(this.formatContext.streams, 1, true);
        let a3 = false, s3 = "", n2 = [];
        const o2 = async (e4) => {
          const t4 = (0, E.Un)(e4.codecpar + 20, e4.codecpar + 24, 24);
          let i4;
          if (t4) i4 = (0, ze.ZK)((0, Z.s3)(y.f[20](t4), y.f[25](t4 + 4)));
          else if (this.isDash()) {
            const t5 = await Ke.IOThread.getCurrentProtection(this.taskId, y.f[15](e4.codecpar));
            if (t5) {
              i4 = [{ systemId: t5.systemId, keyIds: [t5.kid], data: new Uint8Array(0) }];
              const r5 = (0, ze.bE)(i4), a5 = (0, Ne.sY)(r5.length);
              (0, Z.lW)(a5, r5.length, r5), (0, E.$W)(e4.codecpar + 20, e4.codecpar + 24, 24, a5, r5.length);
            }
          }
          const r4 = e4.metadata.encryption;
          if (i4 && r4) {
            for (let t5 = 0; t5 < i4.length; t5++) {
              const o3 = (0, $e.A)(i4[t5].systemId);
              if ((!s3 || s3 === o3) && o3) try {
                const t6 = [{ initDataTypes: ["keyids", "cenc"] }];
                var a4;
                if (0 === y.f[15](e4.codecpar)) t6[0].videoCapabilities = [{ contentType: (0, ie.A)(e4.codecpar), encryptionScheme: (0, Fe.A)(r4.schemeType), robustness: null === (a4 = this.options.drmSystemOptions) || void 0 === a4 ? void 0 : a4.videoRobustness }];
                else if (1 === y.f[15](e4.codecpar)) {
                  var n3;
                  t6[0].audioCapabilities = [{ contentType: (0, re.A)(e4.codecpar), robustness: null === (n3 = this.options.drmSystemOptions) || void 0 === n3 ? void 0 : n3.audioRobustness }];
                }
                return await navigator.requestMediaKeySystemAccess(o3, t6), { key: o3, config: t6 };
              } catch (e5) {
                G.R8("drm system ".concat(o3, " error ").concat(e5), We, 2045);
              }
            }
            s3 && G.h2("audio and video has different drm system key", We, 2050);
          }
        };
        if (await Ke.MSEThread.registerTask.transfer(this.controller.getMuxerControlPort()).invoke({ taskId: this.taskId, stats: this.GlobalData[g.o9] + 32, controlPort: this.controller.getMuxerControlPort(), isLive: this.isLive_, avpacketList: this.GlobalData[g.o9], avpacketListMutex: this.GlobalData[g.o9] + 24, enableJitterBuffer: !!this.jitterBufferController }, this.seekedTimestamp >= BigInt(0) ? this.seekedTimestamp : J.Dh), i3 && e3.video) {
          this.fire(W.Gd, [3, i3]), a3 = true, this.selectedVideoStream = i3, this.videoEnded = false, this.demuxer2VideoDecoderChannel = (0, ee.A)(this.options.enableWorker);
          const e4 = await o2(i3);
          e4 && (s3 = e4.key, n2.push(...e4.config)), await Ke.DemuxerThread.connectStreamTask.transfer(this.demuxer2VideoDecoderChannel.port1).invoke(this.subTaskId || this.taskId, i3.index, this.demuxer2VideoDecoderChannel.port1), await Ke.MSEThread.addStream.transfer(this.demuxer2VideoDecoderChannel.port2).invoke(this.taskId, i3.index, (0, Se.Wu)(i3.codecpar), i3.timeBase, i3.metadata, i3.startTime, this.demuxer2VideoDecoderChannel.port2);
        }
        if (r3 && e3.audio) {
          this.fire(W.Gd, [2, r3]), this.selectedAudioStream = r3, this.audioEnded = false, this.demuxer2AudioDecoderChannel = (0, ee.A)(this.options.enableWorker);
          const e4 = await o2(r3);
          e4 && (s3 = e4.key, n2.push(...e4.config)), await Ke.DemuxerThread.connectStreamTask.transfer(this.demuxer2AudioDecoderChannel.port1).invoke(this.taskId, r3.index, this.demuxer2AudioDecoderChannel.port1), await Ke.MSEThread.addStream.transfer(this.demuxer2AudioDecoderChannel.port2).invoke(this.taskId, r3.index, (0, Se.Wu)(r3.codecpar), r3.timeBase, r3.metadata, r3.startTime, this.demuxer2AudioDecoderChannel.port2);
        }
        if (a3 ? this.createVideo() : this.createAudio(), s3) {
          var t3;
          const e4 = await navigator.requestMediaKeySystemAccess(s3, n2), i4 = await e4.createMediaKeys();
          null !== (t3 = this.options.drmSystemOptions) && void 0 !== t3 && t3.certificate && await i4.setServerCertificate(this.options.drmSystemOptions.certificate).catch((e5) => {
            G.z3("setServerCertificate failed, ".concat(e5), We, 2133);
          }), await (this.video || this.audio).setMediaKeys(i4), this.drmSystemKey = s3;
        }
        Ke.MSEThread.setPlayRate(this.taskId, this.playRate);
        const c2 = await Ke.MSEThread.getMediaSource(this.taskId);
        c2 && (K.A.safari && await Ke.MSEThread.isManagedMediaSource(this.taskId) && ((this.video || this.audio).disableRemotePlayback = true), j.A.workerMSE && c2 instanceof MediaSourceHandle ? (this.video || this.audio).srcObject = c2 : (this.video || this.audio).src = URL.createObjectURL(c2), this.handleTimeupdate(this.video || this.audio)), this.video && !this.selectedAudioStream && (this.video.muted = true), (this.video || this.audio).playbackRate = this.playRate;
      }
    }
    async playUseDecoder(e3) {
      let t3 = BigInt(0), i3 = BigInt(0);
      const r3 = this.findBestStream(this.formatContext.streams, 0), a3 = this.findBestStream(this.formatContext.streams, 1);
      if (r3 && e3.video) {
        this.fire(W.Gd, [3, r3]), this.selectedVideoStream = r3, await Ke.startVideoRenderPipeline(this.options.enableWorker), await this.createVideoDecoderThread(this.options.enableWorker), i3 = (0, X.k)(r3.startTime, r3.timeBase, J.i0), this.demuxer2VideoDecoderChannel = (0, ee.A)(this.options.enableWorker), this.videoDecoder2VideoRenderChannel = (0, ee.A)(this.options.enableWorker);
        let e4 = await this.getResource("decoder", y.f[15](r3.codecpar + 4), y.f[15](r3.codecpar));
        e4 || (j.A.videoDecoder ? (await VideoDecoder.isConfigSupported({ codec: (0, te.A)(r3.codecpar) })).supported || G.h2("".concat((0, pe.eG)(y.f[15](r3.codecpar), y.f[15](r3.codecpar + 4)), " codecId ").concat(y.f[15](r3.codecpar + 4), " not support"), We, 2191) : G.h2("".concat((0, pe.eG)(y.f[15](r3.codecpar), y.f[15](r3.codecpar + 4)), " codecId ").concat(y.f[15](r3.codecpar + 4), " not support"), We, 2195)), await this.VideoDecoderThread.registerTask.transfer(this.demuxer2VideoDecoderChannel.port2, this.videoDecoder2VideoRenderChannel.port1).invoke({ taskId: this.taskId, resource: e4, leftPort: this.demuxer2VideoDecoderChannel.port2, rightPort: this.videoDecoder2VideoRenderChannel.port1, stats: this.GlobalData[g.o9] + 32, enableHardware: this.options.enableHardware && this.options.enableWebCodecs, avpacketList: this.GlobalData[g.o9], avpacketListMutex: this.GlobalData[g.o9] + 24, avframeList: this.GlobalData[g.o9] + 12, avframeListMutex: this.GlobalData[g.o9] + 28, preferWebCodecs: !(0, ge.A)(r3.codecpar) && !(0, ve.A)(r3.codecpar) && !!this.options.enableWebCodecs, preferLatency: this.isLive() }), await this.VideoDecoderThread.open(this.taskId, (0, Se.Wu)(r3.codecpar)) < 0 && G.h2("cannot open video ".concat((0, pe.eG)(y.f[15](r3.codecpar), y.f[15](r3.codecpar + 4)), " decoder"), We, 2219), await Ke.DemuxerThread.connectStreamTask.transfer(this.demuxer2VideoDecoderChannel.port1).invoke(this.subTaskId || this.taskId, r3.index, this.demuxer2VideoDecoderChannel.port1), this.VideoDecoderThread.setPlayRate(this.taskId, this.playRate);
      }
      if (a3 && e3.audio) {
        this.fire(W.Gd, [2, a3]), this.selectedAudioStream = a3, await Ke.startAudioPipeline(this.options.enableWorker), "suspended" !== Ke.audioContext.state && "interrupted" !== Ke.audioContext.state || await d2().race([Ke.audioContext.resume(), new ne.A(0.1)]), t3 = (0, X.k)(a3.startTime, a3.timeBase, J.i0), this.demuxer2AudioDecoderChannel = (0, ee.A)(this.options.enableWorker), this.audioDecoder2AudioRenderChannel = (0, ee.A)(this.options.enableWorker);
        let e4 = await this.getResource("decoder", y.f[15](a3.codecpar + 4), y.f[15](a3.codecpar));
        e4 || (j.A.audioDecoder ? (await AudioDecoder.isConfigSupported({ codec: (0, ue.A)(a3.codecpar), sampleRate: y.f[15](a3.codecpar + 136), numberOfChannels: y.f[15](a3.codecpar + 116) })).supported || G.h2("".concat((0, pe.eG)(y.f[15](a3.codecpar), y.f[15](a3.codecpar + 4)), " codecId ").concat(y.f[15](a3.codecpar + 4), " not support"), We, 2258) : G.h2("".concat((0, pe.eG)(y.f[15](a3.codecpar), y.f[15](a3.codecpar + 4)), " codecId ").concat(y.f[15](a3.codecpar + 4), " not support"), We, 2262)), await Ke.AudioDecoderThread.registerTask.transfer(this.demuxer2AudioDecoderChannel.port2, this.audioDecoder2AudioRenderChannel.port1).invoke({ taskId: this.taskId, resource: e4, leftPort: this.demuxer2AudioDecoderChannel.port2, rightPort: this.audioDecoder2AudioRenderChannel.port1, stats: this.GlobalData[g.o9] + 32, avpacketList: this.GlobalData[g.o9], avpacketListMutex: this.GlobalData[g.o9] + 24, avframeList: this.GlobalData[g.o9] + 12, avframeListMutex: this.GlobalData[g.o9] + 28 }), await Ke.AudioDecoderThread.open(this.taskId, (0, Se.Wu)(a3.codecpar)) < 0 && G.h2("cannot open audio ".concat((0, pe.eG)(y.f[15](a3.codecpar), y.f[15](a3.codecpar + 4)), " decoder"), We, 2283), await Ke.DemuxerThread.connectStreamTask.transfer(this.demuxer2AudioDecoderChannel.port1).invoke(this.taskId, a3.index, this.demuxer2AudioDecoderChannel.port1);
        const i4 = this.formatContext.streams.filter((e5) => 1 === y.f[15](e5.codecpar));
        if (i4.length > 1) for (let e5 = 0; e5 < i4.length; e5++) i4[e5] !== a3 && await Ke.DemuxerThread.addPendingStream(this.taskId, i4[e5].index);
      }
      if (this.videoDecoder2VideoRenderChannel) {
        let e4;
        if (this.isMediaStreamMode()) if (j.A.trackGenerator) {
          const t4 = new MediaStreamTrackGenerator({ kind: "video" });
          e4 = t4.writable;
          const i4 = this.options.container, r4 = i4.getVideoTracks()[0];
          r4 && i4.removeTrack(r4), i4.addTrack(t4);
        } else {
          this.canvas = this.createCanvas(), this.canvas.width = y.f[15](r3.codecpar + 56), this.canvas.height = y.f[15](r3.codecpar + 60), e4 = (0, H.A)() && (F.USE_THREADS || j.A.worker && this.options.enableWorker) ? this.canvas.transferControlToOffscreen() : this.canvas;
          const t4 = this.canvas.captureStream(), i4 = this.options.container, a4 = i4.getVideoTracks()[0];
          a4 && i4.removeTrack(a4), i4.addTrack(t4.getVideoTracks()[0]);
        }
        else this.canvas = this.createCanvas(), this.canvas.width = this.options.container.offsetWidth * devicePixelRatio, this.canvas.height = this.options.container.offsetHeight * devicePixelRatio, this.options.container.appendChild(this.canvas), e4 = (0, H.A)() && (F.USE_THREADS || j.A.worker && this.options.enableWorker) ? this.canvas.transferControlToOffscreen() : this.canvas;
        r3.metadata.matrix && !this.useMSE && (this.renderRotate = -Math.atan2(r3.metadata.matrix[3], r3.metadata.matrix[0]) * (180 / Math.PI)), await this.VideoRenderThread.registerTask.transfer(this.videoDecoder2VideoRenderChannel.port2, this.controller.getVideoRenderControlPort(), e4).invoke({ taskId: this.taskId, isLive: this.isLive_, leftPort: this.videoDecoder2VideoRenderChannel.port2, controlPort: this.controller.getVideoRenderControlPort(), canvas: e4, renderMode: this.renderMode, renderRotate: this.renderRotate, flipHorizontal: this.flipHorizontal, flipVertical: this.flipVertical, viewportWidth: this.isMediaStreamMode() ? y.f[15](r3.codecpar + 56) : this.options.container.offsetWidth, viewportHeight: this.isMediaStreamMode() ? y.f[15](r3.codecpar + 60) : this.options.container.offsetHeight, devicePixelRatio: this.isMediaStreamMode() ? 1 : devicePixelRatio, stats: this.GlobalData[g.o9] + 32, enableWebGPU: this.options.enableWebGPU, startPTS: this.isLive_ ? (0, X.k)(r3.startTime < BigInt(1e3) ? BigInt(0) : r3.startTime, r3.timeBase, J.i0) : this.getMinStartPTS(), avframeList: this.GlobalData[g.o9] + 12, avframeListMutex: this.GlobalData[g.o9] + 28, enableJitterBuffer: !!this.jitterBufferController && !this.audioDecoder2AudioRenderChannel, sar: (0, X.lb)((0, b.A)(r3.codecpar + 64, w.P)) }), this.videoEnded = false, this.VideoRenderThread.setPlayRate(this.taskId, this.playRate);
      }
      if (this.audioDecoder2AudioRenderChannel) {
        this.audioRender2AudioWorkletChannel = new MessageChannel(), this.isMediaStreamMode() ? this.playChannels = 2 : this.playChannels = Math.min(y.f[15](a3.codecpar + 116), Ke.audioContext.destination.maxChannelCount || 2);
        let t4, i4 = await this.getResource("resampler"), r4 = await this.getResource("stretchpitcher");
        if (i4 || G.h2("resampler not found", We, 2411), r4 || G.h2("stretch pitcher not found", We, 2414), await Ke.AudioRenderThread.registerTask.transfer(this.audioDecoder2AudioRenderChannel.port2, this.audioRender2AudioWorkletChannel.port1, this.controller.getAudioRenderControlPort()).invoke({ taskId: this.taskId, isLive: this.isLive_, leftPort: this.audioDecoder2AudioRenderChannel.port2, rightPort: this.audioRender2AudioWorkletChannel.port1, controlPort: this.controller.getAudioRenderControlPort(), playFormat: 8, playSampleRate: Ke.audioContext.sampleRate, playChannels: this.playChannels, resamplerResource: i4, stretchpitcherResource: r4, stats: this.GlobalData[g.o9] + 32, startPTS: this.isLive_ ? (0, X.k)(a3.startTime < BigInt(1e3) ? BigInt(0) : a3.startTime, a3.timeBase, J.i0) : this.getMinStartPTS(), avframeList: this.GlobalData[g.o9] + 12, avframeListMutex: this.GlobalData[g.o9] + 28, enableJitterBuffer: !!this.jitterBufferController, audioMasterForce: e3.audioMasterForce }), t4 = j.A.audioWorklet && this.options.enableAudioWorklet ? V.A : Q.A, this.audioSourceNode = new t4(Ke.audioContext, { onEnded: () => {
          this.onAudioEnded();
        }, onFirstRendered: () => {
          this.onFirstAudioRendered();
        }, onStutter: () => {
          this.onAudioStutter();
        } }, { numberOfInputs: 1, numberOfOutputs: 1, outputChannelCount: [this.playChannels], isMainWorker: !!Ke.AudioPipelineProxy }), await this.audioSourceNode.request("init", { memory: !F.USE_THREADS || K.A.safari && !K.A.checkVersion(K.A.version, "16.1", true) || we.A.ios && !K.A.checkVersion(we.A.version, "16.1", true) ? null : O.ce, bufferLength: this.options.audioWorkletBufferLength }), Ke.AudioRenderThread.setPlayTempo(this.taskId, this.playRate), this.gainNode = Ke.audioContext.createGain(), this.audioSourceNode.connect(this.gainNode), this.isMediaStreamMode()) {
          const e4 = Ke.audioContext.createMediaStreamDestination();
          this.gainNode.connect(e4);
          const t5 = this.options.container, i5 = t5.getAudioTracks()[0];
          i5 && t5.removeTrack(i5), t5.addTrack(e4.stream.getAudioTracks()[0]);
        } else this.gainNode.connect(Ke.audioContext.destination);
        this.setVolume(this.volume), this.audioEnded = false;
      }
      this.audioDecoder2AudioRenderChannel ? this.controller.setTimeUpdateListenType(1) : this.videoDecoder2VideoRenderChannel && this.controller.setTimeUpdateListenType(0), this.videoDecoder2VideoRenderChannel && this.audioDecoder2AudioRenderChannel && de.tn(i3 - t3) > BigInt(1e4) && this.controller.setEnableAudioVideoSync(false);
    }
    async play(e3 = { audio: true, video: true, subtitle: true }) {
      if (G.pq("[AVPlayer.play] status: ".concat(this.status), We, 2535), G.pq("call play, options: ".concat(o()(e3), ", status: ").concat(this.status, " taskId: ").concat(this.taskId), We, 2537), 6 === this.status) return;
      e3.audio || e3.video || (G.R8("video and audio must play one, ignore options, we will try to play video and audio, taskId: ".concat(this.taskId), We, 2544), e3.audio = true, e3.video = true);
      const t3 = [];
      if (8 === this.status) return this.useMSE ? (t3.push(Ke.MSEThread.unpause(this.taskId)), this.audio ? this.audio.play() : this.video && this.video.play()) : (this.selectedAudioStream && this.selectedVideoStream && this.GlobalData.stats.videoCurrentTime - this.GlobalData.stats.audioCurrentTime > BigInt(400) && await Ke.AudioRenderThread.syncSeekTime(this.taskId, this.GlobalData.stats.videoCurrentTime), this.audioSourceNode && (t3.push(this.audioSourceNode.request("unpause")), t3.push(Ke.AudioRenderThread.unpause(this.taskId))), this.videoDecoder2VideoRenderChannel && t3.push(this.VideoRenderThread.unpause(this.taskId))), d2().all(t3).then(() => {
        this.status = 6, this.fire(W.CN), this.jitterBufferController && this.jitterBufferController.start(), this.subtitleRender && this.subtitleRender.start();
      });
      this.status = 5, this.fire(W.d6), this.useMSE = await this.checkUseMSE(e3), this.audioEnded = true, this.videoEnded = true, this.useMSE ? await this.playUseMSE(e3) : await this.playUseDecoder(e3);
      {
        const t4 = this.findBestStream(this.formatContext.streams, 3);
        if (t4 && e3.subtitle && this.isCodecIdSupported(y.f[15](t4.codecpar + 4), y.f[15](t4.codecpar))) {
          const e4 = this.externalSubtitleTasks.find((e5) => e5.streamId === t4.id);
          this.createSubtitleRender(t4, e4 ? e4.taskId : this.subtitleTaskId || this.taskId);
        }
        if (this.subtitleRender && this.externalSubtitleTasks.length) for (let e4 = 0; e4 < this.externalSubtitleTasks.length; e4++) {
          const i4 = this.formatContext.streams.find((t5) => t5.id === this.externalSubtitleTasks[e4].streamId);
          i4 !== t4 && await Ke.DemuxerThread.connectStreamTask.transfer(this.subtitleRender.getDemuxerPort(this.externalSubtitleTasks[e4].taskId)).invoke(this.externalSubtitleTasks[e4].taskId, i4.index, this.subtitleRender.getDemuxerPort(this.externalSubtitleTasks[e4].taskId));
        }
      }
      let i3 = 10;
      if (_.Yj(this.source) || this.source instanceof Pe.A) {
        let e4 = this.isLive_ ? this.options.jitterBufferMin : this.options.preLoadTime;
        this.source instanceof Pe.A && (e4 = Math.max(e4, this.source.minBuffer)), this.formatContext.streams.forEach((t4) => {
          0 === y.f[15](t4.codecpar) ? i3 = Math.max(Math.ceil((0, X.lb)((0, b.A)(t4.codecpar + 72, w.P)) * e4), i3) : 1 === y.f[15](t4.codecpar) && y.f[15](t4.codecpar + 144) && (i3 = Math.max(Math.ceil(y.f[15](t4.codecpar + 136) / y.f[15](t4.codecpar + 144) * e4), i3));
        });
      }
      if (t3.push(Ke.DemuxerThread.startDemux(this.taskId, this.isLive_, i3)), this.subTaskId && t3.push(Ke.DemuxerThread.startDemux(this.subTaskId, this.isLive_, i3)), this.subtitleTaskId && t3.push(Ke.DemuxerThread.startDemux(this.subtitleTaskId, this.isLive_, 10)), this.seekedTimestamp >= BigInt(0)) {
        let e4 = 20;
        this.formatContext.streams.forEach((t4) => {
          0 === y.f[15](t4.codecpar) && (e4 = Math.max(Math.ceil((0, X.lb)((0, b.A)(t4.codecpar + 72, w.P))), e4));
        }), this.videoDecoder2VideoRenderChannel && t3.push(this.VideoRenderThread.syncSeekTime(this.taskId, this.seekedTimestamp, e4)), this.audioDecoder2AudioRenderChannel && t3.push(Ke.AudioRenderThread.syncSeekTime(this.taskId, this.seekedTimestamp, e4)), this.seekedTimestamp = J.Dh;
      }
      return d2().all(t3).then(async () => {
        if (this.useMSE) {
          var e4, t4;
          if (await d2().all([null === (e4 = this.video) || void 0 === e4 ? void 0 : e4.play(), null === (t4 = this.audio) || void 0 === t4 ? void 0 : t4.play()]).catch((e5) => {
            if (this.fire(W.IY), G.R8("the audioContext was not started. It must be resumed after a user gesture", We, 2668), this.video) return this.video.muted = true, this.video.play();
          }), this.isMediaStreamMode()) {
            K.A.firefox || ((this.video || this.audio).muted = true);
            const e5 = this.options.container, t5 = ((this.video || this.audio).captureStream || (this.video || this.audio).mozCaptureStream).bind(this.video || this.audio)(), i4 = e5.getAudioTracks()[0], r3 = e5.getVideoTracks()[0];
            i4 && e5.removeTrack(i4), r3 && e5.removeTrack(r3);
            const a3 = t5.getAudioTracks()[0], s3 = t5.getVideoTracks()[0];
            a3 && e5.addTrack(a3), s3 && e5.addTrack(s3);
          }
        } else {
          const e5 = [];
          this.videoDecoder2VideoRenderChannel && e5.push(this.VideoRenderThread.play(this.taskId)), this.audioDecoder2AudioRenderChannel && e5.push(this.audioSourceNode.request("start", { port: this.audioRender2AudioWorkletChannel.port2, channels: this.playChannels }, [this.audioRender2AudioWorkletChannel.port2])), await d2().all(e5), !this.audioSourceNode || "suspended" !== Ke.audioContext.state && "interrupted" !== Ke.audioContext.state || ("suspended" !== Ke.audioContext.state && "interrupted" !== Ke.audioContext.state || (this.fire(W.IY), G.R8("the audioContext was not started. It must be resumed after a user gesture", We, 2723)), this.videoDecoder2VideoRenderChannel && (await Ke.AudioRenderThread.fakePlay(this.taskId), this.controller.setTimeUpdateListenType(0)));
        }
        this.status = 6, this.fire(W.CN), this.statsController.start(), this.jitterBufferController && this.jitterBufferController.start(), this.subtitleRender && this.subtitleRender.start();
      });
    }
    async pause() {
      if (G.pq("[AVPlayer.pause] status: ".concat(this.status), We, 2747), G.pq("call pause, taskId: ".concat(this.taskId), We, 2749), !this.isLive_) {
        const e3 = [];
        return this.useMSE ? (this.audio && this.audio.pause(), this.video && this.video.pause(), e3.push(Ke.MSEThread.pause(this.taskId))) : (this.audioSourceNode && (e3.push(this.audioSourceNode.request("pause")), e3.push(Ke.AudioRenderThread.pause(this.taskId))), this.videoDecoder2VideoRenderChannel && e3.push(this.VideoRenderThread.pause(this.taskId))), d2().all(e3).then(() => {
          9 === this.status ? this.lastStatus = 8 : this.status = 8, this.fire(W.NN), this.jitterBufferController && this.jitterBufferController.stop(), this.subtitleRender && this.subtitleRender.pause();
        });
      }
      G.R8("pause can only used in vod, taskId: ".concat(this.taskId), We, 2789);
    }
    async doSeek(e3, t3, i3 = {}) {
      var r3, a3;
      this.useMSE ? await Ke.MSEThread.beforeSeek(this.taskId) : await d2().all([null === (r3 = Ke.AudioRenderThread) || void 0 === r3 ? void 0 : r3.beforeSeek(this.taskId), null === (a3 = this.VideoRenderThread) || void 0 === a3 ? void 0 : a3.beforeSeek(this.taskId)]), i3.onBeforeSeek && await i3.onBeforeSeek();
      let s3 = -BigInt(1);
      if (this.isDash() || this.isHls() ? (s3 = await Ke.DemuxerThread.seek(this.taskId, e3, 16), this.subTaskId && await Ke.DemuxerThread.seek(this.subTaskId, e3, 16)) : s3 = await Ke.DemuxerThread.seek(this.taskId, e3, 8, t3), this.subtitleTaskId && await Ke.DemuxerThread.seek(this.subtitleTaskId, e3, 16), s3 >= BigInt(0) ? G.Yz("seeked to packet timestamp: ".concat(s3, ", taskId: ").concat(this.taskId), We, 2830) : G.z3("demuxer seek failed, code: ".concat(s3, ", taskId: ").concat(this.taskId), We, 2833), this.useMSE) if (s3 >= BigInt(0)) {
        const t4 = await Ke.MSEThread.afterSeek(this.taskId, s3 > e3 ? s3 : e3);
        this.video ? this.video.currentTime = t4 : this.audio && (this.audio.currentTime = t4);
      } else await Ke.MSEThread.afterSeek(this.taskId, J.Dh);
      else {
        let t4 = 20;
        var n2, o2, c2, h2, l2, u2, f2, p2, m2, g2;
        this.formatContext.streams.forEach((e4) => {
          0 === y.f[15](e4.codecpar) && (t4 = Math.max(Math.ceil((0, X.lb)((0, b.A)(e4.codecpar + 72, w.P))), t4));
        }), s3 >= BigInt(0) ? (await d2().all([null === (n2 = Ke.AudioDecoderThread) || void 0 === n2 ? void 0 : n2.resetTask(this.taskId), null === (o2 = this.VideoDecoderThread) || void 0 === o2 ? void 0 : o2.resetTask(this.taskId)]), await d2().all([null === (c2 = Ke.AudioRenderThread) || void 0 === c2 ? void 0 : c2.syncSeekTime(this.taskId, s3 > e3 ? s3 : e3, t4), null === (h2 = this.VideoRenderThread) || void 0 === h2 ? void 0 : h2.syncSeekTime(this.taskId, s3 > e3 ? s3 : e3, t4)]), await d2().all([null === (l2 = Ke.AudioRenderThread) || void 0 === l2 ? void 0 : l2.afterSeek(this.taskId, s3 > e3 ? s3 : e3), null === (u2 = this.VideoRenderThread) || void 0 === u2 ? void 0 : u2.afterSeek(this.taskId, s3 > e3 ? s3 : e3)])) : (await d2().all([null === (f2 = Ke.AudioRenderThread) || void 0 === f2 ? void 0 : f2.syncSeekTime(this.taskId, J.Dh, t4), null === (p2 = this.VideoRenderThread) || void 0 === p2 ? void 0 : p2.syncSeekTime(this.taskId, J.Dh, t4)]), await d2().all([null === (m2 = Ke.AudioRenderThread) || void 0 === m2 ? void 0 : m2.afterSeek(this.taskId, J.Dh), null === (g2 = this.VideoRenderThread) || void 0 === g2 ? void 0 : g2.afterSeek(this.taskId, J.Dh)])), this.jitterBufferController && this.jitterBufferController.reset();
      }
      (4 === this.lastStatus || 3 === this.lastStatus) && s3 >= BigInt(0) && (this.seekedTimestamp = s3 > e3 ? s3 : e3);
      for (let e4 = 0; e4 < this.externalSubtitleTasks.length; e4++) await Ke.DemuxerThread.seek(this.externalSubtitleTasks[e4].taskId, this.currentTime, 8);
      this.subtitleRender && (this.subtitleRender.reset(), this.subtitleRender.start());
    }
    async seek(e3) {
      if (G.pq("[AVPlayer.seek] status: ".concat(this.status), We, 2916), G.pq("call seek, timestamp: ".concat(e3, ", taskId: ").concat(this.taskId), We, 2918), this.formatContext.streams.length) if (9 !== this.status) if (this.isLive_) G.R8("seek can only used in vod, taskId: ".concat(this.taskId), We, 2957);
      else {
        this.lastStatus = this.status, this.status = 9, this.fire(W.Nz);
        let t3 = -1;
        this.selectedVideoStream ? t3 = this.selectedVideoStream.index : this.selectedAudioStream && (t3 = this.selectedAudioStream.index), 7 === this.lastStatus ? (await this.replayTo(e3), this.status = 6, this.fire(W.mQ), this.fire(W.CN)) : (await this.doSeek(e3, t3), this.status = this.lastStatus, this.fire(W.mQ));
      }
      else G.R8("player is seeking now, taskId: ".concat(this.taskId), We, 2926);
      else G.z3("cannot found any stream to seek, taskId: ".concat(this.taskId), We, 2921);
    }
    getStreams() {
      return this.formatContext.streams.map((e3) => ({ ...e3, mediaType: (0, pe.yl)(fe.Mb, y.f[15](e3.codecpar)), codecparProxy: (0, b.A)(e3.codecpar, k.A) }));
    }
    getSelectedVideoStreamId() {
      return this.selectedVideoStream ? this.selectedVideoStream.id : -1;
    }
    getSelectedAudioStreamId() {
      return this.selectedAudioStream ? this.selectedAudioStream.id : -1;
    }
    getSelectedSubtitleStreamId() {
      return this.selectedSubtitleStream ? this.selectedSubtitleStream.id : -1;
    }
    getChapters() {
      return this.formatContext.chapters;
    }
    getDuration() {
      if (!this.isLive_) {
        let e3 = BigInt(0);
        return this.formatContext.streams.forEach((t3) => {
          if (1 === y.f[15](t3.codecpar) || 0 === y.f[15](t3.codecpar)) {
            const i3 = (0, X.k)(t3.duration, { den: t3.timeBase.den, num: t3.timeBase.num }, J.i0);
            i3 > e3 && (e3 = i3);
          }
        }), e3;
      }
      return BigInt(0);
    }
    async stop(e3 = false) {
      var t3;
      if (G.pq("[AVPlayer.stop] status: ".concat(this.status), We, 3060), G.pq("call stop, taskId: ".concat(this.taskId), We, 3062), 0 === this.status) return void G.pq("player has already stopped, taskId: ".concat(this.taskId), We, 3065);
      if (this.stopPending) return this.stopPending;
      let i3;
      this.stopPending = new (d2())((e4) => {
        i3 = e4;
      }), this.audioSourceNode && (9 === this.status && await Ke.AudioRenderThread.stop(this.taskId), await this.audioSourceNode.request("stop"), this.audioSourceNode.disconnect(), this.audioSourceNode = null), 9 === this.status && Ke.DemuxerThread && (await Ke.DemuxerThread.stop(this.taskId), this.subTaskId && await Ke.DemuxerThread.stop(this.subTaskId), this.subtitleTaskId && await Ke.DemuxerThread.stop(this.subtitleTaskId)), this.VideoRenderThread && await this.VideoRenderThread.unregisterTask(this.taskId), Ke.AudioRenderThread && await Ke.AudioRenderThread.unregisterTask(this.taskId), this.VideoDecoderThread && await this.VideoDecoderThread.unregisterTask(this.taskId), Ke.AudioDecoderThread && await Ke.AudioDecoderThread.unregisterTask(this.taskId), Ke.MSEThread && await Ke.MSEThread.unregisterTask(this.taskId), Ke.DemuxerThread && (this.subTaskId && await Ke.DemuxerThread.unregisterTask(this.subTaskId), this.subtitleTaskId && await Ke.DemuxerThread.unregisterTask(this.subtitleTaskId), await Ke.DemuxerThread.unregisterTask(this.taskId)), Ke.IOThread && await Ke.IOThread.unregisterTask(this.taskId), this.ioIPCPort && (await this.source.stop().catch((e4) => {
        G.z3("[AVPlayer.stop] stop custom ioloader error, ".concat(e4), We, 3127);
      }), this.ioIPCPort.destroy(), this.ioIPCPort = null);
      for (let e4 = 0; e4 < this.externalSubtitleTasks.length; e4++) await Ke.DemuxerThread.unregisterTask(this.externalSubtitleTasks[e4].taskId), await Ke.IOThread.unregisterTask(this.externalSubtitleTasks[e4].taskId);
      if (this.subtitleRender && (this.subtitleRender.destroy(), this.subtitleRender = null), this.gainNode && (this.gainNode.disconnect(), this.gainNode = null), this.controller && this.controller.destroy(), this.drmSession && (await this.drmSession.close(), this.drmSession = null), null !== (t3 = this.video || this.audio) && void 0 !== t3 && t3.src && URL.revokeObjectURL((this.video || this.audio).src), !this.isMediaStreamMode()) {
        const e4 = this.options.container;
        this.video && (e4.removeChild(this.video), this.video = null), this.audio && (e4.removeChild(this.audio), this.audio = null), this.canvas && (e4.removeChild(this.canvas), this.canvas = null);
      }
      this.ioloader2DemuxerChannel = null, this.demuxer2VideoDecoderChannel = null, this.demuxer2AudioDecoderChannel = null, this.videoDecoder2VideoRenderChannel = null, this.audioDecoder2AudioRenderChannel = null, this.audioRender2AudioWorkletChannel = null, this.selectedAudioStream = null, this.selectedVideoStream = null, this.selectedSubtitleStream = null, this.lastSelectedInnerSubtitleStreamIndex = -1, this.source = null, this.ext = "", this.subTaskId = "", this.subtitleTaskId = "", this.seekedTimestamp = J.Dh, this.statsController.stop(), this.jitterBufferController && (this.jitterBufferController.stop(), this.jitterBufferController = null), this.status = 0, i3(), this.stopPending = null, e3 || this.fire(W.yd), G.pq("[AVPlayer.stop] avplayer stopped, task: ".concat(this.taskId), We, 3205);
    }
    setPlaybackRate(e3) {
      var t3, i3, r3, a3;
      this.isLive_ ? G.R8("setPlaybackRate can only used in playback, taskId: ".concat(this.taskId), We, 3233) : (this.playRate = (0, Y.A)(e3, 0.5, 2), this.useMSE ? (null === (t3 = Ke.MSEThread) || void 0 === t3 || t3.setPlayRate(this.taskId, this.playRate), this.video ? this.video.playbackRate = this.playRate : this.audio && (this.audio.playbackRate = this.playRate)) : (null === (i3 = Ke.AudioRenderThread) || void 0 === i3 || i3.setPlayTempo(this.taskId, this.playRate), null === (r3 = this.VideoRenderThread) || void 0 === r3 || r3.setPlayRate(this.taskId, this.playRate), null === (a3 = this.VideoDecoderThread) || void 0 === a3 || a3.setPlayRate(this.taskId, this.playRate)), G.pq("player call setPlaybackRate, set ".concat(this.playRate, ", taskId: ").concat(this.taskId), We, 3230));
    }
    getPlaybackRate() {
      return this.playRate;
    }
    async resume() {
      var e3, t3;
      G.pq("[AVPlayer.resume] status: ".concat(this.status), We, 3250), "suspended" !== (null === (e3 = Ke.audioContext) || void 0 === e3 ? void 0 : e3.state) && "interrupted" !== (null === (t3 = Ke.audioContext) || void 0 === t3 ? void 0 : t3.state) || (await d2().race([Ke.audioContext.resume(), new ne.A(0.1)]), "suspended" === Ke.audioContext.state || "interrupted" === Ke.audioContext.state ? G.R8("the audioContext was not allowed to start. It must be resumed after a user gesture", We, 3263) : (this.audioSourceNode && this.controller.setTimeUpdateListenType(1), this.fire(W.dQ))), this.video ? (this.video.muted = false, this.video.paused && await this.video.play()) : this.audio && (this.audio.muted = false, this.audio.paused && await this.audio.play()), G.pq("call resume, taskId: ".concat(this.taskId), We, 3285);
    }
    isSuspended() {
      var e3, t3;
      return "suspended" === (null === (e3 = Ke.audioContext) || void 0 === e3 ? void 0 : e3.state) || "interrupted" === (null === (t3 = Ke.audioContext) || void 0 === t3 ? void 0 : t3.state);
    }
    getVolume() {
      return this.volume;
    }
    setVolume(e3, t3 = false) {
      this.volume = this.useMSE ? (0, Y.A)(e3, 0, 1) : (0, Y.A)(e3, 0, 3), this.gainNode && Ke.audioContext ? (this.gainNode.gain.cancelScheduledValues(Ke.audioContext.currentTime), K.A.firefox && !t3 ? this.gainNode.gain.setValueAtTime(this.volume, Ke.audioContext.currentTime + 1) : 0 === this.gainNode.gain.value || 0 === this.volume || t3 ? this.gainNode.gain.value = this.volume : this.gainNode.gain.exponentialRampToValueAtTime(this.volume, Ke.audioContext.currentTime + 1)) : this.video ? this.video.volume = this.volume : this.audio && (this.audio.volume = this.volume), this.fire(W.Wu, [this.volume]), G.pq("player call setVolume, set ".concat(e3, ", used ").concat(this.volume, ", taskId: ").concat(this.taskId), We, 3337);
    }
    getRenderMode() {
      return this.renderMode;
    }
    setRenderMode(e3) {
      var t3;
      this.renderMode = e3, this.useMSE && this.video ? this.video.style["object-fit"] = He[this.renderMode] : null === (t3 = this.VideoRenderThread) || void 0 === t3 || t3.setRenderMode(this.taskId, e3), G.pq("player call setRenderMode, mode: ".concat(e3, ", taskId: ").concat(this.taskId), We, 3367);
    }
    getVideoTransformContext() {
      let e3 = "";
      return 0 !== this.renderRotate && (e3 += "rotateZ(".concat(this.renderRotate, "deg)")), this.flipHorizontal && (e3 += (e3.length ? " " : "") + "scaleX(-1)"), this.flipVertical && (e3 += (e3.length ? " " : "") + "scaleY(-1)"), e3;
    }
    setRotate(e3) {
      var t3;
      this.renderRotate = e3, this.useMSE && this.video ? this.video.style.transform = this.getVideoTransformContext() : null === (t3 = this.VideoRenderThread) || void 0 === t3 || t3.setRenderRotate(this.taskId, e3), G.pq("player call setRotate, angle: ".concat(e3, ", taskId: ").concat(this.taskId), We, 3397);
    }
    enableHorizontalFlip(e3) {
      var t3;
      this.flipHorizontal = e3, this.useMSE && this.video ? this.video.style.transform = this.getVideoTransformContext() : null === (t3 = this.VideoRenderThread) || void 0 === t3 || t3.enableHorizontalFlip(this.taskId, e3), G.pq("player call enableHorizontalFlip, enable: ".concat(e3, ", taskId: ").concat(this.taskId), We, 3408);
    }
    enableVerticalFlip(e3) {
      var t3;
      this.flipVertical = e3, this.useMSE && this.video ? this.video.style.transform = this.getVideoTransformContext() : null === (t3 = this.VideoRenderThread) || void 0 === t3 || t3.enableVerticalFlip(this.taskId, e3), G.pq("player call enableVerticalFlip, enable: ".concat(e3, ", taskId: ").concat(this.taskId), We, 3419);
    }
    setLoop(e3) {
      this.options.loop = e3, G.pq("call setLoop, enable: ".concat(e3, ", taskId: ").concat(this.taskId), We, 3431);
    }
    setMaxLatency(e3) {
      !l()(e3) || e3 <= 0 ? G.R8("[AVPlayer.setMaxLatency] ignore invalid maxLatency: ".concat(e3), We, 3442) : (this.maxLatency = e3, this.options.maxLatency = e3, G.pq("[AVPlayer.setMaxLatency] set maxLatency: ".concat(e3, "s, taskId: ").concat(this.taskId), We, 3448));
    }
    setSubtitleDelay(e3) {
      this.subtitleRender && this.getSubtitleDelay() !== e3 && (this.subtitleRender.setDelay(BigInt(0 | e3)), G.pq("set subtitle delay ".concat(e3), We, 3461), this.fire(W.W1, [e3]));
    }
    getSubtitleDelay() {
      return this.subtitleRender ? Number(BigInt.asIntN(32, this.subtitleRender.getDelay())) : 0;
    }
    setSubtitleEnable(e3) {
      if (this.subtitleRender && this.selectedSubtitleStream) if (e3) {
        const e4 = this.externalSubtitleTasks.find((e5) => e5.streamId === this.selectedSubtitleStream.id);
        e4 && Ke.DemuxerThread.seek(e4.taskId, this.currentTime, 8), this.subtitleRender.reset(), this.subtitleRender.start();
      } else this.subtitleRender.stop();
    }
    resize(e3, t3) {
      var i3;
      this.useMSE || (null === (i3 = this.VideoRenderThread) || void 0 === i3 || i3.resize(this.taskId, e3, t3), G.pq("player call resize, width: ".concat(e3, ", height: ").concat(t3, ", taskId: ").concat(this.taskId), We, 3519));
    }
    isMSE() {
      return this.useMSE;
    }
    isMediaStreamMode() {
      return "function" == typeof MediaStream && this.options.container instanceof MediaStream;
    }
    isLive() {
      return this.isLive_;
    }
    async getVideoList() {
      var e3;
      return null === (e3 = Ke.IOThread) || void 0 === e3 ? void 0 : e3.getVideoList(this.taskId);
    }
    async getAudioList() {
      var e3;
      return null === (e3 = Ke.IOThread) || void 0 === e3 ? void 0 : e3.getAudioList(this.taskId);
    }
    async getSubtitleList() {
      var e3;
      return null === (e3 = Ke.IOThread) || void 0 === e3 ? void 0 : e3.getSubtitleList(this.taskId);
    }
    getStatus() {
      return this.status;
    }
    hasAudio() {
      return !!this.selectedAudioStream;
    }
    hasVideo() {
      return !!this.selectedVideoStream;
    }
    hasSubtitle() {
      return !!this.selectedSubtitleStream;
    }
    getSource() {
      return this.source;
    }
    getFormatContext() {
      return this.formatContext;
    }
    getExternalSubtitle() {
      return this.externalSubtitleTasks.map((e3) => ({ source: e3.source, lang: e3.lang, title: e3.title }));
    }
    getOptions() {
      return this.options;
    }
    getAudioOutputNode() {
      return this.gainNode;
    }
    isPictureInPicture() {
      return this.useMSE ? this.video && document.pictureInPictureElement === this.video : !(!this.canvas || "object" != typeof documentPictureInPicture) && documentPictureInPicture.window && documentPictureInPicture.window.document.body.querySelector("#" + this.canvas.id) === this.canvas;
    }
    async selectVideo(e3) {
      var t3;
      if (this.isHls() || this.isDash()) return G.pq("call IOThread selectVideo, index: ".concat(e3, ", taskId: ").concat(this.taskId), We, 3684), null === (t3 = Ke.IOThread) || void 0 === t3 ? void 0 : t3.selectVideo(this.taskId, e3);
      {
        const t4 = this.formatContext.streams.find((t5) => t5.id === e3);
        if (this.selectedVideoStream && t4 && 0 === y.f[15](t4.codecpar) && t4 !== this.selectedVideoStream) {
          if (10 === this.status) return void G.R8("player is changing now, taskId: ".concat(this.taskId), We, 3692);
          this.lastStatus = this.status, this.status = 10, this.fire(W.Wt, [0, t4.id, this.selectedVideoStream.id]), this.useMSE ? (K.A.safari && (this.status = this.lastStatus, G.h2("safari not support switch stream in mse, please use chrome", We, 3702)), (0, he.A)().isTypeSupported((0, ie.A)(t4.codecpar)) || (this.status = this.lastStatus, G.h2("select video stream(".concat(t4.index, ") not support mse"), We, 3706)), await this.doSeek(this.currentTime, t4.index, { onBeforeSeek: async () => {
            await Ke.DemuxerThread.changeConnectStream(this.taskId, t4.index, this.selectedVideoStream.index), await Ke.MSEThread.reAddStream(this.taskId, t4.index, (0, Se.Wu)(t4.codecpar), t4.timeBase, t4.metadata, t4.startTime);
          } })) : (me.zy(Ge, y.f[15](t4.codecpar + 4)) || (this.status = this.lastStatus, G.h2("select video stream(".concat(t4.index, ") not support"), We, 3725)), await this.doSeek(this.currentTime, t4.index, { onBeforeSeek: async () => {
            await Ke.DemuxerThread.changeConnectStream(this.taskId, t4.index, this.selectedVideoStream.index), await this.VideoDecoderThread.reopenDecoder(this.taskId, (0, Se.Wu)(t4.codecpar), await this.getResource("decoder", y.f[15](t4.codecpar + 4), 0));
          } })), G.pq("changed selected video stream, from ".concat(this.selectedVideoStream.id, " to ").concat(t4.id, ", taskId: ").concat(this.taskId), We, 3739), this.selectedVideoStream = t4, this.subtitleRender && this.subtitleRender.updateVideoResolution(y.f[15](t4.codecpar + 56), y.f[15](t4.codecpar + 60)), this.status = this.lastStatus, this.fire(W.Rj, [0, t4.id, this.selectedVideoStream.id]);
        }
      }
    }
    async selectAudio(e3) {
      var t3;
      if (this.isHls() || this.isDash()) return G.pq("call IOThread selectAudio, index: ".concat(e3, ", taskId: ").concat(this.taskId), We, 3760), null === (t3 = Ke.IOThread) || void 0 === t3 ? void 0 : t3.selectAudio(this.taskId, e3);
      {
        const t4 = this.formatContext.streams.find((t5) => t5.id === e3);
        if (this.selectedAudioStream && t4 && 1 === y.f[15](t4.codecpar) && t4 !== this.selectedAudioStream) {
          if (10 === this.status) return void G.R8("player is changing now, taskId: ".concat(this.taskId), We, 3767);
          if (this.lastStatus = this.status, this.status = 10, this.fire(W.Wt, [1, t4.id, this.selectedAudioStream.id]), y.f[15](t4.codecpar + 4) !== y.f[15](this.selectedAudioStream.codecpar + 4) || y.f[15](t4.codecpar + 136) !== y.f[15](this.selectedAudioStream.codecpar + 136) || y.f[15](t4.codecpar + 116) !== y.f[15](this.selectedAudioStream.codecpar + 116) || y.f[15](t4.codecpar + 48) !== y.f[15](this.selectedAudioStream.codecpar + 48)) if (this.useMSE) {
            K.A.safari && (this.status = this.lastStatus, G.h2("safari not support switch stream in mse, please use chrome", We, 3782));
            let e4 = t4.index;
            this.selectedVideoStream && (e4 = this.selectedVideoStream.index), (0, he.A)().isTypeSupported((0, re.A)(t4.codecpar)) || (this.status = this.lastStatus, G.h2("select audio stream(".concat(t4.index, ") not support mse"), We, 3790)), await this.doSeek(this.currentTime, e4, { onBeforeSeek: async () => {
              await Ke.DemuxerThread.changeConnectStream(this.taskId, t4.index, this.selectedAudioStream.index), await Ke.MSEThread.reAddStream(this.taskId, t4.index, (0, Se.Wu)(t4.codecpar), t4.timeBase, t4.metadata, t4.startTime);
            } });
          } else me.zy(Ge, y.f[15](t4.codecpar + 4)) || (this.status = this.lastStatus, G.h2("select audio stream(".concat(t4.index, ") not support"), We, 3802)), await Ke.AudioDecoderThread.beforeReopenDecoder(this.taskId), await Ke.DemuxerThread.changeConnectStream(this.taskId, t4.index, this.selectedAudioStream.index, true, true), await Ke.AudioDecoderThread.reopenDecoder(this.taskId, (0, Se.Wu)(t4.codecpar), await this.getResource("decoder", y.f[15](t4.codecpar + 4), 1)), this.audioEnded && (this.audioDecoder2AudioRenderChannel && (await Ke.AudioDecoderThread.resetTask(this.taskId), await Ke.AudioRenderThread.restart(this.taskId), await Ke.AudioRenderThread.syncSeekTime(this.taskId, this.currentTime), this.controller.setTimeUpdateListenType(1)), this.audioSourceNode && (await this.audioSourceNode.request("restart"), "suspended" !== Ke.audioContext.state && "interrupted" !== Ke.audioContext.state || await Ke.AudioRenderThread.fakePlay(this.taskId)), this.audioEnded = false);
          else await Ke.DemuxerThread.changeConnectStream(this.taskId, t4.index, this.selectedAudioStream.index, false);
          G.pq("changed selected audio stream, from ".concat(this.selectedAudioStream.id, " to ").concat(t4.id, ", taskId: ").concat(this.taskId), We, 3835), this.selectedAudioStream = t4, this.status = this.lastStatus, this.fire(W.Rj, [1, t4.id, this.selectedAudioStream.id]);
        }
      }
    }
    async selectSubtitle(e3) {
      if (this.isHls() || this.isDash()) {
        var t3;
        G.pq("call IOThread selectSubtitle, index: ".concat(e3, ", taskId: ").concat(this.taskId), We, 3854), await (null === (t3 = Ke.IOThread) || void 0 === t3 ? void 0 : t3.selectSubtitle(this.taskId, e3)), this.subtitleTaskId && await Ke.DemuxerThread.seek(this.subtitleTaskId, this.currentTime, 16), this.subtitleRender && (this.subtitleRender.reset(), this.subtitleRender.start());
      } else {
        const t4 = this.formatContext.streams.find((t5) => t5.id === e3);
        if (this.selectedSubtitleStream && t4 && 3 === y.f[15](t4.codecpar) && t4 !== this.selectedSubtitleStream) {
          if (10 === this.status) return void G.R8("player is changing now, taskId: ".concat(this.taskId), We, 3868);
          this.lastStatus = this.status, this.status = 10, this.fire(W.Wt, [3, t4.id, this.selectedSubtitleStream.id]), this.subtitleRender.reopenDecoder(t4.codecpar);
          const e4 = this.externalSubtitleTasks.find((e5) => e5.streamId === t4.id);
          e4 ? (this.subtitleRender.setDemuxTask(e4.taskId), this.subtitleRender.reset(), await Ke.DemuxerThread.seek(e4.taskId, this.currentTime, 8, t4.index)) : (this.subtitleRender.setDemuxTask(this.taskId), -1 === this.lastSelectedInnerSubtitleStreamIndex ? await Ke.DemuxerThread.connectStreamTask.transfer(this.subtitleRender.getDemuxerPort(this.taskId)).invoke(this.taskId, t4.index, this.subtitleRender.getDemuxerPort(this.taskId)) : await Ke.DemuxerThread.changeConnectStream(this.taskId, t4.index, this.lastSelectedInnerSubtitleStreamIndex, false), this.externalSubtitleTasks.find((e5) => e5.streamId === this.selectedSubtitleStream.id) && this.subtitleRender.reset(), this.lastSelectedInnerSubtitleStreamIndex = t4.index), this.subtitleRender && this.subtitleRender.start(), G.pq("changed selected subtitle stream, from ".concat(this.selectedSubtitleStream.id, " to ").concat(t4.id, ", taskId: ").concat(this.taskId), We, 3907), this.selectedSubtitleStream = t4, this.status = this.lastStatus, this.fire(W.Rj, [3, t4.id, this.selectedSubtitleStream.id]);
        } else G.z3("call selectSubtitle failed, id: ".concat(e3, ", taskId: ").concat(this.taskId), We, 3915);
      }
    }
    async playNextFrame() {
      !this.useMSE && 8 === this.status && this.selectedVideoStream && await this.VideoRenderThread.renderNextFrame(this.taskId);
    }
    enterFullscreen() {
      if (this.isMediaStreamMode()) return;
      const e3 = this.options.container;
      e3.requestFullscreen ? e3.requestFullscreen() : e3.mozRequestFullScreen ? e3.mozRequestFullScreen() : e3.webkitRequestFullscreen ? e3.webkitRequestFullscreen() : e3.msRequestFullscreen && e3.msRequestFullscreen(), G.pq("player call enterFullscreen, taskId: ".concat(this.taskId), We, 3950);
    }
    exitFullscreen() {
      document.exitFullscreen ? document.exitFullscreen() : document.mozExitFullScreen ? document.mozExitFullScreen() : document.webkitExitFullscreen && document.webkitExitFullscreen(), G.pq("player call exitFullscreen, taskId: ".concat(this.taskId), We, 3966);
    }
    snapshot(e3 = "png", t3 = 1) {
      if (this.useMSE && this.video) {
        const i3 = document.createElement("canvas");
        return i3.width = this.video.videoWidth, i3.height = this.video.videoHeight, i3.getContext("2d").drawImage(this.video, 0, 0), i3.toDataURL("image/".concat(e3), t3);
      }
      if (this.canvas) return this.canvas.toDataURL("image/".concat(e3), t3);
    }
    getStats() {
      return this.GlobalData.stats;
    }
    async destroy() {
      G.pq("[AVPlayer.destroy] status: ".concat(this.status), We, 4014), G.pq("call destroy, taskId: ".concat(this.taskId), We, 4016), 2 !== this.status ? (await this.stop(), this.VideoPipelineProxy && (await this.VideoDecoderThread.clear(), await this.VideoRenderThread.clear(), await this.VideoPipelineProxy.destroy(), this.VideoDecoderThread = null, this.VideoPipelineProxy = null), this.VideoDecoderThread && (await this.VideoDecoderThread.clear(), (0, M.nE)(this.VideoDecoderThread), this.VideoDecoderThread = null), this.VideoRenderThread = null, this.GlobalData && (this.GlobalData.avframeList.clear((e3) => {
        (0, D.to)(e3);
      }, 20), this.GlobalData.avpacketList.clear((e3) => {
        (0, E.Up)(e3);
      }, 20), ce.zr(this.GlobalData[g.o9] + 24), ce.zr(this.GlobalData[g.o9] + 28), (0, x.A)(this.GlobalData), this.GlobalData = null), me.TF(Ke.Instances, this), this.status = 2) : G.R8("player has already destroyed, taskId: ".concat(this.taskId), We, 4019);
    }
    onVideoEnded() {
      this.videoEnded = true, this.handleEnded();
    }
    onAudioEnded() {
      this.audioEnded = true, this.selectedVideoStream && this.controller.setTimeUpdateListenType(0), this.handleEnded();
    }
    onCanvasUpdated() {
      this.updateCanvas = this.createCanvas(), this.updateCanvas.width = this.options.container.offsetWidth * devicePixelRatio, this.updateCanvas.height = this.options.container.offsetHeight * devicePixelRatio;
      const e3 = (0, H.A)() && (F.USE_THREADS || j.A.worker && this.options.enableWorker) ? this.updateCanvas.transferControlToOffscreen() : this.updateCanvas;
      this.VideoRenderThread.updateCanvas.transfer(e3).invoke(this.taskId, e3);
    }
    async onGetDecoderResource(e3, t3) {
      return this.getResource("decoder", t3, e3);
    }
    onFirstVideoRendered() {
      G.pq("first video frame rendered, taskId: ".concat(this.taskId), We, 4111), this.fire(W.NX);
    }
    onFirstAudioRendered() {
      G.pq("first audio frame rendered, taskId: ".concat(this.taskId), We, 4119), this.fire(W.Sw);
    }
    onAudioStutter() {
      6 === this.status && this.GlobalData.stats.audioStutter++;
    }
    onVideoStutter() {
      6 === this.status && this.GlobalData.stats.videoStutter++;
    }
    onVideoDiscard() {
      6 === this.status && this.VideoDecoderThread.setNextDiscard(this.taskId);
    }
    onFirstVideoRenderedAfterUpdateCanvas() {
      if (this.updateCanvas && !this.isMediaStreamMode()) {
        const e3 = this.options.container;
        this.canvas && e3.removeChild(this.canvas), this.canvas = this.updateCanvas, e3.appendChild(this.canvas), this.updateCanvas = null;
      }
    }
    onTimeUpdate(e3) {
      if (this.driftEndedTriggered) return;
      if (7 === this.status) return;
      if (this.fire(W.E9, [e3]), null === this.firstIFrameTimecode || null === this.firstIFramePts) return;
      const t3 = this.firstIFrameTimecode + (e3 - this.firstIFramePts), i3 = Number(t3);
      if (this.timecodeReceived && l()(i3)) {
        const e4 = f()(), t4 = e4 - i3, r4 = Math.abs(t4) / 1e3;
        if (r4 > this.maxLatency) return this.driftEndedTriggered = true, this.audioEnded = true, this.videoEnded = true, this.status = 7, G.Yz("[AVPlayer.onTimeUpdate] Triggering ENDED event (reason: LATENCY) | reason=latency exceeded maxLatency latencyMs=".concat(t4, " latencySec=").concat(r4, " currentTimeMs=").concat(e4, " frameTimecodeMs=").concat(i3, " maxLatency=").concat(this.maxLatency, " driftEndedTriggered=true"), We, 4196), this.fire(W.hV), void (async () => {
          try {
            await this.stop(true);
          } catch (e5) {
            console.error("[AVPlayer.onTimeUpdate] error during stop:", e5);
          }
        })();
      }
      const r3 = this.timecodeQueue[0], a3 = null == r3 ? void 0 : r3.dealTime, s3 = null == r3 ? void 0 : r3.currentTime;
      if (void 0 !== r3 && void 0 !== t3 && void 0 !== a3 && a3 < t3) {
        const e4 = void 0 !== s3 ? [Number(a3), Number(s3)] : [Number(a3)];
        this.fire(W.LX, e4);
        const i4 = Number(t3) - Number(a3), r4 = void 0 !== s3 ? Math.abs(Number(s3) - Number(t3)) : void 0;
        G.pq("[AVPlayer.onTimeUpdate] 已觸發 TIMEUP 事件 | dealTime=".concat(Number(a3), " frameTimecode=").concat(Number(t3), " deal=").concat(i4, " currentTime=").concat(void 0 !== s3 ? Number(s3) : "N/A", " playbackLatency=").concat(r4), We, 4244), G.pq("[timeup] dealTime with FrameTimecode diff': ".concat(i4), We, 4252), this.timecodeQueue.shift();
      } else void 0 === r3 || (void 0 === t3 ? G.pq("[debug:timecode - AVPlayer] frameTimecode 為 undefined, 不能觸發 TIMEUP", We, 4261) : G.pq("[debug:timecode - AVPlayer] dealTime >= frameTimecode, 還沒達到觸發條件 | dealTime=".concat(Number(a3), " frameTimecode=").concat(Number(t3), " currentTime=").concat(void 0 !== s3 ? Number(s3) : "N/A"), We, 4264));
    }
    onMSESeek(e3) {
      const t3 = this.audio || this.video;
      t3.buffered.length ? t3.currentTime = e3 : setTimeout(() => {
        t3.currentTime = e3;
      }, 500);
    }
    onMasterTimerUpdate(e3) {
      var t3, i3;
      null === (t3 = Ke.AudioRenderThread) || void 0 === t3 || t3.setMasterTime(this.taskId, e3), null === (i3 = Ke.VideoRenderThread) || void 0 === i3 || i3.setMasterTime(this.taskId, e3);
    }
    onAudioContextStateChange() {
      "interrupted" !== Ke.audioContext.state && "suspended" !== Ke.audioContext.state || 6 !== this.status && 8 !== this.status || (G.R8("the audioContext state changed to ".concat(Ke.audioContext.state, ". It may be resumed after a user gesture"), We, 4305), Ke.AudioRenderThread.fakePlay(this.taskId), this.fire(W.IY));
    }
    onError(e3) {
      this.fire(W.ff, [e3]);
    }
    async createVideoDecoderThread(e3 = true) {
      this.VideoDecoderThread || (!F.USE_THREADS && j.A.worker && e3 && (0, H.A)() ? (this.VideoPipelineProxy = new Be.A(), await this.VideoPipelineProxy.run(), this.VideoPipelineProxy.setLogLevel(Ke.level), this.VideoDecoderThread = this.VideoPipelineProxy.VideoDecodePipeline, this.VideoRenderThread = this.VideoPipelineProxy.VideoRenderPipeline) : (this.VideoDecoderThread = await (0, M.pt)(S.A, { name: "VideoDecoderThread" }, 31138).run(), this.VideoDecoderThread.setLogLevel(Ke.level), this.VideoRenderThread = Ke.VideoRenderThread));
    }
    static async startDemuxPipeline(e3 = true) {
      return Ke.DemuxThreadReady ? Ke.DemuxThreadReady : Ke.DemuxThreadReady = new (d2())(async (t3) => {
        !F.USE_THREADS && j.A.worker && e3 ? (Ke.IODemuxProxy = new Te.A(), await Ke.IODemuxProxy.run(), Ke.IODemuxProxy.setLogLevel(Ke.level), Ke.IOThread = Ke.IODemuxProxy.IOPipeline, Ke.DemuxerThread = Ke.IODemuxProxy.DemuxPipeline) : (Ke.IOThread = await (0, M.pt)(I.A, { name: "IOThread" }, 87243).run(), Ke.IOThread.setLogLevel(Ke.level), Ke.DemuxerThread = await (0, M.pt)(P.A, { name: "DemuxerThread" }, 72480).run(), Ke.DemuxerThread.setLogLevel(Ke.level)), t3();
      });
    }
    static async startAudioContext() {
      Ke.audioContext || (Ke.audioContext = new (AudioContext || webkitAudioContext)()), Ke.audioContext.addEventListener("statechange", () => {
        me.__(Ke.Instances, (e3) => {
          e3.onAudioContextStateChange();
        });
      }), j.A.audioWorklet && await (0, N.A)(Ke.audioContext, !F.USE_THREADS || K.A.safari && !K.A.checkVersion(K.A.version, "16.1", true) || we.A.ios && !K.A.checkVersion(we.A.version, "16.1", true) ? 34268 : 5676);
    }
    static async startAudioPipeline(e3 = true) {
      return Ke.AudioThreadReady ? Ke.AudioThreadReady : Ke.AudioThreadReady = new (d2())(async (t3) => {
        await Ke.startAudioContext(), !F.USE_THREADS && j.A.worker && e3 ? (Ke.AudioPipelineProxy = new Me.A(), await Ke.AudioPipelineProxy.run(), Ke.AudioPipelineProxy.setLogLevel(Ke.level), Ke.AudioDecoderThread = Ke.AudioPipelineProxy.AudioDecodePipeline, Ke.AudioRenderThread = Ke.AudioPipelineProxy.AudioRenderPipeline) : (Ke.AudioDecoderThread = await (0, M.pt)(T.A, { name: "AudioDecoderThread" }, 18667).run(), Ke.AudioDecoderThread.setLogLevel(Ke.level), Ke.AudioRenderThread = await (0, M.pt)(L.A, { name: "AudioRenderThread" }, 59377).run(), Ke.AudioRenderThread.setLogLevel(Ke.level)), t3();
      });
    }
    static async startVideoRenderPipeline(e3 = true) {
      return Ke.VideoThreadReady ? Ke.VideoThreadReady : Ke.VideoThreadReady = new (d2())(async (t3) => {
        !F.USE_THREADS && j.A.worker && e3 && (0, H.A)() || (Ke.VideoRenderThread = await (0, M.pt)(z.A, { name: "VideoRenderThread", disableWorker: !(0, H.A)() }, 33968).run(), Ke.VideoRenderThread.setLogLevel(Ke.level)), t3();
      });
    }
    static async startMSEPipeline(e3 = true) {
      return Ke.MSEThreadReady ? Ke.MSEThreadReady : Ke.MSEThreadReady = new (d2())(async (t3) => {
        !F.USE_THREADS && j.A.worker && e3 && j.A.workerMSE ? (Ke.MSEPipelineProxy = new Re.A(), await Ke.MSEPipelineProxy.run(), Ke.MSEPipelineProxy.setLogLevel(Ke.level), Ke.MSEThread = Ke.MSEPipelineProxy.MSEPipeline) : (Ke.MSEThread = await (0, M.pt)(ae.A, { name: "MSEThread", disableWorker: !j.A.workerMSE }, 25115).run(), Ke.MSEThread.setLogLevel(Ke.level)), t3();
      });
    }
    static async startPipelines(e3 = true) {
      await Ke.startDemuxPipeline(e3), await Ke.startAudioPipeline(e3), await Ke.startVideoRenderPipeline(e3), await Ke.startMSEPipeline(e3), G.pq("AVPlayer pipelines started", We, 4500);
    }
    static async stopPipelines() {
      Ke.VideoRenderThread && (await Ke.VideoRenderThread.clear(), (0, M.nE)(Ke.VideoRenderThread)), Ke.AudioPipelineProxy && (await Ke.AudioRenderThread.clear(), await Ke.AudioDecoderThread.clear(), await Ke.AudioPipelineProxy.destroy(), Ke.AudioRenderThread = null, Ke.AudioDecoderThread = null), Ke.AudioRenderThread && (await Ke.AudioRenderThread.clear(), (0, M.nE)(Ke.AudioRenderThread)), Ke.AudioDecoderThread && (await Ke.AudioDecoderThread.clear(), (0, M.nE)(Ke.AudioDecoderThread)), Ke.IODemuxProxy && (await Ke.DemuxerThread.clear(), await Ke.IOThread.clear(), await Ke.IODemuxProxy.destroy(), Ke.DemuxerThread = null, Ke.IOThread = null), Ke.DemuxerThread && (await Ke.DemuxerThread.clear(), (0, M.nE)(Ke.DemuxerThread)), Ke.IOThread && (await Ke.IOThread.clear(), (0, M.nE)(Ke.IOThread)), Ke.MSEPipelineProxy && (await Ke.MSEThread.clear(), Ke.MSEPipelineProxy.destroy(), Ke.MSEThread = null), Ke.MSEThread && (await Ke.MSEThread.clear(), (0, M.nE)(Ke.MSEThread)), Ke.AudioPipelineProxy = null, Ke.AudioDecoderThread = null, Ke.IODemuxProxy = null, Ke.DemuxerThread = null, Ke.IOThread = null, Ke.audioContext = null, Ke.MSEThread = null, Ke.MSEPipelineProxy = null, Ke.DemuxThreadReady = null, Ke.VideoThreadReady = null, Ke.AudioThreadReady = null, Ke.MSEThreadReady = null, G.pq("AVPlayer pipelines stopped", We, 4570);
    }
    static setLogLevel(e3) {
      Ke.level = e3, G.V$(e3), Ke.IOThread && Ke.IOThread.setLogLevel(e3), Ke.DemuxerThread && Ke.DemuxerThread.setLogLevel(e3), Ke.AudioDecoderThread && Ke.AudioDecoderThread.setLogLevel(e3), Ke.AudioRenderThread && Ke.AudioRenderThread.setLogLevel(e3), Ke.VideoRenderThread && Ke.VideoRenderThread.setLogLevel(e3), Ke.MSEThread && Ke.MSEThread.setLogLevel(e3), G.pq("set log level: ".concat(e3), We, 4602);
    }
    on(e3, t3, i3 = {}) {
      return super.on(e3, C.X$({ fn: t3 }, i3)), this;
    }
    one(e3, t3, i3 = {}) {
      return super.on(e3, C.X$({ fn: t3, max: 1 }, i3)), this;
    }
    setTimeCode(e3, t3) {
      G.pq("[debug:setTimeCode] taskId: ".concat(this.taskId), We, 4649);
      const i3 = null != t3 ? t3 : BigInt(f()()), r3 = { dealTime: e3, currentTime: i3 };
      this.timecodeQueue.push(r3);
      const a3 = this.timecodeQueue.map((e4) => ({ dealTime: Number(e4.dealTime), currentTime: Number(e4.currentTime) }));
      G.pq("[setTimecode] dealTimeQueue elements: ".concat(o()(a3), " | queueLength=").concat(this.timecodeQueue.length), We, 4664), G.pq("[setTimeCode] latest entry | dealTime=".concat(Number(e3), " currentTime=").concat(Number(i3), " queueLength=").concat(this.timecodeQueue.length), We, 4669);
    }
    configQualityMode(e3, t3, i3 = "AUTO") {
      G.pq("Configuring quality mode: initialQuality=".concat(e3, ", totalQuality=").concat(t3, ", mode=").concat(i3), We, 4685), (e3 < 0 || e3 >= t3) && (G.z3("Invalid initialQuality: ".concat(e3, ", must be between 0 and ").concat(t3 - 1), We, 4689), e3 = Math.min(Math.max(0, e3), t3 - 1));
      const r3 = this.currentQuality, a3 = this.qualityMode;
      if (this.totalQuality = t3, this.qualityMode = i3, this.qualityCheckTimer && (this.qualityCheckTimer.stop(), this.qualityCheckTimer = null), "AUTO" === this.qualityMode) {
        if (this.currentQuality = e3, this.resetStutterStats(), this.startQualityCheck(), r3 !== this.currentQuality || a3 !== this.qualityMode) {
          const e4 = this.currentQuality >= r3 ? "upgrade" : "downgrade";
          this.fire(W.$8, [{ type: e4, from: r3, to: this.currentQuality, totalQuality: this.totalQuality }]);
        }
        return this.currentQuality;
      }
      return this.setQuality(e3) || G.R8("[configQualityMode] failed to set manual quality: ".concat(e3), We, 4727), this.currentQuality;
    }
    getCurrentQuality() {
      return this.currentQuality;
    }
    getTotalQuality() {
      return this.totalQuality;
    }
    resetStutterStats() {
      this.GlobalData.stats.videoStutter = 0, this.GlobalData.stats.audioStutter = 0, this.lastStutterCount = 0, this.qualityUpgradeCounter = 0, this.qualityDowngradeCounter = 0;
    }
    startQualityCheck() {
      this.qualityUpgradeCounter = 0, this.qualityDowngradeCounter = 0, this.lastStutterCount = this.GlobalData.stats.videoStutter + this.GlobalData.stats.audioStutter, this.qualityCheckTimer = new Le.A(() => {
        this.checkQualityStatus();
      }, 0, this.qualityCheckInterval), this.qualityCheckTimer.start(), G.pq("Started quality check timer with interval: ".concat(this.qualityCheckInterval, "ms"), We, 4773);
    }
    checkQualityStatus() {
      if ("AUTO" !== this.qualityMode) return;
      if (6 !== this.status || this.isQualityChanging) return;
      const e3 = this.GlobalData.stats.videoStutter + this.GlobalData.stats.audioStutter, t3 = e3 > this.lastStutterCount, i3 = this.GlobalData.stats.videoStutter;
      this.lastStutterCount = e3, t3 ? (this.qualityUpgradeCounter = 0, this.qualityDowngradeCounter++, G.Yz("Quality check: detected stutter, downgrade counter: ".concat(this.qualityDowngradeCounter), We, 4802), this.qualityDowngradeCounter >= this.qualityDowngradeThreshold && (this.onQualityDown(i3), this.qualityDowngradeCounter = 0)) : (this.qualityDowngradeCounter = 0, this.qualityUpgradeCounter++, G.Yz("Quality check: no stutter, upgrade counter: ".concat(this.qualityUpgradeCounter), We, 4814), this.qualityUpgradeCounter >= this.qualityUpgradeThreshold && (this.onQualityUp(i3), this.qualityUpgradeCounter = 0));
    }
    onQualityUp(e3) {
      if (G.pq("Quality up event triggered, videoStutter: ".concat(e3), We, 4829), this.currentQuality >= this.totalQuality - 1) return void G.pq("Already at highest quality level: ".concat(this.currentQuality), We, 4833);
      const t3 = this.currentQuality;
      this.fire("qualitymode", [{ type: "up", currentQuality: this.currentQuality, totalQuality: this.totalQuality, videoStutter: e3 }]), t3 === this.currentQuality && (this.currentQuality = Math.min(this.currentQuality + 1, this.totalQuality - 1), this.fire(W.$8, [{ type: "upgrade", from: t3, to: this.currentQuality, totalQuality: this.totalQuality }]), G.pq("Quality upgraded from ".concat(t3, " to ").concat(this.currentQuality), We, 4861)), "AUTO" === this.qualityMode && t3 !== this.currentQuality && this.resetStutterStats();
    }
    onQualityDown(e3) {
      if (G.pq("Quality down event triggered, videoStutter: ".concat(e3), We, 4875), this.currentQuality <= 0) return void G.pq("Already at lowest quality level: ".concat(this.currentQuality), We, 4879);
      const t3 = this.currentQuality;
      this.fire("qualitymode", [{ type: "down", currentQuality: this.currentQuality, totalQuality: this.totalQuality, videoStutter: e3 }]), t3 === this.currentQuality && (this.currentQuality = Math.max(this.currentQuality - 1, 0), this.fire(W.$8, [{ type: "downgrade", from: t3, to: this.currentQuality, totalQuality: this.totalQuality }]), G.pq("Quality downgraded from ".concat(t3, " to ").concat(this.currentQuality), We, 4907)), "AUTO" === this.qualityMode && t3 !== this.currentQuality && this.resetStutterStats();
    }
    setQuality(e3) {
      if ("MANUAL" !== this.qualityMode && (this.qualityMode = "MANUAL", this.qualityCheckTimer && (this.qualityCheckTimer.stop(), this.qualityCheckTimer = null)), e3 < 0 || e3 >= this.totalQuality) return G.z3("Invalid quality level: ".concat(e3, ", must be between 0 and ").concat(this.totalQuality - 1), We, 4931), false;
      if (this.isQualityChanging) return G.R8("Quality is changing, ignore request to set quality: ".concat(e3), We, 4937), false;
      const t3 = this.currentQuality;
      if (t3 === e3) return "MANUAL" === this.qualityMode && G.pq("Video quality changed by user: ".concat(e3), We, 4946), true;
      G.pq("Setting quality from ".concat(t3, " to ").concat(e3), We, 4951), this.currentQuality = e3;
      const i3 = e3 > t3 ? "upgrade" : "downgrade";
      return this.fire(W.$8, [{ type: i3, from: t3, to: e3, totalQuality: this.totalQuality }]), true;
    }
  }
  (0, r2.A)(Ke, "Instances", []), (0, r2.A)(Ke, "Util", { compile: U.A, browser: K.A, os: we.A }), (0, r2.A)(Ke, "IOLoader", { CustomIOLoader: Pe.A, FetchIOLoader: xe.A, FileIOLoader: Ie.A, WebSocketIOLoader: Ce.A, SocketIOLoader: Ue.A, WebTransportIOLoader: De.A }), (0, r2.A)(Ke, "level", G.rD), (0, r2.A)(Ke, "DemuxThreadReady", void 0), (0, r2.A)(Ke, "AudioThreadReady", void 0), (0, r2.A)(Ke, "VideoThreadReady", void 0), (0, r2.A)(Ke, "MSEThreadReady", void 0), (0, r2.A)(Ke, "IODemuxProxy", void 0), (0, r2.A)(Ke, "AudioPipelineProxy", void 0), (0, r2.A)(Ke, "MSEPipelineProxy", void 0), (0, r2.A)(Ke, "IOThread", void 0), (0, r2.A)(Ke, "DemuxerThread", void 0), (0, r2.A)(Ke, "AudioDecoderThread", void 0), (0, r2.A)(Ke, "AudioRenderThread", void 0), (0, r2.A)(Ke, "VideoRenderThread", void 0), (0, r2.A)(Ke, "MSEThread", void 0), (0, r2.A)(Ke, "audioContext", void 0), (0, r2.A)(Ke, "Resource", new (m())());
}, 11628: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(134), a2 = i2(84149), s2 = i2(67593);
  class n {
    constructor(e3, t3) {
      (0, r2.A)(this, "videoRenderControlChannel", void 0), (0, r2.A)(this, "audioRenderControlChannel", void 0), (0, r2.A)(this, "muxerControlChannel", void 0), (0, r2.A)(this, "demuxerControlChannel", void 0), (0, r2.A)(this, "videoRenderControlIPCPort", void 0), (0, r2.A)(this, "audioRenderControlIPCPort", void 0), (0, r2.A)(this, "muxerControlIPCPort", void 0), (0, r2.A)(this, "demuxerControlIPCPort", void 0), (0, r2.A)(this, "observer", void 0), (0, r2.A)(this, "visibilityHidden", void 0), (0, r2.A)(this, "onVisibilityChange", void 0), (0, r2.A)(this, "timeUpdateListenType", void 0), (0, r2.A)(this, "enableAudioVideoSync", void 0), this.observer = e3, this.videoRenderControlChannel = (0, s2.A)(t3), this.audioRenderControlChannel = (0, s2.A)(t3), this.muxerControlChannel = (0, s2.A)(t3), this.demuxerControlChannel = (0, s2.A)(t3), this.videoRenderControlIPCPort = new a2.Ay(this.videoRenderControlChannel.port2), this.audioRenderControlIPCPort = new a2.Ay(this.audioRenderControlChannel.port2), this.muxerControlIPCPort = new a2.Ay(this.muxerControlChannel.port2), this.demuxerControlIPCPort = new a2.Ay(this.demuxerControlChannel.port2), this.enableAudioVideoSync = true, this.videoRenderControlIPCPort.on(a2.Wo, (e4) => {
        switch (e4.method) {
          case "ended":
            this.observer.onVideoEnded();
            break;
          case "updateCanvas":
            this.observer.onCanvasUpdated();
            break;
          case "firstRendered":
            this.observer.onFirstVideoRendered();
            break;
          case "firstRenderedAfterUpdateCanvas":
            this.observer.onFirstVideoRenderedAfterUpdateCanvas();
            break;
          case "syncPts":
            0 === this.timeUpdateListenType && this.observer.onTimeUpdate(e4.params.pts);
        }
      }), this.audioRenderControlIPCPort.on(a2.Wo, (e4) => {
        switch (e4.method) {
          case "syncPts":
            this.enableAudioVideoSync && this.videoRenderControlIPCPort.notify("syncPts", e4.params), 1 === this.timeUpdateListenType && this.observer.onTimeUpdate(e4.params.pts);
            break;
          case "ended":
            this.observer.onAudioEnded(), this.timeUpdateListenType = 0;
        }
      }), this.muxerControlIPCPort.on(a2.Wo, (e4) => {
        "seek" === e4.method && this.observer.onMSESeek(e4.params.time);
      }), this.demuxerControlIPCPort.on(a2.S3, async (e4) => {
        "getDecoderResource" === e4.method && this.demuxerControlIPCPort.reply(e4, await this.observer.onGetDecoderResource(e4.params.mediaType, e4.params.codecId));
      }), this.demuxerControlIPCPort.on(a2.Wo, async (e4) => {
        switch (e4.method) {
          case "demuxError":
            this.observer.onError(new Error("demux error, code: ".concat(e4.params.code)));
            break;
          case "demuxPktPTS": {
            var t4, i3;
            const { pts: r3, streamIndex: a3, isKeyFrame: s3, mediaType: n2, size: o, seiData: c, seiSize: d2, seiTimecode: h, seiDeviation: l } = e4.params;
            null === (t4 = (i3 = this.observer).onDemuxPktPTS) || void 0 === t4 || t4.call(i3, r3, a3, s3, n2, o, c, d2, h, l);
            break;
          }
          case "seiTimecode": {
            const { timecode: t5, pts: i4 } = e4.params;
            this.observer.onFirstIFrameTimecode && this.observer.onFirstIFrameTimecode(BigInt(t5), BigInt(i4));
            break;
          }
        }
      }), this.onVisibilityChange = (t4) => {
        this.visibilityHidden = "hidden" === document.visibilityState && !this.observer.isPictureInPicture(), e3.isMediaStreamMode() || this.videoRenderControlIPCPort.notify("skipRender", { skipRender: this.visibilityHidden }), this.muxerControlIPCPort.notify("visibilitychange", { visibilityHidden: this.visibilityHidden });
      }, this.visibilityHidden = "hidden" === document.visibilityState && !this.observer.isPictureInPicture(), document.addEventListener("visibilitychange", this.onVisibilityChange), this.muxerControlIPCPort.notify("visibilitychange", { visibilityHidden: this.visibilityHidden });
    }
    getVideoRenderControlPort() {
      return this.videoRenderControlChannel.port1;
    }
    getAudioRenderControlPort() {
      return this.audioRenderControlChannel.port1;
    }
    getMuxerControlPort() {
      return this.muxerControlChannel.port1;
    }
    getDemuxerControlPort() {
      return this.demuxerControlChannel.port1;
    }
    setTimeUpdateListenType(e3) {
      this.timeUpdateListenType = e3;
    }
    setEnableAudioVideoSync(e3) {
      this.enableAudioVideoSync = e3;
    }
    destroy() {
      this.videoRenderControlIPCPort && this.videoRenderControlIPCPort.destroy(), this.audioRenderControlIPCPort && this.audioRenderControlIPCPort.destroy(), this.muxerControlIPCPort && this.muxerControlIPCPort.destroy(), this.demuxerControlIPCPort && this.demuxerControlIPCPort.destroy(), this.onVisibilityChange && (document.removeEventListener("visibilitychange", this.onVisibilityChange), this.onVisibilityChange = null), this.videoRenderControlIPCPort = this.audioRenderControlIPCPort = this.muxerControlIPCPort = this.videoRenderControlChannel = this.audioRenderControlChannel = this.demuxerControlChannel = this.muxerControlChannel = null;
    }
  }
}, 2368: (e2, t2, i2) => {
  i2.d(t2, { A: () => d2 });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(54058), o = i2(38724);
  const c = 500;
  class d2 {
    constructor(e3) {
      (0, r2.A)(this, "timer", void 0), (0, r2.A)(this, "interval", void 0), (0, r2.A)(this, "data", void 0), (0, r2.A)(this, "lastIncomingPacketCount", void 0), (0, r2.A)(this, "shutterCount", void 0), (0, r2.A)(this, "lastShutterCount", void 0), (0, r2.A)(this, "isFirst", void 0), (0, r2.A)(this, "max", void 0), (0, r2.A)(this, "min", void 0), (0, r2.A)(this, "targetPlaybackRate", void 0), (0, r2.A)(this, "currentPlaybackRate", void 0), (0, r2.A)(this, "playbackRateTimer", void 0), (0, r2.A)(this, "options", void 0), this.options = e3, this.interval = 1e3, this.isFirst = true, this.data = [], this.lastIncomingPacketCount = BigInt(0), this.shutterCount = 0, this.lastShutterCount = 0, this.max = 1e3 * e3.max >>> 0, this.min = 1e3 * e3.min >>> 0, s2.M[15](this.options.jitterBuffer, this.min), s2.M[15](this.options.jitterBuffer + 4, this.max), e3.lowLatencyStart && s2.M[15](this.options.jitterBuffer + 4, this.min + c), this.targetPlaybackRate = 1, this.currentPlaybackRate = 1, this.playbackRateTimer = new n.A(() => {
        if (this.currentPlaybackRate > this.targetPlaybackRate) {
          const e4 = Math.max(this.targetPlaybackRate, this.currentPlaybackRate - 0.01);
          this.options.observer.onSetPlayRate(e4), this.currentPlaybackRate = e4;
        } else if (this.currentPlaybackRate < this.targetPlaybackRate) {
          const e4 = Math.min(this.targetPlaybackRate, this.currentPlaybackRate + 0.01);
          this.options.observer.onSetPlayRate(e4), this.currentPlaybackRate = e4;
        } else this.playbackRateTimer.stop();
      }, 0, 200), this.timer = new o.A(this.onTimer.bind(this), 1e3, this.interval);
    }
    start() {
      this.timer.start(), this.isFirst = true, this.lastIncomingPacketCount = a2.f[17](this.options.stats + 24) + a2.f[17](this.options.stats + 112), this.shutterCount = 0, this.lastShutterCount = a2.f[15](this.options.stats + 292) + a2.f[15](this.options.stats + 288), this.computePlayRate();
    }
    stop() {
      this.timer.stop(), this.data.length = 0, this.isFirst = true, this.playbackRateTimer.isStarted() && (this.playbackRateTimer.stop(), this.targetPlaybackRate = this.currentPlaybackRate = 1, this.options.observer.onSetPlayRate(1));
    }
    reset() {
      this.data.length = 0, this.isFirst = true, this.lastIncomingPacketCount = a2.f[17](this.options.stats + 24) + a2.f[17](this.options.stats + 112), this.shutterCount = 0, this.lastShutterCount = a2.f[15](this.options.stats + 292) + a2.f[15](this.options.stats + 288), this.targetPlaybackRate = this.currentPlaybackRate = 1;
    }
    setPlayRate(e3) {
      this.targetPlaybackRate = e3, this.options.useMse ? (this.options.observer.onSetPlayRate(this.targetPlaybackRate), this.currentPlaybackRate = this.targetPlaybackRate) : this.currentPlaybackRate === e3 || this.playbackRateTimer.isStarted() || this.playbackRateTimer.start();
    }
    computePlayRate() {
      let e3 = a2.f[15](this.options.stats + 244) ? a2.f[15](this.options.stats + 32) / a2.f[15](this.options.stats + 244) * 1e3 : a2.f[15](this.options.stats + 232) ? a2.f[15](this.options.stats + 120) / a2.f[15](this.options.stats + 232) * 1e3 : a2.f[15](this.options.jitterBuffer);
      const t3 = (a2.f[15](this.options.jitterBuffer) + a2.f[15](this.options.jitterBuffer + 4)) / 2;
      e3 < a2.f[15](this.options.jitterBuffer) >> 1 && e3 < 2e3 ? this.setPlayRate(0.9) : e3 < a2.f[15](this.options.jitterBuffer) - c && e3 < 2e3 ? this.setPlayRate(0.95) : e3 > a2.f[15](this.options.jitterBuffer + 4) + c ? this.setPlayRate(1.05) : (this.currentPlaybackRate < 1 && e3 >= t3 || this.currentPlaybackRate > 1 && e3 <= t3) && this.setPlayRate(1), e3 > 2e3 && this.max > 2e3 && e3 > this.max << 1 && this.options.observer.onCroppingBuffer(a2.f[15](this.options.jitterBuffer + 4));
    }
    process() {
      const e3 = this.data.reduce((e4, t4, i4) => e4 + t4 * (i4 + 1), 0) / 55, t3 = this.data.reduce((t4, i4) => t4 + Math.pow(i4 - e3, 2), 0) / this.data.length, i3 = Math.sqrt(t3);
      if (this.options.lowLatency) {
        const t4 = Math.round(e3 / (this.interval / 1e3)), r3 = a2.f[15](this.options.stats + 232) + a2.f[15](this.options.stats + 244);
        t4 < r3 >> 1 || this.shutterCount > 3 ? (s2.M[15](this.options.jitterBuffer, Math.min(2 * a2.f[15](this.options.jitterBuffer), this.max - c)), s2.M[15](this.options.jitterBuffer + 4, Math.min(2 * a2.f[15](this.options.jitterBuffer + 4), this.max))) : t4 >= r3 && i3 < 50 ? (s2.M[15](this.options.jitterBuffer, Math.max(a2.f[15](this.options.jitterBuffer) - c, this.min)), s2.M[15](this.options.jitterBuffer + 4, Math.max(a2.f[15](this.options.jitterBuffer + 4) - c, this.min + c))) : i3 > 100 ? (s2.M[15](this.options.jitterBuffer, Math.min(a2.f[15](this.options.jitterBuffer) + c, this.max - c)), s2.M[15](this.options.jitterBuffer + 4, Math.min(a2.f[15](this.options.jitterBuffer + 4) + c, this.max))) : i3 < 20 ? a2.f[15](this.options.jitterBuffer) === this.min ? s2.M[15](this.options.jitterBuffer + 4, Math.max(a2.f[15](this.options.jitterBuffer + 4) - c, this.min + c)) : s2.M[15](this.options.jitterBuffer, Math.max(a2.f[15](this.options.jitterBuffer) - c, this.min)) : a2.f[15](this.options.jitterBuffer + 4) === this.max ? s2.M[15](this.options.jitterBuffer, Math.min(a2.f[15](this.options.jitterBuffer) + c, this.max - c)) : s2.M[15](this.options.jitterBuffer + 4, Math.min(a2.f[15](this.options.jitterBuffer + 4) + c, this.max));
      }
      this.computePlayRate(), s2.M[19](this.options.stats + 272, i3);
    }
    onTimer() {
      const e3 = a2.f[17](this.options.stats + 24) + a2.f[17](this.options.stats + 112);
      this.isFirst ? this.isFirst = false : this.data.push(Number(BigInt.asIntN(32, e3 - this.lastIncomingPacketCount))), this.lastIncomingPacketCount = e3, a2.f[15](this.options.stats + 292) + a2.f[15](this.options.stats + 288) > this.lastShutterCount ? this.shutterCount++ : this.shutterCount = 0, this.lastShutterCount = a2.f[15](this.options.stats + 292) + a2.f[15](this.options.stats + 288), this.data.length > 10 && this.data.shift(), 10 === this.data.length && this.process();
    }
  }
}, 78201: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(54058), o = i2(43607);
  class c {
    constructor(e3, t3, i3) {
      (0, r2.A)(this, "stats", void 0), (0, r2.A)(this, "timer", void 0), (0, r2.A)(this, "videoFrameRenderCount", void 0), (0, r2.A)(this, "videoFrameDecodeCount", void 0), (0, r2.A)(this, "audioFrameRenderCount", void 0), (0, r2.A)(this, "audioFrameDecodeCount", void 0), (0, r2.A)(this, "videoPacketBytes", void 0), (0, r2.A)(this, "audioPacketBytes", void 0), (0, r2.A)(this, "bufferReceiveBytes", void 0), (0, r2.A)(this, "observer", void 0), (0, r2.A)(this, "isWorkerMain", void 0), (0, r2.A)(this, "videoDecodeMaxIntervalCounter", void 0), (0, r2.A)(this, "lastAudioStutterCount", void 0), (0, r2.A)(this, "lastAVDelta", void 0), this.stats = e3, this.observer = i3, this.isWorkerMain = t3, this.timer = new n.A(this.onTimer.bind(this), 1e3, 1e3);
    }
    reset() {
      this.videoFrameRenderCount = a2.f[17](this.stats + 160), this.videoFrameDecodeCount = a2.f[17](this.stats + 144), this.audioFrameRenderCount = a2.f[17](this.stats + 72), this.audioFrameDecodeCount = a2.f[17](this.stats + 56), this.videoPacketBytes = a2.f[17](this.stats + 104), this.audioPacketBytes = a2.f[17](this.stats + 16), this.bufferReceiveBytes = a2.f[17](this.stats + 192), this.isWorkerMain || (s2.M[15](this.stats + 248, 0), s2.M[15](this.stats + 252, 0), s2.M[15](this.stats + 256, 0), s2.M[15](this.stats + 260, 0));
    }
    start() {
      this.reset(), this.videoDecodeMaxIntervalCounter = 0, this.lastAudioStutterCount = 0, this.lastAVDelta = BigInt(0), this.timer.start();
    }
    stop() {
      this.timer.stop();
    }
    onTimer() {
      s2.M[15](this.stats + 228, Number(BigInt.asIntN(32, a2.f[17](this.stats + 160) - this.videoFrameRenderCount))), s2.M[15](this.stats + 224, Number(BigInt.asIntN(32, a2.f[17](this.stats + 144) - this.videoFrameDecodeCount))), s2.M[15](this.stats + 240, Number(BigInt.asIntN(32, a2.f[17](this.stats + 72) - this.audioFrameRenderCount))), s2.M[15](this.stats + 236, Number(BigInt.asIntN(32, a2.f[17](this.stats + 56) - this.audioFrameDecodeCount))), s2.M[15](this.stats + 220, Number(BigInt.asIntN(32, a2.f[17](this.stats + 104) - this.videoPacketBytes))), s2.M[15](this.stats + 216, Number(BigInt.asIntN(32, a2.f[17](this.stats + 16) - this.audioPacketBytes))), s2.M[15](this.stats + 264, Number(BigInt.asIntN(32, a2.f[17](this.stats + 192) - this.bufferReceiveBytes))), "visible" === document.visibilityState && (a2.f[15](this.stats + 228) < 0.5 * a2.f[15](this.stats + 232) || a2.f[15](this.stats + 260) > 6e3 / a2.f[15](this.stats + 232)) && this.observer.onVideoStutter(), a2.f[15](this.stats + 256) > 1e3 / a2.f[15](this.stats + 232) && a2.f[15](this.stats + 224) < 0.9 * a2.f[15](this.stats + 232) && (a2.f[17](this.stats + 328) > 0 && a2.f[17](this.stats + 336) > 0 && a2.f[17](this.stats + 328) - a2.f[17](this.stats + 336) > BigInt(1e3) && a2.f[17](this.stats + 328) - a2.f[17](this.stats + 336) > this.lastAVDelta || a2.f[15](this.stats + 288) > this.lastAudioStutterCount) ? this.videoDecodeMaxIntervalCounter++ : this.videoDecodeMaxIntervalCounter = 0, this.videoDecodeMaxIntervalCounter > 5 && (this.observer.onVideoDiscard(), this.videoDecodeMaxIntervalCounter = 0), this.lastAudioStutterCount = a2.f[15](this.stats + 288), this.lastAVDelta = a2.f[17](this.stats + 328) - a2.f[17](this.stats + 336), this.reset();
      const e3 = a2.f[17](this.stats + 344), t3 = a2.f[17](this.stats + 352), i3 = a2.f[17](this.stats + 328), r3 = a2.f[17](this.stats + 336);
      if (e3 && t3 && e3 - i3 > 2e3 && t3 - r3 > 2e3 || e3 && !t3 && e3 - i3 > 2e3 || t3 && !e3 && t3 - r3 > 2e3) {
        const i4 = e3 && t3 ? o.jk(e3, t3) : e3 || t3;
        this.observer.onMasterTimerUpdate(i4);
      }
    }
  }
}, 80089: (e2, t2, i2) => {
  var r2;
  i2.d(t2, { s: () => r2 }), (function(e3) {
    e3.WIDEVINE = "com.widevine.alpha", e3.PLAYREADY = "com.microsoft.playready", e3.CLEARKEY = "org.w3.clearkey", e3.FAIRPLAY = "com.apple.fps.1_0";
  })(r2 || (r2 = {}));
}, 3680: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(80089);
  function a2(e3) {
    const t3 = { edef8ba979d64acea3c827dcd51d21ed: r2.s.WIDEVINE, "9a04f07998404286ab92e65be0885f95": r2.s.PLAYREADY, e2719d58a985b3c9781ab030af78d30e: r2.s.CLEARKEY, "94ce86fb07ff4f43adb893d2fa968ca2": r2.s.FAIRPLAY };
    let i3 = "";
    return e3.forEach((e4) => {
      let t4 = e4.toString(16);
      1 === t4.length && (t4 = "0" + t4), i3 += t4;
    }), t3[i3];
  }
}, 30691: (e2, t2, i2) => {
  function r2(e3) {
    let t3 = "";
    return e3.forEach((e4) => {
      t3 += String.fromCharCode(e4);
    }), t3 = btoa(t3), t3.replace(/=/g, "").replace(/\//g, "_").replace(/\+/g, "-");
  }
  i2.d(t2, { A: () => r2 });
}, 28090: (e2, t2, i2) => {
  i2.d(t2, { $8: () => I, CN: () => n, E9: () => m, F5: () => r2, Gd: () => b, IY: () => g, LX: () => P, NN: () => o, NX: () => y, Nz: () => h, Rj: () => f, S2: () => a2, Sw: () => A, W1: () => x, Wt: () => u, Wu: () => k, d6: () => s2, dQ: () => v, ff: () => p, hV: () => d2, mQ: () => l, xv: () => w, yd: () => c });
  const r2 = "loading", a2 = "loaded", s2 = "playing", n = "played", o = "paused", c = "stopped", d2 = "ended", h = "seeking", l = "seeked", u = "changing", f = "changed", p = "error", m = "time", g = "resume", v = "audioContextRunning", A = "firstAudioRendered", y = "firstVideoRendered", w = "streamUpdate", b = "progress", k = "volumeChange", x = "subtitleDelayChange", I = "qualityChange", P = "timeup";
}, 67593: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(26429), a2 = i2(42577), s2 = i2(95797);
  function n(e3) {
    return r2.USE_THREADS || s2.A.worker && e3 ? new MessageChannel() : new a2.A();
  }
}, 76750: (e2, t2, i2) => {
  function r2() {
    if ("function" == typeof MediaSource) return MediaSource;
    if ("function" == typeof ManagedMediaSource) return ManagedMediaSource;
    throw new Error("not support mse");
  }
  i2.d(t2, { A: () => r2 });
}, 47595: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(95797), a2 = i2(86834), s2 = i2(44690);
  function n() {
    let e3 = r2.A.offscreenCanvas;
    return (a2.A.safari && !a2.A.checkVersion(a2.A.version, "17", true) || s2.A.ios && !a2.A.checkVersion(s2.A.version, "17", true)) && (e3 = false), e3;
  }
}, 25115: (e2, t2, i2) => {
  i2.d(t2, { A: () => j });
  var r2 = i2(54001), a2 = i2.n(r2), s2 = i2(14686), n = i2(61499), o = i2(63939), c = i2(9599), d2 = i2(29170), h = i2(50932), l = i2(12264), u = i2(44315), f = i2(44527), p = i2(9705), m = i2(84149), g = i2(4624), v = i2(35336), A = i2(92174), y = i2(69765), w = (i2(77162), i2(71766)), b = i2(39148), k = i2(60120), x = i2(84290), I = i2(77231), P = i2(44328), S = i2(86932), T = i2(85224), M = i2(10333), B = i2(22343), R = i2(71517), _ = i2(37837), C = i2(86834), U = i2(85103), D = i2(13724), E = i2(43607), L = i2(65977), z = i2(76750), $ = i2(39381), F = i2(62815), N = i2(67659), V = i2(71762), O = i2(72703), q = i2(67672), W = i2(44690), H = i2(38724);
  const G = "src/avplayer/mse/MSEPipeline.ts";
  class j extends f.A {
    constructor() {
      super();
    }
    async syncToKeyframe(e3) {
      let t3 = true;
      if (e3.video) for (; ; ) {
        if (e3.video.backPacket = await this.pullAVPacket(e3.video, e3), e3.video.backPacket < 0) {
          e3.video.packetEnded = true, e3.video.backPacket = 0;
          break;
        }
        if (e3.audio && !e3.audio.packetEnded && (!e3.audio.backPacket || (0, P.Mr)(o.f[17](e3.audio.backPacket + 8), e3.audio.backPacket + 72, I.i0) < (0, P.Mr)(o.f[17](e3.video.backPacket + 8), e3.video.backPacket + 72, I.i0))) for (; ; ) {
          if (e3.audio.backPacket > 0 && e3.avpacketPool.release(e3.audio.backPacket), e3.audio.backPacket = await this.pullAVPacket(e3.audio, e3), e3.audio.backPacket < 0) {
            e3.audio.packetEnded = true, e3.audio.backPacket = 0;
            break;
          }
          if ((0, P.Mr)(o.f[17](e3.audio.backPacket + 8), e3.audio.backPacket + 72, I.i0) > (0, P.Mr)(o.f[17](e3.video.backPacket + 8), e3.video.backPacket + 72, I.i0)) break;
        }
        if (1 & o.f[15](e3.video.backPacket + 36) || 27 === o.f[15](e3.video.codecpar + 4) && F.KD(e3.video.backPacket, o.f[20](e3.video.codecpar + 12) ? 1 + (3 & $.r8(o.f[20](e3.video.codecpar + 12) + 4)) : 4) || 173 === o.f[15](e3.video.codecpar + 4) && N.KD(e3.video.backPacket, o.f[20](e3.video.codecpar + 12) ? 1 + (3 & $.r8(o.f[20](e3.video.codecpar + 12) + 21)) : 4)) break;
        t3 = false, e3.avpacketPool.release(e3.video.backPacket);
      }
      return t3;
    }
    getSourceOpenHandler(e3, t3 = BigInt(0)) {
      return async () => {
        var i3, r3;
        await this.syncToKeyframe(e3);
        let l2 = t3, u2 = t3;
        if (!e3.audio || e3.audio.backPacket || e3.audio.packetEnded || (e3.audio.backPacket = await this.pullAVPacket(e3.audio, e3), e3.audio.backPacket < 0 && (e3.audio.packetEnded = true, e3.audio.backPacket = 0)), e3.video && !e3.video.backPacket && e3.video.packetEnded && (e3.video.backPacket = await this.pullAVPacket(e3.video, e3), e3.video.backPacket < 0 && (e3.video.packetEnded = true, e3.video.backPacket = 0)), (null === (i3 = e3.audio) || void 0 === i3 ? void 0 : i3.backPacket) > 0 && (l2 = E.T9(l2, (0, P.Mr)(o.f[17](e3.audio.backPacket + 16), e3.audio.backPacket + 72, I.i0))), (null === (r3 = e3.video) || void 0 === r3 ? void 0 : r3.backPacket) > 0 && (u2 = E.T9(u2, (0, P.Mr)(o.f[17](e3.video.backPacket + 16), e3.video.backPacket + 72, I.i0))), e3.audio && e3.video && E.tn(l2 - u2) > 1e3) {
          if (u2 > l2) {
            const t4 = (0, P.k)(l2, I.i0, (0, d2.A)(e3.video.backPacket + 72, c.P));
            h.M[17](e3.video.backPacket + 48, o.f[17](e3.video.backPacket + 16) - t4), h.M[17](e3.video.backPacket + 16, t4), h.M[17](e3.video.backPacket + 8, t4), u2 = l2;
          } else if (l2 > u2 && 86018 === e3.audio.oformatContext.streams[0].codecpar.codecId && 2 === e3.audio.oformatContext.streams[0].codecpar.profile && e3.audio.oformatContext.streams[0].codecpar.chLayout.nbChannels < 3) {
            const t4 = e3.avpacketPool.alloc();
            (0, R.rN)(t4, e3.audio.backPacket);
            const i4 = 1 === e3.audio.oformatContext.streams[0].codecpar.chLayout.nbChannels ? new Uint8Array([0, 200, 0, 128, 35, 128]) : new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]), r4 = (0, _.sY)(i4.length);
            (0, s2.lW)(r4, i4.length, i4), (0, R.NX)(t4, r4, i4.length), h.M[17](t4 + 16, (0, P.k)(u2, I.i0, (0, d2.A)(t4 + 72, c.P))), h.M[17](t4 + 8, (0, P.k)(u2, I.i0, (0, d2.A)(t4 + 72, c.P)));
            const a3 = BigInt(1024e3) / BigInt(0 | e3.audio.oformatContext.streams[0].codecpar.sampleRate), n2 = Number(BigInt.asIntN(32, (l2 - u2) / a3));
            let f3 = o.f[17](t4 + 16) + (0, P.k)(a3, I.i0, (0, d2.A)(e3.audio.backPacket + 72, c.P));
            for (let i5 = 0; i5 < n2 - 1; i5++) {
              const i6 = e3.avpacketPool.alloc();
              (0, R.rN)(i6, t4), h.M[17](i6 + 16, f3), h.M[17](i6 + 8, f3), e3.audio.pullQueue.queue.push(i6), f3 += (0, P.k)(a3, I.i0, (0, d2.A)(e3.audio.backPacket + 72, c.P));
            }
            e3.audio.pullQueue.queue.push(e3.audio.backPacket), e3.audio.backPacket = t4, l2 = u2;
          }
        }
        const f2 = [];
        e3.audio && (e3.audio.track.setSourceBuffer(this.createSourceBuffer(e3.mediaSource, e3.audio.oformatContext.streams[0].codecpar[n.o9])), e3.audio.enableRawMpeg || (A.ho(e3.audio.oformatContext), A.bx(e3.audio.oformatContext)), f2.push(this.startMux(e3.audio, e3, E.T9(l2, u2)))), e3.video && (e3.video.track.setSourceBuffer(this.createSourceBuffer(e3.mediaSource, e3.video.oformatContext.streams[0].codecpar[n.o9])), e3.video.enableRawMpeg || (A.ho(e3.video.oformatContext), A.bx(e3.video.oformatContext)), f2.push(this.startMux(e3.video, e3, E.T9(l2, u2)))), await a2().all(f2);
        let p2 = false, m2 = false;
        e3.audio && (e3.audio.backPacket = await this.pullAVPacket(e3.audio, e3), e3.audio.backPacket > 0 ? (p2 = true, e3.audio.frontPacket = await this.pullAVPacket(e3.audio, e3), e3.audio.frontPacket > 0 ? e3.audio.frontBuffered = true : (e3.audio.frontPacket = 0, e3.audio.packetEnded = true)) : e3.audio.packetEnded = true, e3.audio.enableRawMpeg || e3.audio.oformatContext.ioWriter.flush(), e3.audio.track.addBuffer(e3.audio.bufferQueue.flush())), e3.video && (e3.video.backPacket = await this.pullAVPacket(e3.video, e3), e3.video.backPacket > 0 ? (m2 = true, e3.video.frontPacket = await this.pullAVPacket(e3.video, e3), e3.video.frontPacket > 0 ? e3.video.frontBuffered = true : (e3.video.frontPacket = 0, e3.video.packetEnded = true)) : e3.video.packetEnded = true, e3.video.enableRawMpeg || e3.video.oformatContext.ioWriter.flush(), e3.video.track.addBuffer(e3.video.bufferQueue.flush())), e3.audio && (p2 ? (this.createLoop(e3.audio, e3), e3.audio.loop.start()) : e3.audio.track.end()), e3.video && (m2 ? (this.createLoop(e3.video, e3), e3.video.loop.start()) : e3.video.track.end()), await new D.A(0.1);
        let g2 = 0;
        e3.audio ? g2 = e3.video ? Math.max(e3.audio.track.getBufferedStart(), e3.video.track.getBufferedStart()) : e3.audio.track.getBufferedStart() : e3.video && (g2 = e3.video.track.getBufferedStart()), e3.currentTimeNTP = (0, S.A)(), t3 > BigInt(0) ? (e3.currentTime = (0, U.yw)(t3), e3.controlIPCPort.notify("seek", { time: e3.currentTime })) : (C.A.safari || W.A.ios || g2 > 0.1 || e3.playRate > BigInt(100)) && (e3.currentTime = g2, e3.currentTimeNTP = (0, S.A)(), e3.controlIPCPort.notify("seek", { time: g2 }));
      };
    }
    getMimeType(e3) {
      let t3 = "";
      return 1 === o.f[15](e3) ? t3 = (0, T.A)(e3) : 0 === o.f[15](e3) && (t3 = (0, M.A)(e3)), t3 || g.h2("invalid stream", G, 445), t3;
    }
    createSourceBuffer(e3, t3) {
      return e3.addSourceBuffer(this.getMimeType(t3));
    }
    mixExtradata(e3, t3, i3) {
      const r3 = e3.oformatContext.streams[0].codecpar;
      r3.extradata && (0, _.Eb)(r3.extradata), r3.extradata = (0, _.sY)(i3), (0, s2.Mr)(r3.extradata, t3, i3), r3.extradataSize = i3, 27 === r3.codecId ? F.XC(e3.oformatContext.streams[0], (0, s2.s3)(t3, i3)) : 173 === r3.codecId && N.XC(e3.oformatContext.streams[0], (0, s2.s3)(t3, i3)), e3.track.changeMimeType(this.getMimeType(r3[n.o9]), e3.enableRawMpeg ? "sequence" : "segments");
      const a3 = new y.A({ fragmentMode: 1, fragment: true, fastOpen: true, movMode: 0, defaultBaseIsMoof: true, reverseSpsInAvcc: true, hasTfra: false });
      e3.oformatContext.oformat = a3, e3.timestampOffsetUpdated = false, e3.enableRawMpeg || (A.ho(e3.oformatContext), A.bx(e3.oformatContext));
    }
    checkEnableEncryption(e3, t3) {
      if (e3.oformatContext.streams[0].metadata.encryption) {
        const i3 = (0, R.fQ)(t3, 25);
        if (!i3 && !e3.ignoreEncryption || i3 && e3.ignoreEncryption) {
          e3.track.changeMimeType(this.getMimeType(e3.oformatContext.streams[0].codecpar[n.o9]), e3.enableRawMpeg ? "sequence" : "segments");
          const t4 = new y.A({ fragmentMode: 1, fragment: true, fastOpen: true, movMode: 0, defaultBaseIsMoof: true, reverseSpsInAvcc: true, ignoreEncryption: !i3, hasTfra: false });
          e3.ignoreEncryption = !i3, e3.oformatContext.oformat = t4, e3.timestampOffsetUpdated = false, e3.enableRawMpeg || (A.ho(e3.oformatContext), A.bx(e3.oformatContext));
        }
      }
    }
    async pullAVPacketInternal(e3, t3) {
      const i3 = await t3.request("pull");
      if (q.ai(i3) || (0, O.A)(i3)) return i3;
      {
        const t4 = e3.avpacketPool.alloc();
        return (0, V.r0)(i3, t4), t4;
      }
    }
    async pullAVPacket(e3, t3) {
      const i3 = e3.pullQueue;
      if (i3.ended && !i3.queue.length) return -1048576;
      const r3 = i3.queue.length ? i3.queue.shift() : await this.pullAVPacketInternal(t3, e3.pullIPC);
      if (r3 < 0) return i3.ended = true, -1048576;
      if (o.f[17](r3 + 16) < BigInt(0)) return r3;
      if (o.f[17](r3 + 16) < i3.lastDTS && g.R8("got packet with dts ".concat(o.f[17](r3 + 16), ", which is earlier then the last packet(").concat(i3.lastDTS, ")"), G, 557), h.M[17](r3 + 48, I.Dh), "audio" === e3.type && o.f[17](r3 + 16) > 0) h.M[17](r3 + 8, o.f[17](r3 + 16));
      else if ("video" === e3.type && !t3.isLive) if (1 & o.f[15](r3 + 36) && (27 === o.f[15](t3.video.codecpar + 4) && F.KD(r3, o.f[20](t3.video.codecpar + 12) ? 1 + (3 & $.r8(o.f[20](t3.video.codecpar + 12) + 4)) : 4) || 173 === o.f[15](t3.video.codecpar + 4) && N.KD(r3, o.f[20](t3.video.codecpar + 12) ? 1 + (3 & $.r8(o.f[20](t3.video.codecpar + 12) + 21)) : 4))) if (o.f[17](r3 + 8) < i3.lastPTS) {
        g.R8("got video packet with pts ".concat(o.f[17](r3 + 8), ", which is earlier then the last packet(").concat(i3.lastPTS, "), try to fix it!"), G, 594), h.M[17](r3 + 8, i3.lastPTS + (o.f[17](r3 + 16) - i3.lastDTS));
        const a3 = await this.pullAVPacketInternal(t3, e3.pullIPC);
        if (a3 < 0) i3.ended = true;
        else {
          i3.queue.push(a3);
          let s3 = o.f[17](a3 + 8);
          const n2 = o.f[17](a3 + 8);
          for (; ; ) {
            const r4 = await this.pullAVPacketInternal(t3, e3.pullIPC);
            if (r4 < 0) {
              i3.ended = true;
              break;
            }
            if (i3.queue.push(r4), o.f[17](r4 + 8) > n2) break;
            s3 = E.jk(s3, o.f[17](r4 + 8));
          }
          s3 < o.f[17](r3 + 8) && (i3.diff = o.f[17](r3 + 16) - i3.lastDTS);
        }
      } else i3.diff = BigInt(0);
      else h.M[17](r3 + 8, o.f[17](r3 + 8) + i3.diff);
      return o.f[17](r3 + 8) > i3.lastPTS && (i3.lastPTS = o.f[17](r3 + 8)), i3.lastDTS = o.f[17](r3 + 16), "audio" === e3.type && i3.useSampleRateTimeBase && (i3.frameCount === I.Dh ? (i3.frameCount = (0, P.Mr)(o.f[17](r3 + 16), r3 + 72, e3.oformatContext.streams[0].timeBase), h.M[17](r3 + 16, i3.frameCount), h.M[17](r3 + 8, i3.frameCount)) : (i3.frameCount = i3.frameCount + BigInt(0 | o.f[15](e3.codecpar + 144)), h.M[17](r3 + 16, i3.frameCount), h.M[17](r3 + 8, i3.frameCount)), (0, s2.Mr)(r3 + 72, e3.oformatContext.streams[0].timeBase[n.o9], 8)), r3;
    }
    writeAVPacket(e3, t3, i3 = false) {
      if (t3.enableRawMpeg) {
        if (!t3.timestampOffsetUpdated) {
          const i4 = (0, P.Mr)(o.f[17](e3 + 8), e3 + 72, I.i0);
          t3.track.updateTimestampOffset(Number(BigInt.asIntN(32, i4)) / 1e3), t3.timestampOffsetUpdated = true;
        }
        t3.bufferQueue.write((0, s2.s3)(o.f[20](e3 + 24), o.f[15](e3 + 28)).slice());
      } else {
        if ("video" === t3.type && 1 & o.f[15](e3 + 36)) {
          const i4 = (0, R.rU)(e3, 1);
          i4 && (function(e4, t4, i5, r3) {
            if (t4 !== r3) return true;
            let a3 = false;
            for (let r4 = 0; r4 < t4; r4++) if (o.f[2](e4 + r4) !== o.f[2](i5 + r4)) {
              a3 = true;
              break;
            }
            return a3;
          })(t3.oformatContext.streams[0].codecpar.extradata, t3.oformatContext.streams[0].codecpar.extradataSize, o.f[20](i4), 0 | o.f[25](i4 + 4)) && this.mixExtradata(t3, o.f[20](i4), 0 | o.f[25](i4 + 4));
        }
        this.checkEnableEncryption(t3, e3), A.XA(t3.oformatContext, e3), i3 && t3.oformatContext.ioWriter.flush();
      }
    }
    swap(e3, t3) {
      if (e3.backPacket && t3.avpacketPool.release(e3.backPacket), e3.backPacket = 0, !e3.frontBuffered) return false;
      e3.backPacket = e3.frontPacket, e3.frontPacket = 0, e3.frontBuffered = false;
      const i3 = (0, S.A)();
      return this.pullAVPacket(e3, t3).then((r3) => {
        if (r3 < 0) return e3.packetEnded = true, void (e3.frontPacket = 0);
        const a3 = (0, S.A)() - i3;
        a3 > 5 && (e3.startTimestamp += BigInt(Math.floor(a3))), e3.frontPacket = r3, e3.frontBuffered = true, e3.seekSync && (e3.seekSync(), e3.seekSync = null), e3.backPacket || this.swap(e3, t3);
      }), true;
    }
    createLoop(e3, t3) {
      e3.loop = new b.A(() => {
        const i3 = e3.track.getBufferedDuration(t3.currentTime + ((0, S.A)() - t3.currentTimeNTP) / 1e3);
        if (i3 > t3.maxBuffer * (t3.playRate > BigInt(100) ? Number(t3.playRate) / 100 : 1)) return e3.loop.emptyTask(), void this.checkWaiting(t3);
        if (!e3.backPacket) return void (e3.packetEnded && !e3.frontPacket ? (e3.ended = true, e3.loop.stop(), e3.enableRawMpeg || (A.dJ(e3.oformatContext), A.bX(e3.oformatContext)), e3.bufferQueue.size && e3.track.addBuffer(e3.bufferQueue.flush()), e3.track.end()) : e3.loop.emptyTask());
        let r3 = e3.backPacket;
        const a3 = (0, P.Mr)(o.f[17](r3 + 16), r3 + 72, I.i0);
        if (e3.lastDTS !== I.Dh && a3 - e3.lastDTS > 1e3 && (A.bX(e3.oformatContext), e3.startTimestamp -= a3 - e3.lastDTS), e3.lastDTS = a3, t3.enableJitterBuffer && (o.f[15](t3.stats + 244) ? o.f[15](t3.stats + 32) / o.f[15](t3.stats + 244) * 1e3 : o.f[15](t3.stats + 232) ? o.f[15](t3.stats + 120) / o.f[15](t3.stats + 232) * 1e3 : 0) <= o.f[15](t3.stats + 280) && this.setPlayRate(t3.taskId, 1), a3 * BigInt(100) / t3.playRate + e3.startTimestamp - BigInt(Math.floor((0, S.A)())) <= 0 || i3 < t3.minBuffer * (t3.playRate > BigInt(100) ? Number(t3.playRate) / 100 : 1)) {
          e3.track.isPaused() && e3.track.enqueue(), h.M[15](r3 + 32, e3.oformatContext.streams[0].index), this.writeAVPacket(r3, e3, true), e3.track.addBuffer(e3.bufferQueue.flush());
          const i4 = e3.oformatContext.streams[0].codecpar.codecType;
          if (0 === i4 ? (h.M[17](t3.stats + 144, o.f[17](t3.stats + 144) + BigInt(1)), h.M[17](t3.stats + 160, o.f[17](t3.stats + 160) + BigInt(1))) : 1 === i4 && (h.M[17](t3.stats + 56, o.f[17](t3.stats + 56) + BigInt(1)), h.M[17](t3.stats + 72, o.f[17](t3.stats + 72) + BigInt(1))), t3.playRate !== t3.targetRate && (e3.startTimestamp = BigInt(Math.floor((0, S.A)())) - a3 * BigInt(100) / t3.targetRate, t3.playRate = t3.targetRate), e3.packetEnded && !e3.frontPacket) return e3.ended = true, e3.loop.stop(), e3.enableRawMpeg || (A.dJ(e3.oformatContext), A.bX(e3.oformatContext)), e3.bufferQueue.size && e3.track.addBuffer(e3.bufferQueue.flush()), void e3.track.end();
          this.swap(e3, t3);
        } else e3.loop.emptyTask();
      }, 0, 0);
    }
    async startMux(e3, t3, i3 = BigInt(0)) {
      let r3, a3 = I.Dh, s3 = I.Dh, n2 = BigInt(0), c2 = t3.cacheDuration;
      const d3 = e3.oformatContext.streams[0].timeBase;
      for (e3.backPacket > 0 && (a3 = o.f[17](e3.backPacket + 16), s3 = o.f[17](e3.backPacket + 8), i3 > s3 && (c2 += i3 - (0, P.k)(a3, d3, I.i0)), h.M[15](e3.backPacket + 32, e3.oformatContext.streams[0].index), this.writeAVPacket(e3.backPacket, e3), t3.avpacketPool.release(e3.backPacket), e3.backPacket = 0); a3 === I.Dh || (0, P.k)(n2 - a3, d3, I.i0) < c2; ) {
        if (r3 = await this.pullAVPacket(e3, t3), r3 < 0) {
          e3.packetEnded = true;
          break;
        }
        n2 = o.f[17](r3 + 16), a3 === I.Dh && (a3 = n2, s3 = o.f[17](r3 + 8)), o.f[17](r3 + 8) < s3 && (s3 = o.f[17](r3 + 8)), h.M[15](r3 + 32, e3.oformatContext.streams[0].index), this.writeAVPacket(r3, e3), t3.avpacketPool.release(r3);
      }
      s3 !== I.Dh && e3.startPTS <= BigInt(0) && (e3.startPTS = s3), e3.pullQueue.diff = BigInt(0), t3.currentTimeNTP = (0, S.A)(), t3.currentTime = 0, e3.startTimestamp = BigInt(Math.floor((0, S.A)())) - (0, P.k)(n2, d3, I.i0) * BigInt(100) / t3.playRate;
    }
    resetResource(e3, t3) {
      e3.bufferQueue.flush(), e3.oformatContext.oformat.destroy(e3.oformatContext);
      const i3 = new y.A({ fragmentMode: 1, fragment: true, fastOpen: true, movMode: 0, defaultBaseIsMoof: true, reverseSpsInAvcc: true, hasTfra: false });
      e3.oformatContext.oformat = i3;
      const r3 = new k.A();
      r3.onQuotaExceededError = () => {
        e3.startTimestamp -= BigInt(100);
      }, r3.onEnded = () => {
        t3.audio && !t3.audio.ended || t3.video && !t3.video.ended || (t3.mediaSource.endOfStream(), g.pq("muxer ended, taskId: ".concat(t3.taskId), G, 921));
      }, e3.track = r3, e3.packetEnded = false, e3.ended = false, e3.startTimestamp = BigInt(0), e3.frontBuffered = false, e3.seekSync = null, e3.loop && (e3.loop.destroy(), e3.loop = null), e3.frontPacket && (t3.avpacketPool.release(e3.frontPacket), e3.frontPacket = 0), e3.backPacket && (t3.avpacketPool.release(e3.backPacket), e3.backPacket = 0), e3.pullQueue.ended = false, e3.pullQueue.index = 0, e3.pullQueue.frameCount = I.Dh, e3.pullQueue.lastPTS = BigInt(0), e3.pullQueue.lastDTS = BigInt(0), e3.pullQueue.diff = BigInt(0), e3.lastDTS = I.Dh;
    }
    async addStream(e3, t3, i3, r3, a3, s3, c2) {
      const d3 = this.tasks.get(e3);
      if (d3) {
        const l2 = (0, _.Gy)(168);
        (0, O.A)(i3) ? (0, w.Yi)(l2, i3) : (0, V.T8)(i3, l2);
        const f2 = new v.A(1048576), A2 = (0, u.fG)(), b2 = new y.A({ fragmentMode: 1, fragment: true, fastOpen: true, movMode: 0, defaultBaseIsMoof: true, reverseSpsInAvcc: true, hasTfra: false }), x2 = new B.A();
        f2.onFlush = (e4) => (x2.write(e4.slice()), 0), f2.onSeek = (e4) => x2.seek(e4) ? 0 : p.lh;
        const S2 = A2.createStream();
        (0, w.Yi)(S2.codecpar[n.o9], l2), S2.metadata = a3, 86017 === o.f[15](l2 + 4) && (S2.codecpar.codecTag = (0, L.A)(".mp3"));
        const T2 = 1 === o.f[15](l2) && o.f[15](l2 + 144) && !d3.isLive && (0, P.lb)(r3) > (0, P.lb)({ num: 1, den: o.f[15](l2 + 136) });
        T2 ? (S2.timeBase.den = o.f[15](l2 + 136), S2.timeBase.num = 1) : (S2.timeBase.den = r3.den, S2.timeBase.num = r3.num), A2.oformat = b2, A2.ioWriter = f2;
        const M2 = new k.A(), R2 = { type: "audio", codecpar: l2, ioWriter: f2, oformatContext: A2, oformat: b2, track: M2, bufferQueue: x2, streamIndex: t3, pullIPC: new m.Ay(c2), loop: null, frontPacket: 0, backPacket: 0, frontBuffered: false, startTimestamp: BigInt(0), packetEnded: false, ended: false, seekSync: null, startPTS: s3, lastDTS: I.Dh, pullQueue: { queue: [], index: 0, frameCount: I.Dh, diff: BigInt(0), lastPTS: BigInt(0), lastDTS: BigInt(0), ended: false, useSampleRateTimeBase: T2 }, enableRawMpeg: 86017 === o.f[15](l2 + 4) && !C.A.firefox, timestampOffsetUpdated: false, ignoreEncryption: false };
        M2.onQuotaExceededError = () => {
          R2.startTimestamp -= BigInt(100);
        }, M2.onEnded = () => {
          d3.audio && !d3.audio.ended || d3.video && !d3.video.ended || (d3.mediaSource.endOfStream(), g.pq("muxer ended, taskId: ".concat(d3.taskId), G, 1069));
        }, 1 === o.f[15](l2) ? (d3.audio = R2, h.M[15](d3.stats + 4, o.f[15](l2 + 136)), h.M[15](d3.stats, o.f[15](l2 + 116))) : 0 === o.f[15](l2) && (R2.type = "video", d3.video = R2, h.M[15](d3.stats + 84, o.f[15](l2 + 56)), h.M[15](d3.stats + 88, o.f[15](l2 + 60)), o.f[15](d3.stats + 84) * o.f[15](d3.stats + 88) > 8294400 && (C.A.safari || W.A.ios) && (d3.cacheDuration = E.T9(BigInt(3e3), d3.cacheDuration))), g.Yz("add stream ".concat(t3, ", taskId: ").concat(e3), G, 1089);
      } else g.h2("task not found", G, 1092);
    }
    async reAddStream(e3, t3, i3, r3, s3, c2) {
      const d3 = this.tasks.get(e3);
      if (d3) {
        const h2 = (0, _.Gy)(168);
        (0, O.A)(i3) ? (0, w.Yi)(h2, i3) : (0, V.T8)(i3, h2);
        const l2 = 1 === o.f[15](h2) ? d3.audio : d3.video;
        if (l2) {
          l2.bufferQueue.flush(), await new (a2())((e5) => {
            l2.track.removeAllBuffer(() => {
              e5();
            });
          }), l2.track.reset();
          const e4 = new y.A({ fragmentMode: 1, fragment: true, fastOpen: true, movMode: 0, defaultBaseIsMoof: true, reverseSpsInAvcc: true, hasTfra: false });
          l2.oformatContext.oformat = e4, l2.codecpar && (0, w.dn)(l2.codecpar), l2.codecpar = h2, l2.streamIndex = t3, l2.startPTS = c2;
          const i4 = l2.oformatContext.streams[0];
          (0, w.Yi)(i4.codecpar[n.o9], h2), i4.metadata = s3, 86017 === o.f[15](h2 + 4) && (i4.codecpar.codecTag = (0, L.A)(".mp3"));
          const u2 = 1 === o.f[15](h2) && o.f[15](h2 + 144) && !d3.isLive && (0, P.lb)(r3) > (0, P.lb)({ num: 1, den: o.f[15](h2 + 136) });
          u2 ? (i4.timeBase.den = o.f[15](h2 + 136), i4.timeBase.num = 1) : (i4.timeBase.den = r3.den, i4.timeBase.num = r3.num), l2.enableRawMpeg = 86017 === o.f[15](h2 + 4) && !C.A.firefox, l2.timestampOffsetUpdated = false, l2.pullQueue.useSampleRateTimeBase = u2;
          try {
            l2.track.changeMimeType(this.getMimeType(i4.codecpar[n.o9]), l2.enableRawMpeg ? "sequence" : "segments");
          } catch (e5) {
            if (!C.A.firefox || e5.message.indexOf("An attempt was made to use an object that is not") < 0) throw e5;
          }
          l2.enableRawMpeg || (A.ho(l2.oformatContext), A.bx(l2.oformatContext));
        } else (0, w.dn)(h2);
        g.Yz("readd stream ".concat(t3, ", taskId: ").concat(e3), G, 1195);
      } else g.h2("task not found", G, 1198);
    }
    async pause(e3) {
      const t3 = this.tasks.get(e3);
      var i3, r3, a3, s3;
      t3 ? (null !== (i3 = t3.audio) && void 0 !== i3 && i3.loop || null !== (r3 = t3.video) && void 0 !== r3 && r3.loop || g.h2("task has not played", G, 1206), t3.pausing = true, t3.pauseTimestamp = (0, S.A)(), null === (a3 = t3.audio) || void 0 === a3 || a3.loop.stop(), null === (s3 = t3.video) || void 0 === s3 || s3.loop.stop(), t3.fakePlayTimer && t3.fakePlayTimer.stop(), g.Yz("pause taskId: ".concat(e3), G, 1216)) : g.h2("task not found", G, 1219);
    }
    async unpause(e3) {
      const t3 = this.tasks.get(e3);
      var i3, r3;
      t3 ? (null !== (i3 = t3.audio) && void 0 !== i3 && i3.loop || null !== (r3 = t3.video) && void 0 !== r3 && r3.loop || g.h2("task has not played", G, 1227), t3.pausing = false, t3.seeking || (t3.audio && (t3.audio.startTimestamp += BigInt(Math.floor((0, S.A)() - t3.pauseTimestamp)), t3.audio.loop.start()), t3.video && (t3.video.startTimestamp += BigInt(Math.floor((0, S.A)() - t3.pauseTimestamp)), t3.video.loop.start())), t3.fakePlayTimer && t3.fakePlayTimer.start(), g.Yz("unpause taskId: ".concat(e3), G, 1245)) : g.h2("task not found", G, 1248);
    }
    async beforeSeek(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        var i3, r3;
        const s3 = [];
        t3.audio && (t3.audio.ended || t3.audio.frontBuffered || s3.push(new (a2())((e4) => {
          t3.audio.seekSync = e4;
        }))), t3.video && (t3.video.ended || t3.video.frontBuffered || s3.push(new (a2())((e4) => {
          t3.video.seekSync = e4;
        }))), await a2().all(s3), t3.seeking = true, null === (i3 = t3.audio) || void 0 === i3 || i3.loop.stop(), null === (r3 = t3.video) || void 0 === r3 || r3.loop.stop(), t3.audio && (t3.audio.enableRawMpeg || A.bX(t3.audio.oformatContext), t3.audio.bufferQueue.flush(), (C.A.safari || W.A.ios) && await new (a2())((e4) => {
          t3.audio.track.removeAllBuffer(() => {
            e4();
          });
        }), t3.audio.track.reset(), t3.audio.packetEnded = false, t3.audio.timestampOffsetUpdated = false, t3.audio.backPacket && (t3.avpacketPool.release(t3.audio.backPacket), t3.audio.backPacket = 0), t3.audio.frontPacket && (t3.avpacketPool.release(t3.audio.frontPacket), t3.audio.frontPacket = 0), t3.audio.pullQueue.queue.length && t3.audio.pullQueue.queue.forEach((e4) => {
          t3.avpacketPool.release(e4);
        }), t3.audio.pullQueue.queue.length = 0, t3.audio.pullQueue.ended = false, t3.audio.pullQueue.index = 0, t3.audio.pullQueue.lastPTS = BigInt(0), t3.audio.pullQueue.lastDTS = BigInt(0), t3.audio.pullQueue.diff = BigInt(0), t3.audio.pullQueue.frameCount = I.Dh, t3.audio.lastDTS = I.Dh), t3.video && (t3.video.enableRawMpeg || A.bX(t3.video.oformatContext), t3.video.bufferQueue.flush(), (C.A.safari || W.A.ios) && await new (a2())((e4) => {
          t3.video.track.removeAllBuffer(() => {
            e4();
          });
        }), t3.video.track.reset(), t3.video.packetEnded = false, t3.video.timestampOffsetUpdated = false, t3.video.backPacket && (t3.avpacketPool.release(t3.video.backPacket), t3.video.backPacket = 0), t3.video.frontPacket && (t3.avpacketPool.release(t3.video.frontPacket), t3.video.frontPacket = 0), t3.video.pullQueue.queue.length && t3.video.pullQueue.queue.forEach((e4) => {
          t3.avpacketPool.release(e4);
        }), t3.video.pullQueue.queue.length = 0, t3.video.pullQueue.ended = false, t3.video.pullQueue.index = 0, t3.video.pullQueue.diff = BigInt(0), t3.video.pullQueue.lastPTS = BigInt(0), t3.video.pullQueue.lastDTS = BigInt(0), t3.video.lastDTS = I.Dh), g.Yz("before seek end taskId: ".concat(e3), G, 1359);
      }
    }
    async afterSeek(e3, t3) {
      const i3 = this.tasks.get(e3);
      if (i3) {
        let r3 = t3, s3 = t3, n2 = await this.syncToKeyframe(i3);
        i3.audio && i3.audio.backPacket > 0 && ((!n2 || t3 < BigInt(0)) && (r3 = (0, P.Mr)(o.f[17](i3.audio.backPacket + 8), i3.audio.backPacket + 72, I.i0)), h.M[15](i3.audio.backPacket + 32, i3.audio.oformatContext.streams[0].index), this.writeAVPacket(i3.audio.backPacket, i3.audio), i3.avpacketPool.release(i3.audio.backPacket), i3.audio.backPacket = 0), i3.video && i3.video.backPacket > 0 && ((!n2 || t3 < BigInt(0)) && (s3 = (0, P.Mr)(o.f[17](i3.video.backPacket + 8), i3.video.backPacket + 72, I.i0)), h.M[15](i3.video.backPacket + 32, i3.video.oformatContext.streams[0].index), this.writeAVPacket(i3.video.backPacket, i3.video), i3.avpacketPool.release(i3.video.backPacket), i3.video.backPacket = 0);
        const c2 = E.T9(r3, s3);
        for (; ; ) {
          if (i3.audio && !i3.audio.packetEnded) {
            if (i3.audio.backPacket = await this.pullAVPacket(i3.audio, i3), i3.audio.backPacket < 0 && (i3.audio.packetEnded = true, i3.audio.backPacket = 0, !i3.video || i3.video.packetEnded)) break;
            if (r3 < BigInt(0) && (r3 = (0, P.Mr)(o.f[17](i3.audio.backPacket + 8), i3.audio.backPacket + 72, I.i0)), !((0, P.Mr)(o.f[17](i3.audio.backPacket + 8), i3.audio.backPacket + 72, I.i0) < c2 + i3.cacheDuration)) break;
            h.M[15](i3.audio.backPacket + 32, i3.audio.oformatContext.streams[0].index), this.writeAVPacket(i3.audio.backPacket, i3.audio), i3.audio.enableRawMpeg || A.bX(i3.audio.oformatContext), i3.audio.track.addBuffer(i3.audio.bufferQueue.flush()), i3.avpacketPool.release(i3.audio.backPacket), i3.audio.backPacket = 0;
          }
          if (i3.video && !i3.video.packetEnded) {
            if (i3.video.backPacket = await this.pullAVPacket(i3.video, i3), i3.video.backPacket < 0 && (i3.video.packetEnded = true, i3.video.backPacket = 0, !i3.audio || i3.audio.packetEnded)) break;
            if (!((0, P.Mr)(o.f[17](i3.video.backPacket + 8), i3.video.backPacket + 72, I.i0) < c2 + i3.cacheDuration)) break;
            h.M[15](i3.video.backPacket + 32, i3.video.oformatContext.streams[0].index), this.writeAVPacket(i3.video.backPacket, i3.video), i3.video.enableRawMpeg || A.bX(i3.video.oformatContext), i3.video.track.addBuffer(i3.video.bufferQueue.flush()), i3.avpacketPool.release(i3.video.backPacket), i3.video.backPacket = 0;
          }
        }
        const d3 = [];
        i3.audio && (i3.audio.enableRawMpeg || A.bX(i3.audio.oformatContext), d3.push(new (a2())((e4) => {
          i3.audio.track.addBuffer(i3.audio.bufferQueue.flush(), () => {
            e4();
          });
        }))), i3.video && (i3.video.enableRawMpeg || A.bX(i3.video.oformatContext), d3.push(new (a2())((e4) => {
          i3.video.track.addBuffer(i3.video.bufferQueue.flush(), () => {
            e4();
          });
        }))), await a2().all(d3), i3.audio && !i3.audio.packetEnded && (i3.audio.backPacket <= 0 && (i3.audio.backPacket = await this.pullAVPacket(i3.audio, i3), i3.audio.backPacket < 0 && (i3.audio.packetEnded = true, i3.audio.backPacket = 0)), i3.audio.packetEnded || (i3.audio.frontPacket = await this.pullAVPacket(i3.audio, i3), i3.audio.frontPacket < 0 ? (i3.audio.frontPacket = 0, i3.audio.packetEnded = true, i3.audio.frontBuffered = false) : (i3.audio.packetEnded = false, i3.audio.frontBuffered = true), i3.audio.startTimestamp = BigInt(Math.floor((0, S.A)())) - (r3 + i3.cacheDuration + (0, P.k)(i3.audio.startPTS, i3.audio.oformatContext.streams[0].timeBase, I.i0)) * BigInt(100) / i3.playRate, i3.pausing ? i3.pauseTimestamp = (0, S.A)() : i3.audio.loop.start())), i3.video && !i3.video.packetEnded && (i3.video.backPacket <= 0 && (i3.video.backPacket = await this.pullAVPacket(i3.video, i3), i3.video.backPacket < 0 && (i3.video.packetEnded = true, i3.video.backPacket = 0)), i3.video.packetEnded || (i3.video.frontPacket = await this.pullAVPacket(i3.video, i3), i3.video.frontPacket < 0 ? (i3.video.packetEnded = true, i3.video.frontBuffered = false, i3.video.frontPacket = 0) : (i3.video.packetEnded = false, i3.video.frontBuffered = true), i3.video.startTimestamp = BigInt(Math.floor((0, S.A)())) - (s3 + i3.cacheDuration + (0, P.k)(i3.video.startPTS, i3.video.oformatContext.streams[0].timeBase, I.i0)) * BigInt(100) / i3.playRate, i3.pausing ? i3.pauseTimestamp = (0, S.A)() : i3.video.loop.start())), await a2().all([new (a2())((e4) => {
          i3.audio ? i3.audio.track.insertEnqueueCallback(e4) : e4();
        }), new (a2())((e4) => {
          i3.video ? i3.video.track.insertEnqueueCallback(e4) : e4();
        })]);
        let l2 = 0, u2 = 0;
        i3.audio ? i3.video ? (l2 = Math.max(i3.audio.track.getBufferedStart(), i3.video.track.getBufferedStart()), u2 = Math.min(i3.audio.track.getBufferedEnd(), i3.video.track.getBufferedEnd())) : (l2 = i3.audio.track.getBufferedStart(), u2 = i3.audio.track.getBufferedEnd()) : i3.video && (l2 = i3.video.track.getBufferedStart(), u2 = i3.video.track.getBufferedEnd());
        let f2 = (0, U.yw)(c2);
        return f2 >= l2 && f2 <= u2 || (f2 = Math.abs(f2 - l2) > Math.abs(f2 - u2) ? u2 : l2), i3.currentTimeNTP = (0, S.A)(), i3.currentTime = f2, i3.seeking = false, g.Yz("after seek end, seekTime: ".concat(f2, " taskId: ").concat(e3), G, 1597), f2;
      }
      return 0;
    }
    async setPlayRate(e3, t3) {
      const i3 = this.tasks.get(e3);
      if (i3) {
        if (i3.enableJitterBuffer) {
          let e4 = o.f[15](i3.stats + 244) ? o.f[15](i3.stats + 32) / o.f[15](i3.stats + 244) * 1e3 : o.f[15](i3.stats + 232) ? o.f[15](i3.stats + 120) / o.f[15](i3.stats + 232) * 1e3 : 0;
          e4 && e4 <= o.f[15](i3.stats + 280) && (t3 = 1);
        }
        i3.targetRate = BigInt(Math.floor(Math.floor(100 * t3))), i3.enableJitterBuffer || (i3.audio && i3.audio.loop && i3.audio.loop.resetInterval(), i3.video && i3.video.loop && i3.video.loop.resetInterval());
      }
    }
    async restart(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) {
        t3.audio && this.resetResource(t3.audio, t3), t3.video && this.resetResource(t3.video, t3);
        const e4 = new ((0, z.A)())();
        e4.onsourceopen = this.getSourceOpenHandler(t3), t3.mediaSource = e4;
      }
    }
    async setCurrentTime(e3, t3) {
      const i3 = this.tasks.get(e3);
      i3 ? (i3.audio && i3.audio.track.removeBuffer(t3), i3.video && o.f[15](i3.stats + 92) > 0 && (i3.video.track.setMediaBufferMax(Math.max(i3.video.track.getMediaBufferMax(), Math.ceil(o.f[15](i3.stats + 92) / 1e3 * 1.5), 10)), i3.video.track.removeBuffer(t3)), i3.currentTime = t3, i3.currentTimeNTP = (0, S.A)()) : g.h2("task not found", G, 1670);
    }
    async checkWaiting(e3) {
      let t3 = -1, i3 = -1;
      const r3 = e3.currentTime + ((0, S.A)() - e3.currentTimeNTP) / 1e3;
      if (e3.audio) {
        const i4 = e3.audio.track.getSourceBuffer();
        i4 && 2 === i4.buffered.length && i4.buffered.end(1) - i4.buffered.start(1) >= e3.maxBuffer && i4.buffered.end(0) < r3 && e3.currentTime < i4.buffered.start(1) && (t3 = i4.buffered.start(1));
      }
      if (e3.video) {
        const t4 = e3.video.track.getSourceBuffer();
        t4 && 2 === t4.buffered.length && t4.buffered.end(1) - t4.buffered.start(1) >= e3.maxBuffer && t4.buffered.end(0) < r3 && e3.currentTime < t4.buffered.start(1) && (i3 = t4.buffered.start(1));
      }
      if (e3.audio && e3.video) {
        if (t3 > 0 && i3 > 0) {
          const r4 = Math.min(t3, i3);
          e3.currentTime = r4, e3.controlIPCPort.notify("seek", { time: r4 });
        }
      } else t3 > 0 ? (e3.currentTime = t3, e3.controlIPCPort.notify("seek", { time: t3 })) : i3 > 0 && (e3.currentTime = i3, e3.controlIPCPort.notify("seek", { time: i3 }));
    }
    async getMediaSource(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) return t3.mediaSource.handle ? (this.getMediaSource.transfer.push(t3.mediaSource.handle), t3.mediaSource.handle) : t3.mediaSource;
      g.h2("task not found", G, 1735);
    }
    async isManagedMediaSource(e3) {
      const t3 = this.tasks.get(e3);
      if (t3) return "function" == typeof ManagedMediaSource && t3.mediaSource instanceof ManagedMediaSource;
      g.h2("task not found", G, 1746);
    }
    createTask(e3, t3) {
      const i3 = new m.Ay(e3.controlPort), r3 = new ((0, z.A)())(), a3 = { ...e3, mediaSource: r3, audio: null, video: null, playRate: BigInt(100), targetRate: BigInt(100), pauseTimestamp: 0, seeking: false, pausing: false, controlIPCPort: i3, currentTime: 0, currentTimeNTP: 0, cacheDuration: BigInt(Math.floor(500)), avpacketPool: new x.A((0, d2.A)(e3.avpacketList, l.A), e3.avpacketListMutex), maxBuffer: e3.isLive ? 1 : 4, minBuffer: e3.isLive ? 0.5 : 2, visibilityHidden: false, fakePlayTimer: null };
      return this.tasks.set(e3.taskId, a3), r3.onsourceopen = this.getSourceOpenHandler(a3, t3), i3.on(m.Wo, (t4) => {
        "visibilitychange" === t4.method && this.setVisibilityHidden(e3.taskId, t4.params.visibilityHidden);
      }), 0;
    }
    async setVisibilityHidden(e3, t3) {
      const i3 = this.tasks.get(e3);
      i3 && (i3.visibilityHidden = t3, t3 ? i3.isLive && i3.video && !i3.audio && (i3.fakePlayTimer && i3.fakePlayTimer.destroy(), i3.fakePlayTimer = new H.A(() => {
        this.setCurrentTime(i3.taskId, i3.currentTime + ((0, S.A)() - i3.currentTimeNTP) / 1e3);
      }, 0, 1e3), i3.fakePlayTimer.start()) : i3.fakePlayTimer && (i3.fakePlayTimer.destroy(), i3.fakePlayTimer = null, i3.video.track.getBufferedTime() > (i3.isLive ? 2 : 4) && (this.setCurrentTime(i3.taskId, Math.max(i3.video.track.getBufferedEnd() - (i3.isLive ? 1 : 4), i3.video.track.getBufferedStart())), i3.controlIPCPort.notify("seek", { time: i3.currentTime }))));
    }
    async registerTask(e3, t3 = BigInt(0)) {
      return this.tasks.has(e3.taskId) ? p.lh : this.createTask(e3, t3);
    }
    async unregisterTask(e3) {
      const t3 = this.tasks.get(e3);
      t3 && (t3.audio && (t3.audio.loop && (await t3.audio.oformatContext.destroy(), t3.audio.loop.destroy()), t3.audio.pullIPC && t3.audio.pullIPC.destroy(), t3.audio.pullQueue.queue.length && (t3.audio.pullQueue.queue.forEach((e4) => {
        t3.avpacketPool.release(e4);
      }), t3.audio.pullQueue.queue.length = 0), t3.audio.codecpar && (0, w.dn)(t3.audio.codecpar)), t3.video && (t3.video.loop && (await t3.video.oformatContext.destroy(), t3.video.loop.destroy()), t3.video.pullIPC && t3.video.pullIPC.destroy(), t3.video.pullQueue.queue.length && (t3.video.pullQueue.queue.forEach((e4) => {
        t3.avpacketPool.release(e4);
      }), t3.video.pullQueue.queue.length = 0), t3.video.codecpar && (0, w.dn)(t3.video.codecpar)), t3.controlIPCPort && t3.controlIPCPort.destroy(), this.tasks.delete(e3));
    }
  }
}, 52277: (e2, t2, i2) => {
  i2.d(t2, { M: () => f });
  var r2, a2, s2 = i2(134), n = i2(80662), o = i2.n(n), c = i2(61499), d2 = i2(12085), h = i2(12264), l = i2(73783), u = i2(30128);
  class f {
    constructor() {
      (0, s2.A)(this, "avpacketList", void 0), (0, s2.A)(this, "avframeList", void 0), (0, s2.A)(this, "avpacketListMutex", void 0), (0, s2.A)(this, "avframeListMutex", void 0), (0, s2.A)(this, "stats", void 0);
    }
  }
  r2 = f.prototype, (a2 = new (o())()).set("avpacketList", { 0: h.A, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), a2.set("avframeList", { 0: h.A, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 12, 8: 0 }), a2.set("avpacketListMutex", { 0: l.eu, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 24, 8: 0 }), a2.set("avframeListMutex", { 0: l.eu, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 28, 8: 0 }), a2.set("stats", { 0: u.A, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 32, 8: 0 }), (0, d2.A)(r2, c.Og, true), (0, d2.A)(r2, c.dc, 8), (0, d2.A)(r2, c.g7, 392), (0, d2.A)(r2, c.JY, a2);
}, 57038: (e2, t2, i2) => {
  i2.d(t2, { A: () => m });
  var r2 = i2(134), a2 = i2(77658), s2 = i2(21194), n = i2(77334), o = i2(8284), c = i2(65749), d2 = i2(49963), h = i2(78040), l = i2(47924), u = i2(95335);
  const f = '.ASS-box{font-family:Arial;overflow:hidden;pointer-events:none;position:absolute}.ASS-dialogue{font-size:0;width:max-content;position:absolute;z-index:0;transform:translate(calc(var(--ass-align-h)*-1),calc(var(--ass-align-v)*-1));span{display:inline-block}[data-text]{display:inline-block;color:var(--ass-fill-color);font-size:calc(var(--ass-scale)*var(--ass-real-fs)*1px);line-height:calc(var(--ass-scale)*var(--ass-tag-fs)*1px);letter-spacing:calc(var(--ass-scale)*var(--ass-tag-fsp)*1px);filter:blur(calc(var(--ass-scale-stroke)*var(--ass-tag-blur)*(1-round(up,sin(var(--ass-tag-xbord))*sin(var(--ass-tag-xbord))))*(1-round(up,sin(var(--ass-tag-ybord))*sin(var(--ass-tag-ybord))))*1px))}[data-is="br"]+[data-is="br"]{height:calc(var(--ass-scale)*var(--ass-tag-fs)*1px/2)}}.ASS-dialogue[data-wrap-style="0"],.ASS-dialogue[data-wrap-style="3"]{text-wrap:balance;white-space:pre-wrap}.ASS-dialogue[data-wrap-style="1"]{word-break:break-word;white-space:pre-wrap}.ASS-dialogue[data-wrap-style="2"]{word-break:normal;white-space:pre}.ASS-dialogue[data-border-style="1"]{position:relative;&::before,&::after{content:attr(data-text);position:absolute;top:0;left:0;z-index:-1;filter:blur(calc(var(--ass-scale-stroke)*var(--ass-tag-blur)*1px))}&::before{color:var(--ass-shadow-color);-webkit-text-stroke:calc(var(--ass-scale-stroke)*var(--ass-border-width)*1px) var(--ass-shadow-color);transform:translate(calc(var(--ass-scale-stroke)*var(--ass-tag-xshad)*1px),calc(var(--ass-scale-stroke)*var(--ass-tag-yshad)*1px))}&::after{color:var(--ass-border-color);-webkit-text-stroke:calc(var(--ass-scale-stroke)*var(--ass-border-width)*1px) var(--ass-border-color)}&[data-stroke="svg"]{color:#000;&::before,&::after{opacity:0}}}@container style(--ass-tag-xbord:0) and style(--ass-tag-ybord:0){.ASS-dialogue[data-border-style="1"]::after{display:none}}@container style(--ass-tag-xshad:0) and style(--ass-tag-yshad:0){.ASS-dialogue[data-border-style="1"]::before{display:none}}.ASS-dialogue[data-border-style="3"]{padding:calc(var(--ass-scale-stroke)*var(--ass-tag-xbord)*1px)calc(var(--ass-scale-stroke)*var(--ass-tag-ybord)*1px);position:relative;filter:blur(calc(var(--ass-scale-stroke)*var(--ass-tag-blur)*1px));&::before,&::after{content:"";width:100%;height:100%;position:absolute;z-index:-1}&::before{background-color:var(--ass-shadow-color);left:calc(var(--ass-scale-stroke)*var(--ass-tag-xshad)*1px);top:calc(var(--ass-scale-stroke)*var(--ass-tag-yshad)*1px)}&::after{background-color:var(--ass-border-color);left:0;top:0}}@container style(--ass-tag-xbord:0) and style(--ass-tag-ybord:0){.ASS-dialogue [data-border-style="3"]::after{background-color:transparent}}@container style(--ass-tag-xshad:0) and style(--ass-tag-yshad:0){.ASS-dialogue [data-border-style="3"]::before{background-color:transparent}}.ASS-dialogue[data-rotate]{transform:perspective(312.5px) rotateY(calc(var(--ass-tag-fry) * 1deg)) rotateX(calc(var(--ass-tag-frx) * 1deg)) rotateZ(calc(var(--ass-tag-frz) * -1deg));&[data-text]{transform-style:preserve-3d;word-break:normal;white-space:nowrap}}.ASS-dialogue[data-scale],.ASS-dialogue[data-skew]{display:inline-block;transform:scale(var(--ass-tag-fscx), var(--ass-tag-fscy)) skew(calc(var(--ass-tag-fax)*1rad),calc(var(--ass-tag-fay) * 1rad));transform-origin:var(--ass-align-h) var(--ass-align-v)}.ASS-fix-font-size{font-family:Arial;line-height:normal;width:0;height:0;position:absolute;visibility:hidden;overflow:hidden;span{position:absolute}}.ASS-clip-area{width:100%;height:100%;position:absolute;top:0;left:0}.ASS-effect-area{position:absolute;display:flex;width:100%;height:fit-content;overflow:hidden;mask-composite:intersect;&[data-effect="banner"]{flex-direction:column;height:100%}.ASS-dialogue{position:static;transform:none}}', p = { Name: "Default", Fontname: "Arial", Fontsize: "16", PrimaryColour: "&Hffffff", SecondaryColour: "&Hffffff", OutlineColour: "&H0", BackColour: "&H0", Bold: "0", Italic: "0", Underline: "0", StrikeOut: "0", ScaleX: "100", ScaleY: "100", Spacing: "0", Angle: "0", BorderStyle: "1", Outline: "1", Shadow: "0", Alignment: "2", MarginL: "10", MarginR: "10", MarginV: "10", Encoding: "0" };
  class m {
    constructor(e3, t3 = { container: e3.parentNode }) {
      if ((0, r2.A)(this, "store", void 0), (0, r2.A)(this, "resampling_", "video_height"), (0, r2.A)(this, "resize_", void 0), (0, r2.A)(this, "options", void 0), this.options = u.X$({}, t3), this.store = { video: e3, box: document.createElement("div"), svg: (0, n.An)("svg"), defs: (0, n.An)("defs"), observer: null, scale: 1, width: 0, height: 0, scriptRes: { width: t3.videoWidth || e3.clientWidth, height: t3.videoHeight || e3.clientHeight }, layoutRes: { width: t3.videoWidth || e3.clientWidth, height: t3.videoHeight || e3.clientHeight }, resampledRes: { width: 0, height: 0 }, sbas: true, styles: null, space: [], actives: [], delay: 0, index: 0, dialogues: [] }, null == t3.videoWidth && (e3.videoWidth = t3.videoWidth), null == t3.videoHeight && (e3.videoHeight = t3.videoHeight), !t3.container) throw new Error("Missing container.");
      this.resize_ = (0, s2.By)(this, this.store), this.updateHeader(t3.header), a2.Y && t3.container.append(a2.Y);
      const { svg: i3, defs: o2, scriptRes: c2, box: d3 } = this.store;
      i3.setAttributeNS(null, "viewBox", "0 0 ".concat(c2.width, " ").concat(c2.height)), i3.append(o2), t3.container.append(i3), d3.className = "ASS-box", t3.container.append(d3), (function(e4) {
        const t4 = e4.getRootNode() || document;
        let i4 = t4 instanceof Document;
        !i4 && "object" == typeof documentPictureInPicture && documentPictureInPicture.window && (i4 = t4 === documentPictureInPicture.window.document);
        const r3 = i4 ? t4.head : t4;
        let a3 = r3.querySelector("#ASS-global-style");
        a3 || (a3 = document.createElement("style"), a3.type = "text/css", a3.id = "ASS-global-style", a3.append(document.createTextNode(f)), r3.append(a3)), document.head.querySelector("#ASS-global-style") || (a3 = document.createElement("style"), a3.type = "text/css", a3.id = "ASS-global-style", a3.append(document.createTextNode(f)), document.head.append(a3));
      })(t3.container), this.resampling_ = t3.resampling || "video_height";
      const h2 = new ResizeObserver(this.resize.bind(this));
      return h2.observe(e3), this.store.observer = h2, this;
    }
    framing(e3) {
      const t3 = (0, l.U)(e3, this.store);
      t3.animations && t3.animations.forEach((e4) => {
        e4.currentTime = Number(this.store.video.currentTime) - 1e3 * t3.start;
      }), (0, n.MA)(t3, "play"), t3.__dialogue = e3, this.store.actives.push(t3);
    }
    updateHeader(e3) {
      if (e3) {
        const { info: t3, width: i3, height: r3, styles: a3 } = (0, c.wE)(e3, { defaultStyle: p });
        this.store.sbas = /yes/i.test(t3.ScaledBorderAndShadow), this.store.layoutRes = { width: +t3.LayoutResX || this.options.videoWidth || this.store.video.clientWidth, height: +t3.LayoutResY || this.options.videoHeight || this.store.video.clientHeight }, this.store.scriptRes = { width: i3 || this.store.layoutRes.width, height: r3 || this.store.layoutRes.height }, this.store.styles = a3;
      } else this.store.styles = (0, h.W)({ info: { WrapStyle: "" }, style: [], defaultStyle: p }), this.store.scriptRes = { width: 384, height: 288 };
      this.resize_(), this.options.header = e3;
    }
    updateVideoResolution(e3, t3) {
      if (this.options.header) {
        const { info: i3, width: r3, height: a3 } = (0, c.wE)(this.options.header, { defaultStyle: p });
        this.store.layoutRes = { width: +i3.LayoutResX || e3 || this.store.video.clientWidth, height: +i3.LayoutResY || t3 || this.store.video.clientHeight }, this.store.scriptRes = { width: r3 || this.store.layoutRes.width, height: a3 || this.store.layoutRes.height };
      } else this.store.layoutRes = { width: e3, height: t3 };
    }
    render(e3) {
      if (1 === e3.type) {
        var t3;
        e3.Start = Number(e3.Start) / 1e3, e3.End = Number(e3.End) / 1e3;
        const i3 = (0, d2.b)({ styles: this.store.styles, dialogues: [e3] })[0];
        u.X$(i3, { effect: ["banner", "scroll up", "scroll down"].includes(null === (t3 = i3.effect) || void 0 === t3 ? void 0 : t3.name) ? i3.effect : null, d: "ASS-".concat((0, o.A)()), align: { h: (i3.alignment + 2) % 3, v: Math.trunc((i3.alignment - 1) / 3) } }), this.framing(i3);
      }
    }
    clear(e3) {
      const t3 = Number(e3) / 1e3;
      for (let e4 = this.store.actives.length - 1; e4 >= 0; e4 -= 1) {
        const i3 = this.store.actives[e4], { end: r3 } = i3;
        r3 < t3 && (i3.$div.remove(), this.store.actives.splice(e4, 1));
      }
    }
    clearAll() {
      for (let e3 = this.store.actives.length - 1; e3 >= 0; e3 -= 1) this.store.actives[e3].$div.remove();
      this.store.actives.length = 0, this.store.space.length = 0;
    }
    resize() {
      const e3 = this.store.actives.slice();
      this.resize_();
      for (let t3 = 0; t3 < e3.length; t3++) this.framing(e3[t3].__dialogue);
    }
    destroy() {
      const { video: e3, box: t3, svg: i3, observer: r3 } = this.store;
      return (0, s2.IU)(this.store), a2.Y && a2.Y.remove(), i3.remove(), t3.remove(), r3.unobserve(e3), this.store.styles = {}, this;
    }
    show() {
      return this.store.box.style.visibility = "visible", this;
    }
    hide() {
      return this.store.box.style.visibility = "hidden", this;
    }
    get resampling() {
      return this.resampling_;
    }
    set resampling(e3) {
      e3 !== this.resampling_ && /^(video|script)_(width|height)$/.test(e3) && (this.resampling_ = e3, this.resize());
    }
  }
}, 40031: (e2, t2, i2) => {
  i2.d(t2, { A: () => P });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(12264), o = i2(29170), c = i2(63939), d2 = (i2(9599), i2(50932)), h = i2(53616), l = i2(84149), u = i2(39148), f = i2(4624), p = i2(57038), m = i2(50011), g = i2(14686), v = i2(51785), A = i2(84290), y = i2(44328), w = i2(77231), b = i2(95335), k = i2(71517);
  const x = "src/avplayer/subtitle/SubtitleRender.ts", I = [{ reg: /<i>/g, value: "{\\i1}" }, { reg: /<\/i>/g, value: "{\\i0}" }, { reg: /<b>/g, value: "{\\b1}" }, { reg: /<\/b>/g, value: "{\\b0}" }, { reg: /<u>/g, value: "{\\u1}" }, { reg: /<\/u>/g, value: "{\\u0}" }, { reg: /{/g, value: "\\{" }, { reg: /}/g, value: "\\}" }, { reg: /&gt;/g, value: ">" }, { reg: /&lt;/g, value: "<" }, { reg: /&lrm;/g, value: "" }, { reg: /&rlm;/g, value: "" }, { reg: /&amp;/g, value: "&" }, { reg: /&nbsp;/g, value: "\\h" }, { reg: /(<br\s*\/?>)|\n>/g, value: "\\N" }];
  class P {
    constructor(e3) {
      (0, r2.A)(this, "decoder", void 0), (0, r2.A)(this, "loop", void 0), (0, r2.A)(this, "demuxer2SubtitleRenderChannels", void 0), (0, r2.A)(this, "leftPorts", void 0), (0, r2.A)(this, "currentPort", void 0), (0, r2.A)(this, "render", void 0), (0, r2.A)(this, "queue", void 0), (0, r2.A)(this, "ended", void 0), (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "pulling", void 0), (0, r2.A)(this, "formats", void 0), (0, r2.A)(this, "avpacketPool", void 0), (0, r2.A)(this, "delay", void 0), (0, r2.A)(this, "enable", void 0), this.options = b.X$({}, e3), this.ended = false, this.pulling = false, this.queue = [], this.delay = BigInt(0), this.demuxer2SubtitleRenderChannels = new (s2())(), this.leftPorts = new (s2())(), e3.avpacketList && (this.avpacketPool = new A.A((0, o.A)(e3.avpacketList, n.A), e3.avpacketListMutex)), this.createDecoder(), this.render = new p.A(this.options.dom, { header: this.getAssHeader(this.options.codecpar), container: this.options.container, videoWidth: this.options.videoWidth, videoHeight: this.options.videoHeight }), this.loop = new u.A(() => {
        !this.queue.length && this.ended && this.loop.stop(), this.queue.length < 6 && !this.ended && this.pull();
        const e4 = this.options.getCurrentTime() - this.delay;
        for (this.render.clear(e4); this.queue.length; ) {
          const t3 = this.queue[0];
          if (t3.Start > e4) break;
          t3.End > e4 && this.render.render(t3), this.queue.shift();
        }
      }, 0, 50, false);
    }
    getAssHeader(e3) {
      let t3 = "";
      if (94230 === c.f[15](e3 + 4) && c.f[15](e3 + 16)) {
        t3 = m.decode((0, g.s3)(c.f[20](e3 + 12), c.f[15](e3 + 16)));
        const i3 = t3.split(/\r?\n/);
        let r3 = false;
        for (let e4 = 0; e4 < i3.length; e4++) {
          const t4 = i3[e4].trim();
          "[Events]" === t4 && (r3 = true), /^Format:/.test(t4) && r3 && (this.formats = v.Bp(t4.trim()));
        }
      }
      return t3;
    }
    createDecoder() {
      this.decoder && this.decoder.close(), this.decoder = new h.A({ onReceiveSubtitle: (e3) => {
        for (let t3 = 0; t3 < e3.rects.length; t3++) {
          const i3 = e3.rects[t3];
          if (3 === i3.type) {
            const t4 = v.wj(this.formats, i3.text);
            null == t4.Start && (t4.Start = e3.pts), null == t4.End && (t4.End = e3.pts + e3.duration), this.queue.push(t4);
          } else 2 === i3.type ? this.queue.push(this.webvtt2AssEvent(i3.text, e3.pts, e3.pts + e3.duration)) : this.queue.push(this.text2AssEvent(i3.text, e3.pts, e3.pts + e3.duration));
        }
      } }), this.decoder.open(this.options.codecpar);
    }
    text2AssEvent(e3, t3, i3) {
      return { type: 1, ReadOrder: 0, Layer: 0, Start: t3, End: i3, Style: "Default", Name: "", MarginL: 0, MarginR: 0, MarginV: 0, Text: { raw: e3, combined: e3, parsed: [{ tags: [], text: e3, drawing: [] }] } };
    }
    webvtt2AssEvent(e3, t3, i3) {
      for (let t4 = 0; t4 < I.length; t4++) e3 = e3.replace(I[t4].reg, I[t4].value);
      return this.text2AssEvent(e3, t3, i3);
    }
    async pull() {
      if (this.pulling && !this.ended) return;
      this.pulling = true;
      const e3 = this.currentPort, t3 = await this.leftPorts.get(this.currentPort).request("pull");
      var i3;
      if (-1048576 === t3) f.Yz("SubtitleRender end", x, 290), null === (i3 = this.decoder) || void 0 === i3 || i3.flush(), this.ended = true;
      else if (t3 < 0) f.Yz("SubtitleRender pull avpacket error, ret: ".concat(t3), x, 295), this.ended = true;
      else if (this.loop && e3 === this.currentPort) {
        d2.M[17](t3 + 8, (0, y.Mr)(c.f[17](t3 + 8), t3 + 72, w.i0)), d2.M[17](t3 + 48, (0, y.Mr)(c.f[17](t3 + 48), t3 + 72, w.i0));
        const e4 = this.decoder.decode(t3);
        this.avpacketPool ? this.avpacketPool.release(t3) : (0, k.Qe)(t3), e4 < 0 && (f.Yz("SubtitleRender decode avpacket error, ret: ".concat(t3), x, 309), this.ended = true);
      } else this.avpacketPool ? this.avpacketPool.release(t3) : (0, k.Qe)(t3);
      this.pulling = false;
    }
    getDemuxerPort(e3) {
      if (this.demuxer2SubtitleRenderChannels.has(e3)) return this.demuxer2SubtitleRenderChannels.get(e3).port1;
      const t3 = new MessageChannel(), i3 = new l.Ay(t3.port2);
      return this.demuxer2SubtitleRenderChannels.set(e3, t3), this.leftPorts.set(e3, i3), t3.port1;
    }
    start() {
      this.loop.isStarted() || this.loop.start(), this.ended = false;
    }
    stop() {
      this.loop.stop(), this.render.clearAll();
    }
    pause() {
      this.loop.stop();
    }
    reset() {
      this.queue.length = 0, this.render.clearAll();
    }
    reopenDecoder(e3) {
      this.options.codecpar = e3, this.createDecoder(), this.render.updateHeader(this.getAssHeader(e3));
    }
    updateVideoResolution(e3, t3) {
      e3 === this.options.videoWidth && t3 === this.options.videoHeight || (this.render.updateVideoResolution(e3, t3), this.options.videoWidth = e3, this.options.videoHeight = t3);
    }
    setDemuxTask(e3) {
      this.currentPort !== e3 && (this.pulling = false), this.currentPort = e3;
    }
    destroy() {
      this.loop.destroy(), this.loop = null, this.leftPorts.clear(), this.demuxer2SubtitleRenderChannels.clear(), this.queue.length = 0, this.render.destroy(), this.render = null, this.decoder.close(), this.decoder = null;
    }
    setDelay(e3) {
      this.delay = e3;
    }
    getDelay() {
      return this.delay;
    }
  }
}, 27089: (e2, t2, i2) => {
  i2.d(t2, { A: () => b });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(61499), o = i2(52277), c = i2(74503), d2 = i2(94300), h = i2(67672), l = i2(4624), u = i2(18667), f = i2(59377), p = i2(56024), m = i2(71517), g = i2(73783), v = i2(84149), A = i2(54058), y = i2(95335);
  const w = "src/avplayer/worker/AudioPipeline.ts";
  class b {
    constructor() {
      (0, r2.A)(this, "decoder", void 0), (0, r2.A)(this, "render", void 0), (0, r2.A)(this, "globalDataMap", void 0), (0, r2.A)(this, "controlPort", void 0), (0, r2.A)(this, "timer", void 0), this.decoder = new u.A(), this.render = new f.A(), this.globalDataMap = new (s2())();
    }
    createGlobalData(e3) {
      const t3 = (0, c.A)(o.M);
      return g.Ts(t3[n.o9] + 24), g.Ts(t3[n.o9] + 28), this.globalDataMap.set(e3, t3), t3;
    }
    releaseGlobalData(e3) {
      e3.avframeList.clear((e4) => {
        (0, p.to)(e4);
      }, 20), e3.avpacketList.clear((e4) => {
        (0, m.Up)(e4);
      }, 20), g.zr(e3[n.o9] + 24), g.zr(e3[n.o9] + 28), (0, d2.A)(e3);
    }
    async init(e3) {
      this.controlPort = new v.Ay(e3);
      let t3 = 0;
      this.timer = new A.A(() => {
        t3++;
        const e4 = [];
        this.globalDataMap.forEach((i3, r3) => {
          const a3 = i3.stats;
          e4.push({ taskId: r3, stats: { audioFrameDecodeCount: a3.audioFrameDecodeCount, audioFrameDecodeIntervalMax: a3.audioFrameDecodeIntervalMax, audioDecodeErrorPacketCount: a3.audioDecodeErrorPacketCount, audioFrameRenderCount: a3.audioFrameRenderCount, audioFrameRenderIntervalMax: a3.audioFrameRenderIntervalMax, sampleRate: a3.sampleRate, channels: a3.channels, audioFrameSize: a3.audioFrameSize, audioCurrentTime: a3.audioCurrentTime } }), 2 === t3 && (a3.audioFrameDecodeIntervalMax = 0, a3.audioFrameRenderIntervalMax = 0);
        }), this.controlPort.notify("stats", { data: e4 }), 2 === t3 && (t3 = 0);
      }, 0, 500), this.controlPort.on(v.Wo, (e4) => {
        if ("stats" === e4.method) {
          const t4 = e4.params.data;
          for (let e5 = 0; e5 < t4.length; e5++) {
            const i3 = this.globalDataMap.get(t4[e5].taskId).stats;
            i3 && (y.__(t4[e5].stats, (e6, t5) => {
              i3[t5] = e6;
            }), i3.jitterBuffer.min = t4[e5].jitterBuffer.min, i3.jitterBuffer.max = t4[e5].jitterBuffer.max);
          }
        }
      }), this.timer.start();
    }
    async invoke(e3, t3, i3) {
      const r3 = this;
      function a3(e4, t4, i4) {
        if ("unregisterTask" === e4) {
          const e5 = r3.globalDataMap.get(t4[0]);
          e5 && (r3.releaseGlobalData(e5), r3.globalDataMap.delete(t4[0]));
        } else if ("clear" === e4) r3.globalDataMap.forEach((e5) => {
          r3.releaseGlobalData(e5);
        }), r3.globalDataMap.clear();
        else if ("syncSeekTime" === e4) {
          const e5 = r3.globalDataMap.get(t4[0]);
          if (e5) return e5.stats.audioCurrentTime;
        }
        return i4;
      }
      if ("decoder" === e3) {
        if ("registerTask" === t3) {
          const e4 = this.globalDataMap.get(i3[0].taskId) || this.createGlobalData(i3[0].taskId);
          i3[0].stats = e4[n.o9] + 32, i3[0].avpacketList = e4[n.o9], i3[0].avpacketListMutex = e4[n.o9] + 24, i3[0].avframeList = e4[n.o9] + 12, i3[0].avframeListMutex = e4[n.o9] + 28;
        }
        if (h.Pc(this.decoder[t3])) return this.decoder[t3](...i3).then((e4) => a3(t3, i3, e4));
        l.h2("method ".concat(t3, " not found"), w, 179);
      } else {
        if ("registerTask" === t3) {
          const e4 = this.globalDataMap.get(i3[0].taskId) || this.createGlobalData(i3[0].taskId);
          i3[0].stats = e4[n.o9] + 32, i3[0].avframeList = e4[n.o9] + 12, i3[0].avframeListMutex = e4[n.o9] + 28;
        }
        if (h.Pc(this.render[t3])) return this.render[t3](...i3).then((e4) => a3(t3, i3, e4));
        l.h2("method ".concat(t3, " not found"), w, 197);
      }
    }
    async setLogLevel(e3) {
      l.V$(e3);
    }
  }
}, 40097: (e2, t2, i2) => {
  i2.d(t2, { A: () => u });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(30128), o = i2(29170), c = i2(88506), d2 = i2(27089), h = i2(84149), l = i2(95335);
  class u {
    constructor() {
      (0, r2.A)(this, "thread", void 0), (0, r2.A)(this, "controlMessageChannel", void 0), (0, r2.A)(this, "controlPort", void 0), (0, r2.A)(this, "statsMap", void 0), this.statsMap = new (s2())();
    }
    async run() {
      this.thread = await (0, c.pt)(d2.A, { name: "AudioPipeline", dispatchToWorker: true }, 27089).run(), this.controlMessageChannel = new MessageChannel(), this.controlPort = new h.Ay(this.controlMessageChannel.port1), this.controlPort.on(h.Wo, (e3) => {
        if ("stats" === e3.method) {
          const t3 = e3.params.data, i3 = [];
          for (let e4 = 0; e4 < t3.length; e4++) {
            const r3 = this.statsMap.get(t3[e4].taskId);
            r3 && (l.__(t3[e4].stats, (e5, t4) => {
              r3[t4] = e5;
            }), i3.push({ taskId: t3[e4].taskId, stats: { audioPacketQueueLength: r3.audioPacketQueueLength, audioEncodeFramerate: r3.audioEncodeFramerate, videoPacketQueueLength: r3.videoPacketQueueLength }, jitterBuffer: { min: r3.jitterBuffer.min, max: r3.jitterBuffer.max } }));
          }
          this.controlPort.notify("stats", { data: { stats: i3 } });
        }
      }), await this.thread.init.transfer(this.controlMessageChannel.port2).invoke(this.controlMessageChannel.port2);
    }
    async destroy() {
      await (0, c.nx)(this.thread), this.thread = null;
    }
    setLogLevel(e3) {
      this.thread.setLogLevel(e3);
    }
    transformResult(e3, t3, i3) {
      if ("unregisterTask" === e3) this.statsMap.delete(t3[0]);
      else if ("clear" === e3) this.statsMap.clear();
      else if ("registerTask" === e3) this.statsMap.set(t3[0].taskId, (0, o.A)(t3[0].stats, n.A));
      else if ("syncSeekTime" === e3) {
        const e4 = this.statsMap.get(t3[0]);
        if (e4) return void (e4.audioCurrentTime = i3);
      }
      return i3;
    }
    get AudioDecodePipeline() {
      const e3 = this;
      return new Proxy({}, { get(t3, i3, r3) {
        if (t3[i3]) return t3[i3];
        const a3 = async function(...t4) {
          return e3.thread.invoke("decoder", i3, t4).then((r4) => e3.transformResult(i3, t4, r4));
        };
        return a3.transfer = function(...t4) {
          return { invoke: async function(...r4) {
            return e3.thread.invoke.transfer(...t4).invoke("decoder", i3, r4).then((t5) => e3.transformResult(i3, r4, t5));
          } };
        }, t3[i3] = a3, t3[i3];
      } });
    }
    get AudioRenderPipeline() {
      const e3 = this;
      return new Proxy({}, { get(t3, i3, r3) {
        if (t3[i3]) return t3[i3];
        const a3 = async function(...t4) {
          return e3.thread.invoke("render", i3, t4).then((r4) => e3.transformResult(i3, t4, r4));
        };
        return a3.transfer = function(...t4) {
          return { invoke: async function(...r4) {
            return e3.thread.invoke.transfer(...t4).invoke("render", i3, r4).then((t5) => e3.transformResult(i3, r4, t5));
          } };
        }, t3[i3] = a3, t3[i3];
      } });
    }
  }
}, 59016: (e2, t2, i2) => {
  i2.d(t2, { A: () => b });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(61499), o = i2(52277), c = i2(74503), d2 = i2(94300), h = i2(87243), l = i2(72480), u = i2(67672), f = i2(4624), p = i2(71762), m = i2(56024), g = i2(71517), v = i2(73783), A = i2(84149), y = i2(54058);
  const w = "src/avplayer/worker/IODemuxPipeline.ts";
  class b {
    constructor() {
      (0, r2.A)(this, "ioThread", void 0), (0, r2.A)(this, "demuxPipeline", void 0), (0, r2.A)(this, "globalDataMap", void 0), (0, r2.A)(this, "controlPort", void 0), (0, r2.A)(this, "timer", void 0), this.ioThread = new h.A(), this.demuxPipeline = new l.A(), this.globalDataMap = new (s2())();
    }
    createGlobalData(e3) {
      const t3 = (0, c.A)(o.M);
      return v.Ts(t3[n.o9] + 24), v.Ts(t3[n.o9] + 28), this.globalDataMap.set(e3, t3), t3;
    }
    releaseGlobalData(e3) {
      e3.avframeList.clear((e4) => {
        (0, m.to)(e4);
      }, 20), e3.avpacketList.clear((e4) => {
        (0, g.Up)(e4);
      }, 20), v.zr(e3[n.o9] + 24), v.zr(e3[n.o9] + 28), (0, d2.A)(e3);
    }
    async init(e3) {
      this.controlPort = new A.Ay(e3), this.timer = new y.A(() => {
        const e4 = [];
        this.globalDataMap.forEach((t3, i3) => {
          const r3 = t3.stats, a3 = { bufferReceiveBytes: r3.bufferReceiveBytes }, s3 = this.demuxPipeline.tasks.get(i3);
          s3 && (s3.formatContext.getStreamByMediaType(1) && (a3.audioPacketQueueLength = r3.audioPacketQueueLength, a3.audioPacketCount = r3.audioPacketCount, a3.audioPacketBytes = r3.audioPacketBytes, a3.audioEncodeFramerate = r3.audioEncodeFramerate), s3.formatContext.getStreamByMediaType(0) && (a3.videoPacketQueueLength = r3.videoPacketQueueLength, a3.videoPacketCount = r3.videoPacketCount, a3.videoPacketBytes = r3.videoPacketBytes, a3.keyFrameCount = r3.keyFrameCount, a3.gop = r3.gop, a3.keyFrameInterval = r3.keyFrameInterval, a3.videoEncodeFramerate = r3.videoEncodeFramerate), e4.push({ taskId: i3, stats: a3 }));
        }), this.controlPort.notify("stats", { data: e4 });
      }, 0, 500), this.timer.start();
    }
    async invoke(e3, t3, i3) {
      const r3 = this;
      function a3(e4, t4, i4) {
        if ("unregisterTask" === e4) {
          const e5 = r3.globalDataMap.get(t4[0]);
          e5 && (r3.releaseGlobalData(e5), r3.globalDataMap.delete(t4[0]));
        } else "clear" === e4 ? (r3.globalDataMap.forEach((e5) => {
          r3.releaseGlobalData(e5);
        }), r3.globalDataMap.clear()) : "analyzeStreams" !== e4 || u.ai(i4) || i4.streams.forEach((e5) => {
          e5.codecpar = (0, p.Wu)(e5.codecpar);
        });
      }
      if ("io" === e3) {
        if ("registerTask" === t3) {
          const e4 = this.globalDataMap.get(i3[0].taskId) || this.createGlobalData(i3[0].taskId);
          i3[0].stats = e4[n.o9] + 32;
        }
        if (u.Pc(this.ioThread[t3])) return this.ioThread[t3](...i3).then((e4) => (a3(t3, i3, e4), e4));
        f.h2("method ".concat(t3, " not found"), w, 163);
      } else {
        if ("registerTask" === t3) {
          const e4 = this.globalDataMap.get(i3[0].taskId) || this.createGlobalData(i3[0].taskId);
          i3[0].stats = e4[n.o9] + 32, i3[0].avpacketList = e4[n.o9], i3[0].avpacketListMutex = e4[n.o9] + 24;
        }
        if (u.Pc(this.demuxPipeline[t3])) return this.demuxPipeline[t3](...i3).then((e4) => (a3(t3, i3, e4), e4));
        f.h2("method ".concat(t3, " not found"), w, 181);
      }
    }
    async setLogLevel(e3) {
      f.V$(e3);
    }
  }
}, 29998: (e2, t2, i2) => {
  i2.d(t2, { A: () => g });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(30128), o = i2(29170), c = i2(88506), d2 = i2(59016), h = i2(71762), l = i2(67672), u = i2(72703), f = i2(71766), p = i2(84149), m = i2(95335);
  class g {
    constructor() {
      (0, r2.A)(this, "thread", void 0), (0, r2.A)(this, "codecparMap", void 0), (0, r2.A)(this, "controlMessageChannel", void 0), (0, r2.A)(this, "controlPort", void 0), (0, r2.A)(this, "statsMap", void 0), this.codecparMap = new (s2())(), this.statsMap = new (s2())();
    }
    async run() {
      this.thread = await (0, c.pt)(d2.A, { name: "IODemuxPipeline", dispatchToWorker: true }, 59016).run(), this.controlMessageChannel = new MessageChannel(), this.controlPort = new p.Ay(this.controlMessageChannel.port1), this.controlPort.on(p.Wo, (e3) => {
        if ("stats" === e3.method) {
          const t3 = e3.params.data;
          for (let e4 = 0; e4 < t3.length; e4++) {
            const i3 = this.statsMap.get(t3[e4].taskId);
            i3 && m.__(t3[e4].stats, (e5, t4) => {
              i3[t4] = e5;
            });
          }
        }
      }), await this.thread.init.transfer(this.controlMessageChannel.port2).invoke(this.controlMessageChannel.port2);
    }
    setLogLevel(e3) {
      this.thread.setLogLevel(e3);
    }
    async destroy() {
      await (0, c.nx)(this.thread), this.thread = null;
    }
    get IOPipeline() {
      const e3 = this;
      return new Proxy({}, { get(t3, i3, r3) {
        if (t3[i3]) return t3[i3];
        const a3 = async function(...t4) {
          return e3.thread.invoke("io", i3, t4);
        };
        return a3.transfer = function(...t4) {
          return { invoke: async function(...r4) {
            return e3.thread.invoke.transfer(...t4).invoke("io", i3, r4);
          } };
        }, t3[i3] = a3, t3[i3];
      } });
    }
    get DemuxPipeline() {
      const e3 = this;
      function t3(t4, i3, r3) {
        if ("analyzeStreams" !== t4 || l.ai(r3)) if ("unregisterTask" === t4) {
          const t5 = e3.codecparMap.get(i3[0]);
          t5 && (t5.forEach((e4) => {
            (0, f.dn)(e4);
          }), e3.codecparMap.delete(i3[0])), e3.statsMap.delete(i3[0]);
        } else "clear" === t4 ? (e3.codecparMap.forEach((e4) => {
          e4.forEach((e5) => {
            (0, f.dn)(e5);
          });
        }), e3.codecparMap.clear(), e3.statsMap.clear()) : "registerTask" === t4 && e3.statsMap.set(i3[0].taskId, (0, o.A)(i3[0].stats, n.A));
        else {
          const t5 = [];
          r3.streams.forEach((r4) => {
            (0, u.A)(r4.codecpar) || (r4.codecpar = (0, h.T8)(r4.codecpar), t5.push(r4.codecpar)), e3.codecparMap.set(i3[0], t5);
          });
        }
      }
      return new Proxy({}, { get(i3, r3, a3) {
        if (i3[r3]) return i3[r3];
        const s3 = async function(...i4) {
          return e3.thread.invoke("demux", r3, i4).then((e4) => (t3(r3, i4, e4), e4));
        };
        return s3.transfer = function(...i4) {
          return { invoke: async function(...a4) {
            return e3.thread.invoke.transfer(...i4).invoke("demux", r3, a4).then((e4) => (t3(r3, a4, e4), e4));
          } };
        }, i3[r3] = s3, i3[r3];
      } });
    }
  }
}, 75392: (e2, t2, i2) => {
  i2.d(t2, { A: () => y });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(61499), o = i2(52277), c = i2(74503), d2 = i2(94300), h = i2(67672), l = i2(4624), u = i2(56024), f = i2(71517), p = i2(73783), m = i2(84149), g = i2(54058), v = i2(95335), A = i2(25115);
  class y {
    constructor() {
      (0, r2.A)(this, "mse", void 0), (0, r2.A)(this, "globalDataMap", void 0), (0, r2.A)(this, "controlPort", void 0), (0, r2.A)(this, "timer", void 0), this.mse = new A.A(), this.globalDataMap = new (s2())();
    }
    createGlobalData(e3) {
      const t3 = (0, c.A)(o.M);
      return p.Ts(t3[n.o9] + 24), p.Ts(t3[n.o9] + 28), this.globalDataMap.set(e3, t3), t3;
    }
    releaseGlobalData(e3) {
      e3.avframeList.clear((e4) => {
        (0, u.to)(e4);
      }, 20), e3.avpacketList.clear((e4) => {
        (0, f.Up)(e4);
      }, 20), p.zr(e3[n.o9] + 24), p.zr(e3[n.o9] + 28), (0, d2.A)(e3);
    }
    async init(e3) {
      this.controlPort = new m.Ay(e3), this.timer = new g.A(() => {
        const e4 = [];
        this.globalDataMap.forEach((t3, i3) => {
          const r3 = t3.stats;
          e4.push({ taskId: i3, stats: { audioFrameDecodeCount: r3.audioFrameDecodeCount, audioFrameRenderCount: r3.audioFrameRenderCount, sampleRate: r3.sampleRate, channels: r3.channels, videoFrameDecodeCount: r3.videoFrameDecodeCount, videoFrameRenderCount: r3.videoFrameRenderCount, width: r3.width, height: r3.height } });
        }), this.controlPort.notify("stats", { data: e4 });
      }, 0, 500), this.controlPort.on(m.Wo, (e4) => {
        if ("stats" === e4.method) {
          const t3 = e4.params.data;
          for (let e5 = 0; e5 < t3.length; e5++) {
            const i3 = this.globalDataMap.get(t3[e5].taskId).stats;
            i3 && (v.__(t3[e5].stats, (e6, t4) => {
              i3[t4] = e6;
            }), i3.jitterBuffer.min = t3[e5].jitterBuffer.min, i3.jitterBuffer.max = t3[e5].jitterBuffer.max);
          }
        }
      }), this.timer.start();
    }
    async invoke(e3, t3) {
      const i3 = this;
      if ("registerTask" === e3) {
        const e4 = this.globalDataMap.get(t3[0].taskId) || this.createGlobalData(t3[0].taskId);
        t3[0].stats = e4[n.o9] + 32, t3[0].avpacketList = e4[n.o9], t3[0].avpacketListMutex = e4[n.o9] + 24;
      }
      if (h.Pc(this.mse[e3])) return this.mse[e3].transfer || (this.mse[e3].transfer = []), this.mse[e3](...t3).then((r3) => (this.mse[e3].transfer.length && (this.invoke.transfer = this.mse[e3].transfer), r3 = (function(e4, t4, r4) {
        if ("unregisterTask" === e4) {
          const e5 = i3.globalDataMap.get(t4[0]);
          e5 && (i3.releaseGlobalData(e5), i3.globalDataMap.delete(t4[0]));
        } else "clear" === e4 && (i3.globalDataMap.forEach((e5) => {
          i3.releaseGlobalData(e5);
        }), i3.globalDataMap.clear());
        return r4;
      })(e3, t3, r3), r3));
      l.h2("method ".concat(e3, " not found"), "src/avplayer/worker/MSEPipeline.ts", 162);
    }
    async setLogLevel(e3) {
      l.V$(e3);
    }
  }
}, 21862: (e2, t2, i2) => {
  i2.d(t2, { A: () => u });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(30128), o = i2(29170), c = i2(88506), d2 = i2(84149), h = i2(95335), l = i2(75392);
  class u {
    constructor() {
      (0, r2.A)(this, "thread", void 0), (0, r2.A)(this, "controlMessageChannel", void 0), (0, r2.A)(this, "controlPort", void 0), (0, r2.A)(this, "statsMap", void 0), this.statsMap = new (s2())();
    }
    async run() {
      this.thread = await (0, c.pt)(l.A, { name: "MSEPipeline", dispatchToWorker: true }, 75392).run(), this.controlMessageChannel = new MessageChannel(), this.controlPort = new d2.Ay(this.controlMessageChannel.port1), this.controlPort.on(d2.Wo, (e3) => {
        if ("stats" === e3.method) {
          const t3 = e3.params.data, i3 = [];
          for (let e4 = 0; e4 < t3.length; e4++) {
            const r3 = this.statsMap.get(t3[e4].taskId);
            r3 && (h.__(t3[e4].stats, (e5, t4) => {
              r3[t4] = e5;
            }), i3.push({ taskId: t3[e4].taskId, stats: { videoEncodeFramerate: r3.videoEncodeFramerate, videoPacketQueueLength: r3.videoPacketQueueLength, audioPacketQueueLength: r3.audioPacketQueueLength, audioEncodeFramerate: r3.audioEncodeFramerate }, jitterBuffer: { min: r3.jitterBuffer.min, max: r3.jitterBuffer.max } }));
          }
          this.controlPort.notify("stats", { data: { stats: i3 } });
        }
      }), await this.thread.init.transfer(this.controlMessageChannel.port2).invoke(this.controlMessageChannel.port2);
    }
    setLogLevel(e3) {
      this.thread.setLogLevel(e3);
    }
    async destroy() {
      await (0, c.nx)(this.thread), this.thread = null;
    }
    transformResult(e3, t3, i3) {
      return "unregisterTask" === e3 ? this.statsMap.delete(t3[0]) : "clear" === e3 ? this.statsMap.clear() : "registerTask" === e3 && this.statsMap.set(t3[0].taskId, (0, o.A)(t3[0].stats, n.A)), i3;
    }
    get MSEPipeline() {
      const e3 = this;
      return new Proxy({}, { get(t3, i3, r3) {
        if (t3[i3]) return t3[i3];
        const a3 = async function(...t4) {
          return e3.thread.invoke(i3, t4).then((r4) => e3.transformResult(i3, t4, r4));
        };
        return a3.transfer = function(...t4) {
          return { invoke: async function(...r4) {
            return e3.thread.invoke.transfer(...t4).invoke(i3, r4).then((t5) => e3.transformResult(i3, r4, t5));
          } };
        }, t3[i3] = a3, t3[i3];
      } });
    }
  }
}, 71272: (e2, t2, i2) => {
  i2.d(t2, { A: () => b });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(61499), o = i2(52277), c = i2(74503), d2 = i2(94300), h = i2(67672), l = i2(4624), u = i2(31138), f = i2(33968), p = i2(56024), m = i2(71517), g = i2(73783), v = i2(84149), A = i2(54058), y = i2(95335);
  const w = "src/avplayer/worker/VideoPipeline.ts";
  class b {
    constructor() {
      (0, r2.A)(this, "decoder", void 0), (0, r2.A)(this, "render", void 0), (0, r2.A)(this, "globalDataMap", void 0), (0, r2.A)(this, "controlPort", void 0), (0, r2.A)(this, "timer", void 0), this.decoder = new u.A(), this.render = new f.A(), this.globalDataMap = new (s2())();
    }
    createGlobalData(e3) {
      const t3 = (0, c.A)(o.M);
      return g.Ts(t3[n.o9] + 24), g.Ts(t3[n.o9] + 28), this.globalDataMap.set(e3, t3), t3;
    }
    releaseGlobalData(e3) {
      e3.avframeList.clear((e4) => {
        (0, p.to)(e4);
      }, 20), e3.avpacketList.clear((e4) => {
        (0, m.Up)(e4);
      }, 20), g.zr(e3[n.o9] + 24), g.zr(e3[n.o9] + 28), (0, d2.A)(e3);
    }
    async init(e3) {
      this.controlPort = new v.Ay(e3);
      let t3 = 0;
      this.timer = new A.A(() => {
        t3++;
        const e4 = [];
        this.globalDataMap.forEach((i3, r3) => {
          const a3 = i3.stats;
          e4.push({ taskId: r3, stats: { videoFrameDecodeCount: a3.videoFrameDecodeCount, videoFrameDecodeIntervalMax: a3.videoFrameDecodeIntervalMax, videoDecodeErrorPacketCount: a3.videoDecodeErrorPacketCount, videoCurrentTime: a3.videoCurrentTime, videoFrameRenderCount: a3.videoFrameRenderCount, videoFrameRenderIntervalMax: a3.videoFrameRenderIntervalMax, videoFrameDropCount: a3.videoFrameDropCount, width: a3.width, height: a3.height } }), 2 === t3 && (a3.videoFrameDecodeIntervalMax = 0, a3.videoFrameRenderIntervalMax = 0);
        }), this.controlPort.notify("stats", { data: e4 }), 2 === t3 && (t3 = 0);
      }, 0, 500), this.controlPort.on(v.Wo, (e4) => {
        if ("stats" === e4.method) {
          const t4 = e4.params.data;
          for (let e5 = 0; e5 < t4.length; e5++) {
            const i3 = this.globalDataMap.get(t4[e5].taskId).stats;
            i3 && (y.__(t4[e5].stats, (e6, t5) => {
              i3[t5] = e6;
            }), i3.jitterBuffer.min = t4[e5].jitterBuffer.min, i3.jitterBuffer.max = t4[e5].jitterBuffer.max);
          }
        }
      }), this.timer.start();
    }
    async invoke(e3, t3, i3) {
      const r3 = this;
      function a3(e4, t4, i4) {
        if ("unregisterTask" === e4) {
          const e5 = r3.globalDataMap.get(t4[0]);
          e5 && (r3.releaseGlobalData(e5), r3.globalDataMap.delete(t4[0]));
        } else if ("clear" === e4) r3.globalDataMap.forEach((e5) => {
          r3.releaseGlobalData(e5);
        }), r3.globalDataMap.clear();
        else if ("syncSeekTime" === e4) {
          const e5 = r3.globalDataMap.get(t4[0]);
          if (e5) return e5.stats.videoCurrentTime;
        }
        return i4;
      }
      if ("decoder" === e3) {
        if ("registerTask" === t3) {
          const e4 = this.globalDataMap.get(i3[0].taskId) || this.createGlobalData(i3[0].taskId);
          i3[0].stats = e4[n.o9] + 32, i3[0].avpacketList = e4[n.o9], i3[0].avpacketListMutex = e4[n.o9] + 24, i3[0].avframeList = e4[n.o9] + 12, i3[0].avframeListMutex = e4[n.o9] + 28;
        }
        if (h.Pc(this.decoder[t3])) return this.decoder[t3](...i3).then((e4) => a3(t3, i3, e4));
        l.h2("method ".concat(t3, " not found"), w, 179);
      } else {
        if ("registerTask" === t3) {
          const e4 = this.globalDataMap.get(i3[0].taskId) || this.createGlobalData(i3[0].taskId);
          i3[0].stats = e4[n.o9] + 32, i3[0].avframeList = e4[n.o9] + 12, i3[0].avframeListMutex = e4[n.o9] + 28;
        }
        if (h.Pc(this.render[t3])) return this.render[t3](...i3).then((e4) => a3(t3, i3, e4));
        l.h2("method ".concat(t3, " not found"), w, 197);
      }
    }
    async setLogLevel(e3) {
      l.V$(e3);
    }
  }
}, 21678: (e2, t2, i2) => {
  i2.d(t2, { A: () => u });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(30128), o = i2(29170), c = i2(88506), d2 = i2(71272), h = i2(84149), l = i2(95335);
  class u {
    constructor() {
      (0, r2.A)(this, "thread", void 0), (0, r2.A)(this, "controlMessageChannel", void 0), (0, r2.A)(this, "controlPort", void 0), (0, r2.A)(this, "statsMap", void 0), this.statsMap = new (s2())();
    }
    async run() {
      this.thread = await (0, c.pt)(d2.A, { name: "VideoPipeline", dispatchToWorker: true }, 71272).run(), this.controlMessageChannel = new MessageChannel(), this.controlPort = new h.Ay(this.controlMessageChannel.port1), this.controlPort.on(h.Wo, (e3) => {
        if ("stats" === e3.method) {
          const t3 = e3.params.data, i3 = [];
          for (let e4 = 0; e4 < t3.length; e4++) {
            const r3 = this.statsMap.get(t3[e4].taskId);
            r3 && (l.__(t3[e4].stats, (e5, t4) => {
              r3[t4] = e5;
            }), i3.push({ taskId: t3[e4].taskId, stats: { videoEncodeFramerate: r3.videoEncodeFramerate, videoPacketQueueLength: r3.videoPacketQueueLength }, jitterBuffer: { min: r3.jitterBuffer.min, max: r3.jitterBuffer.max } }));
          }
          this.controlPort.notify("stats", { data: { stats: i3 } });
        }
      }), await this.thread.init.transfer(this.controlMessageChannel.port2).invoke(this.controlMessageChannel.port2);
    }
    setLogLevel(e3) {
      this.thread.setLogLevel(e3);
    }
    async destroy() {
      await (0, c.nx)(this.thread), this.thread = null;
    }
    transformResult(e3, t3, i3) {
      if ("unregisterTask" === e3) this.statsMap.delete(t3[0]);
      else if ("clear" === e3) this.statsMap.clear();
      else if ("registerTask" === e3) this.statsMap.set(t3[0].taskId, (0, o.A)(t3[0].stats, n.A));
      else if ("syncSeekTime" === e3) {
        const e4 = this.statsMap.get(t3[0]);
        if (e4) return void (e4.videoCurrentTime = i3);
      }
      return i3;
    }
    get VideoDecodePipeline() {
      const e3 = this;
      return new Proxy({}, { get(t3, i3, r3) {
        if (t3[i3]) return t3[i3];
        const a3 = async function(...t4) {
          return e3.thread.invoke("decoder", i3, t4).then((r4) => e3.transformResult(i3, t4, r4));
        };
        return a3.transfer = function(...t4) {
          return { invoke: async function(...r4) {
            return e3.thread.invoke.transfer(...t4).invoke("decoder", i3, r4).then((t5) => e3.transformResult(i3, r4, t5));
          } };
        }, t3[i3] = a3, t3[i3];
      } });
    }
    get VideoRenderPipeline() {
      const e3 = this;
      return new Proxy({}, { get(t3, i3, r3) {
        if (t3[i3]) return t3[i3];
        const a3 = async function(...t4) {
          return e3.thread.invoke("render", i3, t4).then((r4) => e3.transformResult(i3, t4, r4));
        };
        return a3.transfer = function(...t4) {
          return { invoke: async function(...r4) {
            return e3.thread.invoke.transfer(...t4).invoke("render", i3, r4).then((t5) => e3.transformResult(i3, r4, t5));
          } };
        }, t3[i3] = a3, t3[i3];
      } });
    }
  }
}, 91712: (e2, t2, i2) => {
  i2.d(t2, { K: () => n, pl: () => s2 });
  var r2 = i2(134);
  class a2 {
    constructor() {
      (0, r2.A)(this, "version", void 0), (0, r2.A)(this, "padding", void 0), (0, r2.A)(this, "count", void 0), (0, r2.A)(this, "payloadType", void 0), (0, r2.A)(this, "length", void 0);
    }
  }
  class s2 {
    constructor() {
      (0, r2.A)(this, "ssrc", void 0), (0, r2.A)(this, "fractionLost", void 0), (0, r2.A)(this, "packetLost", void 0), (0, r2.A)(this, "highestSequence", void 0), (0, r2.A)(this, "interArrivalJitter", void 0), (0, r2.A)(this, "lsr", void 0), (0, r2.A)(this, "dlsr", void 0);
    }
  }
  class n extends a2 {
    constructor(...e3) {
      super(...e3), (0, r2.A)(this, "ssrc", void 0), (0, r2.A)(this, "ntp", void 0), (0, r2.A)(this, "timestamp", void 0), (0, r2.A)(this, "senderPacketCount", void 0), (0, r2.A)(this, "senderOctetCount", void 0), (0, r2.A)(this, "reports", []);
    }
  }
}, 90764: (e2, t2, i2) => {
  function r2(e3) {
    return e3.length > 4 && e3[0] > 127 && e3[0] < 192 && e3[0] >>> 6 == 2 && e3[1] >= 192 && e3[1] <= 223;
  }
  i2.d(t2, { A: () => r2 });
}, 39342: (e2, t2, i2) => {
  i2.d(t2, { N: () => s2 });
  var r2 = i2(31865), a2 = i2(91712);
  function s2(e3) {
    const t3 = new r2.A(e3), i3 = new a2.K();
    !(function(e4, t4) {
      let i4 = t4.readUint8();
      e4.version = i4 >>> 6, e4.padding = i4 >>> 5 & 1, e4.count = 31 & i4, e4.payloadType = t4.readUint8(), e4.length = t4.readUint16();
    })(i3, t3), i3.ssrc = t3.readUint32(), i3.ntp = t3.readUint64(), i3.timestamp = t3.readUint32(), i3.senderPacketCount = t3.readUint32(), i3.senderOctetCount = t3.readUint32();
    for (let e4 = 0; e4 < i3.count; e4++) {
      const e5 = new a2.pl();
      e5.ssrc = t3.readUint32(), e5.fractionLost = t3.readUint8(), e5.packetLost = t3.readUint24(), e5.highestSequence = t3.readUint32(), e5.interArrivalJitter = t3.readUint32(), e5.lsr = t3.readUint32(), e5.dlsr = t3.readUint32();
    }
    return i3;
  }
}, 48416: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(77231), n = i2(15012);
  const o = s2.zg >>> 1;
  class c {
    constructor(e3, t3) {
      (0, r2.A)(this, "queue", void 0), (0, r2.A)(this, "frameQueue", void 0), (0, r2.A)(this, "codecpar", void 0), (0, r2.A)(this, "currentSeqStart", void 0), (0, r2.A)(this, "readyPos", void 0), (0, r2.A)(this, "maskerQueue", void 0), (0, r2.A)(this, "payloadContext", void 0), this.codecpar = e3, this.queue = [], this.frameQueue = [], this.currentSeqStart = -1, this.readyPos = 0, this.maskerQueue = [], this.payloadContext = t3;
    }
    isSeqIncreaseOne(e3, t3) {
      return e3 + 1 === t3 || e3 === s2.zg && 0 === t3;
    }
    seqAMoreThenB(e3, t3) {
      return e3 > t3 && e3 - t3 < o || e3 < t3 && t3 - e3 > o;
    }
    isFirstStart() {
      if (this.currentSeqStart > -1) return this.isSeqIncreaseOne(this.currentSeqStart, this.queue[0].header.sequence);
      if (this.queue.length > 5) {
        if (1 === a2.f[15](this.codecpar)) return true;
        if (27 === a2.f[15](this.codecpar + 4)) switch (31 & this.queue[0].payload[0]) {
          case 24:
            for (let e3 = 1; e3 < this.queue[0].payload.length - 2; ) {
              const t3 = this.queue[0].payload[e3] << 8 | this.queue[0].payload[e3 + 1], i3 = 31 & this.queue[0].payload[e3 + 2];
              if (7 === i3 || 8 === i3 || 5 === i3 || 9 === i3) return true;
              e3 += 2 + t3;
            }
            break;
          case 28:
            if (128 & this.queue[0].payload[1]) return true;
            break;
          case 7:
          case 9:
            return true;
        }
        else if (173 === a2.f[15](this.codecpar + 4)) switch (this.queue[0].payload[0] >>> 1 & 63) {
          case 48:
            let e3 = n.Dm + (this.payloadContext.usingDonlField ? n.hE : 0);
            for (; e3 < this.queue[0].payload.length - n.Dm; ) {
              const t3 = this.queue[0].payload[e3] << 8 | this.queue[0].payload[e3 + 1], i3 = this.queue[0].payload[e3 + 2] >>> 1 & 63;
              if (34 === i3 || 32 === i3 || 33 === i3 || 20 === i3 || 19 === i3 || 35 === i3) return true;
              e3 += 2 + t3, this.payloadContext.usingDonlField && (e3 += n.hQ);
            }
            break;
          case 49:
            if (128 & this.queue[0].payload[2]) return true;
            break;
          case 32:
          case 35:
            return true;
        }
        else if (139 === a2.f[15](this.codecpar + 4)) {
          if (16 & this.queue[0].payload[0]) return true;
        } else if (167 === a2.f[15](this.codecpar + 4)) {
          if (8 & this.queue[0].payload[0]) return true;
        } else if (225 === a2.f[15](this.codecpar + 4)) {
          if (1 & this.queue[0].payload[0]) return true;
        } else if (2 === a2.f[15](this.codecpar + 4) && 1 == (this.queue[0].payload[2] >>> 5 & 1)) return true;
        return this.readyPos > 200;
      }
      return false;
    }
    check() {
      for (; this.readyPos < this.queue.length - 1 && this.isSeqIncreaseOne(this.queue[this.readyPos].header.sequence, this.queue[this.readyPos + 1].header.sequence); ) this.readyPos++, (this.queue[this.readyPos].header.masker || 65543 === a2.f[15](this.codecpar + 4) || 65542 === a2.f[15](this.codecpar + 4) || 86017 === a2.f[15](this.codecpar + 4) || 69660 === a2.f[15](this.codecpar + 4) || 65537 === a2.f[15](this.codecpar + 4)) && this.maskerQueue.push(this.readyPos);
    }
    push(e3) {
      if (this.currentSeqStart > -1 && this.seqAMoreThenB(this.currentSeqStart, e3.header.sequence)) return;
      if (!this.queue.length) return this.queue.push(e3), void (e3.header.masker && this.maskerQueue.push(0));
      let t3 = false;
      if (this.seqAMoreThenB(this.queue[0].header.sequence, e3.header.sequence)) this.queue.unshift(e3), this.readyPos = 0, this.maskerQueue.length = 0, t3 = true, this.check();
      else for (let i4 = this.readyPos; i4 < this.queue.length; i4++) if (this.seqAMoreThenB(this.queue[i4].header.sequence, e3.header.sequence)) {
        this.queue.splice(i4, 0, e3), t3 = true, i4 === this.readyPos + 1 && this.check();
        break;
      }
      t3 || (this.queue.push(e3), this.readyPos + 2 === this.queue.length && this.check());
      let i3 = 0;
      for (; this.isFirstStart() && this.maskerQueue.length; ) {
        const e4 = this.maskerQueue.shift() + 1, t4 = this.queue.slice(i3, e4);
        this.frameQueue.push(t4), i3 = e4, this.currentSeqStart = t4[t4.length - 1].header.sequence;
      }
      if (i3) {
        this.queue = this.queue.slice(i3), this.readyPos = Math.max(0, this.readyPos - i3);
        for (let e4 = 0; e4 < this.maskerQueue.length; e4++) this.maskerQueue[e4] -= i3;
      }
    }
    hasFrame() {
      return this.frameQueue.length;
    }
    getFrame() {
      return this.frameQueue.shift();
    }
  }
}, 67088: (e2, t2, i2) => {
  i2.d(t2, { El: () => n, N8: () => c, tW: () => o });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2);
  class n {
    constructor() {
      (0, r2.A)(this, "version", void 0), (0, r2.A)(this, "padding", void 0), (0, r2.A)(this, "extension", void 0), (0, r2.A)(this, "csrc", void 0), (0, r2.A)(this, "masker", void 0), (0, r2.A)(this, "payloadType", void 0), (0, r2.A)(this, "sequence", void 0), (0, r2.A)(this, "timestamp", void 0), (0, r2.A)(this, "ssrc", void 0), (0, r2.A)(this, "csrcList", []);
    }
  }
  class o {
    constructor() {
      (0, r2.A)(this, "id", void 0), (0, r2.A)(this, "length", void 0), (0, r2.A)(this, "extension", void 0), (0, r2.A)(this, "headers", new (s2())());
    }
    hasOneByteExtensions() {
      return 48862 === this.id;
    }
    hasTwoBytesExtensions() {
      return 4096 == (65520 & this.id);
    }
    parse() {
      if (this.hasOneByteExtensions()) for (let e3 = 0; e3 < this.extension.length; e3++) {
        const t3 = (240 & this.extension[e3]) >>> 4, i3 = 1 + (15 & this.extension[e3]);
        if (15 === t3) break;
        0 !== t3 ? (this.headers.set(t3, this.extension.subarray(e3 + 1, e3 + 1 + i3)), e3 += 1 + i3) : e3++;
      }
      else if (this.hasTwoBytesExtensions()) for (let e3 = 0; e3 < this.extension.length; e3++) {
        const t3 = this.extension[e3], i3 = this.extension[e3 + 1];
        0 !== t3 ? (this.headers.set(t3, this.extension.subarray(e3 + 2, e3 + 2 + i3)), e3 += 2 + i3) : e3++;
      }
    }
  }
  class c {
    constructor() {
      (0, r2.A)(this, "header", void 0), (0, r2.A)(this, "headerExtension", void 0), (0, r2.A)(this, "payload", void 0);
    }
  }
}, 38183: (e2, t2, i2) => {
  i2.d(t2, { Hj: () => c, Jz: () => p, hw: () => l, kx: () => h, l6: () => f, o_: () => u, pA: () => d2, we: () => m, xW: () => g });
  var r2 = i2(4624), a2 = i2(15012), s2 = i2(92647), n = i2(37246);
  const o = "src/avprotocol/rtp/depacketizer.ts";
  function c(e3) {
    const t3 = [];
    let i3 = false;
    for (let a3 = 0; a3 < e3.length; a3++) {
      const n2 = e3[a3].payload, c2 = 31 & n2[0];
      switch (c2) {
        case 24:
          for (let e4 = 1; e4 < n2.length - 2; ) {
            const a4 = n2[e4] << 8 | n2[e4 + 1];
            if (e4 + 2 + a4 > n2.length) return r2.z3("pack h264 STAP-A failed", o, 52), { nalus: [], isKey: i3 };
            t3.push(n2.subarray(e4 + 2, e4 + 2 + a4)), 5 == (31 & n2[e4 + 2]) && (i3 = true), e4 += 2 + a4;
          }
          break;
        case 25:
        case 26:
        case 27:
        case 29:
          return r2.z3("not support nalu pack", o, 75), { nalus: [], isKey: i3 };
        case 28:
          const d3 = n2[1];
          if (1 & ~(d3 >>> 7)) return r2.z3("not the first FU-A packet", o, 84), { nalus: [], isKey: i3 };
          const h2 = 31 & d3, l2 = 224 & n2[0] | h2;
          5 === h2 && (i3 = true);
          const u2 = [new Uint8Array([l2])];
          for (u2.push(n2.subarray(2)), a3++; a3 < e3.length && (u2.push(e3[a3].payload.subarray(2)), !(e3[a3].payload[1] >>> 6 & 1)); a3++) ;
          t3.push((0, s2.A)(Uint8Array, u2));
          break;
        default:
          5 === c2 && (i3 = true), t3.push(n2);
      }
    }
    return { nalus: t3, isKey: i3 };
  }
  function d2(e3, t3) {
    const i3 = [];
    let n2 = false;
    for (let c2 = 0; c2 < e3.length; c2++) {
      const d3 = e3[c2].payload, h2 = d3[0] >>> 1 & 63;
      switch (h2 > 50 && r2.z3("not support nalu pack", o, 131), h2) {
        case 48:
          for (let e4 = a2.Dm + (t3.usingDonlField ? a2.hE : 0); e4 < d3.length - 2; ) {
            const s3 = d3[e4] << 8 | d3[e4 + 1];
            if (e4 + 2 + s3 > d3.length) return r2.z3("pack hevc STAP-A failed", o, 140), { nalus: [], isKey: n2 };
            i3.push(d3.subarray(e4 + 2, e4 + 2 + s3));
            const c3 = d3[e4 + 2] >>> 1 & 63;
            20 !== c3 && 19 !== c3 || (n2 = true), e4 += 2 + s3, t3.usingDonlField && (e4 += a2.hQ);
          }
          break;
        case 49:
          const l2 = 63 & d3[2];
          20 !== l2 && 19 !== l2 || (n2 = true);
          const u2 = [new Uint8Array([129 & d3[0] | l2 << 1, d3[1]])];
          for (u2.push(d3.subarray(3 + (t3.usingDonlField ? a2.hE : 0))), c2++; c2 < e3.length && (u2.push(e3[c2].payload.subarray(3 + (t3.usingDonlField ? a2.hE : 0))), !(e3[c2].payload[2] >>> 6 & 1)); c2++) ;
          i3.push((0, s2.A)(Uint8Array, u2));
          break;
        case 50:
          return r2.z3("not support nalu pack", o, 184), { nalus: [], isKey: n2 };
        default:
          20 !== h2 && 19 !== h2 || (n2 = true), i3.push(d3);
      }
    }
    return { nalus: i3, isKey: n2 };
  }
  function h(e3, t3) {
    const i3 = [], c2 = [], d3 = new n.A(a2.MO);
    for (let n2 = 0; n2 < e3.length; n2++) {
      const h2 = e3[n2].payload;
      if (t3.latm) {
        let e4 = 0;
        for (; e4 < h2.length; ) {
          let t4 = 0;
          for (; ; ) {
            const i4 = h2[e4++];
            if (t4 += i4, 255 !== i4) break;
          }
          i3.push(h2.subarray(e4, e4 + t4)), e4 += t4;
        }
      } else {
        if (h2.length < 2) return void r2.z3("invalid mpeg4 payload length", o, 228);
        const e4 = h2[0] << 8 | h2[1];
        if (e4 > a2.MO) return void r2.z3("invalid mpeg4 payload au header length", o, 233);
        const n3 = (e4 + 7) / 8 >>> 0;
        if (h2.length - 2 < n3) return void r2.z3("invalid mpeg4 payload au length", o, 238);
        const l2 = t3.sizeLength + t3.indexLength;
        if (e4 % l2 != 0) return void r2.z3("not support mpeg4 payload au format", o, 245);
        const u2 = e4 / l2, f2 = [], p2 = [];
        d3.reset(), d3.appendBuffer(h2.subarray(2));
        for (let e5 = 0; e5 < u2; e5++) f2.push(d3.readU(t3.sizeLength)), p2.push(d3.readU(t3.indexLength));
        if (1 === f2.length && f2[0] + n3 + 2 >= h2.length) f2[0] + n3 + 2 === h2.length ? i3.push(h2.subarray(2 + n3)) : c2.push(h2.subarray(2 + n3));
        else if (f2.length > 1) {
          let e5 = n3 + 2;
          for (let t4 = 0; t4 < f2.length; t4++) !p2[t4] && c2.length && (i3.push(1 === c2.length ? c2[0] : (0, s2.A)(Uint8Array, c2)), c2.length = 0), i3.push(h2.subarray(e5, e5 + f2[t4])), e5 += f2[t4];
        }
      }
    }
    return c2.length && i3.push(1 === c2.length ? c2[0] : (0, s2.A)(Uint8Array, c2)), i3;
  }
  function l(e3) {
    const t3 = [];
    let i3 = false;
    for (let r3 = 0; r3 < e3.length; r3++) {
      const a3 = e3[r3].payload[0] >>> 7, s3 = e3[r3].payload[0] >>> 4 & 1, n2 = 7 & e3[r3].payload[0];
      let o2 = 1;
      if (a3) {
        const a4 = e3[r3].payload[o2] >>> 7, c2 = e3[r3].payload[o2] >>> 6 & 1, d3 = e3[r3].payload[o2] >>> 5 & 1, h2 = e3[r3].payload[o2] >>> 4 & 1;
        o2++, a4 && e3[r3].payload[o2++] >>> 7 && o2++, c2 && o2++, (d3 || h2) && o2++, !s3 || 0 !== n2 || 1 & e3[r3].payload[o2] || (i3 = true), t3.push(e3[r3].payload.subarray(o2));
      }
    }
    return 1 === t3.length ? { payload: t3[0], isKey: i3 } : { payload: (0, s2.A)(Uint8Array, t3), isKey: i3 };
  }
  function u(e3) {
    const t3 = [];
    let i3 = false;
    for (let a3 = 0; a3 < e3.length; a3++) {
      const s3 = e3[a3].payload[0] >>> 7, n2 = e3[a3].payload[0] >>> 5 & 1, c2 = e3[a3].payload[0] >>> 4 & 1, d3 = e3[a3].payload[0] >>> 3 & 1, h2 = e3[a3].payload[0] >>> 1 & 1;
      let l2 = 1;
      s3 && e3[a3].payload[l2++] >>> 7 && l2++;
      let u2 = 0;
      if (n2 && (c2 && (u2 = 3 & e3[a3].payload[l2]), l2++), c2) for (let t4 = 0; t4 < u2; t4++) 16 & e3[t4].payload[l2] ? l2 += 2 : l2 += 1;
      if (h2) {
        const t4 = e3[a3].payload[l2] >> 5, i4 = !!(16 & e3[a3].payload[l2]), s4 = !!(8 & e3[a3].payload[l2]);
        if (l2++, t4 > 0 && r2.h2("VP9 scalability structure with multiple layers", o, 390), i4) for (a3 = 0; a3 < t4 + 1; a3++) l2 += 4;
        if (s4) {
          const t5 = e3[a3].payload[l2++];
          for (a3 = 0; a3 < t5; a3++) {
            const t6 = e3[a3].payload[l2] >> 2 & 3;
            l2++;
            for (let e4 = 0; e4 < t6; e4++) l2++;
          }
        }
      }
      if (d3) {
        const t4 = e3[a3].payload[l2], r3 = ((t4 >>> 4 & 1) << 1) + (t4 >>> 5 & 1);
        i3 = !(t4 >>> (3 === r3 ? 2 : 3) & 1 || t4 >>> (3 === r3 ? 1 : 2) & 1);
      }
      t3.push(e3[a3].payload.subarray(l2));
    }
    return 1 === t3.length ? { isKey: i3, payload: t3[0] } : { isKey: i3, payload: (0, s2.A)(Uint8Array, t3) };
  }
  function f(e3) {
    const t3 = [];
    let i3 = false;
    function r3(e4, t4) {
      let i4 = 0;
      for (let r4 = 0; r4 < 8; r4++) {
        let a3 = e4[t4++];
        if (i4 |= (127 & a3) << 7 * r4, !(128 & a3)) break;
      }
      return { value: i4, offset: t4 };
    }
    for (let a3 = 0; a3 < e3.length; a3++) {
      const s3 = e3[a3].payload[0] >>> 4 & 3;
      let n2 = 1;
      if (s3) {
        for (let a4 = 0; a4 < s3 - 1; a4++) {
          const s4 = r3(e3[a4].payload, n2);
          n2 = s4.offset, 1 == (e3[a4].payload[n2] >>> 3 & 15) && (i3 = true), t3.push(e3[a4].payload.subarray(n2, n2 + s4.value)), n2 += s4.value;
        }
        1 == (e3[a3].payload[n2] >>> 3 & 15) && (i3 = true), t3.push(e3[a3].payload.subarray(n2));
      } else for (; n2 < e3[a3].payload.length - 1; ) {
        const s4 = r3(e3[a3].payload, n2);
        n2 = s4.offset, 1 == (e3[a3].payload[n2] >>> 3 & 15) && (i3 = true), t3.push(e3[a3].payload.subarray(n2, n2 + s4.value)), n2 += s4.value;
      }
    }
    return 1 === t3.length ? { payload: t3[0], isKey: i3 } : { payload: (0, s2.A)(Uint8Array, t3), isKey: i3 };
  }
  function p(e3, t3) {
    const i3 = [];
    for (let r3 = 0; r3 < e3.length; r3++) {
      let a3 = 4;
      0 === t3 && 1 == (e3[r3].payload[0] >>> 2 & 1) && (a3 = 8), i3.push(e3[r3].payload.subarray(a3));
    }
    return 1 === i3.length ? i3[0] : (0, s2.A)(Uint8Array, i3);
  }
  function m(e3) {
    const t3 = [], i3 = [];
    for (let r3 = 0; r3 < e3.length; r3++) {
      const a3 = e3[r3].payload;
      switch (3 & a3[0]) {
        case 0:
          t3.push(a3.subarray(2));
          break;
        case 1:
        case 2:
          i3.push(a3.subarray(2));
          break;
        case 3:
          i3.push(a3.subarray(2)), t3.push((0, s2.A)(Uint8Array, i3)), i3.length = 0;
      }
    }
    return 1 === t3.length ? t3[0] : (0, s2.A)(Uint8Array, t3);
  }
  function g(e3) {
    if (1 === e3.length) return e3[0].payload;
    const t3 = [];
    for (let i3 = 0; i3 < e3.length; i3++) t3.push(e3[i3].payload);
    return (0, s2.A)(Uint8Array, t3);
  }
}, 30725: (e2, t2, i2) => {
  i2.d(t2, { zQ: () => p });
  var r2 = i2(37837), a2 = i2(14686), s2 = i2(4919), n = i2(62815), o = i2(67659), c = i2(95832), d2 = i2(60264), h = i2(37246), l = i2(4624);
  function u(e3, t3) {
    const i3 = e3.split(";");
    for (let e4 = 0; e4 < i3.length; e4++) {
      const r3 = i3[e4].split("="), a3 = r3[0].trim();
      r3.shift(), t3(a3, r3.join("=").trim());
    }
  }
  function f(e3, t3) {
    const i3 = {};
    return u(t3, (t4, s3) => {
      switch (t4) {
        case "streamtype":
          i3.streamType = +s3;
          break;
        case "profile-level-id":
          i3.profileLevelId = +s3;
          break;
        case "mode":
          i3.mode = s3;
          break;
        case "sizelength":
          i3.sizeLength = +s3;
          break;
        case "indexlength":
          i3.indexLength = +s3;
          break;
        case "indexdeltalength":
          i3.indexDeltaLength = +s3;
          break;
        case "config":
          i3.config = s3, e3.codecpar.extradata = (0, r2.sY)(s3.length / 2), e3.codecpar.extradataSize = s3.length / 2;
          const t5 = (0, a2.s3)(e3.codecpar.extradata, e3.codecpar.extradataSize);
          let n2 = 0;
          for (let e4 = 0; e4 < s3.length; e4 += 2) t5[n2++] = +("0x" + s3.substring(e4, e4 + 2));
          86018 === e3.codecpar.codecId && c.XC(e3, (0, a2.s3)(e3.codecpar.extradata, e3.codecpar.extradataSize));
      }
    }), i3;
  }
  const p = { 27: function(e3, t3) {
    e3.codecpar.flags |= 1;
    const i3 = {};
    return u(t3, (t4, o2) => {
      switch (t4) {
        case "profile-level-id":
          i3.profile = +("0x" + o2.substring(0, 2)), i3.level = +("0x" + o2.substring(4, 6));
          break;
        case "packetization-mode":
          i3.packetizationMode = +o2;
          break;
        case "sprop-parameter-sets":
          const t5 = o2.split(",").map((e4) => s2.E_(e4)), c2 = d2.nW(t5, 0);
          e3.codecpar.extradata = (0, r2.sY)(c2.length), e3.codecpar.extradataSize = c2.length, (0, a2.lW)(e3.codecpar.extradata, c2.length, c2), n.XC(e3, (0, a2.s3)(e3.codecpar.extradata, e3.codecpar.extradataSize));
      }
    }), i3;
  }, 173: function(e3, t3) {
    const i3 = {}, n2 = [];
    if (e3.codecpar.flags |= 1, u(t3, (e4, t4) => {
      switch (e4) {
        case "profile-id":
          i3.profile = +t4;
          break;
        case "sprop-vps":
        case "sprop-sps":
        case "sprop-pps":
        case "sprop-sei":
          n2.push(s2.E_(t4));
      }
    }), n2.length) {
      const t4 = d2.nW(n2, 0);
      e3.codecpar.extradata = (0, r2.sY)(t4.length), e3.codecpar.extradataSize = t4.length, (0, a2.lW)(e3.codecpar.extradata, t4.length, t4), o.XC(e3, (0, a2.s3)(e3.codecpar.extradata, e3.codecpar.extradataSize));
    }
    return i3;
  }, 86018: f, 86065: function(e3, t3) {
    const i3 = { latm: true };
    return e3.codecpar.codecId = 86018, u(t3, (t4, s3) => {
      switch (t4) {
        case "profile-level-id":
          i3.profileLevelId = +s3;
          break;
        case "cpresent":
          i3.cpresent = +s3;
          break;
        case "config":
          i3.config = s3;
          const t5 = new Uint8Array(s3.length / 2);
          let n2 = 0;
          for (let e4 = 0; e4 < s3.length; e4 += 2) t5[n2++] = +("0x" + s3.substring(e4, e4 + 2));
          const o2 = new h.A(t5.length);
          o2.appendBuffer(t5);
          const d3 = o2.readU1(), u2 = o2.readU1();
          o2.skip(6);
          const f2 = o2.readU(4), p2 = o2.readU(3);
          0 == d3 && 1 == u2 && 0 == f2 && 0 == p2 || l.h2("LATM config not support", "src/avprotocol/rtp/fmtp.ts", 187), e3.codecpar.extradata = (0, r2.sY)(2), e3.codecpar.extradataSize = 2;
          const m = (0, a2.s3)(e3.codecpar.extradata, e3.codecpar.extradataSize);
          m[0] = o2.readU(8), m[1] = o2.readU(8), c.XC(e3, (0, a2.s3)(e3.codecpar.extradata, e3.codecpar.extradataSize));
      }
    }), i3;
  }, 12: f };
}, 79940: (e2, t2, i2) => {
  function r2(e3) {
    return e3.length > 12 && e3[0] > 127 && e3[0] < 192 && e3[0] >>> 6 == 2;
  }
  i2.d(t2, { A: () => r2 });
}, 52575: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(67088);
  function a2(e3) {
    const t3 = new r2.N8(), i3 = t3.header = new r2.El();
    let a3 = 0;
    i3.version = e3[a3] >> 6, i3.padding = e3[a3] >> 5 & 1, i3.extension = e3[a3] >> 4 & 1, i3.csrc = 15 & e3[a3], a3++, i3.masker = e3[a3] >> 7 & 1, i3.payloadType = 127 & e3[a3], a3++, i3.sequence = e3[a3] << 8 | e3[a3 + 1], a3 += 2, i3.timestamp = (e3[a3] << 24 | e3[a3 + 1] << 16 | e3[a3 + 2] << 8 | e3[a3 + 3]) >>> 0, a3 += 4, i3.ssrc = (e3[a3] << 24 | e3[a3 + 1] << 16 | e3[a3 + 2] << 8 | e3[a3 + 3]) >>> 0, a3 += 4;
    for (let t4 = 0; t4 < i3.csrc; t4++) i3.csrcList.push((e3[a3] << 24 | e3[a3 + 1] << 16 | e3[a3 + 2] << 8 | e3[a3 + 3]) >>> 0), a3 += 4;
    return i3.extension && (t3.headerExtension = t3.headerExtension = new r2.tW(), t3.headerExtension.id = e3[a3] << 8 | e3[a3 + 1], a3 += 2, t3.headerExtension.length = e3[a3] << 8 | e3[a3 + 1], a3 += 2, t3.headerExtension.extension = e3.subarray(a3, 4 * t3.headerExtension.length), a3 += 4 * t3.headerExtension.length), t3.payload = e3.subarray(a3, e3.length - (i3.padding ? e3[e3.length - 1] : 0)), t3;
  }
}, 15012: (e2, t2, i2) => {
  i2.d(t2, { Dm: () => a2, MO: () => r2, fm: () => c, hE: () => n, hQ: () => s2, xl: () => o });
  const r2 = 8192, a2 = 2, s2 = 1, n = 2, o = { PCMU: 65542, PCMA: 65543, G723: 86068, G722: 69660, L16: 65537, MPA: 86017, MPV: 2, MP2T: 131072, H264: 27, H265: 173, HEVC: 173, VP8: 139, VP9: 167, AV1: 225, opus: 86076, speex: 86051, vorbis: 86021, theora: 30, "MP4A-LATM": 86065, "MP4V-ES": 12, "mpeg4-generic": 86018, ac3: 86019 }, c = [{ payload: 0, name: "PCMU", codecType: 1, codecId: 65542, rate: 8e3, encoding: 1 }, { payload: 4, name: "G723", codecType: 1, codecId: 86068, rate: 8e3, encoding: 1 }, { payload: 8, name: "PCMA", codecType: 1, codecId: 65543, rate: 8e3, encoding: 1 }, { payload: 9, name: "G722", codecType: 1, codecId: 69660, rate: 8e3, encoding: 1 }, { payload: 10, name: "L16", codecType: 1, codecId: 65537, rate: 44100, encoding: 2 }, { payload: 11, name: "L16", codecType: 1, codecId: 65537, rate: 44100, encoding: 1 }, { payload: 14, name: "MPA", codecType: 1, codecId: 86017, rate: -1, encoding: -1 }, { payload: 31, name: "H261", codecType: 0, codecId: 3, rate: 9e4, encoding: -1 }, { payload: 32, name: "MPV", codecType: 0, codecId: 2, rate: 9e4, encoding: -1 }, { payload: 33, name: "MPV", codecType: 2, codecId: 131072, rate: 9e4, encoding: -1 }, { payload: 34, name: "H263", codecType: 0, codecId: 4, rate: 9e4, encoding: -1 }];
}, 89222: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134), a2 = i2(95434);
  class s2 extends a2.zo {
    constructor(e3, t3, i3) {
      super(t3, i3), (0, r2.A)(this, "seq", void 0), (0, r2.A)(this, "version", "RTSP/1.0"), (0, r2.A)(this, "uri", void 0), (0, r2.A)(this, "authorization", void 0), this.seq = 1, this.uri = e3;
    }
    async options() {
      const e3 = new a2.yz("OPTIONS", this.uri, this.version, { CSeq: "" + this.seq++ });
      return super.request(e3);
    }
    async describe() {
      const e3 = new a2.yz("DESCRIBE", this.uri, this.version, { CSeq: "" + this.seq++, Accept: "application/sdp", Authorization: this.authorization });
      return super.request(e3);
    }
    async setup(e3, t3 = "") {
      let i3 = "";
      2 === e3.streamMode && (i3 = "/TCP");
      let r3 = "", s3 = "";
      1 === e3.streamMode ? s3 = ";".concat(e3.clientPort, "-").concat(e3.clientPort + 1) : 2 === e3.streamMode && (r3 = ";".concat(e3.interleaved, "-").concat(e3.interleaved + 1));
      const n = new a2.yz("SETUP", this.uri + "/trackID=".concat(e3.trackId), this.version, { CSeq: "" + this.seq++, Session: t3, Authorization: this.authorization, Transport: "RTP/AVP".concat(i3, ";").concat(e3.multcast ? "multcast" : "unicast").concat(r3).concat(s3) });
      return super.request(n);
    }
    async play(e3, t3 = { from: 0, to: -1 }) {
      const i3 = new a2.yz("PLAY", this.uri, this.version, { CSeq: "" + this.seq++, Session: e3, Authorization: this.authorization, Range: "npt=".concat(t3.from >= 0 ? t3.from : 0, "-").concat(t3.to > 0 ? t3.to : "") });
      return super.request(i3);
    }
    async pause(e3) {
      const t3 = new a2.yz("PAUSE", this.uri, this.version, { CSeq: "" + this.seq++, Session: e3, Authorization: this.authorization });
      return super.request(t3);
    }
    async teardown(e3) {
      const t3 = new a2.yz("TEARDOWN", this.uri, this.version, { CSeq: "" + this.seq++, Session: e3, Authorization: this.authorization });
      await super.notify(t3);
    }
    async readPacket() {
      for (; ; ) {
        36 !== await this.ioReader.peekUint8() && await this.readResponse(), await this.ioReader.skip(1);
        const e3 = await this.ioReader.readUint8(), t3 = await this.ioReader.readUint16();
        return { interleaved: e3, data: await this.ioReader.readBuffer(t3) };
      }
    }
  }
}, 87631: (e2, t2, i2) => {
  i2.d(t2, { lN: () => s2 }), i2(67672);
  const r2 = /(.*)/, a2 = "%s", s2 = { v: [{ name: "version", reg: /^(\d*)$/, format: a2 }], o: [{ name: "origin", reg: /^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/, names: ["username", "sessionId", "sessionVersion", "netType", "ipVer", "address"], format: "%s %s %d %s IP%d %s" }], s: [{ name: "name", reg: r2, format: a2 }], i: [{ name: "description", reg: r2, format: a2 }], u: [{ name: "uri", reg: r2, format: a2 }], e: [{ name: "email", reg: r2, format: a2 }], p: [{ name: "phone", reg: r2, format: a2 }], z: [{ name: "timezones", reg: r2, format: a2 }], r: [{ name: "repeats", reg: r2, format: a2 }], t: [{ name: "timing", reg: /^(\d*) (\d*)/, names: ["start", "stop"], format: "%d %d" }], c: [{ name: "connection", reg: /^IN IP(\d) (\S*)/, names: ["version", "ip"], format: "IN IP%d %s" }], b: [{ push: "bandwidth", reg: /^(TIAS|AS|CT|RR|RS):(\d*)/, names: ["type", "limit"], format: "%s:%s" }], m: [{ reg: /^(\w*) (\d*) ([\w/]*)(?: (.*))?/, names: ["type", "port", "protocol", "payloads"], format: "%s %d %s %s" }], a: [{ push: "rtp", reg: /^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/, names: ["payload", "codec", "rate", "encoding"], format: function(e3) {
    return e3.encoding ? "rtpmap:%d %s/%s/%s" : e3.rate ? "rtpmap:%d %s/%s" : "rtpmap:%d %s";
  } }, { push: "fmtp", reg: /^fmtp:(\d*) ([\S| ]*)/, names: ["payload", "config"], format: "fmtp:%d %s" }, { name: "control", reg: /^control:(.*)/, format: "control:%s" }, { name: "rtcp", reg: /^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/, names: ["port", "netType", "ipVer", "address"], format: function(e3) {
    return null != e3.address ? "rtcp:%d %s IP%d %s" : "rtcp:%d";
  } }, { push: "rtcpFbTrrInt", reg: /^rtcp-fb:(\*|\d*) trr-int (\d*)/, names: ["payload", "value"], format: "rtcp-fb:%s trr-int %d" }, { push: "rtcpFb", reg: /^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/, names: ["payload", "type", "subtype"], format: function(e3) {
    return null != e3.subtype ? "rtcp-fb:%s %s %s" : "rtcp-fb:%s %s";
  } }, { push: "ext", reg: /^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/, names: ["value", "direction", "encrypt-uri", "uri", "config"], format: function(e3) {
    return "extmap:%d" + (e3.direction ? "/%s" : "%v") + (e3["encrypt-uri"] ? " %s" : "%v") + " %s" + (e3.config ? " %s" : "");
  } }, { name: "extmapAllowMixed", reg: /^(extmap-allow-mixed)/, format: a2 }, { push: "crypto", reg: /^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/, names: ["id", "suite", "config", "sessionConfig"], format: function(e3) {
    return null != e3.sessionConfig ? "crypto:%d %s %s %s" : "crypto:%d %s %s";
  } }, { name: "setup", reg: /^setup:(\w*)/, format: "setup:%s" }, { name: "connectionType", reg: /^connection:(new|existing)/, format: "connection:%s" }, { name: "mid", reg: /^mid:([^\s]*)/, format: "mid:%s" }, { name: "msid", reg: /^msid:(.*)/, format: "msid:%s" }, { name: "ptime", reg: /^ptime:(\d*(?:\.\d*)*)/, format: "ptime:%d" }, { name: "maxptime", reg: /^maxptime:(\d*(?:\.\d*)*)/, format: "maxptime:%d" }, { name: "direction", reg: /^(sendrecv|recvonly|sendonly|inactive)/, format: a2 }, { name: "icelite", reg: /^(ice-lite)/, format: a2 }, { name: "iceUfrag", reg: /^ice-ufrag:(\S*)/, format: "ice-ufrag:%s" }, { name: "icePwd", reg: /^ice-pwd:(\S*)/, format: "ice-pwd:%s" }, { name: "fingerprint", reg: /^fingerprint:(\S*) (\S*)/, names: ["type", "hash"], format: "fingerprint:%s %s" }, { push: "candidates", reg: /^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/, names: ["foundation", "component", "transport", "priority", "ip", "port", "type", "raddr", "rport", "tcptype", "generation", "network-id", "network-cost"], format: function(e3) {
    let t3 = "candidate:%s %d %s %d %s %d typ %s";
    return t3 += null != e3.raddr ? " raddr %s rport %d" : "%v%v", t3 += null != e3.tcptype ? " tcptype %s" : "%v", null != e3.generation && (t3 += " generation %d"), t3 += null != e3["network-id"] ? " network-id %d" : "%v", t3 += null != e3["network-cost"] ? " network-cost %d" : "%v", t3;
  } }, { name: "endOfCandidates", reg: /^(end-of-candidates)/, format: a2 }, { name: "remoteCandidates", reg: /^remote-candidates:(.*)/, format: "remote-candidates:%s" }, { name: "iceOptions", reg: /^ice-options:(\S*)/, format: "ice-options:%s" }, { push: "ssrcs", reg: /^ssrc:(\d*) ([\w_-]*)(?::(.*))?/, names: ["id", "attribute", "value"], format: function(e3) {
    let t3 = "ssrc:%d";
    return null != e3.attribute && (t3 += " %s", null != e3.value && (t3 += ":%s")), t3;
  } }, { push: "ssrcGroups", reg: /^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/, names: ["semantics", "ssrcs"], format: "ssrc-group:%s %s" }, { name: "msidSemantic", reg: /^msid-semantic:\s?(\w*) (\S*)/, names: ["semantic", "token"], format: "msid-semantic: %s %s" }, { push: "groups", reg: /^group:(\w*) (.*)/, names: ["type", "mids"], format: "group:%s %s" }, { name: "rtcpMux", reg: /^(rtcp-mux)/, format: a2 }, { name: "rtcpRsize", reg: /^(rtcp-rsize)/, format: a2 }, { name: "sctpmap", reg: /^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/, names: ["sctpmapNumber", "app", "maxMessageSize"], format: function(e3) {
    return null != e3.maxMessageSize ? "sctpmap:%s %s %s" : "sctpmap:%s %s";
  } }, { name: "xGoogleFlag", reg: /^x-google-flag:([^\s]*)/, format: "x-google-flag:%s" }, { push: "rids", reg: /^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/, names: ["id", "direction", "params"], format: function(e3) {
    return e3.params ? "rid:%s %s %s" : "rid:%s %s";
  } }, { push: "imageattrs", reg: new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"), names: ["pt", "dir1", "attrs1", "dir2", "attrs2"], format: function(e3) {
    return "imageattr:%s %s %s" + (e3.dir2 ? " %s %s" : "");
  } }, { name: "simulcast", reg: new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"), names: ["dir1", "list1", "dir2", "list2"], format: function(e3) {
    return "simulcast:%s %s" + (e3.dir2 ? " %s %s" : "");
  } }, { name: "simulcast_03", reg: /^simulcast:[\s\t]+([\S+\s\t]+)$/, names: ["value"], format: "simulcast: %s" }, { name: "framerate", reg: /^framerate:(\d+(?:$|\.\d+))/, format: "framerate:%s" }, { name: "sourceFilter", reg: /^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/, names: ["filterMode", "netType", "addressTypes", "destAddress", "srcList"], format: "source-filter: %s %s %s %s %s" }, { name: "bundleOnly", reg: /^(bundle-only)/, format: a2 }, { name: "label", reg: /^label:(.+)/, format: "label:%s" }, { name: "sctpPort", reg: /^sctp-port:(\d+)$/, format: "sctp-port:%s" }, { name: "maxMessageSize", reg: /^max-message-size:(\d+)$/, format: "max-message-size:%s" }, { push: "tsRefClocks", reg: /^ts-refclk:([^\s=]*)(?:=(\S*))?/, names: ["clksrc", "clksrcExt"], format: function(e3) {
    return "ts-refclk:%s" + (null != e3.clksrcExt ? "=%s" : "");
  } }, { name: "mediaClk", reg: /^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/, names: ["id", "mediaClockName", "mediaClockValue", "rateNumerator", "rateDenominator"], format: function(e3) {
    let t3 = "mediaclk:";
    return t3 += null != e3.id ? "id=%s %s" : "%v%s", t3 += null != e3.mediaClockValue ? "=%s" : "", t3 += null != e3.rateNumerator ? " rate=%s" : "", t3 += null != e3.rateDenominator ? "/%s" : "", t3;
  } }, { name: "keywords", reg: /^keywds:(.+)$/, format: "keywds:%s" }, { name: "content", reg: /^content:(.+)/, format: "content:%s" }, { name: "bfcpFloorCtrl", reg: /^floorctrl:(c-only|s-only|c-s)/, format: "floorctrl:%s" }, { name: "bfcpConfId", reg: /^confid:(\d+)/, format: "confid:%s" }, { name: "bfcpUserId", reg: /^userid:(\d+)/, format: "userid:%s" }, { name: "bfcpFloorId", reg: /^floorid:(.+) (?:m-stream|mstrm):(.+)/, names: ["id", "mStream"], format: "floorid:%s mstrm:%s" }, { push: "invalid", reg: r2, names: ["value"], format: a2 }] };
}, 47860: (e2, t2, i2) => {
  i2.d(t2, { q: () => o });
  var r2 = i2(87631);
  i2(67672);
  const a2 = (e3) => /^([a-z])=(.*)/.test(e3);
  function s2(e3) {
    return String(Number(e3)) === e3 ? Number(e3) : e3;
  }
  function n(e3, t3, i3) {
    const r3 = e3.name && e3.names;
    e3.push && !t3[e3.push] ? t3[e3.push] = [] : r3 && !t3[e3.name] && (t3[e3.name] = {});
    const a3 = e3.push ? {} : r3 ? t3[e3.name] : t3;
    !(function(e4, t4, i4, r4) {
      if (r4 && !i4) t4[r4] = s2(e4[1]);
      else for (let r5 = 0; r5 < i4.length; r5 += 1) null != e4[r5 + 1] && (t4[i4[r5]] = s2(e4[r5 + 1]));
    })(i3.match(e3.reg), a3, e3.names, e3.name), e3.push && t3[e3.push].push(a3);
  }
  function o(e3) {
    const t3 = {}, i3 = [];
    let s3 = t3;
    return e3.split(/(\r\n|\r|\n)/).filter(a2).forEach((e4) => {
      const t4 = e4[0], a3 = e4.slice(2);
      "m" === t4 && (i3.push({ rtp: [], fmtp: [] }), s3 = i3[i3.length - 1]);
      for (let e5 = 0; e5 < (r2.lN[t4] || []).length; e5 += 1) {
        const i4 = r2.lN[t4][e5];
        if (i4.reg.test(a3)) return n(i4, s3, a3);
      }
    }), t3.media = i3, t3;
  }
}, 88103: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(134), a2 = i2(43356), s2 = i2(4624);
  class n extends a2.A {
    constructor(e3, t3) {
      super(e3, t3), (0, r2.A)(this, "context", void 0), (0, r2.A)(this, "paddingLeft", void 0), (0, r2.A)(this, "paddingTop", void 0), (0, r2.A)(this, "flipX", void 0), (0, r2.A)(this, "flipY", void 0), this.paddingLeft = 0, this.paddingTop = 0, this.flipX = 1, this.flipY = 1;
    }
    async init() {
      if ("rec2100-hlg" === this.options.colorSpace || "rec2100-pq" === this.options.colorSpace) try {
        this.context = this.canvas.getContext("2d", { colorSpace: this.options.colorSpace, pixelFormat: "float16" });
      } catch (e3) {
        s2.R8("cannot got hdr context, video rendering colors may not be correct, please use the latest version of chrome then in chrome://flags, set: Experimental Web Platform features: Enabled", "src/avrender/image/Canvas2dRender.ts", 63);
      }
      this.context || (this.context = this.canvas.getContext("2d"));
    }
    clear() {
      const e3 = this.canvas.width >> 1, t3 = this.canvas.height >> 1;
      this.rotate && (this.context.translate(e3, t3), this.context.rotate(-this.rotate * Math.PI / 180), this.context.translate(-e3, -t3)), this.context.clearRect(0, 0, this.canvasWidth * this.options.devicePixelRatio, this.canvasHeight * this.options.devicePixelRatio), this.rotate && (this.context.translate(e3, t3), this.context.rotate(this.rotate * Math.PI / 180), this.context.translate(-e3, -t3));
    }
    checkFrame(e3) {
      e3.codedWidth === this.textureWidth && e3.codedHeight === this.videoHeight && e3.codedWidth === this.videoWidth || (this.videoWidth = e3.codedWidth, this.videoHeight = e3.codedHeight, this.textureWidth = e3.codedWidth, this.layout());
    }
    render(e3) {
      this.lost || (this.checkFrame(e3), this.context.drawImage(e3, this.paddingLeft, this.paddingTop, this.canvasWidth * this.options.devicePixelRatio - 2 * this.paddingLeft, this.canvasHeight * this.options.devicePixelRatio - 2 * this.paddingTop));
    }
    layout() {
      let e3 = this.videoWidth, t3 = this.videoHeight, i3 = this.canvasWidth, r3 = this.canvasHeight;
      this.options.sar && 1 !== this.options.sar && (e3 = Math.floor(this.videoWidth * this.options.sar));
      let a3 = 0, s3 = 0;
      90 !== this.rotate && 270 !== this.rotate || (s3 = Math.floor((r3 - i3) / 2), a3 = Math.floor((i3 - r3) / 2), i3 = this.canvasHeight, r3 = this.canvasWidth);
      const n2 = e3 / i3, o = t3 / r3;
      let c;
      if (c = n2 > 1 ? !(n2 < o) : n2 > o, 1 === this.renderMode && (c = !c), c) {
        const n3 = (r3 - t3 * i3 / e3) / r3;
        this.paddingTop = (Math.floor(n3 / 2 * r3) + s3) * this.options.devicePixelRatio, this.paddingLeft = a3 * this.options.devicePixelRatio;
      } else {
        const n3 = (i3 - e3 * r3 / t3) / i3;
        this.paddingLeft = (Math.floor(n3 / 2 * i3) + a3) * this.options.devicePixelRatio, this.paddingTop = s3 * this.options.devicePixelRatio;
      }
      if (this.context) {
        let e4 = 1, t4 = 1;
        this.flipHorizontal && (e4 = -1), this.flipVertical && (t4 = -1);
        const i4 = this.canvas.width >> 1, r4 = this.canvas.height >> 1;
        this.context.translate(i4, r4), e4 !== this.flipX && this.context.scale(-1, 1), t4 !== this.flipY && this.context.scale(1, -1), this.context.translate(-i4, -r4), this.flipX = e4, this.flipY = t4;
      }
    }
    setRotate(e3, t3 = true) {
      if ((e3 %= 360) === this.rotate) return;
      const i3 = this.canvas.width >> 1, r3 = this.canvas.height >> 1;
      this.rotate && (this.context.translate(i3, r3), this.context.rotate(-this.rotate * Math.PI / 180), this.context.translate(-i3, -r3)), t3 && this.clear(), this.rotate = e3, this.context && (this.context.translate(i3, r3), this.context.rotate(this.rotate * Math.PI / 180), this.context.translate(-i3, -r3)), this.layout();
    }
    destroy() {
      this.context = null, super.destroy();
    }
    static isSupport(e3) {
      return e3 instanceof VideoFrame || e3 instanceof ImageBitmap;
    }
  }
}, 43356: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134), a2 = i2(6110);
  class s2 {
    constructor(e3, t3) {
      (0, r2.A)(this, "canvas", void 0), (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "textureWidth", void 0), (0, r2.A)(this, "videoWidth", void 0), (0, r2.A)(this, "videoHeight", void 0), (0, r2.A)(this, "canvasWidth", void 0), (0, r2.A)(this, "canvasHeight", void 0), (0, r2.A)(this, "rotate", void 0), (0, r2.A)(this, "renderMode", void 0), (0, r2.A)(this, "format", void 0), (0, r2.A)(this, "lost", void 0), (0, r2.A)(this, "destroyed", void 0), (0, r2.A)(this, "srcColorSpace", void 0), (0, r2.A)(this, "dstColorSpace", void 0), (0, r2.A)(this, "flipHorizontal", void 0), (0, r2.A)(this, "flipVertical", void 0), this.canvas = e3, this.options = t3, this.canvasWidth = e3.width, this.canvasHeight = e3.height, this.videoWidth = 0, this.videoHeight = 0, this.textureWidth = 0, this.rotate = 0, this.renderMode = t3.renderMode, this.flipHorizontal = false, this.flipVertical = false, this.lost = false, this.destroyed = false, t3.dstColorSpace ? this.dstColorSpace = t3.dstColorSpace : this.dstColorSpace = new a2.A(1, 1, 1, 1);
    }
    getRotateMatrix(e3) {
      e3 = Math.PI * e3 / 180;
      const t3 = Math.sin(e3), i3 = Math.cos(e3);
      return [i3, -t3, 0, 0, t3, i3, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];
    }
    setRenderMode(e3) {
      this.renderMode !== e3 && (this.renderMode = e3, this.layout(), this.clear());
    }
    enableHorizontalFlip(e3) {
      this.flipHorizontal !== e3 && (this.flipHorizontal = e3, this.layout(), this.clear());
    }
    enableVerticalFlip(e3) {
      this.flipVertical !== e3 && (this.flipVertical = e3, this.layout(), this.clear());
    }
    viewport(e3, t3) {
      if (this.canvasWidth !== e3 || this.canvasHeight !== t3) {
        const i3 = this.options.devicePixelRatio;
        this.canvasWidth = e3, this.canvasHeight = t3, this.canvas.width = e3 * i3, this.canvas.height = t3 * i3, this.videoWidth && this.videoHeight && this.layout();
      }
    }
    getVideoWidth() {
      return this.videoWidth;
    }
    getVideoHeight() {
      return this.videoHeight;
    }
    destroy() {
      this.canvas = null, this.destroyed = true;
    }
    setDstColorSpace(e3) {
      this.dstColorSpace = e3;
    }
    static isSupport(e3) {
      return false;
    }
  }
}, 3016: (e2, t2, i2) => {
  i2.d(t2, { A: () => v });
  var r2 = i2(134), a2 = i2(20088), s2 = i2(74503), n = i2(63939), o = i2(94300), c = i2(14686), d2 = i2(97317), h = i2(10243), l = i2(25669), u = i2(57517), f = i2(6110), p = i2(56024), m = i2(25408), g = i2(72703);
  class v extends h.A {
    constructor(e3, t3) {
      super(e3, t3), (0, r2.A)(this, "linesize", void 0), (0, r2.A)(this, "hdrMetadata", void 0), this.hdrMetadata = (0, s2.A)(a2.A), this.hdrMetadata.multiplier = 1;
    }
    async init() {
      if (await super.init(), !(this.gl instanceof WebGL2RenderingContext)) throw new Error("not support webgl2");
    }
    generateVertexSource() {
      return "#version 300 es\n      precision highp float;\n      in vec3 point;\n      in vec4 color;\n      out vec4 v_color;\n      uniform mat4 rotateMatrix;\n      void main(void) {\n        gl_Position = rotateMatrix * vec4(point, 1.0);\n        v_color = color;\n      }\n    ";
    }
    generateFragmentSource(e3, t3) {
      t3.outputRGB = true;
      const i3 = (0, l.A)(this.srcColorSpace, this.dstColorSpace, t3), r3 = ["y", "u", "v", "a"], a3 = ["r", "g", "b", "a"], s3 = [], n2 = [], o2 = [];
      e3.comp.forEach((e4, t4) => {
        s3[t4] = e4.depth + 7 >>> 3, n2[t4] = e4.shift, o2[t4] = (1 << e4.depth) - 1;
      });
      let c2 = "texture(".concat(r3[e3.comp[0].plane], "_Sampler, v_color.xy).").concat(a3[e3.comp[0].offset / s3[0]]), d3 = e3.comp[1] ? "texture(".concat(r3[e3.comp[1].plane], "_Sampler, v_color.xy).").concat(a3[e3.comp[1].offset / s3[1]]) : 32 & e3.flags ? "0.0" : "0.5", h2 = e3.comp[2] ? "texture(".concat(r3[e3.comp[2].plane], "_Sampler, v_color.xy).").concat(a3[e3.comp[2].offset / s3[2]]) : 32 & e3.flags ? "0.0" : "0.5", u2 = "1.0";
      function f2(e4) {
        return /^texture/.test(e4);
      }
      128 & e3.flags && (u2 = "texture(".concat(r3[e3.comp[e3.comp.length - 1].plane], "_Sampler, v_color.xy).").concat(a3[e3.comp[e3.comp.length - 1].offset / s3[e3.comp.length - 1]]), 2 === e3.comp.length && (d3 = 32 & e3.flags ? "0.0" : "0.5")), this.fragmentSource = "#version 300 es\n      precision highp float;\n      precision highp usampler2D;\n      in vec4 v_color;\n      out vec4 outColor;\n      uniform usampler2D y_Sampler;\n      uniform usampler2D u_Sampler;\n      uniform usampler2D v_Sampler;\n      uniform usampler2D a_Sampler;\n      uniform float offset;\n      uniform float multiplier;\n      uniform float pq_tonemap_a;\n      uniform float pq_tonemap_b;\n      uniform float hlg_ootf_gamma_minus_one;\n      uniform float nits_to_sdr_relative_factor;\n      uniform float sdr_relative_to_nits_factor;\n      ".concat(1 & e3.flags ? "\n        uint swap(uint x) {\n          uint l = x & 0xFFu;\n          uint h = (x >> 8u) & 0xFFu;\n          return (l << 8u) | h;\n        }\n      " : "", "\n      void main () {\n        float y = ").concat(f2(c2) ? "float(".concat(1 & e3.flags ? "swap(".concat(c2, ")") : c2, " >> ").concat(n2[0], ") / float(").concat(o2[0], ")") : c2, ";\n        float u = ").concat(f2(d3) ? "float(".concat(1 & e3.flags ? "swap(".concat(d3, ")") : d3, " >> ").concat(n2[1], ") / float(").concat(o2[1], ")") : d3, ";\n        float v = ").concat(f2(h2) ? "float(".concat(1 & e3.flags ? "swap(".concat(h2, ")") : h2, " >> ").concat(n2[2], ") / float(").concat(o2[2], ")") : h2, ";\n        float a = ").concat(f2(u2) ? "float(".concat(1 & e3.flags ? "swap(".concat(u2, ")") : u2, " >> ").concat(n2[e3.comp.length - 1], ") / float(").concat(o2[e3.comp.length - 1], ")") : u2, ";\n        vec4 color = vec4(y, u, v, a);\n        if (color.a > 0.0) {\n          color.r /= color.a;\n          color.g /= color.a;\n          color.b /= color.a;\n        }\n        color.r -= offset;\n        color.g -= offset;\n        color.b -= offset;\n        color.r *= multiplier;\n        color.g *= multiplier;\n        color.b *= multiplier;\n        ").concat(i3.reduce((e4, t4) => e4 + t4, ""), "\n        color.r *= color.a;\n        color.g *= color.a;\n        color.b *= color.a;\n        outColor = color;\n      }\n    ");
    }
    checkFrame(e3) {
      if (n.f[15](e3 + 32) !== this.linesize || n.f[15](e3 + 72) !== this.videoHeight || n.f[15](e3 + 68) !== this.videoWidth || n.f[15](e3 + 80) !== this.format) {
        const t3 = (0, d2.I)(n.f[15](e3 + 80));
        this.srcColorSpace = new f.A(n.f[15](e3 + 220), n.f[15](e3 + 212), n.f[15](e3 + 216), n.f[15](e3 + 208));
        const i3 = { type: 0, bitDepth: t3.comp[0].depth, toneMapPQAndHlgToDst: true, metadata: this.hdrMetadata, dstSdrMaxLuminanceNits: u.kH, dstMaxLuminanceRelative: 1 }, r3 = (0, p.aH)(e3, 14);
        if (r3) {
          const e4 = n.f[20](r3 + 4);
          n.f[8](e4) > 0 && (i3.maxContentLightLevel = n.f[8](e4));
        }
        if (this.generateFragmentSource(t3, i3), this.program = new m.A(this.fragmentSource, this.generateVertexSource()), this.useProgram(true), this.program.setMetaData(this.hdrMetadata), this.yTexture.setFormat(this.gl.RED_INTEGER), this.yTexture.setInternalformat(this.gl.R16UI), this.yTexture.setDataType(this.gl.UNSIGNED_SHORT), this.uTexture.setFormat(this.gl.RED_INTEGER), this.uTexture.setInternalformat(this.gl.R16UI), this.uTexture.setDataType(this.gl.UNSIGNED_SHORT), this.vTexture.setFormat(this.gl.RED_INTEGER), this.vTexture.setInternalformat(this.gl.R16UI), this.vTexture.setDataType(this.gl.UNSIGNED_SHORT), this.aTexture.setFormat(this.gl.RED_INTEGER), this.aTexture.setInternalformat(this.gl.R16UI), this.aTexture.setDataType(this.gl.UNSIGNED_SHORT), 16 & t3.flags) {
          let i4 = 0;
          if (this.yTexture.setSize(n.f[15](e3 + 32 + 4 * i4++) >>> 1, n.f[15](e3 + 72)), t3.comp.length > 2) {
            const r4 = t3.comp[1].plane === t3.comp[2].plane;
            this.uTexture.setSize(n.f[15](e3 + 32 + 4 * i4++) >>> (r4 ? 2 : 1), n.f[15](e3 + 72) >>> t3.log2ChromaH), r4 || this.vTexture.setSize(n.f[15](e3 + 32 + 4 * i4++) >>> 1, n.f[15](e3 + 72) >>> t3.log2ChromaH), r4 && (this.uTexture.setFormat(this.gl.RG_INTEGER), this.uTexture.setInternalformat(this.gl.RG16UI));
          }
          128 & t3.flags && this.aTexture.setSize(n.f[15](e3 + 32 + 4 * i4++) >>> 1, n.f[15](e3 + 72)), this.textureWidth = n.f[15](e3 + 32) >>> 1;
        } else {
          const i4 = t3.comp[0].depth + 7 >>> 3;
          let r4 = t3.comp[0].step / i4;
          const a3 = [0, this.gl.RED_INTEGER, this.gl.RG_INTEGER, this.gl.RGB_INTEGER, this.gl.RGBA_INTEGER], s3 = [0, this.gl.R16UI, this.gl.RG16UI, this.gl.RGB16UI, this.gl.RGBA16UI];
          this.yTexture.setFormat(a3[r4]), this.yTexture.setInternalformat(s3[r4]), this.yTexture.setSize(n.f[15](e3 + 32) / r4 >>> 1, n.f[15](e3 + 72)), this.textureWidth = n.f[15](e3 + 32) / r4 >>> 1;
        }
        this.linesize = n.f[15](e3 + 32), this.videoWidth = n.f[15](e3 + 68), this.videoHeight = n.f[15](e3 + 72), this.format = n.f[15](e3 + 80), this.layout();
      }
    }
    render(e3) {
      if (this.lost) return;
      let t3 = (0, d2.I)(n.f[15](e3 + 80));
      if (!t3) return;
      this.checkFrame(e3);
      let i3 = 0;
      this.yTexture.fill((0, c.bg)(n.f[20](e3 + 4 * i3), (n.f[15](e3 + 32 + 4 * i3++) >>> 1) * this.yTexture.height)), 16 & t3.flags && (t3.comp.length > 2 && (this.uTexture.fill((0, c.bg)(n.f[20](e3 + 4 * i3), (n.f[15](e3 + 32 + 4 * i3++) >>> 1) * this.uTexture.height)), t3.comp[1].plane !== t3.comp[2].plane && this.vTexture.fill((0, c.bg)(n.f[20](e3 + 4 * i3), (n.f[15](e3 + 32 + 4 * i3++) >>> 1) * this.vTexture.height))), 128 & t3.flags && this.aTexture.fill((0, c.bg)(n.f[20](e3 + 4 * i3), (n.f[15](e3 + 32 + 4 * i3++) >>> 1) * this.aTexture.height))), this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, 4);
    }
    destroy() {
      this.hdrMetadata && ((0, o.A)(this.hdrMetadata), this.hdrMetadata = null), super.destroy();
    }
    static isSupport(e3) {
      if ((0, g.A)(e3)) {
        const t3 = (0, d2.I)(n.f[15](e3 + 80));
        if (t3) return t3.comp[0].depth + 7 >>> 3 == 2;
      }
      return false;
    }
  }
}, 69047: (e2, t2, i2) => {
  i2.d(t2, { A: () => u });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(14686), n = i2(97317), o = i2(10243), c = i2(18915), d2 = i2(25669), h = i2(6110), l = i2(72703);
  class u extends o.A {
    constructor(e3, t3) {
      super(e3, t3), (0, r2.A)(this, "linesize", void 0);
    }
    async init() {
      await super.init();
    }
    generateFragmentSource(e3) {
      const t3 = (0, d2.A)(this.srcColorSpace, this.dstColorSpace, { bitDepth: 8, type: 0, outputRGB: true }), i3 = ["y", "u", "v", "a"], r3 = 16 & e3.flags && e3.comp.length > 2 && e3.comp[1].plane === e3.comp[2].plane ? ["r", "a"] : ["r", "g", "b", "a"];
      let a3 = "texture2D(".concat(i3[e3.comp[0].plane], "_Sampler, v_color.xy).").concat(r3[e3.comp[0].offset]), s3 = e3.comp[1] ? "texture2D(".concat(i3[e3.comp[1].plane], "_Sampler, v_color.xy).").concat(r3[e3.comp[1].offset]) : 32 & e3.flags ? "0.0" : "0.5", n2 = e3.comp[2] ? "texture2D(".concat(i3[e3.comp[2].plane], "_Sampler, v_color.xy).").concat(r3[e3.comp[2].offset]) : 32 & e3.flags ? "0.0" : "0.5", o2 = "1.0";
      128 & e3.flags && (o2 = "texture2D(".concat(i3[e3.comp[e3.comp.length - 1].plane], "_Sampler, v_color.xy).").concat(r3[e3.comp[e3.comp.length - 1].offset]), 2 === e3.comp.length && (s3 = 32 & e3.flags ? "0.0" : "0.5")), this.fragmentSource = "\n      precision highp float;\n      varying vec4 v_color;\n      uniform sampler2D y_Sampler;\n      uniform sampler2D u_Sampler;\n      uniform sampler2D v_Sampler;\n      uniform sampler2D a_Sampler;\n      void main () {\n        float y = ".concat(a3, ";\n        float u = ").concat(s3, ";\n        float v = ").concat(n2, ";\n        float alpha = ").concat(o2, ";\n        vec4 color = vec4(y, u, v, alpha);\n        ").concat(t3.reduce((e4, t4) => e4 + t4, ""), "\n        gl_FragColor = color;\n      }\n    ");
    }
    checkFrame(e3) {
      if (a2.f[15](e3 + 32) !== this.linesize || a2.f[15](e3 + 72) !== this.videoHeight || a2.f[15](e3 + 68) !== this.videoWidth) {
        const t3 = (0, n.I)(a2.f[15](e3 + 80));
        if (this.srcColorSpace = new h.A(a2.f[15](e3 + 220), a2.f[15](e3 + 212), a2.f[15](e3 + 216), a2.f[15](e3 + 208)), this.generateFragmentSource(t3), this.program = new c.A(this.fragmentSource), this.useProgram(), 16 & t3.flags) {
          let i3 = 0;
          if (this.yTexture.setSize(a2.f[15](e3 + 32 + 4 * i3++), a2.f[15](e3 + 72)), t3.comp.length > 2) {
            const r3 = t3.comp[1].plane === t3.comp[2].plane;
            this.uTexture.setSize(a2.f[15](e3 + 32 + 4 * i3++) >>> (r3 ? 1 : 0), a2.f[15](e3 + 72) >>> t3.log2ChromaH), r3 || this.vTexture.setSize(a2.f[15](e3 + 32 + 4 * i3++), a2.f[15](e3 + 72) >>> t3.log2ChromaH), r3 && (this.uTexture.setFormat(this.gl.LUMINANCE_ALPHA), this.uTexture.setInternalformat(this.gl.LUMINANCE_ALPHA));
          }
          128 & t3.flags && this.aTexture.setSize(a2.f[15](e3 + 32 + 4 * i3++), a2.f[15](e3 + 72)), this.textureWidth = a2.f[15](e3 + 32);
        } else {
          const i3 = t3.comp[0].depth + 7 >>> 3;
          let r3 = t3.comp[0].step / i3;
          const s3 = [0, this.gl.LUMINANCE, this.gl.LUMINANCE_ALPHA, this.gl.RGB, this.gl.RGBA];
          this.yTexture.setFormat(s3[r3]), this.yTexture.setInternalformat(s3[r3]), this.yTexture.setSize(a2.f[15](e3 + 32) / r3, a2.f[15](e3 + 72)), this.textureWidth = a2.f[15](e3 + 32) / r3;
        }
        this.linesize = a2.f[15](e3 + 32), this.videoWidth = a2.f[15](e3 + 68), this.videoHeight = a2.f[15](e3 + 72), this.format = a2.f[15](e3 + 80), this.layout();
      }
    }
    render(e3) {
      if (this.lost) return;
      let t3 = (0, n.I)(a2.f[15](e3 + 80));
      if (!t3) return;
      this.checkFrame(e3);
      let i3 = 0;
      this.yTexture.fill((0, s2.s3)(a2.f[20](e3 + 4 * i3), a2.f[15](e3 + 32 + 4 * i3++) * this.yTexture.height)), 16 & t3.flags && (t3.comp.length > 2 && (this.uTexture.fill((0, s2.s3)(a2.f[20](e3 + 4 * i3), a2.f[15](e3 + 32 + 4 * i3++) * this.uTexture.height)), t3.comp[1].plane !== t3.comp[2].plane && this.vTexture.fill((0, s2.s3)(a2.f[20](e3 + 4 * i3), a2.f[15](e3 + 32 + 4 * i3++) * this.vTexture.height))), 128 & t3.flags && this.aTexture.fill((0, s2.s3)(a2.f[20](e3 + 4 * i3), a2.f[15](e3 + 32 + 4 * i3) * this.aTexture.height))), this.gl.drawArrays(this.gl.TRIANGLE_STRIP, 0, 4);
    }
    static isSupport(e3) {
      if ((0, l.A)(e3)) {
        const t3 = (0, n.I)(a2.f[15](e3 + 80));
        if (t3) return t3.comp[0].depth + 7 >>> 3 == 1;
      }
      return false;
    }
  }
}, 10243: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(134), a2 = i2(18105), s2 = i2(94012);
  class n extends s2.A {
    constructor(e3, t3) {
      super(e3, t3), (0, r2.A)(this, "yTexture", void 0), (0, r2.A)(this, "uTexture", void 0), (0, r2.A)(this, "vTexture", void 0), (0, r2.A)(this, "aTexture", void 0);
    }
    useProgram(e3 = false) {
      super.useProgram(), this.yTexture = new a2.A(this.gl), e3 && this.yTexture.setFilter(this.gl.NEAREST), this.yTexture.bind(0), this.yTexture.init(), this.program.bindYTexture(0), this.uTexture = new a2.A(this.gl), e3 && this.uTexture.setFilter(this.gl.NEAREST), this.uTexture.bind(1), this.uTexture.init(), this.program.bindUTexture(1), this.vTexture = new a2.A(this.gl), e3 && this.vTexture.setFilter(this.gl.NEAREST), this.vTexture.bind(2), this.vTexture.init(), this.program.bindVTexture(2), this.aTexture = new a2.A(this.gl), e3 && this.aTexture.setFilter(this.gl.NEAREST), this.aTexture.bind(3), this.aTexture.init(), this.program.bindATexture(3);
    }
    destroy() {
      this.yTexture && (this.yTexture.destroy(), this.yTexture = null), this.uTexture && (this.uTexture.destroy(), this.uTexture = null), this.vTexture && (this.vTexture.destroy(), this.vTexture = null), this.aTexture && (this.aTexture.destroy(), this.aTexture = null), super.destroy();
    }
  }
}, 94012: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(134), a2 = i2(4624), s2 = i2(43356), n = i2(38469);
  const o = "src/avrender/image/WebGLRender.ts";
  class c extends s2.A {
    constructor(e3, t3) {
      super(e3, t3), (0, r2.A)(this, "gl", void 0), (0, r2.A)(this, "vbo", void 0), (0, r2.A)(this, "program", void 0), (0, r2.A)(this, "vertex", void 0), (0, r2.A)(this, "webglContextLostTimer", void 0), (0, r2.A)(this, "onWebglContextLost", void 0), (0, r2.A)(this, "onWebglContextRestored", void 0), (0, r2.A)(this, "fragmentSource", void 0), (0, r2.A)(this, "vertexSource", void 0);
    }
    async init() {
      this.gl = this.canvas.getContext("webgl2", { alpha: false, antialias: false, preserveDrawingBuffer: this.options.preserveDrawingBuffer }), this.gl || (this.gl = this.canvas.getContext("webgl", { alpha: false, antialias: false, preserveDrawingBuffer: this.options.preserveDrawingBuffer })), this.gl || (this.gl = this.canvas.getContext("experimental-webgl", { alpha: false, antialias: false, preserveDrawingBuffer: this.options.preserveDrawingBuffer })), this.gl || a2.h2("can not support webgl, got WebGLRenderingContext failed", o, 96), this.vbo = this.gl.createBuffer(), this.vbo || a2.h2("create vao buffer failed", o, 101), this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.vbo), this.gl.enable(this.gl.BLEND), this.gl.clearColor(0, 0, 0, 0), this.gl.clearDepth(1), this.viewport(this.canvasWidth || this.canvas.width, this.canvasHeight || this.canvas.height), this.onWebglContextLost = (e3) => {
        this.destroyed || (this.webglContextLostTimer = setTimeout(() => {
          this.lost = true, this.webglContextLostTimer = null, a2.z3("webgl context lost", o, 118), this.options.onRenderContextLost && this.options.onRenderContextLost();
        }, 3e3));
      }, this.onWebglContextRestored = (e3) => {
        this.webglContextLostTimer && (clearTimeout(this.webglContextLostTimer), this.webglContextLostTimer = null);
      }, this.canvas.addEventListener("webglcontextlost", this.onWebglContextLost), this.canvas.addEventListener("webglcontextrestored", this.onWebglContextRestored);
    }
    viewport(e3, t3) {
      this.gl.viewport(0, 0, e3 * this.options.devicePixelRatio, t3 * this.options.devicePixelRatio), super.viewport(e3, t3);
    }
    useProgram() {
      this.program.link(this.gl), this.program.bind(), this.program.setRotateMatrix(this.getRotateMatrix(this.rotate));
    }
    clear() {
      this.gl.clear(this.gl.COLOR_BUFFER_BIT | this.gl.DEPTH_BUFFER_BIT);
    }
    layout() {
      let e3 = this.videoWidth, t3 = this.videoHeight, i3 = this.canvasWidth, r3 = this.canvasHeight, a3 = this.textureWidth;
      this.options.sar && 1 !== this.options.sar && (e3 = Math.floor(this.videoWidth * this.options.sar), a3 = Math.floor(this.textureWidth * this.options.sar)), 90 !== this.rotate && 270 !== this.rotate || (i3 = this.canvasHeight, r3 = this.canvasWidth);
      const s3 = e3 / i3, o2 = t3 / r3;
      let c2;
      c2 = s3 > 1 ? !(s3 < o2) : s3 > o2, 1 === this.renderMode && (c2 = !c2);
      let d2 = 0;
      if (a3 !== e3 && (d2 = (a3 - e3) / a3), c2) {
        const a4 = (r3 - t3 * i3 / e3) / r3;
        this.vertex = [-1, 1 - a4, 0, 0, 0, 0, 0, -1, -1 + a4, 0, 0, 1, 0, 0, 1, 1 - a4, 0, 1 - d2, 0, 0, 0, 1, -1 + a4, 0, 1 - d2, 1, 0, 0];
      } else {
        const a4 = (i3 - e3 * r3 / t3) / i3;
        this.vertex = [-1 + a4, 1, 0, 0, 0, 0, 0, -1 + a4, -1, 0, 0, 1, 0, 0, 1 - a4, 1, 0, 1 - d2, 0, 0, 0, 1 - a4, -1, 0, 1 - d2, 1, 0, 0];
      }
      (0, n.A)(this.vertex, this.flipHorizontal, this.flipVertical), this.gl && this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(this.vertex), this.gl.STATIC_DRAW);
    }
    setRotate(e3, t3 = true) {
      (e3 %= 360) !== this.rotate && (this.rotate = e3, this.gl && this.program.setRotateMatrix(this.getRotateMatrix(this.rotate)), this.layout(), t3 && this.clear());
    }
    destroy() {
      this.vbo && (this.gl.deleteBuffer(this.vbo), this.vbo = null), this.program && this.program.stop(), this.gl = null, this.vertex = null, this.onWebglContextLost && (this.canvas.removeEventListener("webglcontextlost", this.onWebglContextLost), this.onWebglContextLost = null), this.onWebglContextRestored && (this.canvas.removeEventListener("webglcontextrestored", this.onWebglContextRestored), this.onWebglContextRestored = null), super.destroy();
    }
  }
}, 87623: (e2, t2, i2) => {
  i2.d(t2, { A: () => A });
  var r2 = i2(134), a2 = i2(61499), s2 = i2(20088), n = i2(74503), o = i2(63939), c = i2(94300), d2 = i2(54024), h = i2(97317), l = i2(14686), u = i2(6110), f = i2(57517), p = i2(25669), m = i2(56024), g = i2(72703), v = i2(11473);
  class A extends d2.A {
    constructor(e3, t3) {
      super(e3, t3), (0, r2.A)(this, "linesize", void 0), (0, r2.A)(this, "hdrMetadata", void 0), (0, r2.A)(this, "hdrMetadataBuffer", void 0), this.hdrMetadata = (0, n.A)(s2.A), this.hdrMetadata.multiplier = 1;
    }
    generateFragmentSource(e3, t3) {
      t3.outputRGB = true;
      const i3 = (0, p.A)(this.srcColorSpace, this.dstColorSpace, t3), r3 = ["y", "u", "v", "a"], a3 = ["r", "g", "b", "a"], s3 = [], n2 = [], o2 = [];
      e3.comp.forEach((e4, t4) => {
        s3[t4] = e4.depth + 7 >>> 3, n2[t4] = e4.shift, o2[t4] = (1 << e4.depth) - 1;
      });
      let c2 = "textureLoad(".concat(r3[e3.comp[0].plane], "Texture,\n      vec2<i32>(coord.xy * vec2<f32>(\n        ").concat(this["".concat(r3[e3.comp[0].plane], "Texture")].width, ".0,\n        ").concat(this["".concat(r3[e3.comp[0].plane], "Texture")].height, ".0\n      )), 0).").concat(a3[e3.comp[0].offset / s3[0]]), d3 = e3.comp[1] ? "textureLoad(".concat(r3[e3.comp[1].plane], "Texture,\n          vec2<i32>(coord.xy * vec2<f32>(\n            ").concat(this["".concat(r3[e3.comp[1].plane], "Texture")].width, ".0,\n            ").concat(this["".concat(r3[e3.comp[1].plane], "Texture")].height, ".0\n          )), 0).").concat(a3[e3.comp[1].offset / s3[1]]) : 32 & e3.flags ? "0.0" : "0.5", h2 = e3.comp[2] ? "textureLoad(".concat(r3[e3.comp[2].plane], "Texture,\n          vec2<i32>(coord.xy * vec2<f32>(\n            ").concat(this["".concat(r3[e3.comp[2].plane], "Texture")].width, ".0,\n            ").concat(this["".concat(r3[e3.comp[2].plane], "Texture")].height, ".0\n          )), 0).").concat(a3[e3.comp[2].offset / s3[2]]) : 32 & e3.flags ? "0.0" : "0.5", l2 = "1.0";
      function u2(e4) {
        return /^textureLoad/.test(e4);
      }
      128 & e3.flags && (l2 = "textureLoad(".concat(r3[e3.comp[e3.comp.length - 1].plane], "Texture,\n        vec2<i32>(coord.xy * vec2<f32>(\n          ").concat(this["".concat(r3[e3.comp[e3.comp.length - 1].plane], "Texture")].width, ".0,\n          ").concat(this["".concat(r3[e3.comp[e3.comp.length - 1].plane], "Texture")].height, ".0\n        )), 0).").concat(a3[e3.comp[e3.comp.length - 1].offset / s3[e3.comp.length - 1]]), 2 === e3.comp.length && (d3 = 32 & e3.flags ? "0.0" : "0.5")), this.fragmentSource = "\n      struct HdrMetadata {\n        offset: f32,\n        multiplier: f32,\n        pqTonemapA: f32,\n        pqTonemapB: f32,\n        hlgOOTFGammaMinusOne: f32,\n        nitsToSdrRelativeFactor: f32,\n        sdrRelativeToNitsFactor: f32\n      };\n      @group(0) @binding(1) var<uniform> hdrMetadata: HdrMetadata;\n      @group(0) @binding(2) var yTexture: texture_2d<u32>;\n      ".concat(this.uTexture ? "@group(0) @binding(3) var uTexture: texture_2d<u32>;" : "", "\n      ").concat(this.vTexture ? "@group(0) @binding(4) var vTexture: texture_2d<u32>;" : "", "\n      ").concat(this.aTexture ? "@group(0) @binding(5) var aTexture: texture_2d<u32>;" : "", "\n      ").concat(1 & e3.flags ? "\n        fn swap(x: u32) -> u32 {\n          var low = x & 0xff;\n          var high = (x >> 8) & 0xff;\n          return (low << 8) | high;\n        }\n      " : "", "\n      @fragment\n      fn main(@location(0) coord: vec4<f32>) -> @location(0) vec4<f32> {\n        let offset = hdrMetadata.offset;\n        let multiplier = hdrMetadata.multiplier;\n        let pq_tonemap_a = hdrMetadata.pqTonemapA;\n        let pq_tonemap_b = hdrMetadata.pqTonemapB;\n        let hlg_ootf_gamma_minus_one = hdrMetadata.hlgOOTFGammaMinusOne;\n        let nits_to_sdr_relative_factor = hdrMetadata.nitsToSdrRelativeFactor;\n        let sdr_relative_to_nits_factor = hdrMetadata.sdrRelativeToNitsFactor;\n        let y = ").concat(u2(c2) ? "f32(".concat(1 & e3.flags ? "swap(".concat(c2, ")") : c2, " >> ").concat(n2[0], ") / f32(").concat(o2[0], ")") : c2, ";\n        let u = ").concat(u2(d3) ? "f32(".concat(1 & e3.flags ? "swap(".concat(d3, ")") : d3, " >> ").concat(n2[1], ") / f32(").concat(o2[1], ")") : d3, ";\n        let v = ").concat(u2(h2) ? "f32(".concat(1 & e3.flags ? "swap(".concat(h2, ")") : h2, " >> ").concat(n2[2], ") / f32(").concat(o2[2], ")") : h2, ";\n        let a = ").concat(u2(l2) ? "f32(".concat(1 & e3.flags ? "swap(".concat(l2, ")") : l2, " >> ").concat(n2[e3.comp.length - 1], ") / f32(").concat(o2[e3.comp.length - 1], ")") : l2, ";\n        var color = vec4(y, u, v, a);\n        if (color.a > 0) {\n          color.r /= color.a;\n          color.g /= color.a;\n          color.b /= color.a;\n        }\n        color.r -= offset;\n        color.g -= offset;\n        color.b -= offset;\n        color.r *= multiplier;\n        color.g *= multiplier;\n        color.b *= multiplier;\n        ").concat(i3.reduce((e4, t4) => e4 + t4, ""), "\n        color.r *= color.a;\n        color.g *= color.a;\n        color.b *= color.a;\n        return color;\n      }\n    ");
    }
    async init() {
      await super.init(), this.hdrMetadataBuffer = this.device.createBuffer({ size: 32, usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST });
    }
    generateBindGroup() {
      if (!this.yTexture) return;
      const e3 = [{ binding: 0, visibility: GPUShaderStage.VERTEX, buffer: { type: "uniform" } }, { binding: 1, visibility: GPUShaderStage.FRAGMENT, buffer: { type: "uniform" } }, { binding: 2, visibility: GPUShaderStage.FRAGMENT, texture: { sampleType: "uint" } }];
      this.uTexture && e3.push({ binding: 3, visibility: GPUShaderStage.FRAGMENT, texture: { sampleType: "uint" } }), this.vTexture && e3.push({ binding: 4, visibility: GPUShaderStage.FRAGMENT, texture: { sampleType: "uint" } }), this.aTexture && e3.push({ binding: 5, visibility: GPUShaderStage.FRAGMENT, texture: { sampleType: "uint" } }), this.bindGroupLayout = this.device.createBindGroupLayout({ entries: e3 });
      const t3 = [{ binding: 0, resource: { buffer: this.rotateMatrixBuffer, size: 16 * Float32Array.BYTES_PER_ELEMENT } }, { binding: 1, resource: { buffer: this.hdrMetadataBuffer, size: this.hdrMetadataBuffer.size } }, { binding: 2, resource: this.yTexture.createView() }];
      this.uTexture && t3.push({ binding: 3, resource: this.uTexture.createView() }), this.vTexture && t3.push({ binding: 4, resource: this.vTexture.createView() }), this.aTexture && t3.push({ binding: 5, resource: this.aTexture.createView() }), this.bindGroup = this.device.createBindGroup({ layout: this.bindGroupLayout, entries: t3 });
    }
    checkFrame(e3) {
      if (o.f[15](e3 + 32) !== this.linesize || o.f[15](e3 + 72) !== this.videoHeight || o.f[15](e3 + 68) !== this.videoWidth || o.f[15](e3 + 80) !== this.format) {
        const t3 = (0, h.I)(o.f[15](e3 + 80));
        if (this.yTexture && (this.yTexture.destroy(), this.yTexture = null), this.uTexture && (this.uTexture.destroy(), this.uTexture = null), this.vTexture && (this.vTexture.destroy(), this.vTexture = null), this.aTexture && (this.aTexture.destroy(), this.aTexture = null), 16 & t3.flags) {
          let i4 = 0;
          if (this.yTexture = this.device.createTexture({ size: [o.f[15](e3 + 32 + 4 * i4++) >>> 1, o.f[15](e3 + 72)], usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_DST, format: "r16uint" }), t3.comp.length > 2) {
            const r4 = t3.comp[1].plane === t3.comp[2].plane;
            this.uTexture = this.device.createTexture({ size: [o.f[15](e3 + 32 + 4 * i4++) >>> (r4 ? 2 : 1), o.f[15](e3 + 72) >>> t3.log2ChromaH], usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_DST, format: r4 ? "rg16uint" : "r16uint" }), r4 || (this.vTexture = this.device.createTexture({ size: [o.f[15](e3 + 32 + 4 * i4++) >>> 1, o.f[15](e3 + 72) >>> t3.log2ChromaH], usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_DST, format: "r16uint" }));
          }
          128 & t3.flags && (this.aTexture = this.device.createTexture({ size: [o.f[15](e3 + 32 + 4 * i4++) >>> 1, o.f[15](e3 + 72)], usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_DST, format: "r16uint" })), this.textureWidth = o.f[15](e3 + 32) >>> 1;
        } else {
          const i4 = t3.comp[0].depth + 7 >>> 3;
          let r4 = t3.comp[0].step / i4;
          const a3 = ["", "r16uint", "rg16uint", "", "rgba16uint"];
          this.yTexture = this.device.createTexture({ size: [o.f[15](e3 + 32) / r4 >>> 1, o.f[15](e3 + 72)], usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_DST, format: a3[r4] }), this.textureWidth = o.f[15](e3 + 32) / r4 >>> 1;
        }
        this.linesize = o.f[15](e3 + 32), this.srcColorSpace = new u.A(o.f[15](e3 + 220), o.f[15](e3 + 212), o.f[15](e3 + 216), o.f[15](e3 + 208)), this.videoWidth = o.f[15](e3 + 68), this.videoHeight = o.f[15](e3 + 72), this.format = o.f[15](e3 + 80);
        const i3 = { type: 1, bitDepth: t3.comp[0].depth, toneMapPQAndHlgToDst: true, metadata: this.hdrMetadata, dstSdrMaxLuminanceNits: f.kH, dstMaxLuminanceRelative: 1 }, r3 = (0, m.aH)(e3, 14);
        if (r3) {
          const e4 = o.f[20](r3 + 4);
          o.f[8](e4) > 0 && (i3.maxContentLightLevel = o.f[8](e4));
        }
        this.generateFragmentSource(t3, i3), this.layout(), this.generatePipeline(), this.generateRenderBundleEncoder();
        const s3 = (0, l.s3)(this.hdrMetadata[a2.o9], 28).slice();
        this.device.queue.writeBuffer(this.hdrMetadataBuffer, 0, s3.buffer, s3.byteOffset, s3.byteLength);
      }
    }
    render(e3) {
      if (this.lost) return;
      let t3 = (0, h.I)(o.f[15](e3 + 80));
      if (!t3) return;
      this.checkFrame(e3);
      const i3 = this.device.createCommandEncoder();
      let r3 = 0;
      this.device.queue.writeTexture({ texture: this.yTexture }, (0, v.Lv)(), { offset: o.f[20](e3 + 4 * r3), bytesPerRow: o.f[15](e3 + 32 + 4 * r3++), rowsPerImage: this.yTexture.height }, { width: this.yTexture.width, height: this.yTexture.height, depthOrArrayLayers: 1 }), 16 & t3.flags && (this.uTexture && this.device.queue.writeTexture({ texture: this.uTexture }, (0, v.Lv)(), { offset: o.f[20](e3 + 4 * r3), bytesPerRow: o.f[15](e3 + 32 + 4 * r3++), rowsPerImage: this.uTexture.height }, { width: this.uTexture.width, height: this.uTexture.height, depthOrArrayLayers: 1 }), this.vTexture && this.device.queue.writeTexture({ texture: this.vTexture }, (0, v.Lv)(), { offset: o.f[20](e3 + 4 * r3), bytesPerRow: o.f[15](e3 + 32 + 4 * r3++), rowsPerImage: this.vTexture.height }, { width: this.vTexture.width, height: this.vTexture.height, depthOrArrayLayers: 1 }), this.aTexture && this.device.queue.writeTexture({ texture: this.aTexture }, (0, v.Lv)(), { offset: o.f[20](e3 + 4 * r3), bytesPerRow: o.f[15](e3 + 32 + 4 * r3++), rowsPerImage: this.aTexture.height }, { width: this.aTexture.width, height: this.aTexture.height, depthOrArrayLayers: 1 }));
      const a3 = i3.beginRenderPass({ colorAttachments: [{ view: this.context.getCurrentTexture().createView(), clearValue: { r: 0, g: 0, b: 0, a: 1 }, loadOp: "clear", storeOp: "store" }] });
      a3.executeBundles([this.renderBundle]), a3.end(), this.device.queue.submit([i3.finish()]);
    }
    destroy() {
      this.hdrMetadata && ((0, c.A)(this.hdrMetadata), this.hdrMetadata = null), this.hdrMetadataBuffer && (this.hdrMetadataBuffer.destroy(), this.hdrMetadataBuffer = null), super.destroy();
    }
    static isSupport(e3) {
      if ((0, g.A)(e3)) {
        const t3 = (0, h.I)(o.f[15](e3 + 80));
        if (t3) {
          const e4 = t3.comp[0].depth + 7 >>> 3;
          if (2 !== e4) return false;
          let i3 = t3.comp[0].step / e4;
          return !!(16 & t3.flags || 3 !== i3);
        }
      }
      return false;
    }
  }
}, 38222: (e2, t2, i2) => {
  i2.d(t2, { A: () => l });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(54024), n = i2(97317), o = i2(6110), c = i2(25669), d2 = i2(72703), h = i2(11473);
  class l extends s2.A {
    constructor(e3, t3) {
      super(e3, t3), (0, r2.A)(this, "linesize", void 0);
    }
    async init() {
      await super.init();
    }
    generateFragmentSource(e3) {
      const t3 = (0, c.A)(this.srcColorSpace, this.dstColorSpace, { bitDepth: 8, type: 1, outputRGB: true }), i3 = ["y", "u", "v", "a"], r3 = ["r", "g", "b", "a"];
      let a3 = "textureSample(".concat(i3[e3.comp[0].plane], "Texture, s, in_texcoord.xy).").concat(r3[e3.comp[0].offset]), s3 = e3.comp[1] ? "textureSample(".concat(i3[e3.comp[1].plane], "Texture, s, in_texcoord.xy).").concat(r3[e3.comp[1].offset]) : 32 & e3.flags ? "0.0" : "0.5", n2 = e3.comp[2] ? "textureSample(".concat(i3[e3.comp[2].plane], "Texture, s, in_texcoord.xy).").concat(r3[e3.comp[2].offset]) : 32 & e3.flags ? "0.0" : "0.5", o2 = "1.0";
      128 & e3.flags && (o2 = "textureSample(".concat(i3[e3.comp[e3.comp.length - 1].plane], "Texture, s, in_texcoord.xy).").concat(r3[e3.comp[e3.comp.length - 1].offset]), 2 === e3.comp.length && (s3 = 32 & e3.flags ? "0.0" : "0.5")), this.fragmentSource = "\n      @group(0) @binding(1) var s: sampler;\n      @group(0) @binding(2) var yTexture: texture_2d<f32>;\n      ".concat(this.uTexture ? "@group(0) @binding(3) var uTexture: texture_2d<f32>;" : "", "\n      ").concat(this.vTexture ? "@group(0) @binding(4) var vTexture: texture_2d<f32>;" : "", "\n      ").concat(this.aTexture ? "@group(0) @binding(5) var aTexture: texture_2d<f32>;" : "", "\n      \n      @fragment\n      fn main(@location(0) in_texcoord: vec4<f32>) -> @location(0) vec4<f32> {\n        let y = ").concat(a3, ";\n        let u = ").concat(s3, ";\n        let v = ").concat(n2, ";\n        let alpha = ").concat(o2, ";\n        var color = vec4(y, u, v, alpha);\n        ").concat(t3.reduce((e4, t4) => e4 + t4, ""), "\n        return color;\n      }\n    ");
    }
    checkFrame(e3) {
      if (a2.f[15](e3 + 32) !== this.linesize || a2.f[15](e3 + 72) !== this.videoHeight || a2.f[15](e3 + 68) !== this.videoWidth) {
        const t3 = (0, n.I)(a2.f[15](e3 + 80));
        if (this.yTexture && (this.yTexture.destroy(), this.yTexture = null), this.uTexture && (this.uTexture.destroy(), this.uTexture = null), this.vTexture && (this.vTexture.destroy(), this.vTexture = null), this.aTexture && (this.aTexture.destroy(), this.aTexture = null), 16 & t3.flags) {
          let i3 = 0;
          if (this.yTexture = this.device.createTexture({ size: [a2.f[15](e3 + 32 + 4 * i3++), a2.f[15](e3 + 72)], usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.RENDER_ATTACHMENT, format: "r8unorm" }), t3.comp.length > 2) {
            const r3 = t3.comp[1].plane === t3.comp[2].plane;
            this.uTexture = this.device.createTexture({ size: [a2.f[15](e3 + 32 + 4 * i3++) >>> (r3 ? 1 : 0), a2.f[15](e3 + 72) >>> t3.log2ChromaH], usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.RENDER_ATTACHMENT, format: r3 ? "rg8unorm" : "r8unorm" }), r3 || (this.vTexture = this.device.createTexture({ size: [a2.f[15](e3 + 32 + 4 * i3++), a2.f[15](e3 + 72) >>> t3.log2ChromaH], usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.RENDER_ATTACHMENT, format: "r8unorm" }));
          }
          128 & t3.flags && (this.aTexture = this.device.createTexture({ size: [a2.f[15](e3 + 32 + 4 * i3++), a2.f[15](e3 + 72)], usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.RENDER_ATTACHMENT, format: "r8unorm" })), this.textureWidth = a2.f[15](e3 + 32);
        } else {
          const i3 = t3.comp[0].depth + 7 >>> 3;
          let r3 = t3.comp[0].step / i3;
          const s3 = ["", "r8unorm", "rg8unorm", "", "rgba8unorm"];
          this.yTexture = this.device.createTexture({ size: [a2.f[15](e3 + 32) / r3, a2.f[15](e3 + 72)], usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.RENDER_ATTACHMENT, format: s3[r3] }), this.textureWidth = a2.f[15](e3 + 32) / r3;
        }
        this.linesize = a2.f[15](e3 + 32), this.srcColorSpace = new o.A(a2.f[15](e3 + 220), a2.f[15](e3 + 212), a2.f[15](e3 + 216), a2.f[15](e3 + 208)), this.generateFragmentSource(t3), this.videoWidth = a2.f[15](e3 + 68), this.videoHeight = a2.f[15](e3 + 72), this.format = a2.f[15](e3 + 80), this.layout(), this.generatePipeline(), this.generateRenderBundleEncoder();
      }
    }
    render(e3) {
      if (this.lost) return;
      let t3 = (0, n.I)(a2.f[15](e3 + 80));
      if (!t3) return;
      this.checkFrame(e3);
      let i3 = 0;
      this.device.queue.writeTexture({ texture: this.yTexture }, (0, h.Lv)(), { offset: a2.f[20](e3 + 4 * i3), bytesPerRow: a2.f[15](e3 + 32 + 4 * i3++), rowsPerImage: this.yTexture.height }, { width: this.yTexture.width, height: this.yTexture.height, depthOrArrayLayers: 1 }), 16 & t3.flags && (this.device.queue.writeTexture({ texture: this.uTexture }, (0, h.Lv)(), { offset: a2.f[20](e3 + 4 * i3), bytesPerRow: a2.f[15](e3 + 32 + 4 * i3++), rowsPerImage: this.uTexture.height }, { width: this.uTexture.width, height: this.uTexture.height, depthOrArrayLayers: 1 }), this.vTexture && this.device.queue.writeTexture({ texture: this.vTexture }, (0, h.Lv)(), { offset: a2.f[20](e3 + 4 * i3), bytesPerRow: a2.f[15](e3 + 32 + 4 * i3++), rowsPerImage: this.vTexture.height }, { width: this.vTexture.width, height: this.vTexture.height, depthOrArrayLayers: 1 }), this.aTexture && this.device.queue.writeTexture({ texture: this.aTexture }, (0, h.Lv)(), { offset: a2.f[20](e3 + 4 * i3), bytesPerRow: a2.f[15](e3 + 32 + 4 * i3), rowsPerImage: this.aTexture.height }, { width: this.aTexture.width, height: this.aTexture.height, depthOrArrayLayers: 1 }));
      const r3 = this.device.createCommandEncoder(), s3 = r3.beginRenderPass({ colorAttachments: [{ view: this.context.getCurrentTexture().createView(), clearValue: { r: 0, g: 0, b: 0, a: 1 }, loadOp: "clear", storeOp: "store" }] });
      s3.executeBundles([this.renderBundle]), s3.end(), this.device.queue.submit([r3.finish()]);
    }
    static isSupport(e3) {
      if ((0, d2.A)(e3)) {
        const t3 = (0, n.I)(a2.f[15](e3 + 80));
        if (t3) {
          const e4 = t3.comp[0].depth + 7 >>> 3;
          if (1 !== e4) return false;
          let i3 = t3.comp[0].step / e4;
          return !!(16 & t3.flags || 3 !== i3);
        }
      }
      return false;
    }
  }
}, 54024: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(134), a2 = i2(54895), s2 = i2(15045);
  class n extends s2.A {
    constructor(e3, t3) {
      super(e3, t3), (0, r2.A)(this, "yTexture", void 0), (0, r2.A)(this, "uTexture", void 0), (0, r2.A)(this, "vTexture", void 0), (0, r2.A)(this, "aTexture", void 0), this.vertexSource = a2.A;
    }
    generateBindGroup() {
      if (!this.yTexture) return;
      const e3 = [{ binding: 0, visibility: GPUShaderStage.VERTEX, buffer: { type: "uniform" } }, { binding: 1, visibility: GPUShaderStage.FRAGMENT, sampler: { type: "filtering" } }, { binding: 2, visibility: GPUShaderStage.FRAGMENT, texture: { sampleType: "float" } }];
      this.uTexture && e3.push({ binding: 3, visibility: GPUShaderStage.FRAGMENT, texture: { sampleType: "float" } }), this.vTexture && e3.push({ binding: 4, visibility: GPUShaderStage.FRAGMENT, texture: { sampleType: "float" } }), this.aTexture && e3.push({ binding: 5, visibility: GPUShaderStage.FRAGMENT, texture: { sampleType: "float" } }), this.bindGroupLayout = this.device.createBindGroupLayout({ entries: e3 });
      const t3 = [{ binding: 0, resource: { buffer: this.rotateMatrixBuffer, size: 16 * Float32Array.BYTES_PER_ELEMENT } }, { binding: 1, resource: this.sampler }, { binding: 2, resource: this.yTexture.createView() }];
      this.uTexture && t3.push({ binding: 3, resource: this.uTexture.createView() }), this.vTexture && t3.push({ binding: 4, resource: this.vTexture.createView() }), this.aTexture && t3.push({ binding: 5, resource: this.aTexture.createView() }), this.bindGroup = this.device.createBindGroup({ layout: this.bindGroupLayout, entries: t3 });
    }
    destroy() {
      this.yTexture && this.yTexture.destroy(), this.uTexture && this.uTexture.destroy(), this.vTexture && this.vTexture.destroy(), this.aTexture && this.aTexture.destroy(), super.destroy();
    }
  }
}, 54750: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(54895), a2 = i2(23195), s2 = i2(15045);
  const n = ["bt2020", "bt2100", "st2048", "p3-dcl", "hlg"];
  class o extends s2.A {
    constructor(e3, t3) {
      super(e3, t3), this.vertexSource = r2.A, this.fragmentSource = a2.A;
    }
    checkFrame(e3) {
      e3.codedWidth === this.textureWidth && e3.codedHeight === this.videoHeight && e3.codedWidth === this.videoWidth || (this.videoWidth = e3.codedWidth, this.videoHeight = e3.codedHeight, this.textureWidth = e3.codedWidth, this.layout(), this.generatePipeline());
    }
    generateBindGroup() {
      this.bindGroupLayout = this.device.createBindGroupLayout({ entries: [{ binding: 0, visibility: GPUShaderStage.VERTEX, buffer: { type: "uniform" } }, { binding: 1, visibility: GPUShaderStage.FRAGMENT, externalTexture: {} }, { binding: 2, visibility: GPUShaderStage.FRAGMENT, sampler: { type: "filtering" } }] });
    }
    render(e3) {
      if (this.lost) return;
      this.checkFrame(e3);
      const t3 = this.device.createBindGroup({ layout: this.renderPipeline.getBindGroupLayout(0), entries: [{ binding: 0, resource: { buffer: this.rotateMatrixBuffer, size: 16 * Float32Array.BYTES_PER_ELEMENT } }, { binding: 1, resource: this.device.importExternalTexture({ source: e3 }) }, { binding: 2, resource: this.sampler }] }), i3 = this.device.createCommandEncoder(), r3 = { colorAttachments: [{ view: this.context.getCurrentTexture().createView(), clearValue: { r: 0, g: 0, b: 0, a: 1 }, loadOp: "clear", storeOp: "store" }] }, a3 = i3.beginRenderPass(r3);
      a3.setPipeline(this.renderPipeline), a3.setBindGroup(0, t3), a3.setVertexBuffer(0, this.vbo), a3.draw(4, 4, 0, 0), a3.end(), this.device.queue.submit([i3.finish()]);
    }
    static isSupport(e3) {
      return e3 instanceof VideoFrame && !n.some((t3) => t3 === e3.colorSpace.primaries);
    }
  }
}, 15045: (e2, t2, i2) => {
  i2.d(t2, { A: () => d2 });
  var r2 = i2(134), a2 = i2(4624), s2 = i2(43356), n = i2(72739), o = i2(38469);
  const c = "src/avrender/image/WebGPURender.ts";
  class d2 extends s2.A {
    constructor(e3, t3) {
      super(e3, t3), (0, r2.A)(this, "adapter", void 0), (0, r2.A)(this, "device", void 0), (0, r2.A)(this, "context", void 0), (0, r2.A)(this, "vsModule", void 0), (0, r2.A)(this, "fsModule", void 0), (0, r2.A)(this, "rotateMatrixBuffer", void 0), (0, r2.A)(this, "renderPipeline", void 0), (0, r2.A)(this, "rotateMatrix", void 0), (0, r2.A)(this, "vbo", void 0), (0, r2.A)(this, "sampler", void 0), (0, r2.A)(this, "vertex", void 0), (0, r2.A)(this, "fragmentSource", void 0), (0, r2.A)(this, "vertexSource", void 0), (0, r2.A)(this, "renderBundleEncoder", void 0), (0, r2.A)(this, "renderBundle", void 0), (0, r2.A)(this, "bindGroupLayout", void 0), (0, r2.A)(this, "bindGroup", void 0), (0, r2.A)(this, "pipelineLayout", void 0);
    }
    async init(e3) {
      var t3;
      this.adapter = await navigator.gpu.requestAdapter({ powerPreference: null !== (t3 = this.options.powerPreference) && void 0 !== t3 ? t3 : "high-performance" }), this.adapter || a2.h2("not support webgpu render", c, 86);
      const i3 = [];
      n.__(e3, (e4) => {
        this.adapter.features.has(e4) && i3.push(e4);
      }), this.device = await this.adapter.requestDevice({ requiredFeatures: i3.length ? i3 : void 0 }), this.device.lost.then(() => {
        var e4;
        this.destroyed || (this.lost = true, a2.z3("gpu device lost", c, 105), null !== (e4 = this.options) && void 0 !== e4 && e4.onRenderContextLost && this.options.onRenderContextLost());
      }), this.context = this.canvas.getContext("webgpu"), this.context || a2.h2("can not support webgpu, got GPUCanvasContext failed", c, 114), this.context.configure({ device: this.device, format: navigator.gpu.getPreferredCanvasFormat(), alphaMode: "premultiplied" }), this.sampler = this.device.createSampler({ magFilter: "linear", minFilter: "linear" }), this.vbo = this.device.createBuffer({ size: 28 * Float32Array.BYTES_PER_ELEMENT, usage: GPUBufferUsage.VERTEX | GPUBufferUsage.COPY_DST }), this.rotateMatrixBuffer = this.device.createBuffer({ size: 16 * Float32Array.BYTES_PER_ELEMENT, usage: GPUBufferUsage.UNIFORM | GPUBufferUsage.COPY_DST }), this.setRotateMatrix(this.getRotateMatrix(0));
    }
    generatePipeline() {
      this.generateBindGroup(), this.pipelineLayout = this.device.createPipelineLayout({ bindGroupLayouts: [this.bindGroupLayout] }), this.vsModule = this.device.createShaderModule({ code: this.vertexSource }), this.fsModule = this.device.createShaderModule({ code: this.fragmentSource }), this.renderPipeline = this.device.createRenderPipeline({ layout: this.pipelineLayout, vertex: { module: this.vsModule, entryPoint: "main", buffers: [{ arrayStride: 28, attributes: [{ shaderLocation: 0, offset: 0, format: "float32x3" }, { shaderLocation: 1, offset: 12, format: "float32x4" }] }] }, fragment: { module: this.fsModule, entryPoint: "main", targets: [{ format: navigator.gpu.getPreferredCanvasFormat() }] }, primitive: { topology: "triangle-strip" } });
    }
    generateRenderBundleEncoder() {
      this.renderPipeline && (this.renderBundleEncoder = this.device.createRenderBundleEncoder({ colorFormats: [navigator.gpu.getPreferredCanvasFormat()] }), this.renderBundleEncoder.setPipeline(this.renderPipeline), this.renderBundleEncoder.setBindGroup(0, this.bindGroup), this.renderBundleEncoder.setVertexBuffer(0, this.vbo), this.renderBundleEncoder.draw(4, 4, 0, 0), this.renderBundle = this.renderBundleEncoder.finish());
    }
    setRotateMatrix(e3) {
      this.rotateMatrix = e3;
      const t3 = new Float32Array(this.rotateMatrix);
      this.device.queue.writeBuffer(this.rotateMatrixBuffer, 0, t3.buffer, t3.byteOffset, t3.byteLength);
    }
    setVertices() {
      const e3 = new Float32Array(this.vertex);
      this.device.queue.writeBuffer(this.vbo, 0, e3.buffer, e3.byteOffset, e3.byteLength);
    }
    clear() {
      this.context.getCurrentTexture().destroy();
    }
    layout() {
      let e3 = this.videoWidth, t3 = this.videoHeight, i3 = this.canvasWidth, r3 = this.canvasHeight, a3 = this.textureWidth;
      this.options.sar && 1 !== this.options.sar && (e3 = Math.floor(this.videoWidth * this.options.sar), a3 = Math.floor(this.textureWidth * this.options.sar)), 90 !== this.rotate && 270 !== this.rotate || (i3 = this.canvasHeight, r3 = this.canvasWidth);
      const s3 = e3 / i3, n2 = t3 / r3;
      let c2;
      c2 = s3 > 1 ? !(s3 < n2) : s3 > n2, 1 === this.renderMode && (c2 = !c2);
      let d3 = 0;
      if (a3 !== e3 && (d3 = (a3 - e3) / a3), c2) {
        const a4 = (r3 - t3 * i3 / e3) / r3;
        this.vertex = [-1, 1 - a4, 0, 0, 0, 0, 0, -1, -1 + a4, 0, 0, 1, 0, 0, 1, 1 - a4, 0, 1 - d3, 0, 0, 0, 1, -1 + a4, 0, 1 - d3, 1, 0, 0];
      } else {
        const a4 = (i3 - e3 * r3 / t3) / i3;
        this.vertex = [-1 + a4, 1, 0, 0, 0, 0, 0, -1 + a4, -1, 0, 0, 1, 0, 0, 1 - a4, 1, 0, 1 - d3, 0, 0, 0, 1 - a4, -1, 0, 1 - d3, 1, 0, 0];
      }
      (0, o.A)(this.vertex, this.flipHorizontal, this.flipVertical), this.setVertices();
    }
    viewport(e3, t3) {
      super.viewport(e3, t3);
    }
    setRotate(e3, t3 = true) {
      (e3 %= 360) !== this.rotate && (this.rotate = e3, this.setRotateMatrix(this.getRotateMatrix(e3)), this.layout(), t3 && this.clear());
    }
    destroy() {
      this.sampler = null, this.vbo && this.vbo.destroy(), this.rotateMatrixBuffer && this.rotateMatrixBuffer.destroy(), this.bindGroupLayout = null, this.bindGroup = null, this.pipelineLayout = null, this.renderBundle = null, this.renderBundleEncoder = null, this.fsModule = null, this.vsModule = null, this.renderPipeline = null, this.rotateMatrix = null, this.vertex = null, this.context = null, this.options = null, this.destroyed = true, this.device && (this.device.destroy(), this.device = null), this.adapter && (this.adapter = null), super.destroy();
    }
  }
}, 63849: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(134), a2 = i2(72703), s2 = i2(43356), n = i2(86932), o = i2(89188);
  class c extends s2.A {
    constructor(e3) {
      super({ width: 0, height: 0 }, { devicePixelRatio: 1, renderMode: 0 }), (0, r2.A)(this, "writableStream", void 0), (0, r2.A)(this, "writer", void 0), this.writableStream = e3;
    }
    async init() {
      this.writer = this.writableStream.getWriter();
    }
    clear() {
    }
    render(e3) {
      e3 = e3 instanceof VideoFrame ? new VideoFrame(e3, { timestamp: 1e3 * (0, n.A)(), rotation: (this.rotate + (this.flipVertical ? 180 : 0)) % 360, flip: (this.flipHorizontal || this.flipVertical) && !(this.flipHorizontal && this.flipVertical) }) : (0, o.pt)(e3, BigInt(1e3 * (0, n.A)()), { rotation: (this.rotate + (this.flipVertical ? 180 : 0)) % 360, flip: (this.flipHorizontal || this.flipVertical) && !(this.flipHorizontal && this.flipVertical) }), this.writer.write(e3);
    }
    layout() {
    }
    setRotate(e3, t3 = true) {
      (e3 %= 360) !== this.rotate && (this.rotate = e3, t3 && this.clear());
    }
    static isSupport(e3) {
      return e3 instanceof VideoFrame || (0, a2.A)(e3);
    }
  }
}, 6110: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(134), a2 = i2(12535), s2 = i2(1064), n = i2(86141), o = i2(91131);
  class c {
    constructor(e3, t3, i3, a3) {
      (0, r2.A)(this, "matrixId", void 0), (0, r2.A)(this, "primaryId", void 0), (0, r2.A)(this, "transferId", void 0), (0, r2.A)(this, "rangeId", void 0), this.matrixId = e3, this.primaryId = t3, this.transferId = i3, this.rangeId = a3;
    }
    getMatrixId() {
      return this.matrixId;
    }
    getPrimaryId() {
      return this.primaryId;
    }
    getTransferId() {
      return this.transferId;
    }
    getRangeId() {
      return this.rangeId;
    }
    isWide() {
      return 9 === this.primaryId || 11 === this.primaryId || 12 === this.primaryId;
    }
    isHDR() {
      return 18 === this.transferId || 16 === this.transferId;
    }
    isToneMappedByDefault() {
      return 18 === this.transferId || 16 === this.transferId;
    }
    isAffectedBySDRWhiteLevel() {
      return 18 === this.transferId || 16 === this.transferId;
    }
    fullRangeEncodedValues() {
      return 12 === this.transferId || 11 === this.transferId;
    }
    getTransformMatrix(e3) {
      const t3 = (1 << e3 - 1) / ((1 << e3) - 1);
      let i3 = 0, r3 = 0;
      switch (this.matrixId) {
        case 0:
          return new a2.A();
        case 1:
        case 2:
          i3 = 0.2126, r3 = 0.0722;
          break;
        case 4:
          i3 = 0.3, r3 = 0.11;
          break;
        case 5:
        case 6:
          i3 = 0.299, r3 = 0.114;
          break;
        case 7:
          i3 = 0.212, r3 = 0.087;
          break;
        case 8:
          return a2.A.RowMajor([0.25, 0.5, 0.25, 0, -0.25, 0.5, -0.25, t3, 0.5, 0, -0.5, t3, 0, 0, 0, 1]);
        case 10:
          return i3 = 0.2627, r3 = 0.0593, a2.A.RowMajor([1, 0, 0, 0, i3, 1 - i3 - r3, r3, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
        case 9:
          i3 = 0.2627, r3 = 0.0593;
          break;
        case 11:
          return a2.A.RowMajor([0, 1, 0, 0, 0, -0.5, 0.493283, 0.5, 0.5, -0.495951, 0, 0.5, 0, 0, 0, 1]);
      }
      let s3 = 1 - i3 - r3, n2 = 0.5 / (1 - r3), o2 = 0.5 / (1 - i3);
      return a2.A.RowMajor([i3, s3, r3, 0, n2 * -i3, n2 * -s3, n2 * (1 - r3), 0.5, o2 * (1 - i3), o2 * -s3, o2 * -r3, 0.5, 0, 0, 0, 1]);
    }
    getRangeAdjustMatrix(e3) {
      if (2 === this.rangeId) return new a2.A();
      const t3 = e3 - 8, i3 = (1 << e3) - 1, r3 = i3 / (219 << t3);
      switch (this.matrixId) {
        case 0:
        case 8:
          return new a2.A().setScale(new s2.P([r3, r3, r3])).postTranslate(new s2.P([-16 / 219, -16 / 219, -16 / 219]));
        case 1:
        case 4:
        case 5:
        case 6:
        case 7:
        case 9:
        case 10:
        case 11:
        case 2: {
          const e4 = 224 << t3, n2 = i3 / e4, o2 = (e4 - i3) / (2 * e4);
          return new a2.A().setScale(new s2.P([r3, n2, n2])).postTranslate(new s2.P([-16 / 219, o2, o2]));
        }
      }
      return new a2.A();
    }
    getTransferFunction_() {
      switch (this.transferId) {
        case 8:
          return n.Hi;
        case 4:
          return n.$_;
        case 5:
          return n.J7;
        case 7:
          return n.q;
        case 1:
        case 6:
        case 14:
        case 15:
          return n.aP;
        case 17:
          return n.Cr;
        case 18:
        case 12:
        case 9:
        case 10:
        case 16:
        case 2:
          return null;
      }
    }
    getTransferFunction(e3) {
      return this.transferId, this.getTransferFunction_();
    }
    getInverseTransferFunction(e3) {
      const t3 = this.getTransferFunction(e3);
      if (t3) {
        const e4 = { a: 0, b: 0, c: 0, d: 0, e: 0, f: 0, g: 0 };
        if (t3.a > 0 && t3.g > 0) {
          const i3 = Math.pow(t3.a, t3.g);
          e4.a = 1 / i3, e4.b = -t3.e / i3, e4.g = 1 / t3.g;
        }
        return e4.d = t3.c * t3.d + t3.f, e4.e = -t3.b / t3.a, 0 != t3.c && (e4.c = 1 / t3.c, e4.f = -t3.f / t3.c), e4;
      }
    }
    hasExtendedSkTransferFn() {
      return 0 === this.matrixId;
    }
    isValid() {
      return 2 !== this.matrixId && 2 !== this.primaryId && 2 !== this.transferId && 0 !== this.rangeId;
    }
    getColorSpacePrimaries() {
      const e3 = o.WO;
      switch (this.primaryId) {
        case 1:
          return o.P5;
        case 4:
          return o.Wc;
        case 5:
          return o.cA;
        case 7:
          return o.vi;
        case 8:
          return o.cp;
        case 9:
          return o.Je;
        case 10:
          return o.lf;
        case 11:
          return o.Rk;
        case 12:
          return o.tR;
      }
      return e3;
    }
    getPrimaryMatrix() {
      const e3 = this.getColorSpacePrimaries(), t3 = o._O(e3);
      return a2.A.RowMajor([t3.rc(0, 0), t3.rc(0, 1), t3.rc(0, 2), 0, t3.rc(1, 0), t3.rc(1, 1), t3.rc(1, 2), 0, t3.rc(2, 0), t3.rc(2, 1), t3.rc(2, 2), 0, 0, 0, 0, 1]);
    }
  }
}, 91131: (e2, t2, i2) => {
  i2.d(t2, { Je: () => u, P5: () => o, Rk: () => p, WO: () => g, Wc: () => c, _O: () => v, cA: () => d2, cp: () => l, lf: () => f, tR: () => m, vi: () => h });
  var r2 = i2(45726), a2 = i2(1064), s2 = i2(66551), n = i2(60153);
  const o = [0.64, 0.33, 0.3, 0.6, 0.15, 0.06, 0.3127, 0.329], c = [0.67, 0.33, 0.21, 0.71, 0.14, 0.08, 0.31, 0.316], d2 = [0.64, 0.33, 0.29, 0.6, 0.15, 0.06, 0.3127, 0.329], h = [0.63, 0.34, 0.31, 0.595, 0.155, 0.07, 0.3127, 0.329], l = [0.681, 0.319, 0.243, 0.692, 0.145, 0.049, 0.31, 0.316], u = [0.708, 0.292, 0.17, 0.797, 0.131, 0.046, 0.3127, 0.329], f = [1, 0, 0, 1, 0, 0, 0.3333333333333333, 0.3333333333333333], p = [0.68, 0.32, 0.265, 0.69, 0.15, 0.06, 0.314, 0.351], m = [0.68, 0.32, 0.265, 0.69, 0.15, 0.06, 0.3127, 0.329], g = [0, 0, 0, 0, 0, 0, 0, 0];
  function v(e3) {
    const t3 = r2.A.RowMajor([e3[0], e3[2], e3[4], e3[1], e3[3], e3[5], 1 - e3[0] - e3[1], 1 - e3[2] - e3[3], 1 - e3[4] - e3[5]]), i3 = t3.copy().invert(), o2 = new a2.P([e3[6] / e3[7], 1, (1 - e3[6] - e3[7]) / e3[7]]), c2 = (0, n.Y3)(i3, o2);
    let d3 = new r2.A([c2.x, 0, 0, 0, c2.y, 0, 0, 0, c2.z]);
    d3 = (0, s2.B)(t3, d3);
    const h2 = (function(e4, t4) {
      const i4 = new a2.P([e4 / t4, 1, (1 - e4 - t4) / t4]), o3 = new a2.P([0.96422, 1, 0.82521]), c3 = r2.A.RowMajor([0.8951, 0.2664, -0.1614, -0.7502, 1.7135, 0.0367, 0.0389, -0.0685, 1.0296]), d4 = r2.A.RowMajor([0.9869929, -0.1470543, 0.1599627, 0.4323053, 0.5183603, 0.0492912, -85287e-7, 0.0400428, 0.9684867]), h3 = (0, n.Y3)(c3, i4), l2 = (0, n.Y3)(c3, o3);
      let u2 = new r2.A([l2.x / h3.x, 0, 0, 0, l2.y / h3.y, 0, 0, 0, l2.z / h3.z]);
      return u2 = (0, s2.B)(u2, c3), u2 = (0, s2.B)(d4, u2), u2;
    })(e3[6], e3[7]);
    return (0, s2.B)(h2, d3);
  }
}, 86141: (e2, t2, i2) => {
  i2.d(t2, { $_: () => r2, Cr: () => c, Hi: () => n, J7: () => a2, aP: () => o, q: () => s2 });
  const r2 = { g: 2.2, a: 1, b: 0, c: 0, d: 0, e: 0, f: 0 }, a2 = { g: 2.8, a: 1, b: 0, c: 0, d: 0, e: 0, f: 0 }, s2 = { g: 2.222222222222, a: 0.899626676224, b: 0.100373323776, c: 0.25, d: 0.091286342118, e: 0, f: 0 }, n = { g: 1, a: 1, b: 0, c: 0, d: 0, e: 0, f: 0 }, o = { g: 2.4, a: 0.9478672985781991, b: 0.05213270142180095, c: 0.07739938080495357, d: 0.04045, e: 0, f: 0 }, c = { g: 2.6, a: 1.034080527699, b: 0, c: 0, d: 0, e: 0, f: 0 };
}, 89401: (e2, t2, i2) => {
  i2.d(t2, { A: () => o, U: () => n });
  const r2 = 0.2627, a2 = 0.678, s2 = 0.0593;
  function n(e3) {
    e3.metadata.hlgOOTFGammaMinusOne = 0.2;
  }
  function o(e3) {
    return 0 === e3.type ? "\n      {\n        vec4 luma_vec = vec4(".concat(r2, ", ").concat(a2, ", ").concat(s2, ", 0.0);\n        float L = dot(color, luma_vec);\n        if (L > 0.0) {\n          color.r *= pow(L, hlg_ootf_gamma_minus_one);\n          color.g *= pow(L, hlg_ootf_gamma_minus_one);\n          color.b *= pow(L, hlg_ootf_gamma_minus_one);\n        }\n      }\n    ") : 1 === e3.type ? "\n      {\n        let luma_vec: vec4<f32> = vec4(".concat(r2, ", ").concat(a2, ", ").concat(s2, ", 0.0);\n        let L: f32 = dot(color, luma_vec);\n        if (L > 0.0) {\n          color.r *= pow(L, hlg_ootf_gamma_minus_one);\n          color.g *= pow(L, hlg_ootf_gamma_minus_one);\n          color.b *= pow(L, hlg_ootf_gamma_minus_one);\n        }\n      }\n    ") : "";
  }
}, 7511: (e2, t2, i2) => {
  function r2(e3, t3) {
    let i3 = "", r3 = "";
    if (0 === t3.type ? (i3 = "mat4", r3 = "vec4") : 1 === t3.type && (i3 = "mat4x4", r3 = "vec4"), !i3 || !r3) return "";
    let a2 = "\n      color = ".concat(i3, "(\n        ").concat(e3.rc(0, 0), ", ").concat(e3.rc(1, 0), ", ").concat(e3.rc(2, 0), ", 0,\n        ").concat(e3.rc(0, 1), ", ").concat(e3.rc(1, 1), ", ").concat(e3.rc(2, 1), ", 0,\n        ").concat(e3.rc(0, 2), ", ").concat(e3.rc(1, 2), ", ").concat(e3.rc(2, 2), ", 0,\n        0, 0, 0, 1\n      ) * color;\n    ");
    return 0 === e3.rc(0, 3) && 0 === e3.rc(1, 3) && 0 === e3.rc(2, 3) || (a2 += "\n        color += ".concat(r3, "(").concat(e3.rc(0, 3), ", ").concat(e3.rc(1, 3), ", ").concat(e3.rc(2, 3), ", 0);\n      ")), a2;
  }
  i2.d(t2, { A: () => r2 });
}, 79955: (e2, t2, i2) => {
  function r2(e3, t3) {
    t3.metadata.sdrRelativeToNitsFactor = t3.dstSdrMaxLuminanceNits / e3;
  }
  function a2(e3) {
    return "\n    color.r *= sdr_relative_to_nits_factor;\n    color.g *= sdr_relative_to_nits_factor;\n    color.b *= sdr_relative_to_nits_factor;\n ";
  }
  i2.d(t2, { A: () => a2, j: () => r2 });
}, 64748: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2, n: () => a2 });
  var r2 = i2(57517);
  function a2(e3, t3, i3) {
    let a3 = i3.dstSdrMaxLuminanceNits;
    t3 && (a3 = r2.kH, i3.sdrWhiteLevel && (a3 = i3.sdrWhiteLevel)), i3.metadata.nitsToSdrRelativeFactor = e3 / a3;
  }
  function s2(e3) {
    return "\n    color.r *= nits_to_sdr_relative_factor;\n    color.g *= nits_to_sdr_relative_factor;\n    color.b *= nits_to_sdr_relative_factor;\n  ";
  }
}, 70194: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2, J: () => a2 });
  var r2 = i2(57517);
  function a2(e3, t3) {
    const i3 = (function(e4, t4) {
      let i4 = r2.hD;
      18 !== e4.getTransferId() && t4.maxContentLightLevel > 0 && (i4 = t4.maxContentLightLevel);
      let a3 = r2.kH;
      return t4.sdrWhiteLevel && (a3 = t4.sdrWhiteLevel), i4 / a3;
    })(e3, t3);
    i3 > t3.dstMaxLuminanceRelative ? (t3.metadata.pqTonemapA = t3.dstMaxLuminanceRelative / (i3 * i3), t3.metadata.pqTonemapB = 1 / t3.dstMaxLuminanceRelative) : (t3.metadata.pqTonemapA = 0, t3.metadata.pqTonemapB = 0);
  }
  function s2(e3) {
    return "\n    {\n      ".concat(1 === e3.type ? "let maximum: f32" : "float maximum", " = max(color.r, max(color.g, color.b));\n      if (maximum > 0.0) {\n        color.r *= (1.0 + pq_tonemap_a * maximum) / (1.0 + pq_tonemap_b * maximum);\n        color.g *= (1.0 + pq_tonemap_a * maximum) / (1.0 + pq_tonemap_b * maximum);\n        color.b *= (1.0 + pq_tonemap_a * maximum) / (1.0 + pq_tonemap_b * maximum);\n      }\n    }\n ");
  }
}, 15380: (e2, t2, i2) => {
  function r2(e3) {
    return e3 === e3 >>> 0 ? "".concat(e3, ".0") : e3.toString();
  }
  i2.d(t2, { A: () => r2 });
}, 25669: (e2, t2, i2) => {
  i2.d(t2, { A: () => v });
  var r2 = i2(6110), a2 = i2(57517), s2 = i2(7511), n = i2(5361), o = i2(63921), c = i2(55168), d2 = i2(16307), h = i2(89401), l = i2(64748), u = i2(70194), f = i2(79955), p = i2(84272), m = i2(51025), g = i2(40326);
  function v(e3, t3, i3) {
    const v2 = [], A = 8 === e3.getMatrixId(), y = (0, s2.A)(e3.getRangeAdjustMatrix(i3.bitDepth), i3);
    if (A || v2.push(y), v2.push((0, s2.A)(e3.getTransformMatrix(i3.bitDepth).invert(), i3)), A && v2.push(y), t3.isValid()) {
      if (e3.isHDR()) {
        switch (e3.getTransferId()) {
          case 18:
            v2.push((0, n.A)(i3));
            break;
          case 16:
            v2.push((0, o.A)(i3));
            break;
          default:
            const t4 = e3.getTransferFunction();
            t4 ? v2.push((0, c.A)(t4, e3.hasExtendedSkTransferFn(), i3)) : v2.push((0, d2.A)(e3.getTransferId(), i3));
        }
        10 === e3.getMatrixId() && v2.push((0, s2.A)(e3.getTransformMatrix(i3.bitDepth).invert(), i3)), v2.push((0, s2.A)(e3.getPrimaryMatrix(), i3));
        const A2 = new r2.A(0, 9, 8, 2);
        switch (e3.getTransferId()) {
          case 18:
            v2.push((0, s2.A)(A2.getPrimaryMatrix().invert(), i3)), (0, h.U)(i3), v2.push((0, h.A)(i3)), (0, l.n)(a2.hD, true, i3), v2.push((0, l.A)(i3)), i3.toneMapPQAndHlgToDst && ((0, u.J)(e3, i3), v2.push((0, u.A)(i3))), v2.push((0, s2.A)(A2.getPrimaryMatrix(), i3));
            break;
          case 16:
            (0, l.n)(a2.th, true, i3), v2.push((0, l.A)(i3)), i3.toneMapPQAndHlgToDst && (v2.push((0, s2.A)(A2.getPrimaryMatrix().invert(), i3)), (0, u.J)(e3, i3), v2.push((0, u.A)(i3)), v2.push((0, s2.A)(A2.getPrimaryMatrix(), i3)));
        }
        switch (v2.push((0, s2.A)(t3.getPrimaryMatrix().invert(), i3)), 10 === t3.getMatrixId() && v2.push((0, s2.A)(t3.getTransformMatrix(i3.bitDepth), i3)), t3.getTransferId()) {
          case 18:
            (0, f.j)(a2.kH, i3), v2.push((0, f.A)(i3)), v2.push((0, p.A)(i3));
            break;
          case 16:
            (0, f.j)(a2.th, i3), v2.push((0, f.A)(i3)), v2.push((0, m.A)(i3));
          default:
            const r3 = t3.getInverseTransferFunction();
            r3 ? v2.push((0, c.A)(r3, e3.hasExtendedSkTransferFn(), i3)) : v2.push((0, g.A)(e3.getTransferId(), i3));
        }
      }
      if (!i3.outputRGB) {
        const e4 = 8 === t3.getMatrixId(), r3 = (0, s2.A)(t3.getRangeAdjustMatrix(i3.bitDepth).invert(), i3);
        e4 && v2.push(r3), v2.push((0, s2.A)(t3.getTransformMatrix(i3.bitDepth), i3)), e4 || v2.push(r3);
      }
    }
    return v2;
  }
}, 57517: (e2, t2, i2) => {
  i2.d(t2, { hD: () => a2, kH: () => r2, th: () => s2 });
  const r2 = 203, a2 = 1e3, s2 = 1e4;
}, 71323: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    return t3 ? "\n      {\n        ".concat(1 === i3.type ? "var v: f32" : "float v", " = abs(color.r);\n        ").concat(e3(), "\n        color.r = sign(color.r) * v;\n      }\n      {\n        ").concat(1 === i3.type ? "var v: f32" : "float v", " = abs(color.g);\n        ").concat(e3(), "\n        color.g = sign(color.g) * v;\n      }\n      {\n        ").concat(1 === i3.type ? "var v: f32" : "float v", " = abs(color.b);\n        ").concat(e3(), "\n        color.b = sign(color.b) * v;\n      }\n    ") : "\n      {\n        ".concat(1 === i3.type ? "var v: f32" : "float v", " = color.r;\n        ").concat(e3(), "\n        color.r = v;\n      }\n      {\n        ").concat(1 === i3.type ? "var v: f32" : "float v", " = color.g;\n        ").concat(e3(), "\n        color.g = v;\n      }\n      {\n        ").concat(1 === i3.type ? "var v: f32" : "float v", " = color.b;\n        ").concat(e3(), "\n        color.b = v;\n      }\n    ");
  }
  i2.d(t2, { A: () => r2 });
}, 40326: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(71323);
  function a2(e3, t3) {
    return (0, r2.A)(function() {
      switch (e3) {
        case 9:
          return "\n          if (v < 0.0) {\n            v = 0.0;\n          }\n          else {\n            v =  1.0 + log(v) / log(10.0) / 2.0;\n          }\n        ";
        case 10:
          return "\n          if (v < sqrt(10.0) / 1000.0)\n            v = 0.0;\n          }\n          else {\n            v = 1.0 + log(v) / log(10.0) / 2.5;\n          }\n        ";
        case 11:
          return "\n          ".concat(1 === t3.type ? "let a: f32" : "float a", " = 1.099296826809442;\n          ").concat(1 === t3.type ? "let b: f32" : "float b", "= 0.018053968510807;\n          if (v < -b) {\n            v = -a * pow(-v, 0.45) + (a - 1.0);\n          }\n          else if (v <= b) {\n            v = 4.5 * v;\n          }\n          else {\n            v = a * pow(v, 0.45) - (a - 1.0);\n          }\n        ");
        case 12:
          return "\n          ".concat(1 === t3.type ? "let a: f32" : "float a", " = 1.099;\n          ").concat(1 === t3.type ? "let b: f32" : "float b", " = 0.018;\n          ").concat(1 === t3.type ? "let l: f32" : "float l", " = 0.0045;\n\n          if (v < -l) {\n            v = -(a * pow(-4.0 * v, 0.45) + (a - 1.0)) / 4.0;\n          }\n          else if (v <= b) {\n            v = 4.5 * v;\n          }\n          else {\n            v = a * pow(v, 0.45) - (a - 1.0);\n          }\n        ");
        default:
          return "";
      }
    }, false, t3);
  }
}, 5361: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(71323);
  function a2(e3) {
    return (0, r2.A)(function() {
      return "\n      v = max(0.0, v);\n      ".concat(1 === e3.type ? "let a: f32" : "float a", " = 0.17883277;\n      ").concat(1 === e3.type ? "let b: f32" : "float b", " = 0.28466892;\n      ").concat(1 === e3.type ? "let c: f32" : "float c", " = 0.55991073;\n      if (v <= 0.5) {\n        v = v * v * 4.0;\n      }\n      else {\n        v = exp((v - c) / a) + b;\n      }\n      v = v / 12.0;\n    ");
    }, false, e3);
  }
}, 84272: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(71323);
  function a2(e3) {
    return (0, r2.A)(function() {
      return "\n      v = max(0.0, v);\n      ".concat(1 === e3.type ? "let a: f32" : "float a", " = 0.17883277;\n      ").concat(1 === e3.type ? "let b: f32" : "float b", " = 0.28466892;\n      ").concat(1 === e3.type ? "let c: f32" : "float c", " = 0.55991073;\n      if (v <= 1.0) {\n        v = 0.5 * sqrt(v);\n      }\n      else {\n        v = a * log(v - b) + c;\n      }\n    ");
    }, false, e3);
  }
}, 63921: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(71323);
  function a2(e3) {
    return (0, r2.A)(function() {
      return "\n      v = max(0.0, v);\n      ".concat(1 === e3.type ? "let m1: f32" : "float m1", " = (2610.0 / 4096.0) / 4.0;\n      ").concat(1 === e3.type ? "let m2: f32" : "float m2", " = (2523.0 / 4096.0) * 128.0;\n      ").concat(1 === e3.type ? "let c1: f32" : "float c1", " = 3424.0 / 4096.0;\n      ").concat(1 === e3.type ? "let c2: f32" : "float c2", " = (2413.0 / 4096.0) * 32.0;\n      ").concat(1 === e3.type ? "let c3: f32" : "float c3", " = (2392.0 / 4096.0) * 32.0;\n      \n      ").concat(0 === e3.type ? "\n        #ifdef GL_FRAGMENT_PRECISION_HIGH\n        highp float v2 = v;\n        #else\n        float v2 = v;\n        #endif\n      " : "var v2: f32 = v;", "\n  \n      v2 = pow(max(pow(v2, 1.0 / m2) - c1, 0.0) / (c2 - c3 * pow(v2, 1.0 / m2)), 1.0 / m1);\n      v = v2;\n    ");
    }, false, e3);
  }
}, 51025: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(71323);
  function a2(e3) {
    return (0, r2.A)(function() {
      return "\n      v = max(0.0, v);\n      ".concat(1 === e3.type ? "let m1: f32" : "float m1", " = (2610.0 / 4096.0) / 4.0;\n      ").concat(1 === e3.type ? "let m2: f32" : "float m2", " = (2523.0 / 4096.0) * 128.0;\n      ").concat(1 === e3.type ? "let c1: f32" : "float c1", " = 3424.0 / 4096.0;\n      ").concat(1 === e3.type ? "let c2: f32" : "float c2", " = (2413.0 / 4096.0) * 32.0;\n      ").concat(1 === e3.type ? "let c3: f32" : "float c3", " = (2392.0 / 4096.0) * 32.0;\n      v =  pow((c1 + c2 * pow(v, m1)) / (1.0 + c3 * pow(v, m1)), m2);\n    ");
    }, false, e3);
  }
}, 16307: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(71323);
  function a2(e3, t3) {
    return (0, r2.A)(function() {
      switch (e3) {
        case 9:
          return "\n          if (v < 0.0) {\n            v = 0.0;\n          }\n          else {\n            v = pow(10.0, (v - 1.0) * 2.0);\n          }\n        ";
        case 10:
          return "\n          if (v < 0.0) {\n            v = 0.0;\n          }\n          else {\n            v = pow(10.0, (v - 1.0) * 2.5);\n          }\n        ";
        case 11:
          return "\n          ".concat(1 === t3.type ? "let a: f32" : "float a", " = 1.099296826809442;\n          ").concat(1 === t3.type ? "let from_linear_neg_a: f32" : "float from_linear_neg_a", " = -1.047844;\n          ").concat(1 === t3.type ? "let from_linear_b: f32" : "float from_linear_b", " = 0.081243;\n          if (v < from_linear_neg_a) {\n            v = -pow((a - 1.0 - v) / a, 1.0 / 0.45);\n          }\n          else if (v <= from_linear_b) {\n            v = v / 4.5;\n          }\n          else {\n            v = pow((v + a - 1.0) / a, 1.0 / 0.45);\n          }\n        ");
        case 12:
          return "\n          ".concat(1 === t3.type ? "let a: f32" : "float a", " = 1.099;\n          ").concat(1 === t3.type ? "let from_linear_neg_l: f32" : "float from_linear_neg_l", " = -0.020250;\n          ").concat(1 === t3.type ? "let from_linear_b: f32" : "float from_linear_b", " = 0.081000;\n          if (v < from_linear_neg_l) {\n            v = -pow((1.0 - a - v * 4.0) / a, 1.0 / 0.45) / 4.0;\n          }\n          else if (v <= from_linear_b) {\n            v = v / 4.5;\n          }\n          else {\n            v = pow((v + a - 1.0) / a, 1.0 / 0.45);\n          }\n        ");
        default:
          return "";
      }
    }, false, t3);
  }
}, 55168: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(71323), a2 = i2(15380);
  function s2(e3, t3, i3) {
    return (0, r2.A)(function() {
      let t4 = 9765625e-10, i4 = "v";
      Math.abs(e3.c - 1) > t4 && (i4 = "".concat((0, a2.A)(e3.c), " * ").concat(i4)), Math.abs(e3.f) > t4 && (i4 = "".concat(i4, " + ").concat((0, a2.A)(e3.f)));
      let r3 = "v";
      return Math.abs(e3.a = 1) > t4 && (r3 = "".concat((0, a2.A)(e3.a), " * ").concat(r3)), Math.abs(e3.b) > t4 && (r3 = "".concat(r3, " + ").concat((0, a2.A)(e3.b))), Math.abs(e3.g - 1) > t4 && (r3 = "pow(".concat(r3, ", ").concat((0, a2.A)(e3.g), ")")), Math.abs(e3.e) > t4 && (r3 = "".concat(r3, " + ").concat((0, a2.A)(e3.e))), "\n      if (v < ".concat((0, a2.A)(e3.d), ") {\n        v = ").concat(i4, ";\n      }\n      else {\n        v = ").concat(r3, ";\n      }\n    ");
    }, false, i3);
  }
}, 38469: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    if (t3) {
      let t4 = e3[3], i4 = e3[4];
      e3[3] = e3[17], e3[4] = e3[18], e3[17] = t4, e3[18] = i4, t4 = e3[10], i4 = e3[11], e3[10] = e3[24], e3[11] = e3[25], e3[24] = t4, e3[25] = i4;
    }
    if (i3) {
      let t4 = e3[3], i4 = e3[4];
      e3[3] = e3[10], e3[4] = e3[11], e3[10] = t4, e3[11] = i4, t4 = e3[17], i4 = e3[18], e3[17] = e3[24], e3[18] = e3[25], e3[24] = t4, e3[25] = i4;
    }
  }
  i2.d(t2, { A: () => r2 });
}, 20088: (e2, t2, i2) => {
  i2.d(t2, { A: () => h });
  var r2, a2, s2 = i2(134), n = i2(80662), o = i2.n(n), c = i2(61499), d2 = i2(12085);
  class h {
    constructor() {
      (0, s2.A)(this, "offset", void 0), (0, s2.A)(this, "multiplier", void 0), (0, s2.A)(this, "pqTonemapA", void 0), (0, s2.A)(this, "pqTonemapB", void 0), (0, s2.A)(this, "hlgOOTFGammaMinusOne", void 0), (0, s2.A)(this, "nitsToSdrRelativeFactor", void 0), (0, s2.A)(this, "sdrRelativeToNitsFactor", void 0);
    }
  }
  r2 = h.prototype, (a2 = new (o())()).set("offset", { 0: 18, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), a2.set("multiplier", { 0: 18, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), a2.set("pqTonemapA", { 0: 18, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), a2.set("pqTonemapB", { 0: 18, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 12, 8: 0 }), a2.set("hlgOOTFGammaMinusOne", { 0: 18, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 16, 8: 0 }), a2.set("nitsToSdrRelativeFactor", { 0: 18, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 20, 8: 0 }), a2.set("sdrRelativeToNitsFactor", { 0: 18, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 24, 8: 0 }), (0, d2.A)(r2, c.Og, true), (0, d2.A)(r2, c.dc, 4), (0, d2.A)(r2, c.g7, 28), (0, d2.A)(r2, c.JY, a2);
}, 36719: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134), a2 = i2(9188);
  class s2 extends a2.A {
    constructor(e3, t3, i3 = true) {
      super(e3, t3), (0, r2.A)(this, "enableColor", void 0), (0, r2.A)(this, "aPoint", void 0), (0, r2.A)(this, "aColor", void 0), this.enableColor = i3;
    }
    link(e3) {
      super.link(e3), this.aPoint = this.gl.getAttribLocation(this.program, "point"), this.aColor = this.gl.getAttribLocation(this.program, "color"), this.enableColor ? (this.gl.enableVertexAttribArray(this.aPoint), this.gl.enableVertexAttribArray(this.aColor)) : this.gl.enableVertexAttribArray(this.aPoint);
    }
    bind() {
      super.bind(), this.enableColor ? (this.gl.vertexAttribPointer(this.aPoint, 3, this.gl.FLOAT, false, 7 * Float32Array.BYTES_PER_ELEMENT, 0), this.gl.vertexAttribPointer(this.aColor, 4, this.gl.FLOAT, false, 7 * Float32Array.BYTES_PER_ELEMENT, 3 * Float32Array.BYTES_PER_ELEMENT)) : this.gl.vertexAttribPointer(this.aPoint, 3, this.gl.FLOAT, false, 7 * Float32Array.BYTES_PER_ELEMENT, 0);
    }
  }
}, 9188: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(134);
  i2(4624);
  class a2 {
    constructor(e3, t3) {
      (0, r2.A)(this, "gl", void 0), (0, r2.A)(this, "_program", void 0), (0, r2.A)(this, "vertexShader", void 0), (0, r2.A)(this, "fragmentShader", void 0), this.vertexShader = e3, this.fragmentShader = t3;
    }
    link(e3) {
      this.gl = e3, this.vertexShader && this.vertexShader.compile(this.gl), this.fragmentShader && this.fragmentShader.compile(this.gl), this._program = this.gl.createProgram(), this.gl.attachShader(this._program, this.vertexShader.shader), this.gl.attachShader(this._program, this.fragmentShader.shader), this.gl.linkProgram(this._program);
    }
    stop() {
      this.vertexShader.stop(this.gl), this.fragmentShader.stop(this.gl), this.gl.deleteProgram(this._program), this.vertexShader = null, this.fragmentShader = null, this._program = null;
    }
    bind() {
      this.gl.useProgram(this._program);
    }
    get program() {
      return this._program;
    }
  }
}, 24399: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(134), a2 = i2(36719), s2 = i2(37022), n = i2(36200), o = i2(84209);
  class c extends a2.A {
    constructor(e3, t3) {
      super(new s2.A(t3 || o.A), new n.A(e3)), (0, r2.A)(this, "rotateMatrixLocation", void 0), (0, r2.A)(this, "ySamplerLocation", void 0), (0, r2.A)(this, "uSamplerLocation", void 0), (0, r2.A)(this, "vSamplerLocation", void 0), (0, r2.A)(this, "aSamplerLocation", void 0);
    }
    link(e3) {
      super.link(e3), this.rotateMatrixLocation = this.gl.getUniformLocation(this.program, "rotateMatrix"), this.ySamplerLocation = this.gl.getUniformLocation(this.program, "y_Sampler"), this.uSamplerLocation = this.gl.getUniformLocation(this.program, "u_Sampler"), this.vSamplerLocation = this.gl.getUniformLocation(this.program, "v_Sampler"), this.aSamplerLocation = this.gl.getUniformLocation(this.program, "a_Sampler");
    }
    setRotateMatrix(e3) {
      this.gl.uniformMatrix4fv(this.rotateMatrixLocation, false, new Float32Array(e3));
    }
    bindYTexture(e3 = 0) {
      this.gl.uniform1i(this.ySamplerLocation, e3);
    }
    bindUTexture(e3 = 0) {
      this.gl.uniform1i(this.uSamplerLocation, e3);
    }
    bindVTexture(e3 = 0) {
      this.gl.uniform1i(this.vSamplerLocation, e3);
    }
    bindATexture(e3 = 0) {
      this.gl.uniform1i(this.aSamplerLocation, e3);
    }
  }
}, 25408: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134), a2 = i2(24399);
  class s2 extends a2.A {
    constructor(e3, t3) {
      super(e3, t3), (0, r2.A)(this, "offsetLocation", void 0), (0, r2.A)(this, "multiplierLocation", void 0), (0, r2.A)(this, "pqTonemapALocation", void 0), (0, r2.A)(this, "pqTonemapBLocation", void 0), (0, r2.A)(this, "hlgOOTFGammaMinusOneLocation", void 0), (0, r2.A)(this, "hlgDstMaxLuminanceRelativeLocation", void 0), (0, r2.A)(this, "nitsToSdrRelativeFactorLocation", void 0), (0, r2.A)(this, "sdrRelativeToNitsFactorLocation", void 0);
    }
    link(e3) {
      super.link(e3), this.offsetLocation = this.gl.getUniformLocation(this.program, "offset"), this.multiplierLocation = this.gl.getUniformLocation(this.program, "multiplier"), this.pqTonemapALocation = this.gl.getUniformLocation(this.program, "pq_tonemap_a"), this.pqTonemapBLocation = this.gl.getUniformLocation(this.program, "pq_tonemap_b"), this.hlgOOTFGammaMinusOneLocation = this.gl.getUniformLocation(this.program, "hlg_ootf_gamma_minus_one"), this.nitsToSdrRelativeFactorLocation = this.gl.getUniformLocation(this.program, "nits_to_sdr_relative_factor"), this.sdrRelativeToNitsFactorLocation = this.gl.getUniformLocation(this.program, "sdr_relative_to_nits_factor");
    }
    setMetaData(e3) {
      this.gl.uniform1f(this.offsetLocation, e3.offset), this.gl.uniform1f(this.multiplierLocation, e3.multiplier), this.gl.uniform1f(this.pqTonemapALocation, e3.pqTonemapA), this.gl.uniform1f(this.pqTonemapBLocation, e3.pqTonemapB), this.gl.uniform1f(this.hlgOOTFGammaMinusOneLocation, e3.hlgOOTFGammaMinusOne), this.gl.uniform1f(this.nitsToSdrRelativeFactorLocation, e3.nitsToSdrRelativeFactor), this.gl.uniform1f(this.sdrRelativeToNitsFactorLocation, e3.sdrRelativeToNitsFactor);
    }
  }
}, 18915: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(24399);
  class a2 extends r2.A {
    constructor(e3, t3) {
      super(e3, t3);
    }
  }
}, 36200: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(27976);
  class a2 extends r2.A {
    constructor(e3) {
      super(1, e3);
    }
  }
}, 27976: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(134);
  i2(4624);
  class a2 {
    constructor(e3, t3) {
      (0, r2.A)(this, "type", void 0), (0, r2.A)(this, "_shader", void 0), (0, r2.A)(this, "_source", void 0), (0, r2.A)(this, "compiled", void 0), this.type = e3, this._shader = null, this._source = t3, this.compiled = false;
    }
    compile(e3) {
      this.compiled || (this._shader = e3.createShader(0 === this.type ? e3.VERTEX_SHADER : e3.FRAGMENT_SHADER), e3.shaderSource(this._shader, this._source), e3.compileShader(this._shader), this.compiled = true);
    }
    stop(e3) {
      e3.deleteShader(this._shader), this._shader = null;
    }
    get shader() {
      return this._shader;
    }
  }
}, 37022: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(27976);
  class a2 extends r2.A {
    constructor(e3) {
      super(0, e3);
    }
  }
}, 22684: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134), a2 = i2(67672);
  class s2 {
    constructor(e3, t3, i3) {
      (0, r2.A)(this, "gl", void 0), (0, r2.A)(this, "width", void 0), (0, r2.A)(this, "height", void 0), (0, r2.A)(this, "texture", void 0), this.gl = e3, this.width = t3, this.height = i3, this.texture = this.gl.createTexture();
    }
    getTexture() {
      return this.texture;
    }
    bind(e3) {
      a2.ai(e3) && this.gl.activeTexture(this.gl.TEXTURE0 + e3), this.gl.bindTexture(this.gl.TEXTURE_2D, this.texture);
    }
    setSize(e3, t3) {
      this.width = e3, this.height = t3;
    }
    setUnpackAlignment() {
      this.width % 8 == 0 ? this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, 8) : this.width % 4 == 0 ? this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, 4) : this.width % 2 == 0 ? this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, 2) : this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT, 1);
    }
    destroy() {
      this.texture && (this.gl.deleteTexture(this.texture), this.texture = null);
    }
  }
}, 18105: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(134), a2 = i2(22684), s2 = i2(4624);
  class n extends a2.A {
    constructor(e3, t3, i3) {
      super(e3, t3, i3), (0, r2.A)(this, "filter", void 0), (0, r2.A)(this, "format", void 0), (0, r2.A)(this, "internalformat", void 0), (0, r2.A)(this, "dataType", void 0), (0, r2.A)(this, "firstUploaded", void 0), (0, r2.A)(this, "pbo", void 0), this.format = this.gl.LUMINANCE, this.filter = this.gl.LINEAR, this.internalformat = this.gl.LUMINANCE, this.dataType = this.gl.UNSIGNED_BYTE;
    }
    init() {
      this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MIN_FILTER, this.filter), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_MAG_FILTER, this.filter), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_S, this.gl.CLAMP_TO_EDGE), this.gl.texParameteri(this.gl.TEXTURE_2D, this.gl.TEXTURE_WRAP_T, this.gl.CLAMP_TO_EDGE), this.firstUploaded = false;
    }
    setFormat(e3) {
      this.format = e3;
    }
    setInternalformat(e3) {
      this.internalformat = e3;
    }
    setDataType(e3) {
      this.dataType = e3;
    }
    setFilter(e3) {
      this.filter = e3;
    }
    fill(e3) {
      if (this.gl.bindTexture(this.gl.TEXTURE_2D, this.texture), this.setUnpackAlignment(), this.firstUploaded) if (this.pbo) {
        const t3 = this.gl;
        t3.bindBuffer(t3.PIXEL_UNPACK_BUFFER, this.pbo), t3.bufferSubData(t3.PIXEL_UNPACK_BUFFER, 0, e3), t3.texSubImage2D(this.gl.TEXTURE_2D, 0, 0, 0, this.width, this.height, this.format, this.dataType, 0);
      } else this.gl.texSubImage2D(this.gl.TEXTURE_2D, 0, 0, 0, this.width, this.height, this.format, this.dataType, e3);
      else {
        if ("function" == typeof WebGL2RenderingContext && this.gl instanceof WebGL2RenderingContext) try {
          this.pbo = this.gl.createBuffer(), this.gl.bindBuffer(this.gl.PIXEL_UNPACK_BUFFER, this.pbo), this.gl.bufferData(this.gl.PIXEL_UNPACK_BUFFER, e3, this.gl.STREAM_DRAW), this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.internalformat, this.width, this.height, 0, this.format, this.dataType, 0);
        } catch (t3) {
          this.pbo = null, s2.R8("not support pbo", "src/avrender/image/webgl/texture/VideoTexture.ts", 109), this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.internalformat, this.width, this.height, 0, this.format, this.dataType, e3);
        }
        else this.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.internalformat, this.width, this.height, 0, this.format, this.dataType, e3);
        this.firstUploaded = true;
      }
    }
    destroy() {
      this.pbo && this.gl.deleteBuffer(this.pbo), super.destroy();
    }
  }
}, 48641: (e2, t2, i2) => {
  i2.d(t2, { A: () => v });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = (i2(10278), i2(37837)), o = i2(11473), c = i2(84149), d2 = i2(4624), h = i2(26429), l = i2(44690), u = i2(67672), f = i2(14686), p = i2(86932);
  const m = "src/avrender/pcm/AudioSourceBufferNode.ts", g = l.A.windows || l.A.mac || l.A.linux ? 20 : 30;
  class v {
    constructor(e3, t3, i3 = {}) {
      (0, r2.A)(this, "context", void 0), (0, r2.A)(this, "observer", void 0), (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "pullIPC", void 0), (0, r2.A)(this, "buffer", void 0), (0, r2.A)(this, "channels", void 0), (0, r2.A)(this, "ended", void 0), (0, r2.A)(this, "float32", void 0), (0, r2.A)(this, "buffered", void 0), (0, r2.A)(this, "pause", void 0), (0, r2.A)(this, "startTime", void 0), (0, r2.A)(this, "dest", void 0), (0, r2.A)(this, "queue", void 0), (0, r2.A)(this, "firstRendered", void 0), (0, r2.A)(this, "lastStutterTimestamp", void 0), this.context = e3, this.observer = t3, this.options = i3;
    }
    async request(e3, t3, i3) {
      switch (e3) {
        case "init":
          break;
        case "start": {
          const { port: e4, channels: i4 } = t3;
          this.channels = i4, this.pullIPC = new c.Ay(e4), this.buffer = this.allocBuffer(), this.float32 = new Float32Array((0, o.eq)().buffer), this.queue = [], this.startTime = 0, this.ended = false, this.pause = false, this.firstRendered = false, this.buffered = true, this.lastStutterTimestamp = (0, p.A)();
          let r3 = await this.pullInterval();
          if (r3 < 0) return this.ended = true, this.buffered = false, this.freeBuffer(this.buffer), d2.pq("audio source ended", m, 105), void this.observer.onEnded();
          this.buffering(), r3 = await this.pullInterval(), r3 < 0 && (this.ended = true, this.buffered = false), this.process();
          break;
        }
        case "restart": {
          if (!this.ended) return;
          this.buffer = this.allocBuffer(), this.queue = [], this.startTime = 0, this.ended = false, this.pause = false, this.firstRendered = false, this.buffered = true, this.lastStutterTimestamp = (0, p.A)();
          let e4 = await this.pullInterval();
          if (e4 < 0) return this.ended = true, this.buffered = false, this.freeBuffer(this.buffer), d2.pq("audio source ended", m, 144), void this.observer.onEnded();
          this.buffering(), e4 = await this.pullInterval(), e4 < 0 && (this.ended = true, this.buffered = false), this.process();
          break;
        }
        case "stop":
          this.freeBuffer(this.buffer), this.buffer = null, this.ended = true, this.pullIPC.destroy();
          break;
        case "clear":
          this.queue.forEach((e4) => {
            e4.disconnect();
          }), this.queue.length = 0;
          break;
        case "pause":
          this.pause = true;
          break;
        case "unpause":
          this.pause = false, this.queue.length || this.process();
      }
    }
    allocBuffer() {
      const e3 = (0, n.Gy)(48);
      s2.M[20](e3, (0, n.Gy)(4 * this.channels));
      const t3 = (0, n.Gy)(512 * g * this.channels);
      for (let i3 = 0; i3 < this.channels; i3++) s2.M[20](a2.f[20](e3) + 4 * i3, t3 + 128 * g * 4 * i3);
      return s2.M[15](e3 + 12, 128 * g), e3;
    }
    freeBuffer(e3) {
      e3 && ((0, n.aI)(a2.f[20](e3)), (0, n.aI)(e3), (0, n.Eb)(e3));
    }
    async pullInterval() {
      let e3 = 0;
      if (this.options.isMainWorker) {
        const t3 = await this.pullIPC.request("pullBuffer", { nbSamples: 128 * g });
        u.sv(t3) ? (e3 = 0, (0, f.lW)(a2.f[20](a2.f[20](this.buffer)), t3.byteLength, new Uint8Array(t3))) : e3 = t3;
      } else e3 = await this.pullIPC.request("pull", { buffer: this.buffer });
      return e3;
    }
    async pull() {
      this.buffered = false, await this.pullInterval() < 0 ? this.ended = true : (this.buffered = true, this.queue.length || this.process());
    }
    buffering() {
      this.float32.length || (this.float32 = new Float32Array((0, o.eq)().buffer));
      const e3 = this.context.createBuffer(this.channels, 128 * g, this.context.sampleRate);
      for (let t4 = 0; t4 < this.channels; t4++) if (a2.f[20](a2.f[20](this.buffer) + 4 * t4)) {
        let i3 = a2.f[20](a2.f[20](this.buffer) + 4 * t4) >>> 2;
        e3.copyToChannel && !h.USE_THREADS ? e3.copyToChannel(this.float32.subarray(i3, i3 + 128 * g), t4, 0) : e3.getChannelData(t4).set(this.float32.subarray(i3, i3 + 128 * g), 0);
      }
      const t3 = this.context.createBufferSource();
      t3.buffer = e3, t3.onended = () => {
        if (this.queue.shift(), this.ended && !this.queue.length) return this.freeBuffer(this.buffer), d2.pq("audio source ended", m, 280), void this.observer.onEnded();
        this.process(), this.queue.length || (0, p.A)() - this.lastStutterTimestamp > 1e3 && (this.observer.onStutter(), this.lastStutterTimestamp = (0, p.A)()), this.firstRendered || (this.firstRendered = true, this.observer.onFirstRendered());
      }, 0 === this.startTime && (this.startTime = this.context.currentTime), t3.start(this.startTime), this.dest && t3.connect(this.dest), this.startTime += t3.buffer.duration, this.queue.push(t3);
    }
    connect(e3) {
      this.dest = e3;
    }
    disconnect() {
      for (let e3 = 0; e3 < this.queue.length; e3++) this.queue[e3].disconnect();
      this.dest = null, this.queue.length = 0;
    }
    process() {
      this.buffer && !this.pause && this.buffered && (this.buffering(), this.pull());
    }
  }
}, 88397: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(6534);
  class a2 extends r2.A {
    constructor(e3, t3, i3 = {}) {
      super(e3, t3, "audio-source-processor", i3);
    }
  }
}, 6534: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(134), a2 = i2(84149), s2 = i2(67672);
  class n {
    constructor(e3, t3, i3, s3 = {}) {
      (0, r2.A)(this, "audioWorkletNode", void 0), (0, r2.A)(this, "ipcPort", void 0), (0, r2.A)(this, "observer", void 0), this.observer = t3, this.audioWorkletNode = new AudioWorkletNode(e3, i3, s3), this.ipcPort = new a2.Ay(this.audioWorkletNode.port), this.ipcPort.on(a2.Wo, (e4) => {
        switch (e4.method) {
          case "ended":
            this.observer.onEnded();
            break;
          case "firstRendered":
            this.observer.onFirstRendered();
            break;
          case "stutter":
            this.observer.onStutter();
        }
      });
    }
    async request(e3, t3, i3) {
      return this.ipcPort.request(e3, t3, i3);
    }
    connect(e3) {
      this.audioWorkletNode.connect(e3);
    }
    getNode() {
      return this.audioWorkletNode;
    }
    disconnect() {
      this.audioWorkletNode.disconnect();
    }
    getParameters(e3) {
      const t3 = this.audioWorkletNode.parameters;
      if (s2.Pc(t3.get)) return t3.get(e3);
      t3.forEach((t4, i3) => {
        if (i3 === e3) return t4;
      });
    }
  }
}, 41324: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(61837);
  async function a2(e3, t3) {
    const i3 = (0, r2.A)(t3, { varName: "processor" }), a3 = new Blob([i3], { type: "text/javascript" }), s2 = URL.createObjectURL(a3), n = e3.audioWorkletModule || {};
    n[t3] = s2, e3.audioWorkletModule = n, await e3.audioWorklet.addModule(s2);
  }
}, 60120: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2, a2 = i2(134), s2 = i2(95335), n = i2(4624);
  !(function(e3) {
    e3[e3.ADD = 0] = "ADD", e3[e3.REMOVE = 1] = "REMOVE", e3[e3.UPDATE_TIMESTAMP_OFFSET = 2] = "UPDATE_TIMESTAMP_OFFSET", e3[e3.CALLBACK = 3] = "CALLBACK", e3[e3.CHANGE_MIME_TYPE = 4] = "CHANGE_MIME_TYPE";
  })(r2 || (r2 = {}));
  const o = { mediaBufferMax: 10 };
  class c {
    constructor(e3 = {}) {
      (0, a2.A)(this, "sourceBuffer", void 0), (0, a2.A)(this, "operatorQueue", void 0), (0, a2.A)(this, "updating", void 0), (0, a2.A)(this, "lastRemoveTime", void 0), (0, a2.A)(this, "paddingCallback", void 0), (0, a2.A)(this, "options", void 0), (0, a2.A)(this, "ending", void 0), (0, a2.A)(this, "onQuotaExceededError", void 0), (0, a2.A)(this, "onEnded", void 0), this.options = s2.X$({}, o, e3), this.operatorQueue = [], this.updating = false, this.lastRemoveTime = 0, this.ending = false;
    }
    setSourceBuffer(e3) {
      this.sourceBuffer && (this.sourceBuffer.onupdateend = null, this.sourceBuffer.onerror = null), this.sourceBuffer = e3, this.sourceBuffer.onupdateend = () => {
        this.paddingCallback && (this.paddingCallback(), this.paddingCallback = null), this.operatorQueue && this.operatorQueue.length ? this.enqueue() : (this.updating = false, this.ending && this.onEnded && this.onEnded());
      }, this.sourceBuffer.onerror = (e4) => {
        n.z3("track update buffer error: ".concat(e4), "src/avrender/track/Track.ts", 110);
      };
    }
    changeMimeType(e3, t3) {
      this.sourceBuffer && (this.operatorQueue.push({ operator: r2.CHANGE_MIME_TYPE, type: e3, mode: t3 }), this.updating || this.enqueue());
    }
    enqueue() {
      if (this.operatorQueue.length) {
        const e3 = this.operatorQueue.shift();
        if (e3.operator === r2.ADD) try {
          this.sourceBuffer.appendBuffer(e3.buffer), this.updating = true, e3.callback && (this.paddingCallback = e3.callback);
        } catch (t3) {
          if (!(t3 instanceof DOMException && "QuotaExceededError" === t3.name)) throw t3;
          this.operatorQueue.unshift(e3), this.onQuotaExceededError && this.onQuotaExceededError(), this.updating = false;
        }
        else e3.operator === r2.REMOVE ? (this.sourceBuffer.remove(e3.start, e3.end), this.updating = true, e3.callback && (this.paddingCallback = e3.callback)) : e3.operator === r2.UPDATE_TIMESTAMP_OFFSET ? (this.sourceBuffer.timestampOffset = e3.timestampOffset, e3.callback && e3.callback(), this.operatorQueue.length ? this.enqueue() : this.updating = false) : e3.operator === r2.CALLBACK ? (e3.callback && e3.callback(), this.operatorQueue.length ? this.enqueue() : this.updating = false) : e3.operator === r2.CHANGE_MIME_TYPE && (this.sourceBuffer.changeType(e3.type), this.sourceBuffer.mode = e3.mode, this.sourceBuffer.timestampOffset = 0);
      }
    }
    addBuffer(e3, t3) {
      e3 ? (this.operatorQueue.push({ operator: r2.ADD, buffer: e3, callback: t3 }), this.updating || this.enqueue()) : t3 && t3();
    }
    insertEnqueueCallback(e3) {
      this.operatorQueue.push({ operator: r2.CALLBACK, callback: e3 }), this.updating || this.enqueue();
    }
    updateTimestampOffset(e3, t3) {
      this.operatorQueue.push({ operator: r2.UPDATE_TIMESTAMP_OFFSET, timestampOffset: e3, callback: t3 }), this.updating || this.enqueue();
    }
    removeBuffer(e3, t3) {
      this.ending || (e3 = Math.floor(e3)) - this.lastRemoveTime < this.options.mediaBufferMax << 1 || (this.operatorQueue.push({ operator: r2.REMOVE, start: this.lastRemoveTime, end: e3 - this.options.mediaBufferMax, callback: t3 }), this.updating || this.enqueue(), this.lastRemoveTime = e3 - this.options.mediaBufferMax);
    }
    removeAllBuffer(e3) {
      this.sourceBuffer.buffered.length ? (this.operatorQueue.push({ operator: r2.REMOVE, start: this.sourceBuffer.buffered.start(0), end: this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length - 1), callback: e3 }), this.updating || this.enqueue()) : e3 && e3();
    }
    end() {
      this.ending = true, this.updating || this.operatorQueue.length || this.onEnded && this.onEnded();
    }
    stop() {
      if (this.sourceBuffer) {
        try {
          this.sourceBuffer.abort(), this.updating = false;
        } catch (e3) {
        }
        try {
          this.sourceBuffer.buffered.length && (this.updating ? this.operatorQueue.push({ operator: r2.REMOVE, start: this.sourceBuffer.buffered.start(0), end: this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length - 1) }) : (this.sourceBuffer.remove(this.sourceBuffer.buffered.start(0), this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length - 1)), this.updating = true)), this.paddingCallback && (this.paddingCallback(), this.paddingCallback = null);
        } catch (e3) {
        }
      }
    }
    reset() {
      this.stop(), this.operatorQueue.length = 0, this.ending = false;
    }
    isPaused() {
      return !this.updating && this.operatorQueue.length;
    }
    getQueueLength() {
      return this.operatorQueue.length;
    }
    getBufferedTime() {
      return this.sourceBuffer && this.sourceBuffer.buffered.length ? this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length - 1) - this.sourceBuffer.buffered.start(0) : 0;
    }
    getBufferedStart() {
      return this.sourceBuffer && this.sourceBuffer.buffered.length ? this.sourceBuffer.buffered.start(0) : 0;
    }
    getBufferedEnd() {
      return this.sourceBuffer && this.sourceBuffer.buffered.length ? this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length - 1) : 0;
    }
    getBufferedDuration(e3) {
      if (this.sourceBuffer && this.sourceBuffer.buffered.length) {
        let t3 = 0;
        try {
          for (let i3 = 0; i3 < this.sourceBuffer.buffered.length; i3++) {
            const r3 = Math.max(e3, this.sourceBuffer.buffered.start(i3));
            t3 += Math.max(e3, this.sourceBuffer.buffered.end(i3)) - r3;
          }
        } catch (e4) {
        }
        return t3;
      }
      return 0;
    }
    getSourceBuffer() {
      return this.sourceBuffer;
    }
    setMediaBufferMax(e3) {
      this.options.mediaBufferMax = e3;
    }
    getMediaBufferMax() {
      return this.options.mediaBufferMax;
    }
    destroy() {
      this.stop(), this.operatorQueue = null, this.sourceBuffer && (this.sourceBuffer.onupdateend = this.sourceBuffer.onerror = null, this.sourceBuffer = null);
    }
  }
}, 85224: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(63939), a2 = i2(79756), s2 = i2(86834);
  function n(e3) {
    let t3 = "";
    return t3 = 86017 !== r2.f[15](e3 + 4) || s2.A.firefox ? 'audio/mp4; codecs="'.concat((0, a2.A)(e3), '"') : "audio/mpeg", t3;
  }
}, 10333: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(63939), a2 = i2(28875);
  function s2(e3) {
    return 139 === r2.f[15](e3 + 4) ? 'video/webm; codecs="'.concat((0, a2.A)(e3), '"') : 'video/mp4; codecs="'.concat((0, a2.A)(e3), '"');
  }
}, 68960: (e2, t2, i2) => {
  i2.d(t2, { A: () => l });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(77162), o = i2(74503), c = i2(9599), d2 = i2(94300), h = i2(77231);
  class l {
    constructor() {
      (0, r2.A)(this, "index", h.N_), (0, r2.A)(this, "id", h.N_), (0, r2.A)(this, "privData", null), (0, r2.A)(this, "privateData2", null), (0, r2.A)(this, "codecpar", (0, o.A)(new n.A(), n.A)), (0, r2.A)(this, "sideData", {}), (0, r2.A)(this, "nbFrames", BigInt(0)), (0, r2.A)(this, "metadata", {}), (0, r2.A)(this, "duration", h.Dh), (0, r2.A)(this, "startTime", h.Dh), (0, r2.A)(this, "firstDTS", h.Dh), (0, r2.A)(this, "disposition", 0), (0, r2.A)(this, "timeBase", (0, o.A)(c.P)), (0, r2.A)(this, "sampleIndexes", []), (0, r2.A)(this, "sampleIndexesPosMap", new (s2())());
    }
    destroy() {
      this.codecpar && (this.codecpar.destroy(), (0, d2.A)(this.codecpar), this.codecpar = null), this.timeBase && ((0, d2.A)(this.timeBase), this.timeBase = null), this.sampleIndexes.length = 0, this.sampleIndexesPosMap.clear();
    }
  }
}, 95832: (e2, t2, i2) => {
  i2.d(t2, { Bq: () => l, Ij: () => h, XC: () => d2, f7: () => u, uF: () => s2 });
  var r2 = i2(77231), a2 = i2(37246);
  const s2 = { 1: "Main", 2: "LC", 3: "SSR", 4: "LTP", 5: "HE", 6: "SCALABLE", 29: "HEv2", 23: "LD", 39: "ELD" }, n = { 96e3: 0, 88200: 1, 64e3: 2, 48e3: 3, 44100: 4, 32e3: 5, 24e3: 6, 22050: 7, 16e3: 8, 12e3: 9, 11025: 10, 8e3: 11, 7350: 12 }, o = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350, r2.N_, r2.N_, r2.N_], c = [r2.N_, 1, 2, 3, 4, 5, 6, 7];
  function d2(e3, t3) {
    if (!t3 && e3.sideData[1] && (t3 = e3.sideData[1]), t3) {
      const { profile: i3, sampleRate: a3, channels: s3 } = (function(e4) {
        let t4 = r2.N_, i4 = r2.N_, a4 = r2.N_;
        return e4.length >= 2 && (t4 = e4[0] >> 3 & 31, i4 = o[(7 & e4[0]) << 1 | e4[1] >> 7], a4 = c[e4[1] >> 3 & 15]), { profile: t4, sampleRate: i4, channels: a4 };
      })(t3);
      e3.codecpar.profile = i3, e3.codecpar.sampleRate = a3, e3.codecpar.chLayout.nbChannels = s3, e3.codecpar.frameSize = 5 === i3 ? 2048 : 1024, e3.codecpar.format = 8;
    }
  }
  function h(e3) {
    const t3 = n[e3.sampleRate], i3 = e3.chLayout.nbChannels, a3 = e3.profile === r2.N_ ? 2 : e3.profile, s3 = new Uint8Array(2);
    return s3[0] = (31 & a3) << 3 | (14 & t3) >> 1, s3[1] = (1 & t3) << 7 | (15 & i3) << 3, s3;
  }
  function l(e3) {
    if (e3.length < 7) return -1;
    const t3 = e3[0] << 4 | e3[1] >> 4;
    if (4095 !== t3) return -1;
    const i3 = 1 & e3[1], r3 = (192 & e3[2]) >>> 6, a3 = (60 & e3[2]) >>> 2, s3 = (1 & e3[2]) << 2 | (192 & e3[3]) >>> 6, n2 = (3 & e3[3]) << 11 | e3[4] << 3 | (224 & e3[5]) >>> 5, d3 = 3 & e3[6];
    let h2 = 1 === i3 ? 7 : 9, l2 = n2 - h2;
    return { syncWord: t3, profile: r3 + 1, sampleRate: o[a3], channels: c[s3], aacFrameLength: n2, numberOfRawDataBlocksInFrame: d3, headerLength: h2, framePayloadLength: l2 };
  }
  function u(e3, t3) {
    function i3() {
      const e4 = t3.readU(2);
      let i4 = 0;
      for (let r4 = 0; r4 <= e4; r4++) i4 <<= 8, i4 |= t3.readU(8);
      return i4;
    }
    t3 || (t3 = new a2.A()).appendBuffer(e3);
    const r3 = t3.getPointer(), s3 = { syncWord: 0, profile: 0, sampleRate: 0, channels: 0, useSameStreamMux: false, headerLength: 0, framePayloadLength: 0, muxLengthBytes: 0 }, n2 = t3.readU(11);
    if (695 !== n2) return -1;
    s3.syncWord = n2, s3.muxLengthBytes = t3.readU(13);
    const d3 = 1 === t3.readU1();
    if (s3.useSameStreamMux = d3, !d3) {
      const e4 = 1 === t3.readU1();
      if (e4 && 1 === t3.readU1()) return -1;
      if (e4 && i3(), 1 !== t3.readU1()) return -1;
      if (0 !== t3.readU(6)) return -1;
      if (0 !== t3.readU(4)) return -1;
      if (0 !== t3.readU(3)) return -1;
      let r4 = e4 ? i3() : 0;
      const a3 = t3.readU(5);
      r4 -= 5;
      const n3 = t3.readU(4);
      r4 -= 4;
      const d4 = t3.readU(4);
      if (r4 -= 4, t3.readU(3), r4 -= 3, r4 > 0 && t3.readU(r4), 0 !== t3.readU(3)) return -1;
      if (t3.readU(8), 1 === t3.readU1()) if (e4) i3();
      else {
        let e5 = 0;
        for (; ; ) {
          e5 <<= 8;
          const i4 = 1 === t3.readU1();
          if (e5 += t3.readU(8), !i4) break;
        }
      }
      1 === t3.readU1() && t3.readU(8), s3.profile = a3 + 1, s3.sampleRate = o[n3], s3.channels = c[d4];
    }
    let h2 = 0;
    for (; ; ) {
      const e4 = t3.readU(8);
      if (h2 += e4, 255 !== e4) break;
    }
    return s3.framePayloadLength = h2, s3.headerLength = t3.getPointer() - r3 + (8 === t3.getBitLeft() ? 0 : 1), s3;
  }
}, 87518: (e2, t2, i2) => {
  i2.d(t2, { R: () => f, j: () => a2 });
  var r2 = i2(37246);
  const a2 = [3, 4, 3, 7, 259, 263, 1539, 1543], s2 = [[64, 69, 96], [64, 70, 96], [80, 87, 120], [80, 88, 120], [96, 104, 144], [96, 105, 144], [112, 121, 168], [112, 122, 168], [128, 139, 192], [128, 140, 192], [160, 174, 240], [160, 175, 240], [192, 208, 288], [192, 209, 288], [224, 243, 336], [224, 244, 336], [256, 278, 384], [256, 279, 384], [320, 348, 480], [320, 349, 480], [384, 417, 576], [384, 418, 576], [448, 487, 672], [448, 488, 672], [512, 557, 768], [512, 558, 768], [640, 696, 960], [640, 697, 960], [768, 835, 1152], [768, 836, 1152], [896, 975, 1344], [896, 976, 1344], [1024, 1114, 1536], [1024, 1115, 1536], [1152, 1253, 1728], [1152, 1254, 1728], [1280, 1393, 1920], [1280, 1394, 1920]], n = [4, 5, 6, 5], o = [4, 6, 7, 6], c = [48e3, 44100, 32e3, 0], d2 = [32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, 448, 512, 576, 640], h = [2, 1, 2, 3, 3, 4, 4, 5], l = [1, 2, 3, 6], u = 7;
  function f(e3) {
    const t3 = new r2.A(e3.length);
    t3.appendBuffer(e3);
    const i3 = { syncWord: 0, crc1: 0, srCode: 0, bitstreamId: 0, bitstreamMode: 0, channelMode: 0, lfeOn: 0, frameType: 0, substreamId: 0, centerMixLevel: 0, surroundMixLevel: 0, channelMap: 0, numBlocks: 0, dolbySurroundMode: 0, srShift: 0, sampleRate: 0, bitrate: 0, channels: 0, frameSize: 0, channelLayout: BigInt(0), ac3BitrateCode: 0 };
    if (i3.syncWord = t3.readU(16), 2935 !== i3.syncWord) return -1;
    if (i3.bitstreamId = 31 & t3.peekU(29), i3.bitstreamId > 16) return -2;
    if (i3.numBlocks = 6, i3.ac3BitrateCode = -1, i3.centerMixLevel = 5, i3.surroundMixLevel = 6, i3.dolbySurroundMode = 0, i3.bitstreamId <= 10) {
      if (i3.crc1 = t3.readU(16), i3.srCode = t3.readU(2), 3 === i3.srCode) return -3;
      const e4 = t3.readU(6);
      if (e4 > 37) return -4;
      i3.ac3BitrateCode = e4 >> 1, t3.readU(5), i3.bitstreamMode = t3.readU(3), i3.channelMode = t3.readU(3), 2 == i3.channelMode ? i3.dolbySurroundMode = t3.readU(2) : (1 & i3.channelMode && 1 != i3.channelMode && (i3.centerMixLevel = n[t3.readU(2)]), 4 & i3.channelMode && (i3.surroundMixLevel = o[t3.readU(2)])), i3.lfeOn = t3.readU(1), i3.srShift = Math.max(i3.bitstreamId, 8) - 8, i3.sampleRate = c[i3.srCode] >> i3.srShift, i3.bitrate = 1e3 * d2[i3.ac3BitrateCode] >> i3.srShift, i3.channels = h[i3.channelMode] + i3.lfeOn, i3.frameSize = 2 * s2[e4][i3.srCode], i3.frameType = 2, i3.substreamId = 0;
    } else {
      if (i3.crc1 = 0, i3.frameType = t3.readU(2), 3 == i3.frameType) return -5;
      if (i3.substreamId = t3.readU(3), i3.frameSize = t3.readU(11) + 1 << 1, i3.frameSize < u) return -6;
      if (i3.srCode = t3.readU(2), 3 == i3.srCode) {
        const e4 = t3.readU(2);
        if (3 == e4) return -7;
        i3.sampleRate = c[e4] / 2, i3.srShift = 1;
      } else i3.numBlocks = l[t3.readU(2)], i3.sampleRate = c[i3.srCode], i3.srShift = 0;
      i3.channelMode = t3.readU(3), i3.lfeOn = t3.readU(1), i3.bitrate = 8 * i3.frameSize * i3.sampleRate / (256 * i3.numBlocks), i3.channels = h[i3.channelMode] + i3.lfeOn;
    }
    return i3.channelLayout = BigInt(a2[i3.channelMode]), i3.lfeOn && (i3.channelLayout |= BigInt(8)), i3;
  }
}, 21477: (e2, t2, i2) => {
  i2.d(t2, { Ui: () => n, XC: () => s2, zk: () => a2 });
  var r2 = i2(37246);
  i2(83314), i2(97317);
  const a2 = { 0: "Main", 1: "High", 2: "Professional" };
  function s2(e3, t3) {
    if (!t3 && e3.sideData[1] && (t3 = e3.sideData[1]), t3 && t3.length >= 4) {
      const i3 = n(t3);
      e3.codecpar.profile = i3.profile, e3.codecpar.level = i3.level;
    }
  }
  function n(e3) {
    const t3 = new r2.A(e3.length);
    t3.appendBuffer(e3), t3.readU1(), t3.readU(7);
    const i3 = t3.readU(3), a3 = t3.readU(5), s3 = t3.readU1();
    let n2 = t3.readU1() ? 10 : 8;
    return t3.readU1() && (n2 = 12), { profile: i3, level: a3, tier: s3, bitDepth: n2, monochrome: t3.readU1(), chromaSubsamplingX: t3.readU1(), chromaSubsamplingY: t3.readU1(), chromaSamplePosition: t3.readU(2) };
  }
}, 43290: (e2, t2, i2) => {
  i2.d(t2, { R: () => d2, u: () => c });
  var r2 = i2(37246), a2 = i2(95073);
  const s2 = [1, 2, 2, 2, 2, 3, 3, 4, 4, 5, 6, 6, 6, 7, 8, 8], n = [0, 8e3, 16e3, 32e3, 0, 0, 11025, 22050, 44100, 0, 0, 12e3, 24e3, 48e3, 96e3, 192e3], o = [32e3, 56e3, 64e3, 96e3, 112e3, 128e3, 192e3, 224e3, 256e3, 32e4, 384e3, 448e3, 512e3, 576e3, 64e4, 768e3, 96e4, 1024e3, 1152e3, 128e4, 1344e3, 1408e3, 1411200, 1472e3, 1536e3, 192e4, 2048e3, 3072e3, 384e4, 0, 0, 0], c = 32;
  function d2(e3) {
    const t3 = new r2.A(e3.length);
    t3.appendBuffer(e3);
    const i3 = { syncWord: 0, frameType: 0, deficitSamples: 0, crcFlag: 0, sampleBlock: 0, frameSize: 0, channelIndex: 0, sampleRateIndex: 0, bitrateIndex: 0, channels: 0, sampleRate: 0, bitrate: 0 };
    return i3.syncWord = t3.readU(32), 2147385345 !== i3.syncWord && 4269736320 !== i3.syncWord ? -1 : (i3.frameType = t3.readU1(), i3.deficitSamples = t3.readU(5) + 1, i3.crcFlag = t3.readU1(), i3.sampleBlock = t3.readU(7) + 1, i3.frameSize = (0, a2.A)(t3.readU(14) + 1, 4), i3.channelIndex = t3.readU(6), i3.sampleRateIndex = t3.readU(4), i3.bitrateIndex = t3.readU(5), i3.channels = s2[i3.channelIndex], i3.sampleRate = n[i3.sampleRateIndex], i3.bitrate = o[i3.bitrateIndex], i3);
  }
}, 14769: (e2, t2, i2) => {
  i2.d(t2, { DK: () => o, XC: () => d2, Xr: () => c, jA: () => s2, ob: () => a2, oe: () => n });
  var r2 = i2(31865);
  const a2 = 34, s2 = 8, n = [0, 8, 12, 0, 16, 20, 24, 32], o = [0, 88200, 176400, 192e3, 8e3, 16e3, 22050, 24e3, 32e3, 44100, 48e3, 96e3, 0, 0, 0, 0], c = [0, 192, 576, 1152, 2304, 4608, 0, 0, 256, 512, 1024, 2048, 4096, 8192, 16384, 32768];
  function d2(e3, t3) {
    if (!t3 && e3.sideData[1] && (t3 = e3.sideData[1]), t3 && t3.length === a2) {
      const { bitsPerRawSample: i3, sampleRate: a3, channels: s3 } = (function(e4) {
        const t4 = new r2.A(e4);
        t4.skip(10);
        const i4 = t4.readUint24();
        return { sampleRate: i4 >> 4, channels: 1 + ((15 & i4) >>> 1), bitsPerRawSample: 1 + ((1 & i4) << 4 | (240 & t4.readUint8()) >>> 4) };
      })(t3);
      e3.codecpar.bitsPerRawSample = i3, e3.codecpar.sampleRate = a3, e3.codecpar.chLayout.nbChannels = s3;
    }
  }
}, 62815: (e2, t2, i2) => {
  i2.d(t2, { KD: () => P, S1: () => w, XC: () => I, kM: () => x, oT: () => k, sL: () => b, tZ: () => A, wf: () => S });
  var r2 = i2(63939), a2 = i2(72739), s2 = i2(729), n = i2(31865), o = i2(37246), c = i2(4624), d2 = i2(14686), h = i2(60264), l = i2(37837), u = i2(23991), f = i2(39381), p = i2(82774);
  const m = "src/avutil/codecs/h264.ts", g = 16, v = 3, A = { 66: "Constrained Baseline", 77: "Main", 100: "High", 110: "High10", 122: "High422", 244: "High444" };
  function y(e3, t3, i3 = []) {
    e3.length > 32 && (c.R8("h264 metadata's sps max length is 32, but get ".concat(e3.length), m, 217), e3 = e3.slice(0, 32)), e3.length > 256 && (c.R8("h264 metadata's pps max length is 256, but get ".concat(e3.length), m, 221), e3 = e3.slice(0, 256));
    let r3 = 7;
    r3 = e3.reduce((e4, t4) => e4 + 2 + t4.length, r3), r3 = t3.reduce((e4, t4) => e4 + 2 + t4.length, r3);
    const n2 = e3[0], o2 = S(n2);
    66 !== o2.profile && 77 !== o2.profile && 88 !== o2.profile && (r3 += 4, i3.length && (r3 = i3.reduce((e4, t4) => e4 + 2 + t4.length, r3)));
    const d3 = new Uint8Array(r3), h2 = new s2.A(d3);
    return h2.writeUint8(1), h2.writeUint8(n2[1]), h2.writeUint8(n2[2]), h2.writeUint8(n2[3]), h2.writeUint8(252 | v), h2.writeUint8(224 | 31 & e3.length), a2.__(e3, (e4) => {
      h2.writeUint16(e4.length), h2.writeBuffer(e4);
    }), h2.writeUint8(t3.length), a2.__(t3, (e4) => {
      h2.writeUint16(e4.length), h2.writeBuffer(e4);
    }), 66 !== o2.profile && 77 !== o2.profile && 88 !== o2.profile && (h2.writeUint8(252 | o2.chromaFormatIdc), h2.writeUint8(248 | o2.bitDepthLumaMinus8), h2.writeUint8(248 | o2.bitDepthChromaMinus8), i3.length && a2.__(i3, (e4) => {
      h2.writeUint16(e4.length), h2.writeBuffer(e4);
    })), d3;
  }
  function w(e3) {
    let t3 = h.py(e3);
    if (t3.length > 1) {
      const e4 = [], i3 = [], r3 = [];
      if (t3.forEach((t4) => {
        const a3 = 31 & t4[0];
        7 === a3 ? e4.push(t4) : 8 === a3 ? i3.push(t4) : 13 === a3 && r3.push(t4);
      }), e4.length && i3.length) return y(e4, i3, r3);
    }
  }
  function b(e3) {
    let t3 = h.py(e3);
    if (t3.length > 1) {
      const e4 = [], i3 = [], r3 = [];
      if (t3.forEach((t4) => {
        const a3 = 31 & t4[0];
        7 === a3 ? e4.push(t4) : 8 === a3 ? i3.push(t4) : 13 === a3 && r3.push(t4);
      }), e4.length && i3.length) {
        const t4 = [e4[0], i3[0]];
        return r3.length && t4.push(r3[0]), h.nW(t4, 0);
      }
    }
  }
  function k(e3, t3 = false) {
    let i3, r3 = h.py(e3), a3 = false;
    if (r3.length) {
      const e4 = [], s4 = [], n3 = [];
      r3.forEach((t4) => {
        const i4 = 31 & t4[0];
        7 === i4 ? e4.push(t4) : 8 === i4 ? s4.push(t4) : 13 === i4 ? n3.push(t4) : 5 === i4 && (a3 = true);
      }), e4.length && s4.length ? (i3 = y(e4, s4, n3), r3 = r3.filter((e5) => {
        const i4 = 31 & e5[0];
        return t3 ? 9 !== i4 : 9 !== i4 && 8 !== i4 && 7 !== i4 && 13 !== i4;
      })) : r3 = r3.filter((e5) => 9 != (31 & e5[0]));
    }
    const s3 = r3.reduce((e4, t4) => e4 + v + 1 + t4.length, 0), n2 = (0, l.sY)(s3), o2 = (0, d2.s3)(n2, s3);
    return h.S9(r3, v, o2), { bufferPointer: n2, length: s3, key: a3, extradata: i3 };
  }
  function x(e3, t3) {
    let i3 = h.py(e3).concat(h.py(t3));
    if (i3.length) {
      const e4 = [], t4 = [], r3 = [], a3 = [], s3 = [];
      return i3.forEach((i4) => {
        const n2 = 31 & i4[0];
        7 === n2 ? e4.push(i4) : 8 === n2 ? t4.push(i4) : 13 === n2 ? r3.push(i4) : 6 === n2 ? a3.push(i4) : 9 !== n2 && s3.push(i4);
      }), (function(e5, t5, i4, r4, a4) {
        const s4 = [h.Le(r4, 0), h.Le(e5, 0), h.Le(t5, 0), h.Le(i4, 0), h.Le(a4, 2)];
        let n2 = s4.reduce((e6, t6) => e6 + t6, 0);
        const o2 = (0, l.sY)(n2 + 6);
        let c2 = o2;
        return p.w8((c2 += 1, c2 - 1), 0), p.w8((c2 += 1, c2 - 1), 0), p.w8((c2 += 1, c2 - 1), 0), p.w8((c2 += 1, c2 - 1), 1), p.w8((c2 += 1, c2 - 1), 9), p.w8((c2 += 1, c2 - 1), 240), r4.length && (h.nW(r4, 0, (0, d2.s3)(c2, s4[0])), c2 += s4[0]), e5.length && (h.nW(e5, 0, (0, d2.s3)(c2, s4[1])), c2 += s4[1]), t5.length && (h.nW(t5, 0, (0, d2.s3)(c2, s4[2])), c2 += s4[2]), i4.length && (h.nW(i4, 0, (0, d2.s3)(c2, s4[3])), c2 += s4[3]), a4.length && h.nW(a4, 2, (0, d2.s3)(c2, s4[4])), { bufferPointer: o2, length: n2 + 6 };
      })(e4, t4, r3, a3, s3);
    }
  }
  function I(e3, t3) {
    let i3;
    if (!t3 && e3.sideData[1] && (t3 = e3.sideData[1]), t3 && h.Bs(t3)) a2.__(h.py(t3), (e4) => {
      if (7 == (31 & e4[0])) return i3 = e4, false;
    });
    else if (t3 && t3.length >= 6) {
      e3.metadata.naluLengthSizeMinusOne = 3 & t3[4];
      const { spss: r3 } = (function(e4) {
        const t4 = new n.A(e4);
        t4.skip(5);
        const i4 = [], r4 = [], a3 = [], s3 = 31 & t4.readUint8();
        for (let e5 = 0; e5 < s3; e5++) {
          const e6 = t4.readUint16();
          i4.push(t4.readBuffer(e6));
        }
        const o2 = t4.readUint8();
        for (let e5 = 0; e5 < o2; e5++) {
          const e6 = t4.readUint16();
          r4.push(t4.readBuffer(e6));
        }
        if (t4.remainingSize() > 4) {
          t4.skip(3);
          const e5 = t4.readUint8();
          if (e5 > 0) for (let i5 = 0; i5 < e5; i5++) {
            const e6 = t4.readUint16();
            a3.push(t4.readBuffer(e6));
          }
        }
        return { spss: i4, ppss: r4, spsExts: a3 };
      })(t3);
      r3.length && (i3 = r3[0]);
    }
    if (i3) {
      const { profile: t4, level: r3, width: a3, height: s3, videoDelay: n2, chromaFormatIdc: o2, bitDepthLumaMinus8: c2 } = S(i3);
      switch (e3.codecpar.profile = t4, e3.codecpar.level = r3, e3.codecpar.width = a3, e3.codecpar.height = s3, e3.codecpar.videoDelay = n2, c2) {
        case 0:
          e3.codecpar.format = 3 === o2 ? 5 : 2 === o2 ? 4 : 0;
          break;
        case 1:
          e3.codecpar.format = 3 === o2 ? 66 : 2 === o2 ? 70 : 60;
          break;
        case 2:
          e3.codecpar.format = 3 === o2 ? 68 : 2 === o2 ? 64 : 62;
      }
    }
  }
  function P(e3, t3 = 4) {
    if (64 & r2.f[15](e3 + 36)) return h.py((0, d2.s3)(r2.f[20](e3 + 24), r2.f[15](e3 + 28))).some((e4) => 5 == (31 & e4[0]));
    {
      const i3 = r2.f[15](e3 + 28);
      let a3 = 0;
      for (; a3 < i3 - t3; ) {
        if (5 == (31 & f.r8(r2.f[20](e3 + 24) + (a3 + t3)))) return true;
        a3 += 4 === t3 ? f.Sg(r2.f[20](e3 + 24) + a3) : 3 === t3 ? f.ht(r2.f[20](e3 + 24) + a3) : 2 === t3 ? f.yd(r2.f[20](e3 + 24) + a3) : f.r8(r2.f[20](e3 + 24) + a3), a3 += t3;
      }
      return false;
    }
  }
  function S(e3) {
    if (!e3 || e3.length < 3) return;
    let t3 = 0;
    0 === e3[0] && 0 === e3[1] && 0 === e3[2] && 1 === e3[3] && (t3 = 4);
    const i3 = h.BN(e3.subarray(t3)), r3 = new o.A(i3.length);
    r3.appendBuffer(i3), r3.readU1(), r3.readU(2), r3.readU(5);
    const a3 = r3.readU(8);
    r3.readU1(), r3.readU1(), r3.readU1(), r3.readU1(), r3.readU1(), r3.readU1(), r3.readU(2);
    const s3 = r3.readU(8);
    u.xb(r3);
    let n2 = 1, c2 = 0, d3 = 0;
    if (100 == a3 || 110 == a3 || 122 == a3 || 244 == a3 || 44 == a3 || 83 == a3 || 86 == a3 || 118 == a3 || 128 == a3 || 138 == a3 || 139 == a3 || 134 == a3 || 135 == a3) {
      let I2 = function(e4) {
        let t4, i4 = 8, a4 = 8;
        for (let s4 = 0; s4 < e4; s4++) 0 !== a4 && (t4 = u.$x(r3), a4 = (i4 + t4 + 256) % 256), i4 = 0 === a4 ? i4 : a4;
      };
      if (n2 = u.xb(r3), 3 === n2 && r3.readU1(), c2 = u.xb(r3), d3 = u.xb(r3), r3.readU1(), r3.readU1()) {
        const P2 = new Array(8);
        for (let S2 = 0; S2 < (3 != n2 ? 8 : 12); S2++) P2[S2] = r3.readU1(), P2[S2] && I2(S2 < 6 ? 16 : 64);
      }
    }
    const l2 = u.xb(r3), f2 = u.xb(r3);
    let p2 = 0, m2 = 0;
    if (0 === f2) p2 = u.xb(r3);
    else if (1 === f2) {
      m2 = r3.readU1(), u.$x(r3), u.$x(r3);
      const T = u.xb(r3);
      for (let M = 0; M < T; M++) u.$x(r3);
    }
    u.xb(r3), r3.readU1();
    const v2 = u.xb(r3), A2 = u.xb(r3), y2 = r3.readU1();
    let w2 = 16 * (v2 + 1), b2 = (2 - y2) * (A2 + 1) * 16;
    y2 || r3.readU1(), r3.readU1();
    const k2 = r3.readU1();
    if (k2) {
      let B = 1, R = 2 - k2;
      1 === n2 ? (B = 2, R = 2 * (2 - k2)) : 2 === k2 && (B = 2, R = 2 - k2), w2 -= B * (u.xb(r3) + u.xb(r3)), b2 -= R * (u.xb(r3) + u.xb(r3));
    }
    let x2 = 0;
    if (r3.readU1()) {
      let C = function() {
        const e4 = u.xb(r3) + 1;
        r3.readU(4), r3.readU(4);
        for (let t4 = 0; t4 < e4; t4++) u.xb(r3), u.xb(r3), r3.readU1();
        r3.readU(5), r3.readU(5), r3.readU(5), r3.readU(5);
      };
      let _ = r3.readU1();
      _ && r3.readU(8) >= 17 && (r3.readU(16), r3.readU(16)), _ = r3.readU1(), _ && r3.readU1(), _ = r3.readU1(), _ && (r3.readU(3), r3.readU1(), _ = r3.readU1(), _ && (r3.readU(8), r3.readU(8), r3.readU(8))), _ = r3.readU1(), _ && (u.xb(r3), u.xb(r3)), _ = r3.readU1(), _ && (r3.readU(32), r3.readU(32), r3.readU1());
      let U = r3.readU1();
      U && C();
      let D = r3.readU1();
      D && C(), (U || D) && r3.readU1(), r3.readU1(), _ = r3.readU1(), _ && (r3.readU1(), u.xb(r3), u.xb(r3), u.xb(r3), u.xb(r3), x2 = Math.min(u.xb(r3), g));
    }
    return { profile: a3, level: s3, width: w2, height: b2, chromaFormatIdc: n2, bitDepthLumaMinus8: c2, bitDepthChromaMinus8: d3, frameMbsOnlyFlag: y2, picOrderCntType: f2, log2MaxPicOrderCntLsbMinus4: p2, deltaPicOrderAlwaysZeroFlag: m2, log2MaxFrameNumMinus4: l2, videoDelay: x2 };
  }
}, 67659: (e2, t2, i2) => {
  i2.d(t2, { KD: () => x, S1: () => A, XC: () => k, ZU: () => P, dT: () => m, kM: () => b, oT: () => w, sL: () => y, wf: () => I });
  var r2 = i2(63939), a2 = i2(72739), s2 = i2(729), n = i2(31865), o = i2(37246), c = i2(14686), d2 = i2(60264), h = i2(37837), l = i2(23991), u = i2(39381), f = i2(82774);
  const p = 16, m = { 1: "Main", 2: "Main10", 3: "MainStillPicture", 4: "Main444" }, g = 3;
  function v(e3, t3, i3) {
    const r3 = t3[0];
    let n2 = 23;
    e3.length && (n2 += 3, n2 = e3.reduce((e4, t4) => e4 + 2 + t4.length, n2)), t3.length && (n2 += 3, n2 = t3.reduce((e4, t4) => e4 + 2 + t4.length, n2)), i3.length && (n2 += 3, n2 = i3.reduce((e4, t4) => e4 + 2 + t4.length, n2));
    const o2 = new Uint8Array(n2), c2 = new s2.A(o2, true), d3 = I(r3);
    c2.writeUint8(1), c2.writeUint8(r3[1]), c2.writeUint8(r3[2]), c2.writeUint8(r3[3]), c2.writeUint8(r3[4]), c2.writeUint8(r3[5]), c2.writeUint8(r3[6]), c2.writeUint8(r3[7]), c2.writeUint8(r3[8]), c2.writeUint8(r3[9]), c2.writeUint8(r3[10]), c2.writeUint8(r3[11]), c2.writeUint8(d3.level), c2.writeUint8(1020), c2.writeUint8(0), c2.writeUint8(16320), c2.writeUint8(16320 | d3.chroma_format_idc), c2.writeUint8(8160 | d3.bit_depth_luma_minus8), c2.writeUint8(8160 | d3.bit_depth_chroma_minus8), c2.writeUint16(0), c2.writeUint8(8 | (1 & r3[0]) << 2 | g);
    let h2 = 0;
    return e3.length && h2++, t3.length && h2++, i3.length && h2++, c2.writeUint8(h2), e3.length && (c2.writeUint8(160), c2.writeUint16(e3.length), a2.__(e3, (e4) => {
      c2.writeUint16(e4.length), c2.writeBuffer(e4);
    })), t3.length && (c2.writeUint8(161), c2.writeUint16(t3.length), a2.__(t3, (e4) => {
      c2.writeUint16(e4.length), c2.writeBuffer(e4);
    })), i3.length && (c2.writeUint8(162), c2.writeUint16(i3.length), a2.__(i3, (e4) => {
      c2.writeUint16(e4.length), c2.writeBuffer(e4);
    })), o2;
  }
  function A(e3) {
    let t3 = d2.py(e3);
    if (t3.length >= 2) {
      const e4 = [], i3 = [], r3 = [];
      if (t3.forEach((t4) => {
        const a3 = t4[0] >>> 1 & 63;
        32 === a3 ? e4.push(t4) : 33 === a3 ? i3.push(t4) : 34 === a3 && r3.push(t4);
      }), i3.length && r3.length) return v(e4, i3, r3);
    }
  }
  function y(e3) {
    let t3 = d2.py(e3);
    if (t3.length >= 2) {
      const e4 = [], i3 = [], r3 = [];
      if (t3.forEach((t4) => {
        const a3 = t4[0] >>> 1 & 63;
        32 === a3 ? e4.push(t4) : 33 === a3 ? i3.push(t4) : 34 === a3 && r3.push(t4);
      }), i3.length && r3.length) {
        const t4 = [i3[0], r3[0]];
        return e4.length && t4.unshift(e4[0]), d2.nW(t4, 0);
      }
    }
  }
  function w(e3, t3 = false) {
    let i3, r3 = false, a3 = d2.py(e3);
    if (a3.length) {
      const e4 = [], s4 = [], n3 = [];
      a3.forEach((t4) => {
        const i4 = t4[0] >>> 1 & 63;
        32 === i4 ? e4.push(t4) : 33 === i4 ? s4.push(t4) : 34 === i4 && n3.push(t4), 19 !== i4 && 20 !== i4 && 21 !== i4 || (r3 = true);
      }), s4.length && n3.length ? (i3 = v(e4, s4, n3), a3 = a3.filter((e5) => {
        const i4 = e5[0] >>> 1 & 63;
        return (t3 || 32 !== i4 && 33 !== i4 && 34 !== i4) && 35 !== i4;
      })) : a3 = a3.filter((e5) => 35 != (e5[0] >>> 1 & 63));
    }
    const s3 = a3.reduce((e4, t4) => e4 + g + 1 + t4.length, 0), n2 = (0, h.sY)(s3), o2 = (0, c.s3)(n2, s3);
    return d2.S9(a3, g, o2), { bufferPointer: n2, length: s3, extradata: i3, key: r3 };
  }
  function b(e3, t3) {
    let i3 = d2.py(e3).concat(d2.py(t3));
    if (i3.length) {
      let e4 = [], t4 = [], r3 = [], a3 = [];
      return i3.forEach((i4) => {
        const s3 = i4[0] >>> 1 & 63;
        32 === s3 ? e4.push(i4) : 33 === s3 ? t4.push(i4) : 34 === s3 ? r3.push(i4) : 35 !== s3 && a3.push(i4);
      }), (function(e5, t5, i4, r4) {
        const a4 = [d2.Le(e5, 0), d2.Le(t5, 0), d2.Le(i4, 0), d2.Le(r4, 2)];
        let s3 = a4.reduce((e6, t6) => e6 + t6, 0);
        const n2 = (0, h.sY)(s3 + 7);
        let o2 = n2;
        return f.w8((o2 += 1, o2 - 1), 0), f.w8((o2 += 1, o2 - 1), 0), f.w8((o2 += 1, o2 - 1), 0), f.w8((o2 += 1, o2 - 1), 1), f.w8((o2 += 1, o2 - 1), 70), f.w8((o2 += 1, o2 - 1), 1), f.w8((o2 += 1, o2 - 1), 80), e5.length && (d2.nW(e5, 0, (0, c.s3)(o2, a4[0])), o2 += a4[0]), t5.length && (d2.nW(t5, 0, (0, c.s3)(o2, a4[1])), o2 += a4[1]), i4.length && (d2.nW(i4, 0, (0, c.s3)(o2, a4[2])), o2 += a4[2]), r4.length && d2.nW(r4, 2, (0, c.s3)(o2, a4[3])), { bufferPointer: n2, length: s3 + 7 };
      })(e4, t4, r3, a3);
    }
  }
  function k(e3, t3) {
    let i3;
    if (!t3 && e3.sideData[1] && (t3 = e3.sideData[1]), t3 && d2.Bs(t3)) a2.__(d2.py(t3), (e4) => {
      if (33 == (e4[0] >>> 1 & 63)) return i3 = e4, false;
    });
    else if (t3 && t3.length >= 6) {
      e3.metadata.naluLengthSizeMinusOne = 3 & t3[21];
      const { spss: r3 } = (function(e4) {
        const t4 = new n.A(e4, true);
        t4.skip(22);
        let i4 = [], r4 = [], a3 = [];
        const s3 = t4.readUint8();
        for (let e5 = 0; e5 < s3; e5++) {
          const e6 = 63 & t4.readUint8(), s4 = t4.readUint16(), n2 = [];
          for (let e7 = 0; e7 < s4; e7++) {
            const e8 = t4.readUint16();
            n2.push(t4.readBuffer(e8));
          }
          32 === e6 ? i4 = n2 : 33 === e6 ? r4 = n2 : 34 === e6 && (a3 = n2);
        }
        return { vpss: i4, spss: r4, ppss: a3 };
      })(t3);
      r3.length && (i3 = r3[0]);
    }
    if (i3) {
      const { profile: t4, level: r3, width: a3, height: s3, video_delay: n2, chroma_format_idc: o2, bit_depth_luma_minus8: c2 } = I(i3);
      switch (e3.codecpar.profile = t4, e3.codecpar.level = r3, e3.codecpar.width = a3, e3.codecpar.height = s3, e3.codecpar.videoDelay = n2, c2) {
        case 0:
          e3.codecpar.format = 3 === o2 ? 5 : 2 === o2 ? 4 : 0;
          break;
        case 2:
          e3.codecpar.format = 3 === o2 ? 68 : 2 === o2 ? 64 : 62;
      }
    }
  }
  function x(e3, t3 = 4) {
    if (64 & r2.f[15](e3 + 36)) return d2.py((0, c.s3)(r2.f[20](e3 + 24), r2.f[15](e3 + 28))).some((e4) => {
      const t4 = e4[0] >>> 1 & 63;
      return 20 === t4 || 19 === t4;
    });
    {
      const i3 = r2.f[15](e3 + 28);
      let a3 = 0;
      for (; a3 < i3 - t3; ) {
        const i4 = u.r8(r2.f[20](e3 + 24) + (a3 + t3)) >>> 1 & 63;
        if (20 === i4 || 19 === i4) return true;
        a3 += 4 === t3 ? u.Sg(r2.f[20](e3 + 24) + a3) : 3 === t3 ? u.ht(r2.f[20](e3 + 24) + a3) : 2 === t3 ? u.yd(r2.f[20](e3 + 24) + a3) : u.r8(r2.f[20](e3 + 24) + a3), a3 += t3;
      }
      return false;
    }
  }
  function I(e3) {
    if (!e3 || e3.length < 3) return;
    let t3 = 0;
    0 === e3[0] && 0 === e3[1] && 0 === e3[2] && 1 === e3[3] && (t3 = 4);
    let i3 = 0, r3 = 0, a3 = 0, s3 = 0, n2 = 0, c2 = 0, h2 = 1, u2 = 0, f2 = 0, m2 = 0, g2 = 0;
    const v2 = d2.BN(e3.subarray(t3)), A2 = new o.A(v2.length);
    A2.appendBuffer(v2), A2.readU1(), A2.readU(6), A2.readU(6), A2.readU(3), A2.readU(4);
    const y2 = A2.readU(3);
    A2.readU1();
    let w2 = 0;
    if (y2 <= 6) {
      u2 = A2.readU(2), f2 = A2.readU1(), i3 = A2.readU(5), m2 = A2.readU(32), g2 = A2.readU(48), r3 = A2.readU(8);
      const e4 = new Array(6), t4 = new Array(6);
      for (let i4 = 0; i4 < y2; i4++) e4[i4] = A2.readU1(), t4[i4] = A2.readU1();
      if (y2 > 0) for (let e5 = y2; e5 < 8; e5++) A2.readU(2);
      for (let i4 = 0; i4 < y2; i4++) e4[i4] && (A2.readU(2), A2.readU(1), A2.readU(5), A2.readU(32), A2.readU(1), A2.readU(1), A2.readU(1), A2.readU(1), A2.readU(44)), t4[i4] && A2.readU(8);
      l.xb(A2), h2 = l.xb(A2), 3 === h2 && (w2 = A2.readU(1)), a3 = l.xb(A2), s3 = l.xb(A2);
      let o2 = 0, d3 = 0, p2 = 0, v3 = 0;
      A2.readU1() && (o2 = l.xb(A2), d3 = l.xb(A2), p2 = l.xb(A2), v3 = l.xb(A2)), n2 = l.xb(A2), c2 = l.xb(A2);
      let b3 = 2, k3 = 2;
      0 === h2 ? b3 = k3 = 0 : 2 === h2 ? (b3 = 2, k3 = 1) : 3 === h2 && (b3 = k3 = 1), a3 -= b3 * (1 << n2 + 1) * (o2 + d3), s3 -= k3 * (1 << n2 + 1) * (p2 + v3);
    }
    const b2 = l.xb(A2) + 4;
    let k2 = 0;
    for (let e4 = A2.readU1() ? 0 : y2; e4 < y2 + 1; e4++) l.xb(A2), k2 = Math.max(k2, Math.min(l.xb(A2), p)), l.xb(A2);
    const x2 = l.xb(A2) + 3, I2 = l.xb(A2), P2 = l.xb(A2) + 2, S = l.xb(A2), T = x2 + I2, M = x2 - 1, B = a3 + (1 << T) - 1 >> T, R = s3 + (1 << T) - 1 >> T;
    return { profile: i3, level: r3, width: a3, height: s3, chroma_format_idc: h2, bit_depth_luma_minus8: n2, bit_depth_chroma_minus8: c2, general_profile_space: u2, general_tier_flag: f2, general_profile_compatibility_flags: m2, constraint_flags: g2, separate_colour_plane_flag: w2, log2_min_cb_size: x2, log2_diff_max_min_coding_block_size: I2, log2_min_tb_size: P2, log2_diff_max_min_transform_block_size: S, log2_max_trafo_size: S + P2, log2_ctb_size: T, log2_min_pu_size: M, ctb_width: B, ctb_height: R, ctb_size: B * R, min_cb_width: a3 >> x2, min_cb_height: s3 >> x2, min_tb_width: a3 >> P2, min_tb_height: s3 >> P2, min_pu_width: a3 >> M, min_pu_height: s3 >> M, log2_max_poc_lsb: b2, video_delay: k2 };
  }
  function P(e3) {
    if (!e3 || e3.length < 3) return;
    let t3 = 0;
    0 === e3[0] && 0 === e3[1] && 0 === e3[2] && 1 === e3[3] && (t3 = 4);
    const i3 = d2.BN(e3.subarray(t3)), r3 = new o.A(i3.length);
    return r3.appendBuffer(i3), { pps_pic_parameter_set_id: l.xb(r3), pps_seq_parameter_set_id: l.xb(r3), dependent_slice_segment_flag: r3.readU1(), output_flag_present_flag: r3.readU1(), num_extra_slice_header_bits: r3.readU(3) };
  }
}, 64093: (e2, t2, i2) => {
  i2.d(t2, { Au: () => A, He: () => y, XC: () => w, Y2: () => m, hG: () => g, oz: () => v });
  var r2 = i2(77231);
  const a2 = [44100, 48e3, 32e3, 0], s2 = [22050, 24e3, 16e3, 0], n = [11025, 12e3, 8e3, 0], o = [0, 1152, 1152, 384], c = [0, 576, 1152, 384], d2 = [0, 576, 1152, 384], h = [0, 32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, -1], l = [0, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, -1], u = [0, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, -1], f = [0, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, -1], p = [0, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160, -1];
  function m(e3, t3) {
    switch (e3) {
      case 0:
        return n[t3];
      case 2:
        return s2[t3];
      case 3:
        return a2[t3];
    }
    return r2.N_;
  }
  function g(e3, t3) {
    switch (e3) {
      case 0:
        return d2[t3];
      case 2:
        return c[t3];
      case 3:
        return o[t3];
    }
    return r2.N_;
  }
  function v(e3, t3, i3) {
    switch (t3) {
      case 1:
        switch (e3) {
          case 0:
          case 2:
            return p[i3];
          case 3:
            return u[i3];
        }
        break;
      case 2:
        switch (e3) {
          case 0:
          case 2:
            return p[i3];
          case 3:
            return l[i3];
        }
      case 3:
        switch (e3) {
          case 0:
          case 2:
            return f[i3];
          case 3:
            return h[i3];
        }
    }
    return r2.N_;
  }
  function A(e3) {
    switch (e3) {
      case 1:
        return 34;
      case 2:
        return 33;
      case 3:
        return 32;
    }
    return r2.N_;
  }
  const y = { 32: "Layer1", 33: "Layer2", 34: "Layer3" };
  function w(e3, t3) {
    if (t3 && t3.length >= 4) {
      const i3 = t3[1] >>> 3 & 3, r3 = (6 & t3[1]) >> 1, a3 = (12 & t3[2]) >>> 2, s3 = 3 & ~(t3[3] >>> 6) ? 2 : 1, n2 = A(r3), o2 = m(i3, a3);
      e3.codecpar.profile = n2, e3.codecpar.sampleRate = o2, e3.codecpar.chLayout.nbChannels = s3;
    }
  }
}, 78887: (e2, t2, i2) => {
  i2.d(t2, { K: () => a2 });
  var r2 = i2(71517);
  function a2(e3) {
    const t3 = (0, r2.iI)(e3);
    for (let e4 = 0; e4 < t3.length - 6; e4++) if (0 === t3[e4] && 0 === t3[e4 + 1] && 1 === t3[e4 + 2] && 0 === t3[e4 + 3]) return 1 == (t3[e4 + 5] >> 3 & 7);
    return false;
  }
}, 22576: (e2, t2, i2) => {
  i2.d(t2, { Ij: () => d2, XC: () => c, kt: () => o });
  var r2 = i2(31865), a2 = i2(729), s2 = i2(44328);
  const n = [480, 960, 1920, 2880, 480, 960, 1920, 2880, 480, 960, 1920, 2880, 480, 960, 480, 960, 120, 240, 480, 960, 120, 240, 480, 960, 120, 240, 480, 960, 120, 240, 480, 960];
  function o(e3) {
    let t3 = 0, i3 = 0, r3 = 0;
    if (e3.length < 1) return 0;
    switch (t3 = e3[0], i3 = n[t3 >> 3], 3 & t3) {
      case 0:
        r3 = 1;
        break;
      case 1:
      case 2:
        r3 = 2;
        break;
      case 3:
        if (e3.length < 2) return 0;
        r3 = 63 & e3[1];
    }
    return r3 * i3;
  }
  function c(e3, t3) {
    if (!t3 && e3.sideData[1] && (t3 = e3.sideData[1]), t3 && t3.length >= 19) {
      const i3 = new r2.A(t3, false);
      i3.skip(9), e3.codecpar.chLayout.nbChannels = i3.readUint8(), e3.codecpar.initialPadding = i3.readUint16(), e3.codecpar.sampleRate = i3.readUint32(), e3.codecpar.seekPreroll = Number((0, s2.k)(BigInt(80), { den: 1e3, num: 1 }, { den: 48e3, num: 1 }));
    }
  }
  function d2(e3) {
    const t3 = new Uint8Array(19), i3 = new a2.A(t3, false);
    return i3.writeString("OpusHead"), i3.writeUint8(1), i3.writeUint8(e3.chLayout.nbChannels), i3.writeUint16(e3.initialPadding), i3.writeUint32(e3.sampleRate), t3;
  }
}, 74762: (e2, t2, i2) => {
  i2.d(t2, { q: () => o });
  var r2 = i2(79331), a2 = i2(67672), s2 = i2(72739), n = i2(54825);
  function o(e3) {
    const t3 = (0, r2.A)(e3, { aloneValueName: "context" });
    if (!t3.tt) return { queue: [], head: {} };
    const i3 = [];
    function o2(e4) {
      let t4 = "";
      return s2.__(e4, (e5) => {
        a2.Yj(e5) ? t4 += e5 : e5.context ? t4 += "<".concat(e5.tagName, ">").concat(e5.context, "</").concat(e5.tagName, ">") : t4 += "<".concat(e5.tagName, "/>");
      }), t4;
    }
    function c(e4, t4, r3) {
      let c2 = (0, n.j)(t4 || e4.begin), d3 = e4.context || "", h = e4.region || "Default", l = "";
      a2.YO(d3) && (d3 = o2(d3)), a2.YO(e4.span) ? s2.__(e4.span, (e5) => {
        e5.context && (c2 === -BigInt(1) && e5.begin && (c2 = (0, n.j)(e5.begin)), a2.Yj(e5.context) ? (d3 += e5.context, e5.br && (d3 += "<br>")) : (d3 += o2(e5.context), e5.br && (d3 += "<br>"))), e5.end && (l = e5.end);
      }) : e4.span && (e4.span.context && (c2 === -BigInt(1) && e4.span.begin && (c2 = (0, n.j)(e4.span.begin)), a2.Yj(e4.span.context) ? d3 += e4.span.context : d3 += o2(e4.span.context)), e4.span.end && (l = e4.span.end)), i3.push({ context: d3, pts: c2, region: h, duration: e4.dur ? (0, n.j)(e4.dur) : (0, n.j)(r3 || e4.end || l) - c2 });
    }
    function d2(e4, t4, i4) {
      a2.YO(e4) ? s2.__(e4, (e5) => {
        c(e5, t4, i4);
      }) : c(e4, t4, i4);
    }
    return t3.tt.body && t3.tt.body.div && (a2.YO(t3.tt.body.div) ? s2.__(t3.tt.body.div, (e4) => {
      e4.p && d2(e4.p, e4.begin, e4.end);
    }) : t3.tt.body.div.p && d2(t3.tt.body.div.p, t3.tt.body.div.begin, t3.tt.body.end)), { queue: i3, head: t3.tt.head || {} };
  }
}, 97077: (e2, t2, i2) => {
  i2.d(t2, { Ui: () => s2, XC: () => a2 });
  var r2 = i2(37246);
  function a2(e3, t3) {
    if (!t3 && e3.sideData[1] && (t3 = e3.sideData[1]), t3 && t3.length >= 6) {
      const i3 = s2(t3);
      e3.codecpar.profile = i3.profile, e3.codecpar.level = i3.level;
    }
  }
  function s2(e3) {
    const t3 = new r2.A(e3.length);
    return t3.appendBuffer(e3.subarray(4)), { profile: t3.readU(8), level: t3.readU(8), bitDepth: t3.readU(4), chromaSubsampling: t3.readU(3), fullRangeFlag: t3.readU1(), colorPrimaries: t3.readU(8), colorTrc: t3.readU(8), colorSpace: t3.readU(8) };
  }
}, 82014: (e2, t2, i2) => {
  i2.d(t2, { Ui: () => n, XC: () => s2, wN: () => a2 }), i2(9599);
  var r2 = i2(37246);
  i2(77231), i2(97317), i2(44328), i2(729);
  const a2 = { 0: "Profile0", 1: "Profile1", 2: "Profile2", 3: "Profile3" };
  function s2(e3, t3) {
    if (!t3 && e3.sideData[1] && (t3 = e3.sideData[1]), t3 && t3.length >= 6) {
      const i3 = n(t3);
      e3.codecpar.profile = i3.profile, e3.codecpar.level = i3.level;
    }
  }
  function n(e3) {
    const t3 = new r2.A(e3.length);
    return t3.appendBuffer(e3), { profile: t3.readU(8), level: t3.readU(8), bitDepth: t3.readU(4), chromaSubsampling: t3.readU(3), fullRangeFlag: t3.readU1(), colorPrimaries: t3.readU(8), colorTrc: t3.readU(8), colorSpace: t3.readU(8) };
  }
}, 59166: (e2, t2, i2) => {
  i2.d(t2, { KD: () => x, S1: () => A, Ui: () => P, XC: () => k, kM: () => b, oT: () => w, sL: () => y, wf: () => I });
  var r2 = i2(63939), a2 = i2(72739), s2 = i2(729), n = i2(31865), o = i2(37246), c = i2(14686), d2 = i2(60264), h = i2(37837), l = i2(23991), u = i2(83314), f = i2(39381), p = i2(82774);
  const m = 3;
  function g(e3) {
    const t3 = e3.readU(9), i3 = e3.readU(3), r3 = e3.readU(2), a3 = e3.readU(2), s3 = e3.readU(3);
    e3.readU(5), e3.readU(2);
    const n2 = e3.readU(6), o2 = e3.readU(7), c2 = e3.readU(1), d3 = e3.readU(8), h2 = e3.readU(1), l2 = e3.readU(1), u2 = [], f2 = [];
    if (n2) {
      for (let t4 = 0; t4 < n2 - 1; t4++) u2[t4] = e3.readU(8);
      u2[n2 - 1] = e3.readU(6);
    } else e3.readU(6);
    if (i3 > 1) {
      let t4 = 0;
      for (let r4 = i3 - 2; r4 >= 0; --r4) t4 |= e3.readU(1) << r4;
      for (let t5 = i3; t5 <= 8 && i3 > 1; ++t5) e3.readU(1);
      for (let r4 = i3 - 2; r4 >= 0; --r4) t4 & 1 << r4 && (f2[r4] = e3.readU(8));
    }
    const p2 = e3.readU(8), m2 = [];
    if (p2) for (let t4 = 0; t4 < p2; t4++) m2.push(e3.readU(8));
    return { olsIdx: t3, numSublayers: i3, bitDepthMinus8: s3, chromaFormatIdc: a3, constantFrameRate: r3, generalProfileIdc: o2, generalTierFlag: c2, generalLevelIdc: d3, ptlFrameOnlyConstraintFlag: h2, ptlMultilayerEnabledFlag: l2, generalConstraintInfo: u2, sublayerLevelIdc: f2, generalSubProfileIdc: m2, maxPictureWidth: e3.readU(16), maxPictureHeight: e3.readU(16), avgFramerate: e3.readU(16) };
  }
  function v(e3, t3, i3) {
    const r3 = t3[0];
    let n2;
    if (r3) {
      const e4 = I(r3);
      let t4 = e4.generalConstraintInfo;
      t4.length || (t4 = new Array(12).fill(0));
      const i4 = new u.A();
      if (i4.writeU(9, 0), i4.writeU(3, e4.spsMaxSublayersMinus1 + 1), i4.writeU(2, 1), i4.writeU(2, e4.chromaFormatIdc), i4.writeU(3, e4.bitDepthMinus8), i4.writeU(5, 31), i4.writeU(2, 0), i4.writeU(6, t4.length), i4.writeU(7, e4.profile), i4.writeU1(e4.tierFlag), i4.writeU(8, e4.level), i4.writeU1(e4.ptlFrameOnlyConstraintFlag), i4.writeU1(e4.ptlMultilayerEnabledFlag), t4.length) {
        for (let e5 = 0; e5 < t4.length - 1; e5++) i4.writeU(8, t4[e5]);
        i4.writeU(6, t4[t4.length - 1]);
      } else i4.writeU(6, 63);
      if (e4.spsMaxSublayersMinus1 + 1 > 1) {
        let t5 = 0;
        for (let i5 = e4.spsMaxSublayersMinus1 - 1; i5 >= 0; i5--) t5 = t5 << 1 | e4.ptlSublayerLevelPresentFlag[i5];
        i4.writeU(e4.spsMaxSublayersMinus1, t5);
        for (let t6 = e4.spsMaxSublayersMinus1 + 1; t6 <= 8 && e4.spsMaxSublayersMinus1 > 0; ++t6) i4.writeU1(0);
        for (let t6 = e4.spsMaxSublayersMinus1 - 1; t6 >= 0; t6--) e4.ptlSublayerLevelPresentFlag[t6] && i4.writeU(8, e4.sublayerLevelIdc[t6]);
      }
      i4.writeU(8, e4.generalSubProfileIdc.length);
      for (let t5 = 0; t5 < e4.generalSubProfileIdc.length; t5++) i4.writeU(8, e4.sublayerLevelIdc[t5]);
      i4.writeU(16, e4.width), i4.writeU(16, e4.height), i4.writeU(16, 0), i4.padding(), n2 = i4.getBuffer().subarray(0, i4.getPointer());
    }
    let o2 = 2 + (n2 ? n2.length : 0);
    e3.length && (o2 += 3, o2 = e3.reduce((e4, t4) => e4 + 2 + t4.length, o2)), t3.length && (o2 += 3, o2 = t3.reduce((e4, t4) => e4 + 2 + t4.length, o2)), i3.length && (o2 += 3, o2 = i3.reduce((e4, t4) => e4 + 2 + t4.length, o2));
    const c2 = new Uint8Array(o2), d3 = new s2.A(c2, true);
    d3.writeUint8(m << 1 | (n2 ? 1 : 0) | 248), n2 && d3.writeBuffer(n2);
    let h2 = 0;
    return e3.length && h2++, t3.length && h2++, i3.length && h2++, d3.writeUint8(h2), e3.length && (d3.writeUint8(142), d3.writeUint16(e3.length), a2.__(e3, (e4) => {
      d3.writeUint16(e4.length), d3.writeBuffer(e4);
    })), t3.length && (d3.writeUint8(143), d3.writeUint16(t3.length), a2.__(t3, (e4) => {
      d3.writeUint16(e4.length), d3.writeBuffer(e4);
    })), i3.length && (d3.writeUint8(144), d3.writeUint16(i3.length), a2.__(i3, (e4) => {
      d3.writeUint16(e4.length), d3.writeBuffer(e4);
    })), c2;
  }
  function A(e3) {
    let t3 = d2.py(e3);
    if (t3.length >= 2) {
      const e4 = [], i3 = [], r3 = [];
      if (t3.forEach((t4) => {
        const a3 = t4[1] >>> 3 & 31;
        14 === a3 ? e4.push(t4) : 15 === a3 ? i3.push(t4) : 16 === a3 && r3.push(t4);
      }), i3.length && r3.length) return v(e4, i3, r3);
    }
  }
  function y(e3) {
    let t3 = d2.py(e3);
    if (t3.length >= 2) {
      const e4 = [], i3 = [], r3 = [];
      if (t3.forEach((t4) => {
        const a3 = t4[1] >>> 3 & 31;
        14 === a3 ? e4.push(t4) : 15 === a3 ? i3.push(t4) : 16 === a3 && r3.push(t4);
      }), i3.length && r3.length) {
        const t4 = [i3[0], r3[0]];
        return e4.length && t4.unshift(e4[0]), d2.nW(t4, 0);
      }
    }
  }
  function w(e3, t3 = false) {
    let i3, r3 = false, a3 = d2.py(e3);
    if (a3.length) {
      const e4 = [], s4 = [], n3 = [];
      a3.forEach((t4) => {
        const i4 = t4[1] >>> 3 & 31;
        14 === i4 ? e4.push(t4) : 15 === i4 ? s4.push(t4) : 16 === i4 && n3.push(t4), 8 !== i4 && 7 !== i4 && 9 !== i4 && 10 !== i4 || (r3 = true);
      }), s4.length && n3.length ? (i3 = v(e4, s4, n3), a3 = a3.filter((e5) => {
        const i4 = e5[1] >>> 3 & 31;
        return (t3 || 14 !== i4 && 15 !== i4 && 16 !== i4) && 20 !== i4;
      })) : a3 = a3.filter((e5) => 20 != (e5[1] >>> 3 & 31));
    }
    const s3 = a3.reduce((e4, t4) => e4 + m + 1 + t4.length, 0), n2 = (0, h.sY)(s3), o2 = (0, c.s3)(n2, s3);
    return d2.S9(a3, m, o2), { bufferPointer: n2, length: s3, extradata: i3, key: r3 };
  }
  function b(e3, t3) {
    let i3 = d2.py(e3).concat(d2.py(t3));
    if (i3.length) {
      let e4 = [], t4 = [], r3 = [], a3 = [];
      return i3.forEach((i4) => {
        const s3 = i4[1] >>> 3 & 31;
        14 === s3 ? e4.push(i4) : 15 === s3 ? t4.push(i4) : 16 === s3 ? r3.push(i4) : 20 !== s3 && a3.push(i4);
      }), (function(e5, t5, i4, r4, a4) {
        const s3 = [d2.Le(e5, 0), d2.Le(t5, 0), d2.Le(i4, 0), d2.Le(r4, 2)];
        let n2 = s3.reduce((e6, t6) => e6 + t6, 0);
        const o2 = (0, h.sY)(n2 + 7);
        let l2 = o2;
        return p.w8((l2 += 1, l2 - 1), 0), p.w8((l2 += 1, l2 - 1), 0), p.w8((l2 += 1, l2 - 1), 0), p.w8((l2 += 1, l2 - 1), 1), p.w8((l2 += 1, l2 - 1), 0), p.w8((l2 += 1, l2 - 1), 161), p.w8((l2 += 1, l2 - 1), 1 << 7 | 40), e5.length && (d2.nW(e5, 0, (0, c.s3)(l2, s3[0])), l2 += s3[0]), t5.length && (d2.nW(t5, 0, (0, c.s3)(l2, s3[1])), l2 += s3[1]), i4.length && (d2.nW(i4, 0, (0, c.s3)(l2, s3[2])), l2 += s3[2]), r4.length && d2.nW(r4, 2, (0, c.s3)(l2, s3[3])), { bufferPointer: o2, length: n2 + 7 };
      })(e4, t4, r3, a3);
    }
  }
  function k(e3, t3) {
    let i3;
    if (!t3 && e3.sideData[1] && (t3 = e3.sideData[1]), t3 && d2.Bs(t3)) a2.__(d2.py(t3), (e4) => {
      if (15 == (e4[1] >>> 3 & 31)) return i3 = e4, false;
    });
    else if (t3 && t3.length >= 6) {
      e3.metadata.naluLengthSizeMinusOne = t3[0] >>> 1 & 3;
      const { spss: r3 } = (function(e4) {
        const t4 = new n.A(e4, true);
        if (1 & t4.readUint8()) {
          const i5 = new o.A();
          i5.appendBuffer(e4.subarray(1)), g(i5), t4.skip(i5.getPointer());
        }
        let i4 = [], r4 = [], a3 = [];
        const s3 = t4.readUint8();
        for (let e5 = 0; e5 < s3; e5++) {
          const e6 = 31 & t4.readUint8();
          let s4 = 1;
          13 !== e6 && 12 !== e6 && (s4 = t4.readUint16());
          const n2 = [];
          for (let e7 = 0; e7 < s4; e7++) {
            const e8 = t4.readUint16();
            n2.push(t4.readBuffer(e8));
          }
          14 === e6 ? i4 = n2 : 15 === e6 ? r4 = n2 : 16 === e6 && (a3 = n2);
        }
        return { vpss: i4, spss: r4, ppss: a3 };
      })(t3);
      r3.length && (i3 = r3[0]);
    }
    i3 && (function(e4, t4) {
      const { profile: i4, level: r3, width: a3, height: s3, videoDelay: n2, chromaFormatIdc: o2, bitDepthMinus8: c2 } = I(t4);
      switch (e4.codecpar.profile = i4, e4.codecpar.level = r3, e4.codecpar.width = a3, e4.codecpar.height = s3, e4.codecpar.videoDelay = n2, c2) {
        case 0:
          e4.codecpar.format = 3 === o2 ? 5 : 2 === o2 ? 4 : 0;
          break;
        case 2:
          e4.codecpar.format = 3 === o2 ? 68 : 2 === o2 ? 64 : 62;
      }
    })(e3, i3);
  }
  function x(e3, t3 = 4) {
    if (64 & r2.f[15](e3 + 36)) return d2.py((0, c.s3)(r2.f[20](e3 + 24), r2.f[15](e3 + 28))).some((e4) => {
      const t4 = e4[1] >>> 3 & 31;
      return 8 === t4 || 7 === t4;
    });
    {
      const i3 = r2.f[15](e3 + 28);
      let a3 = 0;
      for (; a3 < i3 - t3; ) {
        const i4 = f.r8(r2.f[20](e3 + 24) + (a3 + t3 + 1)) >>> 3 & 31;
        if (8 === i4 || 7 === i4) return true;
        a3 += 4 === t3 ? f.Sg(r2.f[20](e3 + 24) + a3) : 3 === t3 ? f.ht(r2.f[20](e3 + 24) + a3) : 2 === t3 ? f.yd(r2.f[20](e3 + 24) + a3) : f.r8(r2.f[20](e3 + 24) + a3), a3 += t3;
      }
      return false;
    }
  }
  function I(e3) {
    if (!e3 || e3.length < 3) return;
    let t3 = 0;
    0 === e3[0] && 0 === e3[1] && 0 === e3[2] && 1 === e3[3] && (t3 = 4);
    let i3 = 0, r3 = 0, a3 = 0, s3 = 0, n2 = 0, c2 = 1, h2 = 0, u2 = 0, f2 = 0;
    const p2 = [], m2 = [], g2 = [], v2 = [], A2 = d2.BN(e3.subarray(t3)), y2 = new o.A(A2.length);
    y2.appendBuffer(A2), y2.readU1(), y2.readU1(), y2.readU(6), y2.readU(5), y2.readU(3), y2.readU(8);
    const w2 = y2.readU(3);
    c2 = y2.readU(2);
    const b2 = y2.readU(2);
    if (y2.readU(1)) {
      if (i3 = y2.readU(7), h2 = y2.readU(1), r3 = y2.readU(8), u2 = y2.readU(1), f2 = y2.readU(1), y2.readU(1)) {
        for (let e6 = 0; e6 < 8; e6++) p2[e6] = y2.readU(8);
        p2[8] = y2.readU(7);
        const e5 = y2.readU(8);
        y2.readU(e5);
      }
      y2.skipPadding();
      for (let e5 = w2 - 1; e5 >= 0; e5--) m2[e5] = y2.readU(1);
      y2.skipPadding();
      for (let e5 = w2 - 1; e5 >= 0; e5--) m2[e5] && (g2[e5] = y2.readU(8));
      const e4 = y2.readU(8);
      if (e4) for (let t4 = 0; t4 < e4; t4++) v2[t4] = y2.readU(32);
    }
    y2.readU1(), y2.readU1() && y2.readU1();
    const k2 = a3 = l.xb(y2), x2 = s3 = l.xb(y2);
    if (y2.readU1() && (l.xb(y2), l.xb(y2), l.xb(y2), l.xb(y2)), y2.readU1()) {
      const e4 = l.xb(y2), t4 = b2 + 5, i4 = 1 << t4, r4 = k2 / (1 << t4), a4 = x2 / (1 << t4), s4 = Math.ceil(Math.log2(r4)), n3 = Math.ceil(Math.log2(a4));
      let o2 = 0, c3 = 0, d3 = 0;
      e4 > 0 && (d3 = y2.readU1(), c3 = y2.readU1());
      for (let t5 = 0; e4 > 0 && t5 <= e4; t5++) c3 && 0 != t5 || (t5 > 0 && k2 > i4 && y2.readU(s4), t5 > 0 && x2 > i4 && y2.readU(n3), t5 < e4 && k2 > i4 && y2.readU(s4), t5 < e4 && x2 > i4 && y2.readU(n3)), d3 || y2.readU(2);
      if (o2 = l.xb(y2) + 1, y2.readU(1) && y2.readU(1)) for (let t5 = 0; t5 <= e4; t5++) y2.readU(o2);
    }
    n2 = l.xb(y2), y2.readU(1), y2.readU(1);
    const I2 = y2.readU(4), P2 = y2.readU(1);
    let S = 0;
    P2 && (S = l.xb(y2));
    const T = [], M = y2.readU(2);
    for (let e4 = 0; e4 < 8 * M; e4++) T[e4] = y2.readU(1);
    return { profile: i3, level: r3, width: a3, height: s3, videoDelay: w2 + 1 > 2 ? 2 : w2, chromaFormatIdc: c2, bitDepthMinus8: n2, generalProfileSpace: 0, tierFlag: h2, generalConstraintInfo: p2, generalSubProfileIdc: v2, ptlFrameOnlyConstraintFlag: u2, ptlMultilayerEnabledFlag: f2, spsMaxSublayersMinus1: w2, ptlSublayerLevelPresentFlag: m2, sublayerLevelIdc: g2, sps_log2_max_pic_order_cnt_lsb_minus4: I2, sps_poc_msb_cycle_flag: P2, sps_poc_msb_cycle_len_minus1: S, sps_num_extra_ph_bytes: M, sps_extra_ph_bit_present_flag: T };
  }
  function P(e3) {
    d2.Bs(e3) && (e3 = A(e3));
    const t3 = new o.A();
    return t3.appendBuffer(e3), 1 & t3.readU(8) ? g(t3) : {};
  }
}, 77231: (e2, t2, i2) => {
  i2.d(t2, { Dh: () => a2, FQ: () => u, H3: () => c, KR: () => h, N_: () => s2, SF: () => n, WT: () => d2, f7: () => g, go: () => f, i0: () => l, qs: () => o, vh: () => p, zg: () => m });
  var r2 = i2(9599);
  const a2 = -BigInt(1), s2 = -1, n = 1e6, o = 1e3, c = 1e9, d2 = BigInt(2208988800) * BigInt(1e6), h = new r2.P({ den: n, num: 1 }), l = new r2.P({ den: o, num: 1 }), u = new r2.P({ den: c, num: 1 }), f = (new r2.P({ den: 1, num: 1 }), 2147483647), p = BigInt(9223372036854776e3), m = 65535, g = 4294967295;
  BigInt(18446744073709552e3);
}, 9705: (e2, t2, i2) => {
  i2.d(t2, { E$: () => r2, LR: () => a2, LT: () => d2, NU: () => l, OY: () => c, UY: () => s2, gR: () => n, lh: () => o, nr: () => u, r8: () => h });
  const r2 = -1, a2 = -2, s2 = -3, n = -4, o = -5, c = -6, d2 = -7, h = -8, l = -9, u = -10;
}, 49032: (e2, t2, i2) => {
  async function r2(e3, t3 = -1) {
    let i3 = await e3.peekString(8);
    if (/^FLV/.test(i3)) return 0;
    if (/^DKIF/.test(i3)) return 5;
    if (/^ftyp/.test(i3.slice(4, 8))) return 1;
    if (/^OggS/.test(i3)) return 4;
    if (/^ID3/.test(i3)) return 14;
    if (/^fLaC/.test(i3)) return 17;
    if (/^RIFF/.test(i3)) {
      const t4 = (await e3.peekString(12)).slice(8);
      if (/^WAVE/.test(t4)) return 16;
      if (/^AVI/.test(t4)) return 10;
    } else {
      if (/^ADIF/.test(i3)) return 15;
      if (440786851 === await e3.peekUint32()) return 8;
      if (/^WEBVTT/.test(i3)) return 18;
      if (/^LIMA/.test(i3)) return await e3.skip(4), await e3.readUint16();
      {
        const t4 = await e3.peekBuffer(2);
        switch (t4[0]) {
          case 86:
            if (!(224 & ~t4[1])) return 15;
            break;
          case 255:
            if (240 == (246 & t4[1])) return 15;
            if ([242, 244, 246, 250, 252].includes(254 & t4[1])) return 14;
        }
      }
    }
    return t3;
  }
  i2.d(t2, { A: () => r2 });
}, 364: (e2, t2, i2) => {
  i2.d(t2, { A: () => h });
  var r2 = i2(62751), a2 = i2(92647), s2 = i2(95335), n = i2(50011), o = i2(8507), c = i2(72739);
  const d2 = ["php", "asp", "aspx", "jsp", "do", "pl"];
  async function h(e3, t3 = "", i3 = {}) {
    let h2, l = "", u = { url: e3 };
    if (/^rtsp/.test(e3) || /^rtmp/.test(e3)) {
      /^rtsp/.test(e3) ? l = "rtsp" : /^rtmp/.test(e3) && (l = "rtmp"), h2 = 2;
      const t4 = o.qg(e3).protocol.split("+")[1] || "wss";
      "wss" === t4 || "ws" === t4 ? h2 = 2 : "webtransport" === t4 && (h2 = 3), u.url = u.url.replace(/^\S+:\/\//, t4 + "://"), "rtmp" === l && (u.subProtocol = h2, h2 = 6);
    } else {
      var f;
      const u2 = o.qg(e3).protocol;
      l = t3 || o.qg(e3).file.split(".").pop(), l && !c.zy(d2, l) || !/^https?/.test(u2) || (l = await (async function(e4, t4 = {}) {
        const i4 = { method: "GET", headers: {}, mode: "cors", cache: "default", referrerPolicy: "no-referrer-when-downgrade" };
        let r3;
        t4.headers && s2.__(t4.headers, (e5, t5) => {
          i4.headers[t5] = e5;
        }), t4.credentials && (i4.credentials = t4.credentials), t4.referrerPolicy && (i4.referrerPolicy = t4.referrerPolicy), "function" == typeof AbortController && (r3 = new AbortController(), i4.signal = r3.signal);
        const o2 = await fetch(e4, i4);
        if (o2.ok && o2.status >= 200 && o2.status <= 299) {
          const e5 = o2.body.getReader(), t5 = [];
          let i5 = 0;
          for (; ; ) {
            let r4 = await e5.read();
            if (r4.done) break;
            if (i5 += r4.value.length, t5.push(r4.value), i5 >= 100) break;
          }
          if (r3 && r3.abort(), t5.length) {
            const e6 = t5.length > 1 ? (0, a2.A)(Uint8Array, t5) : t5[0];
            if (e6.length) {
              const t6 = n.decode(e6.subarray(0, 100));
              if (/<\?xml/.test(t6)) {
                if (t6.indexOf("<MPD") > -1) return "mpd";
              } else if (/#EXTM3U/.test(t6)) return "m3u8";
            }
          }
        }
        return "";
      })(e3, i3));
      let p = 0;
      "wss" === u2 || "ws" === u2 ? p = 2 : "webtransport" === u2 && (p = 3), h2 = null !== (f = r2.$$[l]) && void 0 !== f ? f : p;
    }
    return { type: h2, ext: l, info: u };
  }
}, 36204: (e2, t2, i2) => {
  i2.d(t2, { t: () => d2 });
  var r2 = i2(63939), a2 = i2(50932), s2 = i2(56024), n = i2(66788), o = i2(14686), c = i2(77231);
  function d2(e3, t3 = 0) {
    0 === t3 && (t3 = (0, s2.FP)()), a2.M[15](t3 + 152, e3.sampleRate), a2.M[15](t3 + 76, e3.numberOfFrames), a2.M[15](t3 + 292, e3.numberOfChannels), a2.M[15](t3 + 80, (function(e4) {
      switch (e4) {
        case "u8":
          return 0;
        case "s16":
          return 1;
        case "s32":
          return 2;
        case "f32":
          return 3;
        case "u8-planar":
          return 5;
        case "s16-planar":
          return 6;
        case "s32-planar":
          return 7;
        case "f32-planar":
          return 8;
        default:
          throw new Error("not support");
      }
    })(e3.format)), a2.M[17](t3 + 104, e3.timestamp < 0 ? c.Dh : BigInt(Math.floor(e3.timestamp))), a2.M[17](t3 + 312, BigInt(Math.floor(e3.duration))), a2.M[15](t3 + 124, c.SF), a2.M[15](t3 + 120, 1), (0, s2.rh)(t3);
    const i3 = (0, n.K0)(r2.f[15](t3 + 80)) ? r2.f[15](t3 + 292) : 1;
    for (let a3 = 0; a3 < i3; a3++) e3.copyTo((0, o.s3)(r2.f[20](r2.f[20](t3 + 64) + 4 * a3), r2.f[15](t3 + 32)), { planeIndex: a3 });
    return t3;
  }
}, 89188: (e2, t2, i2) => {
  i2.d(t2, { pt: () => l });
  var r2 = i2(63939), a2 = (i2(9599), i2(97317)), s2 = i2(44328), n = i2(77231), o = i2(11473), c = i2(95335);
  function d2(e3) {
    switch (e3) {
      case 0:
        return "I420";
      case 33:
        return "I420A";
      case 4:
        return "I422";
      case 5:
        return "I444";
      case 28:
        return "BGRA";
      case 26:
        return "RGBA";
      case 23:
        return "NV12";
      default:
        return null;
    }
  }
  function h(e3) {
    const t3 = { fullRange: false, matrix: null, primaries: null, transfer: null };
    switch (r2.f[15](e3 + 220)) {
      case 1:
      default:
        t3.matrix = "bt709";
        break;
      case 6:
        t3.matrix = "smpte170m";
        break;
      case 5:
        t3.matrix = "bt470bg";
        break;
      case 0:
        t3.matrix = "rgb";
    }
    switch (r2.f[15](e3 + 212)) {
      case 1:
      default:
        t3.primaries = "bt709";
        break;
      case 5:
        t3.primaries = "bt470bg";
        break;
      case 6:
        t3.primaries = "smpte170m";
    }
    switch (r2.f[15](e3 + 216)) {
      case 1:
      default:
        t3.transfer = "bt709";
        break;
      case 13:
        t3.transfer = "iec61966-2-1";
        break;
      case 6:
        t3.transfer = "smpte170m";
    }
    return 2 === r2.f[15](e3 + 208) && (t3.fullRange = true), t3;
  }
  function l(e3, t3, i3 = {}) {
    let l2 = r2.f[15](e3 + 72);
    const u = (0, a2.I)(r2.f[15](e3 + 80)), f = [];
    for (let t4 = 0; t4 < u.comp.length; t4++) f.push({ offset: r2.f[20](e3 + 4 * t4), stride: r2.f[15](e3 + 32 + 4 * t4) });
    const p = c.X$({ codedWidth: r2.f[15](e3 + 68), codedHeight: l2, timestamp: Number(t3 || (0, s2.Mr)(r2.f[17](e3 + 104), e3 + 120, n.KR)), format: d2(r2.f[15](e3 + 80)), duration: Number((0, s2.Mr)(r2.f[17](e3 + 312), e3 + 120, n.KR)), layout: f, colorSpace: h(e3), visibleRect: { x: r2.f[25](e3 + 276), y: r2.f[25](e3 + 268), width: r2.f[15](e3 + 68) - (r2.f[25](e3 + 276) + r2.f[25](e3 + 280)), height: r2.f[15](e3 + 72) - (r2.f[25](e3 + 268) + r2.f[25](e3 + 272)) } }, i3);
    return new VideoFrame((0, o.Lv)(), p);
  }
}, 22898: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(63939), a2 = (i2(9599), i2(44328)), s2 = i2(14686), n = i2(77231);
  function o(e3) {
    const t3 = 1 & r2.f[15](e3 + 36);
    return new EncodedAudioChunk({ type: t3 ? "key" : "delta", timestamp: r2.f[17](e3 + 8) === n.Dh ? n.N_ : Number((0, a2.Mr)(r2.f[17](e3 + 8), e3 + 72, n.KR)), data: (0, s2.s3)(r2.f[20](e3 + 24), r2.f[15](e3 + 28)) });
  }
}, 28917: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(63939), a2 = (i2(9599), i2(44328)), s2 = i2(14686), n = i2(77231);
  function o(e3) {
    const t3 = 1 & r2.f[15](e3 + 36);
    return new EncodedVideoChunk({ type: t3 ? "key" : "delta", timestamp: r2.f[17](e3 + 8) === n.Dh ? n.N_ : Number((0, a2.Mr)(r2.f[17](e3 + 8), e3 + 72, n.KR)), data: (0, s2.s3)(r2.f[20](e3 + 24), r2.f[15](e3 + 28)) });
  }
}, 94561: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(26429), a2 = i2(76045), s2 = i2(67672);
  async function n(e3, t3 = false) {
    let i3;
    return s2.Yj(e3) || s2.sv(e3) ? (i3 = await (0, a2.A)({ source: e3 }), r2.USE_THREADS && t3 && (i3.threadModule = await (0, a2.A)({ source: i3.buffer }, { child: true })), delete i3.buffer) : i3 = e3, i3;
  }
}, 79756: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(63939), a2 = i2(62751);
  function s2(e3) {
    const t3 = r2.f[15](e3 + 4);
    let i3 = r2.f[15](e3 + 48), s3 = a2.os[t3];
    return 86018 === t3 && (s3 = "".concat(s3, ".").concat(i3)), s3 || "unknown";
  }
}, 39365: (e2, t2, i2) => {
  i2.d(t2, { C: () => a2 });
  var r2 = i2(86834);
  function a2(e3) {
    return e3 ? !r2.A.chrome || r2.A.checkVersion(r2.A.majorVersion, "94", true) ? "prefer-hardware" : "allow" : !r2.A.chrome || r2.A.checkVersion(r2.A.majorVersion, "94", true) ? "prefer-software" : "deny";
  }
}, 28875: (e2, t2, i2) => {
  i2.d(t2, { A: () => m });
  var r2 = i2(63939), a2 = i2(62751), s2 = i2(21477), n = i2(97077), o = i2(82014), c = i2(59166), d2 = i2(67659), h = i2(20525), l = i2(77231), u = i2(14686), f = i2(90932), p = i2(60264);
  function m(e3, t3) {
    const i3 = r2.f[15](e3 + 4);
    let m2 = r2.f[15](e3 + 48), g = r2.f[15](e3 + 52);
    !t3 && 0 !== r2.f[20](e3 + 12) && r2.f[15](e3 + 16) && (t3 = (0, u.s3)(r2.f[20](e3 + 12), r2.f[15](e3 + 16)));
    let v = a2.os[i3], A = "";
    if (27 === i3) 110 === m2 && (m2 = 100), A = h.GP("%s.%02x00%02x", v, 255 & m2, 255 & g);
    else if (173 === i3) {
      let e4 = 0, i4 = 0, r3 = 0, a3 = 0;
      t3 && (p.Bs(t3) && (t3 = d2.S1(t3)), t3.length > 13 && (e4 = t3[1] >>> 6 & 3, r3 = t3[1] >>> 5 & 1, i4 = t3[2] | t3[3] << 8 | t3[4] << 16 | t3[5] << 24, a3 = 240 & t3[6]));
      const s3 = { 0: "", 1: "A", 2: "B", 3: "C" };
      A = h.GP("%s.%s%d.%x.%s%d.%x", v, s3[e4], m2, i4, 0 === r3 ? "L" : "H", g, a3);
    } else if (196 === i3) {
      var y;
      let e4 = 0;
      if ((null === (y = t3) || void 0 === y ? void 0 : y.length) > 13 && (e4 = 1 & t3[5]), A = h.GP("%s.%d.%s%d", v, m2, 0 === e4 ? "L" : "H", g), t3) {
        p.Bs(t3) && (t3 = c.S1(t3));
        const e5 = c.Ui(t3);
        if (e5.generalConstraintInfo.length) {
          let t4 = e5.generalConstraintInfo.length - 1;
          for (; t4 > 0 && 0 === e5.generalConstraintInfo[t4]; ) t4--;
          const i4 = e5.generalConstraintInfo.slice(0, t4 + 1);
          i4.length && (A += ".C".concat(f.l(new Uint8Array(i4), false)));
        }
        e5.generalSubProfileIdc.length && (A += ".S".concat(e5.generalSubProfileIdc.map((e6) => e6.toString(16)).join("+"))), A += ".O".concat(e5.olsIdx, "+").concat(e5.numSublayers);
      }
    } else if (225 === i3) if (t3) {
      const e4 = s2.Ui(t3);
      A = h.GP("%s.%d.%02d%s.%02d.%d.%d%d%d", v, e4.profile, e4.level, e4.tier ? "H" : "M", e4.bitDepth, e4.monochrome, e4.chromaSubsamplingX, e4.chromaSubsamplingY, e4.chromaSamplePosition);
    } else A = h.GP("%s.%d.%02dM.08", v, m2, g);
    else if (139 === i3) if (t3) {
      const e4 = n.Ui(t3);
      A = h.GP("%s.%02d.%02d.%02d", v, e4.profile, e4.level, e4.bitDepth);
    } else A = m2 !== l.N_ && g !== l.N_ ? h.GP("%s.%02d.%02d.08", v, m2, g) : v;
    else if (167 === i3) if (t3) {
      const e4 = o.Ui(t3);
      A = h.GP("%s.%02d.%02d.%02d.%02d.%02d.%02d.%02d.%02d", v, e4.profile, e4.level, e4.bitDepth, e4.chromaSubsampling, e4.colorPrimaries, e4.colorTrc, e4.colorSpace, e4.fullRangeFlag);
    } else A = m2 !== l.N_ && g !== l.N_ ? h.GP("%s.%02d.%02d.08.00", v, m2, g) : h.GP("%s.%02d.%02d.08.00", v, 0, 40);
    else A = v || "unknown";
    return A;
  }
}, 67603: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(4919);
  let a2 = WebAssembly.validate((0, r2.E_)("AGFzbQEAAAABBgFgAX8BfwISAQNlbnYGbWVtb3J5AgMBgIACAwIBAAcJAQVsb2FkOAAACgoBCAAgAP4SAAAL")), s2 = WebAssembly.validate((0, r2.E_)("AGFzbQEAAAABBQFgAAF7AhIBA2VudgZtZW1vcnkCAwGAgAIDAgEACgoBCABBAP0ABAAL"));
  function n(e3, t3, i3) {
    let r3 = s2 ? "-simd" : a2 ? "-atomic" : "";
    switch (t3) {
      case "decoder":
        if (i3 > 65536 && i3 <= 65572) return "".concat(e3, "/decode/pcm").concat(r3, ".wasm");
        if (i3 >= 69632 && i3 <= 69683) return "".concat(e3, "/decode/adpcm").concat(r3, ".wasm");
        switch (i3) {
          case 2:
            return "".concat(e3, "/decode/mpeg2video").concat(r3, ".wasm");
          case 27:
            return "".concat(e3, "/decode/h264").concat(r3, ".wasm");
          case 30:
            return "".concat(e3, "/decode/theora").concat(r3, ".wasm");
          case 86018:
            return "".concat(e3, "/decode/aac").concat(r3, ".wasm");
          case 86019:
            return "".concat(e3, "/decode/ac3").concat(r3, ".wasm");
          case 86056:
            return "".concat(e3, "/decode/eac3").concat(r3, ".wasm");
          case 86020:
            return "".concat(e3, "/decode/dca").concat(r3, ".wasm");
          case 86017:
            return "".concat(e3, "/decode/mp3").concat(r3, ".wasm");
          case 173:
            return "".concat(e3, "/decode/hevc").concat(r3, ".wasm");
          case 196:
            return "".concat(e3, "/decode/vvc").concat(r3, ".wasm");
          case 12:
            return "".concat(e3, "/decode/mpeg4").concat(r3, ".wasm");
          case 225:
            return "".concat(e3, "/decode/av1").concat(r3, ".wasm");
          case 86051:
            return "".concat(e3, "/decode/speex").concat(r3, ".wasm");
          case 86076:
            return "".concat(e3, "/decode/opus").concat(r3, ".wasm");
          case 86028:
            return "".concat(e3, "/decode/flac").concat(r3, ".wasm");
          case 86021:
            return "".concat(e3, "/decode/vorbis").concat(r3, ".wasm");
          case 139:
            return "".concat(e3, "/decode/vp8").concat(r3, ".wasm");
          case 167:
            return "".concat(e3, "/decode/vp9").concat(r3, ".wasm");
          case 86022:
            return "".concat(e3, "/decode/dvaudio").concat(r3, ".wasm");
          case 24:
            return "".concat(e3, "/decode/dvvideo").concat(r3, ".wasm");
          case 3:
            return "".concat(e3, "/decode/h261").concat(r3, ".wasm");
          case 4:
          case 20:
          case 19:
            return "".concat(e3, "/decode/h263").concat(r3, ".wasm");
          case 14:
          case 15:
          case 16:
          case 5:
          case 6:
          case 68:
          case 69:
            return "".concat(e3, "/decode/msmpeg4").concat(r3, ".wasm");
          case 86036:
          case 86057:
          case 86073:
            return "".concat(e3, "/decode/ra").concat(r3, ".wasm");
          case 86023:
          case 86024:
          case 86052:
          case 86054:
          case 86053:
            return "".concat(e3, "/decode/wma").concat(r3, ".wasm");
          case 17:
          case 18:
          case 71:
            return "".concat(e3, "/decode/wmv").concat(r3, ".wasm");
          case 7:
            return "".concat(e3, "/decode/mjpeg").concat(r3, ".wasm");
          default:
            return null;
        }
      case "encoder":
        if (i3 > 65536 && i3 <= 65572) return "".concat(e3, "/encode/pcm").concat(r3, ".wasm");
        switch (i3) {
          case 27:
            return "".concat(e3, "/encode/x264").concat(r3, ".wasm");
          case 30:
            return "".concat(e3, "/encode/theora").concat(r3, ".wasm");
          case 86018:
            return "".concat(e3, "/encode/aac").concat(r3, ".wasm");
          case 86019:
            return "".concat(e3, "/encode/ac3").concat(r3, ".wasm");
          case 86056:
            return "".concat(e3, "/encode/eac3").concat(r3, ".wasm");
          case 86020:
            return "".concat(e3, "/encode/dca").concat(r3, ".wasm");
          case 86017:
            return "".concat(e3, "/encode/mp3lame").concat(r3, ".wasm");
          case 173:
            return "".concat(e3, "/encode/x265").concat(r3, ".wasm");
          case 12:
            return "".concat(e3, "/encode/mpeg4").concat(r3, ".wasm");
          case 225:
            return "".concat(e3, "/encode/av1").concat(r3, ".wasm");
          case 86051:
            return "".concat(e3, "/encode/speex").concat(r3, ".wasm");
          case 86076:
            return "".concat(e3, "/encode/opus").concat(r3, ".wasm");
          case 86028:
            return "".concat(e3, "/encode/flac").concat(r3, ".wasm");
          case 86021:
            return "".concat(e3, "/encode/vorbis").concat(r3, ".wasm");
          case 139:
            return "".concat(e3, "/encode/vp8").concat(r3, ".wasm");
          case 167:
            return "".concat(e3, "/encode/vp9").concat(r3, ".wasm");
          default:
            return null;
        }
      case "resampler":
        return "".concat(e3, "/resample/resample").concat(r3, ".wasm");
      case "scaler":
        return "".concat(e3, "/scale/scale").concat(r3, ".wasm");
      case "stretchpitcher":
        return "".concat(e3, "/stretchpitch/stretchpitch").concat(r3, ".wasm");
    }
  }
}, 93147: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(63939), a2 = i2(97317);
  function s2(e3) {
    if (0 !== r2.f[15](e3)) return false;
    const t3 = (0, a2.I)(r2.f[15](e3 + 28));
    return t3 && 128 & t3.flags;
  }
}, 24310: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(63939), a2 = i2(97317);
  function s2(e3) {
    if (0 !== r2.f[15](e3)) return false;
    const t3 = (0, a2.I)(r2.f[15](e3 + 28));
    return !(!t3 || t3.comp[0].depth <= 8 || 18 !== r2.f[15](e3 + 92) && 16 !== r2.f[15](e3 + 92));
  }
}, 16041: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(134), a2 = (i2(55833), i2(40046)), s2 = i2(73783), n = i2(37837), o = i2(56024);
  class c {
    constructor(e3, t3) {
      (0, r2.A)(this, "list", void 0), (0, r2.A)(this, "mutex", void 0), this.list = e3, this.mutex = t3;
    }
    alloc() {
      let e3 = this.list.find((e4) => -1 === a2.p_(e4 + 320, -1, 1, 16, 2), 20);
      return e3 || (e3 = (0, n.Gy)(328), (0, o._h)(e3), a2.M_(e3 + 320, 1, 16, 2), s2.s2(this.mutex), this.list.push(e3, 20), s2.Tl(this.mutex)), e3;
    }
    release(e3) {
      a2.Hh(e3 + 320, 16, 2) <= 0 || 1 === a2.jb(e3 + 320, 1, 16, 2) && ((0, o.to)(e3), a2.M_(e3 + 320, -1, 16, 2));
    }
  }
}, 47442: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(134), a2 = (i2(10278), i2(40046)), s2 = i2(73783), n = i2(37837);
  class o {
    constructor(e3, t3) {
      (0, r2.A)(this, "list", void 0), (0, r2.A)(this, "mutex", void 0), this.list = e3, this.mutex = t3;
    }
    alloc() {
      let e3 = this.list.find((e4) => -1 === a2.p_(e4 + 48, -1, 1, 16, 2), 20);
      return e3 || (e3 = (0, n.Gy)(56), a2.M_(e3 + 48, 1, 16, 2), s2.s2(this.mutex), this.list.push(e3, 20), s2.Tl(this.mutex)), e3;
    }
    release(e3) {
      a2.Hh(e3 + 48, 16, 2) <= 0 || 1 === a2.jb(e3 + 48, 1, 16, 2) && a2.M_(e3 + 48, -1, 16, 2);
    }
  }
}, 84290: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(134), a2 = i2(40046), s2 = i2(73783), n = i2(37837), o = (i2(47958), i2(71517));
  class c {
    constructor(e3, t3) {
      (0, r2.A)(this, "list", void 0), (0, r2.A)(this, "mutex", void 0), this.list = e3, this.mutex = t3;
    }
    alloc() {
      let e3 = this.list.find((e4) => -1 === a2.p_(e4 + 88, -1, 1, 16, 2), 20);
      return e3 || (e3 = (0, n.Gy)(96), (0, o.Pd)(e3), a2.M_(e3 + 88, 1, 16, 2), s2.s2(this.mutex), this.list.push(e3, 20), s2.Tl(this.mutex)), e3;
    }
    release(e3) {
      a2.Hh(e3 + 88, 16, 2) <= 0 || 1 === a2.jb(e3 + 88, 1, 16, 2) && ((0, o.Up)(e3), a2.M_(e3 + 88, -1, 16, 2));
    }
  }
}, 97317: (e2, t2, i2) => {
  i2.d(t2, { I: () => s2 });
  var r2 = i2(80662);
  const a2 = new (i2.n(r2)())();
  function s2(e3) {
    if (a2.has(e3)) return a2.get(e3);
    const t3 = _[e3];
    if (!t3) return;
    const i3 = { log2ChromaW: t3[0], log2ChromaH: t3[1], flags: t3[2], comp: t3[3].map((e4) => ({ plane: e4[0], step: e4[1], offset: e4[2], shift: e4[3], depth: e4[4] })) };
    return a2.set(e3, i3), i3;
  }
  const n = [[0, 1, 0, 0, 8], [1, 1, 0, 0, 8], [2, 1, 0, 0, 8]], o = [...n, [3, 1, 0, 0, 8]], c = [[0, 2, 0, 0, 9], [1, 2, 0, 0, 9], [2, 2, 0, 0, 9]], d2 = [...c, [3, 2, 0, 0, 9]], h = [[0, 2, 0, 0, 10], [1, 2, 0, 0, 10], [2, 2, 0, 0, 10]], l = [...h, [3, 2, 0, 0, 10]], u = [[0, 2, 0, 0, 12], [1, 2, 0, 0, 12], [2, 2, 0, 0, 12]], f = [...u, [3, 2, 0, 0, 12]], p = [[0, 2, 0, 0, 14], [1, 2, 0, 0, 14], [2, 2, 0, 0, 14]], m = [[0, 2, 0, 0, 16], [1, 2, 0, 0, 16], [2, 2, 0, 0, 16]], g = [...m, [3, 2, 0, 0, 16]], v = [[0, 1, 0, 0, 8], [1, 2, 0, 0, 8], [1, 2, 1, 0, 8]], A = [[0, 1, 0, 0, 8], [1, 2, 1, 0, 8], [1, 2, 0, 0, 8]], y = [[0, 8, 2, 0, 16], [0, 8, 4, 0, 16], [0, 8, 6, 0, 16], [0, 8, 0, 0, 16]], w = [[0, 2, 0, 6, 10], [1, 4, 0, 6, 10], [1, 4, 2, 6, 10]], b = [[0, 2, 0, 4, 12], [1, 4, 0, 4, 12], [1, 4, 2, 4, 12]], k = [[0, 2, 0, 0, 16], [1, 4, 0, 0, 16], [1, 4, 2, 0, 16]], x = [[0, 8, 0, 0, 16], [0, 8, 2, 0, 16], [0, 8, 4, 0, 16], [0, 8, 6, 0, 16]], I = [[0, 8, 4, 0, 16], [0, 8, 2, 0, 16], [0, 8, 0, 0, 16], [0, 8, 6, 0, 16]], P = [[2, 2, 0, 0, 9], [0, 2, 0, 0, 9], [1, 2, 0, 0, 9]], S = [[2, 2, 0, 0, 10], [0, 2, 0, 0, 10], [1, 2, 0, 0, 10]], T = [[2, 2, 0, 0, 12], [0, 2, 0, 0, 12], [1, 2, 0, 0, 12]], M = [[2, 2, 0, 0, 14], [0, 2, 0, 0, 14], [1, 2, 0, 0, 14]], B = [[2, 2, 0, 0, 16], [0, 2, 0, 0, 16], [1, 2, 0, 0, 16]], R = [[2, 2, 0, 0, 16], [0, 2, 0, 0, 16], [1, 2, 0, 0, 16], [3, 2, 0, 0, 16]], _ = { 6: [2, 2, 16, n], 0: [1, 1, 16, n], 12: [1, 1, 16, n], 4: [1, 0, 16, n], 13: [1, 0, 16, n], 5: [0, 0, 16, n], 14: [0, 0, 16, n], 23: [1, 1, 16, v], 24: [1, 1, 16, A], 188: [0, 0, 16, v], 189: [0, 0, 16, A], 59: [1, 1, 17, c], 60: [1, 1, 16, c], 69: [1, 0, 17, c], 70: [1, 0, 16, c], 65: [0, 0, 17, c], 66: [0, 0, 16, c], 61: [1, 1, 17, h], 62: [1, 1, 16, h], 63: [1, 0, 17, h], 64: [1, 0, 16, h], 67: [0, 0, 17, h], 68: [0, 0, 16, h], 122: [1, 1, 17, u], 123: [1, 1, 16, u], 126: [1, 0, 17, u], 127: [1, 0, 16, u], 130: [0, 0, 17, u], 131: [0, 0, 16, u], 124: [1, 1, 17, p], 125: [1, 1, 16, p], 128: [1, 0, 17, p], 129: [1, 0, 16, p], 132: [0, 0, 17, p], 133: [0, 0, 16, p], 46: [1, 1, 17, m], 45: [1, 1, 16, m], 48: [1, 0, 17, m], 47: [1, 0, 16, m], 50: [0, 0, 17, m], 49: [0, 0, 16, m], 33: [1, 1, 144, o], 78: [1, 0, 144, o], 79: [0, 0, 144, o], 80: [1, 1, 145, d2], 81: [1, 1, 144, d2], 82: [1, 0, 145, d2], 83: [1, 0, 144, d2], 84: [0, 0, 145, d2], 85: [0, 0, 144, d2], 86: [1, 1, 145, l], 87: [1, 1, 144, l], 88: [1, 0, 145, l], 89: [1, 0, 144, l], 90: [0, 0, 145, l], 91: [0, 0, 144, l], 184: [1, 0, 145, f], 185: [1, 0, 144, f], 186: [0, 0, 145, f], 187: [0, 0, 144, f], 92: [1, 1, 145, g], 93: [1, 1, 144, g], 94: [1, 0, 145, g], 95: [1, 0, 144, g], 96: [0, 0, 145, g], 97: [0, 0, 144, g], 156: [0, 0, 129, y], 155: [0, 0, 128, y], 159: [1, 1, 17, w], 158: [1, 1, 16, w], 210: [1, 1, 17, b], 209: [1, 1, 16, b], 170: [1, 1, 17, k], 169: [1, 1, 16, k], 8: [0, 0, 0, [[0, 1, 0, 0, 8]]], 29: [0, 0, 1, [[0, 2, 0, 0, 16]]], 30: [0, 0, 0, [[0, 2, 0, 0, 16]]], 56: [0, 0, 128, [[0, 2, 0, 0, 8], [0, 2, 1, 0, 8]]], 109: [0, 0, 129, [[0, 4, 0, 0, 16], [0, 4, 2, 0, 16]]], 110: [0, 0, 128, [[0, 4, 0, 0, 16], [0, 4, 2, 0, 16]]], 26: [0, 0, 160, [[0, 4, 0, 0, 8], [0, 4, 1, 0, 8], [0, 4, 2, 0, 8], [0, 4, 3, 0, 8]]], 25: [0, 0, 160, [[0, 4, 1, 0, 8], [0, 4, 2, 0, 8], [0, 4, 3, 0, 8], [0, 4, 0, 0, 8]]], 104: [0, 0, 161, x], 105: [0, 0, 160, x], 28: [0, 0, 160, [[0, 4, 2, 0, 8], [0, 4, 1, 0, 8], [0, 4, 0, 0, 8], [0, 4, 3, 0, 8]]], 27: [0, 0, 160, [[0, 4, 3, 0, 8], [0, 4, 2, 0, 8], [0, 4, 1, 0, 8], [0, 4, 0, 0, 8]]], 106: [0, 0, 161, I], 107: [0, 0, 160, I], 2: [0, 0, 32, [[0, 3, 0, 0, 8], [0, 3, 1, 0, 8], [0, 3, 2, 0, 8]]], 3: [0, 0, 32, [[0, 3, 2, 0, 8], [0, 3, 1, 0, 8], [0, 3, 0, 0, 8]]], 119: [0, 0, 32, [[0, 4, 0, 0, 8], [0, 4, 1, 0, 8], [0, 4, 2, 0, 8]]], 121: [0, 0, 32, [[0, 4, 2, 0, 8], [0, 4, 1, 0, 8], [0, 4, 0, 0, 8]]], 71: [0, 0, 48, [[2, 1, 0, 0, 8], [0, 1, 0, 0, 8], [1, 1, 0, 0, 8]]], 111: [0, 0, 176, [[2, 1, 0, 0, 8], [0, 1, 0, 0, 8], [1, 1, 0, 0, 8], [3, 1, 0, 0, 8]]], 72: [0, 0, 49, P], 73: [0, 0, 48, P], 74: [0, 0, 49, S], 75: [0, 0, 48, S], 134: [0, 0, 49, T], 135: [0, 0, 48, T], 136: [0, 0, 49, M], 137: [0, 0, 48, M], 76: [0, 0, 49, B], 77: [0, 0, 48, B], 112: [0, 0, 177, R], 113: [0, 0, 176, R] };
}, 58055: (e2, t2, i2) => {
  i2.d(t2, { J: () => r2 });
  const r2 = { 0: { bits: 8, planar: false }, 1: { bits: 16, planar: false }, 2: { bits: 32, planar: false }, 10: { bits: 64, planar: false }, 3: { bits: 32, planar: false }, 4: { bits: 64, planar: false }, 5: { bits: 8, planar: true }, 6: { bits: 16, planar: true }, 7: { bits: 32, planar: true }, 11: { bits: 64, planar: true }, 8: { bits: 32, planar: true }, 9: { bits: 64, planar: true } };
}, 62751: (e2, t2, i2) => {
  i2.d(t2, { $$: () => s2, Eh: () => p, HR: () => a2, IY: () => A, Ki: () => v, Mb: () => g, Sz: () => h, Xp: () => c, _R: () => n, _m: () => f, d8: () => m, iW: () => l, mX: () => u, n1: () => o, os: () => r2, qO: () => d2 });
  const r2 = { 86017: "mp3", 86018: "mp4a.40", 86021: "vorbis", 86028: "flac", 86076: "opus", 65542: "ulaw", 65543: "alaw", 86019: "ac-3", 86056: "ec-3", 86020: "dtsc", 225: "av01", 27: "avc1", 173: "hev1", 196: "vvc1", 139: "vp8", 167: "vp09", 12: "mp4v" }, a2 = { flv: 0, mp4: 1, m4s: 1, mov: 1, ts: 2, mts: 2, m2ts: 2, ivf: 5, opus: 4, oggs: 4, ogg: 4, m3u8: 2, m3u: 2, mpd: 1, mp3: 14, mkv: 8, mka: 8, webm: 9, aac: 15, flac: 17, wav: 16, srt: 19, vtt: 18, ssa: 20, ass: 20, xml: 21, ttml: 21, h264: 11, 264: 11, avc: 11, h265: 12, 265: 12, hevc: 12, h266: 13, 266: 13, vvc: 13, mpeg: 3, mpg: 3, rtsp: 6, rtmp: 7, avi: 10 }, s2 = { m3u8: 4, m3u: 4, mpd: 5 }, n = { copy: 0, h264: 27, h261: 3, h263: 4, h263i: 20, h263p: 19, mjpeg: 7, wmv1: 17, wmv2: 18, wmv3: 71, avc: 27, hevc: 173, h265: 173, vvc: 196, h266: 196, av1: 225, vp9: 167, vp8: 139, mpeg4: 12, theora: 30, mpeg2video: 2, rv10: 5, rv20: 6, rv30: 68, rv40: 69 }, o = { copy: 0, aac: 86018, ac3: 86019, eac3: 86056, dts: 86020, mp3: 86017, opus: 86076, flac: 86028, speex: 86051, vorbis: 86021, pcm_alaw: 65543, pcm_mulaw: 65542, wmav1: 86023, wmav2: 86024, cook: 86036, sipr: 86057, ralf: 86073, pcm_u8: 65541, pcm_s16le: 65536, pcm_s24le: 65548, pcm_s32le: 65544, pcm_s64le: 65567, pcm_f32le: 65557, pcm_f64le: 65559 }, c = { webvtt: 94226, subrip: 94225, ass: 94230, ttml: 94232, mov_text: 94213, hdmv_pgs: 94214, hdmv_text: 94231, dvd: 94208, dvb: 94209, eia_608: 94218 }, d2 = { yuv420p: 0, yuv422p: 4, yuv444p: 5, yuva420p: 33, yuva422p: 78, yuva444p: 79, yuvj420p: 12, yuvj422p: 13, yuvj444p: 14, yuv420p10le: 62, yuv422p10le: 64, yuv444p10le: 68, yuva420p10le: 87, yuva422p10le: 89, yuva444p10le: 91, yuv420p10be: 61, yuv422p10be: 63, yuv444p10be: 67, yuva420p10be: 86, yuva422p10be: 88, yuva444p10be: 90 }, h = { u8: 0, "u8-planar": 5, s16: 1, "s16-planar": 6, s32: 2, "s32-planar": 7, s64: 10, "s64-planar": 11, float: 3, "float-planar": 8, double: 4, "double-planar": 9 }, l = { flv: 0, mp4: 1, mov: 1, ts: 2, mpegts: 2, mpeg: 3, ivf: 5, ogg: 4, opus: 4, m3u8: 2, m3u: 2, mpd: 1, mp3: 14, mkv: 8, matroska: 8, mka: 8, webm: 9, aac: 15, flac: 17, wav: 16, raw_h264: 11, raw_h265: 12, raw_vvc: 13, rtsp: 6, rtmp: 7, avi: 10 }, u = { tv: 1, pc: 2 }, f = { bt709: 1, fcc: 4, bt470bg: 5, smpte170m: 6, smpte240m: 7, ycgco: 8, gbr: 0, bt2020nc: 9 }, p = { bt709: 1, bt470m: 4, bt470bg: 5, smpte170m: 6, smpte240m: 7, smpte428: 10, film: 8, smpte431: 11, smpte432: 12, bt2020: 9, "jedec-p22": 22, ebu3213: 22 }, m = { bt709: 1, gamma22: 4, gamma28: 5, smpte170m: 6, smpte240m: 7, srgb: 13, xvycc: 11, "bt2020-10": 14, "bt2020-12": 15, smpte2084: 16, "arib-std-b67": 18 }, g = { Audio: 1, Video: 0, Subtitle: 3, Attachment: 4, Data: 2 }, v = { default: 1, dub: 2, original: 4, comment: 8, lyrics: 16, karaoke: 32, forced: 64, "hearing impaired": 128, "visual impaired": 256, "clean effects": 512, "attached pic": 1024, "timed thumbnails": 2048, captions: 65536, descriptions: 131072, metadata: 262144, dependent: 524288, "still image": 1048576 }, A = { mono: 4, stereo: 3, 2.1: 11, "3.0": 7, "3.0(back)": 259, "4.0": 263, quad: 51, "quad(side)": 1539, 3.1: 15, "5.0": 55, "5.0(side)": 1543, 4.1: 271, 5.1: 63, "5.1(side)": 1551, "6.0": 1799, "6.0(front)": 1731, "3.1.2": 20495, hexagonal: 311, 6.1: 1807, "6.1(back)": 319, "6.1(front)": 1739, "7.0": 1591, "7.0(front)": 1735, 7.1: 1599, "7.1(wide)": 255, "7.1(wide-side)": 1743, "5.1.2": 20543, octagonal: 1847, cube: 184371, "5.1.4": 184383, "7.1.2": 22079, "7.1.4": 185919, "7.2.3": 34359825983, "9.1.4": 186111, hexadecagonal: 6442710839, downmix: 1610612736, 22.2: 2164663779327 };
}, 36981: (e2, t2, i2) => {
  i2.d(t2, { r: () => l });
  var r2, a2, s2 = i2(134), n = i2(80662), o = i2.n(n), c = i2(61499), d2 = i2(12085);
  class h {
    constructor() {
      (0, s2.A)(this, "id", void 0), (0, s2.A)(this, "name", void 0), (0, s2.A)(this, "opaque", void 0);
    }
  }
  r2 = h.prototype, (a2 = new (o())()).set("id", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), a2.set("name", { 0: 4, 1: 0, 2: 0, 3: 1, 4: 16, 5: 0, 6: 0, 7: 4, 8: 0 }), a2.set("opaque", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 20, 8: 0 }), (0, d2.A)(r2, c.Og, true), (0, d2.A)(r2, c.dc, 4), (0, d2.A)(r2, c.g7, 24), (0, d2.A)(r2, c.JY, a2);
  class l {
    constructor() {
      (0, s2.A)(this, "order", void 0), (0, s2.A)(this, "nbChannels", void 0), (0, s2.A)(this, "u", void 0), (0, s2.A)(this, "opaque", void 0);
    }
  }
  !(function(e3) {
    var t3 = new (o())();
    t3.set("order", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), t3.set("nbChannels", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), t3.set("u", { 0: (function(e4) {
      var t4 = new (o())();
      return t4.set("mask", { 0: 10, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), t4.set("map", { 0: h, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), (0, d2.A)(e4, c.Og, true), (0, d2.A)(e4, c.dc, 8), (0, d2.A)(e4, c.g7, 8), (0, d2.A)(e4, c.JY, t4), e4;
    })({}), 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), t3.set("opaque", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 16, 8: 0 }), (0, d2.A)(e3, c.Og, true), (0, d2.A)(e3, c.dc, 8), (0, d2.A)(e3, c.g7, 24), (0, d2.A)(e3, c.JY, t3);
  })(l.prototype);
}, 50288: (e2, t2, i2) => {
  i2.d(t2, { BU: () => u });
  var r2, a2, s2 = i2(134), n = i2(80662), o = i2.n(n), c = i2(61499), d2 = i2(12085), h = i2(73783);
  i2(37837);
  class l {
    constructor() {
      (0, s2.A)(this, "data", 0), (0, s2.A)(this, "size", 0), (0, s2.A)(this, "refcount", 0), (0, s2.A)(this, "free", 0), (0, s2.A)(this, "opaque", 0), (0, s2.A)(this, "flags", 0), (0, s2.A)(this, "flagsInternal", 0);
    }
  }
  r2 = l.prototype, (a2 = new (o())()).set("data", { 0: 2, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), a2.set("size", { 0: 25, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), a2.set("refcount", { 0: 9, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), a2.set("free", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 12, 8: 0 }), a2.set("opaque", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 16, 8: 0 }), a2.set("flags", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 20, 8: 0 }), a2.set("flagsInternal", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 24, 8: 0 }), (0, d2.A)(r2, c.Og, true), (0, d2.A)(r2, c.dc, 4), (0, d2.A)(r2, c.g7, 28), (0, d2.A)(r2, c.JY, a2);
  class u {
    constructor() {
      (0, s2.A)(this, "buffer", 0), (0, s2.A)(this, "data", 0), (0, s2.A)(this, "size", 0);
    }
  }
  !(function(e3) {
    var t3 = new (o())();
    t3.set("buffer", { 0: l, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), t3.set("data", { 0: 2, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), t3.set("size", { 0: 25, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), (0, d2.A)(e3, c.Og, true), (0, d2.A)(e3, c.dc, 4), (0, d2.A)(e3, c.g7, 12), (0, d2.A)(e3, c.JY, t3);
  })(u.prototype);
  class f {
    constructor() {
      (0, s2.A)(this, "mutex", void 0), (0, s2.A)(this, "pool", 0), (0, s2.A)(this, "refcount", 0), (0, s2.A)(this, "size", 0), (0, s2.A)(this, "opaque", 0), (0, s2.A)(this, "alloc", 0), (0, s2.A)(this, "alloc2", 0), (0, s2.A)(this, "poolFree", 0);
    }
  }
  !(function(e3) {
    var t3 = new (o())();
    t3.set("mutex", { 0: h.eu, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), t3.set("pool", { get 0() {
      return p;
    }, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), t3.set("refcount", { 0: 9, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), t3.set("size", { 0: 25, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 12, 8: 0 }), t3.set("opaque", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 16, 8: 0 }), t3.set("alloc", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 20, 8: 0 }), t3.set("alloc2", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 24, 8: 0 }), t3.set("poolFree", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 28, 8: 0 }), (0, d2.A)(e3, c.Og, true), (0, d2.A)(e3, c.dc, 4), (0, d2.A)(e3, c.g7, 32), (0, d2.A)(e3, c.JY, t3);
  })(f.prototype);
  class p {
    constructor() {
      (0, s2.A)(this, "data", 0), (0, s2.A)(this, "opaque", 0), (0, s2.A)(this, "free", 0), (0, s2.A)(this, "pool", 0), (0, s2.A)(this, "next", 0), (0, s2.A)(this, "buffer", void 0);
    }
  }
  !(function(e3) {
    var t3 = new (o())();
    t3.set("data", { 0: 2, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), t3.set("opaque", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), t3.set("free", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), t3.set("pool", { 0: f, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 12, 8: 0 }), t3.set("next", { 0: p, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 16, 8: 0 }), t3.set("buffer", { 0: l, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 20, 8: 0 }), (0, d2.A)(e3, c.Og, true), (0, d2.A)(e3, c.dc, 4), (0, d2.A)(e3, c.g7, 48), (0, d2.A)(e3, c.JY, t3);
  })(p.prototype);
}, 77162: (e2, t2, i2) => {
  i2.d(t2, { A: () => m });
  var r2, a2, s2 = i2(134), n = i2(80662), o = i2.n(n), c = i2(61499), d2 = i2(12085), h = i2(47958), l = i2(9599), u = i2(36981), f = i2(77231), p = i2(71766);
  class m {
    constructor() {
      (0, s2.A)(this, "codecType", -1), (0, s2.A)(this, "codecId", 0), (0, s2.A)(this, "codecTag", 0), (0, s2.A)(this, "extradata", 0), (0, s2.A)(this, "extradataSize", 0), (0, s2.A)(this, "codedSideData", 0), (0, s2.A)(this, "nbCodedSideData", 0), (0, s2.A)(this, "format", f.N_), (0, s2.A)(this, "bitrate", BigInt(0)), (0, s2.A)(this, "bitsPerCodedSample", 0), (0, s2.A)(this, "bitsPerRawSample", 0), (0, s2.A)(this, "profile", f.N_), (0, s2.A)(this, "level", f.N_), (0, s2.A)(this, "width", 0), (0, s2.A)(this, "height", 0), (0, s2.A)(this, "sampleAspectRatio", new l.P({ den: 1, num: 1 })), (0, s2.A)(this, "framerate", new l.P({ den: 1, num: 0 })), (0, s2.A)(this, "fieldOrder", 0), (0, s2.A)(this, "colorRange", 0), (0, s2.A)(this, "colorPrimaries", 2), (0, s2.A)(this, "colorTrc", 2), (0, s2.A)(this, "colorSpace", 2), (0, s2.A)(this, "chromaLocation", 0), (0, s2.A)(this, "videoDelay", 0), (0, s2.A)(this, "chLayout", void 0), (0, s2.A)(this, "sampleRate", f.N_), (0, s2.A)(this, "blockAlign", 0), (0, s2.A)(this, "frameSize", 0), (0, s2.A)(this, "initialPadding", 0), (0, s2.A)(this, "trailingPadding", 0), (0, s2.A)(this, "seekPreroll", 0), (0, s2.A)(this, "flags", 0);
    }
    destroy() {
      (0, p.dn)(this[c.o9]), this[c.o9] = 0;
    }
  }
  r2 = m.prototype, (a2 = new (o())()).set("codecType", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), a2.set("codecId", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), a2.set("codecTag", { 0: 8, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), a2.set("extradata", { 0: 2, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 12, 8: 0 }), a2.set("extradataSize", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 16, 8: 0 }), a2.set("codedSideData", { 0: h.lg, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 20, 8: 0 }), a2.set("nbCodedSideData", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 24, 8: 0 }), a2.set("format", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 28, 8: 0 }), a2.set("bitrate", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 32, 8: 0 }), a2.set("bitsPerCodedSample", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 40, 8: 0 }), a2.set("bitsPerRawSample", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 44, 8: 0 }), a2.set("profile", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 48, 8: 0 }), a2.set("level", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 52, 8: 0 }), a2.set("width", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 56, 8: 0 }), a2.set("height", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 60, 8: 0 }), a2.set("sampleAspectRatio", { 0: l.P, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 64, 8: 0 }), a2.set("framerate", { 0: l.P, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 72, 8: 0 }), a2.set("fieldOrder", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 80, 8: 0 }), a2.set("colorRange", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 84, 8: 0 }), a2.set("colorPrimaries", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 88, 8: 0 }), a2.set("colorTrc", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 92, 8: 0 }), a2.set("colorSpace", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 96, 8: 0 }), a2.set("chromaLocation", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 100, 8: 0 }), a2.set("videoDelay", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 104, 8: 0 }), a2.set("chLayout", { 0: u.r, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 112, 8: 0 }), a2.set("sampleRate", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 136, 8: 0 }), a2.set("blockAlign", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 140, 8: 0 }), a2.set("frameSize", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 144, 8: 0 }), a2.set("initialPadding", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 148, 8: 0 }), a2.set("trailingPadding", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 152, 8: 0 }), a2.set("seekPreroll", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 156, 8: 0 }), a2.set("flags", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 160, 8: 0 }), (0, d2.A)(r2, c.Og, true), (0, d2.A)(r2, c.dc, 8), (0, d2.A)(r2, c.g7, 168), (0, d2.A)(r2, c.JY, a2);
}, 56490: (e2, t2, i2) => {
  i2.d(t2, { A: () => l });
  var r2, a2, s2 = i2(134), n = i2(80662), o = i2.n(n), c = i2(61499), d2 = i2(12085);
  class h {
    constructor() {
      (0, s2.A)(this, "key", 0), (0, s2.A)(this, "value", 0);
    }
  }
  r2 = h.prototype, (a2 = new (o())()).set("key", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), a2.set("value", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), (0, d2.A)(r2, c.Og, true), (0, d2.A)(r2, c.dc, 4), (0, d2.A)(r2, c.g7, 8), (0, d2.A)(r2, c.JY, a2);
  class l {
    constructor() {
      (0, s2.A)(this, "count", 0), (0, s2.A)(this, "elems", 0);
    }
  }
  !(function(e3) {
    var t3 = new (o())();
    t3.set("count", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), t3.set("elems", { 0: h, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), (0, d2.A)(e3, c.Og, true), (0, d2.A)(e3, c.dc, 4), (0, d2.A)(e3, c.g7, 8), (0, d2.A)(e3, c.JY, t3);
  })(l.prototype);
}, 55833: (e2, t2, i2) => {
  i2.d(t2, { pu: () => m });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(61499), o = i2(12085), c = i2(56490), d2 = i2(50288), h = i2(9599), l = i2(94300), u = i2(36981), f = i2(77231), p = i2(56024);
  const m = 8;
  class g {
    constructor() {
      (0, r2.A)(this, "type", 0), (0, r2.A)(this, "data", 0), (0, r2.A)(this, "size", 0), (0, r2.A)(this, "metadata", 0), (0, r2.A)(this, "buf", 0);
    }
  }
  var v, A;
  v = g.prototype, (A = new (s2())()).set("type", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), A.set("data", { 0: 2, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), A.set("size", { 0: 25, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), A.set("metadata", { 0: c.A, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 12, 8: 0 }), A.set("buf", { 0: d2.BU, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 16, 8: 0 }), (0, o.A)(v, n.Og, true), (0, o.A)(v, n.dc, 4), (0, o.A)(v, n.g7, 20), (0, o.A)(v, n.JY, A), (function(e3) {
    var t3 = new (s2())();
    t3.set("displayPrimaries", { 0: h.P, 1: 0, 2: 0, 3: 1, 4: 6, 5: 0, 6: 0, 7: 0, 8: 0 }), t3.set("whitePoint", { 0: h.P, 1: 0, 2: 0, 3: 1, 4: 2, 5: 0, 6: 0, 7: 48, 8: 0 }), t3.set("minLuminance", { 0: h.P, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 64, 8: 0 }), t3.set("maxLuminance", { 0: h.P, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 72, 8: 0 }), t3.set("hasPrimaries", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 80, 8: 0 }), t3.set("hasLuminance", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 84, 8: 0 }), (0, o.A)(e3, n.Og, true), (0, o.A)(e3, n.dc, 4), (0, o.A)(e3, n.g7, 88), (0, o.A)(e3, n.JY, t3);
  })((class {
    constructor() {
      (0, r2.A)(this, "displayPrimaries", void 0), (0, r2.A)(this, "whitePoint", void 0), (0, r2.A)(this, "minLuminance", void 0), (0, r2.A)(this, "maxLuminance", void 0), (0, r2.A)(this, "hasPrimaries", void 0), (0, r2.A)(this, "hasLuminance", void 0);
    }
  }).prototype), (function(e3) {
    var t3 = new (s2())();
    t3.set("maxCLL", { 0: 8, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), t3.set("maxFALL", { 0: 8, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), (0, o.A)(e3, n.Og, true), (0, o.A)(e3, n.dc, 4), (0, o.A)(e3, n.g7, 8), (0, o.A)(e3, n.JY, t3);
  })((class {
    constructor() {
      (0, r2.A)(this, "maxCLL", void 0), (0, r2.A)(this, "maxFALL", void 0);
    }
  }).prototype);
  class y {
    constructor() {
      (0, r2.A)(this, "data", new Array(m).fill(0, 0, m)), (0, r2.A)(this, "linesize", new Array(m).fill(0, 0, m)), (0, r2.A)(this, "extendedData", 0), (0, r2.A)(this, "width", f.N_), (0, r2.A)(this, "height", f.N_), (0, r2.A)(this, "nbSamples", f.N_), (0, r2.A)(this, "format", f.N_), (0, r2.A)(this, "keyFrame", 0), (0, r2.A)(this, "pictType", 0), (0, r2.A)(this, "sampleAspectRatio", new h.P({ den: 1, num: 0 })), (0, r2.A)(this, "pts", f.Dh), (0, r2.A)(this, "pktDts", f.Dh), (0, r2.A)(this, "timeBase", void 0), (0, r2.A)(this, "quality", f.N_), (0, r2.A)(this, "opaque", 0), (0, r2.A)(this, "repeatPict", f.N_), (0, r2.A)(this, "interlacedFrame", f.N_), (0, r2.A)(this, "topFieldFirst", f.N_), (0, r2.A)(this, "paletteHasChanged", f.N_), (0, r2.A)(this, "sampleRate", f.N_), (0, r2.A)(this, "buf", new Array(m).fill(0, 0, m)), (0, r2.A)(this, "extendedBuf", 0), (0, r2.A)(this, "nbExtendedBuf", 0), (0, r2.A)(this, "sideData", 0), (0, r2.A)(this, "nbSideData", 0), (0, r2.A)(this, "flags", 0), (0, r2.A)(this, "colorRange", 0), (0, r2.A)(this, "colorPrimaries", 2), (0, r2.A)(this, "colorTrc", 2), (0, r2.A)(this, "colorSpace", 2), (0, r2.A)(this, "chromaLocation", 0), (0, r2.A)(this, "bestEffortTimestamp", f.Dh), (0, r2.A)(this, "pktPos", f.Dh), (0, r2.A)(this, "metadata", 0), (0, r2.A)(this, "decodeErrorFlags", 0), (0, r2.A)(this, "pktSize", f.N_), (0, r2.A)(this, "hwFramesCtx", 0), (0, r2.A)(this, "opaqueRef", 0), (0, r2.A)(this, "cropTop", 0), (0, r2.A)(this, "cropBottom", 0), (0, r2.A)(this, "cropLeft", 0), (0, r2.A)(this, "cropRight", 0), (0, r2.A)(this, "privateRef", 0), (0, r2.A)(this, "chLayout", void 0), (0, r2.A)(this, "duration", BigInt(0));
    }
    close() {
      (0, p.to)(this[n.o9]), (0, l.A)(this);
    }
  }
  !(function(e3) {
    var t3 = new (s2())();
    t3.set("data", { 0: 2, 1: 1, 2: 1, 3: 1, 4: 8, 5: 0, 6: 0, 7: 0, 8: 0 }), t3.set("linesize", { 0: 15, 1: 0, 2: 0, 3: 1, 4: 8, 5: 0, 6: 0, 7: 32, 8: 0 }), t3.set("extendedData", { 0: 2, 1: 1, 2: 2, 3: 0, 4: 0, 5: 0, 6: 0, 7: 64, 8: 0 }), t3.set("width", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 68, 8: 0 }), t3.set("height", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 72, 8: 0 }), t3.set("nbSamples", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 76, 8: 0 }), t3.set("format", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 80, 8: 0 }), t3.set("keyFrame", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 84, 8: 0 }), t3.set("pictType", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 88, 8: 0 }), t3.set("sampleAspectRatio", { 0: h.P, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 92, 8: 0 }), t3.set("pts", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 104, 8: 0 }), t3.set("pktDts", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 112, 8: 0 }), t3.set("timeBase", { 0: h.P, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 120, 8: 0 }), t3.set("quality", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 128, 8: 0 }), t3.set("opaque", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 132, 8: 0 }), t3.set("repeatPict", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 136, 8: 0 }), t3.set("interlacedFrame", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 140, 8: 0 }), t3.set("topFieldFirst", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 144, 8: 0 }), t3.set("paletteHasChanged", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 148, 8: 0 }), t3.set("sampleRate", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 152, 8: 0 }), t3.set("buf", { 0: d2.BU, 1: 1, 2: 1, 3: 1, 4: 8, 5: 0, 6: 0, 7: 156, 8: 0 }), t3.set("extendedBuf", { 0: d2.BU, 1: 1, 2: 2, 3: 0, 4: 0, 5: 0, 6: 0, 7: 188, 8: 0 }), t3.set("nbExtendedBuf", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 192, 8: 0 }), t3.set("sideData", { 0: g, 1: 1, 2: 2, 3: 0, 4: 0, 5: 0, 6: 0, 7: 196, 8: 0 }), t3.set("nbSideData", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 200, 8: 0 }), t3.set("flags", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 204, 8: 0 }), t3.set("colorRange", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 208, 8: 0 }), t3.set("colorPrimaries", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 212, 8: 0 }), t3.set("colorTrc", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 216, 8: 0 }), t3.set("colorSpace", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 220, 8: 0 }), t3.set("chromaLocation", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 224, 8: 0 }), t3.set("bestEffortTimestamp", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 232, 8: 0 }), t3.set("pktPos", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 240, 8: 0 }), t3.set("metadata", { 0: c.A, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 248, 8: 0 }), t3.set("decodeErrorFlags", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 252, 8: 0 }), t3.set("pktSize", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 256, 8: 0 }), t3.set("hwFramesCtx", { 0: d2.BU, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 260, 8: 0 }), t3.set("opaqueRef", { 0: d2.BU, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 264, 8: 0 }), t3.set("cropTop", { 0: 25, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 268, 8: 0 }), t3.set("cropBottom", { 0: 25, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 272, 8: 0 }), t3.set("cropLeft", { 0: 25, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 276, 8: 0 }), t3.set("cropRight", { 0: 25, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 280, 8: 0 }), t3.set("privateRef", { 0: d2.BU, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 284, 8: 0 }), t3.set("chLayout", { 0: u.r, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 288, 8: 0 }), t3.set("duration", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 312, 8: 0 }), (0, o.A)(e3, n.Og, true), (0, o.A)(e3, n.dc, 8), (0, o.A)(e3, n.g7, 320), (0, o.A)(e3, n.JY, t3);
  })(y.prototype), (function(e3) {
    var t3 = new (s2())();
    t3.set("refCount", { 0: 16, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 320, 8: 0 }), (0, o.A)(e3, n.Og, true), (0, o.A)(e3, n.dc, 8), (0, o.A)(e3, n.g7, 328), (0, o.A)(e3, n.JY, t3);
  })((class extends y {
    constructor(...e3) {
      super(...e3), (0, r2.A)(this, "refCount", void 0);
    }
  }).prototype);
}, 47958: (e2, t2, i2) => {
  i2.d(t2, { lg: () => f });
  var r2, a2, s2 = i2(134), n = i2(80662), o = i2.n(n), c = i2(61499), d2 = i2(12085), h = i2(50288), l = i2(9599), u = i2(77231);
  class f {
    constructor() {
      (0, s2.A)(this, "data", 0), (0, s2.A)(this, "size", 0), (0, s2.A)(this, "type", -1);
    }
  }
  r2 = f.prototype, (a2 = new (o())()).set("data", { 0: 2, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), a2.set("size", { 0: 25, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), a2.set("type", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), (0, d2.A)(r2, c.Og, true), (0, d2.A)(r2, c.dc, 4), (0, d2.A)(r2, c.g7, 12), (0, d2.A)(r2, c.JY, a2), (function(e3) {
    var t3 = new (o())();
    t3.set("wallclock", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), t3.set("flags", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), (0, d2.A)(e3, c.Og, true), (0, d2.A)(e3, c.dc, 8), (0, d2.A)(e3, c.g7, 16), (0, d2.A)(e3, c.JY, t3);
  })((class {
    constructor() {
      (0, s2.A)(this, "wallclock", void 0), (0, s2.A)(this, "flags", void 0);
    }
  }).prototype);
  class p {
    constructor() {
      (0, s2.A)(this, "buf", 0), (0, s2.A)(this, "pts", u.Dh), (0, s2.A)(this, "dts", u.Dh), (0, s2.A)(this, "data", 0), (0, s2.A)(this, "size", 0), (0, s2.A)(this, "streamIndex", u.N_), (0, s2.A)(this, "flags", 0), (0, s2.A)(this, "sideData", 0), (0, s2.A)(this, "sideDataElems", 0), (0, s2.A)(this, "duration", u.Dh), (0, s2.A)(this, "pos", u.Dh), (0, s2.A)(this, "opaque", 0), (0, s2.A)(this, "opaqueRef", 0), (0, s2.A)(this, "timeBase", new l.P({ den: u.SF, num: 1 })), (0, s2.A)(this, "bitFormat", 0);
    }
  }
  !(function(e3) {
    var t3 = new (o())();
    t3.set("buf", { 0: h.BU, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), t3.set("pts", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), t3.set("dts", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 16, 8: 0 }), t3.set("data", { 0: 2, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 24, 8: 0 }), t3.set("size", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 28, 8: 0 }), t3.set("streamIndex", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 32, 8: 0 }), t3.set("flags", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 36, 8: 0 }), t3.set("sideData", { 0: f, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 40, 8: 0 }), t3.set("sideDataElems", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 44, 8: 0 }), t3.set("duration", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 48, 8: 0 }), t3.set("pos", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 56, 8: 0 }), t3.set("opaque", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 64, 8: 0 }), t3.set("opaqueRef", { 0: h.BU, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 68, 8: 0 }), t3.set("timeBase", { 0: l.P, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 72, 8: 0 }), t3.set("bitFormat", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 80, 8: 0 }), (0, d2.A)(e3, c.Og, true), (0, d2.A)(e3, c.dc, 8), (0, d2.A)(e3, c.g7, 88), (0, d2.A)(e3, c.JY, t3);
  })(p.prototype), (function(e3) {
    var t3 = new (o())();
    t3.set("refCount", { 0: 16, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 88, 8: 0 }), (0, d2.A)(e3, c.Og, true), (0, d2.A)(e3, c.dc, 8), (0, d2.A)(e3, c.g7, 96), (0, d2.A)(e3, c.JY, t3);
  })((class extends p {
    constructor(...e3) {
      super(...e3), (0, s2.A)(this, "refCount", void 0);
    }
  }).prototype);
}, 10278: (e2, t2, i2) => {
  i2.d(t2, { A: () => h });
  var r2, a2, s2 = i2(134), n = i2(80662), o = i2.n(n), c = i2(61499), d2 = i2(12085);
  class h {
    constructor() {
      (0, s2.A)(this, "data", void 0), (0, s2.A)(this, "linesize", void 0), (0, s2.A)(this, "nbSamples", void 0), (0, s2.A)(this, "maxnbSamples", void 0), (0, s2.A)(this, "channels", void 0), (0, s2.A)(this, "sampleRate", void 0), (0, s2.A)(this, "format", void 0), (0, s2.A)(this, "timestamp", void 0), (0, s2.A)(this, "duration", void 0);
    }
  }
  r2 = h.prototype, (a2 = new (o())()).set("data", { 0: 2, 1: 1, 2: 2, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), a2.set("linesize", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), a2.set("nbSamples", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), a2.set("maxnbSamples", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 12, 8: 0 }), a2.set("channels", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 16, 8: 0 }), a2.set("sampleRate", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 20, 8: 0 }), a2.set("format", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 24, 8: 0 }), a2.set("timestamp", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 32, 8: 0 }), a2.set("duration", { 0: 19, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 40, 8: 0 }), (0, d2.A)(r2, c.Og, true), (0, d2.A)(r2, c.dc, 8), (0, d2.A)(r2, c.g7, 48), (0, d2.A)(r2, c.JY, a2), (function(e3) {
    var t3 = new (o())();
    t3.set("refCount", { 0: 16, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 48, 8: 0 }), (0, d2.A)(e3, c.Og, true), (0, d2.A)(e3, c.dc, 8), (0, d2.A)(e3, c.g7, 56), (0, d2.A)(e3, c.JY, t3);
  })((class extends h {
    constructor(...e3) {
      super(...e3), (0, s2.A)(this, "refCount", void 0);
    }
  }).prototype);
}, 9599: (e2, t2, i2) => {
  i2.d(t2, { P: () => h });
  var r2, a2, s2 = i2(134), n = i2(80662), o = i2.n(n), c = i2(61499), d2 = i2(12085);
  class h {
    constructor(e3) {
      (0, s2.A)(this, "num", 1), (0, s2.A)(this, "den", 1), e3 && (this.den = e3.den, this.num = e3.num);
    }
  }
  r2 = h.prototype, (a2 = new (o())()).set("num", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), a2.set("den", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), (0, d2.A)(r2, c.Og, true), (0, d2.A)(r2, c.dc, 4), (0, d2.A)(r2, c.g7, 8), (0, d2.A)(r2, c.JY, a2);
}, 73040: (e2, t2, i2) => {
  i2.d(t2, { $x: () => o, bD: () => c });
  var r2 = i2(67672), a2 = i2(72739), s2 = i2(95335);
  async function n(e3, t3) {
    return { key: await e3.readString(await e3.readUint16()), value: await o(e3, t3) };
  }
  async function o(e3, t3) {
    let i3;
    switch (await e3.readUint8()) {
      case 0:
        i3 = await e3.readDouble();
        break;
      case 1:
        i3 = !!await e3.readUint8();
        break;
      case 2:
        i3 = await e3.readString(await e3.readUint16());
        break;
      case 3:
        for (i3 = {}; e3.getPos() < t3; ) {
          const { key: r4, value: a4 } = await n(e3, t3);
          if (i3[r4] = a4, 9 == (16777215 & await e3.peekUint24())) {
            await e3.skip(3);
            break;
          }
        }
        break;
      case 8:
        for (i3 = {}, await e3.skip(4); e3.getPos() < t3; ) {
          const { key: r4, value: a4 } = await n(e3, t3);
          if (i3[r4] = a4, 9 == (16777215 & await e3.peekUint24())) {
            await e3.skip(3);
            break;
          }
        }
        break;
      case 9:
      case 5:
        i3 = null;
        break;
      case 10:
        i3 = [];
        const r3 = await e3.readUint32();
        for (let a4 = 0; a4 < r3; a4++) i3.push(await o(e3, t3));
        break;
      case 11:
        const a3 = await e3.readDouble(), s3 = await e3.readInt16();
        i3 = new Date(a3 + 60 * s3 * 1e3);
        break;
      case 12:
        i3 = await e3.readString(await e3.readUint32());
    }
    return i3;
  }
  function c(e3, t3) {
    r2.ai(t3) ? (e3.writeUint8(0), e3.writeDouble(t3)) : r2.o(t3) ? (e3.writeUint8(0), e3.writeDouble(Number(t3))) : r2.zM(t3) ? (e3.writeUint8(1), e3.writeUint8(t3 ? 1 : 0)) : r2.Yj(t3) ? t3.length >= 65536 ? (e3.writeUint8(12), e3.writeUint32(t3.length), e3.writeString(t3)) : (e3.writeUint8(2), e3.writeUint16(t3.length), e3.writeString(t3)) : r2.YO(t3) ? (e3.writeUint8(10), e3.writeUint32(t3.length), a2.__(t3, (t4) => {
      c(e3, t4);
    })) : r2.Ik(t3) ? (e3.writeUint8(3), s2.__(t3, (t4, i3) => {
      e3.writeUint16(i3.length), e3.writeString(i3), c(e3, t4);
    }), e3.writeUint24(9)) : t3 instanceof Date ? (e3.writeUint8(11), e3.writeDouble(t3.getTime()), e3.writeInt16(0)) : null == t3 && e3.writeUint8(5);
  }
}, 37815: (e2, t2, i2) => {
  i2.d(t2, { A6: () => v, D$: () => u, Q7: () => m, VG: () => f, aw: () => l, us: () => g });
  var r2 = i2(14686), a2 = i2(63939), s2 = i2(50932), n = i2(37837), o = i2(40046), c = (i2(50288), i2(73783)), d2 = i2(52699);
  const h = 1;
  function l(e3, t3, i3 = 0, r3 = 0, a3 = 0) {
    const c2 = (0, n.Gy)(28);
    if (!c2) return 0;
    const d3 = (function(e4, t4, i4, r4 = 0, a4 = 0, c3 = 0) {
      s2.M[20](e4, t4), s2.M[25](e4 + 4, i4), s2.M[20](e4 + 12, r4), s2.M[20](e4 + 16, a4), o.M_(e4 + 8, 1, 9, 2), s2.M[15](e4 + 20, c3);
      const d4 = (0, n.Gy)(12);
      return d4 ? (s2.M[20](d4, e4), s2.M[20](d4 + 4, t4), s2.M[25](d4 + 8, i4), d4) : 0;
    })(c2, e3, t3, i3, r3, a3);
    return d3 || ((0, n.Eb)(c2), 0);
  }
  function u(e3) {
    return l((0, n.sY)(e3), e3);
  }
  function f(e3) {
    const t3 = (0, n.Gy)(12);
    return (0, r2.Mr)(t3, e3, 12), o.WQ(a2.f[20](e3) + 8, 1, 9, 2), t3;
  }
  function p(e3, t3) {
    const i3 = a2.f[20](a2.f[20](e3));
    if (t3 ? ((0, r2.Mr)(a2.f[20](e3), a2.f[20](t3), 12), (0, n.aI)(t3)) : (0, n.aI)(e3), 1 === o.jb(i3 + 8, 1, 9, 2)) {
      const e4 = !(2 & a2.f[15](i3 + 24));
      a2.f[20](i3 + 16) ? A(a2.f[20](i3 + 16), a2.f[20](i3)) : (0, n.Eb)(a2.f[20](i3)), e4 && (0, n.Eb)(i3);
    }
  }
  function m(e3) {
    e3 && a2.f[20](e3) && p(e3, 0);
  }
  function g(e3, t3) {
    const i3 = a2.f[20](e3);
    if (!t3) return m(e3), 0;
    if (i3 && a2.f[20](i3 + 4) === a2.f[20](t3 + 4)) return s2.M[20](i3 + 4, a2.f[20](t3 + 4)), s2.M[25](i3 + 8, a2.f[25](t3 + 8)), 0;
    const r3 = f(t3);
    return m(e3), s2.M[20](e3, r3), 0;
  }
  function v(e3, t3) {
    if (!a2.f[20](e3)) {
      const i4 = l((0, n.cz)(0, t3), t3);
      return s2.M[20](e3, i4), s2.M[15](a2.f[20](i4) + 24, a2.f[15](a2.f[20](i4) + 24) | h), 0;
    }
    const i3 = a2.f[20](e3), c2 = a2.f[20](i3);
    if (a2.f[25](i3 + 8) === t3) return 0;
    if (!(a2.f[15](c2 + 24) & h && (function(e4) {
      return 1 & a2.f[15](a2.f[20](e4) + 20) ? 0 : 1 === o.Hh(a2.f[20](e4) + 8, 9, 2) ? 1 : 0;
    })(i3) && a2.f[20](i3 + 4) === a2.f[20](c2))) {
      let i4 = d2.z(4);
      s2.M[20](i4, 0);
      const n2 = v(i4, t3);
      return n2 < 0 ? (d2.t(4), n2) : ((0, r2.Mr)(a2.f[20](a2.f[20](i4) + 4), a2.f[20](c2), Math.min(t3, a2.f[25](c2 + 4))), p(e3, i4), d2.t(4), 0);
    }
    const u2 = (0, n.cz)(a2.f[20](c2), t3);
    return s2.M[20](i3 + 4, u2), s2.M[20](c2, u2), s2.M[25](i3 + 8, t3), s2.M[25](c2 + 4, t3), 0;
  }
  function A(e3, t3) {
    const i3 = e3, r3 = a2.f[20](i3 + 12);
    c.s2(r3), s2.M[20](i3 + 16, a2.f[20](r3 + 4)), s2.M[20](r3 + 4, i3), c.Tl(r3), 1 === o.jb(r3 + 8, 1, 9, 2) && (function(e4) {
      !(function(e5) {
        for (; a2.f[20](e5 + 4); ) {
          const t4 = a2.f[20](e5 + 4);
          s2.M[20](e5 + 4, a2.f[20](t4 + 16)), a2.f[20](t4 + 4) ? A(a2.f[20](t4 + 4), a2.f[20](t4)) : (0, n.Eb)(a2.f[20](t4)), (0, n.Eb)(t4);
        }
      })(e4), c.zr(e4), (0, n.Eb)(e4);
    })(r3);
  }
}, 73749: (e2, t2, i2) => {
  i2.d(t2, { AO: () => l, IH: () => h, a5: () => f });
  var r2 = i2(63939), a2 = i2(50932), s2 = (i2(56490), i2(11473)), n = i2(14686), o = i2(37837), c = i2(67672), d2 = i2(62100);
  function h(e3) {
    l(r2.f[20](e3)), (0, o.aI)(e3);
  }
  function l(e3) {
    if (e3) {
      for (; a2.M[15](e3, r2.f[15](e3) - 1), r2.f[15](e3) + 1; ) (0, o.aI)(r2.f[20](e3 + 4) + 8 * r2.f[15](e3)), (0, o.aI)(r2.f[20](e3 + 4) + 8 * r2.f[15](e3) + 4);
      (0, o.aI)(e3 + 4);
    }
  }
  function u(e3, t3) {
    let i3 = 0;
    return e3 ? (t3 && (i3 = 1 + (t3 - r2.f[20](e3 + 4) >> 3)), i3 >= r2.f[15](e3) ? 0 : r2.f[20](e3 + 4) + 8 * i3) : 0;
  }
  function f(e3, t3, i3, o2 = 0) {
    if (!e3) throw new Error("m is nullptr");
    let h2 = 0;
    if (64 & o2 && (h2 = (function(e4, t4, i4 = 0, a3 = 0) {
      if (!e4) return 0;
      let s3 = i4;
      if (!t4) return 0;
      for (; s3 = u(e4, s3); ) {
        let e5 = (0, n.lH)(r2.f[20](s3));
        if (1 & a3 && (e5.toLocaleLowerCase(), t4.toLocaleLowerCase()), e5 === t4 || 2 & a3 && 0 === e5.indexOf(t4)) return s3;
      }
    })(e3, t3, 0, o2)), h2) {
      if (16 & o2) return 0;
      32 & o2 && (i3 = "".concat((0, n.lH)(r2.f[20](h2 + 4)), ",").concat(i3)), s2.s_.free(r2.f[20](h2 + 4)), a2.M[20](h2 + 4, s2.s_.malloc(i3.length + 1)), (0, n.qW)(r2.f[20](h2 + 4), i3, i3.length);
    } else {
      c.Yj(i3) || (i3 = (0, d2.A)(i3));
      let o3 = s2.s_.realloc(r2.f[20](e3 + 4), 8 * (r2.f[15](e3) + 1));
      a2.M[20](e3 + 4, o3), a2.M[20](r2.f[20](e3 + 4) + 8 * r2.f[15](e3), s2.s_.malloc(t3.length + 1)), a2.M[20](r2.f[20](e3 + 4) + 8 * r2.f[15](e3) + 4, s2.s_.malloc(i3.length + 1)), (0, n.qW)(r2.f[20](r2.f[20](e3 + 4) + 8 * r2.f[15](e3)), t3, t3.length), (0, n.qW)(r2.f[20](r2.f[20](e3 + 4) + 8 * r2.f[15](e3) + 4), i3, i3.length), a2.M[15](e3, r2.f[15](e3) + 1);
    }
    return 0;
  }
}, 56024: (e2, t2, i2) => {
  i2.d(t2, { FP: () => m, _h: () => y, aH: () => A, rh: () => w, to: () => b, xj: () => g });
  var r2, a2 = i2(63939), s2 = i2(50932), n = (i2(36981), i2(9599), i2(55833)), o = i2(37837), c = i2(14686), d2 = i2(77231), h = i2(37815), l = i2(73749), u = i2(99991), f = i2(66788), p = i2(9705);
  function m() {
    const e3 = (0, o.Gy)(320);
    return y(e3), e3;
  }
  function g(e3) {
    b(e3), (0, o.Eb)(e3);
  }
  function v(e3) {
    const t3 = a2.f[20](e3);
    (0, h.Q7)(t3 + 16), (0, l.IH)(t3 + 12), (0, o.aI)(e3);
  }
  function A(e3, t3) {
    for (let i3 = 0; i3 < a2.f[15](e3 + 200); i3++) if (a2.f[15](a2.f[20](a2.f[20](e3 + 196) + 4 * i3)) === t3) return a2.f[20](a2.f[20](e3 + 196) + 4 * i3);
    return 0;
  }
  function y(e3) {
    a2.f[20](e3 + 64) !== e3 && (0, o.aI)(e3 + 64), (0, u.bl)(e3 + 288), (0, c.sO)(e3, 0, 320), s2.M[17](e3 + 104, d2.Dh), s2.M[17](e3 + 112, d2.Dh), s2.M[17](e3 + 232, d2.Dh), s2.M[17](e3 + 240, d2.Dh), s2.M[15](e3 + 256, -1), s2.M[15](e3 + 84, 1), s2.M[15](e3 + 92, 0), s2.M[15](e3 + 96, 1), s2.M[15](e3 + 80, -1), s2.M[20](e3 + 64, e3), s2.M[15](e3 + 212, 2), s2.M[15](e3 + 216, 2), s2.M[15](e3 + 220, 2), s2.M[15](e3 + 208, 0), s2.M[15](e3 + 224, 0), s2.M[15](e3 + 204, 0);
  }
  function w(e3, t3) {
    const i3 = (0, f.K0)(a2.f[15](e3 + 80)), r3 = a2.f[15](e3 + 292), c2 = i3 ? r3 : 1;
    let d3 = 0;
    if (!a2.f[15](e3 + 32)) {
      if (d3 = (0, f.f8)(a2.f[15](e3 + 80), r3, a2.f[15](e3 + 76), t3), d3 < 0) return d3;
      s2.M[15](e3 + 32, d3);
    }
    if (c2 > n.pu) {
      if (s2.M[20](e3 + 64, (0, o.sY)(4 * c2)), s2.M[20](e3 + 188, (0, o.sY)(4 * c2)), !a2.f[20](e3 + 188) || !a2.f[20](e3 + 64)) return (0, o.aI)(e3 + 64), (0, o.aI)(e3 + 188), p.gR;
      s2.M[15](e3 + 192, c2 - n.pu);
    } else s2.M[20](e3 + 64, e3);
    for (let t4 = 0; t4 < Math.min(c2, n.pu); t4++) {
      if (s2.M[20](e3 + 156 + 4 * t4, (0, h.D$)(a2.f[15](e3 + 32))), !a2.f[20](e3 + 156 + 4 * t4)) return b(e3), p.gR;
      s2.M[20](a2.f[20](e3 + 64) + 4 * t4, a2.f[20](a2.f[20](e3 + 156 + 4 * t4) + 4)), s2.M[20](e3 + 4 * t4, a2.f[20](a2.f[20](e3 + 156 + 4 * t4) + 4));
    }
    for (let t4 = 0; t4 < c2 - n.pu; t4++) {
      if (s2.M[20](a2.f[20](e3 + 188) + 4 * t4, (0, h.D$)(a2.f[15](e3 + 32))), !a2.f[20](a2.f[20](e3 + 188) + 4 * t4)) return b(e3), p.gR;
      s2.M[20](a2.f[20](e3 + 64) + 4 * (t4 + n.pu), a2.f[20](a2.f[20](a2.f[20](e3 + 188) + 4 * t4) + 4));
    }
  }
  function b(e3) {
    if (e3) {
      !(function(e4) {
        !(function(e5, t3) {
          const i3 = a2.f[15](t3), r3 = a2.f[20](e5);
          for (let e6 = 0; e6 < i3; e6++) v(r3 + 4 * e6);
          s2.M[15](t3, 0), (0, o.aI)(e5);
        })(e4 + 196, e4 + 200);
      })(e3);
      for (let t3 = 0; t3 < 8; t3++) (0, h.Q7)(e3 + 156 + 4 * t3);
      for (let t3 = 0; t3 < a2.f[15](e3 + 192); t3++) (0, h.Q7)(a2.f[20](e3 + 188) + 4 * t3);
      (0, o.aI)(e3 + 188), (0, l.IH)(e3 + 248), (0, h.Q7)(e3 + 260), (0, h.Q7)(e3 + 264), (0, h.Q7)(e3 + 284), y(e3);
    }
  }
  i2(97317), i2(38156), (function(e3) {
    e3[e3.UNIQUE = 1] = "UNIQUE";
  })(r2 || (r2 = {}));
}, 71517: (e2, t2, i2) => {
  i2.d(t2, { $W: () => m, E4: () => g, Is: () => A, NX: () => M, NZ: () => b, Ow: () => v, Pd: () => k, Qe: () => w, Un: () => l, Up: () => S, Zx: () => T, _5: () => y, fQ: () => p, iI: () => h, rN: () => P, rU: () => u, sn: () => f, zu: () => x });
  var r2 = i2(14686), a2 = i2(63939), s2 = i2(50932), n = (i2(47958), i2(37837)), o = i2(77231), c = i2(37815);
  const d2 = 64;
  function h(e3, t3) {
    return t3 ? (0, r2.JW)(a2.f[20](e3 + 24), a2.f[15](e3 + 28)) : (0, r2.s3)(a2.f[20](e3 + 24), a2.f[15](e3 + 28));
  }
  function l(e3, t3, i3) {
    const r3 = a2.f[15](t3), s3 = a2.f[20](e3);
    for (let e4 = 0; e4 < r3; e4++) if (a2.f[15](s3 + 12 * e4 + 8) === i3) return s3 + 12 * e4;
    return 0;
  }
  function u(e3, t3) {
    return l(e3 + 40, e3 + 44, t3);
  }
  function f(e3, t3, i3) {
    const r3 = a2.f[15](t3), s3 = a2.f[20](e3);
    for (let e4 = 0; e4 < r3; e4++) if (a2.f[15](s3 + 12 * e4 + 8) === i3) return true;
    return false;
  }
  function p(e3, t3) {
    return f(e3 + 40, e3 + 44, t3);
  }
  function m(e3, t3, i3, o2, c2) {
    const d3 = a2.f[15](t3), h2 = a2.f[20](e3);
    for (let e4 = 0; e4 < d3; e4++) if (a2.f[15](h2 + 12 * e4 + 8) === i3) return (0, n.Eb)(a2.f[20](h2 + 12 * e4)), s2.M[20](h2 + 12 * e4, o2), void s2.M[25](h2 + 12 * e4 + 4, c2);
    const l2 = 12 * (d3 + 1), u2 = (0, n.Gy)(l2);
    if (d3) for (let e4 = 0; e4 < d3; e4++) (0, r2.Mr)(u2 + 12 * e4, h2 + 12 * e4, 12);
    const f2 = u2 + 12 * d3;
    return s2.M[20](f2, o2), s2.M[15](f2 + 8, i3), s2.M[25](f2 + 4, c2), h2 && (0, n.Eb)(h2), s2.M[20](e3, u2), s2.M[15](t3, d3 + 1), f2;
  }
  function g(e3, t3, i3, a3) {
    const s3 = (0, n.sY)(a3 + d2);
    return (0, r2.sO)(s3 + a3, 0, d2), m(e3, t3, i3, s3, a3);
  }
  function v(e3, t3, i3, r3) {
    m(e3 + 40, e3 + 44, t3, i3, r3);
  }
  function A(e3, t3) {
    let i3 = -1;
    for (let r3 = 0; r3 < a2.f[15](e3 + 44); r3++) if (a2.f[15](a2.f[20](e3 + 40) + 12 * r3 + 8) === t3) {
      i3 = r3;
      break;
    }
    if (i3 > -1) if (1 === a2.f[15](e3 + 44)) (0, n.Eb)(a2.f[20](a2.f[20](e3 + 40))), (0, n.Eb)(a2.f[20](e3 + 40)), s2.M[20](e3 + 40, 0), s2.M[15](e3 + 44, 0);
    else {
      const t4 = 12 * (a2.f[15](e3 + 44) - 1), o2 = (0, n.Gy)(t4);
      for (let t5 = 0; t5 < a2.f[15](e3 + 44); t5++) t5 !== i3 ? (0, r2.Mr)(o2 + 12 * t5, a2.f[20](e3 + 40) + 12 * t5, 12) : (0, n.Eb)(a2.f[20](a2.f[20](e3 + 40) + 12 * t5));
      (0, n.Eb)(a2.f[20](e3 + 40)), s2.M[20](e3 + 40, o2), s2.M[15](e3 + 44, a2.f[15](e3 + 44) - 1);
    }
  }
  function y() {
    const e3 = (0, n.Gy)(88);
    return k(e3), e3;
  }
  function w(e3) {
    S(e3), (0, n.Eb)(e3);
  }
  function b(e3, t3) {
    const i3 = a2.f[20](e3), r3 = a2.f[15](t3);
    if (i3) {
      for (let e4 = 0; e4 < r3; e4++) (0, n.Eb)(a2.f[20](i3 + 12 * e4));
      (0, n.aI)(e3), s2.M[15](t3, 0);
    }
  }
  function k(e3) {
    s2.M[20](e3 + 24, 0), s2.M[15](e3 + 28, 0), s2.M[20](e3 + 40, 0), s2.M[15](e3 + 44, 0), s2.M[15](e3 + 32, o.N_), s2.M[17](e3 + 56, o.Dh), s2.M[17](e3 + 48, o.Dh), s2.M[15](e3 + 36, 0), s2.M[17](e3 + 16, o.Dh), s2.M[17](e3 + 8, o.Dh), s2.M[15](e3 + 76, o.SF), s2.M[15](e3 + 72, 1), s2.M[20](e3, 0);
  }
  function x(e3, t3) {
    return s2.M[15](e3 + 32, a2.f[15](t3 + 32)), s2.M[17](e3 + 56, a2.f[17](t3 + 56)), s2.M[17](e3 + 48, a2.f[17](t3 + 48)), s2.M[15](e3 + 36, a2.f[15](t3 + 36)), s2.M[17](e3 + 16, a2.f[17](t3 + 16)), s2.M[17](e3 + 8, a2.f[17](t3 + 8)), s2.M[20](e3 + 64, a2.f[20](t3 + 64)), s2.M[15](e3 + 76, a2.f[15](t3 + 76)), s2.M[15](e3 + 72, a2.f[15](t3 + 72)), s2.M[20](e3 + 68, 0), (0, c.us)(e3 + 68, a2.f[20](t3 + 68)), (function(e4, t4) {
      if (b(e4 + 40, e4 + 44), a2.f[15](t4 + 44)) {
        let i3 = 12;
        s2.M[20](e4 + 40, (0, n.Gy)(i3 * a2.f[15](t4 + 44)));
        for (let i4 = 0; i4 < a2.f[15](t4 + 44); i4++) s2.M[25](a2.f[20](e4 + 40) + 12 * i4 + 4, a2.f[25](a2.f[20](t4 + 40) + 12 * i4 + 4)), s2.M[15](a2.f[20](e4 + 40) + 12 * i4 + 8, a2.f[15](a2.f[20](t4 + 40) + 12 * i4 + 8)), s2.M[20](a2.f[20](e4 + 40) + 12 * i4, (0, n.sY)(a2.f[25](a2.f[20](t4 + 40) + 12 * i4 + 4))), (0, r2.Mr)(a2.f[20](a2.f[20](e4 + 40) + 12 * i4), a2.f[20](a2.f[20](t4 + 40) + 12 * i4), a2.f[25](a2.f[20](t4 + 40) + 12 * i4 + 4));
        s2.M[15](e4 + 44, a2.f[15](t4 + 44));
      }
    })(e3, t3), 0;
  }
  function I(e3, t3) {
    return (0, c.A6)(e3, t3 + d2), (0, r2.sO)(a2.f[20](a2.f[20](e3) + 4) + t3, 0, d2), 0;
  }
  function P(e3, t3) {
    return a2.f[20](e3) && (0, c.Q7)(e3), s2.M[20](e3, 0), x(e3, t3), !a2.f[20](t3) && a2.f[15](t3 + 28) ? (I(e3, a2.f[15](t3 + 28)), a2.f[15](t3 + 28) && (0, r2.Mr)(a2.f[20](a2.f[20](e3) + 4), a2.f[20](t3 + 24), a2.f[15](t3 + 28)), s2.M[20](e3 + 24, a2.f[20](a2.f[20](e3) + 4))) : a2.f[20](t3) && (s2.M[20](e3, (0, c.VG)(a2.f[20](t3))), s2.M[20](e3 + 24, a2.f[20](t3 + 24))), s2.M[15](e3 + 28, a2.f[15](t3 + 28)), 0;
  }
  function S(e3) {
    b(e3 + 40, e3 + 44), (0, c.Q7)(e3 + 68), a2.f[20](e3) ? (0, c.Q7)(e3) : a2.f[20](e3 + 24) && (0, n.Eb)(a2.f[20](e3 + 24)), k(e3);
  }
  function T(e3, t3) {
    a2.f[20](e3) && (0, c.Q7)(e3), s2.M[20](e3, 0), !a2.f[20](t3) && a2.f[15](t3 + 28) ? (I(e3, a2.f[15](t3 + 28)), a2.f[15](t3 + 28) && (0, r2.Mr)(a2.f[20](a2.f[20](e3) + 4), a2.f[20](t3 + 24), a2.f[15](t3 + 28)), s2.M[20](e3 + 24, a2.f[20](a2.f[20](e3) + 4))) : a2.f[20](t3) && (s2.M[20](e3, (0, c.VG)(a2.f[20](t3))), s2.M[20](e3 + 24, a2.f[20](t3 + 24))), s2.M[15](e3 + 28, a2.f[15](t3 + 28));
  }
  function M(e3, t3, i3) {
    a2.f[20](e3) ? (0, c.Q7)(e3) : a2.f[20](e3 + 24) && (0, n.Eb)(a2.f[20](e3 + 24)), s2.M[20](e3, (0, c.aw)(t3, i3 + d2)), s2.M[20](e3 + 24, t3), s2.M[15](e3 + 28, i3);
  }
}, 99991: (e2, t2, i2) => {
  i2.d(t2, { ML: () => h, bl: () => d2, xY: () => l });
  var r2 = i2(63939), a2 = i2(50932), s2 = i2(85103), n = i2(37837), o = i2(14686), c = i2(9705);
  function d2(e3) {
    2 == r2.f[15](e3) && (0, n.aI)(e3 + 8), (0, o.sO)(e3, 0, 24);
  }
  function h(e3, t3) {
    return t3 ? (a2.M[15](e3, 1), a2.M[15](e3 + 4, (0, s2.Xb)(t3)), a2.M[10](e3 + 8, t3), 0) : c.UY;
  }
  function l(e3, t3) {
    if (t3 <= 0) throw new Error("invalid channels");
    const i3 = (0, n.Gy)(24 * t3);
    for (let e4 = 0; e4 < t3; e4++) a2.M[15](i3 + 24 * e4, 768);
    a2.M[15](e3, 2), a2.M[15](e3 + 4, t3), a2.M[20](e3 + 8, i3);
  }
}, 71766: (e2, t2, i2) => {
  i2.d(t2, { Yi: () => h, dn: () => l });
  var r2 = i2(14686), a2 = i2(63939), s2 = i2(50932), n = (i2(36981), i2(9599), i2(37837)), o = i2(99991), c = i2(71517), d2 = i2(77231);
  function h(e3, t3) {
    s2.M[15](e3, a2.f[15](t3)), s2.M[15](e3 + 4, a2.f[15](t3 + 4)), s2.M[8](e3 + 8, a2.f[8](t3 + 8)), s2.M[15](e3 + 28, a2.f[15](t3 + 28)), s2.M[17](e3 + 32, a2.f[17](t3 + 32)), s2.M[15](e3 + 40, a2.f[15](t3 + 40)), s2.M[15](e3 + 44, a2.f[15](t3 + 44)), s2.M[15](e3 + 48, a2.f[15](t3 + 48)), s2.M[15](e3 + 52, a2.f[15](t3 + 52)), s2.M[15](e3 + 56, a2.f[15](t3 + 56)), s2.M[15](e3 + 60, a2.f[15](t3 + 60)), s2.M[15](e3 + 68, a2.f[15](t3 + 68)), s2.M[15](e3 + 64, a2.f[15](t3 + 64)), s2.M[15](e3 + 80, a2.f[15](t3 + 80)), s2.M[15](e3 + 84, a2.f[15](t3 + 84)), s2.M[15](e3 + 88, a2.f[15](t3 + 88)), s2.M[15](e3 + 92, a2.f[15](t3 + 92)), s2.M[15](e3 + 96, a2.f[15](t3 + 96)), s2.M[15](e3 + 100, a2.f[15](t3 + 100)), s2.M[15](e3 + 104, a2.f[15](t3 + 104)), (0, r2.Mr)(e3 + 112, t3 + 112, 24), s2.M[15](e3 + 136, a2.f[15](t3 + 136)), s2.M[15](e3 + 140, a2.f[15](t3 + 140)), s2.M[15](e3 + 144, a2.f[15](t3 + 144)), s2.M[15](e3 + 148, a2.f[15](t3 + 148)), s2.M[15](e3 + 152, a2.f[15](t3 + 152)), s2.M[15](e3 + 156, a2.f[15](t3 + 156)), s2.M[15](e3 + 160, a2.f[15](t3 + 160)), (0, r2.Mr)(e3 + 72, t3 + 72, 8), a2.f[20](t3 + 12) && (a2.f[20](e3 + 12) && (0, n.Eb)(a2.f[20](e3 + 12)), s2.M[20](e3 + 12, (0, n.sY)(a2.f[15](t3 + 16))), s2.M[15](e3 + 16, a2.f[15](t3 + 16)), (0, r2.Mr)(a2.f[20](e3 + 12), a2.f[20](t3 + 12), a2.f[15](t3 + 16))), a2.f[20](t3 + 20) && (function(e4, t4, i3, o2) {
      if (!i3) return;
      const c2 = (0, n.Gy)(12 * o2);
      for (let e5 = 0; e5 < o2; e5++) s2.M[15](c2 + 12 * e5 + 8, a2.f[15](i3 + 12 * e5 + 8)), s2.M[25](c2 + 12 * e5 + 4, a2.f[25](i3 + 12 * e5 + 4)), s2.M[20](c2 + 12 * e5, (0, n.sY)(a2.f[25](i3 + 12 * e5 + 4))), (0, r2.Mr)(a2.f[20](c2 + 12 * e5), a2.f[20](i3 + 12 * e5), a2.f[25](i3 + 12 * e5 + 4));
      s2.M[15](t4, o2), s2.M[20](e4, c2);
    })(e3 + 20, e3 + 24, a2.f[20](t3 + 20), a2.f[15](t3 + 24));
  }
  function l(e3) {
    e3 && ((function(e4) {
      a2.f[20](e4 + 12) && (0, n.aI)(e4 + 12), (0, o.bl)(e4 + 112), (0, c.NZ)(e4 + 20, e4 + 24), (0, r2.sO)(e4, 0, 168), s2.M[15](e4, -1), s2.M[15](e4 + 4, 0), s2.M[15](e4 + 28, -1), s2.M[15](e4 + 112, 0), s2.M[15](e4 + 80, 0), s2.M[15](e4 + 84, 0), s2.M[15](e4 + 88, 2), s2.M[15](e4 + 92, 2), s2.M[15](e4 + 96, 2), s2.M[15](e4 + 100, 0), s2.M[15](e4 + 64, 0), s2.M[15](e4 + 68, 1), s2.M[15](e4 + 72, 0), s2.M[15](e4 + 72, 1), s2.M[15](e4 + 48, d2.N_), s2.M[15](e4 + 52, d2.N_), s2.M[15](e4 + 160, 0);
    })(e3), (0, n.Eb)(e3));
  }
  i2(47958);
}, 85103: (e2, t2, i2) => {
  function r2(e3) {
    return e3 = (e3 = (858993459 & (e3 -= e3 >> 1 & 1431655765)) + (e3 >> 2 & 858993459)) + (e3 >> 4) & 252645135, (e3 += e3 >> 8) + (e3 >> 16) & 63;
  }
  function a2(e3) {
    return r2(Number(BigInt.asUintN(32, e3))) + r2(Number(BigInt.asUintN(32, e3 >> BigInt(32))));
  }
  function s2(e3) {
    const t3 = e3 / BigInt(1e3), i3 = e3 - t3 * BigInt(1e3);
    return Number(t3) + Number(i3) / 1e3;
  }
  i2.d(t2, { Xb: () => a2, yw: () => s2 });
}, 50315: (e2, t2, i2) => {
  i2.d(t2, { ZK: () => o, bE: () => c, p$: () => s2, zz: () => n });
  var r2 = i2(31865), a2 = i2(729);
  function s2(e3) {
    const t3 = new r2.A(e3, true), i3 = t3.readUint32(), a3 = t3.readUint32(), s3 = t3.readUint32(), n2 = t3.readUint32(), o2 = t3.readUint32(), c2 = t3.readUint32(), d2 = { scheme: i3, cryptByteBlock: a3, skipByteBlock: s3, keyId: t3.readBuffer(n2), iv: t3.readBuffer(o2), subsamples: [] };
    if (c2) for (let e4 = 0; e4 < c2; e4++) d2.subsamples.push({ bytesOfClearData: t3.readUint32(), bytesOfProtectedData: t3.readUint32() });
    return d2;
  }
  function n(e3) {
    const t3 = new Uint8Array(24 + e3.keyId.length + e3.iv.length + 8 * e3.subsamples.length), i3 = new a2.A(t3, true);
    return i3.writeUint32(e3.scheme), i3.writeUint32(e3.cryptByteBlock), i3.writeUint32(e3.skipByteBlock), i3.writeUint32(e3.keyId.length), i3.writeUint32(e3.iv.length), i3.writeUint32(e3.subsamples.length), i3.writeBuffer(e3.keyId), i3.writeBuffer(e3.iv), e3.subsamples.forEach((e4) => {
      i3.writeUint32(e4.bytesOfClearData), i3.writeUint32(e4.bytesOfProtectedData);
    }), t3;
  }
  function o(e3) {
    const t3 = new r2.A(e3, true), i3 = t3.readUint32(), a3 = [];
    for (let e4 = 0; e4 < i3; e4++) {
      const e5 = t3.readUint32(), i4 = t3.readUint32(), r3 = t3.readUint32(), s3 = t3.readUint32(), n2 = { systemId: t3.readBuffer(e5), keyIds: [], data: null };
      if (i4) for (let e6 = 0; e6 < i4; e6++) n2.keyIds.push(t3.readBuffer(r3));
      n2.data = t3.readBuffer(s3), a3.push(n2);
    }
    return a3;
  }
  function c(e3) {
    let t3 = 4;
    e3.forEach((e4) => {
      t3 += 16 + e4.systemId.length + e4.keyIds.length * (e4.keyIds.length ? e4.keyIds[0].length : 0) + e4.data.length;
    });
    const i3 = new Uint8Array(t3), r3 = new a2.A(i3, true);
    return r3.writeUint32(e3.length), e3.forEach((e4) => {
      r3.writeUint32(e4.systemId.length), r3.writeUint32(e4.keyIds.length), r3.writeUint32(e4.keyIds.length ? e4.keyIds[0].length : 0), r3.writeUint32(e4.data.length), r3.writeBuffer(e4.systemId), e4.keyIds.forEach((e5) => {
        r3.writeBuffer(e5);
      }), r3.writeBuffer(e4.data);
    }), i3;
  }
}, 23991: (e2, t2, i2) => {
  function r2(e3) {
    let t3 = 0, i3 = 0;
    for (; i3 < 32 && 0 === e3.readU1(); ) i3++;
    return t3 = e3.readU(i3), t3 += (1 << i3) - 1, t3;
  }
  function a2(e3) {
    let t3 = r2(e3);
    return t3 = 1 & t3 ? (t3 + 1) / 2 : -t3 / 2, t3;
  }
  i2.d(t2, { $x: () => a2, xb: () => r2 });
}, 39381: (e2, t2, i2) => {
  i2.d(t2, { E3: () => s2, Sg: () => d2, Y0: () => c, ht: () => o, r8: () => a2, yd: () => n });
  var r2 = i2(63939);
  function a2(e3) {
    return r2.f[2](e3);
  }
  function s2(e3) {
    return a2(e3 + 1) << 8 | a2(e3);
  }
  function n(e3) {
    return a2(e3) << 8 | a2(e3 + 1);
  }
  function o(e3) {
    return a2(e3) << 16 | a2(e3 + 1) << 8 | a2(e3 + 2);
  }
  function c(e3) {
    return s2(e3 + 2) << 16 | s2(e3);
  }
  function d2(e3) {
    return n(e3) << 16 | n(e3 + 2);
  }
}, 82774: (e2, t2, i2) => {
  i2.d(t2, { Cv: () => o, w8: () => a2 });
  var r2 = i2(50932);
  function a2(e3, t3) {
    r2.M[2](e3, 255 & t3);
  }
  function s2(e3, t3) {
    a2(e3, t3 >>> 8), a2(e3 + 1, t3);
  }
  function n(e3, t3) {
    s2(e3, t3 >>> 16), s2(e3 + 2, 65535 & t3);
  }
  function o(e3, t3) {
    n(e3, Number(BigInt.asUintN(32, t3 >> BigInt(32)))), n(e3 + 4, Number(BigInt.asUintN(32, t3)));
  }
}, 37837: (e2, t2, i2) => {
  i2.d(t2, { Eb: () => l, Gy: () => h, aI: () => u, cz: () => f, sY: () => d2 });
  var r2 = i2(11473), a2 = i2(63939), s2 = i2(50932), n = i2(14686), o = i2(4624);
  const c = "src/avutil/util/mem.ts";
  function d2(e3) {
    const t3 = r2.s_.malloc(e3);
    return t3 || o.h2("can not alloc buffer", c, 32), t3;
  }
  function h(e3) {
    const t3 = r2.s_.malloc(e3);
    return t3 || o.h2("can not alloc buffer", c, 40), (0, n.sO)(t3, 0, e3), t3;
  }
  function l(e3) {
    r2.s_.free(e3);
  }
  function u(e3) {
    r2.s_.free(a2.f[20](e3)), s2.M[20](e3, 0);
  }
  function f(e3, t3) {
    return r2.s_.realloc(e3, t3);
  }
}, 60264: (e2, t2, i2) => {
  i2.d(t2, { BN: () => p, Bs: () => o, Ky: () => c, Le: () => l, S9: () => f, nW: () => u, py: () => d2, wN: () => h });
  var r2 = i2(79630), a2 = i2(31865), s2 = i2(729), n = i2(72739);
  function o(e3) {
    return e3.length > 4 && 0 === e3[0] && 0 === e3[1] && (1 === e3[2] || 0 === e3[2] && 1 === e3[3]);
  }
  function c(e3, t3) {
    let i3 = 0;
    for (let r3 = t3; r3 < e3.length; r3++) switch (e3[r3]) {
      case 0:
        i3++;
        break;
      case 1:
        if (i3 >= 2) return { offset: r3 - Math.min(i3, 3), startCode: Math.min(i3 + 1, 4) };
        i3 = 0;
        break;
      default:
        i3 = 0;
    }
    return { offset: -1, startCode: 0 };
  }
  function d2(e3) {
    const t3 = [];
    e3 instanceof r2.A && (e3 = e3.subarray(0, e3.length, false));
    let i3 = c(e3, 0), a3 = { offset: -1, startCode: 0 };
    for (; a3 = c(e3, i3.offset + i3.startCode), a3.offset > -1; ) t3.push(e3.subarray(i3.offset + i3.startCode, a3.offset, true)), i3 = a3;
    return t3.push(e3.subarray(i3.offset + i3.startCode, void 0, true)), t3;
  }
  function h(e3, t3) {
    const i3 = [], r3 = new a2.A(e3);
    for (; r3.remainingSize() > 0; ) {
      let a3 = 0;
      a3 = 3 === t3 ? r3.readUint32() : 2 === t3 ? r3.readUint24() : 1 === t3 ? r3.readUint16() : r3.readUint8();
      const s3 = e3.subarray(Number(BigInt.asIntN(32, r3.getPos())), Number(BigInt.asIntN(32, r3.getPos())) + a3, true);
      r3.skip(a3), i3.push(s3);
    }
    return i3;
  }
  function l(e3, t3) {
    return e3.reduce((e4, i3, r3) => 0 === t3 ? e4 + 4 + i3.length : 1 === t3 ? e4 + 3 + i3.length : e4 + (r3 ? 3 : 4) + i3.length, 0);
  }
  function u(e3, t3, i3) {
    if (!i3) {
      let r4 = e3.reduce((e4, i4, r5) => 0 === t3 ? e4 + 4 + i4.length : 1 === t3 ? e4 + 3 + i4.length : e4 + (r5 ? 3 : 4) + i4.length, 0);
      i3 = new Uint8Array(r4);
    }
    const r3 = new s2.A(i3);
    return n.__(e3, (e4, i4) => {
      r3.writeUint8(0), r3.writeUint8(0), (0 === t3 || 2 === t3 && !i4) && r3.writeUint8(0), r3.writeUint8(1), r3.writeBuffer(e4);
    }), i3;
  }
  function f(e3, t3, i3) {
    if (!i3) {
      const r4 = e3.reduce((e4, i4) => e4 + t3 + 1 + i4.length, 0);
      i3 = new Uint8Array(r4);
    }
    const r3 = new s2.A(i3);
    return n.__(e3, (e4) => {
      3 === t3 ? r3.writeUint32(e4.length) : 2 === t3 ? r3.writeUint24(e4.length) : 1 === t3 ? r3.writeUint16(e4.length) : r3.writeUint8(e4.length), r3.writeBuffer(e4);
    }), i3;
  }
  function p(e3, t3 = 0, i3) {
    i3 || (i3 = e3.length);
    const r3 = new Uint8Array(e3.length);
    let a3 = 0, s3 = 0;
    for (let n2 = 0; n2 < e3.length; n2++) {
      if (n2 >= t3 && n2 < i3) if (0 === e3[n2]) a3++;
      else if (3 === e3[n2] && 2 === a3 && n2 + 1 < e3.length && e3[n2 + 1] <= 3) {
        if (n2++, n2 === e3.length) break;
        a3 = 0 === e3[n2] ? 1 : 0;
      } else a3 = 0;
      r3[s3++] = e3[n2];
    }
    return r3.slice(0, s3);
  }
}, 41654: (e2, t2, i2) => {
  function r2(e3) {
    const t3 = e3 >> BigInt(32), i3 = (e3 & BigInt(4294967295)) * BigInt(1e6) / BigInt(4294967295);
    return t3 * BigInt(1e6) + i3;
  }
  i2.d(t2, { q: () => r2 });
}, 95644: (e2, t2, i2) => {
  function r2(e3, t3, i3, r3) {
    if (e3 <= 0 || e3 > 64) return 0;
    if (t3) switch (e3) {
      case 32:
        return i3 ? 65556 : 65557;
      case 64:
        return i3 ? 65558 : 65559;
      default:
        return 0;
    }
    else if (e3 += 7, r3 & 1 << (e3 >>>= 3) - 1) switch (e3) {
      case 1:
        return 65540;
      case 2:
        return i3 ? 65537 : 65536;
      case 3:
        return i3 ? 65549 : 65548;
      case 4:
        return i3 ? 65545 : 65544;
      case 8:
        return i3 ? 65568 : 65567;
      default:
        return 0;
    }
    else switch (e3) {
      case 1:
        return 65541;
      case 2:
        return i3 ? 65539 : 65538;
      case 3:
        return i3 ? 65551 : 65550;
      case 4:
        return i3 ? 65547 : 65546;
      default:
        return 0;
    }
  }
  function a2(e3) {
    switch (e3) {
      case 69649:
        return 2;
      case 69648:
        return 3;
      case 69647:
      case 69633:
      case 69632:
      case 69645:
      case 69638:
        return 4;
      default:
        return (function(e4) {
          switch (e4) {
            case 86070:
            case 86071:
            case 69674:
            case 69644:
            case 69678:
            case 69651:
            case 69661:
            case 69677:
            case 69655:
            case 69664:
            case 69636:
            case 69675:
            case 69660:
            case 69646:
            case 69670:
              return 4;
            case 86089:
            case 86090:
            case 86091:
            case 86092:
            case 65543:
            case 65542:
            case 65571:
            case 65540:
            case 65563:
            case 65572:
            case 65541:
            case 81924:
            case 81926:
              return 8;
            case 65537:
            case 65566:
            case 65536:
            case 65554:
            case 65539:
            case 65538:
              return 16;
            case 65552:
            case 65549:
            case 65548:
            case 65564:
            case 65551:
            case 65550:
              return 24;
            case 65545:
            case 65544:
            case 65565:
            case 65547:
            case 65546:
            case 65556:
            case 65557:
            case 65570:
            case 65569:
              return 32;
            case 65558:
            case 65559:
            case 65568:
            case 65567:
              return 64;
            default:
              return 0;
          }
        })(e3);
    }
  }
  i2.d(t2, { MZ: () => a2, uU: () => r2 });
}, 38156: (e2, t2, i2) => {
  i2(97317), i2(77231), i2(37837);
}, 44328: (e2, t2, i2) => {
  i2.d(t2, { FP: () => c, Mr: () => o, iU: () => l, j2: () => h, k: () => n, lb: () => d2 });
  var r2 = i2(63939), a2 = i2(77231), s2 = i2(31658);
  function n(e3, t3, i3) {
    return e3 * BigInt(t3.num) * BigInt(i3.den) / (BigInt(t3.den) * BigInt(i3.num));
  }
  function o(e3, t3, i3) {
    return e3 * BigInt(r2.f[15](t3)) * BigInt(i3.den) / (BigInt(r2.f[15](t3 + 4)) * BigInt(i3.num));
  }
  function c(e3, t3, i3) {
    return e3 * BigInt(t3.num) * BigInt(r2.f[15](i3 + 4)) / (BigInt(t3.den) * BigInt(r2.f[15](i3)));
  }
  function d2(e3) {
    return e3.num / e3.den;
  }
  function h(e3, t3) {
    if (isNaN(19)) return { den: 0, num: 0 };
    if (Math.abs(e3) > a2.go + 3) return { den: 0, num: e3 < 0 ? -1 : 1 };
    const i3 = e3 > 1 ? { den: Math.floor(t3 / e3 + 0.5), num: t3 } : { den: t3, num: Math.floor(e3 * t3 + 0.5) };
    return l(i3), i3;
  }
  function l(e3) {
    const t3 = (0, s2.A)(e3.num, e3.den);
    t3 <= 1 || (e3.den /= t3, e3.num /= t3);
  }
}, 66788: (e2, t2, i2) => {
  i2.d(t2, { K0: () => n, f8: () => o });
  var r2 = i2(77231), a2 = i2(95073), s2 = (i2(37837), i2(58055));
  function n(e3) {
    return !(e3 < 0 || e3 >= 12) && s2.J[e3].planar;
  }
  function o(e3, t3, i3, o2) {
    const c = (function(e4) {
      return e4 < 0 || e4 >= 12 ? 0 : s2.J[e4].bits >> 3;
    })(e3), d2 = n(e3);
    return !c || i3 <= 0 || t3 <= 0 ? -1 : (o2 || (o2 = 1, i3 = (0, a2.A)(i3, 32)), t3 > r2.go / o2 || t3 * i3 > (r2.go - o2 * t3) / c ? -1 : d2 ? (0, a2.A)(i3 * c, o2) : (0, a2.A)(i3 * c * t3, o2));
  }
}, 71762: (e2, t2, i2) => {
  i2.d(t2, { T8: () => l, Wu: () => h, r0: () => d2, wm: () => c });
  var r2 = i2(63939), a2 = i2(50932), s2 = i2(14686), n = i2(71517), o = i2(37837);
  function c(e3) {
    const t3 = { pts: r2.f[17](e3 + 8), dts: r2.f[17](e3 + 16), data: (0, n.iI)(e3).slice(), streamIndex: r2.f[15](e3 + 32), flags: r2.f[15](e3 + 36), sideData: [], duration: r2.f[17](e3 + 48), pos: r2.f[17](e3 + 56), timeBase: { den: r2.f[15](e3 + 76), num: r2.f[15](e3 + 72) } };
    for (let i3 = 0; i3 < r2.f[15](e3 + 44); i3++) {
      const a3 = { type: r2.f[15](r2.f[20](e3 + 40) + 12 * i3 + 8), data: (0, s2.s3)(r2.f[20](r2.f[20](e3 + 40) + 12 * i3), r2.f[25](r2.f[20](e3 + 40) + 12 * i3 + 4)).slice() };
      t3.sideData.push(a3);
    }
    return t3;
  }
  function d2(e3, t3 = 0) {
    t3 || (t3 = (0, n._5)()), a2.M[17](t3 + 8, e3.pts), a2.M[17](t3 + 16, e3.dts);
    const i3 = (0, o.sY)(e3.data.length);
    if ((0, s2.lW)(i3, e3.data.length, e3.data), (0, n.NX)(t3, i3, e3.data.length), a2.M[15](t3 + 32, e3.streamIndex), a2.M[15](t3 + 36, e3.flags), a2.M[17](t3 + 48, e3.duration), a2.M[17](t3 + 56, e3.pos), a2.M[15](t3 + 76, e3.timeBase.den), a2.M[15](t3 + 72, e3.timeBase.num), e3.sideData.length) for (let i4 = 0; i4 < e3.sideData.length; i4++) {
      const r3 = (0, o.sY)(e3.sideData[i4].data.length);
      (0, s2.lW)(r3, e3.sideData[i4].data.length, e3.sideData[i4].data), (0, n.Ow)(t3, e3.sideData[i4].type, r3, e3.sideData[i4].data.length);
    }
    else (0, n.NZ)(t3 + 40, t3 + 44);
    return t3;
  }
  function h(e3) {
    const t3 = { codecType: r2.f[15](e3), codecId: r2.f[15](e3 + 4), codecTag: r2.f[8](e3 + 8), extradata: null, codedSideData: [], format: r2.f[15](e3 + 28), bitrate: r2.f[17](e3 + 32), bitsPerCodedSample: r2.f[15](e3 + 40), bitsPerRawSample: r2.f[15](e3 + 44), profile: r2.f[15](e3 + 48), level: r2.f[15](e3 + 52), width: r2.f[15](e3 + 56), height: r2.f[15](e3 + 60), sampleAspectRatio: { den: r2.f[15](e3 + 68), num: r2.f[15](e3 + 64) }, framerate: { den: r2.f[15](e3 + 76), num: r2.f[15](e3 + 72) }, fieldOrder: r2.f[15](e3 + 80), colorRange: r2.f[15](e3 + 84), colorPrimaries: r2.f[15](e3 + 88), colorTrc: r2.f[15](e3 + 92), colorSpace: r2.f[15](e3 + 96), chromaLocation: r2.f[15](e3 + 100), videoDelay: r2.f[15](e3 + 104), chLayout: { order: r2.f[15](e3 + 112), nbChannels: r2.f[15](e3 + 116), u: r2.f[10](e3 + 120) }, sampleRate: r2.f[15](e3 + 136), blockAlign: r2.f[15](e3 + 140), frameSize: r2.f[15](e3 + 144), initialPadding: r2.f[15](e3 + 148), trailingPadding: r2.f[15](e3 + 152), seekPreroll: r2.f[15](e3 + 156), flags: r2.f[15](e3 + 160) };
    r2.f[15](e3 + 16) && (t3.extradata = (0, s2.s3)(r2.f[20](e3 + 12), r2.f[15](e3 + 16)).slice());
    for (let i3 = 0; i3 < r2.f[15](e3 + 24); i3++) {
      const a3 = { type: r2.f[15](r2.f[20](e3 + 20) + 12 * i3 + 8), data: (0, s2.s3)(r2.f[20](r2.f[20](e3 + 20) + 12 * i3), r2.f[25](r2.f[20](e3 + 20) + 12 * i3 + 4)).slice() };
      t3.codedSideData.push(a3);
    }
    return t3;
  }
  function l(e3, t3 = 0) {
    if (t3 || (t3 = (0, o.sY)(168), (0, s2.sO)(t3, 0, 168)), a2.M[15](t3, e3.codecType), a2.M[15](t3 + 4, e3.codecId), a2.M[8](t3 + 8, e3.codecTag), e3.extradata && (r2.f[20](t3 + 12) && (0, o.Eb)(r2.f[20](t3 + 12)), a2.M[20](t3 + 12, (0, o.sY)(e3.extradata.length)), (0, s2.lW)(r2.f[20](t3 + 12), e3.extradata.length, e3.extradata), a2.M[15](t3 + 16, e3.extradata.length)), e3.codedSideData.length) for (let i3 = 0; i3 < e3.codedSideData.length; i3++) {
      const r3 = (0, o.sY)(e3.codedSideData[i3].data.length);
      (0, s2.lW)(r3, e3.codedSideData[i3].data.length, e3.codedSideData[i3].data), (0, n.$W)(t3 + 20, t3 + 24, e3.codedSideData[i3].type, r3, e3.codedSideData[i3].data.length);
    }
    else (0, n.NZ)(t3 + 20, t3 + 24);
    return a2.M[15](t3 + 28, e3.format), a2.M[17](t3 + 32, e3.bitrate), a2.M[15](t3 + 40, e3.bitsPerCodedSample), a2.M[15](t3 + 44, e3.bitsPerRawSample), a2.M[15](t3 + 48, e3.profile), a2.M[15](t3 + 52, e3.level), a2.M[15](t3 + 56, e3.width), a2.M[15](t3 + 60, e3.height), a2.M[15](t3 + 68, e3.sampleAspectRatio.den), a2.M[15](t3 + 64, e3.sampleAspectRatio.num), a2.M[15](t3 + 76, e3.framerate.den), a2.M[15](t3 + 72, e3.framerate.num), a2.M[15](t3 + 80, e3.fieldOrder), a2.M[15](t3 + 84, e3.colorRange), a2.M[15](t3 + 88, e3.colorPrimaries), a2.M[15](t3 + 92, e3.colorTrc), a2.M[15](t3 + 96, e3.colorSpace), a2.M[15](t3 + 100, e3.chromaLocation), a2.M[15](t3 + 104, e3.videoDelay), a2.M[15](t3 + 112, e3.chLayout.order), a2.M[15](t3 + 116, e3.chLayout.nbChannels), a2.M[10](t3 + 120, e3.chLayout.u), a2.M[15](t3 + 136, e3.sampleRate), a2.M[15](t3 + 140, e3.blockAlign), a2.M[15](t3 + 144, e3.frameSize), a2.M[15](t3 + 148, e3.initialPadding), a2.M[15](t3 + 152, e3.trailingPadding), a2.M[15](t3 + 156, e3.seekPreroll), a2.M[15](t3 + 160, e3.flags), t3;
  }
  i2(77162);
}, 95007: (e2, t2, i2) => {
  i2.d(t2, { A: () => f });
  var r2 = i2(134), a2 = i2(95335), s2 = i2(72739), n = i2(73783), o = i2(7417), c = i2(4624);
  const d2 = "src/cheap/allocator/AllocatorJS.ts", h = v(16), l = 32, u = 68;
  class f {
    constructor(e3, t3 = true) {
      var i3, s3, n2, o2;
      (0, r2.A)(this, "buffer", void 0), (0, r2.A)(this, "byteOffset", void 0), (0, r2.A)(this, "heapOffset", void 0), (0, r2.A)(this, "heapLength", void 0), (0, r2.A)(this, "int32Array", void 0), (0, r2.A)(this, "updates", void 0), (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "shared", void 0), (0, r2.A)(this, "handles", void 0), this.options = a2.X$({ growSize: 1048576, maxHeapSize: 2097152e3 }, e3), this.handles = [], this.buffer = e3.buffer, this.shared = false, this.options.memory || this.buffer instanceof ArrayBuffer || this.buffer instanceof SharedArrayBuffer ? (this.byteOffset = null !== (i3 = e3.byteOffset) && void 0 !== i3 ? i3 : 0, this.heapOffset = y(this.byteOffset + g(l), null !== (s3 = e3.byteLength) && void 0 !== s3 ? s3 : this.buffer.byteLength), this.heapLength = w((null !== (n2 = e3.byteLength) && void 0 !== n2 ? n2 : this.buffer.byteLength) - this.heapOffset), this.int32Array = new Int32Array(this.buffer, this.heapOffset, v(this.heapLength)), this.updates = new Int32Array(this.buffer, this.byteOffset, l), "function" == typeof SharedArrayBuffer && this.buffer instanceof SharedArrayBuffer && (this.shared = true)) : c.h2("Expected buffer to be an instance of Buffer or ArrayBuffer", d2, 109), t3 && (this.updates.fill(1), (function(e4) {
        return 65 === e4[0] && 65 === e4[66];
      })(o2 = this.int32Array) || (function(e4) {
        const t4 = e4.length - 69;
        x(e4, 65, 1), e4[1] = 1, e4[3] = 68;
        for (let t5 = 1; t5 < l; t5++) e4[3 + t5] = 1;
        x(e4, t4, 68), e4[68] = 1, e4[70] = 1;
      })(o2), (function(e4) {
        let t4 = u;
        for (; t4 < e4.length - 1; ) {
          const i4 = k(e4, t4);
          i4 < 2 || i4 >= e4.length - u ? c.h2("Got invalid sized chunk at ".concat(g(t4), " (").concat(g(i4), " bytes)."), d2, 565) : S(e4, t4) ? p(e4, t4, i4) : m(e4, t4, i4), t4 += i4 + 2;
        }
      })(this.int32Array));
    }
    addUpdateHandle(e3) {
      s2.zy(this.handles, e3) || this.handles.push(e3);
    }
    removeUpdateHandle(e3) {
      s2.TF(this.handles, e3);
    }
    malloc_(e3) {
      (e3 = A(e3, 7)) < 16 && (e3 = 16);
      const t3 = v(e3), i3 = this.findFreeBlock(this.int32Array, t3);
      if (i3 <= 1) return 0;
      const r3 = k(this.int32Array, i3);
      return r3 - (t3 + 2) >= h ? (function(e4, t4, i4, r4, a3) {
        const s3 = t4 + i4 + 2, n2 = r4 - (s3 - t4);
        P(e4, t4, r4, a3), e4[t4 - 1] = -i4, e4[t4 + i4] = -i4, e4[s3 - 1] = -n2, e4[s3 + n2] = -n2, B(e4, s3, n2, a3);
      })(this.int32Array, i3, t3, r3, this.updates) : P(this.int32Array, i3, r3, this.updates), g(i3) + this.heapOffset;
    }
    malloc(e3) {
      this.shared && ((0, n.s2)(o.II, true), this.checkBuffer());
      const t3 = this.malloc_(e3);
      return this.shared && (0, n.Tl)(o.II), t3;
    }
    calloc_(e3, t3) {
      let i3 = e3 * t3;
      i3 = i3 < 16 ? 16 : A(i3, 7);
      const r3 = this.malloc_(i3);
      if (0 === r3) return 0;
      const a3 = v(r3 - this.heapOffset);
      return this.int32Array.subarray(a3, a3 + v(i3)).fill(0), r3;
    }
    calloc(e3, t3) {
      this.shared && ((0, n.s2)(o.II, true), this.checkBuffer());
      const i3 = this.calloc_(e3, t3);
      return this.shared && (0, n.Tl)(o.II), i3;
    }
    realloc_(e3, t3) {
      if (0 === e3) return this.malloc_(t3);
      const i3 = e3;
      if (0 === t3) return this.free_(i3), 0;
      let r3 = v(e3 -= this.heapOffset), a3 = r3, s3 = 0;
      T(this.int32Array, r3) && (a3 = this.int32Array[r3 - 1], s3 = r3 - a3);
      const n2 = k(this.int32Array, a3) - s3;
      if (n2 >= v(A(t3, 7))) return i3;
      {
        const e4 = this.malloc_(t3);
        return 0 === e4 ? (this.free_(i3), 0) : (this.int32Array.set(this.int32Array.subarray(r3, r3 + n2), v(e4 - this.heapOffset)), this.free_(i3), e4);
      }
    }
    realloc(e3, t3) {
      return this.shared && ((0, n.s2)(o.II, true), this.checkBuffer()), e3 = this.realloc_(e3, t3), this.shared && (0, n.Tl)(o.II), e3;
    }
    alignedAlloc_(e3, t3) {
      if (e3 <= 8) return this.malloc_(t3);
      const i3 = this.malloc_(t3 + e3 - 1 + 4);
      if (0 === i3) return 0;
      const r3 = i3 + e3 - 1 + 4 & ~(e3 - 1);
      return this.int32Array[v(r3 - this.heapOffset) - 1] = v(i3 - this.heapOffset), r3;
    }
    alignedAlloc(e3, t3) {
      this.shared && ((0, n.s2)(o.II, true), this.checkBuffer());
      const i3 = this.alignedAlloc_(e3, t3);
      return this.shared && (0, n.Tl)(o.II), i3;
    }
    free_(e3) {
      if (0 === e3) return;
      let t3 = v(e3 -= this.heapOffset);
      if (T(this.int32Array, t3) && (t3 = this.int32Array[t3 - 1]), S(this.int32Array, t3)) return;
      const i3 = k(this.int32Array, t3), r3 = M(this.int32Array, t3), a3 = (function(e4, t4) {
        const i4 = k(e4, t4);
        if (t4 + i4 + 2 >= e4.length - 2) return 0;
        const r4 = t4 + i4 + 2;
        return e4[r4 - 1] < 2 ? 0 : r4;
      })(this.int32Array, t3);
      0 !== r3 ? 0 !== a3 ? (function(e4, t4, i4, r4, a4, s3) {
        const n2 = k(e4, t4), o2 = k(e4, a4), c2 = a4 - t4 + o2;
        P(e4, t4, n2, s3), P(e4, a4, o2, s3), e4[t4 - 1] = -c2, e4[a4 + o2] = -c2, B(e4, t4, c2, s3);
      })(this.int32Array, r3, 0, 0, a3, this.updates) : R(this.int32Array, r3, t3, i3, this.updates) : 0 !== a3 ? (function(e4, t4, i4, r4, a4) {
        const s3 = k(e4, t4);
        P(e4, t4, s3, a4);
        const n2 = r4 + s3 + 2;
        e4[i4 - 1] = -n2, e4[t4 + s3] = -n2, B(e4, i4, n2, a4);
      })(this.int32Array, a3, t3, i3, this.updates) : B(this.int32Array, t3, i3, this.updates);
    }
    free(e3) {
      this.shared && ((0, n.s2)(o.II, true), this.checkBuffer()), this.free_(e3), this.shared && (0, n.Tl)(o.II);
    }
    sizeof(e3) {
      if (0 === e3) return 0;
      let t3 = v(e3 -= this.heapOffset);
      return T(this.int32Array, t3) && (t3 = this.int32Array[t3 - 1]), g(k(this.int32Array, t3));
    }
    inspect() {
      return this.checkBuffer(), (function(e3, t3) {
        const i3 = [], r3 = b(e3, 1, t3);
        let a3 = u, s3 = 0;
        for (; a3 < e3.length - 1; ) {
          const r4 = k(e3, a3);
          (r4 < 2 || r4 >= e3.length) && c.h2("Got invalid sized chunk at ".concat(g(a3), " (").concat(g(r4), ")"), d2, 621), S(e3, a3) ? i3.push(b(e3, a3, t3)) : (s3 += g(r4), i3.push({ type: "used", block: a3, offset: g(a3) + t3, size: g(r4) })), a3 += r4 + 2;
        }
        return { header: r3, blocks: i3, total: g(e3.length), used: s3 };
      })(this.int32Array, this.heapOffset);
    }
    findFreeBlock(e3, t3) {
      let i3 = (function(e4, t4) {
        let i4 = 1;
        for (let r4 = e4[1]; r4 > 0; r4--) {
          let a4 = e4[i4 + 2 + (r4 - 1)];
          for (; 1 !== a4 && e4[a4 - 1] < t4; ) i4 = a4, a4 = e4[i4 + 2 + (r4 - 1)];
        }
        return i4 = e4[i4 + 2], i4;
      })(e3, t3);
      if (1 === i3) {
        if (this.options.growAllowed && this.heapLength < this.options.maxHeapSize) {
          const e4 = this.int32Array.length + 1;
          let i4, o2, c2 = 0, d3 = 0, h2 = 0;
          if (this.options.onResize) {
            var r3, a3, n2;
            const e5 = this.options.onResize(this.int32Array, this.int32Array.byteLength + A(Math.max(this.options.growSize, g(t3)), 7));
            c2 = null !== (r3 = e5.byteOffset) && void 0 !== r3 ? r3 : 0, h2 = y(c2 + g(l), null !== (a3 = e5.byteLength) && void 0 !== a3 ? a3 : e5.buffer.byteLength), d3 = w((null !== (n2 = e5.byteLength) && void 0 !== n2 ? n2 : e5.buffer.byteLength) - h2), i4 = new Int32Array(e5.buffer, h2, v(d3)), o2 = new Int32Array(e5.buffer, c2, l);
          } else {
            const e5 = new ArrayBuffer(this.int32Array.length + v(this.options.growSize));
            h2 = y(c2 + g(l), e5.byteLength), d3 = w(e5.byteLength - h2), i4 = new Int32Array(e5, h2, v(d3)), i4.set(this.int32Array, 0), o2 = new Int32Array(e5, c2, l);
          }
          this.byteOffset = c2, this.heapOffset = h2, this.buffer = i4.buffer, this.heapLength = d3, this.int32Array = i4, this.updates = o2;
          const u2 = i4.length - (e4 - 1) - 2;
          x(i4, u2, e4);
          const f2 = M(i4, e4);
          return 0 !== f2 ? R(i4, f2, e4, u2, this.updates) : B(i4, e4, u2, this.updates), this.handles.length && s2.__(this.handles, (e5) => {
            e5(this.buffer);
          }), this.findFreeBlock(this.int32Array, t3);
        }
        return i3;
      }
      return i3;
    }
    getBuffer() {
      return this.buffer;
    }
    isAlloc(e3) {
      this.shared && ((0, n.s2)(o.II, true), this.checkBuffer());
      const t3 = v(e3 - this.heapOffset);
      let i3 = this.int32Array[3];
      for (; i3 && 1 !== i3; ) {
        if (t3 >= i3 && t3 < i3 + this.int32Array[i3 - 1]) return this.shared && (0, n.Tl)(o.II), false;
        i3 = this.int32Array[i3 + 2];
      }
      return this.shared && (0, n.Tl)(o.II), true;
    }
    checkBuffer() {
      this.options.memory && this.options.memory.buffer !== this.buffer && (this.buffer = this.options.memory.buffer, this.heapLength = w(this.buffer.byteLength - this.heapOffset), this.int32Array = new Int32Array(this.buffer, this.heapOffset, v(this.heapLength)));
    }
  }
  function p(e3, t3, i3) {
    e3[t3 - 1] !== e3[t3 + i3] && c.h2("Block length header does not match footer (".concat(g(e3[t3 - 1]), " vs ").concat(g(e3[t3 + i3]), ")."), d2, 581);
    const r3 = e3[t3 + 0];
    (r3 < 1 || r3 > l) && c.h2("Block ".concat(g(t3), " height must be between 1 and 32, got ").concat(r3, "."), d2, 586);
    for (let i4 = 0; i4 < r3; i4++) {
      const r4 = e3[t3 + 2 + i4];
      r4 >= u && !S(e3, r4) && c.h2("Block ".concat(g(t3), " has a pointer to a non-free block (").concat(g(r4), ")."), d2, 592);
    }
    return true;
  }
  function m(e3, t3, i3) {
    if (e3[t3 - 1] === e3[t3 + i3]) return true;
    c.h2("Block length header does not match footer (".concat(g(e3[t3 - 1]), " vs ").concat(g(e3[t3 + i3]), ")."), d2, 601);
  }
  function g(e3) {
    return e3 << 2 >>> 0;
  }
  function v(e3) {
    return e3 >>> 2;
  }
  function A(e3, t3) {
    return (e3 + t3 & ~t3) >>> 0;
  }
  function y(e3, t3) {
    const i3 = t3 - e3;
    return e3 + (A(i3, 7) === i3 ? 0 : i3 - A(i3, 7) + 8);
  }
  function w(e3) {
    return e3 - 4;
  }
  function b(e3, t3, i3) {
    const r3 = e3[t3 + 0], a3 = [];
    for (let i4 = 0; i4 < r3; i4++) a3.push(e3[t3 + 2 + i4]);
    return { type: "free", block: t3, offset: g(t3) + i3, height: r3, pointers: a3, size: g(e3[t3 - 1]) };
  }
  function k(e3, t3) {
    const i3 = e3[t3 - 1], r3 = i3 >> 31;
    return i3 + r3 ^ r3;
  }
  function x(e3, t3, i3) {
    e3[i3 - 1] = t3, e3[i3 + t3] = t3;
  }
  function I(e3, t3, i3) {
    let r3 = 1;
    for (let a3 = e3[1]; a3 > 0; a3--) {
      let s3 = r3 + 2 + (a3 - 1);
      for (; e3[s3] >= u && e3[e3[s3] - 1] < t3; ) r3 = e3[s3], s3 = r3 + 2 + (a3 - 1);
      i3[a3 - 1] = r3;
    }
  }
  function P(e3, t3, i3, r3) {
    I(e3, i3, r3);
    let a3 = e3[r3[0] + 2];
    for (; a3 !== t3 && 1 !== a3 && e3[a3 - 1] <= i3; ) {
      for (let i4 = e3[a3 + 0] - 1; i4 >= 0; i4--) e3[a3 + 2 + i4] === t3 && (r3[i4] = a3);
      a3 = e3[a3 + 2];
    }
    let s3 = e3[1];
    for (let i4 = 0; i4 < s3 && e3[r3[i4] + 2 + i4] === t3; i4++) e3[r3[i4] + 2 + i4] = e3[t3 + 2 + i4];
    for (; s3 > 0 && 1 === e3[s3 - 1 + 3]; ) s3--, e3[1] = s3;
    e3[t3 - 1] = -i3, e3[t3 + i3] = -i3;
  }
  function S(e3, t3) {
    return !(t3 < 65) && !(e3[t3 - 1] < 0);
  }
  function T(e3, t3) {
    return !(t3 < 65) && !(e3[t3 - 1] < 0);
  }
  function M(e3, t3) {
    if (t3 <= u) return 0;
    const i3 = e3[t3 - 2];
    return i3 < 2 ? 0 : t3 - (2 + i3);
  }
  function B(e3, t3, i3, r3) {
    I(e3, i3, r3);
    const a3 = (function(e4, t4, i4, r4) {
      const a4 = e4[1];
      let s3 = (function() {
        let e5 = 1;
        for (; Math.random() < 0.5 && e5 < l; ) e5 += 1;
        return e5;
      })();
      if (i4 - 1 < s3 + 1 && (s3 = i4 - 2), s3 > a4) {
        const i5 = a4 + 1;
        return e4[1] = i5, e4[i5 - 1 + 3] = 1, r4[i5] = 1, e4[t4 + 0] = i5, i5;
      }
      return e4[t4 + 0] = s3, s3;
    })(e3, t3, i3, r3);
    for (let i4 = 1; i4 <= a3; i4++) {
      const a4 = r3[i4 - 1] + 2 + (i4 - 1);
      e3[t3 + 2 + (i4 - 1)] = e3[a4], e3[a4] = t3, r3[i4 - 1] = 1;
    }
    return e3[t3 - 1] = i3, e3[t3 + i3] = i3, i3;
  }
  function R(e3, t3, i3, r3, a3) {
    const s3 = i3 - t3 + r3;
    return P(e3, t3, i3 - t3 - 2, a3), e3[t3 - 1] = -s3, e3[i3 + r3] = -s3, B(e3, t3, s3, a3), r3;
  }
}, 94321: (e2, t2, i2) => {
  i2.d(t2, { z: () => a2 });
  var r2 = i2(134);
  class a2 {
    constructor() {
      (0, r2.A)(this, "table", void 0), (0, r2.A)(this, "pointer", void 0), (0, r2.A)(this, "nodes", void 0), this.table = new WebAssembly.Table({ initial: 16, element: "anyfunc", address: "i32", index: "i32" }), this.pointer = 6, this.nodes = [{ pointer: this.pointer, length: 10, free: true }];
    }
    getPointer() {
      return this.pointer;
    }
    alloc(e3) {
      let t3 = this.findFree(e3);
      if (t3 < 0) {
        const i4 = this.nodes[this.nodes.length - 1], r3 = e3 - (i4.free ? i4.length : 0);
        this.table.grow(r3), i4.free ? i4.length = i4.length + r3 : this.nodes.push({ pointer: i4.pointer + i4.length, length: r3, free: true }), t3 = this.findFree(e3);
      }
      const i3 = this.nodes[t3];
      return i3.length > e3 && (this.nodes.splice(t3 + 1, 0, { pointer: i3.pointer + e3, length: i3.length - e3, free: true }), i3.length = e3), i3.free = false, i3.pointer;
    }
    free(e3) {
      let t3 = this.findNode(e3);
      const i3 = this.nodes[t3];
      if (i3 && !i3.free) {
        const e4 = this.nodes[t3 - 1], r3 = this.nodes[t3 + 1];
        e4 && e4.free ? r3 && r3.free ? (e4.length += i3.length + r3.length, this.nodes.splice(t3, 2)) : (e4.length += i3.length, this.nodes.splice(t3, 1)) : r3 && r3.free ? (i3.length += r3.length, this.nodes.splice(t3 + 1, 1), i3.free = true) : i3.free = true;
      }
      if (1 === this.nodes.length && this.nodes[0].free) {
        const e4 = new WebAssembly.Table({ initial: 16, element: "anyfunc", address: "i32", index: "i32" });
        this.pointer = 6, this.nodes = [{ pointer: this.pointer, length: 10, free: true }];
        for (let t4 = 1; t4 < this.pointer; t4++) e4.set(t4, this.table.get(t4));
        this.table = e4;
      }
    }
    get(e3) {
      return this.table.get(e3);
    }
    set(e3, t3) {
      if (e3 < 0 || e3 >= this.pointer) throw new RangeError("index out of bound");
      this.table.set(e3, t3);
    }
    inspect() {
      return this.nodes;
    }
    findFree(e3) {
      let t3 = -1;
      for (let i3 = 0; i3 < this.nodes.length; i3++) if (this.nodes[i3].length >= e3 && this.nodes[i3].free) {
        t3 = i3;
        break;
      }
      return t3;
    }
    findNode(e3) {
      let t3 = -1;
      for (let i3 = 0; i3 < this.nodes.length; i3++) if (this.nodes[i3].pointer === e3) {
        t3 = i3;
        break;
      }
      return t3;
    }
  }
}, 15541: (e2, t2, i2) => {
  i2.d(t2, { A: () => r2 });
  const r2 = "AGFzbQEAAAABLwlgAn9/AGACf34AYAJ/fQBgAn98AGABfwF/YAF/AX5gAX8BfWABfwF8YAN/f38AAhIBA2VudgZtZW1vcnkCAwGAgAQDERAAAAABAgMEBAQEBAUGBwgIB5YBEAZ3cml0ZTgAAAd3cml0ZTE2AAEHd3JpdGUzMgACB3dyaXRlNjQAAwh3cml0ZWYzMgAECHdyaXRlZjY0AAUFcmVhZDgABgZyZWFkVTgABwZyZWFkMTYACAdyZWFkVTE2AAkGcmVhZDMyAAoGcmVhZDY0AAsHcmVhZGYzMgAMB3JlYWRmNjQADQRmaWxsAA4EY29weQAPCpYBEAkAIAAgAToAAAsJACAAIAE7AQALCQAgACABNgIACwkAIAAgATcDAAsJACAAIAE4AgALCQAgACABOQMACwcAIAAsAAALBwAgAC0AAAsHACAALgEACwcAIAAvAQALBwAgACgCAAsHACAAKQMACwcAIAAqAgALBwAgACsDAAsLACAAIAEgAvwLAAsMACAAIAEgAvwKAAAL";
}, 98564: (e2, t2, i2) => {
  i2.d(t2, { Ts: () => l });
  var r2 = i2(4919), a2 = i2(4624), s2 = i2(63939), n = i2(50932), o = i2(88096), c = i2(15541);
  const d2 = "src/cheap/asm/memory.ts";
  let h;
  function l(e3, t3, i3) {
    try {
      const a3 = o.bx((0, r2.E_)(c.A), { shared: "function" == typeof SharedArrayBuffer && e3.buffer instanceof SharedArrayBuffer, initial: t3, maximum: i3 });
      h = new WebAssembly.Instance(new WebAssembly.Module(a3), { env: { memory: e3 } }), (0, s2.$)({ 4: h.exports.readU8, 5: h.exports.readU8, 2: h.exports.readU8, 3: h.exports.readU8, 6: h.exports.readU16, 7: h.exports.readU16, 8: (e4) => h.exports.read32(e4) >>> 0, 9: (e4) => h.exports.read32(e4) >>> 0, 10: (e4) => BigInt.asUintN(64, h.exports.read64(e4)), 22: (e4) => BigInt.asUintN(64, h.exports.read64(e4)), 11: h.exports.read8, 12: h.exports.read8, 13: h.exports.read16, 14: h.exports.read16, 15: h.exports.read32, 16: h.exports.read32, 17: h.exports.read64, 21: h.exports.read64, 18: h.exports.readf32, 19: h.exports.readf64, 20: (e4) => h.exports.read32(e4) >>> 0, 25: (e4) => h.exports.read32(e4) >>> 0 }), (0, n.$)({ 4: h.exports.write8, 5: h.exports.write8, 2: h.exports.write8, 3: h.exports.write8, 6: h.exports.write16, 7: h.exports.write16, 8: h.exports.write32, 9: h.exports.write32, 10: h.exports.write64, 22: h.exports.write64, 11: h.exports.write8, 12: h.exports.write8, 13: h.exports.write16, 14: h.exports.write16, 15: h.exports.write32, 16: h.exports.write32, 17: h.exports.write64, 21: h.exports.write64, 18: h.exports.writef32, 19: h.exports.writef64, 20: h.exports.write32, 25: h.exports.write32, copy: h.exports.copy, fill: h.exports.fill });
    } catch (e4) {
      a2.R8("memory asm not support, cannot use asm memory function", d2, 119);
    }
  }
}, 26429: (e2, t2, i2) => {
  i2.r(t2), i2.d(t2, { HEAP_INITIAL: () => p, HEAP_MAXIMUM: () => m, HEAP_OFFSET: () => f, STACK_ALIGNMENT: () => l, STACK_SIZE: () => u, USE_THREADS: () => h });
  var r2, a2, s2 = i2(95797), n = i2(10576), o = i2(86834), c = i2(44690);
  const d2 = n.TK, h = !!s2.A.thread && !d2.CHEAP_DISABLE_THREAD;
  let l = 16, u = 1048576;
  const f = 1024, p = null !== (r2 = d2.CHEAP_HEAP_INITIAL) && void 0 !== r2 ? r2 : 265, m = null !== (a2 = d2.CHEAP_HEAP_MAXIMUM) && void 0 !== a2 ? a2 : h && c.A.ios && !o.A.checkVersion(c.A.version, "17", true) ? 8192 : 65536;
}, 73281: (e2, t2, i2) => {
  i2.d(t2, { A: () => C });
  var r2 = i2(59135), a2 = i2(63939), s2 = i2(50932);
  let o;
  const c = (0, r2.A)();
  function d2(e3, t3) {
    o().setUint8(e3, t3);
  }
  function h(e3) {
    return o().getUint8(e3);
  }
  function l(e3, t3) {
    o().setUint16(e3, t3, c);
  }
  function u(e3) {
    return o().getUint16(e3, c);
  }
  function f(e3, t3) {
    o().setUint32(e3, t3, c);
  }
  function p(e3) {
    return o().getUint32(e3, c);
  }
  function m(e3, t3) {
    o().setBigUint64(e3, t3, c);
  }
  function g(e3) {
    return o().getBigUint64(e3, c);
  }
  function v(e3, t3) {
    o().setInt8(e3, t3);
  }
  function A(e3) {
    return o().getInt8(e3);
  }
  function y(e3, t3) {
    o().setInt16(e3, t3, c);
  }
  function w(e3) {
    return o().getInt16(e3, c);
  }
  function b(e3, t3) {
    o().setInt32(e3, t3, c);
  }
  function k(e3) {
    return o().getInt32(e3, c);
  }
  function x(e3, t3) {
    o().setBigInt64(e3, t3, c);
  }
  function I(e3) {
    return o().getBigInt64(e3, c);
  }
  function P(e3, t3) {
    o().setFloat32(e3, t3, c);
  }
  function S(e3) {
    return o().getFloat32(e3, c);
  }
  function T(e3, t3) {
    o().setFloat64(e3, t3, c);
  }
  function M(e3) {
    return o().getFloat64(e3, c);
  }
  function B(e3) {
    return o().getUint32(e3, c);
  }
  function R(e3, t3) {
    return o().setUint32(e3, t3, c);
  }
  function _(e3, t3) {
    o().setUint32(e3, t3, c);
  }
  function C(e3, t3) {
    o = t3, (0, a2.$)({ 4: h, 5: h, 2: h, 3: h, 6: u, 7: u, 8: p, 9: p, 10: g, 11: A, 12: A, 13: w, 14: w, 15: k, 16: k, 17: I, 18: S, 19: M, 20: B, 23: (e4) => !!A(e4), 24: (e4) => !!A(e4), 25: (e4) => (function(e5) {
      return o().getUint32(e5, c);
    })(e4) }), (0, s2.$)({ 4: d2, 5: d2, 2: d2, 3: d2, 6: l, 7: l, 8: f, 9: f, 10: m, 11: v, 12: v, 13: y, 14: y, 15: b, 16: b, 17: x, 18: P, 19: T, 20: R, 23: (e4, t4) => {
      v(e4, t4 ? 1 : 0);
    }, 24: (e4, t4) => {
      v(e4, t4 ? 1 : 0);
    }, 25: _ });
  }
}, 63939: (e2, t2, i2) => {
  i2.d(t2, { $: () => s2, f: () => a2 });
  var r2 = i2(95335);
  const a2 = { 4: function(e3) {
    throw new Error("unimplemented");
  }, 5: function(e3) {
    throw new Error("unimplemented");
  }, 2: function(e3) {
    throw new Error("unimplemented");
  }, 3: function(e3) {
    throw new Error("unimplemented");
  }, 6: function(e3) {
    throw new Error("unimplemented");
  }, 7: function(e3) {
    throw new Error("unimplemented");
  }, 8: function(e3) {
    throw new Error("unimplemented");
  }, 9: function(e3) {
    throw new Error("unimplemented");
  }, 10: function(e3) {
    throw new Error("unimplemented");
  }, 11: function(e3) {
    throw new Error("unimplemented");
  }, 12: function(e3) {
    throw new Error("unimplemented");
  }, 13: function(e3) {
    throw new Error("unimplemented");
  }, 14: function(e3) {
    throw new Error("unimplemented");
  }, 15: function(e3) {
    throw new Error("unimplemented");
  }, 16: function(e3) {
    throw new Error("unimplemented");
  }, 17: function(e3) {
    throw new Error("unimplemented");
  }, 18: function(e3) {
    throw new Error("unimplemented");
  }, 19: function(e3) {
    throw new Error("unimplemented");
  }, 20: function(e3) {
    throw new Error("unimplemented");
  }, 0: function(e3) {
    throw new Error("invalid operate");
  }, 1: function(e3) {
    throw new Error("invalid operate");
  }, 22: function(e3) {
    throw new Error("invalid operate");
  }, 21: function(e3) {
    throw new Error("invalid operate");
  }, 23: function(e3) {
    throw new Error("invalid operate");
  }, 24: function(e3) {
    throw new Error("invalid operate");
  }, 25: function(e3) {
    throw new Error("unimplemented");
  } };
  function s2(e3) {
    r2.X$(a2, e3);
  }
}, 50932: (e2, t2, i2) => {
  i2.d(t2, { $: () => s2, M: () => a2 });
  var r2 = i2(95335);
  const a2 = { 4: function(e3, t3) {
    throw new Error("unimplemented");
  }, 5: function(e3, t3) {
    throw new Error("unimplemented");
  }, 2: function(e3, t3) {
    throw new Error("unimplemented");
  }, 3: function(e3, t3) {
    throw new Error("unimplemented");
  }, 6: function(e3, t3) {
    throw new Error("unimplemented");
  }, 7: function(e3, t3) {
    throw new Error("unimplemented");
  }, 8: function(e3, t3) {
    throw new Error("unimplemented");
  }, 9: function(e3, t3) {
    throw new Error("unimplemented");
  }, 10: function(e3, t3) {
    throw new Error("unimplemented");
  }, 11: function(e3, t3) {
    throw new Error("unimplemented");
  }, 12: function(e3, t3) {
    throw new Error("unimplemented");
  }, 13: function(e3, t3) {
    throw new Error("unimplemented");
  }, 14: function(e3, t3) {
    throw new Error("unimplemented");
  }, 15: function(e3, t3) {
    throw new Error("unimplemented");
  }, 16: function(e3, t3) {
    throw new Error("unimplemented");
  }, 17: function(e3, t3) {
    throw new Error("unimplemented");
  }, 18: function(e3, t3) {
    throw new Error("unimplemented");
  }, 19: function(e3, t3) {
    throw new Error("unimplemented");
  }, 20: function(e3, t3) {
    throw new Error("unimplemented");
  }, 0: function(e3, t3) {
    throw new Error("invalid operate");
  }, 1: function(e3, t3) {
    throw new Error("invalid operate");
  }, 22: function(e3, t3) {
    throw new Error("invalid operate");
  }, 21: function(e3, t3) {
    throw new Error("invalid operate");
  }, 23: function(e3, t3) {
    throw new Error("invalid operate");
  }, 24: function(e3, t3) {
    throw new Error("invalid operate");
  }, 25: function(e3, t3) {
    throw new Error("unimplemented");
  }, copy: function(e3, t3, i3) {
    throw new Error("invalid operate");
  }, fill: function(e3, t3, i3) {
    throw new Error("invalid operate");
  } };
  function s2(e3) {
    r2.X$(a2, e3);
  }
}, 25323: (e2, t2, i2) => {
  i2.d(t2, { X: () => U, l: () => C });
  var r2 = i2(66681), a2 = i2.n(r2), s2 = i2(11919), n = i2.n(s2), o = i2(75019), c = i2.n(o), d2 = i2(99921), h = i2(63939), l = i2(50932), u = i2(61499), f = i2(6704), p = i2(67672), m = i2(95335), g = i2(62100), v = i2(72739);
  function A(e3, t3, i3, r3) {
    a2()(e3, t3, { get: i3, set: r3, configurable: true, enumerable: true });
  }
  function y(e3) {
    return function() {
      return h.f[20](e3());
    };
  }
  function w(e3, t3, i3, r3) {
    return function() {
      return e3["__$__".concat(t3)] || (e3["__$__".concat(t3)] = C(i3(), r3));
    };
  }
  function b(e3, t3) {
    return function() {
      return h.f[t3](e3());
    };
  }
  function k(e3, t3, i3, r3) {
    const a3 = 8 * f.i[t3] - r3 - i3, s3 = Math.pow(2, i3) - 1;
    return function() {
      return h.f[t3](e3()) >>> a3 & s3;
    };
  }
  function x(e3) {
    return function(t3) {
      l.M[20](e3(), t3);
    };
  }
  function I(e3, t3, i3, r3) {
    const a3 = "__$__".concat(t3);
    return function(t4) {
      const s3 = e3[a3] || (e3[a3] = C(i3(), r3));
      m.__(t4, (e4, t5) => {
        s3[t5] = e4;
      }), e3[a3] = s3;
    };
  }
  function P(e3, t3) {
    return function(i3) {
      l.M[t3](e3(), i3);
    };
  }
  function S(e3, t3, i3, r3) {
    let a3 = 0, s3 = 8 * f.i[t3];
    for (let e4 = 0; e4 < i3; e4++) a3 |= 1 << s3 - 1 - (e4 + r3);
    const n2 = Math.pow(2, i3) - 1, o2 = s3 - r3 - i3;
    return function(i4) {
      const r4 = e3(), s4 = h.f[t3](r4);
      l.M[t3](r4, s4 & ~a3 | (i4 & n2) << o2);
    };
  }
  function T(e3, t3, i3) {
    const r3 = {};
    let a3 = (0, d2.A)(i3);
    for (let s3 = 0; s3 < t3; s3++) {
      const t4 = (0, g.A)(s3);
      A(r3, t4, w(r3, t4, () => e3() + a3 * s3, i3), I(r3, t4, () => e3() + a3 * s3, i3));
    }
    return r3;
  }
  function M(e3, t3, i3) {
    const r3 = {};
    let a3 = (0, d2.A)(i3);
    for (let s3 = 0; s3 < t3; s3++) A(r3, (0, g.A)(s3), b(() => e3() + a3 * s3, i3), P(() => e3() + a3 * s3, i3));
    return r3;
  }
  function B(e3, t3, i3, r3, a3) {
    return function() {
      let s3 = t3["__$__".concat(i3)];
      return s3 || (s3 = p.Pc(a3) || p.Ik(a3) ? T(e3, r3, a3) : M(e3, r3, a3), t3["__$__".concat(i3)] = s3), s3[u.o9] = e3(), s3;
    };
  }
  function R(e3, t3, i3, r3, a3) {
    const s3 = "__$__".concat(t3);
    return function(t4) {
      let n2 = e3[s3] || T(i3, r3, a3);
      n2[u.o9] = i3(), v.__(t4, (e4, t5) => {
        n2[t5] = e4;
      }), e3[s3] = n2;
    };
  }
  function _(e3, t3, i3, r3, a3) {
    const s3 = "__$__".concat(t3);
    return function(t4) {
      let n2 = e3[s3] || M(i3, r3, a3);
      n2[u.o9] = i3(), v.__(t4, (e4, t5) => {
        n2[t5] = e4;
      }), e3[s3] = n2;
    };
  }
  function C(e3, t3) {
    let i3 = p.Pc(t3) ? t3.prototype : t3;
    const r3 = {};
    for (r3[u.o9] = e3, n()(r3, i3); ; ) {
      let e4 = i3[u.JY];
      if (e4 && e4.forEach((e5, t4) => {
        e5[3] ? e5[1] ? A(r3, t4, B(() => r3[u.o9] + e5[7], r3, t4, e5[4], e5[0]), _(r3, t4, () => r3[u.o9] + e5[7], e5[4], 20)) : p.Pc(e5[0]) || p.Ik(e5[0]) ? A(r3, t4, B(() => r3[u.o9] + e5[7], r3, t4, e5[4], e5[0]), R(r3, t4, () => r3[u.o9] + e5[7], e5[4], e5[0])) : A(r3, t4, B(() => r3[u.o9] + e5[7], r3, t4, e5[4], e5[0]), _(r3, t4, () => r3[u.o9] + e5[7], e5[4], e5[0])) : e5[1] ? A(r3, t4, y(() => r3[u.o9] + e5[7]), x(() => r3[u.o9] + e5[7])) : p.Pc(e5[0]) || p.Ik(e5[0]) ? A(r3, t4, w(r3, t4, () => r3[u.o9] + e5[7], e5[0]), I(r3, t4, () => r3[u.o9] + e5[7], e5[0])) : e5[5] ? A(r3, t4, k(() => r3[u.o9] + e5[7], e5[0], e5[6], e5[8]), S(() => r3[u.o9] + e5[7], e5[0], e5[6], e5[8])) : A(r3, t4, b(() => r3[u.o9] + e5[7], e5[0]), P(() => r3[u.o9] + e5[7], e5[0]));
      }), i3 = c()(i3), !i3) break;
    }
    return r3;
  }
  function U(e3) {
    let t3 = c()(e3);
    for (; ; ) {
      let i3 = t3[u.JY];
      if (i3 && i3.forEach((t4, i4) => {
        delete e3[i4];
      }), t3 = c()(t3), !t3) break;
    }
  }
}, 12085: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(66681), a2 = i2.n(r2);
  function s2(e3, t3, i3) {
    a2()(e3, t3, { value: i3, writable: false, enumerable: false, configurable: false });
  }
}, 11473: (e2, t2, i2) => {
  i2.d(t2, { GE: () => k, Lv: () => F, Tg: () => G, XI: () => P, ce: () => T, eq: () => g, pv: () => H, s_: () => S, wE: () => x });
  var r2 = i2(39638), a2 = i2(95007), s2 = i2(94321), n = i2(10576), o = i2(26429), c = i2(7417), d2 = i2(33856), h = i2(98564), l = i2(82854), u = i2(73281), f = i2(54568), p = i2(86834), m = i2(44690);
  let g, v, A, y = -1, b = "", k = null, x = null, I = 0, P = null, S = null, T = null, M = null, B = null, R = null, _ = null, C = null, U = null, D = null, E = null, L = null, z = { 5: C, 3: C, 7: U, 9: D, 22: E, 12: M, 14: B, 16: R, 21: _ };
  function $() {
    return !(!T || T.buffer === C.buffer);
  }
  function F() {
    return T.buffer;
  }
  function N() {
    return $() && W(T.buffer), C;
  }
  function V() {
    return $() && W(T.buffer), L;
  }
  function O(e3) {
    return $() && W(T.buffer), z[e3];
  }
  function q() {
    o.USE_THREADS ? (g = N, v = V, A = O) : (g = () => C, v = () => L, A = (e3) => z[e3]);
  }
  function W(e3) {
    M = new Int8Array(e3), B = new Int16Array(e3), R = new Int32Array(e3), _ = new BigInt64Array(e3), C = new Uint8Array(e3), U = new Uint16Array(e3), D = new Uint32Array(e3), E = new BigUint64Array(e3), L = new DataView(e3), z = { 5: C, 3: C, 7: U, 9: D, 22: E, 12: M, 14: B, 16: R, 21: _ };
  }
  function H() {
    return Atomics.add(D, c.hb >>> 2, 1);
  }
  async function G(e3) {
    var t3;
    q(), (0, u.A)(() => S, v), (0, d2.A)(A), T = e3.memory, e3.disableAsm || ("function" == typeof BigInt && BigInt !== Number && (p.A.chrome && p.A.checkVersion(p.A.majorVersion, "85", true) || p.A.firefox && p.A.checkVersion(p.A.majorVersion, "78", true) || p.A.safari && p.A.checkVersion(p.A.majorVersion, "15", true) || m.A.ios && p.A.checkVersion(m.A.version, "15", true) || p.A.newEdge) && h.Ts(T, o.HEAP_INITIAL, o.HEAP_MAXIMUM), (p.A.chrome && p.A.checkVersion(p.A.majorVersion, "85", true) || p.A.firefox && p.A.checkVersion(p.A.majorVersion, "78", true) || p.A.safari && p.A.checkVersion(p.A.majorVersion, "15", true) || m.A.ios && p.A.checkVersion(m.A.version, "15", true) || p.A.newEdge) && l.Ts(T, o.HEAP_INITIAL, o.HEAP_MAXIMUM));
    var i3;
    i3 = new a2.A({ buffer: T.buffer, memory: T, byteOffset: o.HEAP_OFFSET, maxHeapSize: 64 * o.HEAP_MAXIMUM * 1024, growAllowed: true, onResize: (e4, t4) => (T.grow(t4 - e4.byteLength >>> 16), { buffer: T.buffer, byteOffset: o.HEAP_OFFSET }) }, false), S && S.removeUpdateHandle(W), S = i3, n.TK.CHeap && (n.TK.CHeap.Allocator = S), S.addUpdateHandle(W), W(S.getBuffer()), e3.stackPointer && (I = e3.stackSize, x = e3.stackPointer, k = new WebAssembly.Global({ value: "i32", mutable: true }, x + I), P = new s2.z()), y = "number" == typeof e3.id ? e3.id : Atomics.add(D, c.hb >>> 2, 1), b = null !== (t3 = e3.name) && void 0 !== t3 ? t3 : "anonymous", n.TK.CHeap = { initThread: G, Allocator: S, Table: P, ThreadId: y, ThreadName: b, Memory: T, Config: o, StackSize: I, StackTop: x, StackPointer: k, isMainThread: false };
  }
  !(0, r2.A)() && !(0, f.A)() || (0, r2.A)() && !o.USE_THREADS ? (function() {
    var e3, t3, i3, r3, f2, g2, M2, B2;
    if (q(), (0, u.A)(() => S, v), (0, d2.A)(A), T = null !== (e3 = n.TK.CHeap) && void 0 !== e3 && e3.Memory ? n.TK.CHeap.Memory : new WebAssembly.Memory({ initial: o.HEAP_INITIAL, maximum: o.HEAP_MAXIMUM, shared: o.USE_THREADS, address: "i32", index: "i32" }), "function" == typeof BigInt && BigInt !== Number && (p.A.chrome && p.A.checkVersion(p.A.majorVersion, "85", true) || p.A.firefox && p.A.checkVersion(p.A.majorVersion, "78", true) || p.A.safari && p.A.checkVersion(p.A.majorVersion, "15", true) || m.A.ios && p.A.checkVersion(m.A.version, "15", true) || p.A.newEdge) && o.USE_THREADS && h.Ts(T, o.HEAP_INITIAL, o.HEAP_MAXIMUM), o.USE_THREADS && (p.A.chrome && p.A.checkVersion(p.A.majorVersion, "85", true) || p.A.firefox && p.A.checkVersion(p.A.majorVersion, "78", true) || p.A.safari && p.A.checkVersion(p.A.majorVersion, "15", true) || m.A.ios && p.A.checkVersion(m.A.version, "15", true) || p.A.newEdge) && l.Ts(T, o.HEAP_INITIAL, o.HEAP_MAXIMUM), S = null !== (t3 = n.TK.CHeap) && void 0 !== t3 && t3.Allocator ? n.TK.CHeap.Allocator : new a2.A({ buffer: T.buffer, memory: T, byteOffset: o.HEAP_OFFSET, maxHeapSize: 64 * o.HEAP_MAXIMUM * 1024, growAllowed: true, onResize: (e4, t4) => (T.grow(t4 - e4.byteLength >>> 16), { buffer: T.buffer, byteOffset: o.HEAP_OFFSET }) }), S.addUpdateHandle(W), W(S.getBuffer()), I = null !== (i3 = n.TK.CHeap) && void 0 !== i3 && i3.StackSize ? n.TK.CHeap.StackSize : o.STACK_SIZE, x = null !== (r3 = n.TK.CHeap) && void 0 !== r3 && r3.StackTop ? n.TK.CHeap.StackTop : S.malloc(I), k = null !== (f2 = n.TK.CHeap) && void 0 !== f2 && f2.StackPointer ? n.TK.CHeap.StackPointer : new WebAssembly.Global({ value: "i32", mutable: true }, x + I), P = null !== (g2 = n.TK.CHeap) && void 0 !== g2 && g2.Table ? n.TK.CHeap.Table : new s2.z(), y = null !== (M2 = n.TK.CHeap) && void 0 !== M2 && M2.ThreadId ? n.TK.CHeap.ThreadId : 0, b = null !== (B2 = n.TK.CHeap) && void 0 !== B2 && B2.ThreadName ? n.TK.CHeap.ThreadName : "main", !n.TK.CHeap) if (o.USE_THREADS) Atomics.store(D, c.hb >>> 2, y + 1), Atomics.store(R, c.II >>> 2, 0);
    else {
      D[c.hb >>> 2] = y + 1;
      let e4 = c.II >>> 2;
      R[e4] = 0;
    }
    n.TK.CHeap || (n.TK.CHeap = { Allocator: S, Table: P, ThreadId: y, ThreadName: b, Memory: T, Config: o, StackSize: I, StackTop: x, StackPointer: k, isMainThread: true, threadCounter: c.hb, heapMutex: c.II });
  })() : (n.TK.CHeap = { initThread: G, isMainThread: false, Config: o }, false);
}, 80098: (e2, t2, i2) => {
  i2.d(t2, { I_: () => b, SQ: () => k });
  var r2 = i2(75019), a2 = i2.n(r2), s2 = i2(11919), n = i2.n(s2), o = i2(42096), c = i2.n(o), d2 = i2(99921), h = i2(63939), l = i2(50932), u = i2(61499), f = i2(6704), p = i2(67672), m = i2(95335), g = i2(72739), v = i2(2148);
  const A = a2()({});
  function y(e3, t3) {
    for (; ; ) {
      let i3 = e3[u.JY];
      if (i3) {
        const e4 = i3.get(t3);
        if (e4) return e4;
      }
      if (!(e3 = a2()(e3)) || e3 === A) return null;
    }
  }
  function w(e3, t3, i3, r3) {
    const a3 = {};
    a3[u.o9] = e3;
    let s3 = (0, d2.A)(r3 ? 20 : i3);
    return new Proxy(a3, { get(e4, t4, a4) {
      if (t4 === u.o9) return e4[u.o9];
      const n2 = (0, v.A)(t4);
      return r3 ? h.f[20](e4[u.o9] + n2 * s3) : p.Pc(i3) ? e4[t4] : h.f[i3](e4[u.o9] + n2 * s3);
    }, set(e4, t4, a4, n2) {
      if (t4 === u.o9) return e4[u.o9] = a4, true;
      const o2 = (0, v.A)(t4);
      if (r3) l.M[20](e4[u.o9] + o2 * s3, a4), e4[t4] = a4;
      else if (p.Pc(i3)) {
        const r4 = e4[t4] || (e4[t4] = b(e4[u.o9] + o2 * s3, i3));
        m.__(a4, (e5, t5) => {
          r4[t5] = e5;
        }), e4[t4] = r4;
      } else l.M[i3](e4[u.o9] + o2 * s3, a4), e4[t4] = a4;
      return true;
    } });
  }
  function b(e3, t3) {
    const i3 = p.Pc(t3) ? t3.prototype : t3, r3 = {};
    r3[u.o9] = e3, n()(r3, i3);
    const { proxy: a3, revoke: s3 } = Proxy.revocable(r3, { get(e4, t4, r4) {
      if (p.Yj(t4)) {
        const r5 = y(i3, t4.replace(/^\$+/, ""));
        if (r5) {
          const i4 = e4[u.o9] + r5[7];
          if (r5[3]) {
            let a4 = e4[t4];
            return a4 || (a4 = w(i4, r5[4], r5[0], r5[1]), e4[t4] = a4), a4[u.o9] = i4, a4;
          }
          if (r5[1]) return h.f[20](i4);
          if (p.Pc(r5[0]) || p.Ik(r5[0])) return e4[t4] || (e4[t4] = b(i4, r5[0]));
          {
            let e5 = h.f[r5[0]](i4);
            return r5[5] && (e5 = e5 >>> 8 * f.i[r5[0]] - r5[8] - r5[6] & Math.pow(2, r5[6]) - 1), e5;
          }
        }
        return e4[t4];
      }
      return e4[t4];
    }, set(e4, t4, r4, a4) {
      if (p.Yj(t4)) {
        const a5 = y(i3, t4.replace(/^\$+/, ""));
        if (a5) {
          const i4 = e4[u.o9] + a5[7];
          if (a5[3]) {
            const s4 = e4[t4] || w(i4, a5[4], a5[0], a5[1]);
            g.__(r4, (e5, t5) => {
              s4[t5] = e5;
            }), e4[t4] = s4;
          } else if (a5[1]) l.M[20](i4, r4), e4[t4] = r4;
          else if (p.Pc(a5[0]) || p.Ik(a5[0])) {
            const s4 = e4[t4] || (e4[t4] = b(i4, a5[0]));
            m.__(r4, (e5, t5) => {
              s4[t5] = e5;
            }), e4[t4] = s4;
          } else {
            if (a5[5]) {
              let e5 = 0, t5 = 8 * f.i[a5[0]];
              for (let i5 = 0; i5 < a5[6]; i5++) e5 |= 1 << t5 - 1 - (i5 + a5[8]);
              const s4 = h.f[a5[0]](i4);
              l.M[a5[0]](i4, s4 & ~e5 | (r4 & Math.pow(2, a5[6]) - 1) << t5 - a5[8] - a5[6]);
            } else l.M[a5[0]](i4, r4);
            e4[t4] = r4;
          }
        } else e4[t4] = r4;
      } else e4[t4] = r4;
      return true;
    }, getOwnPropertyDescriptor: (e4, t4) => ({ enumerable: true, configurable: true }), ownKeys: (e4) => c()(e4[u.JY].keys()) });
    return r3[u.kE] = s3, a3;
  }
  function k(e3) {
    const t3 = e3[u.kE];
    t3 && t3();
  }
}, 52699: (e2, t2, i2) => {
  i2.d(t2, { t: () => s2, z: () => a2 });
  var r2 = i2(11473);
  function a2(e3) {
    return r2.GE.value = r2.GE.value - e3, r2.GE.value;
  }
  function s2(e3) {
    r2.GE.value = r2.GE.value + e3;
  }
}, 7417: (e2, t2, i2) => {
  i2.d(t2, { II: () => d2, hb: () => c, z1: () => o });
  var r2, a2, s2 = i2(10576);
  let n = 4;
  function o(e3, t3 = 1) {
    let i3 = n;
    for (; i3 % t3; ) i3 += 1;
    return n = i3 + e3, i3;
  }
  const c = null !== (r2 = s2.TK.CHeap) && void 0 !== r2 && r2.threadCounter ? s2.TK.CHeap.threadCounter : o(4, 4), d2 = null !== (a2 = s2.TK.CHeap) && void 0 !== a2 && a2.heapMutex ? s2.TK.CHeap.heapMutex : o(4, 4);
}, 79630: (e2, t2, i2) => {
  i2.d(t2, { A: () => h });
  var r2 = i2(134), a2 = i2(63939), s2 = i2(50932), n = i2(11473), o = i2(61403), c = i2(26429);
  class d2 {
    constructor(e3, t3) {
      (0, r2.A)(this, "pointer", void 0), (0, r2.A)(this, "len", void 0), (0, r2.A)(this, "view", void 0), this.pointer = e3, this.len = t3;
    }
    get byteLength() {
      return this.len;
    }
    get buffer() {
      return n.Lv;
    }
    get byteOffset() {
      return this.pointer;
    }
    getView() {
      return this.view && this.view.buffer === n.ce.buffer || (this.view = new DataView((0, n.Lv)(), this.pointer, this.len)), this.view;
    }
    getFloat32(e3, t3) {
      return this.getView().getFloat32(e3, t3);
    }
    getFloat64(e3, t3) {
      return this.getView().getFloat64(e3, t3);
    }
    getInt8(e3) {
      return this.getView().getInt8(e3);
    }
    getInt16(e3, t3) {
      return this.getView().getInt16(e3, t3);
    }
    getInt32(e3, t3) {
      return this.getView().getInt32(e3, t3);
    }
    getUint8(e3) {
      return this.getView().getUint8(e3);
    }
    getUint16(e3, t3) {
      return this.getView().getUint16(e3, t3);
    }
    getUint32(e3, t3) {
      return this.getView().getUint32(e3, t3);
    }
    setFloat32(e3, t3, i3) {
      this.getView().setFloat32(e3, t3, i3);
    }
    setFloat64(e3, t3, i3) {
      this.getView().setFloat64(e3, t3, i3);
    }
    setInt8(e3, t3) {
      this.getView().setInt8(e3, t3);
    }
    setInt16(e3, t3, i3) {
      this.getView().setInt16(e3, t3, i3);
    }
    setInt32(e3, t3, i3) {
      this.getView().setInt32(e3, t3, i3);
    }
    setUint8(e3, t3) {
      this.getView().setUint8(e3, t3);
    }
    setUint16(e3, t3, i3) {
      this.getView().setUint16(e3, t3, i3);
    }
    setUint32(e3, t3, i3) {
      this.getView().setUint32(e3, t3, i3);
    }
    getBigInt64(e3, t3) {
      return this.getView().getBigInt64(e3, t3);
    }
    getBigUint64(e3, t3) {
      return this.getView().getBigUint64(e3, t3);
    }
    setBigInt64(e3, t3, i3) {
      this.getView().setBigInt64(e3, t3, i3);
    }
    setBigUint64(e3, t3, i3) {
      this.getView().setBigUint64(e3, t3, i3);
    }
  }
  class h extends o.A {
    constructor(e3, t3) {
      return super(), (0, r2.A)(this, "pointer", void 0), (0, r2.A)(this, "len", void 0), this.pointer = e3, this.len = t3, this.proxy;
    }
    getIndexValue(e3) {
      return a2.f[2](this.pointer + e3);
    }
    setIndexValue(e3, t3) {
      s2.M[2](this.pointer + e3, t3);
    }
    set(e3, t3 = 0) {
      new Uint8Array((0, n.Lv)(), this.pointer, this.len).set(e3, t3);
    }
    subarray(e3 = 0, t3, i3) {
      return i3 && !c.USE_THREADS ? new h(this.pointer + e3, (t3 || this.len) - e3) : new Uint8Array((0, n.Lv)(), this.pointer + e3, (null != t3 ? t3 : this.len) - e3);
    }
    slice(e3 = 0, t3) {
      return new Uint8Array((0, n.Lv)(), this.pointer + e3, (null != t3 ? t3 : this.len) - e3).slice();
    }
    get length() {
      return this.len;
    }
    get byteLength() {
      return this.len;
    }
    get buffer() {
      return (0, n.Lv)();
    }
    get byteOffset() {
      return this.pointer;
    }
    get view() {
      return new d2(this.pointer, this.len);
    }
  }
}, 12264: (e2, t2, i2) => {
  i2.d(t2, { A: () => A });
  var r2, a2, s2 = i2(134), n = i2(80662), o = i2.n(n), c = i2(61499), d2 = i2(12085), h = i2(11473), l = i2(63939), u = i2(50932), f = i2(99921), p = i2(14686), m = i2(67672), g = i2(29170);
  class v {
    constructor() {
      (0, s2.A)(this, "prev", void 0), (0, s2.A)(this, "next", void 0), (0, s2.A)(this, "data", void 0);
    }
  }
  r2 = v.prototype, (a2 = new (o())()).set("prev", { 0: v, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), a2.set("next", { 0: v, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), a2.set("data", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), (0, d2.A)(r2, c.Og, true), (0, d2.A)(r2, c.dc, 4), (0, d2.A)(r2, c.g7, 12), (0, d2.A)(r2, c.JY, a2);
  class A {
    constructor() {
      (0, s2.A)(this, "length", 0), (0, s2.A)(this, "head", 0), (0, s2.A)(this, "tail", 0);
    }
    createNode(e3, t3, i3 = false) {
      const r3 = h.s_.malloc(12);
      if (u.M[20](r3 + 4, 0), u.M[20](r3, 0), m.ai(t3)) if (20 === t3) u.M[20](r3 + 8, e3);
      else {
        const i4 = h.s_.malloc((0, f.A)(t3));
        u.M[t3](i4, e3), u.M[20](r3 + 8, i4);
      }
      else if (i3) u.M[20](r3 + 8, e3);
      else {
        const i4 = h.s_.malloc((0, f.A)(t3));
        (0, p.Mr)(i4, e3[c.o9], (0, f.A)(t3)), u.M[20](r3 + 8, i4);
      }
      return r3;
    }
    getItem(e3, t3) {
      let i3;
      return i3 = m.ai(t3) ? 20 === t3 ? e3 : l.f[t3](e3) : (0, g.A)(e3, t3), i3;
    }
    push(e3, t3, i3 = false) {
      const r3 = this.createNode(e3, t3, i3);
      this.tail ? (u.M[20](this.tail + 4, r3), u.M[20](r3, this.tail), this.tail = r3) : (this.head = r3, this.tail = r3), this.length++;
    }
    pop(e3) {
      const t3 = this.tail;
      let i3 = this.getItem(l.f[20](t3 + 8), e3);
      return this.length > 1 ? (u.M[20](l.f[20](t3) + 4, 0), this.tail = l.f[20](t3)) : (this.head = 0, this.tail = 0), this.length--, h.s_.free(l.f[20](t3 + 8)), h.s_.free(t3), i3;
    }
    shift(e3) {
      const t3 = this.head;
      let i3 = this.getItem(l.f[20](t3 + 8), e3);
      return this.length > 1 ? (u.M[20](l.f[20](t3 + 4), 0), this.head = l.f[20](t3 + 4)) : (this.head = 0, this.tail = 0), this.length--, h.s_.free(l.f[20](t3 + 8)), h.s_.free(t3), i3;
    }
    unshift(e3, t3, i3 = false) {
      const r3 = this.createNode(e3, t3, i3);
      this.head ? (u.M[20](this.head, r3), u.M[20](r3 + 4, this.head), this.head = r3) : (this.head = r3, this.tail = r3), this.length++;
    }
    forEach(e3, t3) {
      if (!this.length) return;
      let i3 = this.head, r3 = 0;
      for (; 0 !== i3 && false !== e3(this.getItem(l.f[20](i3 + 8), t3), r3); ) i3 = l.f[20](i3 + 4), r3++;
    }
    find(e3, t3) {
      if (!this.length) return 0;
      let i3 = this.head, r3 = 0;
      for (; 0 !== i3; ) {
        const a3 = this.getItem(l.f[20](i3 + 8), t3);
        if (true === e3(a3, r3)) return a3;
        i3 = l.f[20](i3 + 4), r3++;
      }
      return 0;
    }
    indexOf(e3, t3) {
      if (!this.length) return 0;
      let i3 = this.head, r3 = 0;
      for (; 0 !== i3; ) {
        if (r3 === e3) return this.getItem(l.f[20](i3 + 8), t3);
        i3 = l.f[20](i3 + 4), r3++;
      }
      return 0;
    }
    clear(e3, t3) {
      if (this.length) {
        let i3 = this.head;
        for (; 0 !== i3; ) {
          e3 && e3(this.getItem(l.f[20](i3 + 8), t3)), h.s_.free(l.f[20](i3 + 8));
          const r3 = l.f[20](i3 + 4);
          h.s_.free(i3), i3 = r3;
        }
      }
      this.head = 0, this.tail = 0, this.length = 0;
    }
  }
  !(function(e3) {
    var t3 = new (o())();
    t3.set("length", { 0: 8, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), t3.set("head", { 0: v, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), t3.set("tail", { 0: v, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), (0, d2.A)(e3, c.Og, true), (0, d2.A)(e3, c.dc, 4), (0, d2.A)(e3, c.g7, 12), (0, d2.A)(e3, c.JY, t3);
  })(A.prototype);
}, 72703: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(67672);
  function a2(e3) {
    return r2.ai(e3) && e3 >= 0;
  }
}, 74503: (e2, t2, i2) => {
  i2.d(t2, { A: () => d2 });
  var r2 = i2(99921), a2 = i2(11473), s2 = i2(14686), n = i2(95335), o = i2(34677), c = i2(29170);
  function d2(e3, t3) {
    (0, o.A)(t3) || (t3 = e3, e3 = null);
    const i3 = (0, r2.A)(t3), d3 = a2.s_.malloc(i3);
    if (!d3) throw new TypeError("cannot alloc memory for struct");
    (0, s2.sO)(d3, 0, i3);
    const h = (0, c.A)(d3, t3), l = new t3();
    return e3 && n.X$(l, e3), n.__(l, (e4, t4) => {
      (0, o.A)(e4) && (h[t4] = e4);
    }), h;
  }
}, 14686: (e2, t2, i2) => {
  i2.d(t2, { JW: () => u, Mr: () => d2, bg: () => p, lH: () => m, lW: () => h, qW: () => g, s3: () => f, sO: () => l });
  var r2 = i2(11473), a2 = i2(50011), s2 = i2(50932), n = i2(79630), o = i2(26429), c = i2(63939);
  function d2(e3, t3, i3) {
    (0, r2.eq)().set((0, r2.eq)().subarray(t3, t3 + i3), e3);
  }
  function h(e3, t3, i3) {
    (0, r2.eq)().set(i3.subarray(0, t3), e3);
  }
  function l(e3, t3, i3) {
    (0, r2.eq)().subarray(e3, e3 + i3).fill(t3);
  }
  function u(e3, t3) {
    return o.USE_THREADS ? f(e3, t3) : new n.A(e3, t3);
  }
  function f(e3, t3) {
    return new Uint8Array((0, r2.Lv)(), e3, t3);
  }
  function p(e3, t3) {
    return new Uint16Array((0, r2.Lv)(), e3, t3);
  }
  function m(e3, t3) {
    let i3 = 0;
    for (; c.f[4]((e3 += 1) - 1) && (i3++, !(t3 && i3 >= t3)); ) ;
    const r3 = Math.min(i3, null != t3 ? t3 : i3);
    return a2.decode(f(e3, r3));
  }
  function g(e3, t3, i3, r3 = true) {
    const n2 = a2.encode(t3);
    let o2 = n2.length, c2 = r3 ? 1 : 0;
    i3 && o2 - c2 > i3 && (o2 = i3 - c2), h(e3, o2, n2), r3 && s2.M[11](e3 + o2, 0);
  }
}, 99921: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(61499), a2 = i2(67672), s2 = i2(6704);
  function n(e3) {
    return a2.ai(e3) ? s2.i[e3] || 0 : a2.Pc(e3) && e3.prototype[r2.Og] ? e3.prototype[r2.g7] : 0;
  }
}, 29170: (e2, t2, i2) => {
  i2.d(t2, { A: () => d2 });
  var r2 = i2(61499), a2 = i2(80098), s2 = i2(25323), n = i2(95797), o = i2(67672), c = i2(10534);
  function d2(e3, t3) {
    return arguments[2] && o.Yj(arguments[2]) && (t3 = t3.prototype, c.__(arguments[2], (e4) => {
      const i3 = t3[r2.JY];
      t3 = i3.get(e4)[0];
    })), n.A.proxy ? (0, a2.I_)(e3, t3) : (0, s2.l)(e3, t3);
  }
}, 94300: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(11473), a2 = i2(61499), s2 = i2(80098), n = i2(25323), o = i2(95797);
  function c(e3) {
    const t3 = e3[a2.o9];
    t3 && (r2.s_.free(t3), e3[a2.o9] = 0, o.A.proxy ? (0, s2.SQ)(e3) : (0, n.X)(e3));
  }
}, 61499: (e2, t2, i2) => {
  i2.d(t2, { JY: () => d2, Og: () => s2, dc: () => o, g7: () => n, kE: () => h, o9: () => c });
  var r2 = i2(75062), a2 = i2.n(r2);
  const s2 = a2()("Struct"), n = a2()("StructLength"), o = a2()("StructMaxBaseTypeByteLength"), c = a2()("StructAddress"), d2 = (a2()("StructKeysQueue"), a2()("StructKeysMeta")), h = (a2()("StructKeysInstance"), a2()("StructProxyRevoke"));
}, 10047: (e2, t2, i2) => {
  i2.d(t2, { A: () => r2 });
  const r2 = "AGFzbQEAAAABLAdgAX8Bf2ABfwF+YAJ/fwF/YAJ/fgF+YAN/f38Bf2ADf35+AX5gA39/fgF/AhIBA2VudgZtZW1vcnkCAwGAgAQDKCcAAAABAgICAwICAgMCAgIDAgICAwICAgMCAgIDAgICAwQEBAUCAgYHhgMnBWxvYWQ4AAAGbG9hZDE2AAEGbG9hZDMyAAIGbG9hZDY0AAMGc3RvcmU4AAQHc3RvcmUxNgAFB3N0b3JlMzIABgdzdG9yZTY0AAcEYWRkOAAIBWFkZDE2AAkFYWRkMzIACgVhZGQ2NAALBHN1YjgADAVzdWIxNgANBXN1YjMyAA4Fc3ViNjQADwRhbmQ4ABAFYW5kMTYAEQVhbmQzMgASBWFuZDY0ABMDb3I4ABQEb3IxNgAVBG9yMzIAFgRvcjY0ABcEeG9yOAAYBXhvcjE2ABkFeG9yMzIAGgV4b3I2NAAbCWV4Y2hhbmdlOAAcCmV4Y2hhbmdlMTYAHQpleGNoYW5nZTMyAB4KZXhjaGFuZ2U2NAAfEWNvbXBhcmVfZXhjaGFuZ2U4ACASY29tcGFyZV9leGNoYW5nZTE2ACESY29tcGFyZV9leGNoYW5nZTMyACISY29tcGFyZV9leGNoYW5nZTY0ACMGbm90aWZ5ACQEd2FpdAAlC3dhaXRUaW1lb3V0ACYKugMnCAAgAP4SAAALCAAgAP4TAQALCAAgAP4QAgALCAAgAP4RAwALDAAgACAB/hkAACABCwwAIAAgAf4aAQAgAQsMACAAIAH+FwIAIAELDAAgACAB/hgDACABCwoAIAAgAf4gAAALCgAgACAB/iEBAAsKACAAIAH+HgIACwoAIAAgAf4fAwALCgAgACAB/icAAAsKACAAIAH+KAEACwoAIAAgAf4lAgALCgAgACAB/iYDAAsKACAAIAH+LgAACwoAIAAgAf4vAQALCgAgACAB/iwCAAsKACAAIAH+LQMACwoAIAAgAf41AAALCgAgACAB/jYBAAsKACAAIAH+MwIACwoAIAAgAf40AwALCgAgACAB/jwAAAsKACAAIAH+PQEACwoAIAAgAf46AgALCgAgACAB/jsDAAsKACAAIAH+QwAACwoAIAAgAf5EAQALCgAgACAB/kECAAsKACAAIAH+QgMACwwAIAAgASAC/koAAAsMACAAIAEgAv5LAQALDAAgACABIAL+SAIACwwAIAAgASAC/kkDAAsKACAAIAH+AAIACwwAIAAgAUJ//gECAAsMACAAIAEgAv4BAgAL";
}, 82854: (e2, t2, i2) => {
  i2.d(t2, { KJ: () => d2, Ko: () => h, Ts: () => l });
  var r2 = i2(4919), a2 = i2(4624), s2 = i2(88096), n = i2(10047), o = i2(40046);
  const c = "src/cheap/thread/asm/atomics.ts";
  let d2;
  function h() {
    return !!d2;
  }
  function l(e3, t3, i3) {
    try {
      if (!("function" == typeof SharedArrayBuffer && e3.buffer instanceof SharedArrayBuffer)) return;
      {
        const a3 = s2.bx((0, r2.E_)(n.A), { shared: true, initial: t3, maximum: i3 });
        d2 = new WebAssembly.Instance(new WebAssembly.Module(a3), { env: { memory: e3 } });
      }
      (0, o.$Z)({ add: function(e4, t4, i4) {
        switch (i4) {
          case 5:
          case 3:
            return 255 & d2.exports.add8(e4, t4);
          case 12:
            return d2.exports.add8(e4, t4);
          case 14:
            return d2.exports.add16(e4, t4);
          case 7:
            return 65535 & d2.exports.add16(e4, t4);
          case 16:
            return d2.exports.add32(e4, t4);
          case 9:
            return 4294967295 & d2.exports.add32(e4, t4);
          case 21:
            return d2.exports.add64(e4, t4);
          case 22:
            return BigInt.asUintN(64, d2.exports.add64(e4, t4));
        }
      }, sub: function(e4, t4, i4) {
        switch (i4) {
          case 5:
          case 3:
            return 255 & d2.exports.sub8(e4, t4);
          case 12:
            return d2.exports.sub8(e4, t4);
          case 14:
            return d2.exports.sub16(e4, t4);
          case 7:
            return 65535 & d2.exports.sub16(e4, t4);
          case 16:
            return d2.exports.sub32(e4, t4);
          case 9:
            return 4294967295 & d2.exports.sub32(e4, t4);
          case 21:
            return d2.exports.sub64(e4, t4);
          case 22:
            return BigInt.asUintN(64, d2.exports.sub64(e4, t4));
        }
      }, and: function(e4, t4, i4) {
        switch (i4) {
          case 5:
          case 3:
            return 255 & d2.exports.and8(e4, t4);
          case 12:
            return d2.exports.and8(e4, t4);
          case 14:
            return d2.exports.and16(e4, t4);
          case 7:
            return 65535 & d2.exports.and16(e4, t4);
          case 16:
            return d2.exports.and32(e4, t4);
          case 9:
            return 4294967295 & d2.exports.and32(e4, t4);
          case 21:
            return d2.exports.and64(e4, t4);
          case 22:
            return BigInt.asUintN(64, d2.exports.and64(e4, t4));
        }
      }, or: function(e4, t4, i4) {
        switch (i4) {
          case 5:
          case 3:
            return 255 & d2.exports.or8(e4, t4);
          case 12:
            return d2.exports.or8(e4, t4);
          case 14:
            return d2.exports.or16(e4, t4);
          case 7:
            return 65535 & d2.exports.or16(e4, t4);
          case 16:
          case 9:
            return d2.exports.or32(e4, t4);
          case 21:
            return d2.exports.or64(e4, t4);
          case 22:
            return BigInt.asUintN(64, d2.exports.or64(e4, t4));
        }
      }, xor: function(e4, t4, i4) {
        switch (i4) {
          case 5:
          case 3:
            return 255 & d2.exports.xor8(e4, t4);
          case 12:
            return d2.exports.xor8(e4, t4);
          case 14:
            return d2.exports.xor16(e4, t4);
          case 7:
            return 65535 & d2.exports.xor16(e4, t4);
          case 16:
          case 9:
            return d2.exports.xor32(e4, t4);
          case 21:
            return d2.exports.xor64(e4, t4);
          case 22:
            return BigInt.asUintN(64, d2.exports.xor64(e4, t4));
        }
      }, store: function(e4, t4, i4) {
        switch (i4) {
          case 5:
          case 12:
          case 3:
            return d2.exports.store8(e4, t4);
          case 14:
          case 7:
            return d2.exports.store16(e4, t4);
          case 16:
          case 9:
            return d2.exports.store32(e4, t4);
          case 21:
          case 22:
            return d2.exports.store64(e4, t4);
        }
      }, load: function(e4, t4) {
        switch (t4) {
          case 5:
          case 3:
            return 255 & d2.exports.load8(e4);
          case 12:
            return d2.exports.load8(e4);
          case 14:
          case 7:
            return d2.exports.load16(e4);
          case 16:
            return d2.exports.load32(e4);
          case 9:
            return 4294967295 & d2.exports.load32(e4);
          case 21:
            return d2.exports.load64(e4);
          case 22:
            return BigInt.asUintN(64, d2.exports.load64(e4));
        }
      }, compareExchange: function(e4, t4, i4, r3) {
        switch (r3) {
          case 5:
          case 3:
            return 255 & d2.exports.compare_exchange8(e4, t4, i4);
          case 12:
            return d2.exports.compare_exchange8(e4, t4, i4);
          case 14:
            return d2.exports.compare_exchange16(e4, t4, i4);
          case 7:
            return 65535 & d2.exports.compare_exchange16(e4, t4, i4);
          case 16:
            return d2.exports.compare_exchange32(e4, t4, i4);
          case 9:
            return 4294967295 & d2.exports.compare_exchange32(e4, t4, i4);
          case 21:
            return d2.exports.compare_exchange64(e4, t4, i4);
          case 22:
            return BigInt.asUintN(64, d2.exports.compare_exchange64(e4, t4, i4));
        }
      }, exchange: function(e4, t4, i4) {
        switch (i4) {
          case 5:
          case 3:
            return 255 & d2.exports.exchange8(e4, t4);
          case 12:
            return d2.exports.exchange8(e4, t4);
          case 14:
            return d2.exports.exchange16(e4, t4);
          case 7:
            return 65535 & d2.exports.exchange16(e4, t4);
          case 16:
            return d2.exports.exchange32(e4, t4);
          case 9:
            return 4294967295 & d2.exports.exchange32(e4, t4);
          case 21:
            return d2.exports.exchange64(e4, t4);
          case 22:
            return BigInt.asUintN(64, d2.exports.exchange64(e4, t4));
        }
      }, notify: function(e4, t4) {
        return d2.exports.notify(e4, t4);
      }, wait: function(e4, t4) {
        return d2.exports.wait(e4, t4);
      }, waitTimeout: function(e4, t4, i4) {
        return d2.exports.waitTimeout(e4, t4, BigInt(0 | i4) * BigInt(1e6));
      } });
    } catch (e4) {
      a2.R8("atomics asm not support, cannot use asm atomics function", c, 291);
    }
  }
}, 40046: (e2, t2, i2) => {
  let r2, a2, s2, n, o, c, d2, h, l, u, f, p;
  function v(e3) {
    e3.add && (r2 = e3.add), e3.sub && (a2 = e3.sub), e3.and && (s2 = e3.and), e3.or && (n = e3.or), e3.xor && (o = e3.xor), e3.store && (c = e3.store), e3.load && (d2 = e3.load), e3.compareExchange && (h = e3.compareExchange), e3.exchange && (l = e3.exchange), e3.notify && (u = e3.notify), e3.wait && (f = e3.wait), e3.waitTimeout && (p = e3.waitTimeout), e3.waitAsync && e3.waitAsync, e3.waitTimeoutAsync && e3.waitTimeoutAsync;
  }
  i2.d(t2, { $Z: () => v, Hh: () => d2, I8: () => o, M_: () => c, Uo: () => s2, WQ: () => r2, cv: () => l, j4: () => p, jb: () => a2, me: () => u, or: () => n, p_: () => h, uk: () => f });
}, 33856: (e2, t2, i2) => {
  i2.d(t2, { A: () => M });
  var r2 = i2(54001), a2 = i2.n(r2), s2 = i2(86932), n = i2(7972), o = i2(40046), c = i2(26429), d2 = i2(86834), h = i2(95797);
  let l;
  const u = c.USE_THREADS || !d2.A.chrome && h.A.atomics || d2.A.checkVersion(d2.A.majorVersion, "94", true);
  function f(e3, t3, i3, r3) {
    if (u) return Atomics.add(l(i3), e3 >>> r3, t3);
    {
      const a3 = l(i3), s3 = e3 >>> r3, n2 = a3[s3];
      return a3[s3] += t3, n2;
    }
  }
  function p(e3, t3, i3, r3) {
    if (u) return Atomics.sub(l(i3), e3 >>> r3, t3);
    {
      const a3 = l(i3), s3 = e3 >>> r3, n2 = a3[s3];
      return a3[s3] -= t3, n2;
    }
  }
  function m(e3, t3, i3, r3) {
    if (u) return Atomics.and(l(i3), e3 >>> r3, t3);
    {
      const a3 = l(i3), s3 = e3 >>> r3, n2 = a3[s3];
      return a3[s3] &= t3, n2;
    }
  }
  function g(e3, t3, i3, r3) {
    if (u) return Atomics.or(l(i3), e3 >>> r3, t3);
    {
      const a3 = l(i3), s3 = e3 >>> r3, n2 = a3[s3];
      return a3[s3] |= t3, n2;
    }
  }
  function v(e3, t3, i3, r3) {
    if (u) return Atomics.xor(l(i3), e3 >>> r3, t3);
    {
      const a3 = l(i3), s3 = e3 >>> r3, n2 = a3[s3];
      return a3[s3] ^= t3, n2;
    }
  }
  function A(e3, t3, i3, r3) {
    if (u) return Atomics.store(l(i3), e3 >>> r3, t3);
    {
      const a3 = l(i3), s3 = e3 >>> r3, n2 = a3[s3];
      return a3[s3] = t3, n2;
    }
  }
  function y(e3, t3, i3) {
    return u ? Atomics.load(l(t3), e3 >>> i3) : l(t3)[e3 >>> i3];
  }
  function w(e3, t3, i3, r3, a3) {
    if (u) return Atomics.compareExchange(l(r3), e3 >>> a3, t3, i3);
    {
      const s3 = l(r3), n2 = e3 >>> a3, o2 = s3[n2];
      return o2 === t3 && (s3[n2] = i3), o2;
    }
  }
  function b(e3, t3, i3, r3) {
    if (u) return Atomics.exchange(l(i3), e3 >>> r3, t3);
    {
      const a3 = l(i3), s3 = e3 >>> r3, n2 = a3[s3];
      return a3[s3] = t3, n2;
    }
  }
  function k(e3, t3) {
    return u ? Atomics.notify(l(16), e3 >>> 2, t3) : void 0;
  }
  const x = { ok: 0, "not-equal": 1, "timed-out": 2 };
  function I(e3, t3) {
    return x[Atomics.wait(l(16), e3 >>> 2, t3)];
  }
  function P(e3, t3, i3) {
    return x[Atomics.wait(l(16), e3 >>> 2, t3, i3)];
  }
  async function S(e3, t3) {
    if (Atomics.waitAsync) {
      const i3 = Atomics.waitAsync(l(16), e3 >>> 2, t3);
      return i3.async ? x[await i3.value] : x[i3.value];
    }
    if (y(e3) !== t3) return 1;
    for (; y(e3) === t3; ) await new (a2())((e4) => {
      (0, n.A)(() => {
        e4();
      });
    });
    return 0;
  }
  async function T(e3, t3, i3) {
    if (Atomics.waitAsync) {
      const r3 = Atomics.waitAsync(l(16), e3 >>> 2, t3, i3);
      return r3.async ? x[await r3.value] : x[r3.value];
    }
    if (y(e3) !== t3) return 1;
    {
      const r3 = (0, s2.A)();
      for (; y(e3) === t3 && (0, s2.A)() - r3 < i3; ) await new (a2())((e4) => {
        (0, n.A)(() => {
          e4();
        });
      });
      return y(e3) !== t3 ? 0 : 2;
    }
  }
  function M(e3) {
    l = e3, (0, o.$Z)({ add: f, sub: p, and: m, or: g, xor: v, store: A, load: y, compareExchange: w, exchange: b, notify: k, wait: I, waitTimeout: P, waitAsync: S, waitTimeoutAsync: T });
  }
}, 42518: (e2, t2, i2) => {
  i2.d(t2, { Ts: () => u, XR: () => v, mq: () => m, uk: () => g, vP: () => p, zr: () => f });
  var r2, a2, s2 = i2(134), n = i2(80662), o = i2.n(n), c = i2(61499), d2 = i2(12085), h = i2(73783), l = i2(40046);
  function u(e3, t3) {
    return l.M_(e3, 0, 16, 2), 0;
  }
  function f(e3) {
    return l.M_(e3, 0, 16, 2), 0;
  }
  function p(e3) {
    return l.WQ(e3, 1, 16, 2), l.me(e3, 1), 0;
  }
  function m(e3) {
    return l.WQ(e3, 1, 16, 2), l.me(e3, 1073741824), 0;
  }
  function g(e3, t3) {
    let i3 = l.Hh(e3, 16, 2);
    return h.Tl(t3), l.uk(e3, i3), h.s2(t3), 0;
  }
  function v(e3, t3, i3) {
    let r3 = l.Hh(e3, 16, 2);
    h.Tl(t3);
    let a3 = l.j4(e3, r3, i3);
    return h.s2(t3), 2 === a3 ? 110 : 0;
  }
  r2 = (class {
    constructor() {
      (0, s2.A)(this, "atomic", void 0);
    }
  }).prototype, (a2 = new (o())()).set("atomic", { 0: 16, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), (0, d2.A)(r2, c.Og, true), (0, d2.A)(r2, c.dc, 4), (0, d2.A)(r2, c.g7, 4), (0, d2.A)(r2, c.JY, a2);
}, 81574: (e2, t2, i2) => {
  i2.r(t2), i2.d(t2, { default: () => o });
  var r2 = i2(84149), a2 = (i2(55013), i2(10576)), s2 = i2(67672);
  let n = a2.TK;
  function o(e3) {
    let t3, i3;
    n.onmessage = (o2) => {
      const c = o2.data, d2 = c.type, h = c.data;
      switch (d2) {
        case "init":
          if (a2.TK.CHeap && a2.TK.CHeap.initThread && a2.TK.CHeap.Config.USE_THREADS) return void a2.TK.CHeap.initThread(h).then(() => {
            n.postMessage({ type: "ready" });
          });
          n.postMessage({ type: "ready" });
          break;
        case "run":
          n.postMessage({ type: "running" }), i3 = e3(h.params), l = h.port, t3 = new r2.Ay(l), t3.on(r2.S3, async (e4) => {
            const r3 = e4.method, a3 = e4.params;
            if (s2.Pc(i3[r3])) try {
              i3[r3].transfer || (i3[r3].transfer = []);
              const s3 = await i3[r3](...a3.params);
              t3.reply(e4, s3, null, i3[r3].transfer), i3[r3].transfer.length = 0;
            } catch (i4) {
              t3.reply(e4, -2097152, { message: i4.message });
            }
          });
          break;
        case "stop":
          t3 && t3.destroy(), a2.TK.__freeSmartPtr__ && a2.TK.__freeSmartPtr__(), n.postMessage({ type: "stopped" });
      }
      var l;
    };
  }
}, 26848: (e2, t2, i2) => {
  i2.r(t2), i2.d(t2, { default: () => s2 });
  var r2 = i2(10576);
  let a2 = r2.TK;
  function s2(e3) {
    let t3;
    a2.onmessage = (i3) => {
      const s3 = i3.data, n = s3.type, o = s3.data;
      switch (n) {
        case "init":
          if (r2.TK.CHeap && r2.TK.CHeap.initThread && r2.TK.CHeap.Config.USE_THREADS) return void r2.TK.CHeap.initThread(o).then(() => {
            a2.postMessage({ type: "ready" });
          });
          a2.postMessage({ type: "ready" });
          break;
        case "run":
          t3 = e3(o.params);
          break;
        case "stop":
          t3 && t3.then ? t3.then((e4) => {
            r2.TK.__freeSmartPtr__ && r2.TK.__freeSmartPtr__(), a2.postMessage({ type: "stopped", data: e4 });
          }) : (r2.TK.__freeSmartPtr__ && r2.TK.__freeSmartPtr__(), a2.postMessage({ type: "stopped", data: t3 }));
      }
    };
  }
}, 67524: (e2, t2, i2) => {
  i2.r(t2), i2.d(t2, { default: () => o });
  var r2 = i2(84149), a2 = (i2(55013), i2(10576)), s2 = i2(67672);
  let n = a2.TK;
  function o(e3) {
    let t3;
    n.onmessage = (i3) => {
      const o2 = i3.data, c = o2.type, d2 = o2.data;
      switch (c) {
        case "init":
          if (a2.TK.CHeap && a2.TK.CHeap.initThread && a2.TK.CHeap.Config.USE_THREADS) return void a2.TK.CHeap.initThread(d2).then(() => {
            n.postMessage({ type: "ready" });
          });
          n.postMessage({ type: "ready" });
          break;
        case "run":
          n.postMessage({ type: "running" }), h = d2.port, t3 = new r2.Ay(h), t3.on(r2.S3, async (i4) => {
            const r3 = i4.method, a3 = i4.params;
            if (s2.Pc(e3[r3])) try {
              e3[r3].transfer || (e3[r3].transfer = []);
              const s3 = await e3[r3](...a3.params);
              t3.reply(i4, s3, null, e3[r3].transfer), e3[r3].transfer.length = 0;
            } catch (e4) {
              t3.reply(i4, -2097152, { message: e4.message });
            }
          });
          break;
        case "stop":
          t3 && t3.destroy(), a2.TK.__freeSmartPtr__ && a2.TK.__freeSmartPtr__(), n.postMessage({ type: "stopped" });
      }
      var h;
    };
  }
}, 73783: (e2, t2, i2) => {
  i2.d(t2, { Tl: () => g, Ts: () => f, bh: () => m, eu: () => u, s2: () => p, zr: () => v });
  var r2, a2, s2 = i2(134), n = i2(80662), o = i2.n(n), c = i2(61499), d2 = i2(12085), h = i2(40046), l = i2(39638);
  class u {
    constructor() {
      (0, s2.A)(this, "atomic", void 0);
    }
  }
  function f(e3) {
    return h.M_(e3, 0, 16, 2), 0;
  }
  function p(e3, t3 = false) {
    let i3;
    if (0 !== (i3 = h.p_(e3, 0, 1, 16, 2))) do {
      2 != i3 && 0 === h.p_(e3, 1, 2, 16, 2) || !t3 && (0, l.A)() && h.uk(e3, 2);
    } while (0 !== (i3 = h.p_(e3, 0, 2, 16, 2)));
    return 0;
  }
  function m(e3) {
    return 0 === h.p_(e3, 0, 1, 16, 2) ? 0 : 16;
  }
  function g(e3) {
    return 1 !== h.jb(e3, 1, 16, 2) && (h.M_(e3, 0, 16, 2), h.me(e3, 1)), 0;
  }
  function v(e3) {
    return h.M_(e3, 0, 16, 2), 0;
  }
  r2 = u.prototype, (a2 = new (o())()).set("atomic", { 0: 16, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), (0, d2.A)(r2, c.Og, true), (0, d2.A)(r2, c.dc, 4), (0, d2.A)(r2, c.g7, 4), (0, d2.A)(r2, c.JY, a2);
}, 79490: (e2, t2, i2) => {
  i2.d(t2, { Ts: () => p, XR: () => y, Zr: () => A, bE: () => g, uk: () => v, zr: () => m });
  var r2, a2, s2 = i2(134), n = i2(80662), o = i2.n(n), c = i2(61499), d2 = i2(12085), h = i2(73783), l = i2(63939), u = i2(50932), f = i2(40046);
  function p(e3, t3) {
    return f.M_(e3, 0 | t3, 16, 2), h.Ts(e3 + 4), 0;
  }
  function m(e3) {
    return h.zr(e3 + 4), 0;
  }
  function g(e3) {
    return f.WQ(e3, 1, 16, 2), f.me(e3, 1), 0;
  }
  function v(e3) {
    for (; f.uk(e3, 0), f.jb(e3, 1, 16, 2) <= 0; ) f.WQ(e3, 1, 16, 2);
    return 0;
  }
  function A(e3) {
    return h.s2(e3 + 4), l.f[16](e3) > 0 ? (u.M[16](e3, l.f[16](e3) - 1), h.Tl(e3 + 4), 0) : (h.Tl(e3 + 4), 11);
  }
  function y(e3, t3) {
    return 2 !== f.j4(e3, 0, t3) && f.jb(e3, 1, 16, 2) <= 0 ? (f.WQ(e3, 1, 16, 2), 110) : 0;
  }
  r2 = (class {
    constructor() {
      (0, s2.A)(this, "atomic", void 0), (0, s2.A)(this, "mutex", void 0);
    }
  }).prototype, (a2 = new (o())()).set("atomic", { 0: 16, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), a2.set("mutex", { 0: h.eu, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), (0, d2.A)(r2, c.Og, true), (0, d2.A)(r2, c.dc, 4), (0, d2.A)(r2, c.g7, 8), (0, d2.A)(r2, c.JY, a2);
}, 88506: (e2, t2, i2) => {
  i2.d(t2, { nE: () => I, nx: () => P, pt: () => x });
  var r2 = i2(75062), a2 = i2.n(r2), s2 = i2(80662), n = i2.n(s2), o = i2(54001), c = i2.n(o), d2 = i2(11473), h = i2(84149), l = (i2(55013), i2(61837)), u = i2(26429), f = i2(67672), p = i2(10576), m = i2(62100), g = i2(95073);
  let v = p.TK.Worker, A = p.TK.MessageChannel;
  i2(81574), i2(26848), i2(67524);
  const y = (0, l.A)(81574, { varName: "init" }), w = ((0, l.A)(26848, { varName: "init" }), (0, l.A)(67524, { varName: "init" }), a2()("revoke")), b = new (n())();
  function k(e3, t3) {
    return "".concat(e3, "_").concat(t3);
  }
  function x(e3, t3, i3) {
    t3 = t3 || {}, f.Pc(t3) && (i3 = t3, t3 = {});
    let r3, a3 = [];
    function s3(...t4) {
      const r4 = new e3(...t4);
      return new (c())((t5) => {
        const a4 = { $worker: null, $ipc: null, $channel: null, $moduleId: (0, m.A)(i3), $stackPointer: 0, $instance: r4, $type: "class" }, { proxy: s4, revoke: n2 } = Proxy.revocable(a4, { get(t6, i4, s5) {
          if (t6[i4]) return a4[i4];
          if (i4 in e3.prototype && "function" == typeof e3.prototype[i4]) {
            const e4 = function(...e5) {
              return r4[i4](...e5);
            };
            e4.transfer = function(...e5) {
              return { invoke: function(...e6) {
                return r4[i4](...e6);
              } };
            }, t6[i4] = e4;
          }
          return t6[i4];
        } });
        a4[w] = n2, t5(s4);
      });
    }
    return r3 = (...r4) => {
      let s4;
      if (f.Pc(i3)) s4 = i3();
      else {
        let t4;
        const r5 = k(i3, "class");
        if (b.has(r5)) t4 = b.get(r5).url, b.get(r5).refCount++;
        else {
          const a4 = (0, l.A)(i3, { varName: "__module_".concat(e3.name, "__"), exportName: "__".concat(e3.name, "__"), pointName: e3.name, exportIsClass: true }), s5 = "\n            self.CHEAP_DISABLE_THREAD = ".concat(p.TK.CHEAP_DISABLE_THREAD, "\n            self.CHEAP_HEAP_INITIAL = ").concat(p.TK.CHEAP_HEAP_INITIAL, "\n            self.CHEAP_HEAP_MAXIMUM = ").concat(p.TK.CHEAP_HEAP_MAXIMUM, "\n            ").concat(p.TK.CHEAP_POLYFILL_URL ? "self.CHEAP_POLYFILL_URL = '".concat(p.TK.CHEAP_POLYFILL_URL, "'") : "", "\n            ").concat(p.TK.CHEAP_POLYFILL_URL ? "importScripts('".concat(p.TK.CHEAP_POLYFILL_URL, "');") : "", "\n            ").concat(a4, "\n            function run(params) {\n              params.unshift(null)\n              return new (Function.prototype.bind.apply(__module_").concat(e3.name, "__.__").concat(e3.name, "__, params))()\n            }\n            ").concat(y, "\n            init.default(run);\n          ");
          {
            const e4 = new Blob([s5], { type: "text/javascript" });
            t4 = URL.createObjectURL(e4);
          }
          b.set(r5, { url: t4, refCount: 1 });
        }
        s4 = new v(t4);
      }
      const n2 = new A();
      return new (c())((o2, c2) => {
        var l2;
        const f2 = u.USE_THREADS ? d2.s_.alignedAlloc(u.STACK_ALIGNMENT, t3.stackSize ? (0, g.A)(t3.stackSize, u.STACK_ALIGNMENT) : u.STACK_SIZE) : 0;
        s4.onmessage = (t4) => {
          const c3 = t4.data, d3 = c3.type;
          switch (c3.data, d3) {
            case "ready":
              s4.postMessage({ type: "run", data: { port: n2.port2, params: r4 } }, [n2.port2, ...a3]);
              break;
            case "running":
              !(function() {
                const t5 = new h.Ay(n2.port1), r5 = { $worker: s4, $ipc: t5, $channel: n2, $moduleId: (0, m.A)(i3), $stackPointer: f2, $type: "class" }, { proxy: a4, revoke: c4 } = Proxy.revocable(r5, { get(i4, a5, s5) {
                  if (i4[a5]) return r5[a5];
                  if (a5 in e3.prototype && "function" == typeof e3.prototype[a5]) {
                    const e4 = async function(...e5) {
                      return t5.request(a5, { params: e5 });
                    };
                    e4.transfer = function(...e5) {
                      return { invoke: async function(...i5) {
                        return t5.request(a5, { params: i5 }, e5);
                      } };
                    }, i4[a5] = e4;
                  }
                  return i4[a5];
                } });
                r5[w] = c4, o2(a4);
              })();
          }
        }, s4.postMessage({ type: "init", data: { memory: u.USE_THREADS ? d2.ce : null, name: t3.name || e3.name, stackPointer: f2, stackSize: null !== (l2 = t3.stackSize) && void 0 !== l2 ? l2 : u.STACK_SIZE } });
      });
    }, { run: !u.USE_THREADS && !t3.dispatchToWorker || t3.disableWorker ? s3 : r3, transfer: function(...e4) {
      return a3 = e4, { run: !u.USE_THREADS && !t3.dispatchToWorker || t3.disableWorker ? s3 : r3 };
    } };
  }
  function I(e3) {
    if (e3.$worker && (e3.$worker.terminate(), e3.$worker = null), e3.$moduleId) {
      if (f.Yj(e3.$moduleId)) {
        const t3 = k(e3.$moduleId, e3.$type);
        b.has(t3) && (b.get(t3).refCount--, 0 === b.get(t3).refCount && (URL.revokeObjectURL(b.get(t3).url), b.delete(t3)));
      }
      e3.$moduleId = null;
    }
    if (e3.$ipc && (e3.$ipc.destroy(), e3.$ipc = null), e3.$stackPointer && (d2.s_.free(e3.$stackPointer), e3.$stackPointer = 0), e3.$channel = null, e3.$instance = null, e3[w]) {
      const t3 = e3[w];
      e3[w] = null, t3();
    }
  }
  async function P(e3) {
    return e3.$worker ? new (c())((t3) => {
      e3.$worker.onmessage = function(i3) {
        const r3 = i3.data, a3 = r3.type, s3 = r3.data;
        "stopped" === a3 && (I(e3), t3(s3));
      }, e3.$worker.postMessage({ type: "stop" });
    }) : e3.$retval ? e3.$retval : void 0;
  }
}, 6704: (e2, t2, i2) => {
  i2.d(t2, { _: () => a2, i: () => r2 });
  const r2 = { 2: 1, 3: 1, 4: 1, 5: 1, 6: 2, 7: 2, 8: 4, 9: 4, 10: 8, 11: 1, 12: 1, 13: 2, 14: 2, 15: 4, 16: 4, 17: 8, 18: 4, 19: 8, 20: 4, 0: 4, 1: 4, 22: 8, 21: 8, 23: 1, 24: 1, 25: 4 }, a2 = { 2: 0, 3: 0, 4: 0, 5: 0, 6: 1, 7: 1, 8: 2, 9: 2, 10: 4, 11: 0, 12: 0, 13: 1, 14: 1, 15: 2, 16: 2, 17: 4, 18: 2, 19: 4, 20: 2, 1: 2, 0: 2, 22: 4, 21: 4, 23: 0, 24: 0, 25: 2 };
}, 19094: (e2, t2, i2) => {
  i2.d(t2, { A: () => p });
  var r2 = i2(134), a2 = i2(54001), s2 = i2.n(a2), n = i2(11473), o = i2(63939), c = i2(50932), d2 = i2(26429), h = i2(14686), l = i2(42518), u = i2(73783), f = i2(40046);
  class p {
    constructor(e3, t3) {
      (0, r2.A)(this, "count", void 0), (0, r2.A)(this, "url", void 0), (0, r2.A)(this, "childThreads", void 0), this.count = e3, this.url = t3, this.childThreads = [];
    }
    async createTheadPoolEntry(e3) {
      return new (s2())((t3, i3) => {
        const r3 = new Worker(this.url), a3 = n.s_.alignedAlloc(d2.STACK_ALIGNMENT, d2.STACK_SIZE), s3 = n.s_.malloc(8);
        (0, h.sO)(s3, 0, 8), c.M[15](s3 + 4, 0), c.M[15](s3, 2 | o.f[15](s3));
        const f2 = (0, n.pv)();
        r3.onmessage = (e4) => {
          if ("ready" === e4.data.type) {
            const e5 = a3;
            (0, h.sO)(e5, 0, 20), u.Ts(e5 + 16), l.Ts(e5 + 12), r3.postMessage({ type: "wait" }), t3({ id: f2, thread: { thread: 0, worker: r3, stackPointer: a3, threadDescriptor: s3 }, threadWait: e5 });
          }
        }, r3.postMessage({ type: "ready", data: { cheap: { memory: n.ce, stackPointer: a3, stackSize: d2.STACK_SIZE, id: f2 }, runner: { resource: { tableSize: e3.tableSize, module: e3.module, initFuncs: e3.initFuncs }, options: { memoryBase: e3.memoryBase, tableBase: e3.tableBase, threadDescriptor: s3, childImports: e3.childImports }, imports: e3.childImports } } });
      });
    }
    async ready(e3) {
      this.childThreads = await s2().all(new Array(this.count).fill(0).map(() => this.createTheadPoolEntry(e3)));
    }
    hasFree() {
      for (let e3 = 0; e3 < this.childThreads.length; e3++) if (0 === o.f[15](this.childThreads[e3].thread.threadDescriptor + 4)) return true;
      return false;
    }
    isPoolThread(e3) {
      for (let t3 = 0; t3 < this.childThreads.length; t3++) if (this.childThreads[t3].thread.thread === e3) return true;
      return false;
    }
    createThread(e3, t3, i3, r3) {
      for (let t4 = 0; t4 < this.childThreads.length; t4++) if (0 === o.f[15](this.childThreads[t4].thread.threadDescriptor + 4)) return c.M[15](this.childThreads[t4].thread.threadDescriptor + 4, 1), this.childThreads[t4].thread.thread = e3, c.M[15](e3 + 8, 2 | o.f[15](e3 + 8)), u.s2(this.childThreads[t4].threadWait + 16), c.M[20](this.childThreads[t4].threadWait, e3), c.M[20](this.childThreads[t4].threadWait + 4, i3), c.M[20](this.childThreads[t4].threadWait + 8, r3), u.Tl(this.childThreads[t4].threadWait + 16), void l.vP(this.childThreads[t4].threadWait + 12);
    }
    joinThread(e3, t3) {
      let i3;
      for (let t4 = 0; t4 < this.childThreads.length; t4++) if (this.childThreads[t4].thread.thread === e3) {
        i3 = this.childThreads[t4];
        break;
      }
      return i3 ? (1 & o.f[15](e3 + 8) || (f.uk(e3 + 12, 1), 0 !== t3 && c.M[20](t3, o.f[20](e3 + 4)), c.M[15](i3.thread.threadDescriptor + 4, 0)), 0) : -1;
    }
    detachThread(e3) {
      let t3;
      for (let i3 = 0; i3 < this.childThreads.length; i3++) if (this.childThreads[i3].thread.thread === e3) {
        t3 = this.childThreads[i3];
        break;
      }
      return t3 ? (c.M[15](t3.thread.threadDescriptor, 1 | o.f[15](t3.thread.threadDescriptor)), c.M[15](e3 + 8, 1 | o.f[15](e3 + 8)), 0) : -1;
    }
    destroy() {
      for (let e3 = 0; e3 < this.childThreads.length; e3++) n.s_.free(this.childThreads[e3].thread.stackPointer), n.s_.free(this.childThreads[e3].thread.threadDescriptor), this.childThreads[e3].thread.worker.terminate();
      this.childThreads = [];
    }
  }
}, 16030: (e2, t2, i2) => {
  i2.d(t2, { A: () => E });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(54001), o = i2.n(n), c = i2(63939), d2 = i2(50932), h = i2(11473), l = i2(95335), u = i2(72739), f = i2(4624), p = i2(67672), m = i2(14686), g = i2(14621), v = i2(1708), A = i2(20357), y = i2(77775), w = i2(26429), b = i2(40046), k = i2(82854), x = i2(80905), I = i2(24565), P = i2(19094), S = i2(42518), T = i2(73783), M = i2(95797), B = (i2(81999), i2(10576)), R = i2(61837);
  const _ = "src/cheap/webassembly/WebAssemblyRunner.ts";
  let C = B.TK.Worker;
  function U() {
  }
  let D = false;
  class E {
    static getTable() {
      return h.XI;
    }
    static mutexLock(e3) {
      T.s2(e3);
    }
    static mutexUnlock(e3) {
      T.Tl(e3);
    }
    static condWait(e3, t3) {
      S.uk(e3, t3);
    }
    static readPointer(e3) {
      return c.f[20](e3);
    }
    static writePointer(e3, t3) {
      d2.M[20](e3, t3);
    }
    constructor(e3, t3 = {}) {
      var i3, a3;
      (0, r2.A)(this, "resource", void 0), (0, r2.A)(this, "instance", void 0), (0, r2.A)(this, "options", void 0), (0, r2.A)(this, "builtinMalloc", void 0), (0, r2.A)(this, "memoryBase", void 0), (0, r2.A)(this, "tableBase", void 0), (0, r2.A)(this, "childImports", void 0), (0, r2.A)(this, "childUrl", void 0), (0, r2.A)(this, "childBlob", void 0), (0, r2.A)(this, "childThreads", void 0), (0, r2.A)(this, "imports", void 0), (0, r2.A)(this, "childReadyPromises", void 0), (0, r2.A)(this, "threadPool", void 0), (0, r2.A)(this, "initCalling", void 0), (0, r2.A)(this, "promisingMap", void 0), this.resource = e3, this.builtinMalloc = [], this.initCalling = false, this.childThreads = new (s2())(), this.childReadyPromises = [], this.promisingMap = new (s2())(), p.Yj(t3.childImports) ? this.childImports = t3.childImports : p.Ik(t3.childImports) && t3.childImports instanceof Blob && (this.childImports = URL.createObjectURL(t3.childImports)), this.memoryBase = e3.dataSize ? h.s_.alignedAlloc(null !== (i3 = e3.dataAlign) && void 0 !== i3 ? i3 : 8, e3.dataSize) : 0, this.memoryBase && e3.bssSize && (0, m.sO)(this.memoryBase + (e3.dataSize - e3.bssSize), 0, e3.bssSize), t3.thread && t3.tableBase && h.XI.getPointer() !== t3.tableBase && h.XI.alloc(t3.tableBase - h.XI.getPointer()), this.tableBase = e3.tableSize ? h.XI.alloc(e3.tableSize) : 0, this.options = t3, this.imports = { env: { memory: h.ce, __stack_pointer: h.GE, __indirect_function_table: h.XI.table, clock_time_get: g.WU, clock_res_get: g.Lq, random_get: g.Pp, abort: g.h2, proc_exit: function(e4) {
        f.z3("wasm module exit, code: ".concat(e4), _, 158);
      }, __syscall_renameat: U, __syscall_unlinkat: U, environ_get: g.B, environ_sizes_get: g.CK, fd_close: U, fd_fdstat_get: g.LS, fd_read: U, fd_seek: U, fd_write: g.nK, emscripten_builtin_malloc: (e4) => {
        const t4 = h.s_.malloc(e4);
        return this.builtinMalloc.push(t4), t4;
      }, emscripten_builtin_free: (e4) => {
        h.s_.free(e4);
      }, emscripten_builtin_memalign: (e4, t4, i4) => {
        const r3 = h.s_.alignedAlloc(t4, i4);
        return 0 !== r3 ? (d2.M[20](e4, r3), this.builtinMalloc.push(r3), 0) : -1;
      }, emscripten_memcpy_big: function(e4, t4, i4) {
        (0, m.Mr)(e4, t4, i4);
      }, __libc_malloc: function(e4) {
        return h.s_.malloc(e4);
      }, __libc_free: (e4) => {
        h.s_.free(e4);
      }, malloc: (e4) => {
        if (true === this.initCalling) {
          const t4 = h.s_.malloc(e4);
          return this.builtinMalloc.push(t4), t4;
        }
        return h.s_.malloc(e4);
      }, calloc: function(e4, t4) {
        return h.s_.calloc(e4, t4);
      }, realloc: function(e4, t4) {
        return h.s_.realloc(e4, t4);
      }, aligned_alloc: (e4, t4) => h.s_.alignedAlloc(e4, t4), free: function(e4) {
        h.s_.free(e4);
      }, posix_memalign: function(e4, t4, i4) {
        const r3 = h.s_.alignedAlloc(t4, i4);
        return 0 !== r3 ? (d2.M[20](e4, r3), 0) : -1;
      }, memalign: function(e4, t4) {
        return h.s_.alignedAlloc(e4, t4);
      } }, "GOT.func": { malloc: new WebAssembly.Global({ mutable: true, value: "i32" }, 2), calloc: new WebAssembly.Global({ mutable: true, value: "i32" }, 3), realloc: new WebAssembly.Global({ mutable: true, value: "i32" }, 4), aligned_alloc: new WebAssembly.Global({ mutable: true, value: "i32" }, 5), free: new WebAssembly.Global({ mutable: true, value: "i32" }, 1) } };
      {
        const e4 = (e5, t4, i4, r3) => {
          if (this.threadPool && this.threadPool.hasFree()) return this.threadPool.createThread(e5, t4, i4, r3), 0;
          this.childUrl || this.createChildUrl();
          const a4 = new C(this.childUrl);
          d2.M[15](e5, (0, h.pv)()), d2.M[16](e5 + 12, 1), d2.M[15](e5 + 8, 0), d2.M[20](e5 + 4, 0);
          const s3 = h.s_.alignedAlloc(w.STACK_ALIGNMENT, w.STACK_SIZE), n2 = h.s_.malloc(8);
          let l2;
          (0, m.sO)(n2, 0, 8), this.childThreads.set(c.f[15](e5), { thread: e5, worker: a4, stackPointer: s3, threadDescriptor: n2 });
          const u2 = new (o())((e6) => {
            l2 = e6;
          });
          M.A.jspi || this.childReadyPromises.push(u2);
          return a4.onmessage = (e6) => {
            const t5 = e6.data, i5 = t5.type;
            t5.data, "run" === i5 && l2(0);
          }, a4.postMessage({ type: "run", data: { cheap: { memory: h.ce, stackPointer: s3, stackSize: w.STACK_SIZE, id: c.f[15](e5) }, runner: { resource: { tableSize: this.resource.tableSize, module: this.resource.threadModule.module, initFuncs: this.resource.threadModule.initFuncs }, options: { memoryBase: this.options.memoryBase || this.memoryBase, tableBase: this.tableBase, thread: e5, threadDescriptor: n2, childImports: this.childImports }, func: i4, args: r3, imports: this.childImports, thread: e5 } } }), M.A.jspi ? u2 : 0;
        };
        l.X$(this.imports.env, { wasm_pthread_create: M.A.jspi ? new WebAssembly.Suspending(e4) : e4, wasm_pthread_join2: (e5, t4) => {
          if (this.threadPool && this.threadPool.isPoolThread(e5)) return this.threadPool.joinThread(e5, t4), 0;
          if (1 & c.f[15](e5 + 8)) return this.childThreads.delete(c.f[15](e5)), 0;
          b.uk(e5 + 12, 1), 0 !== t4 && d2.M[20](t4, c.f[20](e5 + 4));
          const i4 = this.childThreads.get(c.f[15](e5));
          return h.s_.free(i4.stackPointer), h.s_.free(i4.threadDescriptor), i4.worker.terminate(), this.childThreads.delete(c.f[15](e5)), (0, m.sO)(e5, 0, 16), 0;
        }, wasm_pthread_detach2: (e5) => {
          if (this.threadPool && this.threadPool.isPoolThread(e5)) return this.threadPool.detachThread(e5), 0;
          const t4 = this.childThreads.get(c.f[15](e5));
          d2.M[15](t4.threadDescriptor, 1 | c.f[15](t4.threadDescriptor)), d2.M[15](e5 + 8, 1 | c.f[15](e5 + 8));
        } }), l.X$(this.imports.env, v), l.X$(this.imports.env, A), l.X$(this.imports.env, y);
      }
      if (this.memoryBase ? l.X$(this.imports.env, { __memory_base: this.memoryBase }) : t3.memoryBase && l.X$(this.imports.env, { __memory_base: t3.memoryBase }), this.tableBase && l.X$(this.imports.env, { __table_base: this.tableBase }), null !== (a3 = t3.imports) && void 0 !== a3 && a3.env && (l.X$(this.imports.env, t3.imports.env), t3.envKey && t3.importMap)) {
        const e4 = {};
        l.__(this.imports.env, (i4, r3) => {
          t3.importMap[r3] && (e4[t3.importMap[r3]] = i4);
        }), this.imports[t3.envKey] = e4;
      }
      this.imports.wasi_snapshot_preview1 = this.imports.env;
    }
    createChildUrl() {
      {
        let e3 = "";
        {
          i2(81999);
          const t3 = (0, R.A)(16030, { varName: "__WebAssemblyRunner__", exportName: "__WebAssemblyRunner__", pointName: E.name, exportIsClass: true }), r3 = (0, R.A)(81999, { varName: "runThread" });
          let a3 = "", s3 = "";
          this.childImports && (a3 = "importScripts('".concat(this.childImports, "');")), B.TK.CHEAP_POLYFILL_URL && (s3 = "importScripts('".concat(B.TK.CHEAP_POLYFILL_URL, "');")), e3 = "\n          ".concat(t3, "\n          ").concat(r3, "\n          self.imports = {env:{}};\n          ").concat(s3, "\n          ").concat(a3, "\n          runThread.default();\n        ");
        }
        this.childBlob = new Blob([e3], { type: "text/javascript" }), this.childUrl = URL.createObjectURL(this.childBlob);
      }
    }
    overrideAtomic() {
      v.override({ atomic_add_i8: k.KJ.exports.add8, atomic_sub_i8: k.KJ.exports.sub8, atomic_and_i8: k.KJ.exports.and8, atomic_or_i8: k.KJ.exports.or8, atomic_xor_i8: k.KJ.exports.xor8, atomic_store_i8: k.KJ.exports.store8, atomic_load_i8: k.KJ.exports.load8, atomic_compare_exchange_i8: k.KJ.exports.compare_exchange8, atomic_exchange_i8: k.KJ.exports.exchange8, atomic_add_i16: k.KJ.exports.add16, atomic_sub_i16: k.KJ.exports.sub16, atomic_and_i16: k.KJ.exports.and16, atomic_or_i16: k.KJ.exports.or16, atomic_xor_i16: k.KJ.exports.xor16, atomic_store_i16: k.KJ.exports.store16, atomic_load_i16: k.KJ.exports.load16, atomic_compare_exchange_i16: k.KJ.exports.compare_exchange16, atomic_exchange_i16: k.KJ.exports.exchange16, atomic_add_i32: k.KJ.exports.add32, atomic_sub_i32: k.KJ.exports.sub32, atomic_and_i32: k.KJ.exports.and32, atomic_or_i32: k.KJ.exports.or32, atomic_xor_i32: k.KJ.exports.xor32, atomic_store_i32: k.KJ.exports.store32, atomic_load_i32: k.KJ.exports.load32, atomic_compare_exchange_i32: k.KJ.exports.compare_exchange32, atomic_exchange_i32: k.KJ.exports.exchange32, atomic_add_i64: k.KJ.exports.add64, atomic_sub_i64: k.KJ.exports.sub64, atomic_and_i64: k.KJ.exports.and64, atomic_or_i64: k.KJ.exports.or64, atomic_xor_i64: k.KJ.exports.xor64, atomic_store_i64: k.KJ.exports.store64, atomic_load_i64: k.KJ.exports.load64, atomic_compare_exchange_i64: k.KJ.exports.compare_exchange64, atomic_exchange_i64: k.KJ.exports.exchange64, atomics_notify: k.KJ.exports.notify, atomics_wait: k.KJ.exports.wait }), l.X$(this.imports.env, v);
    }
    async run(e3, t3) {
      if (p.Ik(e3) && l.X$(this.options.imports, e3), I.Ko() && this.resource.threadModule && (I.LK || I.Ts(h.ce, w.HEAP_INITIAL, w.HEAP_MAXIMUM, A.override), l.X$(this.imports.env, A)), !x.LK && x.Ko() && x.Ts(h.ce, w.HEAP_INITIAL, w.HEAP_MAXIMUM), !D && k.Ko() && (D = true, this.overrideAtomic()), this.instance = await WebAssembly.instantiate(this.resource.module, this.imports), this.initRunTime(), this.resource.threadModule && this.resource.enableThreadPool && t3 > 0 && !M.A.jspi) {
        this.childUrl || this.createChildUrl();
        let e4 = t3;
        this.resource.enableThreadCountRate && (e4 *= this.resource.enableThreadCountRate), this.threadPool = new P.A(e4, this.childUrl), await this.threadPool.ready({ tableSize: this.resource.tableSize, module: this.resource.threadModule.module, initFuncs: this.resource.threadModule.initFuncs, memoryBase: this.options.memoryBase || this.memoryBase, tableBase: this.tableBase, childImports: this.childImports });
      }
    }
    runAsChild(e3) {
      p.Ik(e3) && l.X$(this.options.imports, e3), I.Ko() && (I.LK || I.Ts(h.ce, w.HEAP_INITIAL, w.HEAP_MAXIMUM, A.override), l.X$(this.imports.env, A)), !D && k.Ko() && (D = true, this.overrideAtomic()), this.instance = new WebAssembly.Instance(this.resource.module, this.imports), this.initRunTime();
    }
    async childThreadsReady() {
      if (!this.childReadyPromises.length) return;
      const e3 = this.childReadyPromises;
      this.childReadyPromises = [], await o().all(e3);
    }
    initRunTime() {
      this.builtinMalloc = [], this.initCalling = true, p.YO(this.resource.initFuncs) && u.__(this.resource.initFuncs, (e3) => {
        let t3;
        if (this.asm[e3] && (t3 = this.asm[e3]), t3) return t3();
      }), this.initCalling = false;
    }
    invoke(e3, ...t3) {
      if (!this.asm) return -1;
      let i3;
      if (this.asm[e3] ? i3 = this.asm[e3] : this.options.exportMap && this.options.exportMap[e3] && this.asm[this.options.exportMap[e3]] && (i3 = this.asm[this.options.exportMap[e3]]), i3) return i3.apply(null, t3);
      f.z3("the wasm module has not function ".concat(e3, " to call"), _, 676);
    }
    async invokeAsync(e3, ...t3) {
      if (!this.asm) return -1;
      if (!M.A.jspi) return this.invoke(e3, ...t3);
      let i3;
      if (this.promisingMap.has(e3) ? i3 = this.promisingMap.get(e3) : (this.asm[e3] ? i3 = this.asm[e3] : this.options.exportMap && this.options.exportMap[e3] && this.asm[this.options.exportMap[e3]] && (i3 = this.asm[this.options.exportMap[e3]]), i3 = WebAssembly.promising(i3), this.promisingMap.set(e3, i3)), i3) return i3.apply(null, t3);
      f.z3("the wasm module has not function ".concat(e3, " to call"), _, 717);
    }
    get asm() {
      return this.instance && this.instance.exports;
    }
    getInstance() {
      return this.instance;
    }
    getChildThreadCount() {
      return this.childThreads.size;
    }
    destroy() {
      var e3;
      null !== (e3 = this.builtinMalloc) && void 0 !== e3 && e3.length && (u.__(this.builtinMalloc, (e4) => {
        h.s_.free(e4);
      }), this.builtinMalloc.length = 0), this.memoryBase && (h.s_.free(this.memoryBase), this.memoryBase = null), this.tableBase && (h.XI.free(this.tableBase), this.tableBase = 0), this.childImports && (URL.revokeObjectURL(this.childImports), this.childImports = null), this.childUrl && (URL.revokeObjectURL(this.childUrl), this.childUrl = null), this.childBlob = null, this.childReadyPromises.length = 0, this.childThreads.size && this.childThreads.forEach((e4, t3) => {
        1 & c.f[15](e4.threadDescriptor) || (f.R8("has child thread running, maybe resource leakage", _, 772), e4.worker.terminate(), d2.M[16](e4.thread + 12, 0), e4.stackPointer && h.s_.free(e4.stackPointer), h.s_.free(e4.threadDescriptor), this.childThreads.delete(t3));
      }), this.builtinMalloc = null, this.instance = null, this.options.thread && (this.options.threadDescriptor && d2.M[15](this.options.threadDescriptor + 4, 0), this.options.threadDescriptor && (1 & c.f[15](this.options.threadDescriptor) || 4 & c.f[15](this.options.thread + 8)) ? 2 & c.f[15](this.options.threadDescriptor) || (h.wE && h.s_.free(h.wE), h.s_.free(this.options.threadDescriptor), (0, m.sO)(this.options.thread, 0, 16), self.close()) : (d2.M[16](this.options.thread + 12, 0), b.me(this.options.thread + 12, 1))), this.threadPool && this.threadPool.destroy(), this.threadPool = null, this.promisingMap && (this.promisingMap.clear(), this.promisingMap = null);
    }
  }
}, 76045: (e2, t2, i2) => {
  i2.d(t2, { A: () => g });
  var r2 = i2(54001), a2 = i2.n(r2), s2 = i2(67672), n = i2(24175), o = i2(34531), c = i2(88096), d2 = i2(92647), h = i2(95335), l = i2(26429), u = i2(86834), f = i2(44690), p = i2(729), m = i2(4304);
  async function g(e3, t3 = {}) {
    let i3, r3, g2, v, A, y, w;
    if (t3 = h.X$({ enableThread: l.USE_THREADS, initFuncs: t3.child ? [] : ["__wasm_apply_data_relocs", "_initialize"] }, t3), s2.ai(e3.dataSize) && s2.ai(e3.tableSize)) if (r3 = e3.dataSize, v = e3.dataSize, g2 = e3.dataAlign, A = e3.dataAlign, y = e3.bssSize, s2.Yj(e3.source)) {
      const t4 = { method: "GET", headers: {}, mode: "cors", cache: "default", referrerPolicy: "no-referrer-when-downgrade" };
      if (s2.Pc(WebAssembly.compileStreaming)) i3 = await WebAssembly.compileStreaming(fetch(e3.source, t4));
      else {
        const r4 = await fetch(e3.source, t4);
        w = await r4.arrayBuffer(), i3 = await WebAssembly.compile(w);
      }
    } else i3 = await WebAssembly.compile(e3.source), w = s2.sv(e3.source) ? e3.source : e3.source.buffer;
    else {
      const h2 = { ioReader: new n.A(1048576), ioWriter: new o.A(1048576), bufferEnded: false, compileStopped: false, error: "", abortController: null, pullResolve: null, bufferResolve: null, buffers: [], data: {}, options: t3 }, m2 = new Response(new ReadableStream({ async start(t4) {
        if (s2.Yj(e3.source)) {
          var i4;
          "function" == typeof AbortController && (h2.abortController = new AbortController());
          const r4 = { method: "GET", headers: {}, mode: "cors", cache: "default", referrerPolicy: "no-referrer-when-downgrade", signal: null === (i4 = h2.abortController) || void 0 === i4 ? void 0 : i4.signal }, a3 = await fetch(e3.source, r4);
          let s3;
          a3.ok && a3.status >= 200 && a3.status <= 299 ? s3 = a3.body.getReader() : t4.error("Http code invalid, ".concat(a3.status, " ").concat(a3.statusText));
          const n2 = [];
          h2.ioReader.onFlush = async (e4) => {
            let t5 = 0;
            for (; n2.length && t5 < e4.length; ) {
              const i6 = n2.shift();
              i6.length > e4.length - t5 ? (e4.set(i6.subarray(0, e4.length - t5), t5), n2.unshift(i6.subarray(e4.length - t5)), t5 = e4.length) : (e4.set(i6, t5), t5 += i6.length);
            }
            if (t5 >= e4.length) return e4.length;
            const { value: i5, done: r5 } = await s3.read();
            return r5 ? t5 > 0 ? t5 : -1048576 : (h2.buffers.push(i5), i5.length > e4.length - t5 ? (e4.set(i5.subarray(0, e4.length - t5), t5), n2.push(i5.subarray(e4.length - t5)), e4.length) : (e4.set(i5, t5), t5 += i5.length, t5));
          };
        } else {
          let t5 = 0, i5 = e3.source.byteLength;
          const r4 = s2.sv(e3.source) ? new Uint8Array(e3.source) : e3.source;
          h2.ioReader.onFlush = async (e4) => {
            if (t5 >= i5) return -1048576;
            const a3 = Math.min(e4.length, i5 - t5);
            return e4.set(r4.subarray(t5, t5 + a3), 0), t5 += a3, a3;
          };
        }
        h2.ioWriter.onFlush = async (e4) => {
          if (h2.pullResolve) return h2.pullResolve(e4.slice()), h2.pullResolve = null, 0;
          const t5 = await new (a2())((e5) => {
            h2.bufferResolve = e5;
          });
          return t5.enqueue(e4.slice()), h2.bufferEnded && t5.close(), 0;
        }, (async function(e4) {
          try {
            for (await e4.ioWriter.writeUint32(await e4.ioReader.readUint32()), await e4.ioWriter.writeUint32(await e4.ioReader.readUint32()); ; ) {
              if (e4.compileStopped) {
                e4.abortController && e4.abortController.abort();
                break;
              }
              const t5 = await e4.ioReader.readUint8();
              if (e4.options.child && 11 === t5) {
                await e4.ioWriter.writeUint8(t5), await (0, c.$z)(e4.ioWriter, 7), await (0, c.$z)(e4.ioWriter, 1), await (0, c.$z)(e4.ioWriter, 0), await e4.ioWriter.writeUint8(65), await e4.ioWriter.writeUint8(0), await e4.ioWriter.writeUint8(11), await (0, c.$z)(e4.ioWriter, 1), await e4.ioWriter.writeUint8(0);
                const i6 = await (0, c.GW)(e4.ioReader);
                await e4.ioReader.skip(i6);
                continue;
              }
              await e4.ioWriter.writeUint8(t5);
              const i5 = await (0, c.GW)(e4.ioReader), r4 = e4.ioReader.getPos();
              if (0 === t5) {
                await (0, c.$z)(e4.ioWriter, i5);
                const t6 = e4.ioReader.getPos(), r5 = await (0, c.GW)(e4.ioReader), a3 = await e4.ioReader.readString(r5);
                if (await (0, c.$z)(e4.ioWriter, r5), await e4.ioWriter.writeString(a3), "dylink.0" === a3) {
                  const r6 = e4.ioReader.getPos() + (BigInt(Math.floor(i5)) - (e4.ioReader.getPos() - t6));
                  for (; e4.ioReader.getPos() < r6; ) {
                    const t7 = await e4.ioReader.readUint8();
                    await e4.ioWriter.writeUint8(t7);
                    const i6 = await (0, c.GW)(e4.ioReader);
                    await (0, c.$z)(e4.ioWriter, i6), 1 === t7 ? (e4.data.dataSize = await (0, c.GW)(e4.ioReader), e4.data.dataAlign = await (0, c.GW)(e4.ioReader), e4.data.tableSize = await (0, c.GW)(e4.ioReader), e4.data.tableAlign = await (0, c.GW)(e4.ioReader), await (0, c.$z)(e4.ioWriter, e4.data.dataSize), await (0, c.$z)(e4.ioWriter, e4.data.dataAlign), await (0, c.$z)(e4.ioWriter, e4.data.tableSize), await (0, c.$z)(e4.ioWriter, e4.data.tableAlign)) : await e4.ioWriter.writeBuffer(await e4.ioReader.readBuffer(i6));
                  }
                }
              } else if (11 === t5) {
                await (0, c.$z)(e4.ioWriter, i5);
                const t6 = await (0, c.GW)(e4.ioReader);
                if (await (0, c.$z)(e4.ioWriter, t6), t6) {
                  for (await (0, c.$z)(e4.ioWriter, await (0, c.GW)(e4.ioReader)); ; ) {
                    const t8 = await e4.ioReader.readUint8();
                    if (await e4.ioWriter.writeUint8(t8), 11 === t8) break;
                  }
                  const t7 = await (0, c.GW)(e4.ioReader);
                  e4.data.dataSize ? e4.data.bssSize = e4.data.dataSize - t7 : e4.data.dataSize = t7, await (0, c.$z)(e4.ioWriter, t7);
                }
              } else if (2 === t5) {
                const t6 = new p.A(new Uint8Array(i5 + 100));
                let a3 = await (0, c.GW)(e4.ioReader);
                (0, c.tt)(t6, a3);
                let s3 = 0;
                for (; a3--; ) {
                  const i6 = await (0, c.GW)(e4.ioReader);
                  (0, c.tt)(t6, i6), t6.writeBuffer(await e4.ioReader.readBuffer(i6));
                  const r5 = await (0, c.GW)(e4.ioReader);
                  (0, c.tt)(t6, r5), t6.writeBuffer(await e4.ioReader.readBuffer(r5));
                  const a4 = await e4.ioReader.readUint8();
                  switch (t6.writeUint8(a4), a4) {
                    case 0:
                      (0, c.tt)(t6, await (0, c.GW)(e4.ioReader));
                      break;
                    case 3:
                      (0, c.p2)(t6, await (0, c.WP)(e4.ioReader)), (0, c.tt)(t6, await (0, c.GW)(e4.ioReader));
                      break;
                    case 2: {
                      let i7 = await (0, c.GW)(e4.ioReader);
                      e4.options.enableThread ? i7 |= 2 : i7 &= -3, (0, c.tt)(t6, i7);
                      const r6 = await (0, c.GW)(e4.ioReader);
                      if ((0, c.tt)(t6, l.HEAP_INITIAL || r6), 1 & i7) {
                        let i8 = await (0, c.GW)(e4.ioReader);
                        f.A.ios && !u.A.checkVersion(f.A.version, "17", true) && e4.options.enableThread || (i8 = l.HEAP_MAXIMUM), (0, c.tt)(t6, i8);
                      }
                      s3++;
                      break;
                    }
                    case 1: {
                      (0, c.p2)(t6, await (0, c.WP)(e4.ioReader));
                      const i7 = await (0, c.GW)(e4.ioReader);
                      (0, c.tt)(t6, i7);
                      const r6 = await (0, c.GW)(e4.ioReader);
                      (0, c.tt)(t6, r6), e4.data.tableSize = r6, 1 & i7 && (0, c.tt)(t6, await (0, c.GW)(e4.ioReader)), s3++;
                      break;
                    }
                  }
                  if (2 === s3) break;
                }
                const n2 = t6.getWroteBuffer(), o2 = i5 - Number(e4.ioReader.getPos() - r4);
                await (0, c.$z)(e4.ioWriter, n2.length + o2), await e4.ioWriter.writeBuffer(n2);
              } else await (0, c.$z)(e4.ioWriter, i5);
              i5 - Number(e4.ioReader.getPos() - r4) && await e4.ioReader.pipe(e4.ioWriter, i5 - Number(e4.ioReader.getPos() - r4));
            }
          } catch (t5) {
            -1048576 === e4.ioReader.error ? e4.bufferEnded = true : e4.error = t5, e4.ioReader.remainingLength() && await e4.ioWriter.writeBuffer(await e4.ioReader.readBuffer(e4.ioReader.remainingLength())), await e4.ioWriter.flush();
          }
        })(h2);
      }, async pull(e4) {
        if (h2.error) e4.close();
        else {
          if (h2.bufferResolve) return h2.bufferResolve(e4), void (h2.bufferResolve = null);
          e4.enqueue(await new (a2())((e5, t4) => {
            h2.pullResolve = e5;
          })), h2.bufferEnded ? e4.close() : h2.error && e4.error(h2.error);
        }
      }, cancel(e4) {
        h2.compileStopped = true;
      } }), { headers: { "Content-Type": "application/wasm" } });
      i3 = s2.Pc(WebAssembly.compileStreaming) ? await WebAssembly.compileStreaming(m2) : await WebAssembly.compile(await m2.arrayBuffer()), w = s2.Yj(e3.source) ? (0, d2.A)(Uint8Array, h2.buffers).buffer : s2.sv(e3.source) ? e3.source : e3.source.buffer, r3 = h2.data.tableSize, v = h2.data.dataSize, g2 = h2.data.tableAlign, A = h2.data.dataAlign, y = h2.data.bssSize;
    }
    return t3.child ? { module: i3, initFuncs: t3.initFuncs || [], tableSize: 0, tableAlign: g2 || 0, dataSize: 1, dataAlign: A ? Math.max((0, m.A)(A), 8) : 8, bssSize: 0, buffer: w } : { module: i3, tableSize: r3, tableAlign: g2 || 0, dataSize: v, dataAlign: A ? Math.max((0, m.A)(A), 8) : 8, bssSize: y || 0, initFuncs: t3.initFuncs || [], buffer: w };
  }
}, 81999: (e2, t2, i2) => {
  function r2() {
    let e3;
    e3 = __WebAssemblyRunner__ ? __WebAssemblyRunner__.__WebAssemblyRunner__ : __CHeap_WebAssemblyRunner__.default;
    let t3, i3, r3 = self, a2 = 0;
    r3.onmessage = (s2) => {
      const n = s2.data, o = n.type, c = n.data;
      switch (o) {
        case "run":
          r3.postMessage({ type: "run" }), self.CHeap && self.CHeap.initThread && self.CHeap.initThread(c.cheap).then(() => {
            self.__SELF_THREAD__ = c.runner.thread, c.runner.options.imports = self.imports, t3 = new e3(c.runner.resource, c.runner.options), t3.runAsChild(), e3.getTable().get(c.runner.func)(c.runner.args), t3.destroy();
          });
          break;
        case "ready":
          i3 = c.runner, a2 = c.cheap.stackPointer, self.CHeap && self.CHeap.initThread && self.CHeap.initThread(c.cheap).then(() => {
            r3.postMessage({ type: "ready" });
          });
          break;
        case "wait": {
          async function d2() {
            for (; ; ) {
              for (e3.mutexLock(a2 + 16); 0 === e3.readPointer(a2); ) e3.condWait(a2 + 12, a2 + 16);
              self.__SELF_THREAD__ = e3.readPointer(a2), i3.options.thread = e3.readPointer(a2), i3.thread = e3.readPointer(a2), i3.func = e3.readPointer(a2 + 4), i3.args = e3.readPointer(a2 + 8), t3 = new e3(i3.resource, i3.options), t3.runAsChild(), e3.getTable().get(i3.func)(i3.args), t3.destroy(), e3.writePointer(a2, 0), e3.mutexUnlock(a2 + 16);
            }
          }
          i3.options.imports = self.imports, d2();
          break;
        }
      }
    };
  }
  i2.r(t2), i2.d(t2, { default: () => r2 });
}, 91808: (e2, t2, i2) => {
  i2.d(t2, { A: () => r2 });
  const r2 = "AGFzbQEAAAABEANgAX8Bf2ABfwBgAn9/AX8CWQYDZW52Bm1lbW9yeQIDAYCABANlbnYGbWFsbG9jAAADZW52BGZyZWUAAQNlbnYGY2FsbG9jAAIDZW52B3JlYWxsb2MAAgNlbnYNYWxpZ25lZF9hbGxvYwACAwYFAAECAgIHMwUGbWFsbG9jAAUEZnJlZQAGBmNhbGxvYwAHB3JlYWxsb2MACAxhbGlnbmVkQWxsb2MACQoqBQYAIAAQAAsGACAAEAELCAAgACABEAILCAAgACABEAMLCAAgACABEAML";
}, 80905: (e2, t2, i2) => {
  i2.d(t2, { Ko: () => l, LK: () => d2, Ts: () => u });
  var r2 = i2(11473), a2 = i2(4919), s2 = i2(4624), n = i2(91808), o = i2(88096);
  const c = "src/cheap/webassembly/runtime/asm/libc.ts";
  let d2, h = true;
  function l() {
    return h;
  }
  function u(e3, t3, i3) {
    try {
      const s3 = o.bx((0, a2.E_)(n.A), { shared: "function" == typeof SharedArrayBuffer && e3.buffer instanceof SharedArrayBuffer, initial: t3, maximum: i3 });
      d2 = new WebAssembly.Instance(new WebAssembly.Module(s3), { env: { memory: e3, malloc: function(e4) {
        return r2.s_.malloc(e4);
      }, calloc: function(e4, t4) {
        return r2.s_.calloc(e4, t4);
      }, realloc: function(e4, t4) {
        return r2.s_.realloc(e4, t4);
      }, aligned_alloc: (e4, t4) => r2.s_.alignedAlloc(e4, t4), free: function(e4) {
        r2.s_.free(e4);
      } } }), r2.XI.set(2, d2.exports.malloc), r2.XI.set(1, d2.exports.free), r2.XI.set(3, d2.exports.calloc), r2.XI.set(4, d2.exports.realloc), r2.XI.set(5, d2.exports.alignedAlloc);
    } catch (e4) {
      h = false, s2.R8("libc asm not support, cannot use asm thread function", c, 60);
    }
  }
}, 60: (e2, t2, i2) => {
  i2.d(t2, { A: () => r2 });
  const r2 = "AGFzbQEAAAABEwNgAX8Bf2ACf38Bf2ADf39/AX8CEgEDZW52Bm1lbW9yeQIDAYCABAMIBwAAAAECAAAHQwcEbG9jawAAB3RyeWxvY2sAAQZ1bmxvY2sAAgR3YWl0AAMJdGltZWR3YWl0AAQGc2lnbmFsAAUJYnJvYWRjYXN0AAYKnAIHVgEBfyAAQQBBAf5IAgAhASABQQBHBEADQCABQQJGBH9BAQUgAEEBQQL+SAIAQQBHCwRAIABBAkJ//gECABoLIABBAEEC/kgCACEBIAFBAEcNAAsLQQALFwAgAEEAQQH+SAIAQQBGBH9BAAVBEAsLIwAgAEEB/iUCAEEBRwRAIABBAP4XAgAgAEEB/gACABoLQQALHQAgACAA/hACACABEAIaQn/+AQIAGiABEAAaQQALNwAgACAA/hACACABEAIaIAIpAwBCgJTr3AN+IAIoAgitfP4BAgAgARAAGkECRgR/QfAABUEACwsWACAAQQH+HgIAGiAAQQH+AAIAGkEACxoAIABBAf4eAgAaIABBgICAgAT+AAIAGkEACw==";
}, 24565: (e2, t2, i2) => {
  i2.d(t2, { Ko: () => h, LK: () => c, Ts: () => l });
  var r2 = i2(4919), a2 = i2(4624), s2 = i2(60), n = i2(88096);
  const o = "src/cheap/webassembly/runtime/asm/thread.ts";
  let c, d2 = true;
  function h() {
    return d2;
  }
  function l(e3, t3, i3, h2) {
    try {
      if (!("function" == typeof SharedArrayBuffer && e3.buffer instanceof SharedArrayBuffer)) return void (d2 = false);
      {
        const a3 = n.bx((0, r2.E_)(s2.A), { shared: true, initial: t3, maximum: i3 });
        c = new WebAssembly.Instance(new WebAssembly.Module(a3), { env: { memory: e3 } });
      }
      h2({ wasm_pthread_mutex_lock: c.exports.lock, wasm_pthread_mutex_trylock: c.exports.trylock, wasm_pthread_mutex_unlock: c.exports.unlock, wasm_pthread_cond_wait: c.exports.wait, wasm_pthread_cond_timedwait: c.exports.timedwait, wasm_pthread_cond_signal: c.exports.signal, wasm_pthread_cond_broadcast: c.exports.broadcast });
    } catch (e4) {
      d2 = false, a2.R8("thread asm not support, cannot use asm thread function", o, 69);
    }
  }
}, 1708: (e2, t2, i2) => {
  i2.r(t2), i2.d(t2, { atomic_add_i16: () => p, atomic_add_i32: () => x, atomic_add_i64: () => C, atomic_add_i8: () => s2, atomic_and_i16: () => g, atomic_and_i32: () => P, atomic_and_i64: () => D, atomic_and_i8: () => o, atomic_compare_exchange_i16: () => b, atomic_compare_exchange_i32: () => R, atomic_compare_exchange_i64: () => F, atomic_compare_exchange_i8: () => u, atomic_exchange_i16: () => k, atomic_exchange_i32: () => _, atomic_exchange_i64: () => N, atomic_exchange_i8: () => f, atomic_load_i16: () => w, atomic_load_i32: () => B, atomic_load_i64: () => $, atomic_load_i8: () => l, atomic_or_i16: () => v, atomic_or_i32: () => S, atomic_or_i64: () => E, atomic_or_i8: () => c, atomic_store_i16: () => y, atomic_store_i32: () => M, atomic_store_i64: () => z, atomic_store_i8: () => h, atomic_sub_i16: () => m, atomic_sub_i32: () => I, atomic_sub_i64: () => U, atomic_sub_i8: () => n, atomic_xor_i16: () => A, atomic_xor_i32: () => T, atomic_xor_i64: () => L, atomic_xor_i8: () => d2, atomics_notify: () => V, atomics_wait: () => O, atomics_wait_timeout: () => q, override: () => W });
  var r2 = i2(40046), a2 = i2(6704);
  let s2 = function(e3, t3) {
    return r2.WQ(e3, t3, 12, a2._[12]);
  }, n = function(e3, t3) {
    return r2.jb(e3, t3, 12, a2._[12]);
  }, o = function(e3, t3) {
    return r2.Uo(e3, t3, 12, a2._[12]);
  }, c = function(e3, t3) {
    return r2.or(e3, t3, 12, a2._[12]);
  }, d2 = function(e3, t3) {
    return r2.I8(e3, t3, 12, a2._[12]);
  }, h = function(e3, t3) {
    return r2.M_(e3, t3, 12, a2._[12]);
  }, l = function(e3) {
    return r2.Hh(e3, 12, a2._[12]);
  }, u = function(e3, t3, i3) {
    return r2.p_(e3, t3, i3, 12, a2._[12]);
  }, f = function(e3, t3) {
    return r2.cv(e3, t3, 12, a2._[12]);
  }, p = function(e3, t3) {
    return r2.WQ(e3, t3, 14, a2._[14]);
  }, m = function(e3, t3) {
    return r2.jb(e3, t3, 14, a2._[14]);
  }, g = function(e3, t3) {
    return r2.Uo(e3, t3, 14, a2._[14]);
  }, v = function(e3, t3) {
    return r2.or(e3, t3, 14, a2._[14]);
  }, A = function(e3, t3) {
    return r2.I8(e3, t3, 14, a2._[14]);
  }, y = function(e3, t3) {
    return r2.M_(e3, t3, 14, a2._[14]);
  }, w = function(e3) {
    return r2.Hh(e3, 14, a2._[14]);
  }, b = function(e3, t3, i3) {
    return r2.p_(e3, t3, i3, 14, a2._[14]);
  }, k = function(e3, t3) {
    return r2.cv(e3, t3, 14, a2._[14]);
  }, x = function(e3, t3) {
    return r2.WQ(e3, t3, 16, a2._[16]);
  }, I = function(e3, t3) {
    return r2.jb(e3, t3, 16, a2._[16]);
  }, P = function(e3, t3) {
    return r2.Uo(e3, t3, 16, a2._[16]);
  }, S = function(e3, t3) {
    return r2.or(e3, t3, 16, a2._[16]);
  }, T = function(e3, t3) {
    return r2.I8(e3, t3, 16, a2._[16]);
  }, M = function(e3, t3) {
    return r2.M_(e3, t3, 16, a2._[16]);
  }, B = function(e3) {
    return r2.Hh(e3, 16, a2._[16]);
  }, R = function(e3, t3, i3) {
    return r2.p_(e3, t3, i3, 16, a2._[16]);
  }, _ = function(e3, t3) {
    return r2.cv(e3, t3, 16, a2._[16]);
  }, C = function(e3, t3) {
    return r2.WQ(e3, t3, 21, a2._[21]);
  }, U = function(e3, t3) {
    return r2.jb(e3, t3, 21, a2._[21]);
  }, D = function(e3, t3) {
    return r2.Uo(e3, t3, 21, a2._[21]);
  }, E = function(e3, t3) {
    return r2.or(e3, t3, 21, a2._[21]);
  }, L = function(e3, t3) {
    return r2.I8(e3, t3, 21, a2._[21]);
  }, z = function(e3, t3) {
    return r2.M_(e3, t3, 21, a2._[21]);
  }, $ = function(e3) {
    return r2.Hh(e3, 21, a2._[21]);
  }, F = function(e3, t3, i3) {
    return r2.p_(e3, t3, i3, 21, a2._[21]);
  }, N = function(e3, t3) {
    return r2.cv(e3, t3, 21, a2._[21]);
  }, V = function(e3, t3) {
    return r2.me(e3, t3);
  }, O = function(e3, t3) {
    return r2.uk(e3, t3);
  }, q = function(e3, t3, i3) {
    return r2.j4(e3, t3, Number(BigInt.asIntN(32, i3)));
  };
  function W(e3) {
    e3.atomic_add_i8 && (s2 = e3.atomic_add_i8), e3.atomic_sub_i8 && (n = e3.atomic_sub_i8), e3.atomic_and_i8 && (o = e3.atomic_and_i8), e3.atomic_or_i8 && (c = e3.atomic_or_i8), e3.atomic_xor_i8 && (d2 = e3.atomic_xor_i8), e3.atomic_store_i8 && (h = e3.atomic_store_i8), e3.atomic_load_i8 && (l = e3.atomic_load_i8), e3.atomic_compare_exchange_i8 && (u = e3.atomic_compare_exchange_i8), e3.atomic_exchange_i8 && (f = e3.atomic_exchange_i8), e3.atomic_add_i16 && (p = e3.atomic_add_i16), e3.atomic_sub_i16 && (m = e3.atomic_sub_i16), e3.atomic_and_i16 && (g = e3.atomic_and_i16), e3.atomic_or_i16 && (v = e3.atomic_or_i16), e3.atomic_xor_i16 && (A = e3.atomic_xor_i16), e3.atomic_store_i16 && (y = e3.atomic_store_i16), e3.atomic_load_i16 && (w = e3.atomic_load_i16), e3.atomic_compare_exchange_i16 && (b = e3.atomic_compare_exchange_i16), e3.atomic_exchange_i16 && (k = e3.atomic_exchange_i16), e3.atomic_add_i32 && (x = e3.atomic_add_i32), e3.atomic_sub_i32 && (I = e3.atomic_sub_i32), e3.atomic_and_i32 && (P = e3.atomic_and_i32), e3.atomic_or_i32 && (S = e3.atomic_or_i32), e3.atomic_xor_i32 && (T = e3.atomic_xor_i32), e3.atomic_store_i32 && (M = e3.atomic_store_i32), e3.atomic_load_i32 && (B = e3.atomic_load_i32), e3.atomic_compare_exchange_i32 && (R = e3.atomic_compare_exchange_i32), e3.atomic_exchange_i32 && (_ = e3.atomic_exchange_i32), e3.atomic_add_i64 && (C = e3.atomic_add_i64), e3.atomic_sub_i64 && (U = e3.atomic_sub_i64), e3.atomic_and_i64 && (D = e3.atomic_and_i64), e3.atomic_or_i64 && (E = e3.atomic_or_i64), e3.atomic_xor_i64 && (L = e3.atomic_xor_i64), e3.atomic_store_i64 && (z = e3.atomic_store_i64), e3.atomic_load_i64 && ($ = e3.atomic_load_i64), e3.atomic_compare_exchange_i64 && (F = e3.atomic_compare_exchange_i64), e3.atomic_exchange_i64 && (N = e3.atomic_exchange_i64), e3.atomics_notify && (V = e3.atomics_notify), e3.atomics_wait && (O = e3.atomics_wait), e3.atomics_wait_timeout && (q = e3.atomics_wait_timeout);
  }
}, 14621: (e2, t2, i2) => {
  i2.d(t2, { B: () => w, CK: () => b, LS: () => k, Lq: () => M, Pp: () => B, WU: () => T, h2: () => S, nK: () => P });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(61499), o = i2(50932), c = i2(12085), d2 = i2(63939), h = i2(14686), l = i2(50011);
  const u = [null, [], []], f = 0, p = 28;
  function m(e3, t3) {
    const i3 = u[e3];
    0 === t3 || 10 === t3 ? (console.log.bind(console)(l.decode(i3)), i3.length = 0) : i3.push(t3);
  }
  const g = {};
  let v, A = "./this.program";
  function y() {
    if (!v) {
      const e3 = { USER: "web_user", LOGNAME: "web_user", PATH: "/", PWD: "/", HOME: "/home/web_user", LANG: ("object" == typeof navigator && navigator.languages && navigator.languages[0] || "C").replace("-", "_") + ".UTF-8", _: A };
      for (let t4 in g) e3[t4] = g[t4];
      const t3 = [];
      for (let i3 in e3) t3.push(i3 + "=" + e3[i3]);
      v = t3;
    }
    return v;
  }
  function w(e3, t3) {
    let i3 = 0;
    return y().forEach(function(r3, a3) {
      const s3 = t3 + i3;
      o.M[20](e3 + 4 * a3, s3), (function(e4, t4) {
        for (let i4 = 0; i4 < e4.length; ++i4) o.M[4](t4, e4.charCodeAt(i4)), t4 += 1;
        o.M[4](t4, 0);
      })(r3, s3), i3 += r3.length + 1;
    }), 0;
  }
  function b(e3, t3) {
    const i3 = y();
    o.M[25](e3, i3.length);
    let r3 = 0;
    return i3.forEach(function(e4) {
      r3 += e4.length + 1;
    }), o.M[25](t3, r3), 0;
  }
  function k(e3, t3) {
    let i3 = 0;
    return 0 == e3 ? i3 = 2 : 1 != e3 && 2 != e3 || (i3 = 64), o.M[11](t3, 2), o.M[13](t3 + 2, 1), o.M[15](t3 + 8, i3), o.M[15](t3 + 12, 0), o.M[17](t3 + 16, BigInt(0)), f;
  }
  var x, I;
  function P(e3, t3, i3, r3) {
    let a3 = 0;
    for (let r4 = 0; r4 < i3; r4++) {
      let i4 = d2.f[20](t3), r5 = d2.f[25](t3 + 4);
      for (let t4 = 0; t4 < r5; t4++) m(e3, d2.f[4](i4 + t4));
      a3 += r5, t3 += 8;
    }
    return o.M[25](r3, a3), f;
  }
  function S(e3) {
    throw e3 = "abort(".concat(e3 += "", "). Build with -s ASSERTIONS=1 for more info."), new WebAssembly.RuntimeError(e3);
  }
  function T(e3, t3, i3) {
    if (0 !== e3) return p;
    const r3 = (/* @__PURE__ */ new Date()).getTime();
    return o.M[10](i3, BigInt(r3) * BigInt(1e6)), f;
  }
  function M(e3, t3) {
    return 0 !== e3 ? p : (o.M[10](t3, BigInt(1e6)), f);
  }
  function B(e3, t3) {
    const i3 = (0, h.s3)(e3, t3);
    return crypto.getRandomValues(i3), f;
  }
  x = (class {
    constructor() {
      (0, r2.A)(this, "buf", void 0), (0, r2.A)(this, "len", void 0);
    }
  }).prototype, (I = new (s2())()).set("buf", { 0: 1, 1: 1, 2: 1, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), I.set("len", { 0: 25, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 4, 8: 0 }), (0, c.A)(x, n.Og, true), (0, c.A)(x, n.dc, 4), (0, c.A)(x, n.g7, 8), (0, c.A)(x, n.JY, I);
}, 20357: (e2, t2, i2) => {
  i2.r(t2), i2.d(t2, { override: () => R, wasm_cpu_core_count: () => M, wasm_pthread_cond_broadcast: () => k, wasm_pthread_cond_destroy: () => A, wasm_pthread_cond_init: () => v, wasm_pthread_cond_signal: () => b, wasm_pthread_cond_timedwait: () => w, wasm_pthread_cond_wait: () => y, wasm_pthread_equal2: () => S, wasm_pthread_exit: () => P, wasm_pthread_mutex_destroy: () => f, wasm_pthread_mutex_init: () => u, wasm_pthread_mutex_lock: () => p, wasm_pthread_mutex_trylock: () => m, wasm_pthread_mutex_unlock: () => g, wasm_pthread_once: () => x, wasm_pthread_self2: () => I, wasm_pthread_support: () => T, wasm_threw_error: () => B });
  var r2 = i2(63939), a2 = i2(50932), s2 = i2(73783), n = i2(42518), o = i2(26429), c = i2(11473), d2 = i2(40046), h = i2(10576), l = i2(14686);
  let u, f, p, m, g, v, A, y, w, b, k, x;
  function I() {
    return h.TK.__SELF_THREAD__;
  }
  function P(e3) {
    const t3 = h.TK.__SELF_THREAD__;
    a2.M[20](t3 + 4, e3), a2.M[15](t3 + 8, 4 | r2.f[15](t3 + 8));
  }
  function S(e3, t3) {
    return r2.f[15](e3) === r2.f[15](t3) ? 1 : 0;
  }
  function T() {
    return o.USE_THREADS ? 1 : 0;
  }
  function M() {
    return navigator.hardwareConcurrency;
  }
  function B(e3, t3) {
    throw new Error((0, l.lH)(t3));
  }
  function R(e3) {
    e3.wasm_pthread_mutex_lock && (p = e3.wasm_pthread_mutex_lock), e3.wasm_pthread_mutex_trylock && (m = e3.wasm_pthread_mutex_trylock), e3.wasm_pthread_mutex_unlock && (g = e3.wasm_pthread_mutex_unlock), e3.wasm_pthread_cond_wait && (y = e3.wasm_pthread_cond_wait), e3.wasm_pthread_cond_timedwait && (w = e3.wasm_pthread_cond_timedwait), e3.wasm_pthread_cond_signal && (b = e3.wasm_pthread_cond_signal), e3.wasm_pthread_cond_broadcast && (k = e3.wasm_pthread_cond_broadcast);
  }
  u = function(e3, t3) {
    return s2.Ts(e3);
  }, f = function(e3) {
    return s2.zr(e3);
  }, p = function(e3) {
    return s2.s2(e3);
  }, m = function(e3) {
    return s2.bh(e3);
  }, g = function(e3) {
    return s2.Tl(e3);
  }, v = function(e3, t3) {
    return n.Ts(e3, t3);
  }, A = function(e3) {
    return n.zr(e3);
  }, y = function(e3, t3) {
    return n.uk(e3, t3);
  }, w = function(e3, t3, i3) {
    let a3 = 1e3 * Number(r2.f[17](i3)) + r2.f[15](i3 + 8) / 1e6;
    return n.XR(e3, t3, a3);
  }, b = function(e3) {
    return n.vP(e3);
  }, k = function(e3) {
    return n.mq(e3);
  }, x = function(e3, t3) {
    return 0 === d2.WQ(e3, 1, 16, 2) && c.XI.get(t3)(), 0;
  };
}, 77775: (e2, t2, i2) => {
  i2.r(t2), i2.d(t2, { Timespec: () => u, wasm_sem_destroy: () => p, wasm_sem_init: () => f, wasm_sem_post: () => A, wasm_sem_timedwait: () => v, wasm_sem_trywait: () => g, wasm_sem_wait: () => m });
  var r2, a2, s2 = i2(134), n = i2(80662), o = i2.n(n), c = i2(61499), d2 = i2(12085), h = i2(63939), l = i2(79490);
  class u {
    constructor() {
      (0, s2.A)(this, "tvSec", void 0), (0, s2.A)(this, "tvNSec", void 0);
    }
  }
  function f(e3, t3, i3) {
    return l.Ts(e3, i3);
  }
  function p(e3) {
    return l.zr(e3);
  }
  function m(e3) {
    return l.uk(e3);
  }
  function g(e3) {
    return l.Zr(e3);
  }
  function v(e3, t3) {
    let i3 = 1e3 * Number(h.f[17](t3)) + h.f[15](t3 + 8) / 1e6;
    return l.XR(e3, i3);
  }
  function A(e3) {
    return l.bE(e3);
  }
  r2 = u.prototype, (a2 = new (o())()).set("tvSec", { 0: 17, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 0, 8: 0 }), a2.set("tvNSec", { 0: 15, 1: 0, 2: 0, 3: 0, 4: 0, 5: 0, 6: 0, 7: 8, 8: 0 }), (0, d2.A)(r2, c.Og, true), (0, d2.A)(r2, c.dc, 8), (0, d2.A)(r2, c.g7, 16), (0, d2.A)(r2, c.JY, a2);
}, 6331: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134), a2 = i2(10576);
  class s2 {
    constructor(e3, t3) {
      (0, r2.A)(this, "type", void 0), (0, r2.A)(this, "phase", void 0), (0, r2.A)(this, "ns", void 0), (0, r2.A)(this, "target", void 0), (0, r2.A)(this, "originalEvent", void 0), (0, r2.A)(this, "isPrevented", void 0), (0, r2.A)(this, "isStopped", void 0), (0, r2.A)(this, "listener", void 0), this.type = e3, this.phase = s2.PHASE_CURRENT, t3 && (this.originalEvent = t3);
    }
    preventDefault() {
      const e3 = this;
      if (!e3.isPrevented) {
        const { originalEvent: t3 } = e3;
        t3 && t3.preventDefault(), e3.isPrevented = a2.rT;
      }
      return e3;
    }
    stopPropagation() {
      const e3 = this;
      if (!e3.isStopped) {
        const { originalEvent: t3 } = e3;
        t3 && t3.stopPropagation(), e3.isStopped = a2.rT;
      }
      return e3;
    }
    prevent() {
      return this.preventDefault();
    }
    stop() {
      return this.stopPropagation();
    }
  }
  (0, r2.A)(s2, "PHASE_CURRENT", 0), (0, r2.A)(s2, "PHASE_UPWARD", 1), (0, r2.A)(s2, "PHASE_DOWNWARD", a2.Cy);
}, 96172: (e2, t2, i2) => {
  i2.d(t2, { A: () => l });
  var r2 = i2(134), a2 = i2(67672), s2 = i2(72739), n = i2(6331), o = i2(95335), c = i2(20525), d2 = (i2(4624), i2(56401)), h = i2(10576);
  class l {
    constructor(e3) {
      (0, r2.A)(this, "ns", void 0), (0, r2.A)(this, "listeners", void 0), (0, r2.A)(this, "nativeListeners", void 0), this.ns = e3 || h.W8, this.listeners = {};
    }
    fire(e3, t3, i3) {
      let r3 = this, c2 = a2.Yj(e3) ? r3.parse(e3) : e3, l2 = r3.listeners[c2.type], u2 = h.rT;
      if (l2) {
        l2 = o.C(l2);
        const e4 = t3 && t3[0] instanceof n.A ? t3[0] : h.ZH;
        s2.__(l2, function(a3) {
          if (!p(c2.ns, a3, h.rT) || !s2.zy(l2, a3) || i3 && !i3(c2, t3, a3)) return;
          e4 && (e4.listener = a3.fn);
          let n2 = (0, d2.A)(a3.fn, a3.ctx, t3);
          return e4 && (e4.listener = h.ZH), a3.num = a3.num ? a3.num + 1 : 1, a3.num === a3.max && r3.off(c2, a3.fn), e4 && (n2 === h.W8 ? e4.prevent().stop() : e4.isStopped && (n2 = h.W8)), n2 === h.W8 ? u2 = h.W8 : void 0;
        });
      }
      return u2;
    }
    on(e3, t3) {
      const i3 = this, r3 = i3.listeners, n2 = a2.Pc(t3) ? { fn: t3 } : t3;
      if (a2.Ik(n2) && a2.Pc(n2.fn)) {
        const t4 = a2.Yj(e3) ? i3.parse(e3) : e3;
        n2.ns = t4.ns, s2.VC(r3[t4.type] || (r3[t4.type] = []), n2);
      }
      return this;
    }
    one(e3, t3) {
      return a2.Pc(t3) ? t3 = { fn: t3, max: 1 } : t3.max = 1, this.on(e3, t3);
    }
    off(e3, t3) {
      const i3 = this, r3 = i3.listeners;
      if (e3) {
        const n2 = a2.Yj(e3) ? i3.parse(e3) : e3, c2 = n2.type, d3 = n2.ns, l2 = f(t3), u2 = function(e4, t4) {
          s2.__(e4, function(t5, i4) {
            l2(t5) && e4.splice(i4, 1);
          }, h.rT), e4.length || delete r3[t4];
        }, m = function(e4, t4) {
          s2.__(e4, function(t5, i4) {
            p(d3, t5) && e4.splice(i4, 1);
          }, h.rT), e4.length || delete r3[t4];
        };
        c2 ? r3[c2] && u2(r3[c2], c2) : d3 && o.__(r3, m);
      } else i3.listeners = {};
    }
    has(e3, t3) {
      let i3 = this.listeners, r3 = a2.Yj(e3) ? this.parse(e3) : e3, n2 = r3.type, c2 = r3.ns, d3 = h.rT, l2 = f(t3);
      var u2;
      return n2 ? i3[n2] && (u2 = i3[n2], s2.__(u2, function(e4) {
        if (l2(e4)) return d3 = h.W8;
      })) : c2 && o.__(i3, function(e4) {
        return s2.__(e4, function(e5) {
          if (p(c2, e5)) return d3 = h.W8;
        }), d3;
      }), !d3;
    }
    parse(e3) {
      const t3 = { type: e3, ns: h.u1 };
      if (this.ns) {
        const i3 = c.qh(e3, h.ZG);
        i3 >= 0 && (t3.type = c.di(e3, 0, i3), t3.ns = c.di(e3, i3 + 1));
      }
      return t3;
    }
  }
  function u() {
    return h.rT;
  }
  function f(e3) {
    return a2.Pc(e3) ? function(t3) {
      return e3 === t3.fn;
    } : u;
  }
  function p(e3, t3, i3) {
    const { ns: r3 } = t3;
    return r3 && e3 ? r3 === e3 : i3 ? h.rT : h.W8;
  }
}, 84504: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(2148);
  function a2(e3, t3, i3 = false) {
    const a3 = t3.split("."), s2 = e3.split(".");
    for (let e4 = 0; e4 < s2.length; e4++) {
      if (i3 && e4 == s2.length - 1 && (0, r2.A)(s2[e4]) >= (0, r2.A)(a3[e4])) return s2.length >= a3.length;
      if ((0, r2.A)(s2[e4]) > (0, r2.A)(a3[e4])) return true;
      if ((0, r2.A)(s2[e4]) < (0, r2.A)(a3[e4])) return false;
      if (e4 === a3.length - 1 && e4 === s2.length - 1) return i3;
      if (e4 === a3.length - 1) return true;
      if (e4 === s2.length - 1) return false;
    }
    return true;
  }
}, 92647: (e2, t2, i2) => {
  function r2(e3, t3) {
    if (!t3.length) return null;
    if (1 === t3.length) return t3[0];
    let i3, r3 = 0;
    for (i3 of t3) r3 += i3.length;
    let a2 = new e3(r3), s2 = 0;
    for (i3 of t3) a2.set(i3, s2), s2 += i3.length;
    return a2;
  }
  i2.d(t2, { A: () => r2 });
}, 78995: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(56401), a2 = i2(72739), s2 = i2(10576);
  function n(e3, t3, i3, n2 = false) {
    let o, c;
    return function() {
      let d2 = this;
      n2 && (c = a2.$r(arguments)), o || (n2 || (c = a2.$r(arguments)), i3 && (0, r2.A)(e3, d2, c), o = setTimeout(function() {
        o = s2.ZH, i3 || (0, r2.A)(e3, d2, c);
      }, t3));
    };
  }
}, 56401: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(67672), a2 = i2(10576);
  function s2(e3, t3, i3) {
    if (r2.Pc(e3)) return r2.YO(i3) ? e3.apply(t3, i3) : t3 !== a2.ZH ? e3.call(t3, i3) : i3 !== a2.ZH ? e3(i3) : e3();
  }
}, 8284: (e2, t2, i2) => {
  function r2() {
    let e3 = (/* @__PURE__ */ new Date()).getTime();
    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(t3) {
      let i3 = (e3 + 16 * Math.random()) % 16 | 0;
      return e3 = Math.floor(e3 / 16), ("x" == t3 ? i3 : 3 & i3 | 8).toString(16);
    });
  }
  i2.d(t2, { A: () => r2 });
}, 86932: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(45249), a2 = i2.n(r2);
  function s2() {
    return a2()();
  }
}, 54568: (e2, t2, i2) => {
  function r2() {
    return "function" == typeof registerProcessor && "number" == typeof sampleRate && "number" == typeof currentFrame && "number" == typeof currentTime;
  }
  i2.d(t2, { A: () => r2 });
}, 34677: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(10576);
  function a2(e3) {
    return e3 !== r2.ZH;
  }
}, 59135: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(34677);
  let a2;
  function s2() {
    if ((0, r2.A)(a2)) return a2;
    const e3 = new ArrayBuffer(2);
    return new DataView(e3).setInt16(0, 256, true), a2 = 256 === new Int16Array(e3)[0], a2;
  }
}, 20491: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(67672), a2 = i2(62100), s2 = i2(20525);
  function n(e3) {
    return r2.Pc(e3) && s2.zy((0, a2.A)(e3), "[native code]");
  }
}, 39638: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(34677), a2 = i2(54568);
  function s2() {
    return !("object" == typeof window && (0, r2.A)(window.document) || (0, a2.A)());
  }
}, 7972: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(64236), a2 = i2.n(r2), s2 = i2(20491), n = i2(10576);
  let o;
  typeof a2() === n.s0 && (0, s2.A)(a2()) && (o = a2()), o = typeof MessageChannel === n.s0 && (0, s2.A)(MessageChannel) ? function(e3) {
    const t3 = new MessageChannel();
    t3.port1.onmessage = e3, t3.port2.postMessage(1);
  } : "function" == typeof setTimeout ? setTimeout : function(e3) {
    setTimeout(e3);
  };
  const c = o;
}, 36: (e2, t2, i2) => {
  function r2(e3, t3, i3) {
    return e3 < t3 ? e3 = t3 : e3 > i3 && (e3 = i3), e3;
  }
  i2.d(t2, { A: () => r2 });
}, 61837: (e2, t2, i2) => {
  i2.d(t2, { A: () => f });
  var r2 = i2(69736), a2 = i2.n(r2), s2 = i2(73146), n = i2.n(s2);
  const o = '\nfunction webpackBootstrapFunc (modules) {\n  var installedModules = {};\n  function __webpack_require__(moduleId) {\n    if(installedModules[moduleId])\n    return installedModules[moduleId].exports;\n    var module = installedModules[moduleId] = {\n      i: moduleId,\n      l: false,\n      exports: {}\n    };\n    if (!modules[moduleId]) {\n      console.error(\'can not found module:\', moduleId)\n    }\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    module.l = true;\n    return module.exports;\n  }\n  __webpack_require__.m = modules;\n  __webpack_require__.c = installedModules;\n  __webpack_require__.i = function(value) { return value; };\n  __webpack_require__.d = function(exports, definition, getter) {\n    if (typeof definition === \'string\') {\n      if(!__webpack_require__.o(exports, definition)) {\n        Object.defineProperty(exports, definition, {\n          enumerable: true,\n          get: getter\n        });\n      }\n    }\n    else {\n      for(var key in definition) {\n        if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n          Object.defineProperty(exports, key, {\n            enumerable: true,\n            get: definition[key]\n          });\n        }\n      }\n    }\n  };\n  __webpack_require__.r = function(exports) {\n    if(typeof Symbol !== \'undefined\' && Symbol.toStringTag) {\n    	Object.defineProperty(exports, Symbol.toStringTag, { value: \'Module\' });\n    }\n    Object.defineProperty(exports, \'__esModule\', { value: true });\n  };\n  __webpack_require__.f = {};\n  __webpack_require__.e = function(chunkId) {\n    return Promise.all(Object.keys(__webpack_require__.f).reduce(function (promises, key) {\n      __webpack_require__.f[key](chunkId, promises);\n        return promises;\n    	}, []));\n	};\n  __webpack_require__.u = function(chunkId) {\n    return chunkId + "LIB_NAME";\n  };\n  __webpack_require__.n = function(module) {\n    var getter = module && module.__esModule ?\n      function getDefault() { return module[\'default\']; } :\n      function getModuleExports() { return module; };\n    __webpack_require__.d(getter, \'a\', getter);\n    return getter;\n  };\n  (function() {\n    var installedChunks = {\n      "main": 0\n    };\n    __webpack_require__.f.j = function(chunkId, promises) {\n      var installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n      if (installedChunkData !== 0) {\n        if(installedChunkData) {\n          promises.push(installedChunkData[2]);\n        } else {\n          if (true) {\n            var promise = new Promise(function(resolve, reject){installedChunkData = installedChunks[chunkId] = [resolve, reject]});\n            promises.push(installedChunkData[2] = promise);\n            var url = __webpack_require__.p + __webpack_require__.u(chunkId);\n            var error = new Error();\n            var loadingEnded = function(event) {\n              if(__webpack_require__.o(installedChunks, chunkId)) {\n                installedChunkData = installedChunks[chunkId];\n                if(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n                if(installedChunkData) {\n                  var errorType = event && (event.type === \'load\' ? \'missing\' : event.type);\n                  var realSrc = url;\n                  error.message = "Loading chunk " + chunkId + " failed.\\n(" + errorType + ": " + realSrc + ")";\n                  error.name = "ChunkLoadError";\n                  error.type = errorType;\n                  error.request = realSrc;\n                  installedChunkData[1](error);\n                }\n              }\n            };\n            __webpack_require__.l(url, loadingEnded);\n          }\n        }\n      }\n    };\n    var webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n    var [chunkIds, moreModules, runtime] = data;\n    var moduleId, chunkId, i = 0;\n    if (chunkIds.some(function(id){return installedChunks[id] !== 0})) {\n      for(moduleId in moreModules) {\n        if(__webpack_require__.o(moreModules, moduleId)) {\n          __webpack_require__.m[moduleId] = moreModules[moduleId];\n        }\n      }\n      if(runtime) runtime(__webpack_require__);\n    }\n    if (parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n      for (;i < chunkIds.length; i++) {\n        chunkId = chunkIds[i];\n        if (__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n          installedChunks[chunkId][0]();\n        }\n        installedChunks[chunkId] = 0;\n      }\n    }\n    var self = typeof globalThis !== undefined ? globalThis : self\n    var exportName = \'LIBRARY_EXPORT_NAME\'\n    var chunkLoadingGlobal = self["webpackChunk" + exportName] = self["webpackChunk" + exportName] || [];\n    chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\n    chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));\n  })();\n  (function() {\n    var inProgress = {};\n    __webpack_require__.l = function(url, done) {\n      if (inProgress[url]) { inProgress[url].push(done); return; }\n        inProgress[url] = [done];\n        var onComplete = function(event) {\n          clearTimeout(timeout);\n          var doneFns = inProgress[url];\n          delete inProgress[url];\n          doneFns && doneFns.forEach(function(fn){fn(event)});\n        }\n        var timeout = setTimeout(onComplete.bind(null, undefined, { type: "timeout" }), 120000);\n      if (typeof importScripts === \'function\') {\n        try {\n          importScripts(url);onComplete({type: "load"});\n        }\n        catch(e) {\n          onComplete({type: "missing"});\n        }\n      }\n      else {\n        import(url).then(function() {\n          onComplete({\n            type: "load"\n          });\n        }, function (error) {\n          onComplete({\n            type: "missing"\n          });\n        })\n      }\n    };\n  })();\n  __webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n  __webpack_require__.p = "ROOT_URL";\n  __webpack_require__.oe = function(err) { console.error(err); throw err; };\n  var f = __webpack_require__(__webpack_require__.s = ENTRY_MODULE);\n  return f;\n}\n', c = "[\\.|\\-|\\+|\\w|/|@|!]+", d2 = "\\(\\s*(/\\*.*?\\*/)?\\s*.*?(" + c + ").*?\\)";
  function h(e3) {
    return (e3 + "").replace(/[.?*+^$[\]\\(){}|-]/g, "\\$&");
  }
  function l(e3, t3, r3, s3) {
    const n2 = {};
    n2[r3] = [];
    let o2 = t3.toString();
    const l2 = o2.match(/^(function)?\s?\w*\(\w+,\s*(\w+),\s*(\w+)\)/);
    if (!l2) return n2;
    const u2 = l2[3];
    s3.__webpack_exports_process__ || (s3.__webpack_require__ = u2, s3.__webpack_exports__ = l2[2], s3.__webpack_exports_process__ = true);
    let f2, p = new RegExp("(\\\\n|\\W)" + h(u2) + d2, "g");
    for (; f2 = p.exec(o2); ) "dll-reference" !== f2[3] && n2[r3].push(f2[3]);
    for (p = new RegExp("\\(" + h(u2) + '\\("(dll-reference\\s(' + c + '))"\\)\\)' + d2, "g"); f2 = p.exec(o2); ) e3[f2[2]] || (n2[r3].push(f2[1]), e3[f2[2]] = i2(f2[1]).m), n2[f2[2]] = n2[f2[2]] || [], n2[f2[2]].push(f2[4]);
    const m = a2()(n2);
    for (let e4 = 0; e4 < m.length; e4++) for (let t4 = 0; t4 < n2[m[e4]].length; t4++) g = +n2[m[e4]][t4], isNaN(g) || (n2[m[e4]][t4] = +n2[m[e4]][t4]);
    var g;
    return n2;
  }
  function u(e3) {
    return a2()(e3).reduce(function(t3, i3) {
      return t3 || e3[i3].length > 0;
    }, false);
  }
  function f(e3, t3) {
    const r3 = { main: i2.m }, s3 = (function(e4, t4) {
      const i3 = { main: [t4] }, r4 = { main: [], __webpack_exports__: "__webpack_exports__", __webpack_require__: "__webpack_require__", __webpack_exports_process__: false }, s4 = { main: {} };
      for (; u(i3); ) {
        const t5 = a2()(i3);
        for (let n2 = 0; n2 < t5.length; n2++) {
          let o2 = t5[n2], c3 = i3[o2].pop();
          if (s4[o2] = s4[o2] || {}, s4[o2][c3] || !e4[o2][c3]) continue;
          s4[o2][c3] = true, r4[o2] = r4[o2] || [], r4[o2].push(c3);
          let d3 = l(e4, e4[o2][c3], o2, r4), h2 = a2()(d3);
          for (let e5 = 0; e5 < h2.length; e5++) i3[h2[e5]] = i3[h2[e5]] || [], i3[h2[e5]] = i3[h2[e5]].concat(d3[h2[e5]]);
        }
      }
      return r4;
    })(r3, e3);
    let c2 = n()(e3);
    return "var " + t3.varName + "=(" + o.replace("ENTRY_MODULE", c2).replace("ROOT_URL", i2.p || "").replace("LIBRARY_EXPORT_NAME", "libmedia").replace("LIB_NAME", i2.u && i2.u("") || "") + ")({" + s3.main.map(function(e4) {
      const i3 = n()(e4);
      let a3 = i3 + ": " + r3.main[e4].toString();
      if (i3 === c2 && t3.exportName && t3.pointName) {
        const e5 = ";".concat(s3.__webpack_require__, ".d(\n          ").concat(s3.__webpack_exports__, ',\n          "').concat(t3.exportName, '",\n          function() {\n            if (').concat(t3.exportIsClass, ") {\n              for (var key in ").concat(s3.__webpack_exports__, ") {\n                if (key === '").concat(t3.exportName, "') {\n                  continue;\n                }\n                var v = ").concat(s3.__webpack_exports__, "[key];\n                if (typeof v === 'function' && v.name === '").concat(t3.pointName, "') {\n                  return v;\n                }\n              }\n            }\n            return ").concat(t3.pointName, ";\n          }\n        );");
        a3 = a3.slice(0, a3.length - 1) + e5 + "}";
      }
      return a3;
    }).join(",") + "});";
  }
}, 6498: (e2, t2, i2) => {
  i2(67672), i2(72739);
}, 2148: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(67672), a2 = i2(10576);
  function s2(e3, t3) {
    return r2.sH(e3) ? +e3 : t3 !== a2.ZH ? t3 : 0;
  }
}, 62100: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(10576);
  function a2(e3, t3) {
    return e3 != r2.Cq && e3.toString ? e3.toString() : t3 !== r2.ZH ? t3 : r2.u1;
  }
}, 61403: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134), a2 = i2(67672);
  class s2 {
    constructor() {
      (0, r2.A)(this, "proxy", void 0), this.proxy = new Proxy(this, { get: (e3, t3, i3) => a2.sH(t3) ? e3.getIndexValue(+t3) : e3[t3], set: (e3, t3, i3, r3) => (a2.sH(t3) ? e3.setIndexValue(+t3, i3) : e3[t3] = i3, true) });
    }
  }
}, 37246: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134), a2 = i2(4624);
  class s2 {
    constructor(e3 = 1048576) {
      (0, r2.A)(this, "buffer", void 0), (0, r2.A)(this, "pointer", void 0), (0, r2.A)(this, "bitsLeft", void 0), (0, r2.A)(this, "size", void 0), (0, r2.A)(this, "endPointer", void 0), (0, r2.A)(this, "pos", void 0), (0, r2.A)(this, "error", void 0), (0, r2.A)(this, "onFlush", void 0), this.pointer = 0, this.bitsLeft = 8, this.pos = BigInt(0), this.size = e3, this.endPointer = 0, this.error = 0, this.buffer = new Uint8Array(this.size);
    }
    peekU1() {
      let e3 = 0;
      (this.remainingLength() < 1 || 1 === this.remainingLength() && 0 === this.bitsLeft) && this.flush();
      let t3 = this.pointer, i3 = this.bitsLeft;
      return 0 === i3 && (t3++, i3 = 8), e3 = this.buffer[t3] >> i3 - 1 & 1, e3;
    }
    readU1() {
      let e3 = 0;
      return (this.remainingLength() < 1 || 1 === this.remainingLength() && 0 === this.bitsLeft) && this.flush(), this.bitsLeft--, e3 = this.buffer[this.pointer] >> this.bitsLeft & 1, 0 === this.bitsLeft && (this.pointer++, this.bitsLeft = 8, this.pos++), e3;
    }
    readU(e3) {
      let t3 = 0;
      for (let i3 = 0; i3 < e3; i3++) t3 |= this.readU1() << e3 - i3 - 1;
      return t3;
    }
    peekU(e3) {
      const t3 = this.pointer, i3 = this.bitsLeft, r3 = this.pos, a3 = this.readU(e3);
      return this.pointer = t3, this.bitsLeft = i3, this.pos = r3, a3;
    }
    remainingLength() {
      return this.endPointer - this.pointer;
    }
    getBitLeft() {
      return this.bitsLeft;
    }
    getPointer() {
      return this.pointer;
    }
    setPointer(e3) {
      this.pointer = e3;
    }
    getPos() {
      return this.pos;
    }
    skip(e3) {
      const t3 = (e3 - e3 % 8) / 8;
      this.pointer += t3, this.pos += BigInt(t3);
      const i3 = e3 % 8;
      this.bitsLeft <= i3 ? (this.pointer++, this.pos++, this.bitsLeft = 8 - (i3 - this.bitsLeft)) : this.bitsLeft -= i3;
    }
    flush() {
      if (!this.onFlush) throw this.error = -1048574, Error("IOReader error, flush failed because of no flush callback");
      if (0 === this.bitsLeft && (this.pointer++, this.pos++), !(this.size - this.remainingLength() <= 0)) if (this.pointer < this.endPointer) {
        this.buffer.set(this.buffer.subarray(this.pointer, this.endPointer), 0);
        const e3 = this.onFlush(this.buffer.subarray(this.endPointer - this.pointer, this.size));
        if (e3 < 0) throw this.error = e3, Error("IOReader error, flush failed");
        this.endPointer = this.endPointer - this.pointer + e3, this.pointer = 0;
      } else {
        const e3 = this.onFlush(this.buffer);
        if (this.endPointer = e3, this.pointer = 0, this.bitsLeft = 8, e3 < 0) throw this.error = e3, Error("IOReader error, flush failed");
      }
    }
    getBuffer() {
      return this.buffer;
    }
    appendBuffer(e3) {
      if (this.size - this.endPointer >= e3.length) this.buffer.set(e3, this.endPointer), this.endPointer += e3.length;
      else if (this.buffer.set(this.buffer.subarray(this.pointer, this.endPointer), 0), this.endPointer = this.endPointer - this.pointer, this.pointer = 0, this.size - this.endPointer >= e3.length) this.buffer.set(e3, this.endPointer), this.endPointer += e3.length;
      else {
        const t3 = Math.min(this.size - this.endPointer, e3.length);
        this.buffer.set(e3.subarray(0, t3), this.endPointer), this.endPointer += t3, a2.R8("BSReader, call appendBuffer but the buffer's size is lagger then the remaining size", "src/common/io/BitReader.ts", 257);
      }
    }
    reset() {
      this.pointer = this.endPointer = 0, this.bitsLeft = 8, this.error = 0, this.pos = BigInt(0);
    }
    skipPadding() {
      this.bitsLeft < 8 && (this.bitsLeft = 8, this.pointer++, this.pos++);
    }
  }
}, 83314: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(134);
  class a2 {
    constructor(e3 = 1048576) {
      (0, r2.A)(this, "buffer", void 0), (0, r2.A)(this, "pointer", void 0), (0, r2.A)(this, "pos", void 0), (0, r2.A)(this, "bitPointer", void 0), (0, r2.A)(this, "size", void 0), (0, r2.A)(this, "error", void 0), (0, r2.A)(this, "onFlush", void 0), this.pointer = 0, this.bitPointer = 0, this.size = e3, this.error = 0, this.pos = BigInt(0), this.buffer = new Uint8Array(this.size);
    }
    writeU1(e3) {
      (this.remainingLength() < 1 || 1 === this.remainingLength() && this.bitPointer >= 8) && this.flush(), 1 & e3 ? this.buffer[this.pointer] |= 1 << 7 - this.bitPointer : this.buffer[this.pointer] &= ~(1 << 7 - this.bitPointer), this.bitPointer++, 8 === this.bitPointer && (this.pointer++, this.pos++, this.bitPointer = 0);
    }
    writeU(e3, t3) {
      for (let i3 = 0; i3 < e3; i3++) this.writeU1(t3 >> e3 - i3 - 1 & 1);
    }
    remainingLength() {
      return this.size - this.pointer;
    }
    flush() {
      if (!this.onFlush) throw this.error = -1048574, Error("BSWriter error, flush failed because of no flush callback");
      if (this.pointer) {
        if (this.bitPointer && this.pointer > 0) {
          const e3 = this.onFlush(this.buffer.subarray(0, this.pointer).slice());
          if (0 !== e3) throw this.error = e3, Error("BSWriter error, flush failed");
          this.buffer[0] = this.buffer[this.pointer];
        } else if (0 === this.bitPointer) {
          const e3 = this.onFlush(this.buffer.subarray(0, this.pointer));
          if (0 !== e3) throw this.error = e3, Error("BSWriter error, flush failed");
        }
      }
      this.pointer = 0;
    }
    padding() {
      for (; 0 !== this.bitPointer; ) this.writeU1(0);
    }
    reset() {
      this.pointer = 0, this.bitPointer = 0, this.error = 0, this.pos = BigInt(0);
    }
    getBuffer() {
      return this.buffer;
    }
    getPointer() {
      return this.pointer;
    }
    getPos() {
      return this.pos;
    }
  }
}, 31865: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(134), a2 = i2(92647), s2 = i2(50011);
  class n {
    constructor(e3, t3 = true) {
      (0, r2.A)(this, "data", void 0), (0, r2.A)(this, "buffer", void 0), (0, r2.A)(this, "byteStart", void 0), (0, r2.A)(this, "pos", void 0), (0, r2.A)(this, "size", void 0), (0, r2.A)(this, "littleEndian", void 0), this.buffer = e3, this.data = e3 instanceof Uint8Array ? new DataView(e3.buffer) : e3.view, this.byteStart = e3 instanceof Uint8Array ? e3.byteOffset : 0, this.pos = 0, this.size = e3.byteLength, this.littleEndian = !t3;
    }
    readUint8() {
      return this.data.getUint8(this.pos++ + this.byteStart);
    }
    peekUint8() {
      return this.data.getUint8(this.pos + this.byteStart);
    }
    readUint16() {
      const e3 = this.data.getUint16(this.pos + this.byteStart, this.littleEndian);
      return this.pos += 2, e3;
    }
    peekUint16() {
      return this.data.getUint16(this.pos + this.byteStart, this.littleEndian);
    }
    readUint24() {
      const e3 = this.readUint16(), t3 = this.readUint8();
      return this.littleEndian ? t3 << 16 | e3 : e3 << 8 | t3;
    }
    peekUint24() {
      const e3 = this.readUint16(), t3 = this.readUint8();
      return this.pos -= 3, this.littleEndian ? t3 << 16 | e3 : e3 << 8 | t3;
    }
    readUint32() {
      const e3 = this.data.getUint32(this.pos + this.byteStart, this.littleEndian);
      return this.pos += 4, e3;
    }
    peekUint32() {
      return this.data.getUint32(this.pos + this.byteStart, this.littleEndian);
    }
    readUint64() {
      const e3 = BigInt(this.readUint32()), t3 = BigInt(this.readUint32());
      return this.littleEndian ? t3 << BigInt(32) | e3 : e3 << BigInt(32) | t3;
    }
    peekUint64() {
      const e3 = BigInt(this.readUint32()), t3 = BigInt(this.readUint32());
      return this.pos -= 8, this.littleEndian ? t3 << BigInt(32) | e3 : e3 << BigInt(32) | t3;
    }
    readInt8() {
      return this.data.getInt8(this.pos++ + this.byteStart);
    }
    peekInt8() {
      return this.data.getInt8(this.pos + this.byteStart);
    }
    readInt16() {
      const e3 = this.data.getInt16(this.pos + this.byteStart, this.littleEndian);
      return this.pos += 2, e3;
    }
    peekInt16() {
      return this.data.getInt16(this.pos + this.byteStart, this.littleEndian);
    }
    readInt24() {
      const e3 = this.readUint24();
      return 8388608 & e3 ? e3 - 16777216 : e3;
    }
    peekInt24() {
      const e3 = this.peekUint24();
      return 8388608 & e3 ? e3 - 16777216 : e3;
    }
    readInt32() {
      const e3 = this.data.getInt32(this.pos + this.byteStart, this.littleEndian);
      return this.pos += 4, e3;
    }
    peekInt32() {
      return this.data.getInt32(this.pos + this.byteStart, this.littleEndian);
    }
    readInt64() {
      const e3 = BigInt(this.readInt32()), t3 = BigInt(this.readInt32());
      return this.littleEndian ? t3 << BigInt(32) | e3 : e3 << BigInt(32) | t3;
    }
    peekInt64() {
      const e3 = BigInt(this.readInt32()), t3 = BigInt(this.readInt32());
      return this.pos -= 8, this.littleEndian ? t3 << BigInt(32) | e3 : e3 << BigInt(32) | t3;
    }
    readFloat() {
      const e3 = this.data.getFloat32(this.pos + this.byteStart, this.littleEndian);
      return this.pos += 4, e3;
    }
    peekFloat() {
      return this.data.getFloat32(this.pos + this.byteStart, this.littleEndian);
    }
    readDouble() {
      const e3 = this.data.getFloat64(this.pos + this.byteStart, this.littleEndian);
      return this.pos += 8, e3;
    }
    peekDouble() {
      return this.data.getFloat64(this.pos + this.byteStart, this.littleEndian);
    }
    readHex(e3 = 1) {
      let t3 = "";
      for (let i3 = 0; i3 < e3; i3++) {
        const e4 = this.readUint8().toString(16);
        t3 += 1 === e4.length ? "0" + e4 : e4;
      }
      return t3;
    }
    peekHex(e3 = 1) {
      const t3 = this.pos, i3 = this.readHex(e3);
      return this.pos = t3, i3;
    }
    readString(e3 = 1) {
      let t3 = "";
      if (e3) {
        let i3 = this.pos;
        for (let t4 = 0; t4 < e3 && 0 === this.buffer[this.pos + t4]; t4++) i3++;
        t3 = s2.decode(this.buffer.subarray(i3, i3 + e3));
      }
      return this.pos += e3, t3;
    }
    peekString(e3 = 1) {
      const t3 = this.pos, i3 = this.readString(e3);
      return this.pos = t3, i3;
    }
    readLine() {
      let e3 = "";
      for (let t3 = this.pos; t3 < this.size; t3++) if (10 === this.buffer[t3] || 13 === this.buffer[t3]) {
        e3 += this.readString(t3 - this.pos);
        break;
      }
      for (let e4 = this.pos; e4 < this.size && (10 === this.buffer[e4] || 13 === this.buffer[e4]); e4++) this.readUint8();
      return e3;
    }
    peekLine() {
      const e3 = this.pos, t3 = this.readLine();
      return this.pos = e3, t3;
    }
    getPos() {
      return BigInt(this.pos);
    }
    seek(e3) {
      e3 > this.size && (e3 = this.size), this.pos = Math.max(0, e3);
    }
    skip(e3) {
      this.seek(this.pos + e3);
    }
    back(e3) {
      this.seek(this.pos - e3);
    }
    remainingSize() {
      return this.size - this.pos;
    }
    readBuffer(e3) {
      e3 = Math.min(e3, this.remainingSize());
      const t3 = this.buffer.slice(this.pos, this.pos + e3);
      return this.pos += e3, t3;
    }
    appendBuffer(e3) {
      this.buffer = (0, a2.A)(Uint8Array, [this.buffer.slice(), e3.slice()]), this.data = new DataView(this.buffer.buffer), this.size += e3.byteLength, this.byteStart = 0;
    }
    resetBuffer(e3, t3 = true) {
      this.buffer = e3, this.data = e3 instanceof Uint8Array ? new DataView(e3.buffer) : e3.view, this.byteStart = e3 instanceof Uint8Array ? e3.byteOffset : 0, this.pos = 0, this.size = e3.byteLength, this.littleEndian = !t3;
    }
  }
}, 729: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(134), a2 = i2(4624), s2 = i2(50011);
  class n {
    constructor(e3, t3 = true) {
      (0, r2.A)(this, "data", void 0), (0, r2.A)(this, "buffer", void 0), (0, r2.A)(this, "byteStart", void 0), (0, r2.A)(this, "pos", void 0), (0, r2.A)(this, "size", void 0), (0, r2.A)(this, "littleEndian", void 0), this.buffer = e3, this.data = e3 instanceof Uint8Array ? new DataView(e3.buffer) : e3.view, this.byteStart = e3 instanceof Uint8Array ? e3.byteOffset : 0, this.pos = 0, this.size = e3.byteLength, this.littleEndian = !t3;
    }
    writeUint8(e3) {
      this.data.setUint8(this.pos++ + this.byteStart, e3);
    }
    writeUint16(e3) {
      this.data.setUint16(this.pos + this.byteStart, e3, this.littleEndian), this.pos += 2;
    }
    writeUint24(e3) {
      const t3 = 3840 & e3, i3 = 240 & e3, r3 = 15 & e3;
      this.littleEndian ? (this.writeUint8(r3), this.writeUint8(i3), this.writeUint8(t3)) : (this.writeUint8(t3), this.writeUint8(i3), this.writeUint8(r3));
    }
    writeUint32(e3) {
      this.data.setUint32(this.pos + this.byteStart, e3, this.littleEndian), this.pos += 4;
    }
    writeUint64(e3) {
      this.data.setBigUint64(this.pos + this.byteStart, e3, this.littleEndian), this.pos += 8;
    }
    writeInt8(e3) {
      this.data.setInt8(this.pos++ + this.byteStart, e3);
    }
    writeInt16(e3) {
      this.data.setInt16(this.pos + this.byteStart, e3, this.littleEndian), this.pos += 2;
    }
    writeInt24(e3) {
      this.writeUint24(e3 < 0 ? e3 + 16777216 : e3);
    }
    writeInt32(e3) {
      this.data.setInt32(this.pos + this.byteStart, e3, this.littleEndian), this.pos += 4;
    }
    writeInt64(e3) {
      this.data.setBigInt64(this.pos + this.byteStart, e3, this.littleEndian), this.pos += 8;
    }
    writeFloat(e3) {
      this.data.setFloat32(this.pos + this.byteStart, e3, this.littleEndian), this.pos += 4;
    }
    writeDouble(e3) {
      this.data.setFloat64(this.pos + this.byteStart, e3, this.littleEndian), this.pos += 8;
    }
    getPos() {
      return this.pos;
    }
    seek(e3) {
      e3 > this.size && (e3 = this.size), this.pos = Math.max(0, e3);
    }
    skip(e3) {
      this.seek(this.pos + e3);
    }
    back(e3) {
      this.seek(this.pos - e3);
    }
    remainingSize() {
      return this.size - this.pos;
    }
    writeBuffer(e3) {
      let t3 = e3.length;
      this.remainingSize() < t3 && (t3 = this.remainingSize(), a2.R8("the remaining buffer size is smaller then the wrote buffer, hope set ".concat(e3.length, ", but set ").concat(t3), "src/common/io/BufferWriter.ts", 202)), this.buffer.set(e3, this.pos), this.pos += e3.length;
    }
    writeString(e3) {
      const t3 = s2.encode(e3);
      return this.writeBuffer(t3), t3.length;
    }
    getWroteBuffer() {
      return this.buffer.subarray(0, this.pos);
    }
    resetBuffer(e3, t3 = true) {
      this.buffer = e3, this.data = e3 instanceof Uint8Array ? new DataView(e3.buffer) : e3.view, this.byteStart = e3 instanceof Uint8Array ? e3.byteOffset : 0, this.pos = 0, this.size = e3.byteLength, this.littleEndian = !t3;
    }
  }
}, 24175: (e2, t2, i2) => {
  i2.d(t2, { A: () => h });
  var r2 = i2(134), a2 = i2(54001), s2 = i2.n(a2), n = i2(4624), o = i2(50011), c = i2(13724);
  const d2 = "src/common/io/IOReader.ts";
  class h {
    constructor(e3 = 1048576, t3 = true, i3) {
      if ((0, r2.A)(this, "data", void 0), (0, r2.A)(this, "buffer", void 0), (0, r2.A)(this, "pointer", void 0), (0, r2.A)(this, "endPointer", void 0), (0, r2.A)(this, "pos", void 0), (0, r2.A)(this, "size", void 0), (0, r2.A)(this, "littleEndian", void 0), (0, r2.A)(this, "fileSize_", void 0), (0, r2.A)(this, "error", void 0), (0, r2.A)(this, "onFlush", void 0), (0, r2.A)(this, "onSeek", void 0), (0, r2.A)(this, "onSize", void 0), (0, r2.A)(this, "flags", void 0), (0, r2.A)(this, "flushResolve", void 0), this.pos = BigInt(0), this.pointer = 0, this.error = 0, this.endPointer = 0, this.littleEndian = !t3, this.flags = 0, i3 && i3.view) this.size = i3.length, this.buffer = i3, this.data = i3.view;
      else if (i3 && !i3.byteOffset) this.size = i3.length, this.buffer = i3, this.data = new DataView(this.buffer.buffer);
      else {
        if (i3) throw new Error("not support subarray of ArrayBuffer");
        this.size = Math.max(e3, 102400), this.buffer = new Uint8Array(this.size), this.data = new DataView(this.buffer.buffer);
      }
    }
    async readUint8() {
      this.remainingLength() < 1 && await this.flush(1);
      const e3 = this.data.getUint8(this.pointer);
      return this.pointer++, this.pos++, e3;
    }
    async peekUint8() {
      return this.remainingLength() < 1 && await this.flush(1), this.data.getUint8(this.pointer);
    }
    async readUint16() {
      this.remainingLength() < 2 && await this.flush(2);
      const e3 = this.data.getUint16(this.pointer, this.littleEndian);
      return this.pointer += 2, this.pos += BigInt(2), e3;
    }
    async peekUint16() {
      return this.remainingLength() < 2 && await this.flush(2), this.data.getUint16(this.pointer, this.littleEndian);
    }
    async readUint24() {
      this.remainingLength() < 3 && await this.flush(3);
      const e3 = await this.readUint16(), t3 = await this.readUint8();
      return this.littleEndian ? t3 << 16 | e3 : e3 << 8 | t3;
    }
    async peekUint24() {
      this.remainingLength() < 3 && await this.flush(3);
      const e3 = this.pointer, t3 = this.pos, i3 = await this.readUint16(), r3 = await this.readUint8(), a3 = this.littleEndian ? r3 << 16 | i3 : i3 << 8 | r3;
      return this.pointer = e3, this.pos = t3, a3;
    }
    async readUint32() {
      this.remainingLength() < 4 && await this.flush(4);
      const e3 = this.data.getUint32(this.pointer, this.littleEndian);
      return this.pointer += 4, this.pos += BigInt(4), e3;
    }
    async peekUint32() {
      return this.remainingLength() < 4 && await this.flush(4), this.data.getUint32(this.pointer, this.littleEndian);
    }
    async readUint64() {
      this.remainingLength() < 8 && await this.flush(8);
      const e3 = this.data.getBigUint64(this.pointer, this.littleEndian);
      return this.pointer += 8, this.pos += BigInt(8), e3;
    }
    async peekUint64() {
      return this.remainingLength() < 8 && await this.flush(8), this.data.getBigUint64(this.pointer, this.littleEndian);
    }
    async readInt8() {
      this.remainingLength() < 1 && await this.flush(1);
      const e3 = this.data.getInt8(this.pointer);
      return this.pointer++, this.pos++, e3;
    }
    async peekInt8() {
      return this.remainingLength() < 1 && await this.flush(1), this.data.getInt8(this.pointer);
    }
    async readInt16() {
      this.remainingLength() < 2 && await this.flush(2);
      const e3 = this.data.getInt16(this.pointer, this.littleEndian);
      return this.pointer += 2, this.pos += BigInt(2), e3;
    }
    async peekInt16() {
      return this.remainingLength() < 2 && await this.flush(2), this.data.getInt16(this.pointer, this.littleEndian);
    }
    async readInt24() {
      const e3 = await this.readUint24();
      return 8388608 & e3 ? e3 - 16777216 : e3;
    }
    async peekInt24() {
      const e3 = await this.peekUint24();
      return 8388608 & e3 ? e3 - 16777216 : e3;
    }
    async readInt32() {
      this.remainingLength() < 4 && await this.flush(4);
      const e3 = this.data.getInt32(this.pointer, this.littleEndian);
      return this.pointer += 4, this.pos += BigInt(4), e3;
    }
    async peekInt32() {
      return this.remainingLength() < 4 && await this.flush(4), this.data.getInt32(this.pointer, this.littleEndian);
    }
    async readInt64() {
      this.remainingLength() < 8 && await this.flush(8);
      const e3 = this.data.getBigInt64(this.pointer, this.littleEndian);
      return this.pointer += 8, this.pos += BigInt(8), e3;
    }
    async peekInt64() {
      return this.remainingLength() < 8 && await this.flush(8), this.data.getBigInt64(this.pointer, this.littleEndian);
    }
    async readFloat() {
      this.remainingLength() < 4 && await this.flush(4);
      const e3 = this.data.getFloat32(this.pointer, this.littleEndian);
      return this.pointer += 4, this.pos += BigInt(4), e3;
    }
    async peekFloat() {
      return this.remainingLength() < 4 && await this.flush(4), this.data.getFloat32(this.pointer, this.littleEndian);
    }
    async readDouble() {
      this.remainingLength() < 8 && await this.flush(8);
      const e3 = this.data.getFloat64(this.pointer, this.littleEndian);
      return this.pointer += 8, this.pos += BigInt(8), e3;
    }
    async peekDouble() {
      return this.remainingLength() < 8 && await this.flush(8), this.data.getFloat64(this.pointer, this.littleEndian);
    }
    async readHex(e3 = 1) {
      let t3 = "";
      for (let i3 = 0; i3 < e3; i3++) {
        const e4 = (await this.readUint8()).toString(16);
        t3 += 1 === e4.length ? "0" + e4 : e4;
      }
      return t3;
    }
    async peekHex(e3 = 1) {
      e3 > this.size && (this.error = -1048574, n.h2("peekHex, length too large", d2, 416)), this.remainingLength() < e3 && await this.flush(e3);
      const t3 = this.pointer, i3 = this.pos;
      let r3 = "";
      for (let t4 = 0; t4 < e3; t4++) {
        const e4 = (await this.readUint8()).toString(16);
        r3 += 1 === e4.length ? "0" + e4 : e4;
      }
      return this.pointer = t3, this.pos = i3, r3;
    }
    async readBuffer(e3, t3) {
      if (t3 || (t3 = new Uint8Array(e3)), this.remainingLength() < e3) {
        let i3 = 0;
        if (this.remainingLength() > 0) {
          const r3 = this.remainingLength();
          t3.set(this.buffer.subarray(this.pointer, this.pointer + r3), i3), i3 += r3, this.pointer += r3, this.pos += BigInt(r3), e3 -= r3;
        }
        for (; e3 > 0; ) {
          await this.flush();
          const r3 = Math.min(this.endPointer - this.pointer, e3);
          t3.set(this.buffer.subarray(this.pointer, this.pointer + r3), i3), i3 += r3, this.pointer += r3, this.pos += BigInt(r3), e3 -= r3;
        }
      } else t3.set(this.buffer.subarray(this.pointer, this.pointer + e3), 0), this.pointer += e3, this.pos += BigInt(e3);
      return t3;
    }
    async peekBuffer(e3, t3) {
      return e3 > this.size && (this.error = -1048574, n.h2("peekBuffer, length too large", d2, 501)), this.remainingLength() < e3 && await this.flush(e3), t3 || (t3 = new Uint8Array(e3)), t3.set(this.buffer.subarray(this.pointer, this.pointer + e3), 0), t3;
    }
    async readToBuffer(e3, t3) {
      if (this.remainingLength() < e3) {
        let i3 = 0;
        if (this.remainingLength() > 0) {
          const r3 = this.remainingLength();
          t3.set(this.buffer.subarray(this.pointer, this.pointer + r3), i3), i3 += r3, this.pointer += r3, this.pos += BigInt(r3), e3 -= r3;
        }
        for (; e3 > 0; ) {
          try {
            await this.flush();
          } catch (e4) {
            if (-1048576 === this.error && i3) return i3;
            throw e4;
          }
          const r3 = Math.min(this.endPointer - this.pointer, e3);
          t3.set(this.buffer.subarray(this.pointer, this.pointer + r3), i3), i3 += r3, this.pointer += r3, this.pos += BigInt(r3), e3 -= r3;
        }
        return i3;
      }
      return t3.set(this.buffer.subarray(this.pointer, this.pointer + e3), 0), this.pointer += e3, this.pos += BigInt(e3), e3;
    }
    async readString(e3 = 1) {
      const t3 = await this.readBuffer(e3);
      return o.decode(t3);
    }
    async peekString(e3 = 1) {
      const t3 = await this.peekBuffer(e3);
      return o.decode(t3);
    }
    async readLine() {
      let e3 = "";
      for (; ; ) {
        let t4 = false;
        for (let i3 = this.pointer; i3 < this.endPointer; i3++) if (10 === this.buffer[i3] || 13 === this.buffer[i3]) {
          i3 !== this.pointer && (e3 += await this.readString(i3 - this.pointer)), t4 = true;
          break;
        }
        if (t4) break;
        e3 += await this.readString(this.remainingLength()), await this.flush();
      }
      let t3 = await this.peekUint8();
      return 10 !== t3 && 13 !== t3 || (this.pointer++, 13 === t3 && (t3 = await this.peekUint8(), 10 === t3 && this.pointer++)), e3;
    }
    async peekLine() {
      if (this.remainingLength() < this.size) try {
        await this.flush();
      } catch (e4) {
        if (-1048576 !== this.error) throw e4;
      }
      let e3 = "", t3 = false;
      for (let i3 = this.pointer; i3 < this.endPointer; i3++) if (10 === this.buffer[i3] || 13 === this.buffer[i3]) {
        e3 += await this.peekString(i3 - this.pointer), t3 = true;
        break;
      }
      return t3 || (this.error = -1048574, n.h2("peekLine, out of buffer", d2, 659)), e3;
    }
    getPointer() {
      return this.pointer;
    }
    getPos() {
      return this.pos;
    }
    async skip(e3) {
      const t3 = e3;
      for (; this.remainingLength() < e3; ) e3 -= this.remainingLength(), this.pointer = this.endPointer, await this.flush();
      this.remainingLength() >= e3 && (this.pointer += e3), this.pos += BigInt(t3);
    }
    remainingLength() {
      return this.endPointer - this.pointer;
    }
    async flush_(e3) {
      return new (s2())(async (t3) => {
        for (this.flushResolve = t3; ; ) {
          const i3 = await this.onFlush(e3);
          if (-1048575 !== i3) {
            this.flushResolve = null, t3(i3);
            break;
          }
          await new c.A(0);
        }
      });
    }
    async flush(e3 = 0) {
      if (this.onFlush || (this.error = -1048574, n.h2("IOReader error, flush failed because of no flush callback", d2, 738)), !(this.size - this.remainingLength() <= 0)) {
        if (e3 = Math.min(e3, this.size), this.pointer < this.endPointer ? (this.buffer.set(this.buffer.subarray(this.pointer, this.endPointer), 0), this.endPointer = this.endPointer - this.pointer) : this.endPointer = 0, this.pointer = 0, e3) for (; this.remainingLength() < e3; ) {
          const e4 = await this.flush_(this.buffer.subarray(this.endPointer));
          if (e4 < 0) throw this.error = e4, new Error("IOReader error, flush ".concat(-1048576 === e4 ? "ended" : "failed", ", ret: ").concat(e4));
          this.endPointer += e4;
        }
        else {
          const e4 = await this.flush_(this.buffer.subarray(this.endPointer));
          if (e4 < 0) throw this.error = e4, new Error("IOReader error, flush ".concat(-1048576 === e4 ? "ended" : "failed", ", ret: ").concat(e4));
          this.endPointer += e4;
        }
        this.error = 0;
      }
    }
    async seek(e3, t3 = false, i3 = true) {
      if (!t3) {
        const t4 = Number(e3 - this.pos);
        if (t4 < 0 && Math.abs(t4) < this.pointer) return this.pointer += t4, void (this.pos = e3);
        if (t4 > 0 && this.pointer + t4 < this.endPointer) return this.pointer += t4, void (this.pos = e3);
        if (0 === t4) return;
      }
      this.onSeek || (this.error = -1048574, n.h2("IOReader error, seek failed because of no seek callback", d2, 809)), this.pointer = this.endPointer = 0, this.pos = e3;
      const r3 = await this.onSeek(e3);
      0 !== r3 && (this.error = r3, n.h2("IOReader error, seek failed", d2, 818)), i3 && await this.flush();
    }
    getBuffer() {
      return this.buffer;
    }
    appendBuffer(e3) {
      if (this.size - this.endPointer >= e3.length) this.buffer.set(e3, this.endPointer), this.endPointer += e3.length;
      else if (this.buffer.set(this.buffer.subarray(this.pointer, this.endPointer), 0), this.endPointer = this.endPointer - this.pointer, this.pointer = 0, this.size - this.endPointer >= e3.length) this.buffer.set(e3, this.endPointer), this.endPointer += e3.length;
      else {
        const t3 = Math.min(this.size - this.endPointer, e3.length);
        this.buffer.set(e3.subarray(0, t3), this.endPointer), this.endPointer += t3, n.R8("IOReader, call appendBuffer but the buffer's size is lagger then the remaining size", d2, 856);
      }
    }
    reset() {
      this.pointer = this.endPointer = 0, this.pos = BigInt(0), this.error = 0;
    }
    setEndian(e3) {
      this.littleEndian = !e3;
    }
    isBigEndian() {
      return !this.littleEndian;
    }
    async fileSize() {
      if (this.fileSize_) return this.fileSize_;
      if (!this.onSize) return n.R8("IOReader error, fileSize failed because of no onSize callback", d2, 898), BigInt(0);
      try {
        this.fileSize_ = await this.onSize();
      } catch (e3) {
        n.R8("IOReader error, call fileSize failed: ".concat(e3), d2, 905), this.fileSize_ = BigInt(0);
      }
      return this.fileSize_;
    }
    getBufferSize() {
      return this.size;
    }
    async pipe(e3, t3) {
      if (t3) if (this.remainingLength() < t3) {
        if (this.remainingLength() > 0) {
          const i3 = this.remainingLength();
          await e3.writeBuffer(this.buffer.subarray(this.pointer, this.pointer + i3)), this.pointer += i3, this.pos += BigInt(i3), t3 -= i3;
        }
        for (; t3 > 0; ) {
          await this.flush();
          const i3 = Math.min(this.remainingLength(), t3);
          await e3.writeBuffer(this.buffer.subarray(this.pointer, this.pointer + i3)), this.pointer += i3, this.pos += BigInt(i3), t3 -= i3;
        }
      } else await e3.writeBuffer(this.buffer.subarray(this.pointer, this.pointer + t3)), this.pointer += t3, this.pos += BigInt(t3);
      else {
        if (this.remainingLength() > 0) {
          const t4 = this.remainingLength();
          await e3.writeBuffer(this.buffer.subarray(this.pointer, this.pointer + t4)), this.pointer += t4, this.pos += BigInt(t4);
        }
        for (; await this.flush_(this.buffer.subarray(0)) > 0; ) {
          const t4 = this.remainingLength();
          await e3.writeBuffer(this.buffer.subarray(this.pointer, this.pointer + t4)), this.pointer += t4, this.pos += BigInt(t4);
        }
      }
    }
    abort() {
      this.error = -1048572, this.flushResolve && (this.flushResolve(-1048572), this.flushResolve = null);
    }
  }
}, 82348: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(134), a2 = i2(4624), s2 = i2(50011);
  const n = "src/common/io/IOReaderSync.ts";
  class o {
    constructor(e3 = 1048576, t3 = true, i3) {
      if ((0, r2.A)(this, "data", void 0), (0, r2.A)(this, "buffer", void 0), (0, r2.A)(this, "pointer", void 0), (0, r2.A)(this, "endPointer", void 0), (0, r2.A)(this, "pos", void 0), (0, r2.A)(this, "size", void 0), (0, r2.A)(this, "littleEndian", void 0), (0, r2.A)(this, "fileSize_", void 0), (0, r2.A)(this, "error", void 0), (0, r2.A)(this, "onFlush", void 0), (0, r2.A)(this, "onSeek", void 0), (0, r2.A)(this, "onSize", void 0), (0, r2.A)(this, "flags", void 0), this.pos = BigInt(0), this.pointer = 0, this.error = 0, this.endPointer = 0, this.littleEndian = !t3, this.flags = 0, i3 && i3.view) this.size = i3.length, this.buffer = i3, this.data = i3.view;
      else if (i3 && !i3.byteOffset) this.size = i3.length, this.buffer = i3, this.data = new DataView(this.buffer.buffer);
      else {
        if (i3) throw new Error("not support subarray of ArrayBuffer");
        this.size = Math.max(e3, 102400), this.buffer = new Uint8Array(this.size), this.data = new DataView(this.buffer.buffer);
      }
    }
    readUint8() {
      this.remainingLength() < 1 && this.flush(1);
      const e3 = this.data.getUint8(this.pointer);
      return this.pointer++, this.pos++, e3;
    }
    peekUint8() {
      return this.remainingLength() < 1 && this.flush(1), this.data.getUint8(this.pointer);
    }
    readUint16() {
      this.remainingLength() < 2 && this.flush(2);
      const e3 = this.data.getUint16(this.pointer, this.littleEndian);
      return this.pointer += 2, this.pos += BigInt(2), e3;
    }
    peekUint16() {
      return this.remainingLength() < 2 && this.flush(2), this.data.getUint16(this.pointer, this.littleEndian);
    }
    readUint24() {
      this.remainingLength() < 3 && this.flush(3);
      const e3 = this.readUint16(), t3 = this.readUint8();
      return this.littleEndian ? t3 << 16 | e3 : e3 << 8 | t3;
    }
    peekUint24() {
      this.remainingLength() < 3 && this.flush(3);
      const e3 = this.pointer, t3 = this.pos, i3 = this.readUint16(), r3 = this.readUint8(), a3 = this.littleEndian ? r3 << 16 | i3 : i3 << 8 | r3;
      return this.pointer = e3, this.pos = t3, a3;
    }
    readUint32() {
      this.remainingLength() < 4 && this.flush(4);
      const e3 = this.data.getUint32(this.pointer, this.littleEndian);
      return this.pointer += 4, this.pos += BigInt(4), e3;
    }
    peekUint32() {
      return this.remainingLength() < 4 && this.flush(4), this.data.getUint32(this.pointer, this.littleEndian);
    }
    readUint64() {
      this.remainingLength() < 8 && this.flush(8);
      const e3 = this.data.getBigUint64(this.pointer, this.littleEndian);
      return this.pointer += 8, this.pos += BigInt(8), e3;
    }
    peekUint64() {
      return this.remainingLength() < 8 && this.flush(8), this.data.getBigUint64(this.pointer, this.littleEndian);
    }
    readInt8() {
      this.remainingLength() < 1 && this.flush(1);
      const e3 = this.data.getInt8(this.pointer);
      return this.pointer++, this.pos++, e3;
    }
    peekInt8() {
      return this.remainingLength() < 1 && this.flush(1), this.data.getInt8(this.pointer);
    }
    readInt16() {
      this.remainingLength() < 2 && this.flush(2);
      const e3 = this.data.getInt16(this.pointer, this.littleEndian);
      return this.pointer += 2, this.pos += BigInt(2), e3;
    }
    peekInt16() {
      return this.remainingLength() < 2 && this.flush(2), this.data.getInt16(this.pointer, this.littleEndian);
    }
    readInt24() {
      const e3 = this.readUint24();
      return 8388608 & e3 ? e3 - 16777216 : e3;
    }
    peekInt24() {
      const e3 = this.peekUint24();
      return 8388608 & e3 ? e3 - 16777216 : e3;
    }
    readInt32() {
      this.remainingLength() < 4 && this.flush(4);
      const e3 = this.data.getInt32(this.pointer, this.littleEndian);
      return this.pointer += 4, this.pos += BigInt(4), e3;
    }
    peekInt32() {
      return this.remainingLength() < 4 && this.flush(4), this.data.getInt32(this.pointer, this.littleEndian);
    }
    readInt64() {
      this.remainingLength() < 8 && this.flush(8);
      const e3 = this.data.getBigInt64(this.pointer, this.littleEndian);
      return this.pointer += 8, this.pos += BigInt(8), e3;
    }
    peekInt64() {
      return this.remainingLength() < 8 && this.flush(8), this.data.getBigInt64(this.pointer, this.littleEndian);
    }
    readFloat() {
      this.remainingLength() < 4 && this.flush(4);
      const e3 = this.data.getFloat32(this.pointer, this.littleEndian);
      return this.pointer += 4, this.pos += BigInt(4), e3;
    }
    peekFloat() {
      return this.remainingLength() < 4 && this.flush(4), this.data.getFloat32(this.pointer, this.littleEndian);
    }
    readDouble() {
      this.remainingLength() < 8 && this.flush(8);
      const e3 = this.data.getFloat64(this.pointer, this.littleEndian);
      return this.pointer += 8, this.pos += BigInt(8), e3;
    }
    peekDouble() {
      return this.remainingLength() < 8 && this.flush(8), this.data.getFloat64(this.pointer, this.littleEndian);
    }
    readHex(e3 = 1) {
      let t3 = "";
      for (let i3 = 0; i3 < e3; i3++) {
        const e4 = this.readUint8().toString(16);
        t3 += 1 === e4.length ? "0" + e4 : e4;
      }
      return t3;
    }
    peekHex(e3 = 1) {
      e3 > this.size && (this.error = -1048574, a2.h2("peekHex, length too large", n, 412)), this.remainingLength() < e3 && this.flush(e3);
      const t3 = this.pointer, i3 = this.pos;
      let r3 = "";
      for (let t4 = 0; t4 < e3; t4++) {
        const e4 = this.readUint8().toString(16);
        r3 += 1 === e4.length ? "0" + e4 : e4;
      }
      return this.pointer = t3, this.pos = i3, r3;
    }
    readBuffer(e3, t3) {
      if (!e3) return new Uint8Array(0);
      if (t3 || (t3 = new Uint8Array(e3)), this.remainingLength() < e3) {
        let i3 = 0;
        if (this.remainingLength() > 0) {
          const r3 = this.remainingLength();
          t3.set(this.buffer.subarray(this.pointer, this.pointer + r3), i3), i3 += r3, this.pointer += r3, this.pos += BigInt(r3), e3 -= r3;
        }
        for (; e3 > 0; ) {
          this.flush();
          const r3 = Math.min(this.endPointer - this.pointer, e3);
          t3.set(this.buffer.subarray(this.pointer, this.pointer + r3), i3), i3 += r3, this.pointer += r3, this.pos += BigInt(r3), e3 -= r3;
        }
      } else t3.set(this.buffer.subarray(this.pointer, this.pointer + e3), 0), this.pointer += e3, this.pos += BigInt(e3);
      return t3;
    }
    peekBuffer(e3, t3) {
      return e3 ? (e3 > this.size && (this.error = -1048574, a2.h2("peekBuffer, length too large", n, 505)), this.remainingLength() < e3 && this.flush(e3), t3 || (t3 = new Uint8Array(e3)), t3.set(this.buffer.subarray(this.pointer, this.pointer + e3), 0), t3) : new Uint8Array(0);
    }
    readToBuffer(e3, t3) {
      if (this.remainingLength() < e3) {
        let i3 = 0;
        if (this.remainingLength() > 0) {
          const r3 = this.remainingLength();
          t3.set(this.buffer.subarray(this.pointer, this.pointer + r3), i3), i3 += r3, this.pointer += r3, this.pos += BigInt(r3), e3 -= r3;
        }
        for (; e3 > 0; ) {
          try {
            this.flush();
          } catch (e4) {
            if (-1048576 === this.error && i3) return i3;
            throw e4;
          }
          const r3 = Math.min(this.endPointer - this.pointer, e3);
          t3.set(this.buffer.subarray(this.pointer, this.pointer + r3), i3), i3 += r3, this.pointer += r3, this.pos += BigInt(r3), e3 -= r3;
        }
        return i3;
      }
      return t3.set(this.buffer.subarray(this.pointer, this.pointer + e3), 0), this.pointer += e3, this.pos += BigInt(e3), e3;
    }
    readString(e3 = 1) {
      const t3 = this.readBuffer(e3);
      return s2.decode(t3);
    }
    peekString(e3 = 1) {
      const t3 = this.peekBuffer(e3);
      return s2.decode(t3);
    }
    readLine() {
      let e3 = "";
      for (; ; ) {
        let t4 = false;
        for (let i3 = this.pointer; i3 < this.endPointer; i3++) if (10 === this.buffer[i3] || 13 === this.buffer[i3]) {
          i3 !== this.pointer && (e3 += this.readString(i3 - this.pointer)), t4 = true;
          break;
        }
        if (t4) break;
        e3 += this.readString(this.remainingLength()), this.flush();
      }
      let t3 = this.peekUint8();
      return 10 !== t3 && 13 !== t3 || (this.pointer++, 13 === t3 && (t3 = this.peekUint8(), 10 === t3 && this.pointer++)), e3;
    }
    peekLine() {
      this.remainingLength() < this.size && this.flush();
      let e3 = "", t3 = false;
      for (let i3 = this.pointer; i3 < this.endPointer; i3++) if (10 === this.buffer[i3] || 13 === this.buffer[i3]) {
        e3 += this.peekString(i3 - this.pointer), t3 = true;
        break;
      }
      return t3 || (this.error = -1048574, a2.h2("peekLine, out of buffer", n, 656)), e3;
    }
    getPointer() {
      return this.pointer;
    }
    getPos() {
      return this.pos;
    }
    skip(e3) {
      const t3 = e3;
      for (; this.remainingLength() < e3; ) e3 -= this.remainingLength(), this.pointer = this.endPointer, this.flush();
      this.remainingLength() >= e3 && (this.pointer += e3), this.pos += BigInt(t3);
    }
    remainingLength() {
      return this.endPointer - this.pointer;
    }
    flush(e3 = 0) {
      if (this.onFlush || (this.error = -1048574, a2.h2("IOReader error, flush failed because of no flush callback", n, 720)), !(this.size - this.remainingLength() <= 0)) {
        if (e3 = Math.min(e3, this.size), this.pointer < this.endPointer ? (this.buffer.set(this.buffer.subarray(this.pointer, this.endPointer), 0), this.endPointer = this.endPointer - this.pointer) : this.endPointer = 0, this.pointer = 0, e3) for (; this.remainingLength() < e3; ) {
          const e4 = this.onFlush(this.buffer.subarray(this.endPointer));
          if (e4 < 0) throw this.error = e4, new Error("IOReader error, flush ".concat(-1048576 === e4 ? "ended" : "failed", ", ret: ").concat(e4));
          this.endPointer += e4;
        }
        else {
          const e4 = this.onFlush(this.buffer.subarray(this.endPointer));
          if (e4 < 0) throw this.error = e4, new Error("IOReader error, flush ".concat(-1048576 === e4 ? "ended" : "failed", ", ret: ").concat(e4));
          this.endPointer += e4;
        }
        this.error = 0;
      }
    }
    seek(e3, t3 = false, i3 = true) {
      if (!t3) {
        const t4 = Number(e3 - this.pos);
        if (t4 < 0 && Math.abs(t4) < this.pointer) return this.pointer += t4, void (this.pos = e3);
        if (t4 > 0 && this.pointer + t4 < this.endPointer) return this.pointer += t4, void (this.pos = e3);
        if (0 === t4) return;
      }
      this.onSeek || (this.error = -1048574, a2.h2("IOReader error, seek failed because of no seek callback", n, 790)), this.pointer = this.endPointer = 0, this.pos = e3;
      const r3 = this.onSeek(e3);
      0 !== r3 && (this.error = r3, a2.h2("IOReader error, seek failed", n, 799)), i3 && this.flush();
    }
    getBuffer() {
      return this.buffer;
    }
    appendBuffer(e3) {
      if (this.size - this.endPointer >= e3.length) this.buffer.set(e3, this.endPointer), this.endPointer += e3.length;
      else if (this.buffer.set(this.buffer.subarray(this.pointer, this.endPointer), 0), this.endPointer = this.endPointer - this.pointer, this.pointer = 0, this.size - this.endPointer >= e3.length) this.buffer.set(e3, this.endPointer), this.endPointer += e3.length;
      else {
        const t3 = Math.min(this.size - this.endPointer, e3.length);
        this.buffer.set(e3.subarray(0, t3), this.endPointer), this.endPointer += t3, a2.R8("IOReader, call appendBuffer but the buffer's size is lagger then the remaining size", n, 838);
      }
    }
    reset() {
      this.pointer = this.endPointer = 0, this.pos = BigInt(0), this.error = 0;
    }
    setEndian(e3) {
      this.littleEndian = !e3;
    }
    isBigEndian() {
      return !this.littleEndian;
    }
    fileSize() {
      if (this.fileSize_) return this.fileSize_;
      if (!this.onSize) return a2.R8("IOReader error, fileSize failed because of no onSize callback", n, 880), BigInt(0);
      try {
        this.fileSize_ = this.onSize();
      } catch (e3) {
        a2.R8("IOReader error, call fileSize failed: ".concat(e3), n, 887), this.fileSize_ = BigInt(0);
      }
      return this.fileSize_;
    }
    getBufferSize() {
      return this.size;
    }
    pipe(e3, t3) {
      if (t3) if (this.remainingLength() < t3) {
        if (this.remainingLength() > 0) {
          const i3 = this.remainingLength();
          e3.writeBuffer(this.buffer.subarray(this.pointer, this.pointer + i3)), this.pointer += i3, this.pos += BigInt(i3), t3 -= i3;
        }
        for (; t3 > 0; ) {
          this.flush();
          const i3 = Math.min(this.endPointer - this.pointer, t3);
          e3.writeBuffer(this.buffer.subarray(this.pointer, this.pointer + i3)), this.pointer += i3, this.pos += BigInt(i3), t3 -= i3;
        }
      } else e3.writeBuffer(this.buffer.subarray(this.pointer, this.pointer + t3)), this.pointer += t3, this.pos += BigInt(t3);
      else {
        if (this.remainingLength() > 0) {
          const t4 = this.remainingLength();
          e3.writeBuffer(this.buffer.subarray(this.pointer, this.pointer + t4)), this.pointer += t4, this.pos += BigInt(t4);
        }
        for (; this.onFlush(this.buffer.subarray(0)) > 0; ) {
          const t4 = this.remainingLength();
          e3.writeBuffer(this.buffer.subarray(this.pointer, this.pointer + t4)), this.pointer += t4, this.pos += BigInt(t4);
        }
      }
    }
  }
}, 34531: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134), a2 = i2(50011);
  class s2 {
    constructor(e3 = 1048576, t3 = true, i3) {
      if ((0, r2.A)(this, "data", void 0), (0, r2.A)(this, "buffer", void 0), (0, r2.A)(this, "pointer", void 0), (0, r2.A)(this, "pos", void 0), (0, r2.A)(this, "size", void 0), (0, r2.A)(this, "littleEndian", void 0), (0, r2.A)(this, "error", void 0), (0, r2.A)(this, "onFlush", void 0), (0, r2.A)(this, "onSeek", void 0), this.pointer = 0, this.pos = BigInt(0), this.size = e3, this.littleEndian = !t3, this.error = 0, i3 && i3.view) this.size = i3.length, this.buffer = i3, this.data = i3.view;
      else if (i3 && !i3.byteOffset) this.size = i3.length, this.buffer = i3, this.data = new DataView(this.buffer.buffer);
      else {
        if (i3) throw new Error("not support subarray of ArrayBuffer");
        this.buffer = new Uint8Array(this.size), this.data = new DataView(this.buffer.buffer);
      }
    }
    async writeUint8(e3) {
      this.remainingLength() < 1 && await this.flush(), this.data.setUint8(this.pointer, e3), this.pointer++, this.pos++;
    }
    async writeUint16(e3) {
      this.remainingLength() < 2 && await this.flush(), this.data.setUint16(this.pointer, e3, this.littleEndian), this.pointer += 2, this.pos += BigInt(2);
    }
    async writeUint24(e3) {
      this.remainingLength() < 3 && await this.flush();
      const t3 = (16711680 & e3) >> 16, i3 = (65280 & e3) >> 8, r3 = 255 & e3;
      this.littleEndian ? (await this.writeUint8(r3), await this.writeUint8(i3), await this.writeUint8(t3)) : (await this.writeUint8(t3), await this.writeUint8(i3), await this.writeUint8(r3));
    }
    async writeUint32(e3) {
      this.remainingLength() < 4 && await this.flush(), this.data.setUint32(this.pointer, e3, this.littleEndian), this.pointer += 4, this.pos += BigInt(4);
    }
    async writeUint64(e3) {
      this.remainingLength() < 8 && await this.flush(), this.data.setBigUint64(this.pointer, e3, this.littleEndian), this.pointer += 8, this.pos += BigInt(8);
    }
    async writeInt8(e3) {
      this.remainingLength() < 1 && await this.flush(), this.data.setInt8(this.pointer, e3), this.pointer++, this.pos++;
    }
    async writeInt16(e3) {
      this.remainingLength() < 2 && await this.flush(), this.data.setInt16(this.pointer, e3, this.littleEndian), this.pointer += 2, this.pos += BigInt(2);
    }
    async writeInt24(e3) {
      await this.writeUint24(e3 < 0 ? e3 + 16777216 : e3);
    }
    async writeInt32(e3) {
      this.remainingLength() < 4 && await this.flush(), this.data.setInt32(this.pointer, e3, this.littleEndian), this.pointer += 4, this.pos += BigInt(4);
    }
    async writeInt64(e3) {
      this.remainingLength() < 8 && await this.flush(), this.data.setBigInt64(this.pointer, e3, this.littleEndian), this.pointer += 8, this.pos += BigInt(8);
    }
    async writeFloat(e3) {
      this.remainingLength() < 4 && await this.flush(), this.data.setFloat32(this.pointer, e3, this.littleEndian), this.pointer += 4, this.pos += BigInt(4);
    }
    async writeDouble(e3) {
      this.remainingLength() < 8 && await this.flush(), this.data.setFloat64(this.pointer, e3, this.littleEndian), this.pointer += 8, this.pos += BigInt(8);
    }
    getPointer() {
      return this.pointer;
    }
    getPos() {
      return this.pos;
    }
    remainingLength() {
      return this.size - this.pointer;
    }
    async writeBuffer(e3) {
      if (!e3.length) return;
      let t3 = e3.length;
      if (this.remainingLength() < t3) {
        let i3 = 0;
        for (; t3 > 0; ) {
          await this.flush();
          const r3 = Math.min(this.size, t3);
          this.buffer.set(e3.subarray(i3, i3 + r3), this.pointer), this.pointer += r3, this.pos += BigInt(r3), i3 += r3, t3 -= r3;
        }
      } else this.buffer.set(e3, this.pointer), this.pointer += t3, this.pos += BigInt(t3);
    }
    async writeString(e3) {
      const t3 = a2.encode(e3);
      return await this.writeBuffer(t3), t3.length;
    }
    async flush() {
      if (!this.onFlush) throw this.error = -1048574, Error("IOWriter error, flush failed because of no flush callback");
      if (this.pointer) {
        const e3 = await this.onFlush(this.buffer.subarray(0, this.pointer));
        if (0 !== e3) throw this.error = e3, Error("IOWriter error, flush failed");
      }
      this.pointer = 0;
    }
    async flushToPos(e3) {
      if (!this.onFlush) throw this.error = -1048574, Error("IOWriter error, flush failed because of no flush callback");
      if (this.pointer) {
        const t3 = await this.onFlush(this.buffer.subarray(0, this.pointer), e3);
        if (0 !== t3) throw this.error = t3, Error("IOWriter error, flush failed");
      }
      this.pointer = 0;
    }
    async seek(e3) {
      if (!this.onSeek) throw this.error = -1048574, Error("IOWriter error, seek failed because of no seek callback");
      await this.flush();
      const t3 = await this.onSeek(e3);
      if (0 !== t3) throw this.error = t3, Error("IOWriter error, seek failed");
      this.pos = e3;
    }
    seekInline(e3) {
      const t3 = this.pointer;
      this.pointer = Math.max(0, Math.min(this.size, e3)), this.pos += BigInt(this.pointer - t3);
    }
    skip(e3) {
      const t3 = this.pointer;
      this.pointer = Math.min(this.size, this.pointer + e3), this.pos += BigInt(this.pointer - t3);
    }
    back(e3) {
      const t3 = this.pointer;
      this.pointer = Math.max(0, this.pointer - e3), this.pos += BigInt(this.pointer - t3);
    }
    getBuffer() {
      return this.buffer.subarray(0, this.pointer);
    }
    setEndian(e3) {
      this.littleEndian = !e3;
    }
    reset() {
      this.pointer = 0, this.pos = BigInt(0), this.error = 0;
    }
    getBufferSize() {
      return this.size;
    }
  }
}, 35336: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134), a2 = i2(50011);
  class s2 {
    constructor(e3 = 1048576, t3 = true, i3) {
      if ((0, r2.A)(this, "data", void 0), (0, r2.A)(this, "buffer", void 0), (0, r2.A)(this, "pointer", void 0), (0, r2.A)(this, "pos", void 0), (0, r2.A)(this, "size", void 0), (0, r2.A)(this, "littleEndian", void 0), (0, r2.A)(this, "error", void 0), (0, r2.A)(this, "onFlush", void 0), (0, r2.A)(this, "onSeek", void 0), this.pointer = 0, this.pos = BigInt(0), this.size = e3, this.littleEndian = !t3, this.error = 0, i3 && i3.view) this.size = i3.length, this.buffer = i3, this.data = i3.view;
      else if (i3 && !i3.byteOffset) this.size = i3.length, this.buffer = i3, this.data = new DataView(this.buffer.buffer);
      else {
        if (i3) throw new Error("not support subarray of ArrayBuffer");
        this.buffer = new Uint8Array(this.size), this.data = new DataView(this.buffer.buffer);
      }
    }
    writeUint8(e3) {
      this.remainingLength() < 1 && this.flush(), this.data.setUint8(this.pointer, e3), this.pointer++, this.pos++;
    }
    writeUint16(e3) {
      this.remainingLength() < 2 && this.flush(), this.data.setUint16(this.pointer, e3, this.littleEndian), this.pointer += 2, this.pos += BigInt(2);
    }
    writeUint24(e3) {
      this.remainingLength() < 3 && this.flush();
      const t3 = (16711680 & e3) >> 16, i3 = (65280 & e3) >> 8, r3 = 255 & e3;
      this.littleEndian ? (this.writeUint8(r3), this.writeUint8(i3), this.writeUint8(t3)) : (this.writeUint8(t3), this.writeUint8(i3), this.writeUint8(r3));
    }
    writeUint32(e3) {
      this.remainingLength() < 4 && this.flush(), this.data.setUint32(this.pointer, e3, this.littleEndian), this.pointer += 4, this.pos += BigInt(4);
    }
    writeUint64(e3) {
      this.remainingLength() < 8 && this.flush(), this.data.setBigUint64(this.pointer, e3, this.littleEndian), this.pointer += 8, this.pos += BigInt(8);
    }
    writeInt8(e3) {
      this.remainingLength() < 1 && this.flush(), this.data.setInt8(this.pointer, e3), this.pointer++, this.pos++;
    }
    writeInt16(e3) {
      this.remainingLength() < 2 && this.flush(), this.data.setInt16(this.pointer, e3, this.littleEndian), this.pointer += 2, this.pos += BigInt(2);
    }
    writeInt24(e3) {
      this.writeUint24(e3 < 0 ? e3 + 16777216 : e3);
    }
    writeInt32(e3) {
      this.remainingLength() < 4 && this.flush(), this.data.setInt32(this.pointer, e3, this.littleEndian), this.pointer += 4, this.pos += BigInt(4);
    }
    writeInt64(e3) {
      this.remainingLength() < 8 && this.flush(), this.data.setBigInt64(this.pointer, e3, this.littleEndian), this.pointer += 8, this.pos += BigInt(8);
    }
    writeFloat(e3) {
      this.remainingLength() < 4 && this.flush(), this.data.setFloat32(this.pointer, e3, this.littleEndian), this.pointer += 4, this.pos += BigInt(4);
    }
    writeDouble(e3) {
      this.remainingLength() < 8 && this.flush(), this.data.setFloat64(this.pointer, e3, this.littleEndian), this.pointer += 8, this.pos += BigInt(8);
    }
    getPointer() {
      return this.pointer;
    }
    getPos() {
      return this.pos;
    }
    remainingLength() {
      return this.size - this.pointer;
    }
    writeBuffer(e3) {
      if (!e3.length) return;
      let t3 = e3.length;
      if (this.remainingLength() < t3) {
        let i3 = 0;
        for (; t3 > 0; ) {
          this.flush();
          const r3 = Math.min(this.size, t3);
          this.buffer.set(e3.subarray(i3, i3 + r3), this.pointer), this.pointer += r3, this.pos += BigInt(r3), i3 += r3, t3 -= r3;
        }
      } else this.buffer.set(e3, this.pointer), this.pointer += t3, this.pos += BigInt(t3);
    }
    writeString(e3) {
      const t3 = a2.encode(e3);
      return this.writeBuffer(t3), t3.length;
    }
    flush() {
      if (!this.onFlush) throw this.error = -1048574, Error("IOWriter error, flush failed because of no flush callback");
      if (this.pointer) {
        const e3 = this.onFlush(this.buffer.subarray(0, this.pointer));
        if (0 !== e3) throw this.error = e3, Error("IOWriter error, flush failed");
      }
      this.pointer = 0;
    }
    flushToPos(e3) {
      if (!this.onFlush) throw this.error = -1048574, Error("IOWriter error, flush failed because of no flush callback");
      if (this.pointer) {
        const t3 = this.onFlush(this.buffer.subarray(0, this.pointer), e3);
        if (0 !== t3) throw this.error = t3, Error("IOWriter error, flush failed");
      }
      this.pointer = 0;
    }
    seek(e3) {
      if (!this.onSeek) throw this.error = -1048574, Error("IOWriter error, seek failed because of no seek callback");
      this.flush();
      const t3 = this.onSeek(e3);
      if (0 !== t3) throw this.error = t3, Error("IOWriter error, seek failed");
      this.pos = e3;
    }
    seekInline(e3) {
      const t3 = this.pointer;
      this.pointer = Math.max(0, Math.min(this.size, e3)), this.pos += BigInt(this.pointer - t3);
    }
    skip(e3) {
      const t3 = this.pointer;
      this.pointer = Math.min(this.size, this.pointer + e3), this.pos += BigInt(this.pointer - t3);
    }
    back(e3) {
      const t3 = this.pointer;
      this.pointer = Math.max(0, this.pointer - e3), this.pos += BigInt(this.pointer - t3);
    }
    getBuffer() {
      return this.buffer.subarray(0, this.pointer);
    }
    setEndian(e3) {
      this.littleEndian = !e3;
    }
    reset() {
      this.pointer = 0, this.pos = BigInt(0), this.error = 0;
    }
    getBufferSize() {
      return this.size;
    }
  }
}, 22343: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134), a2 = i2(92647);
  class s2 {
    constructor() {
      (0, r2.A)(this, "queue", void 0), (0, r2.A)(this, "pos", void 0), (0, r2.A)(this, "startPos", void 0), (0, r2.A)(this, "endPos", void 0), (0, r2.A)(this, "index", void 0), (0, r2.A)(this, "offset", void 0), this.queue = [], this.startPos = BigInt(0), this.endPos = BigInt(0), this.pos = BigInt(0);
    }
    write(e3) {
      if (this.pos === this.endPos) this.queue.push(e3), this.endPos += BigInt(e3.length), this.pos += BigInt(e3.length);
      else if (e3.length < this.queue[this.index].length - this.offset) this.queue[this.index].set(e3, this.offset), this.offset += e3.length, this.pos += BigInt(e3.length), this.offset === this.queue[this.index].length && (this.index++, this.offset = 0), this.index === this.queue.length && (this.index = -1, this.offset = -1, this.pos = this.endPos);
      else {
        let t3 = 0;
        for (; t3 < e3.length; ) {
          const i3 = Math.min(this.queue[this.index].length - this.offset, e3.length - t3);
          if (this.queue[this.index].set(e3.subarray(t3, t3 + i3), this.offset), t3 += i3, this.offset += i3, this.pos += BigInt(i3), this.offset === this.queue[this.index].length) {
            if (this.index + 1 === this.queue.length) {
              if (t3 < e3.length) {
                const i4 = e3.subarray(e3.length - t3);
                this.queue.push(i4), this.endPos += BigInt(i4.length);
              }
              this.pos = this.endPos, this.index = -1, this.offset = -1;
              break;
            }
            this.index++, this.offset = 0;
          }
        }
      }
    }
    seek(e3) {
      if (e3 < this.startPos || e3 > this.endPos) return false;
      this.pos = e3, this.index = -1, this.offset = -1;
      let t3 = this.startPos;
      for (let i3 = 0; i3 < this.queue.length; i3++) {
        if (e3 <= t3 + BigInt(this.queue[i3].length)) {
          this.index = i3, this.offset = Number(e3 - t3);
          break;
        }
        t3 += BigInt(this.queue[i3].length);
      }
      return this.index < 0 && (this.pos = this.endPos), true;
    }
    flush() {
      this.startPos = this.endPos, this.pos = this.endPos, this.index = -1, this.offset = -1;
      const e3 = (0, a2.A)(Uint8Array, this.queue);
      return this.queue.length = 0, e3;
    }
    get size() {
      return this.queue.length;
    }
  }
}, 45726: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(134), a2 = i2(72739), s2 = i2(4624);
  const n = "src/common/math/Matrix3.ts";
  class o {
    static RowMajor(e3) {
      return new o([e3[0], e3[3], e3[6], e3[1], e3[4], e3[7], e3[2], e3[5], e3[8]]);
    }
    static ColMajor(e3) {
      return new o(e3);
    }
    constructor(e3) {
      (0, r2.A)(this, "element", void 0), e3 ? (this.element = new Float32Array(9), this.set(e3)) : this.element = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);
    }
    rc(e3, t3) {
      return this.getValue(3 * t3 + e3);
    }
    setRC(e3, t3, i3) {
      this.setValue(3 * t3 + e3, i3);
    }
    getValue(e3) {
      if (e3 >= 0 && e3 < 9) return this.element[e3];
      s2.z3("index out of Matrix4's rang [0 - 9]", n, 47);
    }
    setValue(e3, t3) {
      e3 >= 0 && e3 < 9 ? this.element[e3] = t3 : s2.z3("index out of Matrix4's rang [0 - 9]", n, 56);
    }
    setIdentity() {
      return this.element = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]), this;
    }
    set(e3) {
      return a2.__(e3, (e4, t3) => {
        this.element[t3] = e4;
      }), this;
    }
    invert() {
      const e3 = this.element, t3 = e3[0], i3 = e3[1], r3 = e3[2], a3 = e3[3], s3 = e3[4], n2 = e3[5], o2 = e3[6], c = e3[7], d2 = e3[8], h = d2 * s3 - n2 * c, l = n2 * o2 - d2 * a3, u = c * a3 - s3 * o2, f = t3 * h + i3 * l + r3 * u;
      if (0 === f) return this.set([0, 0, 0, 0, 0, 0, 0, 0, 0]);
      const p = 1 / f;
      return e3[0] = h * p, e3[1] = (r3 * c - d2 * i3) * p, e3[2] = (n2 * i3 - r3 * s3) * p, e3[3] = l * p, e3[4] = (d2 * t3 - r3 * o2) * p, e3[5] = (r3 * a3 - n2 * t3) * p, e3[6] = u * p, e3[7] = (i3 * o2 - c * t3) * p, e3[8] = (s3 * t3 - i3 * a3) * p, this;
    }
    toArray() {
      let e3 = [];
      for (let t3 = 0; t3 < 9; t3++) e3[t3] = this.element[t3];
      return e3;
    }
    copy() {
      return new o().set(this.toArray());
    }
  }
}, 12535: (e2, t2, i2) => {
  i2.d(t2, { A: () => d2 });
  var r2 = i2(134), a2 = i2(72739), s2 = i2(4624), n = i2(1064);
  const o = "src/common/math/Matrix4.ts";
  let c;
  class d2 {
    static shared() {
      return c || (c = new d2());
    }
    static RowMajor(e3) {
      return new d2([e3[0], e3[4], e3[8], e3[12], e3[1], e3[5], e3[9], e3[13], e3[2], e3[6], e3[10], e3[14], e3[3], e3[7], e3[11], e3[15]]);
    }
    static ColMajor(e3) {
      return new d2(e3);
    }
    constructor(e3) {
      (0, r2.A)(this, "element", void 0), e3 ? (this.element = new Float32Array(16), this.set(e3)) : this.element = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);
    }
    rc(e3, t3) {
      return this.getValue(4 * t3 + e3);
    }
    setRC(e3, t3, i3) {
      this.setValue(4 * t3 + e3, i3);
    }
    getValue(e3) {
      if (e3 >= 0 && e3 <= 15) return this.element[e3];
      s2.z3("index out of Matrix4's rang [0 - 15]", o, 58);
    }
    setValue(e3, t3) {
      e3 >= 0 && e3 <= 15 ? this.element[e3] = t3 : s2.z3("index out of Matrix4's rang [0 - 15]", o, 67);
    }
    setIdentity() {
      return this.element = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]), this;
    }
    set(e3) {
      return a2.__(e3, (e4, t3) => {
        this.element[t3] = e4;
      }), this;
    }
    multiply(e3) {
      let t3, i3, r3, a3, s3, n2, o2, c2;
      if (a3 = i3 = this.element, r3 = e3.element, a3 === r3) for (r3 = new Float32Array(16), t3 = 0; t3 < 16; t3++) r3[t3] = a3[t3];
      for (t3 = 0; t3 < 4; t3++) s3 = i3[t3], n2 = i3[t3 + 4], o2 = i3[t3 + 8], c2 = i3[t3 + 12], a3[t3] = s3 * r3[0] + n2 * r3[1] + o2 * r3[2] + c2 * r3[3], a3[t3 + 4] = s3 * r3[4] + n2 * r3[5] + o2 * r3[6] + c2 * r3[7], a3[t3 + 8] = s3 * r3[8] + n2 * r3[9] + o2 * r3[10] + c2 * r3[11], a3[t3 + 12] = s3 * r3[12] + n2 * r3[13] + o2 * r3[14] + c2 * r3[15];
      return this;
    }
    multiplyVector3(e3) {
      let t3 = this.element, i3 = e3.element;
      return new n.P([i3[0] * t3[0] + i3[1] * t3[4] + i3[2] * t3[8] + t3[12], i3[0] * t3[1] + i3[1] * t3[5] + i3[2] * t3[9] + t3[13], i3[0] * t3[2] + i3[1] * t3[6] + i3[2] * t3[10] + t3[14]]);
    }
    multiplyVector4(e3) {
      let t3 = this.element, i3 = e3.element;
      return new n.I([i3[0] * t3[0] + i3[1] * t3[4] + i3[2] * t3[8] + i3[3] * t3[12], i3[0] * t3[1] + i3[1] * t3[5] + i3[2] * t3[9] + i3[3] * t3[13], i3[0] * t3[2] + i3[1] * t3[6] + i3[2] * t3[10] + i3[3] * t3[14], i3[0] * t3[3] + i3[1] * t3[7] + i3[2] * t3[11] + i3[3] * t3[15]]);
    }
    transpose() {
      let e3, t3;
      return e3 = this.element, t3 = e3[1], e3[1] = e3[4], e3[4] = t3, t3 = e3[2], e3[2] = e3[8], e3[8] = t3, t3 = e3[3], e3[3] = e3[12], e3[12] = t3, t3 = e3[6], e3[6] = e3[9], e3[9] = t3, t3 = e3[7], e3[7] = e3[13], e3[13] = t3, t3 = e3[11], e3[11] = e3[14], e3[14] = t3, this;
    }
    setInverseOf(e3) {
      let t3, i3, r3, a3, s3;
      if (i3 = e3.element, r3 = this.element, a3 = new Float32Array(16), a3[0] = i3[5] * i3[10] * i3[15] - i3[5] * i3[11] * i3[14] - i3[9] * i3[6] * i3[15] + i3[9] * i3[7] * i3[14] + i3[13] * i3[6] * i3[11] - i3[13] * i3[7] * i3[10], a3[1] = -i3[1] * i3[10] * i3[15] + i3[1] * i3[11] * i3[14] + i3[9] * i3[2] * i3[15] - i3[9] * i3[3] * i3[14] - i3[13] * i3[2] * i3[11] + i3[13] * i3[3] * i3[10], a3[2] = i3[1] * i3[6] * i3[15] - i3[1] * i3[7] * i3[14] - i3[5] * i3[2] * i3[15] + i3[5] * i3[3] * i3[14] + i3[13] * i3[2] * i3[7] - i3[13] * i3[3] * i3[6], a3[3] = -i3[1] * i3[6] * i3[11] + i3[1] * i3[7] * i3[10] + i3[5] * i3[2] * i3[11] - i3[5] * i3[3] * i3[10] - i3[9] * i3[2] * i3[7] + i3[9] * i3[3] * i3[6], a3[4] = -i3[4] * i3[10] * i3[15] + i3[4] * i3[11] * i3[14] + i3[8] * i3[6] * i3[15] - i3[8] * i3[7] * i3[14] - i3[12] * i3[6] * i3[11] + i3[12] * i3[7] * i3[10], a3[5] = i3[0] * i3[10] * i3[15] - i3[0] * i3[11] * i3[14] - i3[8] * i3[2] * i3[15] + i3[8] * i3[3] * i3[14] + i3[12] * i3[2] * i3[11] - i3[12] * i3[3] * i3[10], a3[6] = -i3[0] * i3[6] * i3[15] + i3[0] * i3[7] * i3[14] + i3[4] * i3[2] * i3[15] - i3[4] * i3[3] * i3[14] - i3[12] * i3[2] * i3[7] + i3[12] * i3[3] * i3[6], a3[7] = i3[0] * i3[6] * i3[11] - i3[0] * i3[7] * i3[10] - i3[4] * i3[2] * i3[11] + i3[4] * i3[3] * i3[10] + i3[8] * i3[2] * i3[7] - i3[8] * i3[3] * i3[6], a3[8] = i3[4] * i3[9] * i3[15] - i3[4] * i3[11] * i3[13] - i3[8] * i3[5] * i3[15] + i3[8] * i3[7] * i3[13] + i3[12] * i3[5] * i3[11] - i3[12] * i3[7] * i3[9], a3[9] = -i3[0] * i3[9] * i3[15] + i3[0] * i3[11] * i3[13] + i3[8] * i3[1] * i3[15] - i3[8] * i3[3] * i3[13] - i3[12] * i3[1] * i3[11] + i3[12] * i3[3] * i3[9], a3[10] = i3[0] * i3[5] * i3[15] - i3[0] * i3[7] * i3[13] - i3[4] * i3[1] * i3[15] + i3[4] * i3[3] * i3[13] + i3[12] * i3[1] * i3[7] - i3[12] * i3[3] * i3[5], a3[11] = -i3[0] * i3[5] * i3[11] + i3[0] * i3[7] * i3[9] + i3[4] * i3[1] * i3[11] - i3[4] * i3[3] * i3[9] - i3[8] * i3[1] * i3[7] + i3[8] * i3[3] * i3[5], a3[12] = -i3[4] * i3[9] * i3[14] + i3[4] * i3[10] * i3[13] + i3[8] * i3[5] * i3[14] - i3[8] * i3[6] * i3[13] - i3[12] * i3[5] * i3[10] + i3[12] * i3[6] * i3[9], a3[13] = i3[0] * i3[9] * i3[14] - i3[0] * i3[10] * i3[13] - i3[8] * i3[1] * i3[14] + i3[8] * i3[2] * i3[13] + i3[12] * i3[1] * i3[10] - i3[12] * i3[2] * i3[9], a3[14] = -i3[0] * i3[5] * i3[14] + i3[0] * i3[6] * i3[13] + i3[4] * i3[1] * i3[14] - i3[4] * i3[2] * i3[13] - i3[12] * i3[1] * i3[6] + i3[12] * i3[2] * i3[5], a3[15] = i3[0] * i3[5] * i3[10] - i3[0] * i3[6] * i3[9] - i3[4] * i3[1] * i3[10] + i3[4] * i3[2] * i3[9] + i3[8] * i3[1] * i3[6] - i3[8] * i3[2] * i3[5], s3 = i3[0] * a3[0] + i3[1] * a3[4] + i3[2] * a3[8] + i3[3] * a3[12], 0 === s3) return this;
      for (s3 = 1 / s3, t3 = 0; t3 < 16; t3++) r3[t3] = a3[t3] * s3;
      return this;
    }
    invert() {
      return this.setInverseOf(this), this;
    }
    setOrtho(e3, t3, i3, r3, a3, n2) {
      let c2, d3, h;
      return e3 !== t3 && i3 !== r3 && a3 !== n2 || s2.h2("null frustum", o, 240), c2 = 1 / (t3 - e3), d3 = 1 / (r3 - i3), h = 1 / (n2 - a3), this.set([2 * c2, 0, 0, 0, 0, 2 * d3, 0, 0, 0, 0, -2 * h, 0, -(t3 + e3) * c2, -(r3 + i3) * d3, -(n2 + a3) * h, 1]), this;
    }
    ortho(e3, t3, i3, r3, a3, s3) {
      return this.multiply(new d2().setOrtho(e3, t3, i3, r3, a3, s3));
    }
    setFrustum(e3, t3, i3, r3, a3, n2) {
      let c2, d3, h;
      return e3 !== t3 && i3 !== r3 && a3 !== n2 || s2.z3("null frustum", o, 281), a3 <= 0 && s2.h2("near <= 0", o, 284), n2 <= 0 && s2.h2("far <= 0", o, 287), c2 = 1 / (t3 - e3), d3 = 1 / (r3 - i3), h = 1 / (n2 - a3), this.set([2 * a3 * c2, 0, 0, 0, 0, 2 * a3 * d3, 0, 0, (t3 + e3) * c2, (r3 + i3) * d3, -(n2 + a3) * h, -1, 0, 0, -2 * a3 * n2 * h, 0]), this;
    }
    frustum(e3, t3, i3, r3, a3, s3) {
      return this.multiply(new d2().setOrtho(e3, t3, i3, r3, a3, s3));
    }
    setPerspective(e3, t3, i3, r3) {
      let a3, n2, c2;
      return i3 !== r3 && 0 !== t3 || s2.h2("null frustum", o, 328), i3 <= 0 && s2.h2("near <= 0", o, 331), r3 <= 0 && s2.h2("far <= 0", o, 334), e3 = Math.PI * e3 / 180 / 2, n2 = Math.sin(e3), 0 === n2 && s2.h2("null frustum", o, 342), a3 = 1 / (r3 - i3), c2 = Math.cos(e3) / n2, this.set([c2 / t3, 0, 0, 0, 0, c2, 0, 0, 0, 0, -(r3 + i3) * a3, -1, 0, 0, -2 * i3 * r3 * a3, 0]), this;
    }
    perspective(e3, t3, i3, r3) {
      return this.multiply(new d2().setPerspective(e3, t3, i3, r3));
    }
    setScale(e3) {
      return this.set([e3.x, 0, 0, 0, 0, e3.y, 0, 0, 0, 0, e3.z, 0, 0, 0, 0, 1]), this;
    }
    scale(e3) {
      let t3 = this.element;
      return t3[0] *= e3.x, t3[1] *= e3.x, t3[2] *= e3.x, t3[3] *= e3.x, t3[4] *= e3.y, t3[5] *= e3.y, t3[6] *= e3.y, t3[7] *= e3.y, t3[8] *= e3.z, t3[9] *= e3.z, t3[10] *= e3.z, t3[11] *= e3.z, this;
    }
    setTranslate(e3) {
      return this.set([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, e3.x, e3.y, e3.z, 1]), this;
    }
    preTranslate(e3) {
      let t3 = this.element;
      return t3[12] += t3[0] * e3.x + t3[4] * e3.y + t3[8] * e3.z, t3[13] += t3[1] * e3.x + t3[5] * e3.y + t3[9] * e3.z, t3[14] += t3[2] * e3.x + t3[6] * e3.y + t3[10] * e3.z, t3[15] += t3[3] * e3.x + t3[7] * e3.y + t3[11] * e3.z, this;
    }
    postTranslate(e3) {
      let t3 = this.element;
      return t3[0] += e3.x * t3[3], t3[1] += e3.y * t3[3], t3[2] += e3.z * t3[3], t3[4] += e3.x * t3[7], t3[5] += e3.y * t3[7], t3[6] += e3.z * t3[7], t3[8] += e3.x * t3[11], t3[9] += e3.y * t3[11], t3[10] += e3.z * t3[11], t3[12] += e3.x * t3[15], t3[13] += e3.y * t3[15], t3[14] += e3.z * t3[15], this;
    }
    setRotate(e3, t3) {
      let i3, r3, a3, s3, n2, o2, c2, d3, h, l, u, f, p, m;
      return e3 = Math.PI * e3 / 180, i3 = t3.x, r3 = t3.y, a3 = t3.z, s3 = Math.sin(e3), n2 = Math.cos(e3), 0 !== t3.x && 0 === t3.y && 0 === t3.z ? (t3.x < 0 && (s3 = -s3), this.set([1, 0, 0, 0, 0, n2, -s3, 0, 0, s3, n2, 0, 0, 0, 0, 1])) : 0 === t3.x && 0 !== t3.y && 0 === t3.z ? (t3.y < 0 && (s3 = -s3), this.set([n2, 0, s3, 0, 0, 1, 0, 0, -s3, 0, n2, 0, 0, 0, 0, 1])) : 0 === t3.x && 0 === t3.y && 0 !== t3.z ? (t3.z < 0 && (s3 = -s3), this.set([n2, -s3, 0, 0, s3, n2, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1])) : (o2 = t3.magnitude, 1 !== o2 && (c2 = 1 / o2, i3 *= c2, r3 *= c2, a3 *= c2), d3 = 1 - n2, h = i3 * r3, l = r3 * a3, u = a3 * i3, f = i3 * s3, p = r3 * s3, m = a3 * s3, this.set([i3 * i3 * d3 + n2, h * d3 + m, u * d3 - p, 0, h * d3 - m, r3 * r3 * d3 + n2, l * d3 + f, 0, u * d3 + p, l * d3 - f, a3 * a3 * d3 + n2, 0, 0, 0, 0, 1])), this;
    }
    rotate(e3, t3) {
      return this.multiply(new d2().setRotate(e3, t3)), this;
    }
    setLookAt(e3, t3, i3) {
      let r3, a3, s3, o2, c2, d3, h, l, u, f, p;
      return r3 = t3.x - e3.x, a3 = t3.y - e3.y, s3 = t3.z - e3.z, o2 = 1 / Math.sqrt(r3 * r3 + a3 * a3 + s3 * s3), r3 *= o2, a3 *= o2, s3 *= o2, c2 = a3 * i3.z - s3 * i3.y, d3 = s3 * i3.x - r3 * i3.z, h = r3 * i3.y - a3 * i3.x, l = 1 / Math.sqrt(c2 * c2 + d3 * d3 + h * h), c2 *= l, d3 *= l, h *= l, u = d3 * s3 - h * a3, f = h * r3 - c2 * s3, p = c2 * a3 - d3 * r3, this.set([c2, u, -r3, 0, d3, f, -a3, 0, h, p, -s3, 0, 0, 0, 0, 1]), this.preTranslate(new n.P([-e3.x, -e3.y, -e3.z]));
    }
    lookAt(e3, t3, i3) {
      return this.multiply(new d2().setLookAt(e3, t3, i3));
    }
    toArray() {
      let e3 = [];
      for (let t3 = 0; t3 < 16; t3++) e3[t3] = this.element[t3];
      return e3;
    }
    copy() {
      return new d2().set(this.toArray());
    }
  }
}, 1064: (e2, t2, i2) => {
  i2.d(t2, { I: () => s2, P: () => a2 });
  var r2 = i2(134);
  class a2 {
    constructor(e3) {
      (0, r2.A)(this, "element", void 0), this.element = new Float32Array(3), e3 && (this.element[0] = e3[0], this.element[1] = e3[1], this.element[2] = e3[2]);
    }
    normalize() {
      let e3 = this.x, t3 = this.y, i3 = this.z, r3 = this.magnitude;
      return r3 ? (1 === r3 || (r3 = 1 / r3, this.x = e3 * r3, this.y = t3 * r3, this.z = i3 * r3), this) : (this.x = this.y = this.z = 0, this);
    }
    toArray() {
      return [this.x, this.y, this.z];
    }
    get magnitude() {
      return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
    }
    get sqrMagnitude() {
      return this.x * this.x + this.y * this.y + this.z * this.z;
    }
    get x() {
      return this.element[0];
    }
    set x(e3) {
      this.element[0] = e3;
    }
    get y() {
      return this.element[1];
    }
    set y(e3) {
      this.element[1] = e3;
    }
    get z() {
      return this.element[2];
    }
    set z(e3) {
      this.element[2] = e3;
    }
  }
  class s2 {
    constructor(e3) {
      (0, r2.A)(this, "element", void 0), this.element = new Float32Array(4), e3 && (this.element[0] = e3[0], this.element[1] = e3[1], this.element[2] = e3[2], this.element[4] = e3[3]);
    }
  }
}, 95073: (e2, t2, i2) => {
  function r2(e3, t3) {
    return e3 + (t3 - 1) & ~(t3 - 1);
  }
  i2.d(t2, { A: () => r2 });
}, 13188: (e2, t2, i2) => {
  function r2(e3, t3 = 0) {
    for (let i3 = 0; i3 < e3.length; i3++) {
      t3 ^= e3[i3];
      for (let e4 = 0; e4 < 8; e4++) 128 & t3 ? t3 = t3 << 1 ^ 7 : t3 <<= 1;
    }
    return 255 & t3;
  }
  i2.d(t2, { A: () => r2 });
}, 31658: (e2, t2, i2) => {
  function r2(e3, t3) {
    for (; 0 !== t3; ) [e3, t3] = [t3, e3 % t3];
    return e3;
  }
  i2.d(t2, { A: () => r2 });
}, 66551: (e2, t2, i2) => {
  i2.d(t2, { B: () => a2 });
  var r2 = i2(45726);
  function a2(e3, t3) {
    const i3 = new r2.A([0, 0, 0, 0, 0, 0, 0, 0, 0]);
    for (let r3 = 0; r3 < 3; r3++) for (let a3 = 0; a3 < 3; a3++) {
      let s2 = e3.rc(r3, 0) * t3.rc(0, a3) + e3.rc(r3, 1) * t3.rc(1, a3) + e3.rc(r3, 2) * t3.rc(2, a3);
      i3.setRC(r3, a3, s2);
    }
    return i3;
  }
  i2(12535);
}, 20576: (e2, t2, i2) => {
  function r2(e3) {
    if (0 === e3.length) return 0;
    const t3 = e3.slice().sort((e4, t4) => e4 - t4), i3 = Math.floor(t3.length / 2);
    return t3.length % 2 == 1 ? t3[i3] : (t3[i3 - 1] + t3[i3]) / 2;
  }
  i2.d(t2, { A: () => r2 });
}, 4304: (e2, t2, i2) => {
  function r2(e3) {
    return e3 <= 0 ? 1 : Math.pow(2, Math.ceil(Math.log2(e3)));
  }
  i2.d(t2, { A: () => r2 });
}, 60153: (e2, t2, i2) => {
  i2.d(t2, { Y3: () => a2 }), i2(12535);
  var r2 = i2(1064);
  function a2(e3, t3) {
    const i3 = new r2.P([0, 0, 0]);
    for (let r3 = 0; r3 < 3; r3++) i3.element[r3] = e3.rc(r3, 0) * t3.x + e3.rc(r3, 1) * t3.y + e3.rc(r3, 2) * t3.z;
    return i3;
  }
}, 42577: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134);
  class a2 extends EventTarget {
    constructor(...e3) {
      super(...e3), (0, r2.A)(this, "peer", void 0), (0, r2.A)(this, "onmessage", void 0), (0, r2.A)(this, "onmessageerror", void 0);
    }
    postMessage(e3, t3) {
      var i3;
      null !== (i3 = this.peer) && void 0 !== i3 && i3.onmessage && this.peer.onmessage({ data: e3 });
    }
    close() {
      this.peer = null;
    }
    start() {
    }
  }
  class s2 {
    constructor() {
      (0, r2.A)(this, "port1", void 0), (0, r2.A)(this, "port2", void 0), this.port1 = new a2(), this.port2 = new a2(), this.port1.peer = this.port2, this.port2.peer = this.port1;
    }
  }
}, 84149: (e2, t2, i2) => {
  i2.d(t2, { Ay: () => u, S3: () => l, Wo: () => h });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2), n = i2(54001), o = i2.n(n), c = i2(96172), d2 = i2(34677);
  const h = "notify", l = "request";
  class u extends c.A {
    constructor(e3) {
      super(true), (0, r2.A)(this, "port", void 0), (0, r2.A)(this, "requestMap", void 0), (0, r2.A)(this, "seq", void 0), (0, r2.A)(this, "closed", void 0), this.port = e3, this.port.onmessage = this.handle.bind(this), this.seq = 0, this.requestMap = new (s2())(), this.port.start(), this.closed = false;
    }
    handle(e3) {
      const t3 = e3.data, i3 = t3.type, r3 = t3.data;
      if ("notify" === i3) this.fire(h, r3);
      else if ("reply" === i3) {
        const e4 = this.requestMap.get(r3.seq);
        e4 && ((0, d2.A)(r3.result) ? e4.resolve(r3.result) : r3.error ? e4.reject(r3.error) : e4.resolve(void 0), this.requestMap.delete(r3.seq));
      } else "request" === i3 && this.fire(l, r3);
    }
    notify(e3, t3 = {}, i3 = []) {
      this.port.postMessage({ type: "notify", data: { method: e3, params: t3 } }, i3);
    }
    async request(e3, t3 = {}, i3 = []) {
      return new (o())((r3, a3) => {
        const s3 = this.seq++;
        this.requestMap.set(s3, { resolve: r3, reject: a3 }), this.port.postMessage({ type: "request", data: { seq: s3, method: e3, params: t3 } }, i3);
      });
    }
    reply(e3, t3, i3, r3 = []) {
      const a3 = { seq: e3.seq };
      (0, d2.A)(t3) ? a3.result = t3 : i3 && (a3.error = i3), null != r3 && r3.length ? this.port.postMessage({ type: "reply", data: a3 }, r3) : this.port.postMessage({ type: "reply", data: a3 });
    }
    getPort() {
      return this.port;
    }
    destroy() {
      this.requestMap.size && (this.requestMap.forEach((e3) => {
        e3.reject("ipc port close");
      }), this.requestMap.clear()), this.port && (this.port.close(), this.port = null), this.closed = true;
    }
  }
}, 55013: (e2, t2, i2) => {
  i2(84149).Ay;
}, 95434: (e2, t2, i2) => {
  i2.d(t2, { yz: () => s2, zo: () => o });
  var r2 = i2(134), a2 = i2(95335);
  class s2 {
    constructor(e3, t3, i3, a3 = {}, s3 = "") {
      (0, r2.A)(this, "method", void 0), (0, r2.A)(this, "uri", void 0), (0, r2.A)(this, "protocol", void 0), (0, r2.A)(this, "headers", void 0), (0, r2.A)(this, "content", void 0), this.method = e3, this.uri = t3, this.protocol = i3, this.headers = a3, this.content = s3;
    }
    setHeader(e3, t3) {
      this.headers[e3] = t3;
    }
    encode() {
      let e3 = "".concat(this.method, " ").concat(this.uri, " ").concat(this.protocol, "\r\n");
      return this.headers["Content-Length"] = this.content.length + "", a2.__(this.headers, (t3, i3) => {
        t3 && (e3 += "".concat(i3, ": ").concat(t3, "\r\n"));
      }), e3 += "\r\n", this.content && (e3 += this.content), e3;
    }
  }
  class n {
    constructor(e3, t3, i3, a3, s3) {
      (0, r2.A)(this, "protocol", void 0), (0, r2.A)(this, "statusCode", void 0), (0, r2.A)(this, "statusText", void 0), (0, r2.A)(this, "headers", void 0), (0, r2.A)(this, "content", void 0), this.protocol = e3, this.statusCode = t3, this.statusText = i3, this.headers = a3, this.content = s3;
    }
  }
  class o {
    constructor(e3, t3) {
      (0, r2.A)(this, "ioReader", void 0), (0, r2.A)(this, "ioWriter", void 0), this.ioReader = e3, this.ioWriter = t3;
    }
    async readResponse() {
      let e3 = (await this.ioReader.readLine()).trim().split(" "), t3 = "", i3 = {};
      for (; ; ) {
        const e4 = (await this.ioReader.readLine()).trim();
        if (!e4) break;
        const t4 = e4.split(":");
        i3[t4[0].trim()] = t4[1].trim();
      }
      return i3["Content-Length"] && (t3 = await this.ioReader.readString(+i3["Content-Length"])), new n(e3[0].trim(), +e3[1].trim(), e3[2].trim(), i3, t3);
    }
    async request(e3) {
      return this.ioWriter.reset(), this.ioWriter.writeString(e3.encode()), this.ioWriter.flush(), this.readResponse();
    }
    async notify(e3) {
      this.ioWriter.reset(), this.ioWriter.writeString(e3.encode()), await this.ioWriter.flush();
    }
  }
}, 6253: (e2, t2, i2) => {
  i2.d(t2, { A: () => u });
  var r2 = i2(134), a2 = i2(39638), s2 = i2(86932), n = i2(47222), o = i2(78995);
  let c, d2 = 0;
  function h() {
    return c ? (d2++, c) : (c = new n.A(), d2 = 1, c);
  }
  function l() {
    0 !== d2 && (d2--, 0 === d2 && (c.destroy(), c = null));
  }
  class u {
    constructor(e3, t3 = true, i3 = false) {
      (0, r2.A)(this, "messageChannel", void 0), (0, r2.A)(this, "interval", void 0), (0, r2.A)(this, "started", void 0), (0, r2.A)(this, "timer", void 0), (0, r2.A)(this, "workerTimer", void 0), (0, r2.A)(this, "workerSetTimeout", void 0), (0, r2.A)(this, "onClock", void 0), (0, r2.A)(this, "nextTick", void 0), (0, r2.A)(this, "a", void 0), (0, r2.A)(this, "b", void 0), (0, r2.A)(this, "beta", void 0), (0, r2.A)(this, "alpha", void 0), (0, r2.A)(this, "count", void 0), (0, r2.A)(this, "equivalent", void 0), (0, r2.A)(this, "timestamp", void 0), (0, r2.A)(this, "onVisibilityChange", void 0), (0, r2.A)(this, "timeoutNext", void 0), (0, r2.A)(this, "running", void 0), (0, r2.A)(this, "highPerformance", void 0), (0, r2.A)(this, "forceWorker", void 0), this.started = false, this.interval = e3, this.highPerformance = t3, this.forceWorker = i3, this.a = 0.2, this.b = 4, this.equivalent = 50, this.timestamp = 0, this.nextTick = () => {
        if (this.started && !this.running) if (this.running = true, this.interval >= 4 || !this.highPerformance) this.timeoutTick();
        else if (this.interval <= 0) this.messageChannel.port1.postMessage(null);
        else {
          const e4 = (0, s2.A)();
          e4 - this.timestamp > this.equivalent && (this.count = 0, this.timestamp = e4), this.count < this.beta ? this.messageChannel.port1.postMessage(null) : this.timeoutTick();
        }
      }, this.compute(), this.messageChannel = new MessageChannel(), this.handleEvent(), this.timeoutNext = (e4) => {
        e4 ? this.workerTimer = null : this.timer = null, this.running = false, this.count++, this.onClock ? this.onClock(this.nextTick) : this.nextTick();
      }, (0, a2.A)() || "hidden" !== document.visibilityState || (this.workerSetTimeout = h()), this.running = false;
    }
    compute(e3 = true) {
      this.interval > 0 && (this.beta = Math.ceil(this.equivalent * (1 - this.b / this.interval) / (this.a - this.b)), this.alpha = Math.floor(this.equivalent / this.interval - this.beta), e3 && (this.count = 0));
    }
    timeoutTick() {
      this.workerSetTimeout && "hidden" === document.visibilityState && (this.interval < 1e3 || this.forceWorker) ? this.workerTimer = this.workerSetTimeout.setTimeout(this.timeoutNext, this.interval) : this.timer = setTimeout(this.timeoutNext, this.interval);
    }
    start() {
      this.started || (this.started = true, this.timestamp = (0, s2.A)(), this.nextTick());
    }
    stop() {
      this.started = false, this.timer && (clearTimeout(this.timer), this.timer = null), this.workerTimer && this.workerSetTimeout && this.workerSetTimeout.clearTimeout(this.workerTimer), this.running = false;
    }
    isStarted() {
      return this.started;
    }
    setInterval(e3) {
      this.interval = Math.max(e3, 0), this.compute();
    }
    getInterval() {
      return this.interval;
    }
    isZeroTimeout() {
      return this.interval < 4;
    }
    destroy() {
      this.stop(), this.workerSetTimeout && (l(), this.workerSetTimeout = null), this.onVisibilityChange && (document.removeEventListener("visibilitychange", this.onVisibilityChange), this.onVisibilityChange = null);
    }
    handleEvent() {
      this.messageChannel.port2.onmessage = () => {
        this.started && (this.running = false, this.count++, this.onClock ? this.onClock(this.nextTick) : this.nextTick());
      }, (0, a2.A)() || (this.onVisibilityChange = (0, o.A)((e3) => {
        "hidden" === document.visibilityState ? (this.workerSetTimeout = h(), this.timer && (clearTimeout(this.timer), this.timer = null, this.running = false), this.nextTick()) : (this.workerTimer && (this.workerSetTimeout.clearTimeout(this.workerTimer), this.workerTimer = null, this.running = false), this.timer && (clearTimeout(this.timer), this.timer = null, this.running = false), l(), this.workerSetTimeout = null, this.nextTick());
      }, 20), document.addEventListener("visibilitychange", this.onVisibilityChange));
    }
  }
}, 39148: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(134), a2 = i2(54001), s2 = i2.n(a2), n = i2(6253), o = i2(86932);
  class c {
    constructor(e3, t3 = 0, i3 = 0, a3 = true, s3 = true) {
      (0, r2.A)(this, "task", void 0), (0, r2.A)(this, "count", void 0), (0, r2.A)(this, "emptyCount", void 0), (0, r2.A)(this, "started", void 0), (0, r2.A)(this, "clock", void 0), (0, r2.A)(this, "timestamp", void 0), (0, r2.A)(this, "timeout", void 0), (0, r2.A)(this, "interval", void 0), (0, r2.A)(this, "startTimer", void 0), (0, r2.A)(this, "autoInterval", void 0), (0, r2.A)(this, "sync", void 0), (0, r2.A)(this, "tickAfter", void 0), (0, r2.A)(this, "processing", void 0), this.task = e3, this.timeout = t3, this.interval = i3, this.autoInterval = a3, this.sync = s3, this.count = 0, this.emptyCount = 0, this.timestamp = 0, this.started = false, this.processing = false, this.clock = new n.A(this.interval), this.clock.onClock = (e4) => {
        if (this.started) if (this.count++, this.sync) this.tickAfter && (this.tickAfter(), this.tickAfter = null), false === this.task() ? this.stop() : this.next(e4);
        else {
          if (this.processing) return;
          this.processing = true, this.task().then((t4) => {
            this.processing = false, this.tickAfter && (this.tickAfter(), this.tickAfter = null), false === t4 ? this.stop() : this.next(e4);
          });
        }
      };
    }
    next(e3) {
      if (!this.started) return;
      const t3 = (0, o.A)();
      if (this.autoInterval && t3 - this.timestamp > 50) {
        const e4 = this.emptyCount / this.count;
        0 === this.emptyCount ? this.clock.setInterval(Math.max(this.clock.getInterval() >> 1, this.interval)) : e4 > 0.5 ? this.clock.setInterval(this.clock.getInterval() << 1) : e4 > 0.2 ? this.clock.setInterval(Math.min(this.clock.getInterval() + 1, 20)) : e4 < 0.1 && this.clock.setInterval(this.clock.getInterval() + 1), this.count = 0, this.emptyCount = 0, this.timestamp = t3;
      }
      e3();
    }
    start() {
      this.started = true, this.timeout ? this.startTimer = setTimeout(() => {
        this.count = 0, this.emptyCount = 0, this.timestamp = (0, o.A)(), this.clock.start(), this.startTimer = null;
      }, this.timeout) : (this.count = 0, this.emptyCount = 0, this.timestamp = (0, o.A)(), this.clock.start());
    }
    stop() {
      this.started = false, this.processing = false, this.startTimer && (clearTimeout(this.startTimer), this.startTimer = null), this.clock.stop();
    }
    async stopBeforeNextTick() {
      if (this.startTimer && (clearTimeout(this.startTimer), this.startTimer = null), this.clock.isStarted()) return this.sync ? (this.started = false, this.processing = false, void this.clock.stop()) : new (s2())((e3) => {
        this.tickAfter = () => {
          this.started = false, this.processing = false, this.clock.stop(), e3();
        };
      });
    }
    isStarted() {
      return this.started;
    }
    emptyTask() {
      this.emptyCount++;
    }
    isZeroTimeout() {
      var e3;
      return null === (e3 = this.clock) || void 0 === e3 ? void 0 : e3.isZeroTimeout();
    }
    restart() {
      this.clock && (this.stop(), this.clock.setInterval(this.interval), this.start());
    }
    resetInterval() {
      this.clock.setInterval(Math.max(this.clock.getInterval() >> 1, this.interval)), this.emptyCount = 0, this.count = 0, this.timestamp = (0, o.A)();
    }
    destroy() {
      this.stop(), this.task = null, this.timeout = null, this.interval = null;
    }
  }
}, 74936: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134), a2 = i2(86932);
  class s2 {
    constructor() {
      (0, r2.A)(this, "base", BigInt(0)), (0, r2.A)(this, "rate", BigInt(1e3)), (0, r2.A)(this, "startTimestamp", BigInt(0));
    }
    start() {
      this.base = BigInt(0), this.startTimestamp = BigInt((0, a2.A)());
    }
    getMasterTime() {
      return this.base + (BigInt((0, a2.A)()) - this.startTimestamp) * this.rate / BigInt(1e3);
    }
    setRate(e3) {
      this.base = this.getMasterTime(), this.startTimestamp = BigInt((0, a2.A)()), this.rate = BigInt(1e3 * e3 >>> 0);
    }
    setMasterTime(e3) {
      this.base = e3, this.startTimestamp = BigInt((0, a2.A)());
    }
  }
}, 13724: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(134), a2 = i2(45249), s2 = i2.n(a2);
  class n {
    constructor(e3) {
      (0, r2.A)(this, "timeout", void 0), (0, r2.A)(this, "timer", void 0), (0, r2.A)(this, "resolve", void 0), (0, r2.A)(this, "reject", void 0), (0, r2.A)(this, "startTime", void 0), this.timeout = e3;
    }
    then(e3, t3) {
      this.resolve = e3, this.reject = t3, this.startTime = s2()(), this.timer = setTimeout(() => {
        this.resolve(s2()() - this.startTime), this.timer = null;
      }, 1e3 * this.timeout);
    }
    stop(e3 = true) {
      this.timer && (clearTimeout(this.timer), this.timer = null, this.resolve && e3 ? this.resolve(s2()() - this.startTime) : this.reject && !e3 && this.reject(s2()() - this.startTime));
    }
    reset(e3) {
      e3 && (this.timeout = e3), this.timer && (clearTimeout(this.timer), this.timer = setTimeout(() => {
        this.resolve(s2()() - this.startTime), this.timer = null;
      }, 1e3 * this.timeout));
    }
  }
}, 54058: (e2, t2, i2) => {
  i2.d(t2, { A: () => a2 });
  var r2 = i2(134);
  class a2 {
    constructor(e3, t3, i3) {
      (0, r2.A)(this, "task", void 0), (0, r2.A)(this, "timeout", void 0), (0, r2.A)(this, "interval", void 0), (0, r2.A)(this, "timer", void 0), this.task = e3, this.timeout = t3, this.interval = i3;
    }
    start() {
      const e3 = this;
      e3.stop();
      let t3 = e3.timeout;
      const i3 = e3.interval, r3 = function() {
        false !== e3.task() && e3.timer ? e3.timer = setTimeout(r3, e3.interval) : e3.stop();
      };
      null == t3 && (t3 = i3), e3.timer = setTimeout(r3, t3);
    }
    stop() {
      this.timer && (clearTimeout(this.timer), this.timer = null);
    }
    updateInterval(e3) {
      this.interval = e3;
    }
    isStarted() {
      return !!this.timer;
    }
    destroy() {
      this.stop(), this.task = this.timeout = this.interval = null;
    }
  }
}, 47222: (e2, t2, i2) => {
  i2.d(t2, { A: () => o });
  var r2 = i2(134), a2 = i2(80662), s2 = i2.n(a2);
  function n(e3) {
    e3.addEventListener("message", (t3) => {
      var i3;
      let r3 = t3.data.data;
      setTimeout(() => {
        e3.postMessage({ type: "pong", id: r3.id });
      }, Math.max(null !== (i3 = r3.timeout) && void 0 !== i3 ? i3 : 0, 4));
    });
  }
  class o {
    constructor() {
      (0, r2.A)(this, "worker", void 0), (0, r2.A)(this, "workerUrl", void 0), (0, r2.A)(this, "taskMap", void 0), (0, r2.A)(this, "id", void 0), this.id = 0, this.taskMap = new (s2())();
      const e3 = "\n      ".concat(n.toString(), "\n      ").concat(n.name, "(self)\n    "), t3 = new Blob([e3], { type: "text/javascript" });
      this.workerUrl = URL.createObjectURL(t3), this.worker = new Worker(this.workerUrl), this.worker.addEventListener("message", (e4) => {
        const t4 = e4.data, i3 = t4.type, r3 = t4.id;
        if ("pong" === i3) {
          const e5 = this.taskMap.get(r3);
          e5 && e5(true);
        }
      });
    }
    setTimeout(e3, t3 = 0) {
      const i3 = this.id++;
      return this.taskMap.set(i3, e3), this.worker.postMessage({ type: "ping", data: { timeout: t3, id: i3 } }), i3;
    }
    clearTimeout(e3) {
      this.taskMap.delete(e3);
    }
    destroy() {
      this.worker && (this.worker.terminate(), this.worker = null), this.workerUrl && (URL.revokeObjectURL(this.workerUrl), this.workerUrl = null), this.taskMap && (this.taskMap.clear(), this.taskMap = null);
    }
  }
}, 38724: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134), a2 = i2(6253);
  class s2 {
    constructor(e3, t3, i3) {
      (0, r2.A)(this, "task", void 0), (0, r2.A)(this, "timeout", void 0), (0, r2.A)(this, "interval", void 0), (0, r2.A)(this, "clock", void 0), (0, r2.A)(this, "started", void 0), (0, r2.A)(this, "timer", void 0), this.task = e3, this.timeout = t3, this.interval = i3, this.started = false, this.clock = new a2.A(this.interval, false, true), this.clock.onClock = (e4) => {
        this.started && false === this.task() ? this.stop() : e4();
      };
    }
    start() {
      this.started = true, this.timeout > 0 ? this.timer = setTimeout(() => {
        this.timer = null, this.clock.start();
      }, this.timeout) : this.clock.start();
    }
    stop() {
      this.started = false, this.clock.stop(), this.timer && (clearTimeout(this.timer), this.timer = null);
    }
    isStarted() {
      return this.started;
    }
    updateInterval(e3) {
      this.interval = e3, this.clock.setInterval(e3);
    }
    destroy() {
      this.clock && (this.stop(), this.clock.destroy(), this.clock = null), this.started = false, this.task = this.timeout = this.interval = null;
    }
  }
}, 72739: (e2, t2, i2) => {
  i2.d(t2, { $r: () => l, El: () => u, FB: () => p, TF: () => d2, VC: () => c, _: () => f, __: () => n, zy: () => h });
  var r2 = i2(67672), a2 = i2(10576), s2 = i2(56401);
  function n(e3, t3, i3) {
    if (!e3) return;
    const { length: r3 } = e3;
    if (r3) if (i3) for (let i4 = r3 - 1; i4 >= 0 && t3(e3[i4], i4) !== a2.W8; i4--) ;
    else for (let i4 = 0; i4 < r3 && t3(e3[i4], i4) !== a2.W8; i4++) ;
  }
  function o(e3, t3) {
    e3[e3.length] = t3;
  }
  function c(e3, t3) {
    !(function(e4, t4, i3) {
      r2.YO(t4) ? n(t4, function(t5) {
        i3(e4, t5);
      }) : i3(e4, t4);
    })(e3, t3, o);
  }
  function d2(e3, t3, i3) {
    let r3 = 0;
    return n(e3, function(s3, n2) {
      (i3 === a2.W8 ? s3 == t3 : s3 === t3) && (e3.splice(n2, 1), r3++);
    }, a2.rT), r3;
  }
  function h(e3, t3, i3) {
    return (function(e4, t4, i4) {
      let r3 = a2.Cy;
      return n(e4, function(e5, s3) {
        if (i4 === a2.W8 ? e5 == t4 : e5 === t4) return r3 = s3, a2.W8;
      }), r3;
    })(e3, t3, i3) >= 0;
  }
  function l(e3) {
    return r2.YO(e3) ? e3 : (0, s2.A)(a2.Ml.slice, e3);
  }
  function u(e3, t3) {
    let i3 = 0, r3 = e3.length - 1, a3 = -1;
    for (; i3 <= r3; ) {
      let s3 = (i3 + r3) / 2 >>> 0;
      const n2 = t3(e3[s3]);
      if (0 === n2) {
        a3 = s3;
        break;
      }
      1 === n2 ? i3 = s3 + 1 : (r3 = s3 - 1, a3 = s3);
    }
    return a3;
  }
  function f(e3, t3, i3) {
    const r3 = u(e3, i3);
    r3 > -1 ? e3.splice(r3, 0, t3) : e3.push(t3);
  }
  function p(e3, t3) {
    if (e3 === t3) return true;
    if (!e3 || !t3) return false;
    if (e3.length !== t3.length) return false;
    for (let i3 = 0; i3 < e3.length; i3++) if (e3[i3] !== t3[i3]) return false;
    return true;
  }
}, 90932: (e2, t2, i2) => {
  i2.d(t2, { l: () => a2 });
  const r2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ234567";
  function a2(e3, t3 = true) {
    const i3 = e3.length;
    let a3 = 0, s2 = 0, n = "";
    for (let t4 = 0; t4 < i3; t4++) for (s2 = s2 << 8 | e3[t4], a3 += 8; a3 >= 5; ) n += r2[s2 >>> a3 - 5 & 31], a3 -= 5;
    if (a3 > 0 && (n += r2[s2 << 5 - a3 & 31]), t3) for (; n.length % 8 != 0; ) n += "=";
    return n;
  }
}, 4919: (e2, t2, i2) => {
  i2.d(t2, { E_: () => s2 });
  var r2 = i2(72739);
  const a2 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
  function s2(e3) {
    const t3 = "function" == typeof atob ? atob(e3) : (function(e4) {
      function t4(e5) {
        const t5 = a2.indexOf(e5);
        return -1 === t5 ? 0 : t5;
      }
      let i4 = "";
      for (let r3 = 0; r3 < e4.length; ) {
        const a3 = t4(e4[r3++]), s3 = t4(e4[r3++]), n = t4(e4[r3++]), o = t4(e4[r3++]), c = a3 << 2 | s3 >> 4, d2 = (15 & s3) << 4 | n >> 2, h = (3 & n) << 6 | o;
        i4 += String.fromCharCode(c), 64 !== n && (i4 += String.fromCharCode(d2)), 64 !== o && (i4 += String.fromCharCode(h));
      }
      return i4;
    })(e3), i3 = new Uint8Array(t3.length);
    for (let e4 = 0; e4 < t3.length; e4++) i3[e4] = t3.charCodeAt(e4);
    return i3;
  }
  r2.__(["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "+", "/"], (e3, t3) => {
  });
}, 43607: (e2, t2, i2) => {
  function r2(e3) {
    return e3 > 0 ? e3 : -e3;
  }
  function a2(e3, t3) {
    return e3 > t3 ? e3 : t3;
  }
  function s2(e3, t3) {
    return e3 > t3 ? t3 : e3;
  }
  i2.d(t2, { T9: () => a2, jk: () => s2, tn: () => r2 });
}, 86834: (e2, t2, i2) => {
  i2.d(t2, { A: () => p });
  var r2 = i2(29967), a2 = i2.n(r2), s2 = i2(72739), n = i2(67672), o = i2(84504), c = i2(44690);
  function d2(e3) {
    return n.Yj(e3) && e3.split(".").shift() || "";
  }
  const h = [["alipay", /alipay/], ["wechat", /micromessenger/], ["dingtalk", /dingtalk[ \/]([\d_.]+)/], ["baiduApp", /baiduboxapp/], ["baidu", /baidubrowser/], ["baidu", /bdbrowser/], ["uc", /ucbrowser/], ["uc", /ucweb/], ["qq", /qqbrowser/], ["qqApp", /qq/], ["ie", /iemobile[ \/]([\d_.]+)/], ["ie", /msie[ \/]([\d_.]+)/], ["ie", /trident[ \/]([\d_.]+)/, 4], ["edge", /edge[ \/]([\d_.]+)/], ["newEdge", /edg[ \/]([\d_.]+)/], ["chrome", /chrome[ \/]([\d_.]+)/], ["firefox", /firefox[ \/]([\d_.]+)/], ["opera", /opera(?:.*version)?[ \/]([\d_.]+)/], ["safari", /version[ \/]([\d_.]+) safari/], ["safari", /version[ \/]([\d_.]+) \S* safari/], ["safari", /safari/]], l = {}, u = {}, f = (function(e3) {
    let t3, i3;
    return (0, s2.__)(h, (r3) => {
      let s3 = r3[1].exec(e3);
      if (s3) return t3 = r3[0], i3 = s3[1], i3 && (i3 = i3.replace(/_/g, "."), r3[2] && (i3 = a2()(i3, 10) + r3[2] + ".0")), false;
    }), "safari" !== t3 || i3 || (i3 = c.A.version), { name: t3 || "", version: i3 || "", majorVersion: (l[t3] || d2)(i3), checkVersion: u[t3] || o.A };
  })(("object" == typeof navigator && navigator.userAgent || "").toLowerCase());
  f.name && (f[f.name] = true);
  const p = f;
}, 10576: (e2, t2, i2) => {
  i2.d(t2, { Cq: () => o, Cy: () => d2, M_: () => p, Ml: () => v, TK: () => m, W8: () => n, ZG: () => u, ZH: () => c, aV: () => h, rT: () => s2, s0: () => l, u1: () => A, x7: () => g });
  var r2 = i2(7403), a2 = i2.n(r2);
  const s2 = true, n = false, o = null, c = void 0, d2 = -1, h = "undefined", l = "function", u = ".", f = typeof window !== h ? window : c, p = typeof globalThis !== h ? globalThis : typeof i2.g !== h ? i2.g : f, m = typeof self !== h ? self : p, g = function() {
  }, v = (a2()({}), a2()([])), A = "";
}, 67672: (e2, t2, i2) => {
  i2.d(t2, { Ik: () => h, Pc: () => c, YO: () => d2, Yj: () => l, ai: () => u, o: () => f, sH: () => m, sv: () => g, zM: () => p });
  var r2 = i2(68632), a2 = i2.n(r2), s2 = i2(88032), n = i2.n(s2), o = i2(10576);
  function c(e3) {
    return typeof e3 === o.s0;
  }
  function d2(e3) {
    return a2()(e3);
  }
  function h(e3) {
    return e3 !== o.Cq && "object" == typeof e3;
  }
  function l(e3) {
    return "string" == typeof e3;
  }
  function u(e3) {
    return "number" == typeof e3 && !isNaN(e3);
  }
  function f(e3) {
    return "bigint" == typeof e3;
  }
  function p(e3) {
    return "boolean" == typeof e3;
  }
  function m(e3) {
    return u(e3) || l(e3) && !isNaN(n()(e3)) && isFinite(+e3);
  }
  function g(e3) {
    return e3 instanceof ArrayBuffer;
  }
}, 10534: (e2, t2, i2) => {
  i2.d(t2, { __: () => s2 }), i2(20525);
  var r2 = i2(10576);
  const a2 = {};
  function s2(e3, t3) {
    const i3 = a2.hasOwnProperty(e3) ? a2[e3] : a2[e3] = e3.split(r2.ZG);
    for (let e4 = 0, a3 = i3.length - 1; e4 <= a3 && t3(i3[e4], e4 === a3) !== r2.W8; e4++) ;
  }
}, 4624: (e2, t2, i2) => {
  i2.d(t2, { R8: () => w, V$: () => v, Yz: () => A, h2: () => k, pq: () => y, rD: () => o, z3: () => b });
  var r2 = i2(10576), a2 = i2(62100);
  const s2 = 0, n = 1, o = 2, c = 3, d2 = 4, h = 5, l = typeof console !== r2.aV ? console : r2.Cq, u = /common/.test((0, a2.A)(r2.x7)) ? o : c, f = l ? function(e3, t3) {
    l.log(e3, t3);
  } : r2.x7, p = l ? function(e3, t3) {
    l.warn(e3, t3);
  } : r2.x7, m = l ? function(e3, t3) {
    l.error(e3, t3);
  } : r2.x7;
  function g() {
    if (r2.M_) {
      const e3 = r2.TK.COMMON_LOG_LEVEL;
      if (e3 >= s2 && e3 <= h) return e3;
    }
    return u;
  }
  function v(e3) {
    r2.TK.COMMON_LOG_LEVEL = e3;
  }
  function A(e3, t3, i3) {
    g() <= n && f("[".concat(arguments[1], "][line ").concat(arguments[2], "] [debug]"), e3);
  }
  function y(e3, t3, i3) {
    g() <= o && f("[".concat(arguments[1], "][line ").concat(arguments[2], "] [info]"), e3);
  }
  function w(e3, t3, i3) {
    g() <= c && p("[".concat(arguments[1], "][line ").concat(arguments[2], "] [warn]"), e3);
  }
  function b(e3, t3, i3) {
    g() <= d2 && m("[".concat(arguments[1], "][line ").concat(arguments[2], "] [error]"), e3);
  }
  function k(e3, t3, i3) {
    if (g() <= h) throw b(e3, t3, i3), new Error("[".concat(arguments[1], "][line ").concat(arguments[2], "] [fatal]: ").concat(e3));
  }
}, 95335: (e2, t2, i2) => {
  i2.d(t2, { C: () => f, HP: () => d2, X$: () => u, __: () => h });
  var r2 = i2(69736), a2 = i2.n(r2), s2 = i2(67672), n = i2(72739), o = i2(10576), c = (i2(10534), i2(34677));
  function d2(e3) {
    return (0, c.A)(e3) ? a2()(e3) : [];
  }
  function h(e3, t3) {
    for (let i3 in e3) if (t3(e3[i3], i3) === o.W8) break;
  }
  function l(e3, t3) {
    return s2.Ik(e3) ? s2.Ik(t3) ? (h(t3, function(t4, i3) {
      e3[i3] = t4;
    }), e3) : e3 : t3;
  }
  function u(e3, t3, i3) {
    return l(l(e3, t3), i3);
  }
  function f(e3, t3) {
    let i3 = e3;
    return s2.YO(e3) ? t3 ? (i3 = [], n.__(e3, function(e4, r3) {
      i3[r3] = f(e4, t3);
    })) : i3 = e3.slice() : s2.Ik(e3) && (i3 = {}, h(e3, function(e4, r3) {
      i3[r3] = t3 ? f(e4, t3) : e4;
    })), i3;
  }
}, 44690: (e2, t2, i2) => {
  i2.d(t2, { A: () => n });
  var r2 = i2(72739);
  const a2 = [["harmony", /harmonyos ([\d_.]+)/], ["harmony", /openharmony ([\d_.]+)/], ["iphone", /iphone os ([\d_.]+)/], ["ipad", /ipad; cpu os ([\d_.]+)/], ["itouch", /itouch; cpu os ([\d_.]+)/], ["android", /android ([\d_.]+)/], ["wp", /windows phone ([\d_.]+)/], ["windows", /windows nt ([\d_.]+)/], ["linux", /linux/], ["mac", /mac os x ([\d_.]+)/]], s2 = (function(e3) {
    let t3, i3;
    return (0, r2.__)(a2, (r3) => {
      let a3 = r3[1].exec(e3);
      if (a3) return t3 = r3[0], i3 = a3[1], i3 && (i3 = i3.replace(/_/g, ".")), false;
    }), { name: t3 || "", version: i3 || "", mobile: e3.indexOf("mobile") > -1 };
  })(("object" == typeof navigator && navigator.userAgent || "").toLowerCase());
  s2.name && (s2[s2.name] = true, { iphone: 1, ipad: 1, itouch: 1 }[s2.name] && (s2.ios = true));
  const n = s2;
}, 20525: (e2, t2, i2) => {
  i2.d(t2, { GP: () => l, di: () => c, qh: () => d2, zy: () => h });
  var r2 = i2(29967), a2 = i2.n(r2), s2 = i2(67672), n = i2(10576), o = i2(62100);
  function c(e3, t3, i3) {
    return s2.ai(i3) ? t3 === i3 ? n.u1 : e3.slice(t3, i3) : e3.slice(t3);
  }
  function d2(e3, t3, i3) {
    return e3.indexOf(t3, i3 !== n.ZH ? i3 : 0);
  }
  function h(e3, t3) {
    return d2(e3, t3) >= 0;
  }
  function l(e3, ...t3) {
    let i3 = 0;
    const r3 = t3.length;
    return e3.replace(/(%[sdvx%])|(%0(\d)+[dx])/g, (e4) => {
      if (i3 >= r3) return e4;
      const s3 = t3[i3++];
      if (/%0(\d)+[dx]/g.test(e4)) {
        const t4 = a2()(e4.substring(1));
        let i4 = "d" === e4[e4.length - 1] ? (0, o.A)(Number(s3)) : Number(s3).toString(16);
        return t4 > i4.length && (i4 = new Array(t4 - i4.length).fill("0").join("") + i4), i4;
      }
      switch (e4) {
        case "%%":
          return "%";
        case "%s":
          return String(s3);
        case "%d":
          return (0, o.A)(Number(s3));
        case "%v":
          return "";
        case "%x":
          return Number(s3).toString(16);
      }
      return e4;
    });
  }
}, 95797: (e2, t2, i2) => {
  i2.d(t2, { A: () => d2 });
  var r2 = i2(20149), a2 = i2.n(r2), s2 = i2(54568), n = i2(39638), o = i2(86834), c = i2(44690);
  const d2 = (function() {
    let e3 = "function" == typeof Blob, t3 = "object" == typeof WebAssembly && "function" == typeof WebAssembly.instantiate, i3 = "function" == typeof fetch, r3 = "object" == typeof document && document.createElement("canvas"), d3 = r3 && !!r3.getContext("webgl"), h = "function" == typeof OffscreenCanvas, l = "function" == typeof Worker, u = "function" == typeof ArrayBuffer, f = "object" == typeof Atomics && "Atomics" === Atomics[a2()], p = "function" == typeof AudioContext || "function" == typeof webkitAudioContext, m = "function" == typeof AudioWorklet, g = "function" == typeof VideoDecoder, v = "function" == typeof VideoEncoder, A = "function" == typeof AudioDecoder, y = "function" == typeof AudioEncoder, w = "function" == typeof SharedArrayBuffer, b = "function" == typeof MediaSource || "function" == typeof ManagedMediaSource, k = "function" == typeof Proxy, x = (l || (0, n.A)() || (0, s2.A)()) && w && f && k, I = "function" == typeof WebAssembly.Suspending && "function" == typeof WebAssembly.promising;
    (o.A.safari && !o.A.checkVersion(o.A.majorVersion, "11", true) || c.A.ios && !o.A.checkVersion(c.A.version, "11", true)) && (t3 = false), o.A.chrome && !o.A.checkVersion(o.A.majorVersion, "94", true) && (g = false, A = false), (o.A.safari && !o.A.checkVersion(o.A.majorVersion, "17", true) || c.A.ios && !o.A.checkVersion(c.A.version, "17", true)) && (g = false);
    let P = "object" == typeof navigator && "object" == typeof navigator.gpu, S = "function" == typeof MediaSourceHandle, T = t3 && "function" == typeof WebAssembly.Global, M = "function" == typeof MediaStreamTrackGenerator;
    return { browser: o.A, blob: e3, wasm: t3, fetch: i3, webgl: d3, worker: l, mse: b, arrayBuffer: u, audioContext: p, audioWorklet: m, videoDecoder: g, videoEncoder: v, audioDecoder: A, audioEncoder: y, atomics: f, shareArrayBuffer: w, thread: x, webgpu: P, offscreenCanvas: h, workerMSE: S, webAssemblyGlobal: T, jspi: I, proxy: k, simd: (o.A.chrome || o.A.newEdge) && o.A.checkVersion(o.A.majorVersion, "91", true) || o.A.firefox && o.A.checkVersion(o.A.majorVersion, "89", true) || o.A.safari && o.A.checkVersion(o.A.version, "16.4", true) || c.A.ios && o.A.checkVersion(c.A.version, "16.4", true), wasmPlayerSupported: i3 && t3 && d3 && p && u && T, wasmBaseSupported: t3 && T && u, trackGenerator: M };
  })();
}, 50011: (e2, t2, i2) => {
  i2.r(t2), i2.d(t2, { decode: () => o, encode: () => s2 });
  const r2 = "function" == typeof TextEncoder ? new TextEncoder() : null, a2 = "function" == typeof TextDecoder ? new TextDecoder() : null;
  function s2(e3) {
    if (r2) return r2.encode(e3);
    const t3 = [];
    for (let i3 = 0; i3 < e3.length; ++i3) {
      let r3 = e3.charCodeAt(i3);
      r3 >= 55296 && r3 <= 57343 && (r3 = 65536 + ((1023 & r3) << 10) | 1023 & e3.charCodeAt(++i3)), r3 <= 127 ? t3.push(r3) : r3 <= 2047 ? (t3.push(192 | r3 >> 6), t3.push(128 | 63 & r3)) : r3 <= 65535 ? (t3.push(224 | r3 >> 12), t3.push(128 | r3 >> 6 & 63), t3.push(128 | 63 & r3)) : (t3.push(240 | r3 >> 18), t3.push(128 | r3 >> 12 & 63), t3.push(128 | r3 >> 6 & 63), t3.push(128 | 63 & r3));
    }
    return new Uint8Array(t3);
  }
  function n(e3) {
    let t3 = "";
    for (let i3 = 0; i3 < e3.length; ) {
      let r3 = e3[i3++ >>> 0];
      if (!(128 & r3)) {
        t3 += String.fromCharCode(r3);
        continue;
      }
      let a3 = 63 & e3[i3++ >>> 0];
      if (192 == (224 & r3)) {
        t3 += String.fromCharCode((31 & r3) << 6 | a3);
        continue;
      }
      let s3 = 63 & e3[i3++ >>> 0];
      if (r3 = 224 == (240 & r3) ? (15 & r3) << 12 | a3 << 6 | s3 : (7 & r3) << 18 | a3 << 12 | s3 << 6 | 63 & e3[i3++ >>> 0], r3 < 65536) t3 += String.fromCharCode(r3);
      else {
        let e4 = r3 - 65536;
        t3 += String.fromCharCode(55296 | e4 >> 10, 56320 | 1023 & e4);
      }
    }
    return t3;
  }
  function o(e3) {
    if (e3 instanceof Uint8Array && a2 && !("function" == typeof SharedArrayBuffer && e3.buffer instanceof SharedArrayBuffer)) try {
      return a2.decode(e3);
    } catch (t3) {
      return n(e3);
    }
    return n(e3);
  }
}, 54825: (e2, t2, i2) => {
  function r2(e3) {
    if (!e3) return -BigInt(1);
    let t3 = (e3 = e3.trim()).split(":"), i3 = BigInt(0);
    return 3 === t3.length && (i3 += BigInt(+t3.shift().trim()) * BigInt(36e5)), i3 += BigInt(+t3.shift().trim()) * BigInt(6e4), t3 = t3.shift().trim().split("."), i3 += BigInt(+t3.shift().trim()) * BigInt(1e3), t3.length && (i3 += BigInt(+t3.shift().trim())), i3;
  }
  function a2(e3) {
    if (!e3) return -BigInt(1);
    let t3 = (e3 = e3.trim()).split(":"), i3 = BigInt(0);
    return 3 === t3.length && (i3 += BigInt(+t3.shift().trim()) * BigInt(36e5)), i3 += BigInt(+t3.shift().trim()) * BigInt(6e4), t3 = t3.shift().trim().split(","), i3 += BigInt(+t3.shift().trim()) * BigInt(1e3), t3.length && (i3 += BigInt(+t3.shift().trim())), i3;
  }
  i2.d(t2, { j: () => r2, t: () => a2 });
}, 8507: (e2, t2, i2) => {
  function r2(e3) {
    const t3 = e3, i3 = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"], r3 = /:\/\/([^\/@]*@?)\[(\S+)\]/;
    let a3 = "";
    r3.test(e3) && (e3 = e3.replace(r3, (e4, t4, i4) => (a3 = i4, "://".concat(t4 || "", "a.b"))));
    const s3 = {}, n2 = /^(?:(?![^:@\/]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@\/]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e3);
    let o2 = 14;
    for (; o2--; ) {
      var c2;
      s3[i3[o2]] = null !== (c2 = n2[o2]) && void 0 !== c2 ? c2 : "";
    }
    return a3 && (s3.host = a3, s3.source = t3, s3.authority = a3 + (s3.port ? ":" + s3.port : "")), { protocol: s3.protocol, file: s3.file, host: s3.host, port: s3.port, user: s3.user, password: s3.password, origin: "".concat(s3.protocol, "://").concat(s3.authority), pathname: s3.path, search: "?".concat(s3.query), hash: s3.anchor ? "#".concat(s3.anchor) : "" };
  }
  i2.d(t2, { ll: () => l, qg: () => r2 }), i2(73146), i2(67672), i2(6498), i2(72739), i2(95335);
  const a2 = /(?:\/|^)\.(?=\/)/g, s2 = /(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g, n = /^(?=([^\/?#]*))\1([^]*)$/, o = /^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/;
  function c(e3) {
    return e3.scheme + e3.netLoc + e3.path + e3.params + e3.query + e3.fragment;
  }
  function d2(e3) {
    const t3 = o.exec(e3);
    return t3 ? { scheme: t3[1] || "", netLoc: t3[2] || "", path: t3[3] || "", params: t3[4] || "", query: t3[5] || "", fragment: t3[6] || "" } : null;
  }
  function h(e3) {
    for (e3 = e3.split("").reverse().join("").replace(a2, ""); e3.length !== (e3 = e3.replace(s2, "")).length; ) ;
    return e3.split("").reverse().join("");
  }
  function l(e3, t3, i3) {
    if (i3 = i3 || {}, e3 = e3.trim(), !(t3 = t3.trim())) {
      if (!i3.alwaysNormalize) return e3;
      let t4 = d2(e3);
      if (!t4) throw new Error("Error trying to parse base URL.");
      return t4.path = h(t4.path), c(t4);
    }
    let r3 = d2(t3);
    if (!r3) throw new Error("Error trying to parse relative URL.");
    if (r3.scheme) return i3.alwaysNormalize ? (r3.path = h(r3.path), c(r3)) : t3;
    let a3 = d2(e3);
    if (!a3) throw new Error("Error trying to parse base URL.");
    if (!a3.netLoc && a3.path && "/" !== a3.path[0]) {
      let e4 = n.exec(a3.path);
      a3.netLoc = e4[1], a3.path = e4[2];
    }
    a3.netLoc && !a3.path && (a3.path = "/");
    const s3 = { scheme: a3.scheme, netLoc: r3.netLoc, path: null, params: r3.params, query: r3.query, fragment: r3.fragment };
    if (!r3.netLoc && (s3.netLoc = a3.netLoc, "/" !== r3.path[0])) if (r3.path) {
      let e4 = a3.path, t4 = e4.substring(0, e4.lastIndexOf("/") + 1) + r3.path;
      s3.path = h(t4);
    } else s3.path = a3.path, r3.params || (s3.params = a3.params, r3.query || (s3.query = a3.query));
    return null === s3.path && (s3.path = i3.alwaysNormalize ? h(r3.path) : r3.path), c(s3);
  }
}, 88096: (e2, t2, i2) => {
  i2.d(t2, { $z: () => f, GW: () => c, WP: () => h, bx: () => p, p2: () => l, tt: () => u });
  var r2 = i2(729), a2 = i2(31865), s2 = i2(86834), n = i2(44690);
  function o(e3) {
    let t3 = 0, i3 = 0;
    for (; ; ) {
      const r3 = e3.readUint8();
      if (t3 |= (127 & r3) << i3, i3 += 7, !(128 & r3)) break;
    }
    return t3;
  }
  async function c(e3) {
    let t3 = 0, i3 = 0;
    for (; ; ) {
      const r3 = await e3.readUint8();
      if (t3 |= (127 & r3) << i3, i3 += 7, !(128 & r3)) break;
    }
    return t3;
  }
  function d2(e3) {
    let t3, i3 = 0, r3 = 0;
    for (; t3 = e3.readUint8(), i3 |= (127 & t3) << r3, r3 += 7, 128 & t3; ) ;
    return 64 & t3 && (i3 |= -1 << r3), i3;
  }
  async function h(e3) {
    let t3, i3 = 0, r3 = 0;
    for (; t3 = await e3.readUint8(), i3 |= (127 & t3) << r3, r3 += 7, 128 & t3; ) ;
    return 64 & t3 && (i3 |= -1 << r3), i3;
  }
  function l(e3, t3) {
    let i3 = true;
    for (; i3; ) {
      let r3 = 127 & t3;
      0 == (t3 >>= 7) && !(64 & r3) || -1 === t3 && 64 & r3 ? i3 = false : r3 |= 128, e3.writeUint8(r3);
    }
  }
  function u(e3, t3) {
    do {
      let i3 = 127 & t3;
      0 != (t3 >>= 7) && (i3 |= 128), e3.writeUint8(i3);
    } while (0 !== t3);
  }
  async function f(e3, t3) {
    do {
      let i3 = 127 & t3;
      0 != (t3 >>= 7) && (i3 |= 128), await e3.writeUint8(i3);
    } while (0 !== t3);
  }
  function p(e3, t3) {
    const i3 = new a2.A(e3, true), c2 = new r2.A(new Uint8Array(e3.length + 100), true);
    for (c2.writeBuffer(i3.readBuffer(8)); i3.remainingSize(); ) {
      const e4 = i3.readUint8();
      c2.writeUint8(e4);
      const a3 = o(i3);
      if (2 === e4) {
        const e5 = new r2.A(new Uint8Array(a3 + 100));
        let h2 = o(i3);
        for (u(e5, h2); h2--; ) {
          const r3 = o(i3);
          u(e5, r3), e5.writeBuffer(i3.readBuffer(r3));
          const a4 = o(i3);
          u(e5, a4), e5.writeBuffer(i3.readBuffer(a4));
          const c3 = i3.readUint8();
          switch (e5.writeUint8(c3), c3) {
            case 0:
              u(e5, o(i3));
              break;
            case 3:
              l(e5, d2(i3)), u(e5, o(i3));
              break;
            case 2: {
              let r4 = o(i3);
              t3.shared ? u(e5, 2 | r4) : u(e5, -3 & r4);
              const a5 = o(i3);
              if (u(e5, t3.initial || a5), 1 & r4) {
                let r5 = o(i3);
                !t3.maximum || n.A.ios && !s2.A.checkVersion(n.A.version, "17", true) && t3.shared || (r5 = t3.maximum), u(e5, r5);
              }
              break;
            }
            case 1: {
              l(e5, d2(i3));
              const t4 = o(i3);
              u(e5, t4), u(e5, o(i3)), 1 & t4 && u(e5, o(i3));
              break;
            }
          }
        }
        const f2 = e5.getWroteBuffer();
        u(c2, f2.length), c2.writeBuffer(f2);
      } else u(c2, a3), c2.writeBuffer(i3.readBuffer(a3));
    }
    return c2.getWroteBuffer();
  }
}, 79331: (e2, t2, i2) => {
  i2.d(t2, { A: () => c });
  var r2 = i2(68632), a2 = i2.n(r2), s2 = i2(72739);
  const n = { aloneValueName: "_@attribute" }, o = [" ", "/", '"', "'", "<", ">"];
  function c(e3, t3 = n) {
    e3 = (e3 = (e3 = (e3 = e3.replace(/<!--[\s\S]*?-->/g, "")).replace(/[\n\t\r]/g, "")).replace(/>[ \t]+</g, "><")).replace(/<\?[^>]*\?>/g, "");
    const i3 = [];
    let r3 = 0;
    function c2(e4, r4) {
      const s3 = i3[i3.length - 1];
      s3 && (e4 !== t3.aloneValueName || null == s3.obj[t3.aloneValueName] ? null == s3.obj[e4] ? s3.obj[e4] = r4 : a2()(s3.obj[e4]) ? s3.obj[e4].push(r4) : s3.obj[e4] = [s3.obj[e4], r4] : s3.obj[t3.aloneValueName] = [s3.obj[t3.aloneValueName], { tagName: e4, ...r4 }]);
    }
    function d2(t4) {
      for (; r3 < e3.length; ) {
        if (e3[r3] === t4) return true;
        r3++;
      }
      return false;
    }
    function h() {
      l();
      let t4 = "";
      for (; r3 < e3.length && !s2.zy(o, e3[r3]); ) t4 += e3[r3], r3++;
      return t4;
    }
    function l() {
      for (; r3 < e3.length && /\s|\r|\n/.test(e3[r3]); ) r3++;
    }
    const u = /\s/, f = /'/, p = /"/;
    function m() {
      if (r3 >= e3.length) return true;
      l();
      let t4 = u;
      '"' !== e3[r3] && "'" != e3[r3] || (t4 = '"' === e3[r3] ? p : f, r3++);
      let i4 = "";
      for (; r3 < e3.length; ) {
        if (t4.test(e3[r3])) {
          r3++;
          break;
        }
        i4 += e3[r3], r3++;
      }
      return i4;
    }
    function g() {
      l();
      let t4 = "";
      for (; r3 < e3.length && "<" !== e3[r3]; ) t4 += e3[r3], r3++;
      return t4;
    }
    function v() {
      for (; "<" === e3[r3]; ) {
        const t4 = r3;
        if (r3++, l(), "/" !== e3[r3]) {
          r3 = t4;
          break;
        }
        if (r3++, h() === i3[i3.length - 1].tag) {
          if (i3.length > 1) {
            const e4 = i3.pop();
            c2(e4.tag, e4.obj);
          }
          d2(">"), r3++, l();
        } else i3.pop(), d2(">"), r3++, l();
      }
    }
    return (function a3() {
      if (r3 >= e3.length) return;
      let s3 = r3;
      if (l(), "<" !== e3[r3]) return r3 = s3, c2(t3.aloneValueName, g()), v(), a3();
      let n2 = d2("<");
      if (!n2) return;
      s3 = r3, r3++;
      const o2 = h();
      if (i3.push({ obj: {}, tag: o2, start: s3 }), (function() {
        for (; l(), ">" !== e3[r3] && "/" !== e3[r3]; ) {
          let e4 = h();
          if (!e4) break;
          "=" === e4[e4.length - 1] ? e4 = e4.substring(0, e4.length - 1) : (d2("="), r3++), c2(e4, m());
        }
      })(), l(), "/" === e3[r3]) {
        if (r3++, i3.length > 1) {
          const e4 = i3.pop();
          c2(e4.tag, e4.obj);
        }
        return d2(">"), r3++, v(), a3();
      }
      n2 = d2(">"), n2 && (r3++, l(), "<" !== e3[r3] && (c2(t3.aloneValueName, g()), l()), v(), a3());
    })(), { [i3[0].tag]: i3[0].obj };
  }
}, 34268: (e2, t2, i2) => {
  var r2 = i2(134), a2 = i2(54001), s2 = i2.n(a2), n = i2(84149), o = i2(87503), c = i2(67672), d2 = i2(4624), h = i2(44690);
  let l = h.A.windows || h.A.mac || h.A.linux ? 10 : 20;
  class u extends o.A {
    constructor() {
      super(), (0, r2.A)(this, "pullIPC", void 0), (0, r2.A)(this, "frontBuffer", void 0), (0, r2.A)(this, "backBuffer", void 0), (0, r2.A)(this, "channels", void 0), (0, r2.A)(this, "backBufferOffset", void 0), (0, r2.A)(this, "ended", void 0), (0, r2.A)(this, "frontBuffered", void 0), (0, r2.A)(this, "pause", void 0), (0, r2.A)(this, "firstRendered", void 0), (0, r2.A)(this, "stopped", void 0), (0, r2.A)(this, "afterPullResolve", void 0), (0, r2.A)(this, "lastStutterTimestamp", void 0), this.ended = false, this.pause = true, this.ipcPort.on(n.S3, async (e3) => {
        switch (e3.method) {
          case "init":
            e3.params && e3.params.bufferLength && (l = e3.params.bufferLength), this.ipcPort.reply(e3);
            break;
          case "start": {
            const { port: t3, channels: i3 } = e3.params;
            this.channels = i3, this.pullIPC = new n.Ay(t3), this.backBufferOffset = 0, this.ended = false, this.frontBuffered = true, this.pause = false, this.firstRendered = false, this.stopped = false, this.lastStutterTimestamp = currentTime;
            const r3 = [], a3 = [];
            await this.pull(r3), r3.length ? (await this.pull(a3), a3.length || (this.ended = true, this.frontBuffered = false)) : (this.ended = true, this.frontBuffered = false, this.backBufferOffset = l), this.frontBuffer = a3, this.backBuffer = r3, this.ipcPort.reply(e3);
            break;
          }
          case "restart": {
            if (!this.ended) return void this.ipcPort.reply(e3);
            this.backBufferOffset = 0, this.ended = false, this.frontBuffered = true, this.pause = false, this.firstRendered = false, this.stopped = false, this.lastStutterTimestamp = currentTime;
            const t3 = [], i3 = [];
            await this.pull(t3), t3.length ? (await this.pull(i3), i3.length || (this.ended = true, this.frontBuffered = false)) : (this.ended = true, this.frontBuffered = false, this.backBufferOffset), this.frontBuffer = i3, this.backBuffer = t3, this.ipcPort.reply(e3);
            break;
          }
          case "clear":
            this.backBufferOffset = l, this.ipcPort.reply(e3);
            break;
          case "stop":
            this.ended || this.pause || this.frontBuffered || await new (s2())((e4) => {
              this.afterPullResolve = e4;
            }), this.stopped = true, this.pullIPC.destroy(), this.ipcPort.reply(e3);
            break;
          case "pause":
            this.pause = true, this.ipcPort.reply(e3);
            break;
          case "unpause":
            this.pause = false, this.ipcPort.reply(e3);
        }
      });
    }
    async pull(e3) {
      const t3 = await this.pullIPC.request("pullBuffer", { nbSamples: 128 * l });
      if (c.ai(t3)) this.ended = true;
      else {
        const i3 = new Float32Array(t3);
        for (let t4 = 0; t4 < this.channels; t4++) e3[t4] = i3.subarray(t4 * l * 128, (t4 + 1) * l * 128);
      }
      this.afterPullResolve && this.afterPullResolve();
    }
    swapBuffer() {
      return !!this.frontBuffered && (this.backBuffer = this.frontBuffer, this.backBufferOffset = 0, this.frontBuffer = [], this.frontBuffered = false, this.pull(this.frontBuffer).then(() => {
        this.frontBuffered = true;
      }), true);
    }
    process(e3, t3, i3) {
      if (this.stopped) return false;
      if (this.backBuffer && !this.pause) {
        if (this.backBufferOffset === l) {
          if (this.ended) return this.backBuffer = null, this.frontBuffer = null, d2.pq("audio source ended", "src/avrender/pcm/AudioSourceWorkletProcessor.ts", 229), this.ipcPort.notify("ended"), true;
          if (!this.swapBuffer()) return currentTime - this.lastStutterTimestamp > 1 && (this.ipcPort.notify("stutter"), this.lastStutterTimestamp = currentTime), true;
        }
        const e4 = t3[0];
        for (let t4 = 0; t4 < this.channels; t4++) e4[t4].set(this.backBuffer[t4].subarray(128 * this.backBufferOffset, 128 * (this.backBufferOffset + 1)), 0);
        this.backBufferOffset++, this.firstRendered || (this.firstRendered = true, this.ipcPort.notify("firstRendered"));
      }
      return true;
    }
  }
  registerProcessor("audio-source-processor", u);
}, 5676: (e2, t2, i2) => {
  var r2 = i2(134), a2 = i2(54001), s2 = i2.n(a2), n = i2(63939), o = i2(50932), c = i2(84149), d2 = i2(87503), h = i2(11473), l = (i2(10278), i2(37837)), u = i2(4624), f = i2(44690);
  let p = f.A.windows || f.A.mac || f.A.linux ? 10 : 20;
  class m extends d2.A {
    constructor() {
      super(), (0, r2.A)(this, "pullIPC", void 0), (0, r2.A)(this, "frontBuffer", void 0), (0, r2.A)(this, "backBuffer", void 0), (0, r2.A)(this, "channels", void 0), (0, r2.A)(this, "backBufferOffset", void 0), (0, r2.A)(this, "ended", void 0), (0, r2.A)(this, "frontBuffered", void 0), (0, r2.A)(this, "firstRendered", void 0), (0, r2.A)(this, "pause", void 0), (0, r2.A)(this, "stopped", void 0), (0, r2.A)(this, "afterPullResolve", void 0), (0, r2.A)(this, "lastStutterTimestamp", void 0), this.ended = false, this.pause = true, this.ipcPort.on(c.S3, async (e3) => {
        switch (e3.method) {
          case "init": {
            const { memory: t3, bufferLength: i3 } = e3.params;
            e3.params.bufferLength && (p = i3), await (0, h.Tg)({ memory: t3, disableAsm: true }), this.ipcPort.reply(e3);
            break;
          }
          case "start": {
            const { port: t3, channels: i3 } = e3.params;
            this.channels = i3, this.pullIPC = new c.Ay(t3), this.backBufferOffset = 0, this.ended = false, this.pause = false, this.frontBuffered = true, this.firstRendered = false, this.stopped = false, this.lastStutterTimestamp = currentTime;
            const r3 = this.allocBuffer(), a3 = this.allocBuffer();
            let s3 = await this.pullIPC.request("pull", { buffer: a3 });
            s3 < 0 ? (this.ended = true, this.frontBuffered = false, this.backBufferOffset) : (s3 = await this.pullIPC.request("pull", { buffer: r3 }), s3 < 0 && (this.ended = true, this.frontBuffered = false)), this.frontBuffer = r3, this.backBuffer = a3, this.ipcPort.reply(e3);
            break;
          }
          case "restart": {
            if (!this.ended) return void this.ipcPort.reply(e3);
            this.backBufferOffset = 0, this.ended = false, this.pause = false, this.frontBuffered = true, this.firstRendered = false, this.stopped = false, this.lastStutterTimestamp = currentTime;
            const t3 = this.backBuffer ? this.backBuffer : this.allocBuffer(), i3 = this.frontBuffer ? this.frontBuffer : this.allocBuffer();
            let r3 = await this.pullIPC.request("pull", { buffer: i3 });
            r3 < 0 ? (this.ended = true, this.frontBuffered = false, this.backBufferOffset = p) : (r3 = await this.pullIPC.request("pull", { buffer: t3 }), r3 < 0 && (this.ended = true, this.frontBuffered = false)), this.frontBuffer = t3, this.backBuffer = i3, this.ipcPort.reply(e3);
            break;
          }
          case "stop":
            this.ended || this.pause || this.frontBuffered || await new (s2())((e4) => {
              this.afterPullResolve = e4;
            }), this.freeBuffer(this.backBuffer), this.freeBuffer(this.frontBuffer), this.backBuffer = 0, this.frontBuffer = 0, this.stopped = true, this.pullIPC.destroy(), this.ipcPort.reply(e3);
            break;
          case "clear":
            this.backBufferOffset = p, this.ipcPort.reply(e3);
            break;
          case "pause":
            this.pause = true, this.ipcPort.reply(e3);
            break;
          case "unpause":
            this.pause = false, this.ipcPort.reply(e3);
        }
      });
    }
    allocBuffer() {
      const e3 = (0, l.Gy)(48);
      o.M[20](e3, (0, l.Gy)(4 * this.channels)), o.M[15](e3 + 16, this.channels);
      const t3 = (0, l.Gy)(512 * p * this.channels);
      for (let i3 = 0; i3 < this.channels; i3++) o.M[20](n.f[20](e3) + 4 * i3, t3 + 128 * p * 4 * i3);
      return o.M[15](e3 + 12, 128 * p), e3;
    }
    freeBuffer(e3) {
      e3 && ((0, l.aI)(n.f[20](e3)), (0, l.aI)(e3), (0, l.Eb)(e3));
    }
    async pull() {
      await this.pullIPC.request("pull", { buffer: this.frontBuffer }) < 0 && (this.ended = true), this.afterPullResolve && this.afterPullResolve();
    }
    swapBuffer() {
      if (!this.frontBuffered) return false;
      {
        const e3 = this.backBuffer;
        this.backBuffer = this.frontBuffer, this.frontBuffer = e3, this.backBufferOffset = 0;
      }
      return this.frontBuffered = false, this.pull().then(() => {
        this.frontBuffered = true;
      }), true;
    }
    process(e3, t3, i3) {
      if (this.stopped) return false;
      if (this.backBuffer && !this.pause) {
        if (this.backBufferOffset === p) {
          if (this.ended) return this.freeBuffer(this.backBuffer), this.freeBuffer(this.frontBuffer), this.backBuffer = 0, this.frontBuffer = 0, u.pq("audio source ended", "src/avrender/pcm/AudioSourceWorkletProcessor2.ts", 270), this.ipcPort.notify("ended"), true;
          if (!this.swapBuffer()) return currentTime - this.lastStutterTimestamp > 1 && (this.ipcPort.notify("stutter"), this.lastStutterTimestamp = currentTime), true;
        }
        const e4 = t3[0];
        for (let t4 = 0; t4 < this.channels; t4++) e4[t4].set(new Float32Array((0, h.Lv)(), n.f[20](n.f[20](this.backBuffer) + 4 * t4) + 128 * this.backBufferOffset * 4, 128), 0);
        this.backBufferOffset++, this.firstRendered || (this.firstRendered = true, this.ipcPort.notify("firstRendered"));
      }
      return true;
    }
  }
  registerProcessor("audio-source-processor", m);
}, 87503: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(134), a2 = i2(84149);
  class s2 extends AudioWorkletProcessor {
    constructor() {
      super(), (0, r2.A)(this, "ipcPort", void 0), this.ipcPort = new a2.Ay(this.port);
    }
    async request(e3, t3, i3) {
      return this.ipcPort.request(e3, t3, i3);
    }
    notify(e3, t3, i3) {
      this.ipcPort.notify(e3, t3, i3);
    }
  }
}, 74385: (e2, t2, i2) => {
  i2(97863), i2(25263), e2.exports = i2(46438).Array.from;
}, 37149: (e2, t2, i2) => {
  i2(18355), e2.exports = i2(46438).Array.isArray;
}, 87172: (e2, t2, i2) => {
  i2(23204), e2.exports = i2(46438).Date.now;
}, 85079: (e2, t2, i2) => {
  var r2 = i2(46438), a2 = r2.JSON || (r2.JSON = { stringify: JSON.stringify });
  e2.exports = function(e3) {
    return a2.stringify.apply(a2, arguments);
  };
}, 92861: (e2, t2, i2) => {
  i2(78978), i2(97863), i2(7914), i2(96050), i2(28337), i2(74674), i2(62223), e2.exports = i2(46438).Map;
}, 36553: (e2, t2, i2) => {
  i2(91045), e2.exports = i2(46438).Number.isFinite;
}, 11837: (e2, t2, i2) => {
  i2(21489), e2.exports = i2(46438).Number.isNaN;
}, 92696: (e2, t2, i2) => {
  i2(74712);
  var r2 = i2(46438).Object;
  e2.exports = function(e3, t3, i3) {
    return r2.defineProperty(e3, t3, i3);
  };
}, 22948: (e2, t2, i2) => {
  i2(51780), e2.exports = i2(46438).Object.freeze;
}, 62160: (e2, t2, i2) => {
  i2(18128), e2.exports = i2(46438).Object.getPrototypeOf;
}, 47567: (e2, t2, i2) => {
  i2(96847), e2.exports = i2(46438).Object.keys;
}, 21724: (e2, t2, i2) => {
  i2(4284), e2.exports = i2(46438).Object.setPrototypeOf;
}, 27279: (e2, t2, i2) => {
  i2(95828), e2.exports = i2(46438).parseFloat;
}, 25216: (e2, t2, i2) => {
  i2(65331), e2.exports = i2(46438).parseInt;
}, 34750: (e2, t2, i2) => {
  i2(78978), i2(97863), i2(7914), i2(91229), i2(2639), i2(46121), e2.exports = i2(46438).Promise;
}, 31707: (e2, t2, i2) => {
  i2(66801), e2.exports = i2(46438).setImmediate;
}, 28795: (e2, t2, i2) => {
  i2(78978), i2(97863), i2(7914), i2(21640), i2(871), i2(52584), i2(98345), e2.exports = i2(46438).Set;
}, 16560: (e2, t2, i2) => {
  i2(19626), i2(78978), i2(42860), i2(60716), e2.exports = i2(46438).Symbol;
}, 54220: (e2, t2, i2) => {
  i2(97863), i2(7914), e2.exports = i2(84336).f("iterator");
}, 39967: (e2, t2, i2) => {
  e2.exports = i2(84336).f("toPrimitive");
}, 48652: (e2, t2, i2) => {
  i2(78978), e2.exports = i2(84336).f("toStringTag");
}, 25219: (e2) => {
  e2.exports = function(e3) {
    if ("function" != typeof e3) throw TypeError(e3 + " is not a function!");
    return e3;
  };
}, 12560: (e2) => {
  e2.exports = function() {
  };
}, 2832: (e2) => {
  e2.exports = function(e3, t2, i2, r2) {
    if (!(e3 instanceof t2) || void 0 !== r2 && r2 in e3) throw TypeError(i2 + ": incorrect invocation!");
    return e3;
  };
}, 80812: (e2, t2, i2) => {
  var r2 = i2(24401);
  e2.exports = function(e3) {
    if (!r2(e3)) throw TypeError(e3 + " is not an object!");
    return e3;
  };
}, 77076: (e2, t2, i2) => {
  var r2 = i2(95838);
  e2.exports = function(e3, t3) {
    var i3 = [];
    return r2(e3, false, i3.push, i3, t3), i3;
  };
}, 84448: (e2, t2, i2) => {
  var r2 = i2(65133), a2 = i2(70181), s2 = i2(72917);
  e2.exports = function(e3) {
    return function(t3, i3, n) {
      var o, c = r2(t3), d2 = a2(c.length), h = s2(n, d2);
      if (e3 && i3 != i3) {
        for (; d2 > h; ) if ((o = c[h++]) != o) return true;
      } else for (; d2 > h; h++) if ((e3 || h in c) && c[h] === i3) return e3 || h || 0;
      return !e3 && -1;
    };
  };
}, 48219: (e2, t2, i2) => {
  var r2 = i2(58852), a2 = i2(7001), s2 = i2(66310), n = i2(70181), o = i2(99244);
  e2.exports = function(e3, t3) {
    var i3 = 1 == e3, c = 2 == e3, d2 = 3 == e3, h = 4 == e3, l = 6 == e3, u = 5 == e3 || l, f = t3 || o;
    return function(t4, o2, p) {
      for (var m, g, v = s2(t4), A = a2(v), y = r2(o2, p, 3), w = n(A.length), b = 0, k = i3 ? f(t4, w) : c ? f(t4, 0) : void 0; w > b; b++) if ((u || b in A) && (g = y(m = A[b], b, v), e3)) {
        if (i3) k[b] = g;
        else if (g) switch (e3) {
          case 3:
            return true;
          case 5:
            return m;
          case 6:
            return b;
          case 2:
            k.push(m);
        }
        else if (h) return false;
      }
      return l ? -1 : d2 || h ? h : k;
    };
  };
}, 49742: (e2, t2, i2) => {
  var r2 = i2(24401), a2 = i2(15461), s2 = i2(30254)("species");
  e2.exports = function(e3) {
    var t3;
    return a2(e3) && ("function" != typeof (t3 = e3.constructor) || t3 !== Array && !a2(t3.prototype) || (t3 = void 0), r2(t3) && null === (t3 = t3[s2]) && (t3 = void 0)), void 0 === t3 ? Array : t3;
  };
}, 99244: (e2, t2, i2) => {
  var r2 = i2(49742);
  e2.exports = function(e3, t3) {
    return new (r2(e3))(t3);
  };
}, 44968: (e2, t2, i2) => {
  var r2 = i2(93417), a2 = i2(30254)("toStringTag"), s2 = "Arguments" == r2(/* @__PURE__ */ (function() {
    return arguments;
  })());
  e2.exports = function(e3) {
    var t3, i3, n;
    return void 0 === e3 ? "Undefined" : null === e3 ? "Null" : "string" == typeof (i3 = (function(e4, t4) {
      try {
        return e4[t4];
      } catch (e5) {
      }
    })(t3 = Object(e3), a2)) ? i3 : s2 ? r2(t3) : "Object" == (n = r2(t3)) && "function" == typeof t3.callee ? "Arguments" : n;
  };
}, 93417: (e2) => {
  var t2 = {}.toString;
  e2.exports = function(e3) {
    return t2.call(e3).slice(8, -1);
  };
}, 95933: (e2, t2, i2) => {
  var r2 = i2(78423).f, a2 = i2(22087), s2 = i2(30953), n = i2(58852), o = i2(2832), c = i2(95838), d2 = i2(88839), h = i2(20322), l = i2(45274), u = i2(58219), f = i2(75172).fastKey, p = i2(6096), m = u ? "_s" : "size", g = function(e3, t3) {
    var i3, r3 = f(t3);
    if ("F" !== r3) return e3._i[r3];
    for (i3 = e3._f; i3; i3 = i3.n) if (i3.k == t3) return i3;
  };
  e2.exports = { getConstructor: function(e3, t3, i3, d3) {
    var h2 = e3(function(e4, r3) {
      o(e4, h2, t3, "_i"), e4._t = t3, e4._i = a2(null), e4._f = void 0, e4._l = void 0, e4[m] = 0, null != r3 && c(r3, i3, e4[d3], e4);
    });
    return s2(h2.prototype, { clear: function() {
      for (var e4 = p(this, t3), i4 = e4._i, r3 = e4._f; r3; r3 = r3.n) r3.r = true, r3.p && (r3.p = r3.p.n = void 0), delete i4[r3.i];
      e4._f = e4._l = void 0, e4[m] = 0;
    }, delete: function(e4) {
      var i4 = p(this, t3), r3 = g(i4, e4);
      if (r3) {
        var a3 = r3.n, s3 = r3.p;
        delete i4._i[r3.i], r3.r = true, s3 && (s3.n = a3), a3 && (a3.p = s3), i4._f == r3 && (i4._f = a3), i4._l == r3 && (i4._l = s3), i4[m]--;
      }
      return !!r3;
    }, forEach: function(e4) {
      p(this, t3);
      for (var i4, r3 = n(e4, arguments.length > 1 ? arguments[1] : void 0, 3); i4 = i4 ? i4.n : this._f; ) for (r3(i4.v, i4.k, this); i4 && i4.r; ) i4 = i4.p;
    }, has: function(e4) {
      return !!g(p(this, t3), e4);
    } }), u && r2(h2.prototype, "size", { get: function() {
      return p(this, t3)[m];
    } }), h2;
  }, def: function(e3, t3, i3) {
    var r3, a3, s3 = g(e3, t3);
    return s3 ? s3.v = i3 : (e3._l = s3 = { i: a3 = f(t3, true), k: t3, v: i3, p: r3 = e3._l, n: void 0, r: false }, e3._f || (e3._f = s3), r3 && (r3.n = s3), e3[m]++, "F" !== a3 && (e3._i[a3] = s3)), e3;
  }, getEntry: g, setStrong: function(e3, t3, i3) {
    d2(e3, t3, function(e4, i4) {
      this._t = p(e4, t3), this._k = i4, this._l = void 0;
    }, function() {
      for (var e4 = this, t4 = e4._k, i4 = e4._l; i4 && i4.r; ) i4 = i4.p;
      return e4._t && (e4._l = i4 = i4 ? i4.n : e4._t._f) ? h(0, "keys" == t4 ? i4.k : "values" == t4 ? i4.v : [i4.k, i4.v]) : (e4._t = void 0, h(1));
    }, i3 ? "entries" : "values", !i3, true), l(t3);
  } };
}, 5874: (e2, t2, i2) => {
  var r2 = i2(44968), a2 = i2(77076);
  e2.exports = function(e3) {
    return function() {
      if (r2(this) != e3) throw TypeError(e3 + "#toJSON isn't generic");
      return a2(this);
    };
  };
}, 99373: (e2, t2, i2) => {
  var r2 = i2(66670), a2 = i2(88535), s2 = i2(75172), n = i2(81984), o = i2(2677), c = i2(30953), d2 = i2(95838), h = i2(2832), l = i2(24401), u = i2(1356), f = i2(78423).f, p = i2(48219)(0), m = i2(58219);
  e2.exports = function(e3, t3, i3, g, v, A) {
    var y = r2[e3], w = y, b = v ? "set" : "add", k = w && w.prototype, x = {};
    return m && "function" == typeof w && (A || k.forEach && !n(function() {
      new w().entries().next();
    })) ? (w = t3(function(t4, i4) {
      h(t4, w, e3, "_c"), t4._c = new y(), null != i4 && d2(i4, v, t4[b], t4);
    }), p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","), function(e4) {
      var t4 = "add" == e4 || "set" == e4;
      !(e4 in k) || A && "clear" == e4 || o(w.prototype, e4, function(i4, r3) {
        if (h(this, w, e4), !t4 && A && !l(i4)) return "get" == e4 && void 0;
        var a3 = this._c[e4](0 === i4 ? 0 : i4, r3);
        return t4 ? this : a3;
      });
    }), A || f(w.prototype, "size", { get: function() {
      return this._c.size;
    } })) : (w = g.getConstructor(t3, e3, v, b), c(w.prototype, i3), s2.NEED = true), u(w, e3), x[e3] = w, a2(a2.G + a2.W + a2.F, x), A || g.setStrong(w, e3, v), w;
  };
}, 46438: (e2) => {
  var t2 = e2.exports = { version: "2.6.12" };
  "number" == typeof __e && (__e = t2);
}, 31891: (e2, t2, i2) => {
  var r2 = i2(78423), a2 = i2(86260);
  e2.exports = function(e3, t3, i3) {
    t3 in e3 ? r2.f(e3, t3, a2(0, i3)) : e3[t3] = i3;
  };
}, 58852: (e2, t2, i2) => {
  var r2 = i2(25219);
  e2.exports = function(e3, t3, i3) {
    if (r2(e3), void 0 === t3) return e3;
    switch (i3) {
      case 1:
        return function(i4) {
          return e3.call(t3, i4);
        };
      case 2:
        return function(i4, r3) {
          return e3.call(t3, i4, r3);
        };
      case 3:
        return function(i4, r3, a2) {
          return e3.call(t3, i4, r3, a2);
        };
    }
    return function() {
      return e3.apply(t3, arguments);
    };
  };
}, 87608: (e2) => {
  e2.exports = function(e3) {
    if (null == e3) throw TypeError("Can't call method on  " + e3);
    return e3;
  };
}, 58219: (e2, t2, i2) => {
  e2.exports = !i2(81984)(function() {
    return 7 != Object.defineProperty({}, "a", { get: function() {
      return 7;
    } }).a;
  });
}, 3802: (e2, t2, i2) => {
  var r2 = i2(24401), a2 = i2(66670).document, s2 = r2(a2) && r2(a2.createElement);
  e2.exports = function(e3) {
    return s2 ? a2.createElement(e3) : {};
  };
}, 77956: (e2) => {
  e2.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");
}, 36473: (e2, t2, i2) => {
  var r2 = i2(54311), a2 = i2(59820), s2 = i2(36569);
  e2.exports = function(e3) {
    var t3 = r2(e3), i3 = a2.f;
    if (i3) for (var n, o = i3(e3), c = s2.f, d2 = 0; o.length > d2; ) c.call(e3, n = o[d2++]) && t3.push(n);
    return t3;
  };
}, 88535: (e2, t2, i2) => {
  var r2 = i2(66670), a2 = i2(46438), s2 = i2(58852), n = i2(2677), o = i2(75509), c = "prototype", d2 = function(e3, t3, i3) {
    var h, l, u, f = e3 & d2.F, p = e3 & d2.G, m = e3 & d2.S, g = e3 & d2.P, v = e3 & d2.B, A = e3 & d2.W, y = p ? a2 : a2[t3] || (a2[t3] = {}), w = y[c], b = p ? r2 : m ? r2[t3] : (r2[t3] || {})[c];
    for (h in p && (i3 = t3), i3) (l = !f && b && void 0 !== b[h]) && o(y, h) || (u = l ? b[h] : i3[h], y[h] = p && "function" != typeof b[h] ? i3[h] : v && l ? s2(u, r2) : A && b[h] == u ? (function(e4) {
      var t4 = function(t5, i4, r3) {
        if (this instanceof e4) {
          switch (arguments.length) {
            case 0:
              return new e4();
            case 1:
              return new e4(t5);
            case 2:
              return new e4(t5, i4);
          }
          return new e4(t5, i4, r3);
        }
        return e4.apply(this, arguments);
      };
      return t4[c] = e4[c], t4;
    })(u) : g && "function" == typeof u ? s2(Function.call, u) : u, g && ((y.virtual || (y.virtual = {}))[h] = u, e3 & d2.R && w && !w[h] && n(w, h, u)));
  };
  d2.F = 1, d2.G = 2, d2.S = 4, d2.P = 8, d2.B = 16, d2.W = 32, d2.U = 64, d2.R = 128, e2.exports = d2;
}, 81984: (e2) => {
  e2.exports = function(e3) {
    try {
      return !!e3();
    } catch (e4) {
      return true;
    }
  };
}, 95838: (e2, t2, i2) => {
  var r2 = i2(58852), a2 = i2(27904), s2 = i2(12828), n = i2(80812), o = i2(70181), c = i2(55298), d2 = {}, h = {}, l = e2.exports = function(e3, t3, i3, l2, u) {
    var f, p, m, g, v = u ? function() {
      return e3;
    } : c(e3), A = r2(i3, l2, t3 ? 2 : 1), y = 0;
    if ("function" != typeof v) throw TypeError(e3 + " is not iterable!");
    if (s2(v)) {
      for (f = o(e3.length); f > y; y++) if ((g = t3 ? A(n(p = e3[y])[0], p[1]) : A(e3[y])) === d2 || g === h) return g;
    } else for (m = v.call(e3); !(p = m.next()).done; ) if ((g = a2(m, A, p.value, t3)) === d2 || g === h) return g;
  };
  l.BREAK = d2, l.RETURN = h;
}, 66670: (e2) => {
  var t2 = e2.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
  "number" == typeof __g && (__g = t2);
}, 75509: (e2) => {
  var t2 = {}.hasOwnProperty;
  e2.exports = function(e3, i2) {
    return t2.call(e3, i2);
  };
}, 2677: (e2, t2, i2) => {
  var r2 = i2(78423), a2 = i2(86260);
  e2.exports = i2(58219) ? function(e3, t3, i3) {
    return r2.f(e3, t3, a2(1, i3));
  } : function(e3, t3, i3) {
    return e3[t3] = i3, e3;
  };
}, 76260: (e2, t2, i2) => {
  var r2 = i2(66670).document;
  e2.exports = r2 && r2.documentElement;
}, 32484: (e2, t2, i2) => {
  e2.exports = !i2(58219) && !i2(81984)(function() {
    return 7 != Object.defineProperty(i2(3802)("div"), "a", { get: function() {
      return 7;
    } }).a;
  });
}, 20709: (e2) => {
  e2.exports = function(e3, t2, i2) {
    var r2 = void 0 === i2;
    switch (t2.length) {
      case 0:
        return r2 ? e3() : e3.call(i2);
      case 1:
        return r2 ? e3(t2[0]) : e3.call(i2, t2[0]);
      case 2:
        return r2 ? e3(t2[0], t2[1]) : e3.call(i2, t2[0], t2[1]);
      case 3:
        return r2 ? e3(t2[0], t2[1], t2[2]) : e3.call(i2, t2[0], t2[1], t2[2]);
      case 4:
        return r2 ? e3(t2[0], t2[1], t2[2], t2[3]) : e3.call(i2, t2[0], t2[1], t2[2], t2[3]);
    }
    return e3.apply(i2, t2);
  };
}, 7001: (e2, t2, i2) => {
  var r2 = i2(93417);
  e2.exports = Object("z").propertyIsEnumerable(0) ? Object : function(e3) {
    return "String" == r2(e3) ? e3.split("") : Object(e3);
  };
}, 12828: (e2, t2, i2) => {
  var r2 = i2(20210), a2 = i2(30254)("iterator"), s2 = Array.prototype;
  e2.exports = function(e3) {
    return void 0 !== e3 && (r2.Array === e3 || s2[a2] === e3);
  };
}, 15461: (e2, t2, i2) => {
  var r2 = i2(93417);
  e2.exports = Array.isArray || function(e3) {
    return "Array" == r2(e3);
  };
}, 24401: (e2) => {
  e2.exports = function(e3) {
    return "object" == typeof e3 ? null !== e3 : "function" == typeof e3;
  };
}, 27904: (e2, t2, i2) => {
  var r2 = i2(80812);
  e2.exports = function(e3, t3, i3, a2) {
    try {
      return a2 ? t3(r2(i3)[0], i3[1]) : t3(i3);
    } catch (t4) {
      var s2 = e3.return;
      throw void 0 !== s2 && r2(s2.call(e3)), t4;
    }
  };
}, 48248: (e2, t2, i2) => {
  var r2 = i2(22087), a2 = i2(86260), s2 = i2(1356), n = {};
  i2(2677)(n, i2(30254)("iterator"), function() {
    return this;
  }), e2.exports = function(e3, t3, i3) {
    e3.prototype = r2(n, { next: a2(1, i3) }), s2(e3, t3 + " Iterator");
  };
}, 88839: (e2, t2, i2) => {
  var r2 = i2(74742), a2 = i2(88535), s2 = i2(61331), n = i2(2677), o = i2(20210), c = i2(48248), d2 = i2(1356), h = i2(66123), l = i2(30254)("iterator"), u = !([].keys && "next" in [].keys()), f = "keys", p = "values", m = function() {
    return this;
  };
  e2.exports = function(e3, t3, i3, g, v, A, y) {
    c(i3, t3, g);
    var w, b, k, x = function(e4) {
      if (!u && e4 in T) return T[e4];
      switch (e4) {
        case f:
        case p:
          return function() {
            return new i3(this, e4);
          };
      }
      return function() {
        return new i3(this, e4);
      };
    }, I = t3 + " Iterator", P = v == p, S = false, T = e3.prototype, M = T[l] || T["@@iterator"] || v && T[v], B = M || x(v), R = v ? P ? x("entries") : B : void 0, _ = "Array" == t3 && T.entries || M;
    if (_ && (k = h(_.call(new e3()))) !== Object.prototype && k.next && (d2(k, I, true), r2 || "function" == typeof k[l] || n(k, l, m)), P && M && M.name !== p && (S = true, B = function() {
      return M.call(this);
    }), r2 && !y || !u && !S && T[l] || n(T, l, B), o[t3] = B, o[I] = m, v) if (w = { values: P ? B : x(p), keys: A ? B : x(f), entries: R }, y) for (b in w) b in T || s2(T, b, w[b]);
    else a2(a2.P + a2.F * (u || S), t3, w);
    return w;
  };
}, 27899: (e2, t2, i2) => {
  var r2 = i2(30254)("iterator"), a2 = false;
  try {
    var s2 = [7][r2]();
    s2.return = function() {
      a2 = true;
    }, Array.from(s2, function() {
      throw 2;
    });
  } catch (e3) {
  }
  e2.exports = function(e3, t3) {
    if (!t3 && !a2) return false;
    var i3 = false;
    try {
      var s3 = [7], n = s3[r2]();
      n.next = function() {
        return { done: i3 = true };
      }, s3[r2] = function() {
        return n;
      }, e3(s3);
    } catch (e4) {
    }
    return i3;
  };
}, 20322: (e2) => {
  e2.exports = function(e3, t2) {
    return { value: t2, done: !!e3 };
  };
}, 20210: (e2) => {
  e2.exports = {};
}, 74742: (e2) => {
  e2.exports = true;
}, 75172: (e2, t2, i2) => {
  var r2 = i2(19191)("meta"), a2 = i2(24401), s2 = i2(75509), n = i2(78423).f, o = 0, c = Object.isExtensible || function() {
    return true;
  }, d2 = !i2(81984)(function() {
    return c(Object.preventExtensions({}));
  }), h = function(e3) {
    n(e3, r2, { value: { i: "O" + ++o, w: {} } });
  }, l = e2.exports = { KEY: r2, NEED: false, fastKey: function(e3, t3) {
    if (!a2(e3)) return "symbol" == typeof e3 ? e3 : ("string" == typeof e3 ? "S" : "P") + e3;
    if (!s2(e3, r2)) {
      if (!c(e3)) return "F";
      if (!t3) return "E";
      h(e3);
    }
    return e3[r2].i;
  }, getWeak: function(e3, t3) {
    if (!s2(e3, r2)) {
      if (!c(e3)) return true;
      if (!t3) return false;
      h(e3);
    }
    return e3[r2].w;
  }, onFreeze: function(e3) {
    return d2 && l.NEED && c(e3) && !s2(e3, r2) && h(e3), e3;
  } };
}, 53792: (e2, t2, i2) => {
  var r2 = i2(66670), a2 = i2(8036).set, s2 = r2.MutationObserver || r2.WebKitMutationObserver, n = r2.process, o = r2.Promise, c = "process" == i2(93417)(n);
  e2.exports = function() {
    var e3, t3, i3, d2 = function() {
      var r3, a3;
      for (c && (r3 = n.domain) && r3.exit(); e3; ) {
        a3 = e3.fn, e3 = e3.next;
        try {
          a3();
        } catch (r4) {
          throw e3 ? i3() : t3 = void 0, r4;
        }
      }
      t3 = void 0, r3 && r3.enter();
    };
    if (c) i3 = function() {
      n.nextTick(d2);
    };
    else if (!s2 || r2.navigator && r2.navigator.standalone) if (o && o.resolve) {
      var h = o.resolve(void 0);
      i3 = function() {
        h.then(d2);
      };
    } else i3 = function() {
      a2.call(r2, d2);
    };
    else {
      var l = true, u = document.createTextNode("");
      new s2(d2).observe(u, { characterData: true }), i3 = function() {
        u.data = l = !l;
      };
    }
    return function(r3) {
      var a3 = { fn: r3, next: void 0 };
      t3 && (t3.next = a3), e3 || (e3 = a3, i3()), t3 = a3;
    };
  };
}, 11642: (e2, t2, i2) => {
  var r2 = i2(25219);
  function a2(e3) {
    var t3, i3;
    this.promise = new e3(function(e4, r3) {
      if (void 0 !== t3 || void 0 !== i3) throw TypeError("Bad Promise constructor");
      t3 = e4, i3 = r3;
    }), this.resolve = r2(t3), this.reject = r2(i3);
  }
  e2.exports.f = function(e3) {
    return new a2(e3);
  };
}, 22087: (e2, t2, i2) => {
  var r2 = i2(80812), a2 = i2(90082), s2 = i2(77956), n = i2(4566)("IE_PROTO"), o = function() {
  }, c = "prototype", d2 = function() {
    var e3, t3 = i2(3802)("iframe"), r3 = s2.length;
    for (t3.style.display = "none", i2(76260).appendChild(t3), t3.src = "javascript:", (e3 = t3.contentWindow.document).open(), e3.write("<script>document.F=Object<\/script>"), e3.close(), d2 = e3.F; r3--; ) delete d2[c][s2[r3]];
    return d2();
  };
  e2.exports = Object.create || function(e3, t3) {
    var i3;
    return null !== e3 ? (o[c] = r2(e3), i3 = new o(), o[c] = null, i3[n] = e3) : i3 = d2(), void 0 === t3 ? i3 : a2(i3, t3);
  };
}, 78423: (e2, t2, i2) => {
  var r2 = i2(80812), a2 = i2(32484), s2 = i2(10752), n = Object.defineProperty;
  t2.f = i2(58219) ? Object.defineProperty : function(e3, t3, i3) {
    if (r2(e3), t3 = s2(t3, true), r2(i3), a2) try {
      return n(e3, t3, i3);
    } catch (e4) {
    }
    if ("get" in i3 || "set" in i3) throw TypeError("Accessors not supported!");
    return "value" in i3 && (e3[t3] = i3.value), e3;
  };
}, 90082: (e2, t2, i2) => {
  var r2 = i2(78423), a2 = i2(80812), s2 = i2(54311);
  e2.exports = i2(58219) ? Object.defineProperties : function(e3, t3) {
    a2(e3);
    for (var i3, n = s2(t3), o = n.length, c = 0; o > c; ) r2.f(e3, i3 = n[c++], t3[i3]);
    return e3;
  };
}, 81033: (e2, t2, i2) => {
  var r2 = i2(36569), a2 = i2(86260), s2 = i2(65133), n = i2(10752), o = i2(75509), c = i2(32484), d2 = Object.getOwnPropertyDescriptor;
  t2.f = i2(58219) ? d2 : function(e3, t3) {
    if (e3 = s2(e3), t3 = n(t3, true), c) try {
      return d2(e3, t3);
    } catch (e4) {
    }
    if (o(e3, t3)) return a2(!r2.f.call(e3, t3), e3[t3]);
  };
}, 36309: (e2, t2, i2) => {
  var r2 = i2(65133), a2 = i2(1743).f, s2 = {}.toString, n = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
  e2.exports.f = function(e3) {
    return n && "[object Window]" == s2.call(e3) ? (function(e4) {
      try {
        return a2(e4);
      } catch (e5) {
        return n.slice();
      }
    })(e3) : a2(r2(e3));
  };
}, 1743: (e2, t2, i2) => {
  var r2 = i2(85081), a2 = i2(77956).concat("length", "prototype");
  t2.f = Object.getOwnPropertyNames || function(e3) {
    return r2(e3, a2);
  };
}, 59820: (e2, t2) => {
  t2.f = Object.getOwnPropertySymbols;
}, 66123: (e2, t2, i2) => {
  var r2 = i2(75509), a2 = i2(66310), s2 = i2(4566)("IE_PROTO"), n = Object.prototype;
  e2.exports = Object.getPrototypeOf || function(e3) {
    return e3 = a2(e3), r2(e3, s2) ? e3[s2] : "function" == typeof e3.constructor && e3 instanceof e3.constructor ? e3.constructor.prototype : e3 instanceof Object ? n : null;
  };
}, 85081: (e2, t2, i2) => {
  var r2 = i2(75509), a2 = i2(65133), s2 = i2(84448)(false), n = i2(4566)("IE_PROTO");
  e2.exports = function(e3, t3) {
    var i3, o = a2(e3), c = 0, d2 = [];
    for (i3 in o) i3 != n && r2(o, i3) && d2.push(i3);
    for (; t3.length > c; ) r2(o, i3 = t3[c++]) && (~s2(d2, i3) || d2.push(i3));
    return d2;
  };
}, 54311: (e2, t2, i2) => {
  var r2 = i2(85081), a2 = i2(77956);
  e2.exports = Object.keys || function(e3) {
    return r2(e3, a2);
  };
}, 36569: (e2, t2) => {
  t2.f = {}.propertyIsEnumerable;
}, 47331: (e2, t2, i2) => {
  var r2 = i2(88535), a2 = i2(46438), s2 = i2(81984);
  e2.exports = function(e3, t3) {
    var i3 = (a2.Object || {})[e3] || Object[e3], n = {};
    n[e3] = t3(i3), r2(r2.S + r2.F * s2(function() {
      i3(1);
    }), "Object", n);
  };
}, 49709: (e2, t2, i2) => {
  var r2 = i2(66670).parseFloat, a2 = i2(24269).trim;
  e2.exports = 1 / r2(i2(80459) + "-0") != -1 / 0 ? function(e3) {
    var t3 = a2(String(e3), 3), i3 = r2(t3);
    return 0 === i3 && "-" == t3.charAt(0) ? -0 : i3;
  } : r2;
}, 15722: (e2, t2, i2) => {
  var r2 = i2(66670).parseInt, a2 = i2(24269).trim, s2 = i2(80459), n = /^[-+]?0[xX]/;
  e2.exports = 8 !== r2(s2 + "08") || 22 !== r2(s2 + "0x16") ? function(e3, t3) {
    var i3 = a2(String(e3), 3);
    return r2(i3, t3 >>> 0 || (n.test(i3) ? 16 : 10));
  } : r2;
}, 41704: (e2) => {
  e2.exports = function(e3) {
    try {
      return { e: false, v: e3() };
    } catch (e4) {
      return { e: true, v: e4 };
    }
  };
}, 61037: (e2, t2, i2) => {
  var r2 = i2(80812), a2 = i2(24401), s2 = i2(11642);
  e2.exports = function(e3, t3) {
    if (r2(e3), a2(t3) && t3.constructor === e3) return t3;
    var i3 = s2.f(e3);
    return (0, i3.resolve)(t3), i3.promise;
  };
}, 86260: (e2) => {
  e2.exports = function(e3, t2) {
    return { enumerable: !(1 & e3), configurable: !(2 & e3), writable: !(4 & e3), value: t2 };
  };
}, 30953: (e2, t2, i2) => {
  var r2 = i2(2677);
  e2.exports = function(e3, t3, i3) {
    for (var a2 in t3) i3 && e3[a2] ? e3[a2] = t3[a2] : r2(e3, a2, t3[a2]);
    return e3;
  };
}, 61331: (e2, t2, i2) => {
  e2.exports = i2(2677);
}, 643: (e2, t2, i2) => {
  var r2 = i2(88535), a2 = i2(25219), s2 = i2(58852), n = i2(95838);
  e2.exports = function(e3) {
    r2(r2.S, e3, { from: function(e4) {
      var t3, i3, r3, o, c = arguments[1];
      return a2(this), (t3 = void 0 !== c) && a2(c), null == e4 ? new this() : (i3 = [], t3 ? (r3 = 0, o = s2(c, arguments[2], 2), n(e4, false, function(e5) {
        i3.push(o(e5, r3++));
      })) : n(e4, false, i3.push, i3), new this(i3));
    } });
  };
}, 44398: (e2, t2, i2) => {
  var r2 = i2(88535);
  e2.exports = function(e3) {
    r2(r2.S, e3, { of: function() {
      for (var e4 = arguments.length, t3 = new Array(e4); e4--; ) t3[e4] = arguments[e4];
      return new this(t3);
    } });
  };
}, 32074: (e2, t2, i2) => {
  var r2 = i2(24401), a2 = i2(80812), s2 = function(e3, t3) {
    if (a2(e3), !r2(t3) && null !== t3) throw TypeError(t3 + ": can't set as prototype!");
  };
  e2.exports = { set: Object.setPrototypeOf || ("__proto__" in {} ? (function(e3, t3, r3) {
    try {
      (r3 = i2(58852)(Function.call, i2(81033).f(Object.prototype, "__proto__").set, 2))(e3, []), t3 = !(e3 instanceof Array);
    } catch (e4) {
      t3 = true;
    }
    return function(e4, i3) {
      return s2(e4, i3), t3 ? e4.__proto__ = i3 : r3(e4, i3), e4;
    };
  })({}, false) : void 0), check: s2 };
}, 45274: (e2, t2, i2) => {
  var r2 = i2(66670), a2 = i2(46438), s2 = i2(78423), n = i2(58219), o = i2(30254)("species");
  e2.exports = function(e3) {
    var t3 = "function" == typeof a2[e3] ? a2[e3] : r2[e3];
    n && t3 && !t3[o] && s2.f(t3, o, { configurable: true, get: function() {
      return this;
    } });
  };
}, 1356: (e2, t2, i2) => {
  var r2 = i2(78423).f, a2 = i2(75509), s2 = i2(30254)("toStringTag");
  e2.exports = function(e3, t3, i3) {
    e3 && !a2(e3 = i3 ? e3 : e3.prototype, s2) && r2(e3, s2, { configurable: true, value: t3 });
  };
}, 4566: (e2, t2, i2) => {
  var r2 = i2(96308)("keys"), a2 = i2(19191);
  e2.exports = function(e3) {
    return r2[e3] || (r2[e3] = a2(e3));
  };
}, 96308: (e2, t2, i2) => {
  var r2 = i2(46438), a2 = i2(66670), s2 = "__core-js_shared__", n = a2[s2] || (a2[s2] = {});
  (e2.exports = function(e3, t3) {
    return n[e3] || (n[e3] = void 0 !== t3 ? t3 : {});
  })("versions", []).push({ version: r2.version, mode: i2(74742) ? "pure" : "global", copyright: "© 2020 Denis Pushkarev (zloirock.ru)" });
}, 85614: (e2, t2, i2) => {
  var r2 = i2(80812), a2 = i2(25219), s2 = i2(30254)("species");
  e2.exports = function(e3, t3) {
    var i3, n = r2(e3).constructor;
    return void 0 === n || null == (i3 = r2(n)[s2]) ? t3 : a2(i3);
  };
}, 43172: (e2, t2, i2) => {
  var r2 = i2(49383), a2 = i2(87608);
  e2.exports = function(e3) {
    return function(t3, i3) {
      var s2, n, o = String(a2(t3)), c = r2(i3), d2 = o.length;
      return c < 0 || c >= d2 ? e3 ? "" : void 0 : (s2 = o.charCodeAt(c)) < 55296 || s2 > 56319 || c + 1 === d2 || (n = o.charCodeAt(c + 1)) < 56320 || n > 57343 ? e3 ? o.charAt(c) : s2 : e3 ? o.slice(c, c + 2) : n - 56320 + (s2 - 55296 << 10) + 65536;
    };
  };
}, 24269: (e2, t2, i2) => {
  var r2 = i2(88535), a2 = i2(87608), s2 = i2(81984), n = i2(80459), o = "[" + n + "]", c = RegExp("^" + o + o + "*"), d2 = RegExp(o + o + "*$"), h = function(e3, t3, i3) {
    var a3 = {}, o2 = s2(function() {
      return !!n[e3]() || "​" != "​"[e3]();
    }), c2 = a3[e3] = o2 ? t3(l) : n[e3];
    i3 && (a3[i3] = c2), r2(r2.P + r2.F * o2, "String", a3);
  }, l = h.trim = function(e3, t3) {
    return e3 = String(a2(e3)), 1 & t3 && (e3 = e3.replace(c, "")), 2 & t3 && (e3 = e3.replace(d2, "")), e3;
  };
  e2.exports = h;
}, 80459: (e2) => {
  e2.exports = "	\n\v\f\r   ᠎             　\u2028\u2029\uFEFF";
}, 8036: (e2, t2, i2) => {
  var r2, a2, s2, n = i2(58852), o = i2(20709), c = i2(76260), d2 = i2(3802), h = i2(66670), l = h.process, u = h.setImmediate, f = h.clearImmediate, p = h.MessageChannel, m = h.Dispatch, g = 0, v = {}, A = "onreadystatechange", y = function() {
    var e3 = +this;
    if (v.hasOwnProperty(e3)) {
      var t3 = v[e3];
      delete v[e3], t3();
    }
  }, w = function(e3) {
    y.call(e3.data);
  };
  u && f || (u = function(e3) {
    for (var t3 = [], i3 = 1; arguments.length > i3; ) t3.push(arguments[i3++]);
    return v[++g] = function() {
      o("function" == typeof e3 ? e3 : Function(e3), t3);
    }, r2(g), g;
  }, f = function(e3) {
    delete v[e3];
  }, "process" == i2(93417)(l) ? r2 = function(e3) {
    l.nextTick(n(y, e3, 1));
  } : m && m.now ? r2 = function(e3) {
    m.now(n(y, e3, 1));
  } : p ? (s2 = (a2 = new p()).port2, a2.port1.onmessage = w, r2 = n(s2.postMessage, s2, 1)) : h.addEventListener && "function" == typeof postMessage && !h.importScripts ? (r2 = function(e3) {
    h.postMessage(e3 + "", "*");
  }, h.addEventListener("message", w, false)) : r2 = A in d2("script") ? function(e3) {
    c.appendChild(d2("script"))[A] = function() {
      c.removeChild(this), y.call(e3);
    };
  } : function(e3) {
    setTimeout(n(y, e3, 1), 0);
  }), e2.exports = { set: u, clear: f };
}, 72917: (e2, t2, i2) => {
  var r2 = i2(49383), a2 = Math.max, s2 = Math.min;
  e2.exports = function(e3, t3) {
    return (e3 = r2(e3)) < 0 ? a2(e3 + t3, 0) : s2(e3, t3);
  };
}, 49383: (e2) => {
  var t2 = Math.ceil, i2 = Math.floor;
  e2.exports = function(e3) {
    return isNaN(e3 = +e3) ? 0 : (e3 > 0 ? i2 : t2)(e3);
  };
}, 65133: (e2, t2, i2) => {
  var r2 = i2(7001), a2 = i2(87608);
  e2.exports = function(e3) {
    return r2(a2(e3));
  };
}, 70181: (e2, t2, i2) => {
  var r2 = i2(49383), a2 = Math.min;
  e2.exports = function(e3) {
    return e3 > 0 ? a2(r2(e3), 9007199254740991) : 0;
  };
}, 66310: (e2, t2, i2) => {
  var r2 = i2(87608);
  e2.exports = function(e3) {
    return Object(r2(e3));
  };
}, 10752: (e2, t2, i2) => {
  var r2 = i2(24401);
  e2.exports = function(e3, t3) {
    if (!r2(e3)) return e3;
    var i3, a2;
    if (t3 && "function" == typeof (i3 = e3.toString) && !r2(a2 = i3.call(e3))) return a2;
    if ("function" == typeof (i3 = e3.valueOf) && !r2(a2 = i3.call(e3))) return a2;
    if (!t3 && "function" == typeof (i3 = e3.toString) && !r2(a2 = i3.call(e3))) return a2;
    throw TypeError("Can't convert object to primitive value");
  };
}, 19191: (e2) => {
  var t2 = 0, i2 = Math.random();
  e2.exports = function(e3) {
    return "Symbol(".concat(void 0 === e3 ? "" : e3, ")_", (++t2 + i2).toString(36));
  };
}, 80218: (e2, t2, i2) => {
  var r2 = i2(66670).navigator;
  e2.exports = r2 && r2.userAgent || "";
}, 6096: (e2, t2, i2) => {
  var r2 = i2(24401);
  e2.exports = function(e3, t3) {
    if (!r2(e3) || e3._t !== t3) throw TypeError("Incompatible receiver, " + t3 + " required!");
    return e3;
  };
}, 67816: (e2, t2, i2) => {
  var r2 = i2(66670), a2 = i2(46438), s2 = i2(74742), n = i2(84336), o = i2(78423).f;
  e2.exports = function(e3) {
    var t3 = a2.Symbol || (a2.Symbol = s2 ? {} : r2.Symbol || {});
    "_" == e3.charAt(0) || e3 in t3 || o(t3, e3, { value: n.f(e3) });
  };
}, 84336: (e2, t2, i2) => {
  t2.f = i2(30254);
}, 30254: (e2, t2, i2) => {
  var r2 = i2(96308)("wks"), a2 = i2(19191), s2 = i2(66670).Symbol, n = "function" == typeof s2;
  (e2.exports = function(e3) {
    return r2[e3] || (r2[e3] = n && s2[e3] || (n ? s2 : a2)("Symbol." + e3));
  }).store = r2;
}, 55298: (e2, t2, i2) => {
  var r2 = i2(44968), a2 = i2(30254)("iterator"), s2 = i2(20210);
  e2.exports = i2(46438).getIteratorMethod = function(e3) {
    if (null != e3) return e3[a2] || e3["@@iterator"] || s2[r2(e3)];
  };
}, 25263: (e2, t2, i2) => {
  var r2 = i2(58852), a2 = i2(88535), s2 = i2(66310), n = i2(27904), o = i2(12828), c = i2(70181), d2 = i2(31891), h = i2(55298);
  a2(a2.S + a2.F * !i2(27899)(function(e3) {
    Array.from(e3);
  }), "Array", { from: function(e3) {
    var t3, i3, a3, l, u = s2(e3), f = "function" == typeof this ? this : Array, p = arguments.length, m = p > 1 ? arguments[1] : void 0, g = void 0 !== m, v = 0, A = h(u);
    if (g && (m = r2(m, p > 2 ? arguments[2] : void 0, 2)), null == A || f == Array && o(A)) for (i3 = new f(t3 = c(u.length)); t3 > v; v++) d2(i3, v, g ? m(u[v], v) : u[v]);
    else for (l = A.call(u), i3 = new f(); !(a3 = l.next()).done; v++) d2(i3, v, g ? n(l, m, [a3.value, v], true) : a3.value);
    return i3.length = v, i3;
  } });
}, 18355: (e2, t2, i2) => {
  var r2 = i2(88535);
  r2(r2.S, "Array", { isArray: i2(15461) });
}, 52293: (e2, t2, i2) => {
  var r2 = i2(12560), a2 = i2(20322), s2 = i2(20210), n = i2(65133);
  e2.exports = i2(88839)(Array, "Array", function(e3, t3) {
    this._t = n(e3), this._i = 0, this._k = t3;
  }, function() {
    var e3 = this._t, t3 = this._k, i3 = this._i++;
    return !e3 || i3 >= e3.length ? (this._t = void 0, a2(1)) : a2(0, "keys" == t3 ? i3 : "values" == t3 ? e3[i3] : [i3, e3[i3]]);
  }, "values"), s2.Arguments = s2.Array, r2("keys"), r2("values"), r2("entries");
}, 23204: (e2, t2, i2) => {
  var r2 = i2(88535);
  r2(r2.S, "Date", { now: function() {
    return (/* @__PURE__ */ new Date()).getTime();
  } });
}, 96050: (e2, t2, i2) => {
  var r2 = i2(95933), a2 = i2(6096), s2 = "Map";
  e2.exports = i2(99373)(s2, function(e3) {
    return function() {
      return e3(this, arguments.length > 0 ? arguments[0] : void 0);
    };
  }, { get: function(e3) {
    var t3 = r2.getEntry(a2(this, s2), e3);
    return t3 && t3.v;
  }, set: function(e3, t3) {
    return r2.def(a2(this, s2), 0 === e3 ? 0 : e3, t3);
  } }, r2, true);
}, 91045: (e2, t2, i2) => {
  var r2 = i2(88535), a2 = i2(66670).isFinite;
  r2(r2.S, "Number", { isFinite: function(e3) {
    return "number" == typeof e3 && a2(e3);
  } });
}, 21489: (e2, t2, i2) => {
  var r2 = i2(88535);
  r2(r2.S, "Number", { isNaN: function(e3) {
    return e3 != e3;
  } });
}, 74712: (e2, t2, i2) => {
  var r2 = i2(88535);
  r2(r2.S + r2.F * !i2(58219), "Object", { defineProperty: i2(78423).f });
}, 51780: (e2, t2, i2) => {
  var r2 = i2(24401), a2 = i2(75172).onFreeze;
  i2(47331)("freeze", function(e3) {
    return function(t3) {
      return e3 && r2(t3) ? e3(a2(t3)) : t3;
    };
  });
}, 18128: (e2, t2, i2) => {
  var r2 = i2(66310), a2 = i2(66123);
  i2(47331)("getPrototypeOf", function() {
    return function(e3) {
      return a2(r2(e3));
    };
  });
}, 96847: (e2, t2, i2) => {
  var r2 = i2(66310), a2 = i2(54311);
  i2(47331)("keys", function() {
    return function(e3) {
      return a2(r2(e3));
    };
  });
}, 4284: (e2, t2, i2) => {
  var r2 = i2(88535);
  r2(r2.S, "Object", { setPrototypeOf: i2(32074).set });
}, 78978: () => {
}, 95828: (e2, t2, i2) => {
  var r2 = i2(88535), a2 = i2(49709);
  r2(r2.G + r2.F * (parseFloat != a2), { parseFloat: a2 });
}, 65331: (e2, t2, i2) => {
  var r2 = i2(88535), a2 = i2(15722);
  r2(r2.G + r2.F * (parseInt != a2), { parseInt: a2 });
}, 91229: (e2, t2, i2) => {
  var r2, a2, s2, n, o = i2(74742), c = i2(66670), d2 = i2(58852), h = i2(44968), l = i2(88535), u = i2(24401), f = i2(25219), p = i2(2832), m = i2(95838), g = i2(85614), v = i2(8036).set, A = i2(53792)(), y = i2(11642), w = i2(41704), b = i2(80218), k = i2(61037), x = "Promise", I = c.TypeError, P = c.process, S = P && P.versions, T = S && S.v8 || "", M = c[x], B = "process" == h(P), R = function() {
  }, _ = a2 = y.f, C = !!(function() {
    try {
      var e3 = M.resolve(1), t3 = (e3.constructor = {})[i2(30254)("species")] = function(e4) {
        e4(R, R);
      };
      return (B || "function" == typeof PromiseRejectionEvent) && e3.then(R) instanceof t3 && 0 !== T.indexOf("6.6") && -1 === b.indexOf("Chrome/66");
    } catch (e4) {
    }
  })(), U = function(e3) {
    var t3;
    return !(!u(e3) || "function" != typeof (t3 = e3.then)) && t3;
  }, D = function(e3, t3) {
    if (!e3._n) {
      e3._n = true;
      var i3 = e3._c;
      A(function() {
        for (var r3 = e3._v, a3 = 1 == e3._s, s3 = 0, n2 = function(t4) {
          var i4, s4, n3, o2 = a3 ? t4.ok : t4.fail, c2 = t4.resolve, d3 = t4.reject, h2 = t4.domain;
          try {
            o2 ? (a3 || (2 == e3._h && z(e3), e3._h = 1), true === o2 ? i4 = r3 : (h2 && h2.enter(), i4 = o2(r3), h2 && (h2.exit(), n3 = true)), i4 === t4.promise ? d3(I("Promise-chain cycle")) : (s4 = U(i4)) ? s4.call(i4, c2, d3) : c2(i4)) : d3(r3);
          } catch (e4) {
            h2 && !n3 && h2.exit(), d3(e4);
          }
        }; i3.length > s3; ) n2(i3[s3++]);
        e3._c = [], e3._n = false, t3 && !e3._h && E(e3);
      });
    }
  }, E = function(e3) {
    v.call(c, function() {
      var t3, i3, r3, a3 = e3._v, s3 = L(e3);
      if (s3 && (t3 = w(function() {
        B ? P.emit("unhandledRejection", a3, e3) : (i3 = c.onunhandledrejection) ? i3({ promise: e3, reason: a3 }) : (r3 = c.console) && r3.error && r3.error("Unhandled promise rejection", a3);
      }), e3._h = B || L(e3) ? 2 : 1), e3._a = void 0, s3 && t3.e) throw t3.v;
    });
  }, L = function(e3) {
    return 1 !== e3._h && 0 === (e3._a || e3._c).length;
  }, z = function(e3) {
    v.call(c, function() {
      var t3;
      B ? P.emit("rejectionHandled", e3) : (t3 = c.onrejectionhandled) && t3({ promise: e3, reason: e3._v });
    });
  }, $ = function(e3) {
    var t3 = this;
    t3._d || (t3._d = true, (t3 = t3._w || t3)._v = e3, t3._s = 2, t3._a || (t3._a = t3._c.slice()), D(t3, true));
  }, F = function(e3) {
    var t3, i3 = this;
    if (!i3._d) {
      i3._d = true, i3 = i3._w || i3;
      try {
        if (i3 === e3) throw I("Promise can't be resolved itself");
        (t3 = U(e3)) ? A(function() {
          var r3 = { _w: i3, _d: false };
          try {
            t3.call(e3, d2(F, r3, 1), d2($, r3, 1));
          } catch (e4) {
            $.call(r3, e4);
          }
        }) : (i3._v = e3, i3._s = 1, D(i3, false));
      } catch (e4) {
        $.call({ _w: i3, _d: false }, e4);
      }
    }
  };
  C || (M = function(e3) {
    p(this, M, x, "_h"), f(e3), r2.call(this);
    try {
      e3(d2(F, this, 1), d2($, this, 1));
    } catch (e4) {
      $.call(this, e4);
    }
  }, (r2 = function(e3) {
    this._c = [], this._a = void 0, this._s = 0, this._d = false, this._v = void 0, this._h = 0, this._n = false;
  }).prototype = i2(30953)(M.prototype, { then: function(e3, t3) {
    var i3 = _(g(this, M));
    return i3.ok = "function" != typeof e3 || e3, i3.fail = "function" == typeof t3 && t3, i3.domain = B ? P.domain : void 0, this._c.push(i3), this._a && this._a.push(i3), this._s && D(this, false), i3.promise;
  }, catch: function(e3) {
    return this.then(void 0, e3);
  } }), s2 = function() {
    var e3 = new r2();
    this.promise = e3, this.resolve = d2(F, e3, 1), this.reject = d2($, e3, 1);
  }, y.f = _ = function(e3) {
    return e3 === M || e3 === n ? new s2(e3) : a2(e3);
  }), l(l.G + l.W + l.F * !C, { Promise: M }), i2(1356)(M, x), i2(45274)(x), n = i2(46438)[x], l(l.S + l.F * !C, x, { reject: function(e3) {
    var t3 = _(this);
    return (0, t3.reject)(e3), t3.promise;
  } }), l(l.S + l.F * (o || !C), x, { resolve: function(e3) {
    return k(o && this === n ? M : this, e3);
  } }), l(l.S + l.F * !(C && i2(27899)(function(e3) {
    M.all(e3).catch(R);
  })), x, { all: function(e3) {
    var t3 = this, i3 = _(t3), r3 = i3.resolve, a3 = i3.reject, s3 = w(function() {
      var i4 = [], s4 = 0, n2 = 1;
      m(e3, false, function(e4) {
        var o2 = s4++, c2 = false;
        i4.push(void 0), n2++, t3.resolve(e4).then(function(e5) {
          c2 || (c2 = true, i4[o2] = e5, --n2 || r3(i4));
        }, a3);
      }), --n2 || r3(i4);
    });
    return s3.e && a3(s3.v), i3.promise;
  }, race: function(e3) {
    var t3 = this, i3 = _(t3), r3 = i3.reject, a3 = w(function() {
      m(e3, false, function(e4) {
        t3.resolve(e4).then(i3.resolve, r3);
      });
    });
    return a3.e && r3(a3.v), i3.promise;
  } });
}, 21640: (e2, t2, i2) => {
  var r2 = i2(95933), a2 = i2(6096);
  e2.exports = i2(99373)("Set", function(e3) {
    return function() {
      return e3(this, arguments.length > 0 ? arguments[0] : void 0);
    };
  }, { add: function(e3) {
    return r2.def(a2(this, "Set"), e3 = 0 === e3 ? 0 : e3, e3);
  } }, r2);
}, 97863: (e2, t2, i2) => {
  var r2 = i2(43172)(true);
  i2(88839)(String, "String", function(e3) {
    this._t = String(e3), this._i = 0;
  }, function() {
    var e3, t3 = this._t, i3 = this._i;
    return i3 >= t3.length ? { value: void 0, done: true } : (e3 = r2(t3, i3), this._i += e3.length, { value: e3, done: false });
  });
}, 19626: (e2, t2, i2) => {
  var r2 = i2(66670), a2 = i2(75509), s2 = i2(58219), n = i2(88535), o = i2(61331), c = i2(75172).KEY, d2 = i2(81984), h = i2(96308), l = i2(1356), u = i2(19191), f = i2(30254), p = i2(84336), m = i2(67816), g = i2(36473), v = i2(15461), A = i2(80812), y = i2(24401), w = i2(66310), b = i2(65133), k = i2(10752), x = i2(86260), I = i2(22087), P = i2(36309), S = i2(81033), T = i2(59820), M = i2(78423), B = i2(54311), R = S.f, _ = M.f, C = P.f, U = r2.Symbol, D = r2.JSON, E = D && D.stringify, L = "prototype", z = f("_hidden"), $ = f("toPrimitive"), F = {}.propertyIsEnumerable, N = h("symbol-registry"), V = h("symbols"), O = h("op-symbols"), q = Object[L], W = "function" == typeof U && !!T.f, H = r2.QObject, G = !H || !H[L] || !H[L].findChild, j = s2 && d2(function() {
    return 7 != I(_({}, "a", { get: function() {
      return _(this, "a", { value: 7 }).a;
    } })).a;
  }) ? function(e3, t3, i3) {
    var r3 = R(q, t3);
    r3 && delete q[t3], _(e3, t3, i3), r3 && e3 !== q && _(q, t3, r3);
  } : _, Q = function(e3) {
    var t3 = V[e3] = I(U[L]);
    return t3._k = e3, t3;
  }, Y = W && "symbol" == typeof U.iterator ? function(e3) {
    return "symbol" == typeof e3;
  } : function(e3) {
    return e3 instanceof U;
  }, K = function(e3, t3, i3) {
    return e3 === q && K(O, t3, i3), A(e3), t3 = k(t3, true), A(i3), a2(V, t3) ? (i3.enumerable ? (a2(e3, z) && e3[z][t3] && (e3[z][t3] = false), i3 = I(i3, { enumerable: x(0, false) })) : (a2(e3, z) || _(e3, z, x(1, {})), e3[z][t3] = true), j(e3, t3, i3)) : _(e3, t3, i3);
  }, X = function(e3, t3) {
    A(e3);
    for (var i3, r3 = g(t3 = b(t3)), a3 = 0, s3 = r3.length; s3 > a3; ) K(e3, i3 = r3[a3++], t3[i3]);
    return e3;
  }, J = function(e3) {
    var t3 = F.call(this, e3 = k(e3, true));
    return !(this === q && a2(V, e3) && !a2(O, e3)) && (!(t3 || !a2(this, e3) || !a2(V, e3) || a2(this, z) && this[z][e3]) || t3);
  }, Z = function(e3, t3) {
    if (e3 = b(e3), t3 = k(t3, true), e3 !== q || !a2(V, t3) || a2(O, t3)) {
      var i3 = R(e3, t3);
      return !i3 || !a2(V, t3) || a2(e3, z) && e3[z][t3] || (i3.enumerable = true), i3;
    }
  }, ee = function(e3) {
    for (var t3, i3 = C(b(e3)), r3 = [], s3 = 0; i3.length > s3; ) a2(V, t3 = i3[s3++]) || t3 == z || t3 == c || r3.push(t3);
    return r3;
  }, te = function(e3) {
    for (var t3, i3 = e3 === q, r3 = C(i3 ? O : b(e3)), s3 = [], n2 = 0; r3.length > n2; ) !a2(V, t3 = r3[n2++]) || i3 && !a2(q, t3) || s3.push(V[t3]);
    return s3;
  };
  W || (o((U = function() {
    if (this instanceof U) throw TypeError("Symbol is not a constructor!");
    var e3 = u(arguments.length > 0 ? arguments[0] : void 0), t3 = function(i3) {
      this === q && t3.call(O, i3), a2(this, z) && a2(this[z], e3) && (this[z][e3] = false), j(this, e3, x(1, i3));
    };
    return s2 && G && j(q, e3, { configurable: true, set: t3 }), Q(e3);
  })[L], "toString", function() {
    return this._k;
  }), S.f = Z, M.f = K, i2(1743).f = P.f = ee, i2(36569).f = J, T.f = te, s2 && !i2(74742) && o(q, "propertyIsEnumerable", J, true), p.f = function(e3) {
    return Q(f(e3));
  }), n(n.G + n.W + n.F * !W, { Symbol: U });
  for (var ie = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), re = 0; ie.length > re; ) f(ie[re++]);
  for (var ae = B(f.store), se = 0; ae.length > se; ) m(ae[se++]);
  n(n.S + n.F * !W, "Symbol", { for: function(e3) {
    return a2(N, e3 += "") ? N[e3] : N[e3] = U(e3);
  }, keyFor: function(e3) {
    if (!Y(e3)) throw TypeError(e3 + " is not a symbol!");
    for (var t3 in N) if (N[t3] === e3) return t3;
  }, useSetter: function() {
    G = true;
  }, useSimple: function() {
    G = false;
  } }), n(n.S + n.F * !W, "Object", { create: function(e3, t3) {
    return void 0 === t3 ? I(e3) : X(I(e3), t3);
  }, defineProperty: K, defineProperties: X, getOwnPropertyDescriptor: Z, getOwnPropertyNames: ee, getOwnPropertySymbols: te });
  var ne = d2(function() {
    T.f(1);
  });
  n(n.S + n.F * ne, "Object", { getOwnPropertySymbols: function(e3) {
    return T.f(w(e3));
  } }), D && n(n.S + n.F * (!W || d2(function() {
    var e3 = U();
    return "[null]" != E([e3]) || "{}" != E({ a: e3 }) || "{}" != E(Object(e3));
  })), "JSON", { stringify: function(e3) {
    for (var t3, i3, r3 = [e3], a3 = 1; arguments.length > a3; ) r3.push(arguments[a3++]);
    if (i3 = t3 = r3[1], (y(t3) || void 0 !== e3) && !Y(e3)) return v(t3) || (t3 = function(e4, t4) {
      if ("function" == typeof i3 && (t4 = i3.call(this, e4, t4)), !Y(t4)) return t4;
    }), r3[1] = t3, E.apply(D, r3);
  } }), U[L][$] || i2(2677)(U[L], $, U[L].valueOf), l(U, "Symbol"), l(Math, "Math", true), l(r2.JSON, "JSON", true);
}, 62223: (e2, t2, i2) => {
  i2(643)("Map");
}, 74674: (e2, t2, i2) => {
  i2(44398)("Map");
}, 28337: (e2, t2, i2) => {
  var r2 = i2(88535);
  r2(r2.P + r2.R, "Map", { toJSON: i2(5874)("Map") });
}, 2639: (e2, t2, i2) => {
  var r2 = i2(88535), a2 = i2(46438), s2 = i2(66670), n = i2(85614), o = i2(61037);
  r2(r2.P + r2.R, "Promise", { finally: function(e3) {
    var t3 = n(this, a2.Promise || s2.Promise), i3 = "function" == typeof e3;
    return this.then(i3 ? function(i4) {
      return o(t3, e3()).then(function() {
        return i4;
      });
    } : e3, i3 ? function(i4) {
      return o(t3, e3()).then(function() {
        throw i4;
      });
    } : e3);
  } });
}, 46121: (e2, t2, i2) => {
  var r2 = i2(88535), a2 = i2(11642), s2 = i2(41704);
  r2(r2.S, "Promise", { try: function(e3) {
    var t3 = a2.f(this), i3 = s2(e3);
    return (i3.e ? t3.reject : t3.resolve)(i3.v), t3.promise;
  } });
}, 98345: (e2, t2, i2) => {
  i2(643)("Set");
}, 52584: (e2, t2, i2) => {
  i2(44398)("Set");
}, 871: (e2, t2, i2) => {
  var r2 = i2(88535);
  r2(r2.P + r2.R, "Set", { toJSON: i2(5874)("Set") });
}, 42860: (e2, t2, i2) => {
  i2(67816)("asyncIterator");
}, 60716: (e2, t2, i2) => {
  i2(67816)("observable");
}, 7914: (e2, t2, i2) => {
  i2(52293);
  for (var r2 = i2(66670), a2 = i2(2677), s2 = i2(20210), n = i2(30254)("toStringTag"), o = "CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","), c = 0; c < o.length; c++) {
    var d2 = o[c], h = r2[d2], l = h && h.prototype;
    l && !l[n] && a2(l, n, d2), s2[d2] = s2.Array;
  }
}, 66801: (e2, t2, i2) => {
  var r2 = i2(88535), a2 = i2(8036);
  r2(r2.G + r2.B, { setImmediate: a2.set, clearImmediate: a2.clear });
}, 84209: (e2, t2, i2) => {
  i2.d(t2, { A: () => r2 });
  const r2 = "precision highp float;\n\nattribute vec3 point;\nattribute vec4 color;\nvarying vec4 v_color;\n\nuniform mat4 rotateMatrix;\n\nvoid main(void){\n  gl_Position = rotateMatrix * vec4(point, 1.0);\n  v_color = color;\n}\n";
}, 23195: (e2, t2, i2) => {
  i2.d(t2, { A: () => r2 });
  const r2 = "\n@group(0) @binding(1) var eTexture: texture_external;\n@group(0) @binding(2) var s: sampler;\n\n@fragment\nfn main(@location(0) in_texcoord: vec4<f32>) -> @location(0) vec4<f32> {\n  return textureSampleBaseClampToEdge(eTexture, s, in_texcoord.xy);\n}";
}, 54895: (e2, t2, i2) => {
  i2.d(t2, { A: () => r2 });
  const r2 = "struct PositionColorInput {\n    @location(0) in_position_3d: vec3<f32>,\n    @location(1) in_color_rgba: vec4<f32>\n};\n\nstruct PositionColorOutput {\n    @builtin(position) coords_output: vec4<f32>,\n    @location(0) color_output: vec4<f32>\n};\n\nstruct RotateMatrix {\n    matrix: mat4x4<f32>\n};\n\n@group(0) @binding(0) var<uniform> rotateMatrix: RotateMatrix;\n\n@vertex\nfn main(input: PositionColorInput) -> PositionColorOutput {\n    var output: PositionColorOutput;\n    output.color_output = input.in_color_rgba;\n    output.coords_output = rotateMatrix.matrix * vec4<f32>(input.in_position_3d, 1.0);\n    return output;\n}";
}, 42096: (e2, t2, i2) => {
  e2.exports = i2(74385);
}, 68632: (e2, t2, i2) => {
  e2.exports = i2(37149);
}, 45249: (e2, t2, i2) => {
  e2.exports = i2(87172);
}, 73146: (e2, t2, i2) => {
  e2.exports = i2(85079);
}, 80662: (e2, t2, i2) => {
  e2.exports = i2(92861);
}, 94144: (e2, t2, i2) => {
  e2.exports = i2(36553);
}, 7210: (e2, t2, i2) => {
  e2.exports = i2(11837);
}, 66681: (e2, t2, i2) => {
  e2.exports = i2(92696);
}, 7403: (e2, t2, i2) => {
  e2.exports = i2(22948);
}, 75019: (e2, t2, i2) => {
  e2.exports = i2(62160);
}, 69736: (e2, t2, i2) => {
  e2.exports = i2(47567);
}, 11919: (e2, t2, i2) => {
  e2.exports = i2(21724);
}, 88032: (e2, t2, i2) => {
  e2.exports = i2(27279);
}, 29967: (e2, t2, i2) => {
  e2.exports = i2(25216);
}, 54001: (e2, t2, i2) => {
  e2.exports = i2(34750);
}, 64236: (e2, t2, i2) => {
  e2.exports = i2(31707);
}, 97860: (e2, t2, i2) => {
  e2.exports = i2(28795);
}, 75062: (e2, t2, i2) => {
  e2.exports = i2(16560);
}, 20149: (e2, t2, i2) => {
  e2.exports = i2(48652);
}, 134: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(92696), a2 = i2(87361);
  function s2(e3, t3, i3) {
    return (t3 = (0, a2.A)(t3)) in e3 ? r2(e3, t3, { value: i3, enumerable: true, configurable: true, writable: true }) : e3[t3] = i3, e3;
  }
}, 91908: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(23509), a2 = i2(39967);
  function s2(e3, t3) {
    if ("object" != (0, r2.A)(e3) || !e3) return e3;
    var i3 = e3[a2];
    if (void 0 !== i3) {
      var s3 = i3.call(e3, t3 || "default");
      if ("object" != (0, r2.A)(s3)) return s3;
      throw new TypeError("@@toPrimitive must return a primitive value.");
    }
    return ("string" === t3 ? String : Number)(e3);
  }
}, 87361: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(23509), a2 = i2(91908);
  function s2(e3) {
    var t3 = (0, a2.A)(e3, "string");
    return "symbol" == (0, r2.A)(t3) ? t3 : String(t3);
  }
}, 23509: (e2, t2, i2) => {
  i2.d(t2, { A: () => s2 });
  var r2 = i2(16560), a2 = i2(54220);
  function s2(e3) {
    return s2 = "function" == typeof r2 && "symbol" == typeof a2 ? function(e4) {
      return typeof e4;
    } : function(e4) {
      return e4 && "function" == typeof r2 && e4.constructor === r2 && e4 !== r2.prototype ? "symbol" : typeof e4;
    }, s2(e3);
  }
}, 65749: (e2, t2, i2) => {
  function r2(e3) {
    var t3 = e3.toLowerCase().trim().split(/\s*;\s*/);
    return "banner" === t3[0] ? { name: t3[0], delay: 1 * t3[1] || 0, leftToRight: 1 * t3[2] || 0, fadeAwayWidth: 1 * t3[3] || 0 } : /^scroll\s/.test(t3[0]) ? { name: t3[0], y1: Math.min(1 * t3[1], 1 * t3[2]), y2: Math.max(1 * t3[1], 1 * t3[2]), delay: 1 * t3[3] || 0, fadeAwayHeight: 1 * t3[4] || 0 } : "" !== e3 ? { name: e3 } : null;
  }
  function a2(e3) {
    return e3 ? e3.toLowerCase().replace(/([+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?)/g, " $1 ").replace(/([mnlbspc])/g, " $1 ").trim().replace(/\s+/g, " ").split(/\s(?=[mnlbspc])/).map(function(e4) {
      return e4.split(" ").filter(function(e5, t3) {
        return !(t3 && isNaN(1 * e5));
      });
    }) : [];
  }
  i2.d(t2, { wE: () => S });
  var s2 = ["b", "i", "u", "s", "fsp", "k", "K", "kf", "ko", "kt", "fe", "q", "p", "pbo", "a", "an", "fscx", "fscy", "fax", "fay", "frx", "fry", "frz", "fr", "be", "blur", "bord", "xbord", "ybord", "shad", "xshad", "yshad"].map(function(e3) {
    return { name: e3, regex: new RegExp("^" + e3 + "-?\\d") };
  });
  function n(e3) {
    for (var t3, i3 = {}, r3 = 0; r3 < s2.length; r3++) {
      var o2 = s2[r3], c2 = o2.name;
      if (o2.regex.test(e3)) return i3[c2] = 1 * e3.slice(c2.length), i3;
    }
    if (/^fn/.test(e3)) i3.fn = e3.slice(2);
    else if (/^r/.test(e3)) i3.r = e3.slice(1);
    else if (/^fs[\d+-]/.test(e3)) i3.fs = e3.slice(2);
    else if (/^\d?c&?H?[0-9a-fA-F]+|^\d?c$/.test(e3)) {
      var d3 = e3.match(/^(\d?)c&?H?(\w*)/), h2 = d3[1], l2 = d3[2];
      i3["c" + (h2 || 1)] = l2 && ("000000" + l2).slice(-6);
    } else if (/^\da&?H?[0-9a-fA-F]+/.test(e3)) {
      var u2 = e3.match(/^(\d)a&?H?([0-9a-f]+)/i), f2 = u2[1], p2 = u2[2];
      i3["a" + f2] = ("00" + p2).slice(-2);
    } else if (/^alpha&?H?[0-9a-fA-F]+/.test(e3)) t3 = e3.match(/^alpha&?H?([0-9a-f]+)/i), i3.alpha = t3[1], i3.alpha = ("00" + i3.alpha).slice(-2);
    else if (/^(?:pos|org|move|fad|fade)\([^)]+/.test(e3)) {
      var m2 = e3.match(/^(\w+)\((.*?)\)?$/), g2 = m2[1], v2 = m2[2];
      i3[g2] = v2.trim().split(/\s*,\s*/).map(Number);
    } else if (/^i?clip\([^)]+/.test(e3)) {
      var A2 = e3.match(/^i?clip\((.*?)\)?$/)[1].trim().split(/\s*,\s*/);
      i3.clip = { inverse: /iclip/.test(e3), scale: 1, drawing: null, dots: null }, 1 === A2.length && (i3.clip.drawing = a2(A2[0])), 2 === A2.length && (i3.clip.scale = 1 * A2[0], i3.clip.drawing = a2(A2[1])), 4 === A2.length && (i3.clip.dots = A2.map(Number));
    } else if (/^t\(/.test(e3)) {
      var y2 = e3.match(/^t\((.*?)\)?$/)[1].trim().replace(/\\.*/, function(e4) {
        return e4.replace(/,/g, "\n");
      }).split(/\s*,\s*/);
      if (!y2[0]) return i3;
      i3.t = { t1: 0, t2: 0, accel: 1, tags: y2[y2.length - 1].replace(/\n/g, ",").split("\\").slice(1).map(n) }, 2 === y2.length && (i3.t.accel = 1 * y2[0]), 3 === y2.length && (i3.t.t1 = 1 * y2[0], i3.t.t2 = 1 * y2[1]), 4 === y2.length && (i3.t.t1 = 1 * y2[0], i3.t.t2 = 1 * y2[1], i3.t.accel = 1 * y2[2]);
    }
    return i3;
  }
  function o(e3) {
    for (var t3 = [], i3 = 0, r3 = "", a3 = e3.split("\\").slice(1).concat("").join("\\"), s3 = 0; s3 < a3.length; s3++) {
      var o2 = a3[s3];
      "(" === o2 && i3++, ")" === o2 && i3--, i3 < 0 && (i3 = 0), i3 || "\\" !== o2 ? r3 += o2 : (r3 && t3.push(r3), r3 = "");
    }
    return t3.map(n);
  }
  function c(e3) {
    var t3 = e3.split(/{(.*?)}/), i3 = [];
    t3[0].length && i3.push({ tags: [], text: t3[0], drawing: [] });
    for (var r3 = 1; r3 < t3.length; r3 += 2) {
      var s3 = o(t3[r3]), n2 = s3.reduce(function(e4, t4) {
        return void 0 === t4.p ? e4 : !!t4.p;
      }, false);
      i3.push({ tags: s3, text: n2 ? "" : t3[r3 + 1], drawing: n2 ? a2(t3[r3 + 1]) : [] });
    }
    return { raw: e3, combined: i3.map(function(e4) {
      return e4.text;
    }).join(""), parsed: i3 };
  }
  function d2(e3, t3) {
    var i3 = e3.split(",");
    if (i3.length > t3.length) {
      var a3 = i3.slice(t3.length - 1).join();
      (i3 = i3.slice(0, t3.length - 1)).push(a3);
    }
    for (var s3, n2 = {}, o2 = 0; o2 < i3.length; o2++) {
      var d3 = t3[o2], h2 = i3[o2].trim();
      switch (d3) {
        case "Layer":
        case "MarginL":
        case "MarginR":
        case "MarginV":
          n2[d3] = 1 * h2;
          break;
        case "Start":
        case "End":
          n2[d3] = 3600 * (s3 = h2.split(":"))[0] + 60 * s3[1] + 1 * s3[2];
          break;
        case "Effect":
          n2[d3] = r2(h2);
          break;
        case "Text":
          n2[d3] = c(h2);
          break;
        default:
          n2[d3] = h2;
      }
    }
    return n2;
  }
  var h = ["Name", "Fontname", "Fontsize", "PrimaryColour", "SecondaryColour", "OutlineColour", "BackColour", "Bold", "Italic", "Underline", "StrikeOut", "ScaleX", "ScaleY", "Spacing", "Angle", "BorderStyle", "Outline", "Shadow", "Alignment", "MarginL", "MarginR", "MarginV", "Encoding"], l = ["Layer", "Start", "End", "Style", "Name", "MarginL", "MarginR", "MarginV", "Effect", "Text"];
  function u(e3) {
    var t3 = h.concat(l);
    return e3.match(/Format\s*:\s*(.*)/i)[1].split(/\s*,\s*/).map(function(e4) {
      return t3.find(function(t4) {
        return t4.toLowerCase() === e4.toLowerCase();
      }) || e4;
    });
  }
  function f(e3, t3) {
    var i3 = e3.match(/Style\s*:\s*(.*)/i)[1].split(/\s*,\s*/);
    return Object.assign.apply(Object, [{}].concat(t3.map(function(e4, t4) {
      var r3;
      return (r3 = {})[e4] = i3[t4], r3;
    })));
  }
  function p(e3) {
    var t3 = { type: null, prev: null, next: null, points: [] };
    /[mnlbs]/.test(e3[0]) && (t3.type = e3[0].toUpperCase().replace("N", "L").replace("B", "C"));
    for (var i3 = e3.length - !(1 & e3.length), r3 = 1; r3 < i3; r3 += 2) t3.points.push({ x: 1 * e3[r3], y: 1 * e3[r3 + 1] });
    return t3;
  }
  function m(e3) {
    return !(!e3.points.length || !e3.type || /C|S/.test(e3.type) && e3.points.length < 3);
  }
  function g(e3) {
    return e3.map(function(e4) {
      return e4.type + e4.points.map(function(e5) {
        return e5.x + "," + e5.y;
      }).join(",");
    }).join("");
  }
  function v(e3) {
    for (var t3, i3 = [], r3 = 0; r3 < e3.length; ) {
      var a3 = e3[r3], s3 = p(a3);
      if (m(s3)) {
        if ("S" === s3.type) {
          var n2 = (i3[r3 - 1] || { points: [{ x: 0, y: 0 }] }).points.slice(-1)[0], o2 = n2.x, c2 = n2.y;
          s3.points.unshift({ x: o2, y: c2 });
        }
        r3 && (s3.prev = i3[r3 - 1].type, i3[r3 - 1].next = s3.type), i3.push(s3), r3++;
      } else {
        if (r3 && "S" === i3[r3 - 1].type) {
          var d3 = { p: s3.points, c: i3[r3 - 1].points.slice(0, 3) };
          i3[r3 - 1].points = i3[r3 - 1].points.concat((d3[a3[0]] || []).map(function(e4) {
            return { x: e4.x, y: e4.y };
          }));
        }
        e3.splice(r3, 1);
      }
    }
    var h2 = (t3 = []).concat.apply(t3, i3.map(function(e4) {
      var t4 = e4.type, i4 = e4.points, r4 = e4.prev, a4 = e4.next;
      return "S" === t4 ? (function(e5, t5, i5) {
        var r5 = [], a5 = [0, 2 / 3, 1 / 3, 0], s4 = [0, 1 / 3, 2 / 3, 0], n3 = [0, 1 / 6, 2 / 3, 1 / 6], o3 = function(e6, t6) {
          return e6[0] * t6[0] + e6[1] * t6[1] + e6[2] * t6[2] + e6[3] * t6[3];
        }, c3 = [e5[e5.length - 1].x, e5[0].x, e5[1].x, e5[2].x], d4 = [e5[e5.length - 1].y, e5[0].y, e5[1].y, e5[2].y];
        r5.push({ type: "M" === t5 ? "M" : "L", points: [{ x: o3(n3, c3), y: o3(n3, d4) }] });
        for (var h3 = 3; h3 < e5.length; h3++) c3 = [e5[h3 - 3].x, e5[h3 - 2].x, e5[h3 - 1].x, e5[h3].x], d4 = [e5[h3 - 3].y, e5[h3 - 2].y, e5[h3 - 1].y, e5[h3].y], r5.push({ type: "C", points: [{ x: o3(a5, c3), y: o3(a5, d4) }, { x: o3(s4, c3), y: o3(s4, d4) }, { x: o3(n3, c3), y: o3(n3, d4) }] });
        if ("L" === i5 || "C" === i5) {
          var l2 = e5[e5.length - 1];
          r5.push({ type: "L", points: [{ x: l2.x, y: l2.y }] });
        }
        return r5;
      })(i4, r4, a4) : { type: t4, points: i4 };
    }));
    return Object.assign({ instructions: h2, d: g(h2) }, (function(e4) {
      var t4, i4 = 1 / 0, r4 = 1 / 0, a4 = -1 / 0, s4 = -1 / 0;
      return (t4 = []).concat.apply(t4, e4.map(function(e5) {
        return e5.points;
      })).forEach(function(e5) {
        var t5 = e5.x, n3 = e5.y;
        i4 = Math.min(i4, t5), r4 = Math.min(r4, n3), a4 = Math.max(a4, t5), s4 = Math.max(s4, n3);
      }), { minX: i4, minY: r4, width: a4 - i4, height: s4 - r4 };
    })(i3));
  }
  var A = ["fs", "fsp", "clip", "c1", "c2", "c3", "c4", "a1", "a2", "a3", "a4", "alpha", "fscx", "fscy", "fax", "fay", "frx", "fry", "frz", "fr", "be", "blur", "bord", "xbord", "ybord", "shad", "xshad", "yshad"];
  function y(e3, t3, i3) {
    var r3, a3, s3;
    void 0 === i3 && (i3 = {});
    var n2 = e3[t3];
    if (void 0 === n2) return null;
    if ("pos" === t3 || "org" === t3) return 2 === n2.length ? ((r3 = {})[t3] = { x: n2[0], y: n2[1] }, r3) : null;
    if ("move" === t3) {
      var o2 = n2[0], c2 = n2[1], d3 = n2[2], h2 = n2[3], l2 = n2[4];
      void 0 === l2 && (l2 = 0);
      var u2 = n2[5];
      return void 0 === u2 && (u2 = 0), 4 === n2.length || 6 === n2.length ? { move: { x1: o2, y1: c2, x2: d3, y2: h2, t1: l2, t2: u2 } } : null;
    }
    if ("fad" === t3 || "fade" === t3) return 2 === n2.length ? { fade: { type: "fad", t1: n2[0], t2: n2[1] } } : 7 === n2.length ? { fade: { type: "fade", a1: n2[0], a2: n2[1], a3: n2[2], t1: n2[3], t2: n2[4], t3: n2[5], t4: n2[6] } } : null;
    if ("clip" === t3) {
      var f2 = n2.inverse, p2 = n2.scale, m2 = n2.drawing, g2 = n2.dots;
      return m2 ? { clip: { inverse: f2, scale: p2, drawing: v(m2), dots: g2 } } : g2 ? { clip: { inverse: f2, scale: p2, drawing: m2, dots: { x1: g2[0], y1: g2[1], x2: g2[2], y2: g2[3] } } } : null;
    }
    if (/^[xy]?(bord|shad)$/.test(t3) && (n2 = Math.max(n2, 0)), "bord" === t3) return { xbord: n2, ybord: n2 };
    if ("shad" === t3) return { xshad: n2, yshad: n2 };
    if (/^c\d$/.test(t3)) return (a3 = {})[t3] = n2 || i3[t3], a3;
    if ("alpha" === t3) return { a1: n2, a2: n2, a3: n2, a4: n2 };
    if ("fr" === t3) return { frz: n2 };
    if ("fs" === t3) return { fs: /^\+|-/.test(n2) ? (1 * n2 > -10 ? 1 + n2 / 10 : 1) * i3.fs : 1 * n2 };
    if ("K" === t3) return { kf: n2 };
    if ("t" === t3) {
      var w2 = n2.t1, b2 = n2.accel, k2 = n2.tags, x2 = n2.t2 || 1e3 * (i3.end - i3.start), I2 = {};
      return k2.forEach(function(e4) {
        var t4 = Object.keys(e4)[0];
        ~A.indexOf(t4) && ("clip" !== t4 || e4[t4].dots) && Object.assign(I2, y(e4, t4, i3));
      }), { t: { t1: w2, t2: x2, accel: b2, tag: I2 } };
    }
    return (s3 = {})[t3] = n2, s3;
  }
  var w = [null, 1, 2, 3, null, 7, 8, 9, null, 4, 5, 6], b = ["r", "a", "an", "pos", "org", "move", "fade", "fad", "clip"];
  function k(e3) {
    for (var t3, i3, r3, a3, s3, n2, o2, c2 = e3.styles, d3 = e3.style, h2 = e3.parsed, l2 = e3.start, u2 = e3.end, f2 = { q: c2[d3].tag.q }, p2 = [], m2 = { style: d3, fragments: [] }, g2 = {}, A2 = 0; A2 < h2.length; A2++) {
      for (var k2 = h2[A2], x2 = k2.tags, I2 = k2.text, P2 = k2.drawing, S2 = void 0, T = 0; T < x2.length; T++) {
        var M = x2[T];
        S2 = void 0 === M.r ? S2 : M.r;
      }
      for (var B = { tag: void 0 === S2 ? (o2 = g2, JSON.parse(JSON.stringify(Object.assign({}, o2, { k: void 0, kf: void 0, ko: void 0, kt: void 0 })))) : {}, text: I2, drawing: P2.length ? v(P2) : null }, R = 0; R < x2.length; R++) {
        var _ = x2[R];
        t3 = t3 || w[_.a || 0] || _.an, f2 = y(_, "q") || f2, a3 || (i3 = i3 || y(_, "pos")), r3 = r3 || y(_, "org"), i3 || (a3 = a3 || y(_, "move")), s3 = s3 || y(_, "fade") || y(_, "fad"), n2 = y(_, "clip") || n2;
        var C = Object.keys(_)[0];
        if (C && !~b.indexOf(C)) {
          var U = c2[d3].tag, D = y(_, C, { start: l2, end: u2, c1: U.c1, c2: U.c2, c3: U.c3, c4: U.c4, fs: g2.fs || U.fs });
          "t" === C ? (B.tag.t = B.tag.t || [], B.tag.t.push(D.t)) : Object.assign(B.tag, D);
        }
      }
      if (g2 = B.tag, void 0 !== S2 && (p2.push(m2), m2 = { style: c2[S2] ? S2 : d3, fragments: [] }), B.text || B.drawing) {
        var E = m2.fragments[m2.fragments.length - 1] || {};
        E.text && B.text && !Object.keys(B.tag).length ? E.text += B.text : m2.fragments.push(B);
      }
    }
    return p2.push(m2), Object.assign({ alignment: t3, slices: p2 }, f2, i3, r3, a3, s3, n2);
  }
  function x(e3) {
    for (var t3 = e3.styles, i3 = e3.dialogues, r3 = 1 / 0, a3 = [], s3 = 0; s3 < i3.length; s3++) {
      var n2 = i3[s3];
      if (!(n2.Start >= n2.End)) {
        t3[n2.Style] || (n2.Style = "Default");
        var o2 = t3[n2.Style].style, c2 = k({ styles: t3, style: n2.Style, parsed: n2.Text.parsed, start: n2.Start, end: n2.End }), d3 = c2.alignment || o2.Alignment;
        r3 = Math.min(r3, n2.Layer), a3.push(Object.assign({ layer: n2.Layer, start: n2.Start, end: n2.End, style: n2.Style, name: n2.Name, margin: { left: n2.MarginL || o2.MarginL, right: n2.MarginR || o2.MarginR, vertical: n2.MarginV || o2.MarginV }, effect: n2.Effect }, c2, { alignment: d3 }));
      }
    }
    for (var h2 = 0; h2 < a3.length; h2++) a3[h2].layer -= r3;
    return a3.sort(function(e4, t4) {
      return e4.start - t4.start || e4.end - t4.end;
    });
  }
  var I = { Name: "Default", Fontname: "Arial", Fontsize: "20", PrimaryColour: "&H00FFFFFF&", SecondaryColour: "&H000000FF&", OutlineColour: "&H00000000&", BackColour: "&H00000000&", Bold: "0", Italic: "0", Underline: "0", StrikeOut: "0", ScaleX: "100", ScaleY: "100", Spacing: "0", Angle: "0", BorderStyle: "1", Outline: "2", Shadow: "2", Alignment: "2", MarginL: "10", MarginR: "10", MarginV: "10", Encoding: "1" };
  function P(e3) {
    if (/^(&|H|&H)[0-9a-f]{6,}/i.test(e3)) {
      var t3 = e3.match(/&?H?([0-9a-f]{2})?([0-9a-f]{6})/i);
      return [t3[1] || "00", t3[2]];
    }
    var i3 = parseInt(e3, 10);
    if (!isNaN(i3)) {
      var r3 = -2147483648;
      if (i3 < r3) return ["00", "000000"];
      var a3 = r3 <= i3 && i3 <= 2147483647 ? ("00000000" + (i3 < 0 ? i3 + 4294967296 : i3).toString(16)).slice(-8) : String(i3).slice(0, 8);
      return [a3.slice(0, 2), a3.slice(2)];
    }
    return ["00", "000000"];
  }
  function S(e3, t3) {
    void 0 === t3 && (t3 = {});
    var i3 = (function(e4) {
      for (var t4 = { info: {}, styles: { format: [], style: [] }, events: { format: [], comment: [], dialogue: [] } }, i4 = e4.split(/\r?\n/), r4 = 0, a4 = 0; a4 < i4.length; a4++) {
        var s3 = i4[a4].trim();
        if (!/^;/.test(s3) && (/^\[Script Info\]/i.test(s3) ? r4 = 1 : /^\[V4\+? Styles\]/i.test(s3) ? r4 = 2 : /^\[Events\]/i.test(s3) ? r4 = 3 : /^\[.*\]/.test(s3) && (r4 = 0), 0 !== r4)) {
          if (1 === r4 && /:/.test(s3)) {
            var n2 = s3.match(/(.*?)\s*:\s*(.*)/), o2 = n2[1], c2 = n2[2];
            t4.info[o2] = c2;
          }
          if (2 === r4 && (/^Format\s*:/i.test(s3) && (t4.styles.format = u(s3)), /^Style\s*:/i.test(s3) && t4.styles.style.push(f(s3, t4.styles.format))), 3 === r4 && (/^Format\s*:/i.test(s3) && (t4.events.format = u(s3)), /^(?:Comment|Dialogue)\s*:/i.test(s3))) {
            var h2 = s3.match(/^(\w+?)\s*:\s*(.*)/i), l2 = h2[1], p2 = h2[2];
            t4.events[l2.toLowerCase()].push(d2(p2, t4.events.format));
          }
        }
      }
      return t4;
    })(e3), r3 = Object.assign(t3.defaultInfo || {}, i3.info), a3 = (function(e4) {
      for (var t4 = e4.info, i4 = e4.style, r4 = e4.defaultStyle, a4 = {}, s3 = [Object.assign({}, r4, { Name: "Default" })].concat(i4), n2 = function(e5) {
        var i5 = Object.assign({}, I, s3[e5]);
        /^(\*+)Default$/.test(i5.Name) && (i5.Name = "Default"), Object.keys(i5).forEach(function(e6) {
          "Name" === e6 || "Fontname" === e6 || /Colour/.test(e6) || (i5[e6] *= 1);
        });
        var r5 = P(i5.PrimaryColour), n3 = r5[0], o3 = r5[1], c2 = P(i5.SecondaryColour), d3 = c2[0], h2 = c2[1], l2 = P(i5.OutlineColour), u2 = l2[0], f2 = l2[1], p2 = P(i5.BackColour), m2 = p2[0], g2 = p2[1], v2 = { fn: i5.Fontname, fs: i5.Fontsize, c1: o3, a1: n3, c2: h2, a2: d3, c3: f2, a3: u2, c4: g2, a4: m2, b: Math.abs(i5.Bold), i: Math.abs(i5.Italic), u: Math.abs(i5.Underline), s: Math.abs(i5.StrikeOut), fscx: i5.ScaleX, fscy: i5.ScaleY, fsp: i5.Spacing, frz: i5.Angle, xbord: i5.Outline, ybord: i5.Outline, xshad: i5.Shadow, yshad: i5.Shadow, fe: i5.Encoding, q: /^[0-3]$/.test(t4.WrapStyle) ? 1 * t4.WrapStyle : 2 };
        a4[i5.Name] = { style: i5, tag: v2 };
      }, o2 = 0; o2 < s3.length; o2++) n2(o2);
      return a4;
    })({ info: r3, style: i3.styles.style, defaultStyle: t3.defaultStyle || {} });
    return { info: r3, width: 1 * r3.PlayResX || null, height: 1 * r3.PlayResY || null, wrapStyle: /^[0-3]$/.test(r3.WrapStyle) ? 1 * r3.WrapStyle : 2, collisions: r3.Collisions || "Normal", styles: a3, dialogues: x({ styles: a3, dialogues: i3.events.dialogue }) };
  }
}, 49963: (e2, t2, i2) => {
  i2.d(t2, { b: () => a2 });
  var r2 = i2(32517);
  function a2({ styles: e3, dialogues: t3 }) {
    let i3 = 1 / 0;
    const a3 = [];
    for (let s2 = 0; s2 < t3.length; s2++) {
      const n = t3[s2];
      if (n.Start >= n.End) continue;
      e3[n.Style] || (n.Style = "Default");
      const o = e3[n.Style].style, c = (0, r2.t)({ styles: e3, style: n.Style, parsed: n.Text.parsed, start: n.Start, end: n.End }), d2 = c.alignment || o.Alignment;
      i3 = Math.min(i3, n.Layer), a3.push(Object.assign({ layer: n.Layer, start: n.Start, end: n.End, style: n.Style, name: n.Name, margin: { left: n.MarginL || o.MarginL, right: n.MarginR || o.MarginR, vertical: n.MarginV || o.MarginV }, effect: n.Effect }, c, { alignment: d2 }));
    }
    for (let e4 = 0; e4 < a3.length; e4++) a3[e4].layer -= i3;
    return a3.sort((e4, t4) => e4.start - t4.start || e4.end - t4.end);
  }
}, 98786: (e2, t2, i2) => {
  function r2(e3) {
    const t3 = { type: null, prev: null, next: null, points: [] };
    /[mnlbs]/.test(e3[0]) && (t3.type = e3[0].toUpperCase().replace("N", "L").replace("B", "C"));
    for (let i3 = e3.length - !(1 & e3.length), r3 = 1; r3 < i3; r3 += 2) t3.points.push({ x: 1 * e3[r3], y: 1 * e3[r3 + 1] });
    return t3;
  }
  function a2(e3) {
    return !(!e3.points.length || !e3.type || /C|S/.test(e3.type) && e3.points.length < 3);
  }
  function s2(e3) {
    return e3.map(({ type: e4, points: t3 }) => e4 + t3.map(({ x: e5, y: t4 }) => "".concat(e5, ",").concat(t4)).join(",")).join("");
  }
  function n(e3) {
    const t3 = [];
    let i3 = 0;
    for (; i3 < e3.length; ) {
      const s3 = e3[i3], n3 = r2(s3);
      if (a2(n3)) {
        if ("S" === n3.type) {
          const { x: e4, y: r3 } = (t3[i3 - 1] || { points: [{ x: 0, y: 0 }] }).points.slice(-1)[0];
          n3.points.unshift({ x: e4, y: r3 });
        }
        i3 && (n3.prev = t3[i3 - 1].type, t3[i3 - 1].next = n3.type), t3.push(n3), i3++;
      } else {
        if (i3 && "S" === t3[i3 - 1].type) {
          const e4 = { p: n3.points, c: t3[i3 - 1].points.slice(0, 3) };
          t3[i3 - 1].points = t3[i3 - 1].points.concat((e4[s3[0]] || []).map(({ x: e5, y: t4 }) => ({ x: e5, y: t4 })));
        }
        e3.splice(i3, 1);
      }
    }
    const n2 = [].concat(...t3.map(({ type: e4, points: t4, prev: i4, next: r3 }) => "S" === e4 ? (function(e5, t5, i5) {
      const r4 = [], a3 = [0, 2 / 3, 1 / 3, 0], s3 = [0, 1 / 3, 2 / 3, 0], n3 = [0, 1 / 6, 2 / 3, 1 / 6], o = (e6, t6) => e6[0] * t6[0] + e6[1] * t6[1] + e6[2] * t6[2] + e6[3] * t6[3];
      let c = [e5[e5.length - 1].x, e5[0].x, e5[1].x, e5[2].x], d2 = [e5[e5.length - 1].y, e5[0].y, e5[1].y, e5[2].y];
      r4.push({ type: "M" === t5 ? "M" : "L", points: [{ x: o(n3, c), y: o(n3, d2) }] });
      for (let t6 = 3; t6 < e5.length; t6++) c = [e5[t6 - 3].x, e5[t6 - 2].x, e5[t6 - 1].x, e5[t6].x], d2 = [e5[t6 - 3].y, e5[t6 - 2].y, e5[t6 - 1].y, e5[t6].y], r4.push({ type: "C", points: [{ x: o(a3, c), y: o(a3, d2) }, { x: o(s3, c), y: o(s3, d2) }, { x: o(n3, c), y: o(n3, d2) }] });
      if ("L" === i5 || "C" === i5) {
        const t6 = e5[e5.length - 1];
        r4.push({ type: "L", points: [{ x: t6.x, y: t6.y }] });
      }
      return r4;
    })(t4, i4, r3) : { type: e4, points: t4 }));
    return Object.assign({ instructions: n2, d: s2(n2) }, (function(e4) {
      let t4 = 1 / 0, i4 = 1 / 0, r3 = -1 / 0, a3 = -1 / 0;
      return [].concat(...e4.map(({ points: e5 }) => e5)).forEach(({ x: e5, y: s3 }) => {
        t4 = Math.min(t4, e5), i4 = Math.min(i4, s3), r3 = Math.max(r3, e5), a3 = Math.max(a3, s3);
      }), { minX: t4, minY: i4, width: r3 - t4, height: a3 - i4 };
    })(t3));
  }
  i2.d(t2, { EB: () => n });
}, 78040: (e2, t2, i2) => {
  i2.d(t2, { W: () => s2 });
  const r2 = { Name: "Default", Fontname: "Arial", Fontsize: "20", PrimaryColour: "&H00FFFFFF&", SecondaryColour: "&H000000FF&", OutlineColour: "&H00000000&", BackColour: "&H00000000&", Bold: "0", Italic: "0", Underline: "0", StrikeOut: "0", ScaleX: "100", ScaleY: "100", Spacing: "0", Angle: "0", BorderStyle: "1", Outline: "2", Shadow: "2", Alignment: "2", MarginL: "10", MarginR: "10", MarginV: "10", Encoding: "1" };
  function a2(e3) {
    if (/^(&|H|&H)[0-9a-f]{6,}/i.test(e3)) {
      const [, t4, i3] = e3.match(/&?H?([0-9a-f]{2})?([0-9a-f]{6})/i);
      return [t4 || "00", i3];
    }
    const t3 = parseInt(e3, 10);
    if (!Number.isNaN(t3)) {
      const e4 = -2147483648;
      if (t3 < e4) return ["00", "000000"];
      const i3 = e4 <= t3 && t3 <= 2147483647 ? "00000000".concat((t3 < 0 ? t3 + 4294967296 : t3).toString(16)).slice(-8) : String(t3).slice(0, 8);
      return [i3.slice(0, 2), i3.slice(2)];
    }
    return ["00", "000000"];
  }
  function s2({ info: e3, style: t3, defaultStyle: i3 }) {
    const s3 = {}, n = [Object.assign({}, i3, { Name: "Default" })].concat(t3);
    for (let t4 = 0; t4 < n.length; t4++) {
      const i4 = Object.assign({}, r2, n[t4]);
      /^(\*+)Default$/.test(i4.Name) && (i4.Name = "Default"), Object.keys(i4).forEach((e4) => {
        "Name" === e4 || "Fontname" === e4 || /Colour/.test(e4) || (i4[e4] *= 1);
      });
      const [o, c] = a2(i4.PrimaryColour), [d2, h] = a2(i4.SecondaryColour), [l, u] = a2(i4.OutlineColour), [f, p] = a2(i4.BackColour), m = { fn: i4.Fontname, fs: i4.Fontsize, c1: c, a1: o, c2: h, a2: d2, c3: u, a3: l, c4: p, a4: f, b: Math.abs(i4.Bold), i: Math.abs(i4.Italic), u: Math.abs(i4.Underline), s: Math.abs(i4.StrikeOut), fscx: i4.ScaleX, fscy: i4.ScaleY, fsp: i4.Spacing, frz: i4.Angle, xbord: i4.Outline, ybord: i4.Outline, xshad: i4.Shadow, yshad: i4.Shadow, fe: i4.Encoding, q: /^[0-3]$/.test(e3.WrapStyle) ? 1 * e3.WrapStyle : 2 };
      s3[i4.Name] = { style: i4, tag: m };
    }
    return s3;
  }
}, 64484: (e2, t2, i2) => {
  i2.d(t2, { k: () => s2 });
  var r2 = i2(98786);
  const a2 = ["fs", "fsp", "clip", "c1", "c2", "c3", "c4", "a1", "a2", "a3", "a4", "alpha", "fscx", "fscy", "fax", "fay", "frx", "fry", "frz", "fr", "be", "blur", "bord", "xbord", "ybord", "shad", "xshad", "yshad"];
  function s2(e3, t3, i3 = {}) {
    let n = e3[t3];
    if (void 0 === n) return null;
    if ("pos" === t3 || "org" === t3) return 2 === n.length ? { [t3]: { x: n[0], y: n[1] } } : null;
    if ("move" === t3) {
      const [e4, t4, i4, r3, a3 = 0, s3 = 0] = n;
      return 4 === n.length || 6 === n.length ? { move: { x1: e4, y1: t4, x2: i4, y2: r3, t1: a3, t2: s3 } } : null;
    }
    if ("fad" === t3 || "fade" === t3) {
      if (2 === n.length) {
        const [e4, t4] = n;
        return { fade: { type: "fad", t1: e4, t2: t4 } };
      }
      if (7 === n.length) {
        const [e4, t4, i4, r3, a3, s3, o] = n;
        return { fade: { type: "fade", a1: e4, a2: t4, a3: i4, t1: r3, t2: a3, t3: s3, t4: o } };
      }
      return null;
    }
    if ("clip" === t3) {
      const { inverse: e4, scale: t4, drawing: i4, dots: a3 } = n;
      if (i4) return { clip: { inverse: e4, scale: t4, drawing: (0, r2.EB)(i4), dots: a3 } };
      if (a3) {
        const [r3, s3, n2, o] = a3;
        return { clip: { inverse: e4, scale: t4, drawing: i4, dots: { x1: r3, y1: s3, x2: n2, y2: o } } };
      }
      return null;
    }
    if (/^[xy]?(bord|shad)$/.test(t3) && (n = Math.max(n, 0)), "bord" === t3) return { xbord: n, ybord: n };
    if ("shad" === t3) return { xshad: n, yshad: n };
    if (/^c\d$/.test(t3)) return { [t3]: n || i3[t3] };
    if ("alpha" === t3) return { a1: n, a2: n, a3: n, a4: n };
    if ("fr" === t3) return { frz: n };
    if ("fs" === t3) return { fs: /^\+|-/.test(n) ? (1 * n > -10 ? 1 + n / 10 : 1) * i3.fs : 1 * n };
    if ("K" === t3) return { kf: n };
    if ("t" === t3) {
      const { t1: e4, accel: t4, tags: r3 } = n, o = n.t2 || 1e3 * (i3.end - i3.start), c = {};
      return r3.forEach((e5) => {
        const t5 = Object.keys(e5)[0];
        ~a2.indexOf(t5) && ("clip" !== t5 || e5[t5].dots) && Object.assign(c, s2(e5, t5, i3));
      }), { t: { t1: e4, t2: o, accel: t4, tag: c } };
    }
    return { [t3]: n };
  }
}, 32517: (e2, t2, i2) => {
  i2.d(t2, { t: () => o });
  var r2 = i2(98786), a2 = i2(64484);
  const s2 = [null, 1, 2, 3, null, 7, 8, 9, null, 4, 5, 6], n = ["r", "a", "an", "pos", "org", "move", "fade", "fad", "clip"];
  function o({ styles: e3, style: t3, parsed: i3, start: o2, end: c }) {
    let d2, h, l, u, f, p, m = { q: e3[t3].tag.q };
    const g = [];
    let v = { style: t3, fragments: [] }, A = {};
    for (let w = 0; w < i3.length; w++) {
      const { tags: b, text: k, drawing: x } = i3[w];
      let I;
      for (let e4 = 0; e4 < b.length; e4++) {
        const t4 = b[e4];
        I = void 0 === t4.r ? I : t4.r;
      }
      const P = { tag: void 0 === I ? (y = A, JSON.parse(JSON.stringify(Object.assign({}, y, { k: void 0, kf: void 0, ko: void 0, kt: void 0 })))) : {}, text: k, drawing: x.length ? (0, r2.EB)(x) : null };
      for (let i4 = 0; i4 < b.length; i4++) {
        const r3 = b[i4];
        d2 = d2 || s2[r3.a || 0] || r3.an, m = (0, a2.k)(r3, "q") || m, u || (h = h || (0, a2.k)(r3, "pos")), l = l || (0, a2.k)(r3, "org"), h || (u = u || (0, a2.k)(r3, "move")), f = f || (0, a2.k)(r3, "fade") || (0, a2.k)(r3, "fad"), p = (0, a2.k)(r3, "clip") || p;
        const g2 = Object.keys(r3)[0];
        if (g2 && !~n.indexOf(g2)) {
          const i5 = e3[t3].tag, { c1: s3, c2: n2, c3: d3, c4: h2 } = i5, l2 = A.fs || i5.fs, u2 = (0, a2.k)(r3, g2, { start: o2, end: c, c1: s3, c2: n2, c3: d3, c4: h2, fs: l2 });
          "t" === g2 ? (P.tag.t = P.tag.t || [], P.tag.t.push(u2.t)) : Object.assign(P.tag, u2);
        }
      }
      if (A = P.tag, void 0 !== I && (g.push(v), v = { style: e3[I] ? I : t3, fragments: [] }), P.text || P.drawing) {
        const e4 = v.fragments[v.fragments.length - 1] || {};
        e4.text && P.text && !Object.keys(P.tag).length ? e4.text += P.text : v.fragments.push(P);
      }
    }
    var y;
    return g.push(v), Object.assign({ alignment: d2, slices: g }, m, h, l, u, f, p);
  }
}, 74672: (e2, t2, i2) => {
  function r2(e3) {
    return e3 ? e3.toLowerCase().replace(/([+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?)/g, " $1 ").replace(/([mnlbspc])/g, " $1 ").trim().replace(/\s+/g, " ").split(/\s(?=[mnlbspc])/).map((e4) => e4.split(" ").filter((e5, t3) => !(t3 && Number.isNaN(1 * e5)))) : [];
  }
  i2.d(t2, { O: () => r2 });
}, 44453: (e2, t2, i2) => {
  function r2(e3) {
    const t3 = e3.toLowerCase().trim().split(/\s*;\s*/);
    return "banner" === t3[0] ? { name: t3[0], delay: 1 * t3[1] || 0, leftToRight: 1 * t3[2] || 0, fadeAwayWidth: 1 * t3[3] || 0 } : /^scroll\s/.test(t3[0]) ? { name: t3[0], y1: Math.min(1 * t3[1], 1 * t3[2]), y2: Math.max(1 * t3[1], 1 * t3[2]), delay: 1 * t3[3] || 0, fadeAwayHeight: 1 * t3[4] || 0 } : "" !== e3 ? { name: e3 } : null;
  }
  i2.d(t2, { d: () => r2 });
}, 53534: (e2, t2, i2) => {
  i2.d(t2, { E: () => s2 });
  var r2 = i2(74672);
  const a2 = ["b", "i", "u", "s", "fsp", "k", "K", "kf", "ko", "kt", "fe", "q", "p", "pbo", "a", "an", "fscx", "fscy", "fax", "fay", "frx", "fry", "frz", "fr", "be", "blur", "bord", "xbord", "ybord", "shad", "xshad", "yshad"].map((e3) => ({ name: e3, regex: new RegExp("^".concat(e3, "-?\\d")) }));
  function s2(e3) {
    const t3 = {};
    for (let i3 = 0; i3 < a2.length; i3++) {
      const { name: r3, regex: s3 } = a2[i3];
      if (s3.test(e3)) return t3[r3] = 1 * e3.slice(r3.length), t3;
    }
    if (/^fn/.test(e3)) t3.fn = e3.slice(2);
    else if (/^r/.test(e3)) t3.r = e3.slice(1);
    else if (/^fs[\d+-]/.test(e3)) t3.fs = e3.slice(2);
    else if (/^\d?c&?H?[0-9a-fA-F]+|^\d?c$/.test(e3)) {
      const [, i3, r3] = e3.match(/^(\d?)c&?H?(\w*)/);
      t3["c".concat(i3 || 1)] = r3 && "000000".concat(r3).slice(-6);
    } else if (/^\da&?H?[0-9a-fA-F]+/.test(e3)) {
      const [, i3, r3] = e3.match(/^(\d)a&?H?([0-9a-f]+)/i);
      t3["a".concat(i3)] = "00".concat(r3).slice(-2);
    } else if (/^alpha&?H?[0-9a-fA-F]+/.test(e3)) [, t3.alpha] = e3.match(/^alpha&?H?([0-9a-f]+)/i), t3.alpha = "00".concat(t3.alpha).slice(-2);
    else if (/^(?:pos|org|move|fad|fade)\([^)]+/.test(e3)) {
      const [, i3, r3] = e3.match(/^(\w+)\((.*?)\)?$/);
      t3[i3] = r3.trim().split(/\s*,\s*/).map(Number);
    } else if (/^i?clip\([^)]+/.test(e3)) {
      const i3 = e3.match(/^i?clip\((.*?)\)?$/)[1].trim().split(/\s*,\s*/);
      t3.clip = { inverse: /iclip/.test(e3), scale: 1, drawing: null, dots: null }, 1 === i3.length && (t3.clip.drawing = (0, r2.O)(i3[0])), 2 === i3.length && (t3.clip.scale = 1 * i3[0], t3.clip.drawing = (0, r2.O)(i3[1])), 4 === i3.length && (t3.clip.dots = i3.map(Number));
    } else if (/^t\(/.test(e3)) {
      const i3 = e3.match(/^t\((.*?)\)?$/)[1].trim().replace(/\\.*/, (e4) => e4.replace(/,/g, "\n")).split(/\s*,\s*/);
      if (!i3[0]) return t3;
      t3.t = { t1: 0, t2: 0, accel: 1, tags: i3[i3.length - 1].replace(/\n/g, ",").split("\\").slice(1).map(s2) }, 2 === i3.length && (t3.t.accel = 1 * i3[0]), 3 === i3.length && (t3.t.t1 = 1 * i3[0], t3.t.t2 = 1 * i3[1]), 4 === i3.length && (t3.t.t1 = 1 * i3[0], t3.t.t2 = 1 * i3[1], t3.t.accel = 1 * i3[2]);
    }
    return t3;
  }
}, 27637: (e2, t2, i2) => {
  i2.d(t2, { r: () => a2 });
  var r2 = i2(53534);
  function a2(e3) {
    const t3 = [];
    let i3 = 0, a3 = "";
    const s2 = e3.split("\\").slice(1).concat("").join("\\");
    for (let e4 = 0; e4 < s2.length; e4++) {
      const r3 = s2[e4];
      "(" === r3 && i3++, ")" === r3 && i3--, i3 < 0 && (i3 = 0), i3 || "\\" !== r3 ? a3 += r3 : (a3 && t3.push(a3), a3 = "");
    }
    return t3.map(r2.E);
  }
}, 93935: (e2, t2, i2) => {
  i2.d(t2, { r: () => s2 });
  var r2 = i2(74672), a2 = i2(27637);
  function s2(e3) {
    const t3 = e3.split(/{(.*?)}/), i3 = [];
    t3[0].length && i3.push({ tags: [], text: t3[0], drawing: [] });
    for (let e4 = 1; e4 < t3.length; e4 += 2) {
      const s3 = (0, a2.r)(t3[e4]), n = s3.reduce((e5, t4) => void 0 === t4.p ? e5 : !!t4.p, false);
      i3.push({ tags: s3, text: n ? "" : t3[e4 + 1], drawing: n ? (0, r2.O)(t3[e4 + 1]) : [] });
    }
    return { raw: e3, combined: i3.map((e4) => e4.text).join(""), parsed: i3 };
  }
}, 21194: (e2, t2, i2) => {
  i2.d(t2, { By: () => n, IU: () => s2 });
  var r2 = i2(47924), a2 = i2(77334);
  function s2(e3) {
    const { box: t3 } = e3;
    for (; t3.lastChild; ) t3.lastChild.remove();
    e3.actives = [], e3.space = [];
  }
  function n(e3, t3) {
    const { video: i3, box: n2, layoutRes: o } = t3;
    return function() {
      const c = i3.clientWidth, d2 = i3.clientHeight, h = o.width || i3.videoWidth || c, l = o.height || i3.videoHeight || d2, u = t3.scriptRes.width, f = t3.scriptRes.height;
      let p = u, m = f;
      const g = Math.min(c / h, d2 / l);
      "video_width" === e3.resampling && (m = u / h * l), "video_height" === e3.resampling && (p = f / l * h), t3.scale = Math.min(c / p, d2 / m), "script_width" === e3.resampling && (t3.scale = g * (h / p)), "script_height" === e3.resampling && (t3.scale = g * (l / m));
      const v = t3.scale * p, A = t3.scale * m;
      t3.width = v, t3.height = A, t3.resampledRes = { width: p, height: m }, n2.style.cssText = "width:".concat(v, "px;height:").concat(A, "px;top:").concat((d2 - A) / 2, "px;left:").concat((c - v) / 2, "px;"), n2.style.setProperty("--ass-scale", t3.scale), n2.style.setProperty("--ass-scale-stroke", t3.sbas ? t3.scale : 1), (/* @__PURE__ */ (function(e4) {
        return function() {
          s2(e4);
          const { video: t4, dialogues: i4 } = e4, n3 = t4.currentTime - e4.delay;
          e4.index = (() => {
            for (let e5 = 0; e5 < i4.length; e5 += 1) if (n3 < i4[e5].end) return e5;
            return (i4.length || 1) - 1;
          })(), (function(e5, t5) {
            const { dialogues: i5, actives: s3 } = e5, n4 = t5 - e5.delay;
            for (let e6 = s3.length - 1; e6 >= 0; e6 -= 1) {
              const t6 = s3[e6], { end: i6 } = t6;
              i6 < n4 && (t6.$div.remove(), s3.splice(e6, 1));
            }
            for (; e5.index < i5.length && n4 >= i5[e5.index].start; ) {
              if (n4 < i5[e5.index].end) {
                const t6 = (0, r2.U)(i5[e5.index], e5);
                (t6.animations || []).forEach((e6) => {
                  e6.currentTime = 1e3 * (n4 - t6.start);
                }), s3.push(t6), e5.video.paused || (0, a2.MA)(t6, "play");
              }
              e5.index += 1;
            }
          })(e4, t4.currentTime);
        };
      })(t3))();
    };
  }
}, 23873: (e2, t2, i2) => {
  i2.d(t2, { Mx: () => p, Ul: () => f, nq: () => l, o3: () => m });
  var r2 = i2(77334), a2 = i2(77658), s2 = i2(60913), n = i2(57131);
  function o(e3, t3) {
    const { name: i3, delay: r3, leftToRight: a3 } = e3, s3 = "banner" === i3 ? "X" : "Y", n2 = { X: a3 ? 1 : -1, Y: /up/.test(i3) ? -1 : 1 }[s3], o2 = -100 * n2;
    return [[{ offset: 0, transform: "translate".concat(s3, "(").concat(o2, "%)") }, { offset: 1, transform: "translate".concat(s3, "(calc(").concat(o2, "% + var(--ass-scale) * ").concat(t3 / (r3 || 1) * n2, "px))") }], { duration: t3, fill: "forwards" }];
  }
  function c(e3) {
    return "calc(var(--ass-scale) * ".concat(e3, "px)");
  }
  function d2(e3, t3) {
    const { x1: i3, y1: r3, x2: a3, y2: s3, t1: n2, t2: o2 } = e3, d3 = "translate(".concat(c(i3), ", ").concat(c(r3), ")"), h2 = "translate(".concat(c(a3), ", ").concat(c(s3), ")"), l2 = Math.max(o2, t3);
    return [[{ offset: 0, transform: d3 }, n2 > 0 ? { offset: n2 / l2, transform: d3 } : null, o2 > 0 && o2 < t3 ? { offset: o2 / l2, transform: h2 } : null, { offset: 1, transform: h2 }].filter(Boolean), { duration: l2, fill: "forwards" }];
  }
  function h(e3, t3) {
    const { type: i3, a1: r3, a2: a3, a3: s3, t1: n2, t2: o2, t3: c2, t4: d3 } = e3;
    if ("fad" === i3) return [[[{ offset: 0, opacity: 1 }, { offset: 1, opacity: 0 }], { duration: o2, delay: t3 - o2, fill: "forwards" }], [[{ offset: 0, opacity: 0 }, { offset: 1, opacity: 1 }], { duration: n2, composite: "replace" }]];
    const h2 = Math.max(t3, d3), l2 = [r3, a3, s3].map((e4) => 1 - e4 / 255);
    return [[[0, n2, o2, c2, d3].map((e4) => e4 / h2).map((e4, t4) => ({ offset: e4, opacity: l2[t4 >> 1] })), { duration: h2, fill: "forwards" }]];
  }
  function l(e3) {
    return [["real-fs", (0, a2.F)(e3.fn, e3.fs)], ["tag-fs", e3.fs], ["tag-fsp", e3.fsp], ["fill-color", (0, r2.qG)(e3.a1 + e3.c1)]].filter(([, e4]) => e4).map(([e4, t3]) => ["--ass-".concat(e4), t3]);
  }
  function u(e3, t3) {
    if (1 === t3) return "linear";
    const i3 = Math.ceil(e3 / 1e3 * 60);
    return "linear(".concat(Array.from({ length: i3 + 1 }).map((e4, r3) => (r3 / i3) ** t3).join(","), ")");
  }
  function f(e3, t3) {
    const { start: i3, end: a3, effect: s3, move: n2, fade: c2 } = t3, l2 = 1e3 * (a3 - i3);
    return [s3 && !n2 ? o(s3, l2) : null, n2 ? d2(n2, l2) : null, ...c2 ? h(c2, l2) : []].filter(Boolean).map(([t4, i4]) => (0, r2.dT)(e3, t4, i4));
  }
  function p(e3, t3, i3) {
    const s3 = { ...i3, ...t3.tag };
    return (t3.tag.t || []).map(({ t1: t4, t2: i4, accel: n2, tag: o2 }) => {
      const c2 = Object.fromEntries(Object.keys(o2).flatMap((e4) => (function(e5, t5, i5) {
        const s4 = t5[i5];
        return void 0 === s4 || "clip" === i5 ? [] : "a1" === i5 || "c1" === i5 ? [["fill-color", (0, r2.qG)((t5.a1 || e5.a1) + (t5.c1 || e5.c1))]] : "a3" === i5 || "c3" === i5 ? [["border-color", (0, r2.qG)((t5.a3 || e5.a3) + (t5.c3 || e5.c3))]] : "a4" === i5 || "c4" === i5 ? [["shadow-color", (0, r2.qG)((t5.a4 || e5.a4) + (t5.c4 || e5.c4))]] : "fs" === i5 ? [["real-fs", (0, a2.F)(t5.fn || e5.fn, t5.fs)], ["tag-fs", s4]] : "fscx" === i5 || "fscy" === i5 ? [["tag-".concat(i5), (s4 || 100) / 100]] : "xbord" === i5 || "ybord" === i5 ? [["border-width", 2 * s4]] : [["tag-".concat(i5), s4]];
      })(s3, o2, e4)).map(([e4, t5]) => ["--ass-".concat(e4), t5]).concat([["offset", 1]])), d3 = Math.max(0, i4 - t4);
      return (0, r2.dT)(e3, [c2], { duration: d3, delay: t4, fill: "forwards", easing: u(d3, n2) });
    });
  }
  function m(e3, t3, i3) {
    return t3.slices.flatMap((e4) => e4.fragments).flatMap((e4) => e4.tag.t || []).filter(({ tag: e4 }) => e4.clip).map(({ t1: t4, t2: a3, accel: n2, tag: o2 }) => {
      const c2 = { offset: 1, clipPath: (0, s2.r)(o2.clip, i3.scriptRes.width, i3.scriptRes.height) }, d3 = Math.max(0, a3 - t4);
      return (0, r2.dT)(e3, [c2], { duration: d3, delay: t4, fill: "forwards", easing: u(d3, n2) });
    });
  }
  window.CSS.registerProperty && (["real-fs", "tag-fs", "tag-fsp", "border-width", ...["blur", "xbord", "ybord", "xshad", "yshad", ...n.r8, ...n.ge].map((e3) => "tag-".concat(e3))].forEach((e3) => {
    window.CSS.registerProperty({ name: "--ass-".concat(e3), syntax: "<number>", inherits: true, initialValue: 0 });
  }), ["border-opacity", "shadow-opacity", ...n.IZ.map((e3) => "tag-".concat(e3))].forEach((e3) => {
    window.CSS.registerProperty({ name: "--ass-".concat(e3), syntax: "<number>", inherits: true, initialValue: 1 });
  }), ["fill-color", "border-color", "shadow-color"].forEach((e3) => {
    window.CSS.registerProperty({ name: "--ass-".concat(e3), syntax: "<color>", inherits: true, initialValue: "transparent" });
  }));
}, 60913: (e2, t2, i2) => {
  i2.d(t2, { C: () => s2, r: () => a2 });
  var r2 = i2(23873);
  function a2(e3, t3, i3) {
    if (!e3.dots) return "";
    const { x1: r3, y1: a3, x2: s3, y2: n } = e3.dots;
    return "polygon(evenodd, ".concat([[r3, a3], [r3, n], [s3, n], [s3, a3], [r3, a3]].map(([e4, r4]) => [e4 / t3, r4 / i3]).concat(e3.inverse ? [[0, 0], [0, 1], [1, 1], [1, 0], [0, 0]] : []).map((e4) => e4.map((e5) => 100 * e5 + "%").join(" ")).join(","), ")");
  }
  function s2(e3, t3) {
    const { clip: i3, animations: s3 } = e3;
    if (!i3) return {};
    const { width: n, height: o } = t3.scriptRes, c = document.createElement("div");
    return t3.box.insertBefore(c, e3.$div), c.append(e3.$div), c.className = "ASS-clip-area", c.style.zIndex = e3.$div.style.zIndex, c.style.clipPath = i3.dots ? a2(i3, n, o) : (function(e4, t4, i4, r3) {
      if (!e4.drawing) return "";
      const a3 = r3.scale / (1 << e4.scale - 1);
      let s4 = e4.drawing.instructions.map(({ type: e5, points: t5 }) => e5 + t5.map(({ x: e6, y: t6 }) => "".concat(e6 * a3, ",").concat(t6 * a3)).join(",")).join("");
      return e4.inverse && (s4 += "M0,0L0,".concat(i4, ",").concat(t4, ",").concat(i4, ",").concat(t4, ",0,0,0Z")), 'path(evenodd, "'.concat(s4, '")');
    })(i3, n, o, t3), s3.push(...(0, r2.o3)(c, e3, t3)), { $div: c };
  }
}, 21643: (e2, t2, i2) => {
  i2.d(t2, { p: () => c });
  var r2 = i2(82873), a2 = i2(23873), s2 = i2(39923), n = i2(57131), o = i2(77334);
  function c(e3, t3) {
    const { styles: i3 } = t3, c2 = document.createElement("div");
    c2.className = "ASS-dialogue", c2.dataset.wrapStyle = e3.q;
    const d2 = document.createDocumentFragment(), { align: h, slices: l } = e3;
    [["--ass-align-h", ["0%", "50%", "100%"][h.h]], ["--ass-align-v", ["100%", "50%", "0%"][h.v]]].forEach(([e4, t4]) => {
      c2.style.setProperty(e4, t4);
    });
    const u = [];
    return l.forEach((c3) => {
      const h2 = i3[c3.style].tag, l2 = i3[c3.style].style.BorderStyle;
      c3.fragments.forEach((i4) => {
        const { text: c4, drawing: f } = i4, p = { ...h2, ...i4.tag };
        let m = "";
        const g = [];
        g.push(...(0, s2.F)(p));
        let v = null;
        const A = p.xbord || p.ybord || p.xshad || p.yshad;
        if (A && (f || "00" !== p.a1 || p.xbord !== p.ybord)) {
          const e4 = (0, s2.x)(p, t3.sbas ? t3.scale : 1), i5 = (0, o.An)("svg", [["width", 0], ["height", 0]]);
          i5.append(e4.el), v = { id: e4.id, el: i5 };
        }
        if (g.push(...(0, a2.nq)(p)), f || (m += 'font-family:"'.concat(p.fn, '";'), m += p.b ? "font-weight:".concat(1 === p.b ? "bold" : p.b, ";") : "", m += p.i ? "font-style:italic;" : "", m += p.u || p.s ? "text-decoration:".concat(p.u ? "underline" : "", " ").concat(p.s ? "line-through" : "", ";") : ""), f && p.pbo) {
          const e4 = -p.pbo * (p.fscy || 100) / 100;
          m += "vertical-align:calc(var(--ass-scale) * ".concat(e4, "px);");
        }
        g.push(...(0, n.l1)(p));
        const y = [p, ...(p.t || []).map((e4) => e4.tag)], w = n.r8.some((e4) => y.some((t4) => t4[e4])), b = n.IZ.some((e4) => y.some((t4) => void 0 !== t4[e4] && 100 !== t4[e4])), k = n.ge.some((e4) => y.some((t4) => t4[e4]));
        (function(e4, t4) {
          return e4.replace(/\\h/g, " ").replace(/\\N/g, "\n").replace(/\\n/g, 2 === t4 ? "\n" : " ");
        })(c4, e3.q).split("\n").forEach((e4, s3) => {
          const n2 = document.createElement("span"), o2 = document.createElement("span");
          if ((b || k) && (b && (o2.dataset.scale = ""), k && (o2.dataset.skew = ""), o2.textContent = e4), w && (n2.dataset.rotate = ""), f) {
            n2.dataset.drawing = "";
            const e5 = (0, r2.v)(i4, h2, t3);
            if (!e5) return;
            n2.style.cssText = e5.cssText, n2.append(e5.$svg);
          } else {
            if (s3) {
              const e5 = document.createElement("div");
              e5.dataset.is = "br", e5.style.setProperty("--ass-tag-fs", p.fs), d2.append(e5);
            }
            if (!e4) return;
            b || k ? n2.append(o2) : n2.textContent = e4;
            const t4 = b || k ? o2 : n2;
            t4.dataset.text = e4, A && (t4.dataset.borderStyle = l2, t4.dataset.stroke = "css"), v && (t4.dataset.stroke = "svg", t4.style.filter = "url(#".concat(v.id, ")"), t4.append(v.el));
          }
          n2.style.cssText += m, g.forEach(([e5, t4]) => {
            n2.style.setProperty(e5, t4);
          }), u.push(...(0, a2.Mx)(n2, i4, h2)), d2.append(n2);
        });
      });
    }), u.push(...(0, a2.Ul)(c2, e3)), c2.append(d2), { $div: c2, animations: u };
  }
}, 82873: (e2, t2, i2) => {
  i2.d(t2, { v: () => s2 });
  var r2 = i2(77334), a2 = i2(39923);
  function s2(e3, t3, i3) {
    if (!e3.drawing.d) return null;
    const s3 = { ...t3, ...e3.tag }, { minX: n, minY: o, width: c, height: d2 } = e3.drawing, h = i3.scale / (1 << s3.p - 1), l = (s3.fscx ? s3.fscx / 100 : 1) * h, u = (s3.fscy ? s3.fscy / 100 : 1) * h, f = s3.blur || s3.be || 0, p = s3.xbord + (s3.xshad < 0 ? -s3.xshad : 0) + f, m = s3.ybord + (s3.yshad < 0 ? -s3.yshad : 0) + f, g = c * l + 2 * s3.xbord + Math.abs(s3.xshad) + 2 * f, v = d2 * u + 2 * s3.ybord + Math.abs(s3.yshad) + 2 * f, A = (0, r2.An)("svg", [["width", g], ["height", v], ["viewBox", "".concat(-p, " ").concat(-m, " ").concat(g, " ").concat(v)]]), y = i3.sbas ? i3.scale : 1, w = (0, r2.An)("defs"), b = (0, a2.x)(s3, y);
    w.append(b.el), A.append(w);
    const k = "ASS-".concat((0, r2.uR)()), x = (0, r2.An)("symbol", [["id", k], ["viewBox", "".concat(n, " ").concat(o, " ").concat(c, " ").concat(d2)]]);
    return x.append((0, r2.An)("path", [["d", e3.drawing.d]])), A.append(x), A.append((0, r2.An)("use", [["width", c * l], ["height", d2 * u], ["xlink:href", "#".concat(k)], ["filter", "url(#".concat(b.id, ")")]])), A.style.cssText = "position:absolute;left:".concat(n * l - p, "px;top:").concat(o * u - m, "px;"), { $svg: A, cssText: "position:relative;width:".concat(c * l, "px;height:").concat(d2 * u, "px;") };
  }
}, 76762: (e2, t2, i2) => {
  function r2(e3, t3) {
    const i3 = document.createElement("div");
    i3.className = "ASS-effect-area", t3.box.insertBefore(i3, e3.$div), i3.append(e3.$div);
    const { width: r3, height: a2 } = t3.scriptRes, { name: s2, y1: n, y2: o, leftToRight: c, fadeAwayWidth: d2, fadeAwayHeight: h } = e3.effect, l = Math.min(n, o), u = Math.max(n, o);
    if (i3.dataset.effect = s2, "banner" === s2 && (i3.style.alignItems = c ? "flex-start" : "flex-end", i3.style.justifyContent = ["flex-end", "center", "flex-start"][e3.align.v]), s2.startsWith("scroll")) {
      const t4 = l / a2 * 100, r4 = (a2 - u) / a2 * 100;
      i3.style.cssText = "top:".concat(t4, "%;bottom:").concat(r4, "%;"), i3.style.justifyContent = ["flex-start", "center", "flex-end"][e3.align.h];
    }
    if (h) {
      const e4 = h / (u - l) * 100;
      i3.style.maskImage = ["linear-gradient(#000 ".concat(100 - e4, "%, transparent)"), "linear-gradient(transparent, #000 ".concat(e4, "%)")].join(",");
    }
    if (d2) {
      const e4 = d2 / r3 * 100;
      i3.style.maskImage = "linear-gradient(90deg, transparent, #000 ".concat(e4, "%)");
    }
    return i3;
  }
  i2.d(t2, { c: () => r2 });
}, 77658: (e2, t2, i2) => {
  i2.d(t2, { F: () => l, Y: () => h });
  const r2 = "fontBoundingBoxAscent" in TextMetrics.prototype, a2 = navigator.userAgent.toLowerCase().includes("firefox"), s2 = !r2 && a2 ? 512 : 2048, n = /* @__PURE__ */ Object.create(null), o = document.createElement("canvas").getContext("2d"), c = document.createElement("div");
  c.className = "ASS-fix-font-size", c.style.fontSize = "".concat(s2, "px");
  const d2 = document.createElement("span");
  d2.textContent = "0", c.append(d2);
  const h = r2 ? null : c;
  function l(e3, t3) {
    if (!n[e3]) if (r2) {
      o.font = "".concat(s2, 'px "').concat(e3, '"');
      const t4 = o.measureText("");
      n[e3] = t4.fontBoundingBoxAscent + t4.fontBoundingBoxDescent;
    } else d2.style.fontFamily = '"'.concat(e3, '"'), n[e3] = d2.clientHeight;
    return t3 * s2 / n[e3];
  }
}, 51776: (e2, t2, i2) => {
  function r2(e3, t3) {
    const { scale: i3 } = t3, { move: r3, align: a2, width: s2, height: n, margin: o, slices: c } = e3;
    let d2 = 0, h = 0;
    if (e3.pos || r3) {
      const t4 = e3.pos || { x: 0, y: 0 }, r4 = i3 * t4.x, o2 = i3 * t4.y;
      d2 = [r4, r4 - s2 / 2, r4 - s2][a2.h], h = [o2 - n, o2 - n / 2, o2][a2.v];
    } else d2 = [0, (t3.width - s2) / 2, t3.width - s2 - i3 * o.right][a2.h], h = c.some((e4) => e4.fragments.some(({ keyframes: e5 }) => e5 == null ? void 0 : e5.length)) ? [t3.height - n - o.vertical, (t3.height - n) / 2, o.vertical][a2.v] : (function(e4, t4) {
      const { video: i4, space: r4, scale: a3 } = t4, { layer: s3, margin: n2, width: o2, height: c2, alignment: d3, end: h2 } = e4, l = t4.width - Math.trunc(a3 * (n2.left + n2.right)), u = t4.height, f = Math.trunc(a3 * n2.vertical), p = 100 * i4.currentTime;
      r4[s3] = r4[s3] || { left: { width: new Uint16Array(u + 1), end: new Uint32Array(u + 1) }, center: { width: new Uint16Array(u + 1), end: new Uint32Array(u + 1) }, right: { width: new Uint16Array(u + 1), end: new Uint32Array(u + 1) } };
      const m = r4[s3], g = ["right", "left", "center"][d3 % 3];
      let v = 0, A = 0;
      const y = (e5) => (v = ((e6) => {
        const t5 = m.left.width[e6], i5 = m.center.width[e6], r5 = m.right.width[e6], a4 = m.left.end[e6], s4 = m.center.end[e6], n3 = m.right.end[e6];
        return "left" === g && (a4 > p && t5 || s4 > p && i5 && 2 * o2 + i5 > l || n3 > p && r5 && o2 + r5 > l) || "center" === g && (a4 > p && t5 && 2 * t5 + o2 > l || s4 > p && i5 || n3 > p && r5 && 2 * r5 + o2 > l) || "right" === g && (a4 > p && t5 && t5 + o2 > l || s4 > p && i5 && 2 * o2 + i5 > l || n3 > p && r5);
      })(e5) ? 0 : v + 1, v >= c2 && (A = e5, true));
      if (d3 <= 3) {
        A = u - f - 1;
        for (let e5 = A; e5 > f && !y(e5); e5 -= 1) ;
      } else if (d3 >= 7) {
        A = f + 1;
        for (let e5 = A; e5 < u - f && !y(e5); e5 += 1) ;
      } else {
        A = u - c2 >> 1;
        for (let e5 = A; e5 < u - f && !y(e5); e5 += 1) ;
      }
      d3 > 3 && (A -= c2 - 1);
      for (let e5 = A; e5 < A + c2; e5 += 1) m[g].width[e5] = o2, m[g].end[e5] = 100 * h2;
      return A;
    })(e3, t3);
    return { x: d2 + [0, s2 / 2, s2][a2.h], y: h + [n, n / 2, 0][a2.v] };
  }
  i2.d(t2, { E: () => r2 });
}, 47924: (e2, t2, i2) => {
  i2.d(t2, { U: () => d2 });
  var r2 = i2(60913), a2 = i2(21643), s2 = i2(51776), n = i2(59950), o = i2(57131), c = i2(76762);
  function d2(e3, t3) {
    const { $div: i3, animations: d3 } = (0, a2.p)(e3, t3);
    Object.assign(e3, { $div: i3, animations: d3 }), t3.box.append(i3);
    const { width: h } = i3.getBoundingClientRect();
    Object.assign(e3, { width: h }), i3.style.cssText += (0, n._)(e3);
    const { height: l } = i3.getBoundingClientRect();
    Object.assign(e3, { height: l });
    const { x: u, y: f } = (0, s2.E)(e3, t3);
    return Object.assign(e3, { x: u, y: f }), i3.style.cssText += "left:".concat(u, "px;top:").concat(f, "px;"), (0, o.Lu)(e3, t3.scale), Object.assign(e3, (0, r2.C)(e3, t3)), e3.effect && Object.assign(e3, { $div: (0, c.c)(e3, t3) }), e3;
  }
}, 39923: (e2, t2, i2) => {
  i2.d(t2, { F: () => s2, x: () => a2 });
  var r2 = i2(77334);
  function a2(e3, t3) {
    const i3 = "ASS-".concat((0, r2.uR)()), a3 = e3.xbord || e3.ybord, s3 = e3.xshad || e3.yshad, n = "ff" !== (e3.a1 || "00").toLowerCase(), o = (e3.blur || e3.be || 0) * t3, c = (0, r2.An)("filter", [["id", i3]]);
    c.append((0, r2.An)("feGaussianBlur", [["stdDeviation", a3 ? 0 : o], ["in", "SourceGraphic"], ["result", "sg_b"]])), c.append((0, r2.An)("feFlood", [["flood-color", "var(--ass-fill-color)"], ["result", "c1"]])), c.append((0, r2.An)("feComposite", [["operator", "in"], ["in", "c1"], ["in2", "sg_b"], ["result", "main"]])), a3 && (c.append((0, r2.An)("feMorphology", [["radius", "".concat(e3.xbord * t3, " ").concat(e3.ybord * t3)], ["operator", "dilate"], ["in", "SourceGraphic"], ["result", "dil"]])), c.append((0, r2.An)("feGaussianBlur", [["stdDeviation", o], ["in", "dil"], ["result", "dil_b"]])), c.append((0, r2.An)("feComposite", [["operator", "out"], ["in", "dil_b"], ["in2", "SourceGraphic"], ["result", "dil_b_o"]])), c.append((0, r2.An)("feFlood", [["flood-color", "var(--ass-border-color)"], ["result", "c3"]])), c.append((0, r2.An)("feComposite", [["operator", "in"], ["in", "c3"], ["in2", "dil_b_o"], ["result", "border"]]))), s3 && (a3 || n) && (c.append((0, r2.An)("feOffset", [["dx", e3.xshad * t3], ["dy", e3.yshad * t3], ["in", a3 ? n ? "dil" : "dil_b_o" : "SourceGraphic"], ["result", "off"]])), c.append((0, r2.An)("feGaussianBlur", [["stdDeviation", o], ["in", "off"], ["result", "off_b"]])), n || (c.append((0, r2.An)("feOffset", [["dx", e3.xshad * t3], ["dy", e3.yshad * t3], ["in", "SourceGraphic"], ["result", "sg_off"]])), c.append((0, r2.An)("feComposite", [["operator", "out"], ["in", "off_b"], ["in2", "sg_off"], ["result", "off_b_o"]]))), c.append((0, r2.An)("feFlood", [["flood-color", "var(--ass-shadow-color)"], ["result", "c4"]])), c.append((0, r2.An)("feComposite", [["operator", "in"], ["in", "c4"], ["in2", n ? "off_b" : "off_b_o"], ["result", "shadow"]])));
    const d2 = (0, r2.An)("feMerge", []);
    return s3 && (a3 || n) && d2.append((0, r2.An)("feMergeNode", [["in", "shadow"]])), a3 && d2.append((0, r2.An)("feMergeNode", [["in", "border"]])), d2.append((0, r2.An)("feMergeNode", [["in", "main"]])), c.append(d2), { id: i3, el: c };
  }
  function s2(e3) {
    return [["border-width", 2 * e3.xbord], ["border-color", (0, r2.qG)("".concat(e3.a3).concat(e3.c3))], ["shadow-color", (0, r2.qG)("".concat(e3.a4).concat(e3.c4))], ["tag-blur", e3.blur || e3.be || 0], ["tag-xbord", e3.xbord], ["tag-ybord", e3.ybord], ["tag-xshad", e3.xshad], ["tag-yshad", e3.yshad]].map(([e4, t3]) => ["--ass-".concat(e4), t3]);
  }
}, 59950: (e2, t2, i2) => {
  function r2(e3) {
    const { layer: t3, align: i3, effect: r3, pos: a2, margin: s2, q: n } = e3;
    let o = "";
    return t3 && (o += "z-index:".concat(t3, ";")), o += "text-align:".concat(["left", "center", "right"][i3.h], ";"), r3 || (2 !== n && (o += "max-width:calc(100% - var(--ass-scale) * ".concat(s2.left + s2.right, "px);")), a2 || (0 !== i3.h && (o += "padding-right:calc(var(--ass-scale) * ".concat(s2.right, "px);")), 2 !== i3.h && (o += "padding-left:calc(var(--ass-scale) * ".concat(s2.left, "px);")))), o;
  }
  i2.d(t2, { _: () => r2 });
}, 57131: (e2, t2, i2) => {
  i2.d(t2, { IZ: () => a2, Lu: () => o, ge: () => s2, l1: () => n, r8: () => r2 });
  const r2 = ["frx", "fry", "frz"], a2 = ["fscx", "fscy"], s2 = ["fax", "fay"];
  function n(e3) {
    return [...[...r2, ...s2].map((t3) => ["--ass-tag-".concat(t3), "".concat(e3[t3] || 0)]), ...a2.map((t3) => ["--ass-tag-".concat(t3), e3.p ? 1 : (e3[t3] || 100) / 100])];
  }
  function o(e3, t3) {
    const { align: i3, width: r3, height: a3, x: s3, y: n2, $div: o2 } = e3, c = (e3.org ? e3.org.x * t3 : s3) + [0, r3 / 2, r3][i3.h], d2 = (e3.org ? e3.org.y * t3 : n2) + [a3, a3 / 2, 0][i3.v];
    for (let e4 = o2.childNodes.length - 1; e4 >= 0; e4 -= 1) {
      const t4 = o2.childNodes[e4];
      if ("" === t4.dataset.rotate) {
        const e5 = c - s3 - t4.offsetLeft, i4 = d2 - n2 - t4.offsetTop;
        t4.style.cssText += "transform-origin:".concat(e5, "px ").concat(i4, "px;");
      }
    }
  }
}, 77334: (e2, t2, i2) => {
  function r2(e3) {
    const t3 = e3.match(/(\w\w)(\w\w)(\w\w)(\w\w)/), i3 = (function(e4) {
      return 1 - "0x".concat(e4) / 255;
    })(t3[1]), r3 = +"0x".concat(t3[2]), a3 = +"0x".concat(t3[3]);
    return "rgba(".concat(+"0x".concat(t3[4]), ",").concat(a3, ",").concat(r3, ",").concat(i3, ")");
  }
  function a2() {
    return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (e3) => {
      const t3 = Math.trunc(16 * Math.random());
      return ("x" === e3 ? t3 : 3 & t3 | 8).toString(16);
    });
  }
  function s2(e3, t3 = []) {
    const i3 = document.createElementNS("http://www.w3.org/2000/svg", e3);
    for (let e4 = 0; e4 < t3.length; e4 += 1) {
      const r3 = t3[e4];
      i3.setAttributeNS("xlink:href" === r3[0] ? "http://www.w3.org/1999/xlink" : null, r3[0], r3[1]);
    }
    return i3;
  }
  function n(e3, t3, i3) {
    const r3 = e3.animate(t3, i3);
    return r3.pause(), r3;
  }
  function o(e3, t3) {
    (e3.animations || []).forEach((e4) => {
      e4[t3]();
    });
  }
  i2.d(t2, { An: () => s2, MA: () => o, dT: () => n, qG: () => r2, uR: () => a2 });
} }, r = {};
function a(e2) {
  var t2 = r[e2];
  if (void 0 !== t2) return t2.exports;
  var s2 = r[e2] = { exports: {} };
  return i[e2](s2, s2.exports, a), s2.exports;
}
a.m = i, a.n = (e2) => {
  var t2 = e2 && e2.__esModule ? () => e2.default : () => e2;
  return a.d(t2, { a: t2 }), t2;
}, a.d = (e2, t2) => {
  for (var i2 in t2) a.o(t2, i2) && !a.o(e2, i2) && Object.defineProperty(e2, i2, { enumerable: true, get: t2[i2] });
}, a.f = {}, a.e = (e2) => Promise.all(Object.keys(a.f).reduce((t2, i2) => (a.f[i2](e2, t2), t2), [])), a.u = (e2) => "chunks/" + e2 + ".avplayer.js", a.g = (function() {
  if ("object" == typeof globalThis) return globalThis;
  try {
    return this || new Function("return this")();
  } catch (e2) {
    if ("object" == typeof window) return window;
  }
})(), a.o = (e2, t2) => Object.prototype.hasOwnProperty.call(e2, t2), e = {}, t = "libmedia:", a.l = (i2, r2, s2, n) => {
  if (e[i2]) e[i2].push(r2);
  else {
    var o, c;
    if (void 0 !== s2) for (var d2 = document.getElementsByTagName("script"), h = 0; h < d2.length; h++) {
      var l = d2[h];
      if (l.getAttribute("src") == i2 || l.getAttribute("data-webpack") == t + s2) {
        o = l;
        break;
      }
    }
    o || (c = true, (o = document.createElement("script")).type = "module", o.charset = "utf-8", o.timeout = 120, a.nc && o.setAttribute("nonce", a.nc), o.setAttribute("data-webpack", t + s2), o.src = i2), e[i2] = [r2];
    var u = (t2, r3) => {
      o.onerror = o.onload = null, clearTimeout(f);
      var a2 = e[i2];
      if (delete e[i2], o.parentNode && o.parentNode.removeChild(o), a2 && a2.forEach((e2) => e2(r3)), t2) return t2(r3);
    }, f = setTimeout(u.bind(null, void 0, { type: "timeout", target: o }), 12e4);
    o.onerror = u.bind(null, o.onerror), o.onload = u.bind(null, o.onload), c && document.head.appendChild(o);
  }
}, a.r = (e2) => {
  "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e2, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e2, "__esModule", { value: true });
}, (() => {
  var e2;
  if ("string" == typeof import.meta.url && (e2 = import.meta.url), !e2) throw new Error("Automatic publicPath is not supported in this browser");
  e2 = e2.replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/"), a.p = e2;
})(), (() => {
  var e2 = { 792: 0 };
  a.f.j = (t3, i3) => {
    var r2 = a.o(e2, t3) ? e2[t3] : void 0;
    if (0 !== r2) if (r2) i3.push(r2[2]);
    else {
      var s2 = new Promise((i4, a2) => r2 = e2[t3] = [i4, a2]);
      i3.push(r2[2] = s2);
      var n = a.p + a.u(t3), o = new Error();
      a.l(n, (i4) => {
        if (a.o(e2, t3) && (0 !== (r2 = e2[t3]) && (e2[t3] = void 0), r2)) {
          var s3 = i4 && ("load" === i4.type ? "missing" : i4.type), n2 = i4 && i4.target && i4.target.src;
          o.message = "Loading chunk " + t3 + " failed.\n(" + s3 + ": " + n2 + ")", o.name = "ChunkLoadError", o.type = s3, o.request = n2, r2[1](o);
        }
      }, "chunk-" + t3, t3);
    }
  };
  var t2 = (t3, i3) => {
    var r2, s2, [n, o, c] = i3, d2 = 0;
    if (n.some((t4) => 0 !== e2[t4])) {
      for (r2 in o) a.o(o, r2) && (a.m[r2] = o[r2]);
      c && c(a);
    }
    for (t3 && t3(i3); d2 < n.length; d2++) s2 = n[d2], a.o(e2, s2) && e2[s2] && e2[s2][0](), e2[s2] = 0;
  }, i2 = self.webpackChunklibmedia = self.webpackChunklibmedia || [];
  i2.forEach(t2.bind(null, 0)), i2.push = t2.bind(null, i2.push.bind(i2));
})();
var s = a(61634);
s.dB;
s.zM;
s.KU;
var d = s.Ay;
class AVPlayerAdapter {
  constructor(options) {
    __publicField(this, "player", null);
    this.player = new d(options);
  }
  load(url) {
    var _a2;
    var _a;
    return (_a2 = (_a = this.player) == null ? void 0 : _a.load(url)) != null ? _a2 : Promise.reject(new Error("AVPlayer is null"));
  }
  play() {
    var _a2;
    var _a;
    return (_a2 = (_a = this.player) == null ? void 0 : _a.play()) != null ? _a2 : Promise.reject(new Error("AVPlayer is null"));
  }
  getStatus() {
    var _a2;
    var _a;
    return (_a2 = (_a = this.player) == null ? void 0 : _a.getStatus()) != null ? _a2 : 2;
  }
  snapshot(type, quality) {
    if (!this.player) return "";
    switch (type) {
      case "png":
      case "jpeg":
      case "webp":
        return this.player.snapshot(type, quality);
    }
    return "";
  }
  resize(width, height) {
    var _a;
    (_a = this.player) == null ? void 0 : _a.resize(width, height);
  }
  setRenderMode(mode) {
    var _a;
    (_a = this.player) == null ? void 0 : _a.setRenderMode(mode);
  }
  setVolume(volume, force) {
    var _a;
    (_a = this.player) == null ? void 0 : _a.setVolume(volume, force);
  }
  resume() {
    var _a2;
    var _a;
    return (_a2 = (_a = this.player) == null ? void 0 : _a.resume()) != null ? _a2 : Promise.reject(new Error("AVPlayer is null"));
  }
  stop() {
    var _a2;
    var _a;
    return (_a2 = (_a = this.player) == null ? void 0 : _a.stop()) != null ? _a2 : Promise.reject(new Error("AVPlayer is null"));
  }
  destroy() {
    var _a2;
    var _a;
    return (_a2 = (_a = this.player) == null ? void 0 : _a.destroy()) != null ? _a2 : Promise.reject(new Error("AVPlayer is null"));
  }
  configQualityMode(initialQuality, totalQuality, mode = "AUTO") {
    if (!this.player) {
      throw new Error("AVPlayer is null");
    }
    const player = this.player;
    return player.configQualityMode(initialQuality, totalQuality, mode);
  }
  setMaxLatency(latencySec) {
    if (!this.player) {
      return;
    }
    const player = this.player;
    if (typeof player.setMaxLatency !== "function") {
      console.warn("[AVPlayerAdapter] setMaxLatency 方法不存在，無法設定 maxLatency");
      return;
    }
    player.setMaxLatency(latencySec);
  }
  setTimecode(dealTime, currentTime2) {
    var _a;
    if (!this.player) {
      return;
    }
    const normalizedDeal = BigInt(Math.trunc(dealTime));
    const normalizedCurrent = currentTime2 !== void 0 ? BigInt(Math.trunc(currentTime2)) : void 0;
    const player = this.player;
    const setTimecodeFn = (_a = player.setTimecode) != null ? _a : player.setTimeCode;
    if (typeof setTimecodeFn !== "function") {
      console.warn("[AVPlayerAdapter] setTimecode/setTimeCode 方法不存在，無法寫入 timecode");
      return;
    }
    if (normalizedCurrent !== void 0) {
      setTimecodeFn.call(this.player, normalizedDeal, normalizedCurrent);
    } else {
      setTimecodeFn.call(this.player, normalizedDeal);
    }
  }
  getStats() {
    var _a2;
    var _a;
    return (_a2 = (_a = this.player) == null ? void 0 : _a.getStats()) != null ? _a2 : null;
  }
  setLogLevel(level) {
    d.setLogLevel(level);
  }
  setLogEnabled(enabled) {
    d.setLogLevel(enabled ? 1 : 5);
  }
  on(event, listener, options) {
    var _a;
    (_a = this.player) == null ? void 0 : _a.on(event, listener, options);
    return this;
  }
}
class IKGPlayerFactory {
  static create(type, option) {
    switch (type) {
      case "libmedia":
        return new AVPlayerAdapter(option);
      default:
        throw new Error("Unsupported player type: ".concat(type));
    }
  }
}
export {
  IKGPlayerFactory as I
};
//# sourceMappingURL=ikigaians-ikgplayer-core-CxDPJj5x.js.map
