{"version":3,"file":"ikigaians-connect-core-legacy-DuYeXAwv.js","sources":["../../node_modules/.pnpm/isomorphic-ws@5.0.0_ws@8.18.3/node_modules/isomorphic-ws/browser.js","../../node_modules/.pnpm/@ikigaians+connect@2.9.0_ws@8.18.3/node_modules/@ikigaians/connect/dist/esm/enums/game.enum.js","../../node_modules/.pnpm/@ikigaians+connect@2.9.0_ws@8.18.3/node_modules/@ikigaians/connect/dist/esm/event/event.js","../../node_modules/.pnpm/@ikigaians+connect@2.9.0_ws@8.18.3/node_modules/@ikigaians/connect/dist/esm/connect/handlers/kicked.handler.js","../../node_modules/.pnpm/@ikigaians+connect@2.9.0_ws@8.18.3/node_modules/@ikigaians/connect/dist/esm/connect/handlers/index.js","../../node_modules/.pnpm/@ikigaians+connect@2.9.0_ws@8.18.3/node_modules/@ikigaians/connect/dist/esm/connect/connect.js","../../node_modules/.pnpm/@ikigaians+connect@2.9.0_ws@8.18.3/node_modules/@ikigaians/connect/dist/esm/lru/lru-cache.js"],"sourcesContent":["// https://github.com/maxogden/websocket-stream/blob/48dc3ddf943e5ada668c31ccd94e9186f02fafbd/ws-fallback.js\n\nvar ws = null\n\nif (typeof WebSocket !== 'undefined') {\n  ws = WebSocket\n} else if (typeof MozWebSocket !== 'undefined') {\n  ws = MozWebSocket\n} else if (typeof global !== 'undefined') {\n  ws = global.WebSocket || global.MozWebSocket\n} else if (typeof window !== 'undefined') {\n  ws = window.WebSocket || window.MozWebSocket\n} else if (typeof self !== 'undefined') {\n  ws = self.WebSocket || self.MozWebSocket\n}\n\nexport default ws\n","export var WsEvent;\n(function (WsEvent) {\n    WsEvent[\"WS_OPENED\"] = \"ws.opened\";\n    WsEvent[\"WS_CLOSED\"] = \"ws.closed\";\n    WsEvent[\"WS_RECONNECTING\"] = \"ws.reconnecting\";\n    WsEvent[\"WS_RECONNECTED\"] = \"ws.reconnected\";\n    WsEvent[\"WS_ERROR\"] = \"ws.error\";\n})(WsEvent || (WsEvent = {}));\nexport var WsAction;\n(function (WsAction) {\n    WsAction[\"ACK\"] = \"ack\";\n    WsAction[\"PING\"] = \"ping\";\n    WsAction[\"KICK\"] = \"kick\";\n})(WsAction || (WsAction = {}));\nexport var GameAction;\n(function (GameAction) {\n    GameAction[\"SUBSCRIBE_TABLE\"] = \"sub.table\";\n    GameAction[\"UNSUBSCRIBE_TABLE\"] = \"unsub.table\";\n    GameAction[\"SUBSCRIBE_LOBBY\"] = \"sub.lobby\";\n    GameAction[\"UNSUBSCRIBE_LOBBY\"] = \"unsub.lobby\";\n    /** Stop listening support chat */\n    GameAction[\"UNSUBSCRIBE_SUPPORT\"] = \"unsub.support\";\n    GameAction[\"SYNC_WALLET\"] = \"sync.wallet\";\n    /** Sends a preliminary glance of the bet for bet statistic and winner list */\n    GameAction[\"BET_PEEK\"] = \"bet.peek\";\n    GameAction[\"LIST_BET_HISTORY\"] = \"list.betHistory\";\n    GameAction[\"SUBTOTAL_BET_HISTORY\"] = \"subtotal.betHistory\";\n    /** Send a message to the chatroom in the game */\n    GameAction[\"CHAT_GAME\"] = \"chat.table\";\n    /** Send a message to support */\n    GameAction[\"CHAT_SUPPORT\"] = \"chat.support\";\n    /** Request for history of message in game */\n    GameAction[\"LIST_MESSAGE\"] = \"list.msg\";\n    /** Request for history of message in support */\n    GameAction[\"LIST_SUPPORT_MESSAGE\"] = \"list.supportMsg\";\n    /** Request to save player preference */\n    GameAction[\"SET_PREFERENCE\"] = \"set.pref\";\n})(GameAction || (GameAction = {}));\nexport var GameEvent;\n(function (GameEvent) {\n    GameEvent[\"UNKNOWN\"] = \"unknown\";\n    GameEvent[\"SESSION_KICKED\"] = \"session.kicked\";\n    GameEvent[\"TABLE_KICKED\"] = \"table.kicked\";\n    GameEvent[\"TABLE_STATE\"] = \"table.state\";\n    GameEvent[\"TABLE_START\"] = \"table.start\";\n    GameEvent[\"TABLE_BET_STOP\"] = \"table.betStop\";\n    GameEvent[\"TABLE_DEAL\"] = \"table.deal\";\n    GameEvent[\"TABLE_FINISH\"] = \"table.finish\";\n    GameEvent[\"TABLE_WINNERS\"] = \"table.winners\";\n    GameEvent[\"STREAM_ROTATE\"] = \"stream.rotate\";\n    GameEvent[\"LOBBY_STATE\"] = \"lobby.state\";\n    GameEvent[\"PLAYER_STATE\"] = \"player.state\";\n    GameEvent[\"WALLET_STATE\"] = \"wallet.state\";\n    GameEvent[\"BET_PEEK_ACK\"] = \"bet.ack\";\n    GameEvent[\"BET_RESULT\"] = \"bet.result\";\n    GameEvent[\"BET_STATS\"] = \"bet.stats\";\n    GameEvent[\"BET_HISTORY_LIST\"] = \"betHistory.list\";\n    GameEvent[\"BET_HISTORY_SUBTOTAL\"] = \"betHistory.subtotal\";\n    /** Message from the game chat */\n    GameEvent[\"GAME_MESSAGE\"] = \"table.msg\";\n    /** Message from the support dialog */\n    GameEvent[\"SUPPORT_MESSAGE\"] = \"support.msg\";\n    /** system message */\n    GameEvent[\"SYSTEM_MESSAGE\"] = \"system.msg\";\n    GameEvent[\"TABLE_PAUSE\"] = \"table.pause\";\n    GameEvent[\"TABLE_RESUME\"] = \"table.resume\";\n    GameEvent[\"TABLE_MAINTENANCE\"] = \"table.maintenance\";\n})(GameEvent || (GameEvent = {}));\n//# sourceMappingURL=game.enum.js.map","import { GameAction, GameEvent, WsAction, WsEvent, } from '../enums';\nexport class Event {\n    origin;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    json;\n    constructor(origin) {\n        this.origin = origin;\n        this.parse();\n    }\n    get type() {\n        const value = this.json?.type;\n        if (typeof value === 'string') {\n            if (Object.values(GameAction).includes(value)) {\n                return value;\n            }\n            if (Object.values(GameEvent).includes(value)) {\n                return value;\n            }\n            if (Object.values(WsAction).includes(value)) {\n                return value;\n            }\n            if (Object.values(WsEvent).includes(value)) {\n                return value;\n            }\n        }\n        return GameEvent.UNKNOWN;\n    }\n    get syn() {\n        return this.json?.syn;\n    }\n    get timecode() {\n        return this.json?.timecode;\n    }\n    get isValid() {\n        return this.type != GameEvent.UNKNOWN;\n    }\n    get data() {\n        return this.isValid ? this.json?.data : undefined;\n    }\n    get error() {\n        return this.isValid ? this.json?.error : undefined;\n    }\n    parse() {\n        if (!this.origin) {\n            return;\n        }\n        let bufStr;\n        if (typeof this.origin === 'string') {\n            bufStr = this.origin;\n        }\n        else if (this.origin instanceof ArrayBuffer) {\n            bufStr = new TextDecoder().decode(this.origin);\n        }\n        else if (Array.isArray(this.origin) &&\n            this.origin.every((item) => item instanceof ArrayBuffer)) {\n            bufStr = this.origin.reduce((acc, buf) => acc + new TextDecoder().decode(buf), '');\n        }\n        else if (globalThis.window === undefined &&\n            Buffer.isBuffer(this.origin)) {\n            bufStr = this.origin.toString();\n        }\n        else {\n            this.json = this.origin;\n            return;\n        }\n        try {\n            this.json = JSON.parse(bufStr);\n        }\n        catch {\n            return;\n        }\n    }\n}\n//# sourceMappingURL=event.js.map","import { AfterKicked } from '@ikigaians/house';\nexport const KickedHandler = (evt, conn) => {\n    if (AfterKicked.DISCONNECT == evt.data.kicked.after) {\n        conn.close();\n    }\n};\n//# sourceMappingURL=kicked.handler.js.map","import { GameEvent } from '../../enums';\nimport { KickedHandler } from './kicked.handler';\nconst EventHandler = {\n    [GameEvent.SESSION_KICKED]: KickedHandler,\n};\nexport function execEventHandler(evt, conn) {\n    const handler = EventHandler[evt.type];\n    if (typeof handler === 'function') {\n        handler(evt, conn);\n    }\n}\n//# sourceMappingURL=index.js.map","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { MessageContentType, } from '@ikigaians/house';\nimport WebSocket from 'isomorphic-ws';\nimport { GameAction, GameEvent, WsAction, WsEvent, } from '../enums';\nimport { Event } from '../event';\nimport { execEventHandler } from './handlers';\nconst SERVER_ACTIVATE_SESSION_PATH = '/v1/exp/session/activate';\n/**\n * Live RGS websocket client.\n *\n * The heartbeat and reconnection mechanism:\n * 1. The client will send PING message to server if the last incoming message is later than `heartbeatIntervalMs`.\n * 2. The server must respond some message after receiving any message.\n * 3. The client will reconnect if the last incoming message is later than `heartbeatTimeoutMs`.\n */\nexport class Connect {\n    rgsUrl;\n    launchUrl;\n    handlerMap;\n    ws;\n    logger;\n    synNo = 0;\n    heartbeatTimer;\n    /** The last time we see a server message. */\n    lastMessageTime = 0;\n    lastHeartbeatTime = 0;\n    /** Send a heartbeat if we see no incoming message after this duration.  */\n    heartbeatIntervalMs = 1000;\n    /** If server has no response for this duration, a reconnect will be triggered. */\n    heartbeatTimeoutMs = 5000;\n    reconnectDelayMs = 1000;\n    reconnectCount = 0;\n    get sid() {\n        try {\n            return new URL(this.launchUrl ?? '').searchParams.get('sid') || '';\n        }\n        catch {\n            return '';\n        }\n    }\n    get url() {\n        const url = new URL(this.rgsUrl);\n        url.pathname = SERVER_ACTIVATE_SESSION_PATH;\n        url.searchParams.set('sid', this.sid);\n        return url.toString();\n    }\n    /**\n     * @param rgsUrl Url to game server\n     * @param launchUrl Url of current session url. If omitted, use `windows.location`\n     */\n    constructor(rgsUrl, launchUrl) {\n        this.rgsUrl = rgsUrl;\n        this.launchUrl = launchUrl;\n        this.handlerMap = new Map();\n        this.ws = undefined;\n    }\n    connect() {\n        if (!this.rgsUrl) {\n            this.logger?.error?.('Missing server URL to connect');\n            return;\n        }\n        if (!this.sid) {\n            this.logger?.error?.('Missing sid to connect');\n            return;\n        }\n        this.doConnect();\n        this.lastMessageTime = Date.now();\n        this.startHeartbeat();\n    }\n    close() {\n        if (this.heartbeatTimer) {\n            clearInterval(this.heartbeatTimer);\n            this.heartbeatTimer = undefined;\n        }\n        this.doClose();\n        this.emitEvent(WsEvent.WS_CLOSED);\n    }\n    doConnect() {\n        if (this.isConnected) {\n            return;\n        }\n        this.doClose();\n        try {\n            this.ws = new WebSocket(this.url);\n            this.ws.onmessage = this.handleMessage.bind(this);\n            this.ws.onopen = this.handleOpened.bind(this);\n            this.ws.onclose = this.handleClosed.bind(this);\n            this.ws.onerror = this.handleError.bind(this);\n        }\n        catch (error) {\n            this.logger?.error?.('Failed to create WebSocket connection', error);\n            const errorEvent = new Event({\n                type: WsEvent.WS_ERROR,\n                data: {\n                    error: error instanceof Error ? error.message : String(error),\n                },\n            });\n            this.emitEvent(WsEvent.WS_ERROR, errorEvent);\n            // Schedule retry if WebSocket construction fails\n            if (this.heartbeatTimer) {\n                setTimeout(() => {\n                    this.reconnect();\n                }, this.reconnectDelayMs);\n            }\n        }\n    }\n    doClose() {\n        if (this.ws) {\n            this.ws.onmessage = null;\n            this.ws.onopen = null;\n            this.ws.onclose = null;\n            this.ws.onerror = null;\n            try {\n                this.ws.close();\n            }\n            catch {\n                //\n            }\n            this.ws = undefined;\n        }\n    }\n    /**\n     * Registers a handler for a specific event type.\n     *\n     * This method allows you to associate a handler function with a specified event type.\n     * When an event of the specified type occurs, the registered handler will be invoked.\n     * This is useful for handling different types of events with specific logic.\n     *\n     * @param {GameEvent | string} type - The identifier of the event type to listen for. It should be one of the predefined values in the `GameEvent` enumeration.\n     * @param {WsHandler | WsHandlerAsync} handler - The event handler to be executed when the specified event type is triggered.\n     *                                               It can be either a synchronous (`WsHandler`) or asynchronous (`WsHandlerAsync`) function.\n     * @returns {this} - Returns the current instance to allow method chaining.\n     */\n    on(type, handler) {\n        this.handlerMap.set(type, handler);\n        return this;\n    }\n    /**\n     * Registers a handler for unknown event types.\n     *\n     * This method allows you to set a handler that will be invoked when an event of type `GameEvent.UNKNOWN`\n     * is received. It can be useful for handling unexpected or miscellaneous events that do not match any\n     * other predefined event types.\n     *\n     * @param {WsHandler | WsHandlerAsync} handler - The event handler to be executed for unknown events.\n     *                                               This can either be a synchronous (`WsHandler`) or\n     *                                               asynchronous (`WsHandlerAsync`) function.\n     * @returns {this} - Returns the current instance for method chaining.\n     */\n    onElse(handler) {\n        this.handlerMap.set(GameEvent.UNKNOWN, handler);\n        return this;\n    }\n    /**\n     * Sends an action with an optional payload to the WebSocket server.\n     *\n     * This method constructs a message containing a specified action and an optional payload,\n     * then sends it to the WebSocket server. If the WebSocket connection is not established,\n     * the method will return immediately without sending any data.\n     *\n     * @param {GameAction} act - The action to be sent. This should be one of the predefined actions in the `GameAction` enumeration.\n     * @param {PayloadMap[E]?} [payload] - An optional payload to include with the action. This can be any data type that is serializable to JSON.\n     *                          If no payload is provided, the action will be sent with a `data` field set to `undefined`.\n     */\n    send(act, payload) {\n        if (!this.isConnected || !this.ws) {\n            this.logger?.info?.(`Message not sent (not connected): ${act}`);\n            return;\n        }\n        const data = {\n            type: act,\n            data: undefined,\n            syn: `#${(this.synNo += 2)}`,\n        };\n        if (payload) {\n            data.data = payload;\n        }\n        const dataStr = JSON.stringify(data);\n        this.ws.send(dataStr);\n    }\n    handleMessage(msg) {\n        this.lastMessageTime = Date.now();\n        const evt = new Event(msg.data);\n        this.emitEvent(evt.type, evt);\n        this.ack(evt);\n        execEventHandler(evt, this);\n    }\n    emitEvent(type, data) {\n        let handler;\n        if (this.handlerMap.has(type)) {\n            handler = this.handlerMap.get(type);\n        }\n        if (!data) {\n            data = new Event({ data: { type } });\n        }\n        if (handler) {\n            setTimeout(() => {\n                try {\n                    handler(data, this);\n                }\n                catch (error) {\n                    this.logger?.error?.('Error in event handler', { type, error });\n                }\n            }, 0);\n        }\n        else {\n            if (type === WsAction.ACK || type === WsAction.PING) {\n                return;\n            }\n            this.logger?.info?.('unhandled message', data);\n        }\n    }\n    ack(evt) {\n        if (!evt.syn)\n            return;\n        setTimeout(() => {\n            this.send(WsAction.ACK, { syn: evt.syn });\n        }, 0);\n    }\n    handleOpened() {\n        this.lastMessageTime = Date.now();\n        if (this.reconnectCount > 0) {\n            this.emitEvent(WsEvent.WS_RECONNECTED);\n        }\n        else {\n            this.emitEvent(WsEvent.WS_OPENED);\n        }\n        this.reconnectCount = 0;\n    }\n    handleClosed() {\n        this.doClose();\n        this.emitEvent(WsEvent.WS_CLOSED);\n    }\n    handleError(event) {\n        const errorEvent = new Event({\n            type: WsEvent.WS_ERROR,\n            data: {\n                error: event.message || event.error,\n            },\n        });\n        this.emitEvent(WsEvent.WS_ERROR, errorEvent);\n    }\n    get isConnected() {\n        return this.ws && this.ws.readyState === WebSocket.OPEN;\n    }\n    startHeartbeat() {\n        this.heartbeatTimer = setInterval(() => {\n            // Skip heartbeat checks during reconnection\n            if (this.inflightReconnect) {\n                return;\n            }\n            // send ping when server has no recent activity\n            if (Date.now() - this.lastMessageTime >= this.heartbeatIntervalMs &&\n                Date.now() - this.lastHeartbeatTime >= this.heartbeatIntervalMs) {\n                this.lastHeartbeatTime = Date.now();\n                this.send(WsAction.PING);\n            }\n            // reconnect when last incoming message is too long ago\n            if (Date.now() - this.lastMessageTime > this.heartbeatTimeoutMs) {\n                this.reconnect();\n            }\n        }, 200);\n    }\n    inflightReconnect;\n    reconnect() {\n        if (this.inflightReconnect) {\n            return;\n        }\n        const promise = (async () => {\n            try {\n                this.reconnectCount++;\n                const delay = this.reconnectDelayMs * 2 ** Math.min(this.reconnectCount - 1, 2);\n                this.emitEvent(WsEvent.WS_RECONNECTING);\n                await new Promise((r) => setTimeout(r, delay));\n                this.doClose();\n                this.doConnect();\n            }\n            finally {\n                this.inflightReconnect = undefined;\n            }\n        })();\n        this.inflightReconnect = promise;\n    }\n    setLogger(logger) {\n        this.logger = logger;\n        return this;\n    }\n    /**\n     * * Functions to send GameAction events\n     */\n    /** Save and store bet information on bet server. On bet stop, it will send all previous bets to debit transaction. */\n    betPeek(roundId, gameType, gameCode, bets, count, uuid) {\n        const payload = {\n            roundId,\n            gameType,\n            gameCode,\n            bets,\n            count,\n            uuid,\n        };\n        this.send(GameAction.BET_PEEK, payload);\n    }\n    syncWallet() {\n        this.send(GameAction.SYNC_WALLET);\n    }\n    /** Request RGS to save new nickname */\n    rename(nickname) {\n        this.send(GameAction.SET_PREFERENCE, { player: { nickname } });\n    }\n    /**\n     * Request a day list that shows player bet and win subtotal.\n     * @param {number[]} days List of request days in UTC timestamp.\n     */\n    subtotalBetHistory(days) {\n        const payload = { days };\n        this.send(GameAction.SUBTOTAL_BET_HISTORY, payload);\n    }\n    /**\n     * Request a list of player's bet history.\n     * @param {number} limit The maximum number of records to return in the result set.\n     * @param {number?} offset The timestamp to skip before starting to return results.\n     */\n    listBetHistory(limit, offset) {\n        const payload = { limit, offset };\n        this.send(GameAction.LIST_BET_HISTORY, payload);\n    }\n    /** Send text message to game chat */\n    sendGameChatText(text) {\n        this.send(GameAction.CHAT_GAME, {\n            msg: {\n                content: {\n                    text,\n                    type: MessageContentType.TEXT,\n                },\n            },\n        });\n    }\n    /** List the history of game chat */\n    listGameChatHistory(gameCode, limit) {\n        this.send(GameAction.LIST_MESSAGE, {\n            gameCode,\n            limit,\n        });\n    }\n    /** List the history of support chat */\n    listSupportChatHistory(limit) {\n        this.send(GameAction.LIST_SUPPORT_MESSAGE, {\n            limit,\n        });\n    }\n    /** Send text message to support chat */\n    sendSupportChatChatText(text) {\n        this.send(GameAction.CHAT_SUPPORT, {\n            msg: {\n                content: {\n                    text,\n                    type: MessageContentType.TEXT,\n                },\n            },\n        });\n    }\n    /** Send game history to support chat. This is a convenience for frontend to render game history in chatroom */\n    sendSupportChatGameHistory(hist) {\n        this.send(GameAction.CHAT_SUPPORT, {\n            msg: {\n                content: Object.assign({\n                    type: MessageContentType.GAME_HISTORY,\n                }, hist),\n            },\n        });\n    }\n}\n//# sourceMappingURL=connect.js.map","class Element {\n    key;\n    value;\n    accessCount;\n    prev = null;\n    next = null;\n    constructor(key, value) {\n        this.key = key;\n        this.value = value;\n        this.accessCount = 0;\n    }\n}\nexport var LruCacheOption;\n(function (LruCacheOption) {\n    /** Move element to the end when set */\n    LruCacheOption[LruCacheOption[\"MoveToEndWhenSet\"] = 0] = \"MoveToEndWhenSet\";\n    /** Move element to the end when get */\n    LruCacheOption[LruCacheOption[\"MoveToEndWhenGet\"] = 1] = \"MoveToEndWhenGet\";\n})(LruCacheOption || (LruCacheOption = {}));\n/**\n * LruCache (Least Recently Used Cache) implementation.\n *\n * Provides a fixed-size cache that removes the least recently used items\n * when the capacity is reached. It supports operations like set, get, remove, and\n * retrieval of access count for each key.\n *\n * @template K The type of the keys in the cache.\n * @template V The type of the values in the cache.\n */\nexport class LruCache {\n    capacity;\n    map;\n    head;\n    tail;\n    options = new Map();\n    /**\n     * @param capacity Max size of elements\n     * @param options Define the conditions to move element to the end.\n     */\n    constructor(capacity, ...options) {\n        this.capacity = capacity;\n        this.capacity = capacity;\n        this.map = new Map();\n        this.head = null;\n        this.tail = null;\n        for (const opt of options) {\n            this.options.set(opt, true);\n        }\n    }\n    /** Insert the element by key */\n    set(key, value) {\n        if (this.map.size === this.capacity) {\n            this.pop();\n        }\n        const elem = this.map.get(key);\n        if (elem) {\n            elem.accessCount++;\n            elem.value = value;\n            if (this.options.get(LruCacheOption.MoveToEndWhenSet)) {\n                this.touch(key);\n            }\n            return;\n        }\n        const newElem = new Element(key, value);\n        this.pushToList(newElem);\n        this.map.set(key, newElem);\n    }\n    /** Returns the element of key */\n    get(key) {\n        const elem = this.map.get(key);\n        if (elem) {\n            if (this.options.get(LruCacheOption.MoveToEndWhenGet)) {\n                this.touch(key);\n            }\n            elem.accessCount++;\n            return elem.value;\n        }\n        return undefined;\n    }\n    /** Get the counter of the key has been set */\n    getAccessCount(key) {\n        const elem = this.map.get(key);\n        return elem ? elem.accessCount : 0;\n    }\n    /** Removes the element of key */\n    remove(key) {\n        const elem = this.map.get(key);\n        if (!elem)\n            return;\n        this.removeFromList(elem);\n        this.map.delete(key);\n    }\n    clear() {\n        for (const key of this.dump()) {\n            this.remove(key);\n        }\n    }\n    /** Inserts the element at the end */\n    pushToList(elem) {\n        if (!this.tail) {\n            this.head = this.tail = elem;\n            return;\n        }\n        this.tail.next = elem;\n        elem.prev = this.tail;\n        this.tail = elem;\n    }\n    removeFromList(elem) {\n        if (elem.prev) {\n            elem.prev.next = elem.next;\n        }\n        else {\n            this.head = elem.next;\n        }\n        if (elem.next) {\n            elem.next.prev = elem.prev;\n        }\n        else {\n            this.tail = elem.prev;\n        }\n        elem.prev = elem.next = null;\n    }\n    /** Removes the oldest element */\n    pop() {\n        if (this.head) {\n            this.remove(this.head.key);\n        }\n    }\n    has(key) {\n        return this.map.has(key);\n    }\n    /**\n     * Moves the element associated with the key to the most recent position.\n     */\n    touch(key) {\n        if (!this.has(key)) {\n            return;\n        }\n        const elem = this.map.get(key);\n        this.removeFromList(elem);\n        this.pushToList(elem);\n    }\n    get size() {\n        return this.map.size;\n    }\n    /** Retrieve keys in range what would not effect the order and counter */\n    dump() {\n        const keys = [];\n        let cursor = this.tail;\n        while (cursor) {\n            keys.push(cursor.key);\n            cursor = cursor.prev;\n        }\n        return keys;\n    }\n    /**\n     * Retrieve values in the cache without affecting the order or access counters.\n     *\n     * @param option - Determines the order of the returned values. Default is 'latestFirst'.\n     * @returns An array of values in the cache.\n     */\n    values(option = 'latestFirst') {\n        const values = [];\n        let cursor = this.tail;\n        while (cursor) {\n            const value = this.map.get(cursor.key)?.value;\n            if (value) {\n                if (option === 'latestLast') {\n                    values.splice(0, 0, value);\n                }\n                else {\n                    values.push(value);\n                }\n            }\n            cursor = cursor.prev;\n        }\n        return values;\n    }\n}\n//# sourceMappingURL=lru-cache.js.map"],"names":["ws","WebSocket","MozWebSocket","global","window","self","WebSocket$1","WsEvent","exports","WsAction","GameAction","GameEvent","Event","constructor","origin","_defineProperty","parse","type","_this$json","value","json","Object","values","includes","UNKNOWN","syn","_this$json2","timecode","_this$json3","isValid","data","_this$json4","undefined","error","_this$json5","bufStr","ArrayBuffer","TextDecoder","decode","Array","isArray","every","item","reduce","acc","buf","globalThis","Buffer","isBuffer","toString","JSON","_unused","KickedHandler","evt","conn","AfterKicked","DISCONNECT","kicked","after","close","EventHandler","SESSION_KICKED","execEventHandler","handler","SERVER_ACTIVATE_SESSION_PATH","Connect","sid","_this$launchUrl","URL","launchUrl","searchParams","get","_unused2","url","rgsUrl","pathname","set","handlerMap","Map","connect","_this$logger","_this$logger$error","logger","call","_this$logger2","_this$logger2$error","doConnect","lastMessageTime","Date","now","startHeartbeat","heartbeatTimer","clearInterval","doClose","emitEvent","WS_CLOSED","isConnected","onmessage","handleMessage","bind","onopen","handleOpened","onclose","handleClosed","onerror","handleError","_this$logger3","_this$logger3$error","errorEvent","WS_ERROR","Error","message","String","setTimeout","reconnect","reconnectDelayMs","_unused3","on","onElse","send","act","payload","_this$logger4","_this$logger4$info","info","synNo","dataStr","stringify","msg","ack","has","_this$logger5","_this$logger5$error","_this$logger6","_this$logger6$info","ACK","PING","reconnectCount","WS_RECONNECTED","WS_OPENED","event","readyState","OPEN","setInterval","inflightReconnect","heartbeatIntervalMs","lastHeartbeatTime","heartbeatTimeoutMs","promise","delay","Math","min","WS_RECONNECTING","Promise","r","setLogger","betPeek","roundId","gameType","gameCode","bets","count","uuid","BET_PEEK","syncWallet","SYNC_WALLET","rename","nickname","SET_PREFERENCE","player","subtotalBetHistory","days","SUBTOTAL_BET_HISTORY","listBetHistory","limit","offset","LIST_BET_HISTORY","sendGameChatText","text","CHAT_GAME","content","MessageContentType","TEXT","listGameChatHistory","LIST_MESSAGE","listSupportChatHistory","LIST_SUPPORT_MESSAGE","sendSupportChatChatText","CHAT_SUPPORT","sendSupportChatGameHistory","hist","assign","GAME_HISTORY","LruCacheOption"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}